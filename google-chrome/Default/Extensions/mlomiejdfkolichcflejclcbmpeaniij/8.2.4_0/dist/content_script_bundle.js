"undefined"!=typeof browser&&(chrome=browser),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=543)}({17:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},540:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=540},541:function(e,t){e.exports={import:function(){throw new Error("System.import cannot be used indirectly")}}},542:function(e,t,n){(function(r,o,i){var s,c,a;!function(e){function t(e){Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[m][e]}})}function r(e){if(o.isModule?o.isModule(e):"[object Module]"===Object.prototype.toString.call(e))return e;var t={default:e,__useDefault:e};if(e&&e.__esModule)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return new s(t)}function s(e){Object.defineProperty(this,m,{value:e}),Object.keys(e).forEach(t,this)}function c(e){return"@node/"===e.substr(0,6)?p(e,r(g(e.substr(6)))):h[e]}function a(e){var t=c(e);if(!t)throw new Error('Module "'+e+'" expected, but not contained in build.');if(t.module)return t.module;var n=t.linkRecord;return function e(t,n){if(!n.depLoads){n.declare&&u(t,n),n.depLoads=[];for(var r=0;r<n.deps.length;r++){var o=c(n.deps[r]);n.depLoads.push(o),o.linkRecord&&e(o,o.linkRecord);var i=n.setters&&n.setters[r];i&&(i(o.module||o.linkRecord.moduleObj),o.importerSetters.push(i))}return t}}(t,n),f(t,n,[]),t.module}function u(t,n){var r=n.moduleObj,o=t.importerSetters,i=!1,s=n.declare.call(e,function(e,t){if(!i){if("object"==typeof e)for(var n in e)"__useDefault"!==n&&(r[n]=e[n]);else r[e]=t;i=!0;for(var s=0;s<o.length;s++)o[s](r);return i=!1,t}},{id:t.key});"function"!=typeof s?(n.setters=s.setters,n.execute=s.execute):(n.setters=[],n.execute=s)}function l(e,t,n){return h[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:n,setters:void 0,execute:void 0,moduleObj:{}}}}function d(e,t,n,r){var o={};return h[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:void 0,execute:r,executingRequire:n,moduleObj:{default:o,__useDefault:o},setters:void 0}}}function f(t,n,r){if(r.push(t),t.module)return t.module;if(n.setters){for(var o=0;o<n.deps.length;o++){var i=n.depLoads[o],c=i.linkRecord;c&&-1===r.indexOf(i)&&f(i,c,c.setters?r:[])}n.execute.call(v)}else{var a={id:t.key},u=n.moduleObj;Object.defineProperty(a,"exports",{configurable:!0,set:function(e){u.default=u.__useDefault=e},get:function(){return u.__useDefault}});var l=function(e,t,n){return function(r){for(var o=0;o<e.length;o++)if(e[o]===r){var i,s=t[o],c=s.linkRecord;return"__useDefault"in(i=c?-1===n.indexOf(s)?f(s,c,n):c.moduleObj:s.module)?i.__useDefault:i}}}(n.deps,n.depLoads,r);if(!n.executingRequire)for(o=0;o<n.deps.length;o++)l(n.deps[o]);var d=n.execute.call(e,l,u.__useDefault,a);void 0!==d?u.default=u.__useDefault=d:a.exports!==u.__useDefault&&(u.default=u.__useDefault=a.exports);var p=u.__useDefault;if(p&&p.__esModule)for(var h in p)Object.hasOwnProperty.call(p,h)&&(u[h]=p[h])}a=t.module=new s(n.moduleObj);if(!n.setters)for(o=0;o<t.importerSetters.length;o++)t.importerSetters[o](a);return a}function p(e,t){return h[e]={key:e,module:t,importerSetters:[],linkRecord:void 0}}var h={},m="undefined"!=typeof Symbol?Symbol():"@@baseObject";s.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(s.prototype[Symbol.toStringTag]="Module");var g=o._nodeRequire||void 0!==i&&i.platform&&n(540),v={};return Object.freeze&&Object.freeze(v),function(e,t,n,o){return function(i){i(function(i){var c={_nodeRequire:g,register:l,registerDynamic:d,registry:{get:function(e){return h[e].module},set:p},newModule:function(e){return new s(e)}};p("@empty",new s({}));for(var u=0;u<t.length;u++)p(t[u],r(arguments[u]));o(c);var f=a(e[0]);if(e.length>1)for(u=1;u<e.length;u++)a(e[u]);return n?f.__useDefault:(f instanceof s&&Object.defineProperty(f,"__esModule",{value:!0}),f)})}}}("undefined"!=typeof self?self:void 0!==r?r:this)(["a"],[],!0,function(e){this.require;var t=this.exports,n=this.module;e.registerDynamic("b",[],!0,function(e,t,n){"use strict";this||self;Object.defineProperty(t,"__esModule",{value:!0}),t.default={platform:"webextension",brocfile:"Brocfile.node.js",baseURL:"/cliqz/",pack:"npm pack",publish:"aws s3 cp browser-core-$PACKAGE_VERSION.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz --acl public-read && aws s3 cp s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/latest.tgz --acl public-read",sourceMaps:!0,format:"common",settings:{ANOLYSIS_BACKEND_URL:"https://anolysis.privacy.cliqz.com",ANOLYSIS_STAGING_BACKEND_URL:"https://anolysis.privacy.clyqz.com",BACKGROUND_IMAGE_URL:"https://cdn.cliqz.com/brands-database/database/",BW_URL:"https://antiphishing.cliqz.com/api/bwlist?md5=",CAMPAIGN_SERVER:"https://fec.cliqz.com/message/",CDN_BASEURL:"https://cdn2.ghostery.com",CLIQZ_SAVE_URL:"https://cliqz.com/q=",CONFIG_PROVIDER:"https://safe-browsing.ghostery.com/config",ENDPOINT_ANONPATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns-anon.gz",ENDPOINT_BLIND_SIGNER:"https://ghostery-sign.ghostery.com/sign",ENDPOINT_CONFIGURL:"https://safe-browsing.ghostery.com/ts-config",ENDPOINT_HPNV2_COLLECTOR:"https://collector-hpn.cliqz.com",ENDPOINT_HPNV2_CONFIG:"https://collector-hpn.cliqz.com/config",ENDPOINT_HPNV2_JOIN:"https://collector-hpn.cliqz.com/join",ENDPOINT_KEYS_PROVIDER:"https://ghostery-collector.ghostery.com/signerKey",ENDPOINT_LOOKUP_TABLE_PROVIDER:"https://ghostery-collector.ghostery.com/v2/lookuptable",ENDPOINT_PATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns.gz",ENDPOINT_SAFE_QUORUM_ENDPOINT:"https://safe-browsing-quorum.ghostery.com/",ENDPOINT_SAFE_QUORUM_PROVIDER:"https://safe-browsing-quorum.ghostery.com/config",ENDPOINT_SOURCE_MAP_PROVIDER:"https://ghostery-collector.ghostery.com/sourcemapjson",ENDPOINT_URL:"https://api.cliqz.com/api/v1/rich-header?path=/map&bmresult=",ENDPOINT_USER_REG:"https://ghostery-sign.ghostery.com/register",FEEDBACK:"https://cliqz.com/feedback/",HB_NEWS:"hb-news.cliqz.com",HOMPAGE_URL:"https://cliqz.com/",INVENTORY_URL:"https://cdn.cliqz.com/browser-f/fun-demo/inventoryv2.txt.gz",JOBS_URL:"https://cliqz.com/jobs/",OFFERS_BE_BASE_URL:"https://offers.ghostery.com",PRIVACY_SCORE_URL:"https://anti-tracking.cliqz.com/api/v1/score?",RESULTS_PROVIDER:"https://api.cliqz.com/api/v2/results?nrh=1&q=",RESULTS_PROVIDER_LOG:"https://api.cliqz.com/api/v1/logging?q=",RESULTS_PROVIDER_PING:"https://api.cliqz.com/ping",RICH_HEADER:"https://api.cliqz.com/api/v2/rich-header?path=/v2/map",RICH_HEADER_PROXY_URL:"hb-news.cliqz.com",ROTATED_TOP_NEWS:"rotated-top-news.cliqz.com",SAFE_BROWSING:"https://safe-browsing.cliqz.com",STATISTICS:"https://stats.cliqz.com",SUGGESTIONS_URL:"https://cliqz.com/search?q=",SUPPORT_URL:"https://cliqz.com/support/",TEAM_URL:"https://cliqz.com/team/",TELEMETRY_ENDPOINT:"https://safebrowsing-experiment.cliqz.com",TRACKER_PROXY_PROXY_PEERS_DEFAULT:"https://p2p-signaling-proxypeer.cliqz.com/peers",TRACKER_PROXY_PROXY_PEERS_EXIT_DEFAULT:"https://p2p-signaling-proxypeer.cliqz.com/exitNodes",TRACKER_PROXY_PROXY_SIGNALING_DEFAULT:"wss://p2p-signaling-proxypeer.cliqz.com",TRIQZ_URL:"https://cliqz.com/tips",UNINSTALL:"https://cliqz.com/home/offboarding",channel:"CH80","triggers-root":"ghostery-root",MSGCHANNEL:"web-extension",KEY_DS_PUBKEY:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwXo4hXvboKHCggNJ0UNFvZQfDWi0jNcF1kBHthxilMu6LB/hFrSMQ+/FgTqVE36cCezWE0K1UcwmYGVsuqxcvql82RfCmYUVBroJ3UFG8qnetYfU5FOk43C555p5l5HzlF8QilcCUBCO4SCj9lEZ3/8FJboCupTqxEUq7nwUgaNZOiGKMdDUBZJO1tW4LSH4lj9IAZccEJ5HKVmJKopQ3hmzWgDqowxni4NQz+0DnsSfCGAupKaJDxjfajJosX5i674rgdHbZGtgHB3M9jhc6HFNPcmtUgLwgtUtRwMhSnya6q/O06euouNi1h0m5eRrWeMRlJSdUnelLSU8QNy7LQIDAQAB",KEY_SECURE_LOGGER_PUBKEY:"MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAh5HhcRAn6+6woXQXl/NtZ+fOooNglZct/HSpYuqkcmrPauHW7EuOSq5bvpBZRTDROjR/kUPomqVZIzqhdCFPA8BwXSCz7hAel2Q157vtBvh9sngMMLXb5Fgzef5N4EuKO8pL5KrS+I9tfZac41vFJSdpgAirZYhh+tdcQQ1z0Qv/Rw0zOXjfvddCz3gEv2gB9KsLMVnTS1J4YOOgfza2adg9Ebz1z99DiF4vtCwn0IUwH/3ToTBwJLbMnC3Ol43yBNk8rgK2mkgCi614vOSD3hnVmio+iW6+AUklM8VPl6l7hEK9cljJY+9UsMVmTrvaFbMPwS6AdZCXKTmNdaMJcy3zSOXu5zvzihoQLwAu9LM3l2eVk0Mw0K7JXOP20fc8BtzWCOLYVP32r4R0BNuhTtvGqjHNZHPJN5OwaxkLpn2dujL9uDWGjRiOItKMVq/nOqmNGghrbf8IOaKT7VQhqOU4cXRkB/uF1UjYETBavwUZAxx9Wd/cMcAGmKiDxighxxQ29jDufl+2WG065tmJz+zCxmgrPh6Zb3KFUxPTe6yksAhWJhmGShA9v20t84M5c6NpZXoUsFcVja6XxzHeSB8dWq9Uu5QcZ83Gz/ronwdEjT2OGTtBgOFeTDqLYUgphC1gcUEHOCnTNXRMQOXqGwBfZHp+Mq61QcMq2rNS7xECAwEAAQ==",HPN_CHANNEL:"ghostery",ATTRACK_TELEMETRY_PROVIDER:"hpn",HW_CHANNEL:"ghostery",ALLOWED_COUNTRY_CODES:["de","at","ch","es","us","fr","nl","gb","it","be","se","dk","fi","cz","gr","hu","ro","no","ca","au","ru","ua","in","pl","jp","br","mx","cn","ar"],antitrackingPlaceholder:"ghostery",antitrackingHeader:"Ghostery-AntiTracking",frameScriptWhitelist:[]},default_prefs:{"modules.human-web.enabled":!0,"modules.offers-v2.enabled":!0,"modules.message-center.enabled":!1,"modules.antitracking.enabled":!0,"modules.anti-phishing.enabled":!1,"modules.adblocker.enabled":!0,offers2FeatureEnabled:!0,offersLogsEnabled:!0,showConsoleLogs:!1,"cliqz-adb":!0,"cliqz-adb-abtest":!0,attrackBloomFilter:!0,humanWeb:!0,"cliqz-anti-phishing":!0,"cliqz-anti-phishing-enabled":!0,attrackRemoveQueryStringTracking:!1,attrackTelemetryMode:1,attrackDefaultAction:"placeholder",sendAntiTrackingHeader:!1,telemetry:!1,attrackCookieTrustReferers:!0},bundles:["core/content-script.bundle.js","hpn/worker.bundle.js"],modules:["core","message-center","human-web","hpn","antitracking","webrequest-pipeline","static","offers-v2","adblocker","anolysis","anti-phishing"],system:{map:{BigInt:"node_modules/BigInt/src/BigInt.js"},meta:{BigInt:{format:"cjs"}}},subprojects:[],environment:"production",debugPages:!1,EXTENSION_VERSION:"7.28.6",instrumentFunctions:""}}),e.registerDynamic("c",[],!0,function(e,t,n){"use strict";this||self;Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeAclkUrl=function(e){const t=e.split("aclk?");if(2!==t.length)throw new Error(`Expected Google pagead "aclk" URL. Instead got: ${e}`);return t[1].replace(/ved=.*&/,"").replace(/&q=&adurl=$/,"").replace(/&adurl=&q=$/,"")}}),e.registerDynamic("d",["e","c"],!0,function(e,t,n){"use strict";this||self;Object.defineProperty(t,"__esModule",{value:!0}),t.parseDom=s;var r=e("e"),o=e("c");function i(e){window.console.error("[human-web] Exception caught:",e)}function s(e,t){const n=t.document;try{let e=null;if((e=n.querySelector("script"))&&e.innerHTML.indexOf("location.replace")>-1){const e=n.querySelector("title").textContent;chrome.runtime.sendMessage({source:r.CHROME_MSG_SOURCE,payload:{module:"human-web",action:"jsRedirect",args:[{message:{location:e,url:n.location.href}}]}})}}catch(e){i(e)}try{let e="",t=!1;n.querySelector("#s0p1c0")&&(e=n.querySelector("#s0p1c0").href),n.querySelector("#tads .ads-ad")&&null===n.querySelector("#tads .ads-ad").offsetParent&&(t=!0);const o={type:"dom",ad:e,hidden:t};chrome.runtime.sendMessage({source:r.CHROME_MSG_SOURCE,payload:{module:"human-web",action:"contentScriptTopAds",args:[{message:o}]}})}catch(e){i(e)}try{const e={},n=t.document;let s=0;const c={query:{element:"#ires",attribute:"data-async-context"},adSections:[".ads-ad",".pla-unit-container",".pla-hovercard-content-ellip",".cu-container tr"],0:{cu:".ad_cclk h3 a[id^='s0p'],.ad_cclk h3 a[id^='n1s0p'],.ad_cclk h3 a[id^='s3p']",fu:".ad_cclk h3 a[id^='vs0p'],.ad_cclk h3 a[id^='vn1s0p'],.ad_cclk h3 a[id^='vs3p']"},1:{cu:"a[id^='plaurlg']",fu:"a[id^='vplaurlg']"},2:{cu:"a[id^='plaurlh']",fu:"a[id^='vplaurlh']"},3:{cu:"a[id^='plaurlt']",fu:"a[id^='vplaurlt']"}},a=n.querySelector(c.query.element);let u="";if(a){u=a.getAttribute(c.query.attribute).replace("query:","");try{u=decodeURIComponent(u)}catch(e){}}c.adSections.forEach((t,r)=>{Array.prototype.slice.call(n.querySelectorAll(t)).forEach(t=>{const n=c[r].cu,i=c[r].fu,a=t.querySelector(n),l=t.querySelector(i);if(a&&l){const t=(0,o.normalizeAclkUrl)(a.href);e[t]={ts:Date.now(),query:u,furl:[l.getAttribute("data-preconnect-urls"),l.href]},s+=1}})}),s>0&&chrome.runtime.sendMessage({source:r.CHROME_MSG_SOURCE,payload:{module:"human-web",action:"adClick",args:[{ads:e}]}})}catch(e){i(e)}}(0,r.registerContentScript)("http*",e=>{e.location.href;e.top===e&&e.addEventListener("DOMContentLoaded",()=>{s(0,e)})})}),e.registerDynamic("f",[],!0,function(e,t,n){"use strict";this||self;Object.defineProperty(t,"__esModule",{value:!0});const r=["voucher","discount","coupon","rabatt","gutschein","promo"],o=(e,t)=>e.concat(t);function i(e){const t=[];return e.filter(e=>e).forEach(e=>{const n=function(e){return[...e.querySelectorAll("input")].filter(e=>"hidden"!==e.type&&"password"!==e.type&&r.some(t=>e.name.toLowerCase().indexOf(t)>-1||e.id.toLowerCase().indexOf(t)>-1))}(e);if(1!==n.length)return;const i=function(e){const t=[...e.querySelectorAll("button")]||[],n=([...e.querySelectorAll("input")]||[]).filter(e=>e&&e.type&&"submit"===e.type.toLowerCase());return o(t,n)}(e);1===i.length&&t.push({input:n[0],button:i[0]})}),t}const s=e=>{const t=i(e);return 1!==t.length?null:t[0]};class c{constructor(e){let t=e.input,n=e.button,r=e.notifyCallback;this.input=t,this.button=n,this.notifyCallback=r,this._clickCb=this._clickCb.bind(this)}unload(){this.button&&this.button.removeEventListener("click",this._clickCb)}isValid(){return this.input&&this.button}configure(){this.isValid()&&(this.button.removeEventListener("click",this._clickCb),this.button.addEventListener("click",this._clickCb))}setInputFieldContent(e){this.input&&0===this.input.value.length&&null!==e&&(this.input.value=e)}getInputField(){return this.input?this.input.value:""}_clickCb(e){if(!e||"click"!==e.type)return;const t=this.getInputField();this.notifyCallback&&this.notifyCallback(t)}}t.default=class{constructor(e,t,n){this.window=e,this.chrome=t,this.offerInfo=null,this.mutationObserver=null,this.backgroundAction=n,this._onMutations=this._onMutations.bind(this),this._onFormClicked=this._onFormClicked.bind(this)}activate(e){e&&(this.offerInfo=e,this.mutationObserver||(this.mutationObserver=new this.window.MutationObserver(e=>this._onMutations(e)),this.mutationObserver.observe(this.window.document,{childList:!0,subtree:!0})),this.pageLoaded())}pageLoaded(){const e=[...this.window.document.querySelectorAll("form")];this._getAndProcessFormsFromTargets(e)}deactivate(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}_onFormClicked(e){this.backgroundAction&&this.backgroundAction("couponFormUsed",{offerInfo:this.offerInfo,couponValue:e,url:this.window.location.href})}_onMutations(e){const t=new Set(e.map(e=>e.target).filter(e=>e&&e.tagName&&"form"===e.tagName.toLowerCase()));this._getAndProcessFormsFromTargets([...t])}_getAndProcessFormsFromTargets(e){const t=s(e);t&&(t.notifyCallback=this._onFormClicked,this.couponForm&&this.couponForm.unload(),this.couponForm=new c(t)),this._processCouponForm(this.couponForm)}_processCouponForm(e){e&&(this.offerInfo.autoFillField&&e.setInputFieldContent(this.offerInfo.code),e.configure())}}}),e.registerDynamic("10",["e","f"],!0,function(e,t,n){"use strict";this||self;var r=e("e"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("f"));(0,r.registerContentScript)("http*",function(e,t){const n=function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t.runtime.sendMessage({source:r.CHROME_MSG_SOURCE,payload:{module:"offers-v2",action:e,args:o}},e=>{e.response.activate?c(e.response.offerInfo):a()})},i=e.location.href;let s=null;const c=r=>{s&&r||(s=new o.default(e,t,n)).activate(r)},a=()=>{s&&(s.deactivate(),s=null)},u=e=>{(0,r.isCliqzContentScriptMsg)(e)&&(e=>e&&"offers-v2"===e.module&&e.response&&e.response.url===i)(e)&&(e.response.activate?c(e.response.offerInfo):a())},l=()=>{n("activateCouponDetectionOnUrl",i)},d=()=>{s&&s.deactivate(),t.runtime.onMessage.removeListener(u),e.removeEventListener("unload",d),e.removeEventListener("load",l)};e.addEventListener("load",l),e.addEventListener("unload",d),t.runtime.onMessage.addListener(u)})}),function(r,o){"object"==typeof t&&void 0!==n?o(t):e.registerDynamic("11",[],!1,function(e,t,n){return o.call(t,t)})}(0,function(e){"use strict";var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){var n="\n    try {\n      "+e+"\n    } catch (ex) { }\n\n    (function() {\n      var currentScript = document.currentScript;\n      var parent = currentScript && currentScript.parentNode;\n\n      if (parent) {\n        parent.removeChild(currentScript);\n      }\n    })();\n  ",r=t.createElement("script");r.type="text/javascript",r.id="cliqz-adblocker-script",r.appendChild(t.createTextNode(n)),(t.head||t.documentElement).appendChild(r)}function o(e,t){var n=new RegExp(e);t.addEventListener("beforescriptexecute",function(e){var t=e.target;t.textContent&&n.test(t.textContent)&&(e.preventDefault(),e.stopPropagation())})}var i=function(){function e(n,r){t(this,e),this.window=n,this.backgroundAction=r,this.mutationObserver=null,this.injectedRules=new Set,this.injectedScripts=new Set,this.blockedScripts=new Set,this.observedNodes=new Set,this.backgroundAction("getCosmeticsForDomain"),this.onMutation([{target:this.window.document.body}]),this.startObserving()}return n(e,[{key:"unload",value:function(){if(this.mutationObserver)try{this.mutationObserver.disconnect()}catch(e){}}},{key:"handleResponseFromBackground",value:function(e){var t=e.active,n=e.scripts,i=e.blockedScripts,s=e.styles;if(t){for(var c=0;c<n.length;c+=1){var a=n[c];this.injectedScripts.has(a)||(r(a,this.window.document),this.injectedScripts.add(a))}for(var u=0;u<i.length;u+=1){var l=i[u];this.blockedScripts.has(l)||(o(l,this.window.document),this.blockedScripts.add(l))}this.handleRules(s)}else this.unload()}},{key:"handleRules",value:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e[n];if(!this.injectedRules.has(r)){try{if(!this.window.document.querySelector(r))continue}catch(e){continue}this.injectedRules.add(r),t.push(" :root "+r)}}t.length>0&&function(e,t){var n=t.createElement("style");n.type="text/css",n.id="cliqz-adblokcer-css-rules",(t.head||t.documentElement).appendChild(n),n.appendChild(t.createTextNode(e))}(t.join(" ,")+" {display:none !important;}",this.window.document)}},{key:"onMutation",value:function(e){var t=this,n=new Set(e.map(function(e){return e.target}).filter(function(e){return e}));if(n.size>100&&(n=new Set([this.window.document.body])),0!==n.size){var r=new Set;n.forEach(function(e){for(var n=e.querySelectorAll("*"),o=0;o<n.length;o+=1){var i=n[o];if(!i.hidden){if(i.id){var s="#"+i.id;t.observedNodes.has(s)||(r.add(s),t.observedNodes.add(s))}if(i.tagName){var c=i.tagName;t.observedNodes.has(c)||(r.add(c),t.observedNodes.add(c))}i.className&&i.className.split&&i.className.split(" ").forEach(function(e){var n="."+e;t.observedNodes.has(n)||(r.add(n),t.observedNodes.add(n))})}}}),r.size>0&&this.backgroundAction("getCosmeticsForNodes",[[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))])}}},{key:"startObserving",value:function(){var e=this;void 0!==this.window.MutationObserver&&(this.mutationObserver=new this.window.MutationObserver(function(t){return e.onMutation(t)}),this.mutationObserver.observe(this.window.document,{childList:!0,subtree:!0}))}}]),e}();e.CosmeticsInjection=i,Object.defineProperty(e,"__esModule",{value:!0})}),e.registerDynamic("12",["11"],!0,function(e,t,n){"use strict";this||self;Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("11"));t.default=r}),e.registerDynamic("13",["e","12"],!0,function(e,t,n){"use strict";this||self;var r=e("e"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("12"));(0,r.registerContentScript)("http*",(e,t)=>{let n=!0;if(!e.location.href)return;const i=new o.default.CosmeticsInjection(e,function(e){for(var o=arguments.length,s=Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];n&&t.runtime.sendMessage({source:r.CHROME_MSG_SOURCE,payload:{module:"adblocker",action:e,args:s}},e=>i.handleResponseFromBackground(e.response))}),s=e=>{if("adblocker"===e.module&&(e.payload&&i.handleResponseFromBackground(e.payload),(0,r.isCliqzContentScriptMsg)(e)&&e.response)){if(e.response.moduleDisabled||!1===e.response.active)return n=!1,void i.unload();i.handleResponseFromBackground(e.response)}},c=()=>{i.unload(),e.removeEventListener("unload",c),t.runtime.onMessage.removeListener(s)};e.addEventListener("unload",c),t.runtime.onMessage.addListener(s)})}),e.registerDynamic("14",["e"],!0,function(e,t,n){"use strict";this||self;var r=e("e");(0,r.registerContentScript)("http*",(e,t)=>{const n=e.location.href;if(e.parent&&e.parent===e){const e={module:"anti-phishing",action:"isPhishingURL",args:[n]};t.runtime.sendMessage({source:r.CHROME_MSG_SOURCE,payload:e})}t.runtime.onMessage.addListener(t=>{if(!(0,r.isCliqzContentScriptMsg)(t))return;t&&t.response&&"phishingURL"===t.response.type&&t.response.block&&(e.location="chrome://cliqz/content/anti-phishing/phishing-warning.html?u="+encodeURIComponent(e.location))})})}),e.registerDynamic("15",["d","10","13","14"],!0,function(e,t,n){"use strict";this||self;e("d"),e("10"),e("13"),e("14")}),e.registerDynamic("16",[],!0,function(e,t,n){"use strict";this||self;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var n,r=String(e),o="",i=!!t&&!!t.extended,s=!!t&&!!t.globstar,c=!1,a=t&&"string"==typeof t.flags?t.flags:"",u=0,l=r.length;u<l;u++)switch(n=r[u]){case"\\":case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":o+="\\"+n;break;case"?":if(i){o+=".";break}case"[":case"]":if(i){o+=n;break}case"{":if(i){c=!0,o+="(";break}case"}":if(i){c=!1,o+=")";break}case",":if(c){o+="|";break}o+="\\"+n;break;case"*":for(var d=r[u-1],f=1;"*"===r[u+1];)f++,u++;var p=r[u+1];if(s){var h=f>1&&("/"===d||void 0===d)&&("/"===p||void 0===p);h?(o+="((?:[^/]*(?:/|$))*)",u++):o+="([^/]*)"}else o+=".*";break;default:o+=n}a&&~a.indexOf("g")||(o="^"+o+"$");return new RegExp(o,a)}}),e.registerDynamic("e",["16"],!0,function(e,t,n){"use strict";this||self;Object.defineProperty(t,"__esModule",{value:!0}),t.CHROME_MSG_SOURCE=void 0,t.registerContentScript=function(e,t){o[e]=o[e]||[],o[e].push(t)},t.runContentScripts=function(e,t,n){const i=e.location.href;Object.keys(o).filter(e=>{const t=(0,r.default)(e);return t.test(i)}).forEach(r=>{o[r].forEach(r=>{try{r(e,t,n)}catch(t){e.console.error(`CLIQZ content-script failed: ${t} ${t.stack}`)}})})},t.isCliqzContentScriptMsg=function(e){return e.source&&e.source===i};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("16"));const o={};const i=t.CHROME_MSG_SOURCE="cliqz-content-script"}),e.registerDynamic("17",[],!0,function(e,t,n){"use strict";this||self;Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t,n){let r,o;return function(){for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];const a=Date.now();r&&a<r+n?(e.clearTimeout(o),o=e.setTimeout(()=>{r=a,t(...s)},n)):(r=a,t(...s))}},t.nextTick=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Promise.resolve().then(()=>e(...n))}}),e.registerDynamic("18",["b","15","e","17"],!0,function(e,t,n){"use strict";this||self;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("b"));e("15");var o=e("e"),i=e("17");const s=["chrome://cliqz/","resource://cliqz/"].concat(r.default.settings.frameScriptWhitelist);!function(){try{if("html"!==window.document.documentElement.nodeName.toLowerCase())return;(0,o.runContentScripts)(window,chrome);const c=()=>window.location.href;c();let a={postMessage:function(e){return window.postMessage(e,"*"),null},getHTML:function(){return window.document.documentElement.outerHTML},click:function(e){const t=window.document.querySelector(e);try{return t.click(),!0}catch(e){return!1}},queryHTML:function(e,t){let n=t.split(",");return Array.prototype.map.call(window.document.querySelectorAll(e),function(e){return n.length>1?n.reduce(function(t,n){return t[n]=e[n],t},{}):e[t]})},getCookie:function(){try{return window.document.cookie}catch(e){if(e instanceof DOMException&&"SecurityError"==e.name)return null;throw e}}};function e(e){return function(t){chrome.runtime.sendMessage({source:o.CHROME_MSG_SOURCE,payload:{module:"core",action:e,args:[{target:{baseURI:t.target.baseURI}}]}})}}let u=function(e){const t=[];if(window.parent!==window&&window.document&&window.document.scripts)for(let e=0;e<window.document.scripts.length;e+=1){const n=window.document.scripts[e].src;n.startsWith("http")&&t.push(n)}let n=e.target;1!==n.nodeType&&(n=n.parentNode);let r=null;n.closest("a[href]")&&(r=n.closest("a[href]").getAttribute("href")),chrome.runtime.sendMessage({source:o.CHROME_MSG_SOURCE,payload:{module:"core",action:"recordMouseDown",args:[{target:{baseURI:e.target.baseURI,value:e.target.value,href:e.target.href,parentNode:{href:e.target.parentNode.href},linksSrc:t}},function(e){var t,n=e.target,r=0;try{for(;;){if(-1!==(t=n.innerHTML).indexOf("http://")||-1!==t.indexOf("https://"))return t;if(n=n.parentNode,(r+=1)>4)break}}catch(e){}}(e),r]}})},l=function(e){let t=window.document.getElementsByTagName("html").item(0).getAttribute("lang");if(!!e.target.defaultView.frameElement)return;const n=window.document.querySelector("title"),r=window.document.querySelector("meta[name=description]"),i=window.document.querySelector('meta[property="og:title"]'),s=window.document.querySelector('meta[property="og:description"]'),a=window.document.querySelector('meta[property="og:image"]');chrome.runtime.sendMessage({source:o.CHROME_MSG_SOURCE,payload:{module:"core",action:"recordMeta",args:[c(),{title:n&&n.innerHTML,description:r&&r.content,ogTitle:i&&i.content,ogDescription:s&&s.content,ogImage:a&&a.content,lang:t}]}})};function t(e){(0,o.isCliqzContentScriptMsg)(e)&&(e.windowId?function(e){r()||s.some(function(e){return 0===c().indexOf(e)})&&"content"===e.origin&&window.postMessage(JSON.stringify({target:"cliqz",type:"response",response:e.response,action:e.action,module:e.module,requestId:e.requestId}),"*")}(e):function(e){let t;if(r())return;if("unload"===e.action)return void n();const i=c();let s=e.url===i;if(!e.url||0!==e.url.indexOf("resource://cliqz")&&0!==e.url.indexOf("chrome://cliqz")||0===i.indexOf(e.url)&&(s=!0),s&&e.action in a){try{if(null===(t=a[e.action].apply(null,e.args||[])))return}catch(e){window.console.error("cliqz framescript:",e)}chrome.runtime.sendMessage({source:o.CHROME_MSG_SOURCE,origin:"content",payload:t,requestId:e.requestId})}}(e))}const d=(0,i.throttle)(window,e("recordKeyPress"),250),f=(0,i.throttle)(window,e("recordMouseMove"),250),p=(0,i.throttle)(window,e("recordScroll"),250),h=(0,i.throttle)(window,e("recordCopy"),250);function n(e){if(!e||e.target===window.document){try{String(window)}catch(e){return}chrome.runtime.onMessage.removeListener(t),window.removeEventListener("keypress",d),window.removeEventListener("mousemove",f),window.removeEventListener("mousedown",u),window.removeEventListener("scroll",p),window.removeEventListener("copy",h),window.removeEventListener("DOMContentLoaded",l)}}function r(){try{return c(),!1}catch(e){return n(),!0}}window.addEventListener("keypress",d),window.addEventListener("mousemove",f),window.addEventListener("mousedown",u),window.addEventListener("scroll",p),window.addEventListener("copy",h),window.addEventListener("DOMContentLoaded",l),chrome.runtime.onMessage.addListener(t),window.addEventListener("unload",n)}catch(e){window.console.error("Content Script error",e)}}()}),e.registerDynamic("a",["18"],!0,function(e,t,n){"use strict";this||self;e("18")})})(function(n){c=[],void 0===(a="function"==typeof(s=n)?s.apply(t,c):s)||(e.exports=a)})}).call(this,n(17),n(541),n(92))},543:function(e,t,n){e.exports=n(542)},92:function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,u=[],l=!1,d=-1;function f(){l&&a&&(l=!1,a.length?u=a.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=c(f);l=!0;for(var t=u.length;t;){for(a=u,u=[];++d<t;)a&&a[d].run();d=-1,t=u.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}});