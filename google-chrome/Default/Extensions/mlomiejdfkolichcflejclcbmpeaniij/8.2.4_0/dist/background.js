"undefined"!=typeof browser&&(chrome=browser),function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1233)}([,function(e,t,r){"use strict";var n=r(16),i=r(201),s=r(2),a=r(182),o=r(183),u=r(3);const c="edge"===u.a.BROWSER_INFO.name,{IS_CLIQZ:l}=u.a,d={set:(e,t,r)=>(Object(s.log)("Setting update value for",t),l&&("enable_human_web"!==t&&"enable_offers"!==t&&"enable_anti_tracking"!==t&&"enable_ad_block"!==t||(r=!1)),c&&("enable_human_web"!==t&&"enable_offers"!==t||(r=!1)),"reload_banner_status"!==t&&"trackers_banner_status"!==t||r&&"object"==typeof r&&(r=!!r.show),e[t]=r,u.a.INIT_COMPLETE?Object(s.pref)(t,r):u.a.initProps[t]=r,a.a.trigger(`conf.save.${t}`,r),(e.SYNC_SET.has(t)||"bugs_last_checked"===t)&&a.a.trigger("conf.changed.settings",t),Object(n.debounce)(o.a.setUninstallUrl.bind(o.a),200)(t),!0)};t.a=new Proxy(i.a,d)},function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"log",function(){return i}),r.d(t,"prefsGet",function(){return s}),r.d(t,"prefsSet",function(){return a}),r.d(t,"pref",function(){return o}),r.d(t,"hashCode",function(){return u}),r.d(t,"objectEntries",function(){return c}),r.d(t,"decodeJwt",function(){return d});const n=chrome.runtime.getManifest().log||!1;function i(...e){if(!n)return!1;const t=e.toString().toLowerCase().includes("error");return e.unshift(`${(new Date).toLocaleTimeString()}\t`),t?console.error(...e):console.log(...e),!0}function s(...e){return new Promise((t,r)=>{chrome.storage.local.get(e.length?e:null,n=>{if(chrome.runtime.lastError)i("prefsGet ERROR",chrome.runtime.lastError),r(new Error(chrome.runtime.lastError));else{let r=null;if(e.length<=0)r=n;else if(1===e.length){const t=e[0];n&&n.hasOwnProperty(t)&&(r=n[t])}else r={},e.forEach(e=>{r[e]=null,n&&n.hasOwnProperty(e)&&(r[e]=n[e])});t(r)}})})}function a(e){return i("PREFS SET",e),new Promise((t,r)=>{void 0!==e?chrome.storage.local.set(e,()=>{chrome.runtime.lastError?(i("prefsSet ERROR",chrome.runtime.lastError),r(new Error(chrome.runtime.lastError))):t(e)}):(i("prefsSet ERROR",chrome.runtime.lastError),r(new Error(chrome.runtime.lastError)))})}function o(e,t){if(void 0===t)return s(e);const r={};return r[e]=t,a(r)}function u(e){let t,r,n=0;if(0===e.length)return n;for(r=0;r<e.length;r++)n=(n<<5)-n+(t=e.charCodeAt(r)),n&=n;return n}function*c(e){const t=Object.keys(e);for(const r of t)yield[r,e[r]]}function l(t){return new e(function(e){return(e+=new Array(5-e.length%4).join("=")).replace(/\-/g,"+").replace(/_/g,"/")}(t),"base64").toString()}function d(e){const t=e.split(".");if(3!==t.length)return null;const r=t[0],n=t[1],i=t[2];return{header:JSON.parse(l(r)),payload:JSON.parse(l(n)),signature:i}}}.call(this,r(37).Buffer)},function(e,t,r){"use strict";var n=r(26),i=r.n(n);const s=chrome.runtime.getManifest();t.a=new class{constructor(){this.DEBUG=s.debug||!1,this.LOG=this.DEBUG&&s.log,this.EXTENSION_NAME=s.name||"Ghostery",this.EXTENSION_VERSION=s.version_name||s.version,this.BROWSER_INFO={displayName:"",name:"",token:"",version:"",os:"other"},this.IS_CLIQZ=!!(s.applications&&s.applications.gecko&&s.applications.gecko.update_url),this.JUST_INSTALLED=!1,this.JUST_UPGRADED=!1,this.JUST_UPGRADED_FROM_7=!1,this.JUST_UPGRADED_FROM_8_1=!1,this.HOTFIX=!1,this.LET_REDIRECTS_THROUGH=!1,this.C2P_LOADED=!1,this.NOTIFICATIONS_LOADED=!1,this.upgrade_alert_shown=!1,this.INIT_COMPLETE=!1,this.initProps={},this.GHOSTERY_DOMAIN=this.DEBUG?"ghosterystage":"ghostery",this.METRICS_SUB_DOMAIN=this.DEBUG?"staging-d":"d",this.CMP_SUB_DOMAIN=this.DEBUG?"staging-cmp-cdn":"cmp-cdn",this.CDN_SUB_DOMAIN=this.DEBUG?"staging-cdn":"cdn",this.APPS_SUB_DOMAIN=this.DEBUG?"staging-apps":"apps",this.GCACHE_SUB_DOMAIN=this.DEBUG?"staging-gcache":"gcache",this.AUTH_SERVER=`https://consumerapi.${this.GHOSTERY_DOMAIN}.com`,this.ACCOUNT_SERVER=`https://accountapi.${this.GHOSTERY_DOMAIN}.com`,this.REDIRECT_MAP=new Map,this.BLOCKED_REDIRECT_DATA={},this.EXCLUDES=["extension.ghostery.com","extension.ghosterystage.com","extension.ghosterydev.com","signon.ghostery.com","signon.ghosterystage.com","account.ghostery.com","account.ghosterystage.com"],this.SYNC_ARRAY=["alert_bubble_pos","alert_bubble_timeout","alert_expanded","block_by_default","enable_ad_block","enable_anti_tracking","enable_autoupdate","enable_click2play","enable_click2play_social","enable_human_web","enable_metrics","enable_offers","enable_smart_block","expand_all_trackers","hide_alert_trusted","ignore_first_party","import_callout_dismissed","is_expanded","is_expert","notify_library_updates","notify_upgrade_updates","reload_banner_status","selected_app_ids","show_alert","show_badge","show_cmp","show_tracker_urls","site_specific_blocks","site_specific_unblocks","toggle_individual_trackers","trackers_banner_status"],this.SESSION={paused_blocking:!1,paused_blocking_timeout:0,abtests:{},cmp_data:{}},this.buildBrowserInfo()}buildBrowserInfo(){const e=i()(navigator.userAgent),t=e.browser.name.toLowerCase(),r=parseInt(e.browser.version.toString(),10),n=e.os.name.toLowerCase();this.IS_CLIQZ?(this.BROWSER_INFO.displayName="Cliqz",this.BROWSER_INFO.name="cliqz",this.BROWSER_INFO.token="cl"):t.includes("edge")?(this.BROWSER_INFO.displayName="Edge",this.BROWSER_INFO.name="edge",this.BROWSER_INFO.token="ed"):t.includes("opera")?(this.BROWSER_INFO.displayName="Opera",this.BROWSER_INFO.name="opera",this.BROWSER_INFO.token="op"):t.includes("chrome")?(this.BROWSER_INFO.displayName="Chrome",this.BROWSER_INFO.name="chrome",this.BROWSER_INFO.token="ch"):t.includes("firefox")?(this.BROWSER_INFO.displayName="Firefox",this.BROWSER_INFO.name="firefox",this.BROWSER_INFO.token="ff"):t.includes("yandex")&&(this.BROWSER_INFO.displayName="Yandex",this.BROWSER_INFO.name="yandex",this.BROWSER_INFO.token="yx"),n.includes("mac")?this.BROWSER_INFO.os="mac":n.includes("win")?this.BROWSER_INFO.os="win":n.includes("linux")?this.BROWSER_INFO.os="linux":n.includes("android")&&(this.BROWSER_INFO.os="android"),this.BROWSER_INFO.version=r}}},function(e,t,r){"use strict";var n=r(54),i=r(1110),s=r(172),a=r(240),o=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,s=i.toSubscriber(e,t,r);if(n?n.call(s,this.source):s.add(this.source||!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i;i=r.subscribe(function(t){if(i)try{e(t)}catch(e){n(e),i.unsubscribe()}else e(t)},n,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[s.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:a.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();t.Observable=o},,,,function(e,t,r){"use strict";r.r(t),r.d(t,"sendMessage",function(){return h}),r.d(t,"sendMessageToFrame",function(){return f}),r.d(t,"sendMessageToPanel",function(){return p}),r.d(t,"isValidTopLevelNavigation",function(){return m}),r.d(t,"flushChromeMemoryCache",function(){return _}),r.d(t,"defineLazyProperty",function(){return g}),r.d(t,"processFpeUrl",function(){return y}),r.d(t,"processUrl",function(){return v}),r.d(t,"processUrlQuery",function(){return b}),r.d(t,"getTab",function(){return $}),r.d(t,"getActiveTab",function(){return w}),r.d(t,"openNewTab",function(){return M}),r.d(t,"postJson",function(){return O}),r.d(t,"getJson",function(){return x}),r.d(t,"fetchLocalImageResource",function(){return T}),r.d(t,"fetchLocalJSONResource",function(){return E}),r.d(t,"injectScript",function(){return D}),r.d(t,"injectNotifications",function(){return L}),r.d(t,"isCliqzOffer",function(){return P});var n=r(16),i=r.n(n),s=r(202),a=r.n(s),o=r(10),u=r(3),c=r(2);const{BROWSER_INFO:l}=u.a,d="firefox"===l.name;function h(e,t,r,n=function(){}){Object(c.log)(`BACKGROUND SENT ${t} TO TAB`),chrome.tabs.sendMessage(e,{name:t,message:r},n)}function f(e,t,r,n,i=function(){}){Object(c.log)(`BACKGROUND SENT ${r} TO TAB ${e} - FRAME ${t}`),chrome.tabs.sendMessage(e,{name:r,message:n},{frameId:t},i)}function p(e,t){Object(c.log)("BACKGROUND SENDS MESSAGE TO PANEL",e),chrome.runtime.sendMessage({name:e,message:t})}function m(e){const{url:t}=e;return 0===e.frameId&&e.tabId>0&&t.startsWith("http")&&!t.startsWith("https://chrome.google.com/webstore/")}const _=i.a.debounce(()=>{chrome.webRequest.handlerBehaviorChanged()},35e3,!0);function g(e,t,r){let n,i=!1;Object.defineProperty(e,t,{get:()=>(i||(n=r(),i=!0),n),set(e){n=e,i=!0}})}function y(e){const t=e.indexOf("/");return{host:-1===t?e:e.substring(0,t),path:-1===t?"":e.substring(t+1)}}function v(e){if(!e)return{};const t=a.a.parse(e);return{protocol:t.protocol?t.protocol.substr(0,t.protocol.length-1):"",host:t.hostname||"",path:t.pathname?t.pathname.substr(1):"",host_with_path:(t.host||"")+(t.pathname||""),anchor:t.hash?t.hash.substr(1):""}}function b(e){return e?a.a.parse(e,!0).query:{}}function $(e,t,r){chrome.tabs.get(e,e=>{chrome.runtime.lastError?(Object(c.log)("getTab",chrome.runtime.lastError.message),r&&"function"==typeof r&&r(chrome.runtime.lastError)):e&&"function"==typeof t&&t(e)})}function w(e){chrome.tabs.query({active:!0,currentWindow:!0},t=>{e(t[0])})}function k(e){w(t=>{t?chrome.tabs.create({url:e.url,active:e.become_active||!1,openerTabId:t.id,index:t.index+1}):chrome.tabs.create({url:e.url,active:e.become_active||!1})})}function M(e){d?chrome.tabs.create({url:e.url,active:e.become_active||!1}):e.tab_id?chrome.tabs.get(e.tab_id,t=>{t?chrome.tabs.create({url:e.url,active:e.become_active||!1,openerTabId:t.id,index:t.index+1,windowId:t.windowId}):k(e)}):k(e)}function S(e,t,r,n,i="no-referrer",s="omit"){if("function"==typeof fetch){const a=new Headers({"Content-Type":"application/json",Accept:"application/json"});if(n)for(const[e,t]of Object(c.objectEntries)(n))a.append(e,t);const o={method:e,headers:a,body:r,referrerPolicy:i,credentials:s};"GET"!==e&&"HEAD"!==e||delete o.body;const u=new Request(t,o);return fetch(u).then(e=>{const r=e.headers.get("content-type");return e.ok?204!==e.status&&(r&&r.includes("application/json")?e.json():(r&&r.includes("text/html"),e.text())):Promise.reject(new Error(`Failed to fetch ${t} with status ${e.status} (${e.statusText})`))}).then(e=>{if("string"!=typeof e||!e.includes("{"))return e;try{return Object(c.log)("_fetchJson resolved",e?JSON.parse(e):{}),e?JSON.parse(e):{}}catch(e){return Object(c.log)("_fetchJson error",e),Promise.reject(new Error(e))}}).catch(e=>(Object(c.log)(`_fetchJson Error: ${e}`),Promise.reject(new Error(e))))}return new Promise((i,s)=>{const a=new XMLHttpRequest;if(a.onload=function(){if(a.status>=200&&a.status<400)if(204===a.status)i(!1);else if(a.responseText.includes("{"))try{Object(c.log)("_fetchJson resolved",a.responseText?JSON.parse(a.responseText):{}),i(a.responseText?JSON.parse(a.responseText):{})}catch(e){Object(c.log)("_fetchJson error",e),s(new Error(e))}else i(a.responseText);else Object(c.log)("_fetchJson error",a.statusText),s(new Error(a.statusText))},a.onerror=function(e){Object(c.log)("_fetchJson network error",e),s(new Error(e))},Object(c.log)("_fetchJson request",e,t,r,n),a.open(e,t,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","application/json"),n)for(const[e,t]of Object(c.objectEntries)(n))a.setRequestHeader(e,t);a.overrideMimeType("application/json"),a.send(r)})}function O(e,t,r){return S("POST",e,t,r).catch(e=>(Object(c.log)("postJson error",e),Promise.reject(e)))}function x(e,t){return S("GET",e,null,t).catch(e=>(Object(c.log)("getJson error",e),Promise.reject(e)))}function T(e){return"function"==typeof fetch?fetch(e,{type:"image"}).then(t=>t.ok?t.text():Promise.reject(new Error(`Failed to fetchLocalImageResource ${e} with status ${t.status} (${t.statusText})`))).catch(e=>(Object(c.log)(`fetchLocalImageResource error: ${e}`),Promise.reject(new Error(e)))):new Promise((t,r)=>{const n=new XMLHttpRequest;n.onload=function(){n.status>=200&&n.status<400?t(n.responseText):(Object(c.log)("fetchLocalImageResource error",n.statusText),r(new Error(n.statusText)))},n.onerror=function(e){Object(c.log)("fetchLocalImageResource network error",e),r(new Error(e))},Object(c.log)("fetchLocalImageResource request",e),n.open("GET",e,!0),n.overrideMimeType("image/png"),n.send()})}function E(e){return"function"==typeof fetch?fetch(e).then(t=>t.ok?t.json():Promise.reject(new Error(`Failed to fetchLocalJSONResource ${e} with status ${t.status} (${t.statusText})`))).catch(e=>(Object(c.log)(`fetchLocalJSONResource error: ${e}`),Promise.reject(new Error(e)))):new Promise((t,r)=>{const n=new XMLHttpRequest;n.onload=function(){if(n.status>=200&&n.status<400)try{t(n.responseText?JSON.parse(n.responseText):{})}catch(e){Object(c.log)("fetchLocalJSONResource error",e),r(new Error(e))}else Object(c.log)("fetchLocalJSONResource error",n.statusText),r(new Error(n.statusText))},n.onerror=function(e){Object(c.log)("fetchLocalJSONResource network error",e),r(new Error(e))},Object(c.log)("fetchLocalJSONResource request",e),n.open("GET",e,!0),n.overrideMimeType("image/png"),n.send()})}function D(e,t,r,n){return new Promise((i,s)=>{chrome.tabs.executeScript(e,{file:t,runAt:n},()=>{if(chrome.runtime.lastError)return Object(c.log)("injectScript error",chrome.runtime.lastError),void s(new Error(chrome.runtime.lastError));r?chrome.tabs.insertCSS(e,{file:r,runAt:n},()=>{if(chrome.runtime.lastError)return Object(c.log)("insertCSS error",chrome.runtime.lastError),void s(new Error(chrome.runtime.lastError));i()}):i()})})}function L(e,t=!1){if(u.a.NOTIFICATIONS_LOADED)return Promise.resolve(!0);const r=o.a.getTabInfo(e);return r&&!0===r.prefetched||r.path.includes("_/chrome/newtab")||"about"===r.protocol||!t&&u.a.EXCLUDES.includes(r.host)?Promise.resolve(!1):D(e,"dist/notifications.js","","document_start").then(()=>(u.a.NOTIFICATIONS_LOADED=!0,!0)).catch(e=>(Object(c.log)("injectNotifications error",e),!1))}function P(e){return e&&"cliqz"===e.origin&&"offers"===e.type&&e.data}},,function(e,t,r){"use strict";var n=r(200),i=r(8);t.a=new class{constructor(){this.policySmartBlock=new n.a,this._tabInfo={},this._tabInfoPersist={}}create(e,t){const r=this.getTabInfoPersist(e,"numOfReloads")||0,n={needsReload:{changes:{}},partialScan:!0,prefetched:!1,purplebox:!1,rewards:!1,timestamp:Date.now(),firstLoadTimestamp:this.policySmartBlock.shouldCheck(e)&&(0===r?Date.now():this.getTabInfoPersist(e,"firstLoadTimestamp")||0)||0,reloaded:this.policySmartBlock.checkReloadThreshold(e),numOfReloads:r,smartBlock:{blocked:{},unblocked:{}},insecureRedirects:[]};this._tabInfo[e]=n,t&&this._updateUrl(e,t)}getTabInfo(e,t){return!!this._tabInfo.hasOwnProperty(e)&&(t?this._tabInfo[e][t]:this._tabInfo[e])}getTabInfoPersist(e,t){return!!this._tabInfoPersist.hasOwnProperty(e)&&(t?this._tabInfoPersist[e][t]:this._tabInfoPersist[e])}setTabInfo(e,t,r){this._tabInfo.hasOwnProperty(e)&&("url"===t?this._updateUrl(e,r):this._tabInfo[e][t]=r)}setTabSmartBlockAppInfo(e,t,r,n){if(!this._tabInfo.hasOwnProperty(e))return;const i=n?"blocked":"unblocked";void 0===this._tabInfo[e].smartBlock[i][t]&&(this._tabInfo[e].smartBlock[i][t]=[]),-1===this._tabInfo[e].smartBlock[i][t].indexOf(r)&&this._tabInfo[e].smartBlock[i][t].push(r)}clear(e){if(!this._tabInfo.hasOwnProperty(e))return;const{numOfReloads:t,firstLoadTimestamp:r}=this._tabInfo[e];this._tabInfoPersist[e]={numOfReloads:t,firstLoadTimestamp:r},delete this._tabInfo[e]}_updateUrl(e,t){const r=Object(i.processUrl)(t);this._tabInfo[e].url=t,this._tabInfo[e].protocol=r.protocol,this._tabInfo[e].host=r.host,this._tabInfo[e].path=r.path,this._tabInfo[e].hash=r.anchor,this._tabInfo[e].partialScan=!1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCliqzPrefs=function(){const e={},t=(0,n.getAllCliqzPrefs)().filter(e=>i.has(e));for(let r=0;r<t.length;r+=1)e[t[r]]=(0,n.getPref)(t[r]);return e};var n=r(442);t.default={get:n.getPref,set:n.setPref,has:n.hasPref,clear:n.clearPref,enableChangeEvents:n.enableChangeEvents,disableChangeEvents:n.disableChangeEvents,getObject(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return JSON.parse(this.get(e,"{}",...r))},setObject(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(t instanceof Function){const r=t(this.getObject(e));this.setObject(e,r,...n)}else{if("object"!=typeof t)throw new TypeError;this.set(e,JSON.stringify(t),...n)}},init:n.init};const i=new Set(["ABTests","abtests_running","adultContentFilter","antitracking.enabled","backend_country","cliqz-adb","cliqz-anti-phishing-enabled","config_location","config_ts","developer","distribution","full_distribution","freshtab.state","freshtabConfig","hpn-query","humanWebOptOut","install_date","offers_location","offers2UserEnabled","offersDevFlag","serp_test","session","share_location","telemetry"])},,,function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(174),s=r(46),a=r(401),o=r(173),u=function(e){function t(r,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!r){this.destination=a.empty;break}if("object"==typeof r){r instanceof t?(this.syncErrorThrowable=r.syncErrorThrowable,this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,r,n,i)}}return n(t,e),t.prototype[o.rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(s.Subscription);t.Subscriber=u;var c=function(e){function t(t,r,n,s){var o;e.call(this),this._parentSubscriber=t;var u=this;i.isFunction(r)?o=r:r&&(o=r.next,n=r.error,s=r.complete,r!==a.empty&&(u=Object.create(r),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=o,this._error=n,this._complete=s}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},,function(e,t,r){(function(e,r){var n;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},s=i._,a=Array.prototype,o=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,l=a.slice,d=o.toString,h=o.hasOwnProperty,f=Array.isArray,p=Object.keys,m=Object.create,_=function(){},g=function(e){return e instanceof g?e:this instanceof g?void(this._wrapped=e):new g(e)};void 0===t||t.nodeType?i._=g:(void 0!==r&&!r.nodeType&&r.exports&&(t=r.exports=g),t._=g),g.VERSION="1.9.1";var y,v=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,s){return e.call(t,r,n,i,s)}}return function(){return e.apply(t,arguments)}},b=function(e,t,r){return g.iteratee!==y?g.iteratee(e,t):null==e?g.identity:g.isFunction(e)?v(e,t,r):g.isObject(e)&&!g.isArray(e)?g.matcher(e):g.property(e)};g.iteratee=y=function(e,t){return b(e,t,1/0)};var $=function(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}},w=function(e){if(!g.isObject(e))return{};if(m)return m(e);_.prototype=e;var t=new _;return _.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},M=function(e,t){return null!=e&&h.call(e,t)},S=function(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0},O=Math.pow(2,53)-1,x=k("length"),T=function(e){var t=x(e);return"number"==typeof t&&t>=0&&t<=O};g.each=g.forEach=function(e,t,r){var n,i;if(t=v(t,r),T(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=g.keys(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e},g.map=g.collect=function(e,t,r){t=b(t,r);for(var n=!T(e)&&g.keys(e),i=(n||e).length,s=Array(i),a=0;a<i;a++){var o=n?n[a]:a;s[a]=t(e[o],o,e)}return s};var E=function(e){return function(t,r,n,i){var s=arguments.length>=3;return function(t,r,n,i){var s=!T(t)&&g.keys(t),a=(s||t).length,o=e>0?0:a-1;for(i||(n=t[s?s[o]:o],o+=e);o>=0&&o<a;o+=e){var u=s?s[o]:o;n=r(n,t[u],u,t)}return n}(t,v(r,i,4),n,s)}};g.reduce=g.foldl=g.inject=E(1),g.reduceRight=g.foldr=E(-1),g.find=g.detect=function(e,t,r){var n=(T(e)?g.findIndex:g.findKey)(e,t,r);if(void 0!==n&&-1!==n)return e[n]},g.filter=g.select=function(e,t,r){var n=[];return t=b(t,r),g.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},g.reject=function(e,t,r){return g.filter(e,g.negate(b(t)),r)},g.every=g.all=function(e,t,r){t=b(t,r);for(var n=!T(e)&&g.keys(e),i=(n||e).length,s=0;s<i;s++){var a=n?n[s]:s;if(!t(e[a],a,e))return!1}return!0},g.some=g.any=function(e,t,r){t=b(t,r);for(var n=!T(e)&&g.keys(e),i=(n||e).length,s=0;s<i;s++){var a=n?n[s]:s;if(t(e[a],a,e))return!0}return!1},g.contains=g.includes=g.include=function(e,t,r,n){return T(e)||(e=g.values(e)),("number"!=typeof r||n)&&(r=0),g.indexOf(e,t,r)>=0},g.invoke=$(function(e,t,r){var n,i;return g.isFunction(t)?i=t:g.isArray(t)&&(n=t.slice(0,-1),t=t[t.length-1]),g.map(e,function(e){var s=i;if(!s){if(n&&n.length&&(e=S(e,n)),null==e)return;s=e[t]}return null==s?s:s.apply(e,r)})}),g.pluck=function(e,t){return g.map(e,g.property(t))},g.where=function(e,t){return g.filter(e,g.matcher(t))},g.findWhere=function(e,t){return g.find(e,g.matcher(t))},g.max=function(e,t,r){var n,i,s=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var o=0,u=(e=T(e)?e:g.values(e)).length;o<u;o++)null!=(n=e[o])&&n>s&&(s=n);else t=b(t,r),g.each(e,function(e,r,n){((i=t(e,r,n))>a||i===-1/0&&s===-1/0)&&(s=e,a=i)});return s},g.min=function(e,t,r){var n,i,s=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var o=0,u=(e=T(e)?e:g.values(e)).length;o<u;o++)null!=(n=e[o])&&n<s&&(s=n);else t=b(t,r),g.each(e,function(e,r,n){((i=t(e,r,n))<a||i===1/0&&s===1/0)&&(s=e,a=i)});return s},g.shuffle=function(e){return g.sample(e,1/0)},g.sample=function(e,t,r){if(null==t||r)return T(e)||(e=g.values(e)),e[g.random(e.length-1)];var n=T(e)?g.clone(e):g.values(e),i=x(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,a=0;a<t;a++){var o=g.random(a,s),u=n[a];n[a]=n[o],n[o]=u}return n.slice(0,t)},g.sortBy=function(e,t,r){var n=0;return t=b(t,r),g.pluck(g.map(e,function(e,r,i){return{value:e,index:n++,criteria:t(e,r,i)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var D=function(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=b(n,i),g.each(r,function(t,i){var a=n(t,i,r);e(s,t,a)}),s}};g.groupBy=D(function(e,t,r){M(e,r)?e[r].push(t):e[r]=[t]}),g.indexBy=D(function(e,t,r){e[r]=t}),g.countBy=D(function(e,t,r){M(e,r)?e[r]++:e[r]=1});var L=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(e){return e?g.isArray(e)?l.call(e):g.isString(e)?e.match(L):T(e)?g.map(e,g.identity):g.values(e):[]},g.size=function(e){return null==e?0:T(e)?e.length:g.keys(e).length},g.partition=D(function(e,t,r){e[r?0:1].push(t)},!0),g.first=g.head=g.take=function(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[0]:g.initial(e,e.length-t)},g.initial=function(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},g.last=function(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[e.length-1]:g.rest(e,Math.max(0,e.length-t))},g.rest=g.tail=g.drop=function(e,t,r){return l.call(e,null==t||r?1:t)},g.compact=function(e){return g.filter(e,Boolean)};var P=function(e,t,r,n){for(var i=(n=n||[]).length,s=0,a=x(e);s<a;s++){var o=e[s];if(T(o)&&(g.isArray(o)||g.isArguments(o)))if(t)for(var u=0,c=o.length;u<c;)n[i++]=o[u++];else P(o,t,r,n),i=n.length;else r||(n[i++]=o)}return n};g.flatten=function(e,t){return P(e,t,!1)},g.without=$(function(e,t){return g.difference(e,t)}),g.uniq=g.unique=function(e,t,r,n){g.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=b(r,n));for(var i=[],s=[],a=0,o=x(e);a<o;a++){var u=e[a],c=r?r(u,a,e):u;t&&!r?(a&&s===c||i.push(u),s=c):r?g.contains(s,c)||(s.push(c),i.push(u)):g.contains(i,u)||i.push(u)}return i},g.union=$(function(e){return g.uniq(P(e,!0,!0))}),g.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=x(e);n<i;n++){var s=e[n];if(!g.contains(t,s)){var a;for(a=1;a<r&&g.contains(arguments[a],s);a++);a===r&&t.push(s)}}return t},g.difference=$(function(e,t){return t=P(t,!0,!0),g.filter(e,function(e){return!g.contains(t,e)})}),g.unzip=function(e){for(var t=e&&g.max(e,x).length||0,r=Array(t),n=0;n<t;n++)r[n]=g.pluck(e,n);return r},g.zip=$(g.unzip),g.object=function(e,t){for(var r={},n=0,i=x(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r};var A=function(e){return function(t,r,n){r=b(r,n);for(var i=x(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}};g.findIndex=A(1),g.findLastIndex=A(-1),g.sortedIndex=function(e,t,r,n){for(var i=(r=b(r,n,1))(t),s=0,a=x(e);s<a;){var o=Math.floor((s+a)/2);r(e[o])<i?s=o+1:a=o}return s};var j=function(e,t,r){return function(n,i,s){var a=0,o=x(n);if("number"==typeof s)e>0?a=s>=0?s:Math.max(s+o,a):o=s>=0?Math.min(s+1,o):s+o+1;else if(r&&s&&o)return n[s=r(n,i)]===i?s:-1;if(i!=i)return(s=t(l.call(n,a,o),g.isNaN))>=0?s+a:-1;for(s=e>0?a:o-1;s>=0&&s<o;s+=e)if(n[s]===i)return s;return-1}};g.indexOf=j(1,g.findIndex,g.sortedIndex),g.lastIndexOf=j(-1,g.findLastIndex),g.range=function(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i},g.chunk=function(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(l.call(e,n,n+=t));return r};var R=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=w(e.prototype),a=e.apply(s,i);return g.isObject(a)?a:s};g.bind=$(function(e,t,r){if(!g.isFunction(e))throw new TypeError("Bind must be called on a function");var n=$(function(i){return R(e,n,t,this,r.concat(i))});return n}),g.partial=$(function(e,t){var r=g.partial.placeholder,n=function(){for(var i=0,s=t.length,a=Array(s),o=0;o<s;o++)a[o]=t[o]===r?arguments[i++]:t[o];for(;i<arguments.length;)a.push(arguments[i++]);return R(e,n,this,this,a)};return n}),g.partial.placeholder=g,g.bindAll=$(function(e,t){var r=(t=P(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=g.bind(e[n],e)}}),g.memoize=function(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return M(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r},g.delay=$(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),g.defer=g.partial(g.delay,g,1),g.throttle=function(e,t,r){var n,i,s,a,o=0;r||(r={});var u=function(){o=!1===r.leading?0:g.now(),n=null,a=e.apply(i,s),n||(i=s=null)},c=function(){var c=g.now();o||!1!==r.leading||(o=c);var l=t-(c-o);return i=this,s=arguments,l<=0||l>t?(n&&(clearTimeout(n),n=null),o=c,a=e.apply(i,s),n||(i=s=null)):n||!1===r.trailing||(n=setTimeout(u,l)),a};return c.cancel=function(){clearTimeout(n),o=0,n=i=s=null},c},g.debounce=function(e,t,r){var n,i,s=function(t,r){n=null,r&&(i=e.apply(t,r))},a=$(function(a){if(n&&clearTimeout(n),r){var o=!n;n=setTimeout(s,t),o&&(i=e.apply(this,a))}else n=g.delay(s,t,this,a);return i});return a.cancel=function(){clearTimeout(n),n=null},a},g.wrap=function(e,t){return g.partial(t,e)},g.negate=function(e){return function(){return!e.apply(this,arguments)}},g.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},g.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},g.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},g.once=g.partial(g.before,2),g.restArguments=$;var I=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Y=function(e,t){var r=C.length,n=e.constructor,i=g.isFunction(n)&&n.prototype||o,s="constructor";for(M(e,s)&&!g.contains(t,s)&&t.push(s);r--;)(s=C[r])in e&&e[s]!==i[s]&&!g.contains(t,s)&&t.push(s)};g.keys=function(e){if(!g.isObject(e))return[];if(p)return p(e);var t=[];for(var r in e)M(e,r)&&t.push(r);return I&&Y(e,t),t},g.allKeys=function(e){if(!g.isObject(e))return[];var t=[];for(var r in e)t.push(r);return I&&Y(e,t),t},g.values=function(e){for(var t=g.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},g.mapObject=function(e,t,r){t=b(t,r);for(var n=g.keys(e),i=n.length,s={},a=0;a<i;a++){var o=n[a];s[o]=t(e[o],o,e)}return s},g.pairs=function(e){for(var t=g.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},g.invert=function(e){for(var t={},r=g.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},g.functions=g.methods=function(e){var t=[];for(var r in e)g.isFunction(e[r])&&t.push(r);return t.sort()};var F=function(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var s=arguments[i],a=e(s),o=a.length,u=0;u<o;u++){var c=a[u];t&&void 0!==r[c]||(r[c]=s[c])}return r}};g.extend=F(g.allKeys),g.extendOwn=g.assign=F(g.keys),g.findKey=function(e,t,r){t=b(t,r);for(var n,i=g.keys(e),s=0,a=i.length;s<a;s++)if(t(e[n=i[s]],n,e))return n};var N,U,q=function(e,t,r){return t in r};g.pick=$(function(e,t){var r={},n=t[0];if(null==e)return r;g.isFunction(n)?(t.length>1&&(n=v(n,t[1])),t=g.allKeys(e)):(n=q,t=P(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var a=t[i],o=e[a];n(o,a,e)&&(r[a]=o)}return r}),g.omit=$(function(e,t){var r,n=t[0];return g.isFunction(n)?(n=g.negate(n),t.length>1&&(r=t[1])):(t=g.map(P(t,!1,!1),String),n=function(e,r){return!g.contains(t,r)}),g.pick(e,n,r)}),g.defaults=F(g.allKeys,!0),g.create=function(e,t){var r=w(e);return t&&g.extendOwn(r,t),r},g.clone=function(e){return g.isObject(e)?g.isArray(e)?e.slice():g.extend({},e):e},g.tap=function(e,t){return t(e),e},g.isMatch=function(e,t){var r=g.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),s=0;s<n;s++){var a=r[s];if(t[a]!==i[a]||!(a in i))return!1}return!0},N=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&U(e,t,r,n)},U=function(e,t,r,n){e instanceof g&&(e=e._wrapped),t instanceof g&&(t=t._wrapped);var i=d.call(e);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return u.valueOf.call(e)===u.valueOf.call(t)}var s="[object Array]"===i;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,o=t.constructor;if(a!==o&&!(g.isFunction(a)&&a instanceof a&&g.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!N(e[c],t[c],r,n))return!1}else{var l,h=g.keys(e);if(c=h.length,g.keys(t).length!==c)return!1;for(;c--;)if(l=h[c],!M(t,l)||!N(e[l],t[l],r,n))return!1}return r.pop(),n.pop(),!0},g.isEqual=function(e,t){return N(e,t)},g.isEmpty=function(e){return null==e||(T(e)&&(g.isArray(e)||g.isString(e)||g.isArguments(e))?0===e.length:0===g.keys(e).length)},g.isElement=function(e){return!(!e||1!==e.nodeType)},g.isArray=f||function(e){return"[object Array]"===d.call(e)},g.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){g["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),g.isArguments(arguments)||(g.isArguments=function(e){return M(e,"callee")});var H=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof H&&(g.isFunction=function(e){return"function"==typeof e||!1}),g.isFinite=function(e){return!g.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},g.isNaN=function(e){return g.isNumber(e)&&isNaN(e)},g.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},g.isNull=function(e){return null===e},g.isUndefined=function(e){return void 0===e},g.has=function(e,t){if(!g.isArray(t))return M(e,t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(null==e||!h.call(e,i))return!1;e=e[i]}return!!r},g.noConflict=function(){return i._=s,this},g.identity=function(e){return e},g.constant=function(e){return function(){return e}},g.noop=function(){},g.property=function(e){return g.isArray(e)?function(t){return S(t,e)}:k(e)},g.propertyOf=function(e){return null==e?function(){}:function(t){return g.isArray(t)?S(e,t):e[t]}},g.matcher=g.matches=function(e){return e=g.extendOwn({},e),function(t){return g.isMatch(t,e)}},g.times=function(e,t,r){var n=Array(Math.max(0,e));t=v(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},g.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},g.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=g.invert(z),W=function(e){var t=function(t){return e[t]},r="(?:"+g.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};g.escape=W(z),g.unescape=W(B),g.result=function(e,t,r){g.isArray(t)||(t=[t]);var n=t.length;if(!n)return g.isFunction(r)?r.call(e):r;for(var i=0;i<n;i++){var s=null==e?void 0:e[t[i]];void 0===s&&(s=r,i=n),e=g.isFunction(s)?s.call(e):s}return e};var V=0;g.uniqueId=function(e){var t=++V+"";return e?e+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(e){return"\\"+K[e]};g.template=function(e,t,r){!t&&r&&(t=r),t=g.defaults({},t,g.templateSettings);var n,i=RegExp([(t.escape||G).source,(t.interpolate||G).source,(t.evaluate||G).source].join("|")+"|$","g"),s=0,a="__p+='";e.replace(i,function(t,r,n,i,o){return a+=e.slice(s,o).replace(J,Q),s=o+t.length,r?a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var o=function(e){return n.call(this,e,g)},u=t.variable||"obj";return o.source="function("+u+"){\n"+a+"}",o},g.chain=function(e){var t=g(e);return t._chain=!0,t};var Z=function(e,t){return e._chain?g(t).chain():t};g.mixin=function(e){return g.each(g.functions(e),function(t){var r=g[t]=e[t];g.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),Z(this,r.apply(g,e))}}),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];g.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],Z(this,r)}}),g.each(["concat","join","slice"],function(e){var t=a[e];g.prototype[e]=function(){return Z(this,t.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)},void 0===(n=function(){return g}.apply(t,[]))||(r.exports=n)}()}).call(this,r(17),r(67)(e))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},,,function(e,t,r){"use strict";var n=r(54),i=r(399),s=r(398),a=r(403),o=r(4),u=r(142),c=r(1101),l=r(172);t.subscribeToResult=function(e,t,r,d){var h=new c.InnerSubscriber(e,r,d);if(h.closed)return null;if(t instanceof o.Observable)return t._isScalar?(h.next(t.value),h.complete(),null):(h.syncErrorThrowable=!0,t.subscribe(h));if(i.isArrayLike(t)){for(var f=0,p=t.length;f<p&&!h.closed;f++)h.next(t[f]);h.closed||h.complete()}else{if(s.isPromise(t))return t.then(function(e){h.closed||(h.next(e),h.complete())},function(e){return h.error(e)}).then(null,function(e){n.root.setTimeout(function(){throw e})}),h;if(t&&"function"==typeof t[u.iterator])for(var m=t[u.iterator]();;){var _=m.next();if(_.done){h.complete();break}if(h.next(_.value),h.closed)break}else if(t&&"function"==typeof t[l.observable]){var g=t[l.observable]();if("function"==typeof g.subscribe)return g.subscribe(new c.InnerSubscriber(e,r,d));h.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var y="You provided "+(a.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";h.error(new TypeError(y))}}return null}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(r(14).Subscriber);t.OuterSubscriber=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={platform:"webextension",brocfile:"Brocfile.node.js",baseURL:"/cliqz/",pack:"npm pack",publish:"aws s3 cp browser-core-$PACKAGE_VERSION.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz --acl public-read && aws s3 cp s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/latest.tgz --acl public-read",sourceMaps:!0,format:"common",settings:{ANOLYSIS_BACKEND_URL:"https://anolysis.privacy.cliqz.com",ANOLYSIS_STAGING_BACKEND_URL:"https://anolysis.privacy.clyqz.com",BACKGROUND_IMAGE_URL:"https://cdn.cliqz.com/brands-database/database/",BW_URL:"https://antiphishing.cliqz.com/api/bwlist?md5=",CAMPAIGN_SERVER:"https://fec.cliqz.com/message/",CDN_BASEURL:"https://cdn2.ghostery.com",CLIQZ_SAVE_URL:"https://cliqz.com/q=",CONFIG_PROVIDER:"https://safe-browsing.ghostery.com/config",ENDPOINT_ANONPATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns-anon.gz",ENDPOINT_BLIND_SIGNER:"https://ghostery-sign.ghostery.com/sign",ENDPOINT_CONFIGURL:"https://safe-browsing.ghostery.com/ts-config",ENDPOINT_HPNV2_COLLECTOR:"https://collector-hpn.cliqz.com",ENDPOINT_HPNV2_CONFIG:"https://collector-hpn.cliqz.com/config",ENDPOINT_HPNV2_JOIN:"https://collector-hpn.cliqz.com/join",ENDPOINT_KEYS_PROVIDER:"https://ghostery-collector.ghostery.com/signerKey",ENDPOINT_LOOKUP_TABLE_PROVIDER:"https://ghostery-collector.ghostery.com/v2/lookuptable",ENDPOINT_PATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns.gz",ENDPOINT_SAFE_QUORUM_ENDPOINT:"https://safe-browsing-quorum.ghostery.com/",ENDPOINT_SAFE_QUORUM_PROVIDER:"https://safe-browsing-quorum.ghostery.com/config",ENDPOINT_SOURCE_MAP_PROVIDER:"https://ghostery-collector.ghostery.com/sourcemapjson",ENDPOINT_URL:"https://api.cliqz.com/api/v1/rich-header?path=/map&bmresult=",ENDPOINT_USER_REG:"https://ghostery-sign.ghostery.com/register",FEEDBACK:"https://cliqz.com/feedback/",HB_NEWS:"hb-news.cliqz.com",HOMPAGE_URL:"https://cliqz.com/",INVENTORY_URL:"https://cdn.cliqz.com/browser-f/fun-demo/inventoryv2.txt.gz",JOBS_URL:"https://cliqz.com/jobs/",OFFERS_BE_BASE_URL:"https://offers.ghostery.com",PRIVACY_SCORE_URL:"https://anti-tracking.cliqz.com/api/v1/score?",RESULTS_PROVIDER:"https://api.cliqz.com/api/v2/results?nrh=1&q=",RESULTS_PROVIDER_LOG:"https://api.cliqz.com/api/v1/logging?q=",RESULTS_PROVIDER_PING:"https://api.cliqz.com/ping",RICH_HEADER:"https://api.cliqz.com/api/v2/rich-header?path=/v2/map",RICH_HEADER_PROXY_URL:"hb-news.cliqz.com",ROTATED_TOP_NEWS:"rotated-top-news.cliqz.com",SAFE_BROWSING:"https://safe-browsing.cliqz.com",STATISTICS:"https://stats.cliqz.com",SUGGESTIONS_URL:"https://cliqz.com/search?q=",SUPPORT_URL:"https://cliqz.com/support/",TEAM_URL:"https://cliqz.com/team/",TELEMETRY_ENDPOINT:"https://safebrowsing-experiment.cliqz.com",TRACKER_PROXY_PROXY_PEERS_DEFAULT:"https://p2p-signaling-proxypeer.cliqz.com/peers",TRACKER_PROXY_PROXY_PEERS_EXIT_DEFAULT:"https://p2p-signaling-proxypeer.cliqz.com/exitNodes",TRACKER_PROXY_PROXY_SIGNALING_DEFAULT:"wss://p2p-signaling-proxypeer.cliqz.com",TRIQZ_URL:"https://cliqz.com/tips",UNINSTALL:"https://cliqz.com/home/offboarding",channel:"CH80","triggers-root":"ghostery-root",MSGCHANNEL:"web-extension",KEY_DS_PUBKEY:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwXo4hXvboKHCggNJ0UNFvZQfDWi0jNcF1kBHthxilMu6LB/hFrSMQ+/FgTqVE36cCezWE0K1UcwmYGVsuqxcvql82RfCmYUVBroJ3UFG8qnetYfU5FOk43C555p5l5HzlF8QilcCUBCO4SCj9lEZ3/8FJboCupTqxEUq7nwUgaNZOiGKMdDUBZJO1tW4LSH4lj9IAZccEJ5HKVmJKopQ3hmzWgDqowxni4NQz+0DnsSfCGAupKaJDxjfajJosX5i674rgdHbZGtgHB3M9jhc6HFNPcmtUgLwgtUtRwMhSnya6q/O06euouNi1h0m5eRrWeMRlJSdUnelLSU8QNy7LQIDAQAB",KEY_SECURE_LOGGER_PUBKEY:"MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAh5HhcRAn6+6woXQXl/NtZ+fOooNglZct/HSpYuqkcmrPauHW7EuOSq5bvpBZRTDROjR/kUPomqVZIzqhdCFPA8BwXSCz7hAel2Q157vtBvh9sngMMLXb5Fgzef5N4EuKO8pL5KrS+I9tfZac41vFJSdpgAirZYhh+tdcQQ1z0Qv/Rw0zOXjfvddCz3gEv2gB9KsLMVnTS1J4YOOgfza2adg9Ebz1z99DiF4vtCwn0IUwH/3ToTBwJLbMnC3Ol43yBNk8rgK2mkgCi614vOSD3hnVmio+iW6+AUklM8VPl6l7hEK9cljJY+9UsMVmTrvaFbMPwS6AdZCXKTmNdaMJcy3zSOXu5zvzihoQLwAu9LM3l2eVk0Mw0K7JXOP20fc8BtzWCOLYVP32r4R0BNuhTtvGqjHNZHPJN5OwaxkLpn2dujL9uDWGjRiOItKMVq/nOqmNGghrbf8IOaKT7VQhqOU4cXRkB/uF1UjYETBavwUZAxx9Wd/cMcAGmKiDxighxxQ29jDufl+2WG065tmJz+zCxmgrPh6Zb3KFUxPTe6yksAhWJhmGShA9v20t84M5c6NpZXoUsFcVja6XxzHeSB8dWq9Uu5QcZ83Gz/ronwdEjT2OGTtBgOFeTDqLYUgphC1gcUEHOCnTNXRMQOXqGwBfZHp+Mq61QcMq2rNS7xECAwEAAQ==",HPN_CHANNEL:"ghostery",ATTRACK_TELEMETRY_PROVIDER:"hpn",HW_CHANNEL:"ghostery",ALLOWED_COUNTRY_CODES:["de","at","ch","es","us","fr","nl","gb","it","be","se","dk","fi","cz","gr","hu","ro","no","ca","au","ru","ua","in","pl","jp","br","mx","cn","ar"],antitrackingPlaceholder:"ghostery",antitrackingHeader:"Ghostery-AntiTracking",frameScriptWhitelist:[]},default_prefs:{"modules.human-web.enabled":!0,"modules.offers-v2.enabled":!0,"modules.message-center.enabled":!1,"modules.antitracking.enabled":!0,"modules.anti-phishing.enabled":!1,"modules.adblocker.enabled":!0,offers2FeatureEnabled:!0,offersLogsEnabled:!0,showConsoleLogs:!1,"cliqz-adb":!0,"cliqz-adb-abtest":!0,attrackBloomFilter:!0,humanWeb:!0,"cliqz-anti-phishing":!0,"cliqz-anti-phishing-enabled":!0,attrackRemoveQueryStringTracking:!1,attrackTelemetryMode:1,attrackDefaultAction:"placeholder",sendAntiTrackingHeader:!1,telemetry:!1,attrackCookieTrustReferers:!0},bundles:["core/content-script.bundle.js","hpn/worker.bundle.js"],modules:["core","message-center","human-web","hpn","antitracking","webrequest-pipeline","static","offers-v2","adblocker","anolysis","anti-phishing"],system:{map:{BigInt:"node_modules/BigInt/src/BigInt.js"},meta:{BigInt:{format:"cjs"}}},subprojects:[],environment:"production",debugPages:!1,EXTENSION_VERSION:"7.28.6",instrumentFunctions:""}},,function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.enable=u,t.disable=c;var n=s(r(443)),i=s(r(11));function s(e){return e&&e.__esModule?e:{default:e}}function a(){}const o={};function u(){o.debug=n.default.log.bind(n.default,"Cliqz [debug]"),o.log=n.default.log.bind(n.default,"Cliqz"),o.error=n.default.error.bind(n.default,"Cliqz [error]"),o.warn=n.default.warn.bind(n.default,"Cliqz [warning]"),o.warning=o.warn}function c(){o.debug=a,o.log=a,o.warn=a,o.warning=a,o.error=a}!function(){const t=void 0!==e&&!0===e.__DEV__;try{return i.default.get("showConsoleLogs",t||!1)}catch(e){return!1}}()?c():u(),t.default=o}).call(this,r(17))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(69)),i=s(r(88));function s(e){return e&&e.__esModule?e:{default:e}}t.default=n.default.get("offers-v2",{level:i.default.LOG_LEVEL})},function(e,t,r){var n;
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
!function(i,s){"use strict";var a="model",o="name",u="type",c="vendor",l="version",d="mobile",h="tablet",f={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var r,n,i,s,a,o,u=0;u<t.length&&!a;){var c=t[u],l=t[u+1];for(r=n=0;r<c.length&&!a;)if(a=c[r++].exec(e))for(i=0;i<l.length;i++)o=a[++n],"object"==typeof(s=l[i])&&s.length>0?2==s.length?"function"==typeof s[1]?this[s[0]]=s[1].call(this,o):this[s[0]]=s[1]:3==s.length?"function"!=typeof s[1]||s[1].exec&&s[1].test?this[s[0]]=o?o.replace(s[1],s[2]):void 0:this[s[0]]=o?s[1].call(this,o,s[2]):void 0:4==s.length&&(this[s[0]]=o?s[3].call(this,o.replace(s[1],s[2])):void 0):this[s]=o||void 0;u+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(f.has(t[r][n],e))return"?"===r?void 0:r}else if(f.has(t[r],e))return"?"===r?void 0:r;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},_={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,l],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[o,l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],l],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[o,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],l],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],l],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[o,l],[/(QQ)\/([\d\.]+)/i],[o,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,l],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[o,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[o,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[o],[/(LBBROWSER)/i],[o],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[o,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,l],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],l],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[l,p.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,c,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[c,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,a,[u,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[c,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,p.str,m.device.amazon.model],[c,"Amazon"],[u,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,c,[u,d]],[/\((ip[honed|\s\w*]+);/i],[a,[c,"Apple"],[u,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,a,[u,d]],[/\(bb10;\s(\w+)/i],[a,[c,"BlackBerry"],[u,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[c,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[a,"Xperia Tablet"],[u,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[a,[c,"Sony"],[u,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[c,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[c,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[c,p.str,m.device.sprint.vendor],[a,p.str,m.device.sprint.model],[u,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,a,[u,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[a,/_/g," "],[u,d]],[/(nexus\s9)/i],[a,[c,"HTC"],[u,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[c,"Huawei"],[u,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,a,[u,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[c,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[c,"Microsoft"],[u,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[c,"Motorola"],[u,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[c,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,f.trim],[a,f.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[c,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[c,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],a,[u,h]],[/smart-tv.+(samsung)/i],[c,[u,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],a,[u,d]],[/sie-(\w*)/i],[a,[c,"Siemens"],[u,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],a,[u,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[c,"Acer"],[u,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[c,"LG"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],a,[u,h]],[/(lg) netcast\.tv/i],[c,a,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[c,"LG"],[u,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[c,"Lenovo"],[u,h]],[/linux;.+((jolla));/i],[c,a,[u,d]],[/((pebble))app\/[\d\.]+\s/i],[c,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,a,[u,d]],[/crkey/i],[[a,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[c,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[a,[c,"Google"],[u,h]],[/android.+;\s(pixel xl|pixel)\s/i],[a,[c,"Google"],[u,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[c,"Meizu"],[u,h]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[a,[c,"OnePlus"],[u,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[c,"RCA"],[u,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[c,"Dell"],[u,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[c,"Verizon"],[u,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],a,[u,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[c,"NuVision"],[u,h]],[/android.+;\s(k88)\sbuild/i],[a,[c,"ZTE"],[u,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[c,"Swiss"],[u,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[c,"Swiss"],[u,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[c,"Zeki"],[u,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],a,[u,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[c,"Insignia"],[u,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[c,"NextBook"],[u,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],a,[u,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],a,[u,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[c,"Envizen"],[u,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,a,[u,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[c,"MachSpeed"],[u,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,a,[u,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[c,"Rotor"],[u,h]],[/android.+(KS(.+))\s+build/i],[a,[c,"Amazon"],[u,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,a,[u,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,f.lowerize],c,a],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[l,p.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[l,p.str,m.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[o,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[o,"Symbian"],l],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[o,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[o,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[o,l],[/(haiku)\s(\w+)/i],[o,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[o,l]]},g=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof g))return new g(e,t).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?f.extend(_,t):_;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,r,n.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,r,n.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,r,n.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,r,n.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};g.VERSION="0.7.18",g.BROWSER={NAME:o,MAJOR:"major",VERSION:l},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:a,VENDOR:c,TYPE:u,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:o,VERSION:l},g.OS={NAME:o,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):r(39)?void 0===(n=function(){return g}.call(t,r,t,e))||(e.exports=n):i&&(i.UAParser=g);var y=i&&(i.jQuery||i.Zepto);if(void 0!==y){var v=new g;y.ua=v.getResult(),y.ua.get=function(){return v.getUA()},y.ua.set=function(e){v.setUA(e);var t=v.getResult();for(var r in t)y.ua[r]=t[r]}}}("object"==typeof window?window:this)},,,function(e,t,r){"use strict";var n=r(16),i=r.n(n),s=r(1),a=r(96),o=r(8),u=r(2);t.a=new class extends a.a{updateNewAppIds(e,t){Object(u.log)("updating newAppIds...");const r=i.a.difference(i.a.keys(e),i.a.keys(t)).map(Number);return s.a.new_app_ids=r,r}applyBlockByDefault(e){if(s.a.block_by_default){Object(u.log)("applying block-by-default...");const{selected_app_ids:t}=s.a;i.a.each(e,e=>{t[e]=1}),s.a.selected_app_ids=t}}_buildCategories(e){const t=s.a.selected_app_ids||{};let r,n,i,a;const o=[],u={};for(r in e.apps)if(e.apps.hasOwnProperty(r)){if(function(e,t){return chrome.i18n.getMessage(e,void 0)}(`category_${n=e.apps[r].cat}`)===`category_${n}`&&(n="uncategorized"),i=t.hasOwnProperty(r),u[n]&&u[n].trackers[e.apps[r].name])continue;u.hasOwnProperty(n)?(u[n].num_total++,i&&u[n].num_blocked++):u[n]={id:n,name:function(e,t){return chrome.i18n.getMessage(e,void 0)}(`category_${n}`),description:function(e,t){return chrome.i18n.getMessage(e,void 0)}(`category_${n}_desc`),img_name:"advertising"===n?"adv":"social_media"===n?"smed":n,num_total:1,num_blocked:i?1:0,trackers:[]},u[n].trackers.push({id:r,name:e.apps[r].name,description:"",blocked:i,shouldShow:!0,catId:n})}for(a in u)if(u.hasOwnProperty(a)){const e=u[a];e.trackers&&e.trackers.sort((e,t)=>(e=e.name.toLowerCase())>(t=t.name.toLowerCase())?1:e<t?-1:0),o.push(e)}return o.sort((e,t)=>(e=e.trackers?e.trackers.length:0)>(t=t.trackers?t.trackers.length:0)?-1:e<t?1:0),o}processList(e,t,r){const{patterns:n}=t,a=n.regex,c={apps:t.apps,bugs:t.bugs,firstPartyExceptions:t.firstPartyExceptions,patterns:{host:n.host,host_path:n.host_path,path:n.path,regex:{}},version:t.version,JUST_UPDATED_WITH_NEW_TRACKERS:!1};Object(u.log)("initializing bugdb regexes...");for(const e in a)a.hasOwnProperty(e)&&(c.patterns.regex[e]=new RegExp(a[e],"i"));Object(u.log)("setting bugdb noneSelected/allSelected...");const l=i.a.size(s.a.selected_app_ids);if(c.noneSelected=0===l,Object(o.defineLazyProperty)(c,"allSelected",()=>!!i.a.size(s.a.selected_app_ids)&&i.a.every(c.apps,(e,t)=>s.a.selected_app_ids.hasOwnProperty(t))),Object(u.log)("processed bugdb..."),!e){const e=s.a.bugs;let r;if(e)if(e.hasOwnProperty("version")&&t.version>e.version)(r=this.updateNewAppIds(t.apps,e.apps)).length&&(this.applyBlockByDefault(r),c.JUST_UPDATED_WITH_NEW_TRACKERS=!0);else if(e.hasOwnProperty("bugsVersion")&&t.version!==e.bugsVersion){const n=i.a.reduce(e.bugs,(e,t)=>(e[t.aid]=!0,e),{});(r=this.updateNewAppIds(t.apps,n)).length&&(this.applyBlockByDefault(r),t.version>e.bugsVersion&&(c.JUST_UPDATED_WITH_NEW_TRACKERS=!0))}s.a.bugs=t}return c.categories=this._buildCategories(c),this.db=c,r||Object(o.flushChromeMemoryCache)(),!0}}("bugs")},function(e,t,r){"use strict";var n=r(44),i=r(179),s=r(1),a=r(10),o=r(2),u=r(8);t.a=new class{constructor(){this.getStoredOffers(),this.currentOffer=null,this.panelPort=null,this.ports=new Map,this.channelsSupported="object"==typeof chrome.runtime.onConnect,this.panelHubClosedListener=this.panelHubClosedListener.bind(this)}deleteReward(e){delete this.storedOffers[e],this.updateStoredOffers()}markRewardRead(e){const t=this.unreadOfferIds.indexOf(e);this.unreadOfferIds.splice(t,1),this.updateStoredOffers()}sendSignal(e){const{offerId:t,actionId:r,origin:n,type:s}=e,a={type:s,origin:n?`ghostery-${n}`:"ghostery",data:{action_id:r}};"offer-action-signal"===s&&(a.data.offer_id=t),Object(o.log)("sendSignal: ",a),i.a.modules["offers-v2"].background.actions.processRealEstateMessage(a)}getStoredOffers(){return Object(o.prefsGet)("storedOffers","unreadOfferIds","totalOffersSeen").then(e=>{this.storedOffers=e.storedOffers||{},this.unreadOfferIds=e.unreadOfferIds||[],this.totalOffersSeen=e.totalOffersSeen||0})}updateStoredOffers(){Object(o.prefsSet)({storedOffers:this.storedOffers}),Object(o.prefsSet)({unreadOfferIds:this.unreadOfferIds}).then(()=>{n.a.update()})}showHotDog(e,t){this.updateStoredOffers(),this.totalOffersSeen++,Object(o.prefsSet)({totalOffersSeen:this.totalOffersSeen}),this.currentOffer=t;const r=a.a.getTabInfo(e);return s.a.enable_offers&&r&&!r.rewards?(this.channelsSupported&&(this.ports.has(e)&&(this.ports.get(e).disconnect(),this.ports.delete(e)),this.connectListenerAdded||(this.connectListenerAdded=!0,chrome.runtime.onConnect.addListener(e=>{if(e&&"rewardsPort"===e.name&&e.sender&&e.sender.tab&&e.sender.tab.id){const t=e.sender.tab.id;this.ports.has(t)||(this.ports.set(t,e),this.ports.get(t).onMessage.addListener(e=>{switch(e.name){case"rewardsLoaded":this.ports.get(t).postMessage({name:"showHotDog",reward:this.currentOffer,conf:{rewardsPromptAccepted:s.a.rewards_accepted}});break;case"rewardSignal":this.sendSignal(e.message);break;case"rewardSeen":this.markRewardRead(e.offerId),n.a.update()}}))}}))),Object(u.injectScript)(e,"dist/rewards.js","dist/css/rewards_styles.css","document_start").catch(e=>(Object(o.log)("rewards injectScript error",e),!1))):Promise.resolve(!1)}panelHubClosedListener(){this.sendSignal({offerId:null,actionId:"hub_closed",origin:"rewards-hub",type:"action-signal"})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleDisabledError=t.ModuleMissingError=void 0,t.ifModuleEnabled=function(e){return e.catch(e=>e.name===a.name?(n.default.get("core").debug('Ignoring disabled module exception while calling action, the following exception can be safely ignored. This log is only printed in "debug" mode.',e),Promise.resolve()):Promise.reject(e))},t.setGlobal=function(e){i=e};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(69));let i;class s extends Error{constructor(e){super(`module '${e}' is missing`),this.name="ModuleMissingError"}}t.ModuleMissingError=s;class a extends Error{constructor(e){super(`module '${e}' is disabled`),this.name="ModuleDisabledError"}}t.ModuleDisabledError=a;t.default={module:e=>new class{constructor(e){this.moduleName=e}get module(){return i&&i.modules[this.moduleName]}isWindowReady(e){return this.isReady().then(()=>this.module.getWindowLoadingPromise(e))}isReady(){return this.module?this.module.isDisabled?Promise.reject(new a(this.moduleName)):this.module.isReady():Promise.reject(new s(this.moduleName))}isEnabled(){return!(!this.module||this.module.isDisabled)}action(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.isReady().then(()=>this.module.background.actions[e](...r))}windowAction(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this.isWindowReady(e).then(()=>{const r=this.module.getWindowModule(e).actions[t];return Promise.resolve(r(...i))}).catch(e=>{throw n.default.get("core").error(`window action "${t}" for module "${this.module.name}" failed`,e),e})}}(e),service:e=>new Proxy({},{get:(t,r)=>new Proxy(()=>{},{apply(t,n,s){const a=i&&i.services[e].api||{};try{return a[r](...s)}catch(t){throw new Error(`Could not access '${r}' from service: ${e}. `+'Make sure it appears in the "requiresServices" property '+`of the module's background where is it used. Reason: ${t}`)}}})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(24)),i=r(252);const s={cache:{},tickCallbacks:[],queue:[],pub(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];const o=(s.cache[e]||[]).map(t=>(0,i.nextTick)(()=>{t.call(null,...r)}).catch(t=>{n.default.error(`CliqzEvents error: ${e}`,t)})),u=Promise.all(o).then(()=>{const e=this.queue.indexOf(u);this.queue.splice(e,1),0===this.queue.length&&this.triggerNextTick()});this.queue.push(u)},triggerNextTick(){this.tickCallbacks.forEach(e=>{try{e()}catch(e){}}),this.tickCallbacks=[]},nextTick(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.tickCallbacks=this.tickCallbacks||[],this.tickCallbacks.push(e)},sub(e,t){s.cache[e]=s.cache[e]||[],s.cache[e].push(t)},subscribe(e,t,r){let n;return n=r?t.bind(r):t,s.sub(e,n),{unsubscribe(){s.un_sub(e,n)}}},un_sub(e,t){if(!s.cache[e]||0===s.cache[e].length)return void n.default.error(e,"Trying to unsubscribe event that had no subscribers");const r=s.cache[e].indexOf(t);r>-1?s.cache[e].splice(r,1):n.default.error(e,"Trying to unsubscribe an unknown listener",e,t)},clean_channel(e){if(!s.cache[e])throw new Error(`Trying to unsubscribe an unknown channel: ${e}`);s.cache[e]=[]},proxyEvent(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments[4];const a=s.pub.bind(s,e);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=i?i.call(null,...t):t;a.call(null,...n)}return t.addEventListener(r,o,n),{unsubscribe(){t.removeEventListener(r,o)}}},nextId:function e(){return e.id=e.id||0,e.id+=1},purge(){this.cache={},this.tickCallbacks=[],this.queue=[]}};t.default=s;t.subscribe=s.subscribe},,function(e,t,r){"use strict";var n=r(137),i=r(136);t.async=new i.AsyncScheduler(n.AsyncAction)},,,function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(43),i=r(42),s=r(41);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=o(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|f(t.length);return 0===(e=o(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&s(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=o(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|f(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(n)return N(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var s,a=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,o/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(s=r;s<o;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*a}else-1!==l&&(s-=s-l),l=-1}else for(r+u>o&&(r=o-u),s=r;s>=0;s--){for(var d=!0,h=0;h<u;h++)if(c(e,s+h)!==c(t,h)){d=!1;break}if(d)return s}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(t.substr(2*a,2),16);if(isNaN(o))return a;e[r+a]=o}return a}function v(e,t,r,n){return q(N(t,e.length-r),e,r,n)}function b(e,t,r,n){return q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function $(e,t,r,n){return b(e,t,r,n)}function w(e,t,r,n){return q(U(t),e,r,n)}function k(e,t,r,n){return q(function(e,t){for(var r,n,i,s=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function M(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,a,o,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=r)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[i+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&(u=(15&c)<<12|(63&s)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(u=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=d}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=O));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return x(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return M(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,a=r-t,o=Math.min(s,a),c=this.slice(n,i),l=e.slice(t,r),d=0;d<o;++d)if(c[d]!==l[d]){s=c[d],a=l[d];break}return s<a?-1:a<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return $(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function x(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function E(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=F(e[s]);return i}function D(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function A(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);i<s;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function j(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);i<s;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function R(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(e,t,r,n,s){return s||R(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function C(e,t,r,n,s){return s||R(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var s=0,a=1,o=0;for(this[t]=255&e;++s<r&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var s=r-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=u.isBuffer(e)?e:N(new u(e,n).toString()),o=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%o]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function U(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(17))},function(e,t,r){"use strict";var n=r(29),i=r(193),s=r(10);const a=1e3;t.a=new class{constructor(){this._foundBugs={}}update(e,t,r,n,i){if(this._foundBugs.hasOwnProperty(e)||(this._foundBugs[e]={}),t){if(this._foundBugs[e].hasOwnProperty(t)||(this._foundBugs[e][t]={sources:[],hasLatencyIssue:!1,hasInsecureIssue:!1}),this._foundBugs[e][t].sources.push({src:r,blocked:n,type:i.toLowerCase()}),!this._foundBugs[e][t].hasInsecureIssue){const n=s.a.getTabInfo(e);this._foundBugs[e][t].hasInsecureIssue="https"===n.protocol&&!r.startsWith("https")}!1!==this._foundBugs[e][t].blocked&&(this._foundBugs[e][t].blocked=n)}}getBugs(e){return this._foundBugs.hasOwnProperty(e)&&this._foundBugs[e]}getApps(e,t,r,s){const a=[],o={},u=this.getBugs(e),{db:c}=n.a;let l,d,h=!1,f=!1;if(!u)return u;for(l in u)u.hasOwnProperty(l)&&(d=c.bugs[l].aid,void 0!==s&&d!==s||(h=u[l].hasLatencyIssue,f=u[l].hasInsecureIssue,o.hasOwnProperty(d)?(o[d].sources=o[d].sources.concat(u[l].sources),h&&(o[d].hasLatencyIssue=h),f&&(o[d].hasInsecureIssue=f),!1!==o[d].blocked&&(o[d].blocked=u[l].blocked)):o[d]={id:d,name:c.apps[d].name,cat:c.apps[d].cat,blocked:u[l].blocked,sources:u[l].sources,hasCompatibilityIssue:!(!r||!u[l].blocked)&&i.a.hasIssue(d,r),hasLatencyIssue:h,hasInsecureIssue:f}));for(l in o)o.hasOwnProperty(l)&&a.push(o[l]);return t&&void 0===s&&a.sort((e,t)=>(e=e.name.toLowerCase())>(t=t.name.toLowerCase())?1:e<t?-1:0),a}getCategories(e,t){const r=[],i={},s=this.getBugs(e),{db:a}=n.a;let o,u,c;if(!s)return s;for(o in s)if(s.hasOwnProperty(o))if(u=a.bugs[o].aid,c=a.apps[u].cat,i.hasOwnProperty(c)){if(i[c].appIds.includes(u))continue;i[c].appIds.push(u),i[c].trackers.push({id:u,name:a.apps[u].name,blocked:s[o].blocked}),s[o].blocked?i[c].blocked++:i[c].allowed++,i[c].total++}else i[c]={id:c,name:c,appIds:[u],trackers:[{id:u,name:a.apps[u].name,blocked:s[o].blocked}],blocked:s[o].blocked?1:0,allowed:s[o].blocked?0:1,total:1};for(c in i)i.hasOwnProperty(c)&&r.push(i[c]);return t&&r.sort((e,t)=>(e=e.name.toLowerCase())>(t=t.name.toLowerCase())?1:e<t?-1:0),r}getAppsCount(e){const t=this.getApps(e);return t?t.length:0}getAppsCountByIssues(e,t){const r=this.getApps(e,!1,t);let n=0,i=0,s=0,a=0,o=0;return r&&r.forEach(e=>{(e.hasCompatibilityIssue||e.hasInsecureIssue||e.hasLatencyIssue)&&a++,e.hasCompatibilityIssue&&n++,e.hasInsecureIssue&&i++,e.hasLatencyIssue&&s++,o++}),{compatibility:n,insecure:i,latency:s,total:a,all:o}}getAppsCountByBlocked(e){const t=this.getApps(e);let r=0,n=0;return t&&t.forEach(e=>{e.blocked?r++:n++}),{blocked:r,allowed:n}}checkLatencyIssue(e,t,r){return r?r<a?0:this._foundBugs.hasOwnProperty(e)&&this._foundBugs[e][t]?this._foundBugs[e][t].hasLatencyIssue?0:(this._foundBugs[e][t].hasLatencyIssue=!0,n.a.db.bugs[t].aid):0:0}clear(e){delete this._foundBugs[e]}}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldKeepResource=t.randRange=t.orPromises=t.hashString=t.getABNumber=t.getLatestOfferInstallTs=t.dayHour=t.weekDay=t.timestampMS=t.timestamp=t.generateUUID=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=u(r(147)),s=u(r(88)),a=u(r(11)),o=u(r(22));function u(e){return e&&e.__esModule?e:{default:e}}function c(){return Date.now()}function l(e,t){return Math.floor(Math.random()*(t-e))+e}t.generateUUID=function(){function e(){return Math.floor(65536*(1+(0,i.default)())).toString(16).substring(1)}return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`},t.timestamp=function(){return Math.round(Date.now()/1e3)},t.timestampMS=c,t.weekDay=function(){return(new Date).getDay()+1},t.dayHour=function(){return(new Date).getHours()},t.getLatestOfferInstallTs=function(){const e=String(o.default.EXTENSION_VERSION),t=+c(),r=a.default.get("offersInstallInfo",null);if(null===r)return a.default.set("offersInstallInfo",`${e}|${t}`),t;var i=r.split("|"),s=n(i,2);const u=s[0],l=s[1];return u!==e?(a.default.set("offersInstallInfo",`${e}|${t}`),t):isNaN(+l)?(a.default.set("offersInstallInfo",`${e}|${t}`),t):+l},t.getABNumber=function(){if(a.default.has("offersUniqueNumber"))return+a.default.get("offersUniqueNumber",0);const e=Math.floor(1e4*(0,i.default)());return a.default.set("offersUniqueNumber",String(e)),e},t.hashString=function(e){let t=5381;for(let r=0,n=e.length;r<n;r+=1)t=33*t^e.charCodeAt(r);return(t>>>0)%2147483648},t.orPromises=function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t||r>=t.length)return Promise.resolve(!1);return(0,t[r])().then(n=>n?Promise.resolve(!0):t.length===r+1?Promise.resolve(!1):e(t,r+1))},t.randRange=l,t.shouldKeepResource=function(e){if(s.default.IS_DEV_MODE)return!0;const t=(()=>{const e="offersUserGroup";let t=null;return a.default.has(e)?t=Number(a.default.get(e,0)):(t=l(1,101),a.default.set(e,t.toString())),t})();return e>0&&t>=e}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){t.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,u=(1<<o)-1,c=u>>1,l=-7,d=r?i-1:0,h=r?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-l)-1,f>>=-l,l+=o;l>0;s=256*s+e[t+d],d+=h,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=n;l>0;a=256*a+e[t+d],d+=h,l-=8);if(0===s)s=1-c;else{if(s===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),s-=c}return(f?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var a,o,u,c=8*s-i-1,l=(1<<c)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=l?(o=0,a=l):a+d>=1?(o=(t*u-1)*Math.pow(2,i),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&o,f+=p,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;e[r+f]=255&a,f+=p,a/=256,c-=8);e[r+f-p]|=128*m}},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=c(e),n=r[0],a=r[1],o=new s(function(e,t,r){return 3*(t+r)/4-r}(0,n,a)),u=0,l=a>0?n-4:n,d=0;d<l;d+=4)t=i[e.charCodeAt(d)]<<18|i[e.charCodeAt(d+1)]<<12|i[e.charCodeAt(d+2)]<<6|i[e.charCodeAt(d+3)],o[u++]=t>>16&255,o[u++]=t>>8&255,o[u++]=255&t;2===a&&(t=i[e.charCodeAt(d)]<<2|i[e.charCodeAt(d+1)]>>4,o[u++]=255&t);1===a&&(t=i[e.charCodeAt(d)]<<10|i[e.charCodeAt(d+1)]<<4|i[e.charCodeAt(d+2)]>>2,o[u++]=t>>8&255,o[u++]=255&t);return o},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,s=[],a=0,o=r-i;a<o;a+=16383)s.push(d(e,a,a+16383>o?o:a+16383));1===i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=a.length;o<u;++o)n[o]=a[o],i[a.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function d(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(l(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,r){"use strict";var n=r(1),i=r(38),s=r(179),a=r(30),o=r(64),u=r(8),c=r(2),l=r(3);const{adblocker:d,antitracking:h}=s.a.modules;t.a=new class{constructor(){this.backgrounds={alert:[255,157,0,230],default:[51,0,51,230]},this.policy=new o.c}update(e){e?Object(u.getTab)(e,this._getIconCount.bind(this),e=>{Object(c.log)("Button.update failed",e)}):chrome.tabs.query({active:!0},e=>{chrome.runtime.lastError?Object(c.log)("chrome.tabs.query",chrome.runtime.lastError.message):e.map(this._getIconCount.bind(this))})}_setIcon(e,t,r,i){if("android"===l.a.BROWSER_INFO.os)return;if(t<=0)return;const s=e?n.a.enable_offers&&a.a.unreadOfferIds.length>0?"_star":"":"_off";chrome.browserAction.setIcon({path:{19:`app/images/icon19${s}.png`,38:`app/images/icon38${s}.png`},tabId:t},()=>{chrome.runtime.lastError?Object(c.log)("chrome.browserAction.setIcon",chrome.runtime.lastError):Object(u.getTab)(t,()=>{if("function"==typeof chrome.browserAction.setTitle&&chrome.browserAction.setTitle({title:chrome.i18n.getMessage("browser_button_tooltip"),tabId:t}),n.a.show_badge){const s=n.a.enable_offers&&a.a.unreadOfferIds.length&&e?"":r;chrome.browserAction.setBadgeText({text:s,tabId:t}),chrome.browserAction.setBadgeBackgroundColor({color:i?this.backgrounds.alert:this.backgrounds.default,tabId:t})}})})}_getIconCount(e){const t=e.id;let r="",n=!1;if(!1===i.a.getBugs(t))return r="",void this._setIcon(!1,t,r,n);this._getAntiTrackCount(t).then(i=>{const{appsCount:s,appsAlertCount:a}=this._getTrackerCount(t),o=this._getAdBlockCount(t);n=a>0,""===(r=(s+i+o).toString())?this._setIcon(!1,t,r,n):this._setIcon(!l.a.SESSION.paused_blocking&&!this.policy.whitelisted(e.url),t,r,n)})}_getTrackerCount(e,t){const r=i.a.getAppsCountByIssues(e,t);return{appsCount:r.all,appsAlertCount:r.total}}_getAntiTrackCount(e){return new Promise(t=>{n.a.enable_anti_tracking&&h.background||t(0),h.background.actions.aggregatedBlockingStats(e).then(e=>{let r=0;for(const t in e)if(e.hasOwnProperty(t))for(const n in e[t])"unsafe"===e[t][n]&&r++;t(r)}).catch(()=>{t(0)})})}_getAdBlockCount(e){if(!n.a.enable_ad_block||!d.background)return 0;const t=d.background.actions.getAdBlockInfoForTab(e);return t&&t.totalCount||0}}},,function(e,t,r){"use strict";var n=r(77),i=r(403),s=r(174),a=r(51),o=r(49),u=r(402),c=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,c=this._parents,d=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,p=c?c.length:0;r;)r.remove(this),r=++f<p&&c[f]||null;if(s.isFunction(d))a.tryCatch(d).call(this)===o.errorObject&&(t=!0,e=e||(o.errorObject.e instanceof u.UnsubscriptionError?l(o.errorObject.e.errors):[o.errorObject.e]));if(n.isArray(h))for(f=-1,p=h.length;++f<p;){var m=h[f];if(i.isObject(m))if(a.tryCatch(m.unsubscribe).call(m)===o.errorObject){t=!0,e=e||[];var _=o.errorObject.e;_ instanceof u.UnsubscriptionError?e=e.concat(l(_.errors)):e.push(_)}}if(t)throw new u.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function l(e){return e.reduce(function(e,t){return e.concat(t instanceof u.UnsubscriptionError?t.errors:t)},[])}t.Subscription=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(22)),i=p(r(1229)),s=p(r(11)),a=p(r(433)),o=r(60),u=r(55),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(249)),l=p(r(110)),d=p(r(1198)),h=p(r(31)),f=p(r(426));function p(e){return e&&e.__esModule?e:{default:e}}const m={getLogoDetails:h.default.service("logos").getLogoDetails,environment:i.default,get FEEDBACK_URL(){return`${n.default.settings.FEEDBACK}${n.default.EXTENSION_VERSION}-${n.default.settings.channel}`},RESULTS_TIMEOUT:i.default.RESULTS_TIMEOUT,SKIN_PATH:i.default.SKIN_PATH,BROWSER_ONBOARDING_PREF:i.default.BROWSER_ONBOARDING_PREF,telemetryHandlers:[i.default.telemetry],init(){i.default.getLogoDetails=m.getLogoDetails,i.default.app=m.app,m.tldExtractor=i.default.tldExtractor||o.getPublicSuffix},getLocalStorage:e=>new a.default(e),openTabInWindow:i.default.openTabInWindow,getDay:()=>Math.floor((new Date).getTime()/864e5),getServerDay(){const e=s.default.get("config_ts",null);if(e)try{const t=e.substr(0,4),r=e.substr(4,2),n=e.substr(6,2),i=new Date(`${t}/${r}/${n}`);return Math.floor((i.getTime()-60*i.getTimezoneOffset()*1e3)/864e5)}catch(e){}return m.getDay()},fetchFactory:()=>(0,u.fetchFactory)(),historySearch:d.default,getSuggestions(e){const t=c.getDefaultSearchEngine().getSubmissionForQuery(e,"application/x-suggestions+json"),r=m.fetchFactory();return t?r(t,{credentials:"omit",cache:"no-store"}).then(e=>e.json()):Promise.resolve([e,[]])},setDefaultCountryIndex(){const e=s.default.get("backend_country",""),t=JSON.parse(s.default.get("config_backends",'["de"]')),r=-1===t.indexOf(e);if(""===e||r){const e=s.default.get("config_location","de");-1!==t.indexOf(e)?s.default.set("backend_country",e):"de"===l.default.currLocale?s.default.set("backend_country","de"):s.default.set("backend_country","us")}},isPrivateResultType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return!1;const t=e[0].split("|")[0];return!!e.some(e=>"C"===e.split("|")[0])||-1!=="HBTCS".indexOf(t)&&1===e.length},_queryLastDraw:null,_queryCount:null,_sessionSeq:0,_searchSession:"",setSearchSession(){const e=(0,f.default)(32);m._searchSession=e,m._sessionSeq=0,m._queryCount=0,m._queryLastDraw=0},encodeSessionParams:()=>m._searchSession.length?"&s="+encodeURIComponent(m._searchSession)+"&n="+m._sessionSeq+"&qc="+m._queryCount:"",isPrivateMode:e=>(e||(e=m.getWindow()),i.default.isPrivate(e)||i.default.isOnPrivateTab(e)),telemetry(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.all(m.telemetryHandlers.map((()=>{var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(e){try{yield e(...t)}catch(e){}});return function(t){return e.apply(this,arguments)}})()))},getWindow:i.default.getWindow,getWindowID:i.default.getWindowID,search:i.default.search,distance(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.USER_LNG,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m.USER_LAT;function i(e){return e*Math.PI/180}if(!(r&&e&&n&&t))return-1;const s=i(n-t),a=i(r-e),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(i(t))*Math.cos(i(n))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},isDefaultBrowser:i.default.isDefaultBrowser,updateAlias:i.default.updateAlias,openLink:i.default.openLink};t.default=m},,function(e,t,r){"use strict";t.errorObject={e:{}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(14),a=r(46),o=r(171),u=r(400),c=r(173),l=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(s.Subscriber);t.SubjectSubscriber=l;var d=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new o.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new o.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(i.Observable);t.Subject=d;var h=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.Subscription.EMPTY},t}(d);t.AnonymousSubject=h},function(e,t,r){"use strict";var n,i=r(49);function s(){try{return n.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}t.tryCatch=function(e){return n=e,s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extensionUuid=t.isWebExtension=t.isOnionMode=t.isAMO=t.isCliqzBrowser=t.platformName=t.isEdge=t.isChromium=t.isMobile=t.isFirefox=t.isCliqzAtLeastInVersion=t.isPlatformAtLeastInVersion=void 0;var n=r(1217);Object.defineProperty(t,"isPlatformAtLeastInVersion",{enumerable:!0,get:function(){return n.isPlatformAtLeastInVersion}}),Object.defineProperty(t,"isCliqzAtLeastInVersion",{enumerable:!0,get:function(){return n.isCliqzAtLeastInVersion}}),t.notImplemented=function(){throw new Error("Not implemented")},t.isWindows=function(){return n.OS&&0===n.OS.indexOf("win")},t.isMac=function(){return n.OS&&0===n.OS.indexOf("darwin")},t.isLinux=function(){return n.OS&&0===n.OS.indexOf("linux")};var i=a(r(22)),s=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.isFirefox=s.default.isFirefox,t.isMobile=s.default.isMobile,t.isChromium=s.default.isChromium,t.isEdge=s.default.isEdge;const o=t.platformName=s.default.platformName;t.isCliqzBrowser="40"===i.default.settings.channel,t.isAMO="04"===i.default.settings.channel,t.isOnionMode=!!s.default.isOnionMode,t.isWebExtension="webextension"===o,t.extensionUuid=s.default.extensionUuid},,function(e,t,r){"use strict";(function(e){var r="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=r||void 0!==e&&e||n;t.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,r(17))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Response=t.Request=t.Headers=void 0,t.fetch=l,t.fetchFactory=function(){return l};var n=r(251);Object.defineProperty(t,"Headers",{enumerable:!0,get:function(){return n.Headers}}),Object.defineProperty(t,"Request",{enumerable:!0,get:function(){return n.Request}}),Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return n.Response}}),t.defaultHttpHandler=d,t.httpHandler=f,t._httpHandler=p,t.httpGet=function(e,t,r,n,i,s){return p("GET",e,t,r,n,i,s)},t.httpPost=function(e,t,r,n,i){return p("POST",e,t,n,i,r)},t.overrideHttpHandler=function(e){h=e},t.addCompressionExclusion=function(e){_.add(e)},t.promiseHttpHandler=function(e,t,r,n,a){return new Promise((o,u)=>{if("POST"===e&&a&&function(e){return m&&!_.has(e)}(t)){const a=r.length;r=(0,s.compress)(r),i.default.log(`Compressed request to ${t}, bytes saved = ${a-r.length} (${(100*(a-r.length)/a).toFixed(1)}%)`,"CLIQZEnvironment.httpHandler"),f(e,t,o,u,n,r,void 0,"gzip")}else f(e,t,o,u,n,r)})},t.addListener=function(e){u.add(e)},t.removeListener=function(e){u.remove(e)};var i=function(e){return e&&e.__esModule?e:{default:e}}(r(24)),s=r(440),a=r(1219),o=r(1218);const u=new Set,c=e=>{[...u].forEach(t=>{try{t(e)}catch(e){}})};function l(){return c({url:arguments.length<=0?void 0:arguments[0]}),(0,n.fetch)(...arguments)}function d(e,t,r,n,s,u,c,l,d){if("GET"===e&&t.startsWith("chrome://")&&o.chromeUrlHandler)return void(0,o.chromeUrlHandler)(t,r,n);const h=new((0,a.XMLHttpRequestFactory)());return h.timestamp=Date.now(),d&&(0,a.setBackgroundRequest)(h),h.open(e,t,!c),(0,a.setPrivateFlags)(h),h.overrideMimeType&&h.overrideMimeType("application/json"),h.setRequestHeader("Content-Type","application/json"),l&&h.setRequestHeader("Content-Encoding",l),h.onload=(()=>{if(!parseInt)return;const e=parseInt(h.status/100,10);if(2===e||3===e||0===e)r&&r(h);else{const e=`loaded with non-200 ${t} (status=${h.status} ${h.statusText}) CLIQZEnvironment.httpHandler`;i.default.log(e),n&&n(e)}}),h.onerror=(()=>{const e=`error loading ${t} (status=${h.status} ${h.statusText}) CLIQZEnvironment.httpHandler`;i.default.log(e),n&&n(e)}),h.ontimeout=(()=>{const e=`timeout for ${t} CLIQZEnvironment.httpHandler`;i.default.log(e),n&&n(e)}),r&&(h.timeout=s?parseInt(s,10):["POST","PUT"].indexOf(e)>=0?1e4:1e3),h.send(u),h}let h=d;function f(){return h(...arguments)}function p(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];c({url:t[1]});const n=t[3];try{return f.call(void 0,...t)}catch(e){n?n(e):i.default.log(e,"httpHandler failed")}}const m=Boolean(s.compress),_=new Set},function(e,t,r){(function(e){e.exports=function(){"use strict";var t,r;function n(){return t.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){return void 0===e}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var r,n=[];for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var r in t)l(t,r)&&(e[r]=t[r]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,r,n){return Ot(e,t,r,n,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=f(e),n=r.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=h(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var _=n.momentProperties=[];function g(e,t){var r,n,i;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=f(t)),a(t._locale)||(e._locale=t._locale),0<_.length)for(r=0;r<_.length;r++)a(i=t[n=_[r]])||(e[n]=i);return e}var y=!1;function v(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,n.updateOffset(this),y=!1)}function b(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function $(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=$(t)),r}function k(e,t,r){var n,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(n=0;n<i;n++)(r&&e[n]!==t[n]||!r&&w(e[n])!==w(t[n]))&&a++;return a+s}function M(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var r=!0;return d(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),r){for(var i,s=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var o in i+="\n["+a+"] ",arguments[0])i+=o+": "+arguments[0][o]+", ";i=i.slice(0,-2)}else i=arguments[a];s.push(i)}M(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)},t)}var O,x={};function T(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),x[e]||(M(t),x[e]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var r,n=d({},e);for(r in t)l(t,r)&&(s(e[r])&&s(t[r])?(n[r]={},d(n[r],e[r]),d(n[r],t[r])):null!=t[r]?n[r]=t[r]:delete n[r]);for(r in e)l(e,r)&&!l(t,r)&&s(e[r])&&(n[r]=d({},n[r]));return n}function L(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,O=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)l(e,t)&&r.push(t);return r};var P={};function A(e,t){var r=e.toLowerCase();P[r]=P[r+"s"]=P[t]=e}function j(e){return"string"==typeof e?P[e]||P[e.toLowerCase()]:void 0}function R(e){var t,r,n={};for(r in e)l(e,r)&&(t=j(r))&&(n[t]=e[r]);return n}var I={};function C(e,t){I[e]=t}function Y(e,t,r){var n=""+Math.abs(e),i=t-n.length;return(0<=e?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},q={};function H(e,t,r,n){var i=n;"string"==typeof n&&(i=function(){return this[n]()}),e&&(q[e]=i),t&&(q[t[0]]=function(){return Y(i.apply(this,arguments),t[1],t[2])}),r&&(q[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function z(e,t){return e.isValid()?(t=B(t,e.localeData()),U[t]=U[t]||function(e){var t,r,n,i=e.match(F);for(t=0,r=i.length;t<r;t++)q[i[t]]?i[t]=q[i[t]]:i[t]=(n=i[t]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(t){var n,s="";for(n=0;n<r;n++)s+=E(i[n])?i[n].call(t,e):i[n];return s}}(t),U[t](e)):e.localeData().invalidDate()}function B(e,t){var r=5;function n(e){return t.longDateFormat(e)||e}for(N.lastIndex=0;0<=r&&N.test(e);)e=e.replace(N,n),N.lastIndex=0,r-=1;return e}var W=/\d/,V=/\d\d/,G=/\d{3}/,K=/\d{4}/,J=/[+-]?\d{6}/,Q=/\d\d?/,Z=/\d\d\d\d?/,X=/\d\d\d\d\d\d?/,ee=/\d{1,3}/,te=/\d{1,4}/,re=/[+-]?\d{1,6}/,ne=/\d+/,ie=/[+-]?\d+/,se=/Z|[+-]\d\d:?\d\d/gi,ae=/Z|[+-]\d\d(?::?\d\d)?/gi,oe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ue={};function ce(e,t,r){ue[e]=E(t)?t:function(e,n){return e&&r?r:t}}function le(e,t){return l(ue,e)?ue[e](t._strict,t._locale):new RegExp(de(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,n,i){return t||r||n||i})))}function de(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var he={};function fe(e,t){var r,n=t;for("string"==typeof e&&(e=[e]),o(t)&&(n=function(e,r){r[t]=w(e)}),r=0;r<e.length;r++)he[e[r]]=n}function pe(e,t){fe(e,function(e,r,n,i){n._w=n._w||{},t(e,n._w,n,i)})}var me=0,_e=1,ge=2,ye=3,ve=4,be=5,$e=6,we=7,ke=8;function Me(e){return Se(e)?366:365}function Se(e){return e%4==0&&e%100!=0||e%400==0}H("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),A("year","y"),C("year",1),ce("Y",ie),ce("YY",Q,V),ce("YYYY",te,K),ce("YYYYY",re,J),ce("YYYYYY",re,J),fe(["YYYYY","YYYYYY"],me),fe("YYYY",function(e,t){t[me]=2===e.length?n.parseTwoDigitYear(e):w(e)}),fe("YY",function(e,t){t[me]=n.parseTwoDigitYear(e)}),fe("Y",function(e,t){t[me]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return w(e)+(68<w(e)?1900:2e3)};var Oe,xe=Te("FullYear",!0);function Te(e,t){return function(r){return null!=r?(De(this,e,r),n.updateOffset(this,t),this):Ee(this,e)}}function Ee(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function De(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&Se(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Le(r,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function Le(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=(t%12+12)%12;return e+=(t-r)/12,1===r?Se(e)?29:28:31-r%7%2}Oe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),H("MMMM",0,0,function(e){return this.localeData().months(this,e)}),A("month","M"),C("month",8),ce("M",Q),ce("MM",Q,V),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),fe(["M","MM"],function(e,t){t[_e]=w(e)-1}),fe(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);null!=i?t[_e]=i:f(r).invalidMonth=e});var Pe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ae="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),je="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Re(e,t){var r;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(!o(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),Le(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function Ie(e){return null!=e?(Re(this,e),n.updateOffset(this,!0),this):Ee(this,"Month")}var Ce=oe,Ye=oe;function Fe(){function e(e,t){return t.length-e.length}var t,r,n=[],i=[],s=[];for(t=0;t<12;t++)r=h([2e3,t]),n.push(this.monthsShort(r,"")),i.push(this.months(r,"")),s.push(this.months(r,"")),s.push(this.monthsShort(r,""));for(n.sort(e),i.sort(e),s.sort(e),t=0;t<12;t++)n[t]=de(n[t]),i[t]=de(i[t]);for(t=0;t<24;t++)s[t]=de(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ne(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ue(e,t,r){var n=7+t-r;return-(7+Ne(e,0,n).getUTCDay()-t)%7+n-1}function qe(e,t,r,n,i){var s,a,o=1+7*(t-1)+(7+r-n)%7+Ue(e,n,i);return o<=0?a=Me(s=e-1)+o:o>Me(e)?(s=e+1,a=o-Me(e)):(s=e,a=o),{year:s,dayOfYear:a}}function He(e,t,r){var n,i,s=Ue(e.year(),t,r),a=Math.floor((e.dayOfYear()-s-1)/7)+1;return a<1?n=a+ze(i=e.year()-1,t,r):a>ze(e.year(),t,r)?(n=a-ze(e.year(),t,r),i=e.year()+1):(i=e.year(),n=a),{week:n,year:i}}function ze(e,t,r){var n=Ue(e,t,r),i=Ue(e+1,t,r);return(Me(e)-n+i)/7}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),C("week",5),C("isoWeek",5),ce("w",Q),ce("ww",Q,V),ce("W",Q),ce("WW",Q,V),pe(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=w(e)}),H("d",0,"do","day"),H("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),H("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),H("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),C("day",11),C("weekday",11),C("isoWeekday",11),ce("d",Q),ce("e",Q),ce("E",Q),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,t){return t.weekdaysRegex(e)}),pe(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);null!=i?t.d=i:f(r).invalidWeekday=e}),pe(["d","e","E"],function(e,t,r,n){t[n]=w(e)});var Be="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),We="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ve="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ge=oe,Ke=oe,Je=oe;function Qe(){function e(e,t){return t.length-e.length}var t,r,n,i,s,a=[],o=[],u=[],c=[];for(t=0;t<7;t++)r=h([2e3,1]).day(t),n=this.weekdaysMin(r,""),i=this.weekdaysShort(r,""),s=this.weekdays(r,""),a.push(n),o.push(i),u.push(s),c.push(n),c.push(i),c.push(s);for(a.sort(e),o.sort(e),u.sort(e),c.sort(e),t=0;t<7;t++)o[t]=de(o[t]),u[t]=de(u[t]),c[t]=de(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ze(){return this.hours()%12||12}function Xe(e,t){H(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,Ze),H("k",["kk",2],0,function(){return this.hours()||24}),H("hmm",0,0,function(){return""+Ze.apply(this)+Y(this.minutes(),2)}),H("hmmss",0,0,function(){return""+Ze.apply(this)+Y(this.minutes(),2)+Y(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+Y(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+Y(this.minutes(),2)+Y(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),A("hour","h"),C("hour",13),ce("a",et),ce("A",et),ce("H",Q),ce("h",Q),ce("k",Q),ce("HH",Q,V),ce("hh",Q,V),ce("kk",Q,V),ce("hmm",Z),ce("hmmss",X),ce("Hmm",Z),ce("Hmmss",X),fe(["H","HH"],ye),fe(["k","kk"],function(e,t,r){var n=w(e);t[ye]=24===n?0:n}),fe(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e}),fe(["h","hh"],function(e,t,r){t[ye]=w(e),f(r).bigHour=!0}),fe("hmm",function(e,t,r){var n=e.length-2;t[ye]=w(e.substr(0,n)),t[ve]=w(e.substr(n)),f(r).bigHour=!0}),fe("hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[ye]=w(e.substr(0,n)),t[ve]=w(e.substr(n,2)),t[be]=w(e.substr(i)),f(r).bigHour=!0}),fe("Hmm",function(e,t,r){var n=e.length-2;t[ye]=w(e.substr(0,n)),t[ve]=w(e.substr(n))}),fe("Hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[ye]=w(e.substr(0,n)),t[ve]=w(e.substr(n,2)),t[be]=w(e.substr(i))});var tt,rt=Te("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ae,monthsShort:je,week:{dow:0,doy:6},weekdays:Be,weekdaysMin:Ve,weekdaysShort:We,meridiemParse:/[ap]\.?m?\.?/i},it={},st={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ot(t){var r=null;if(!it[t]&&void 0!==e&&e&&e.exports)try{r=tt._abbr,function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),ut(r)}catch(t){}return it[t]}function ut(e,t){var r;return e&&((r=a(t)?lt(e):ct(e,t))?tt=r:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),tt._abbr}function ct(e,t){if(null!==t){var r,n=nt;if(t.abbr=e,null!=it[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=it[e]._config;else if(null!=t.parentLocale)if(null!=it[t.parentLocale])n=it[t.parentLocale]._config;else{if(null==(r=ot(t.parentLocale)))return st[t.parentLocale]||(st[t.parentLocale]=[]),st[t.parentLocale].push({name:e,config:t}),null;n=r._config}return it[e]=new L(D(n,t)),st[e]&&st[e].forEach(function(e){ct(e.name,e.config)}),ut(e),it[e]}return delete it[e],null}function lt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return tt;if(!i(e)){if(t=ot(e))return t;e=[e]}return function(e){for(var t,r,n,i,s=0;s<e.length;){for(t=(i=at(e[s]).split("-")).length,r=(r=at(e[s+1]))?r.split("-"):null;0<t;){if(n=ot(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&k(i,r,!0)>=t-1)break;t--}s++}return tt}(e)}function dt(e){var t,r=e._a;return r&&-2===f(e).overflow&&(t=r[_e]<0||11<r[_e]?_e:r[ge]<1||r[ge]>Le(r[me],r[_e])?ge:r[ye]<0||24<r[ye]||24===r[ye]&&(0!==r[ve]||0!==r[be]||0!==r[$e])?ye:r[ve]<0||59<r[ve]?ve:r[be]<0||59<r[be]?be:r[$e]<0||999<r[$e]?$e:-1,f(e)._overflowDayOfYear&&(t<me||ge<t)&&(t=ge),f(e)._overflowWeeks&&-1===t&&(t=we),f(e)._overflowWeekday&&-1===t&&(t=ke),f(e).overflow=t),e}function ht(e,t,r){return null!=e?e:null!=t?t:r}function ft(e){var t,r,i,s,a,o=[];if(!e._d){var u,c;for(u=e,c=new Date(n.now()),i=u._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()],e._w&&null==e._a[ge]&&null==e._a[_e]&&function(e){var t,r,n,i,s,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)s=1,a=4,r=ht(t.GG,e._a[me],He(xt(),1,4).year),n=ht(t.W,1),((i=ht(t.E,1))<1||7<i)&&(u=!0);else{s=e._locale._week.dow,a=e._locale._week.doy;var c=He(xt(),s,a);r=ht(t.gg,e._a[me],c.year),n=ht(t.w,c.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+s,(t.e<0||6<t.e)&&(u=!0)):i=s}n<1||n>ze(r,s,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(o=qe(r,n,i,s,a),e._a[me]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=ht(e._a[me],i[me]),(e._dayOfYear>Me(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),r=Ne(a,0,e._dayOfYear),e._a[_e]=r.getUTCMonth(),e._a[ge]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ye]&&0===e._a[ve]&&0===e._a[be]&&0===e._a[$e]&&(e._nextDay=!0,e._a[ye]=0),e._d=(e._useUTC?Ne:function(e,t,r,n,i,s,a){var o=new Date(e,t,r,n,i,s,a);return e<100&&0<=e&&isFinite(o.getFullYear())&&o.setFullYear(e),o}).apply(null,o),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ye]=24),e._w&&void 0!==e._w.d&&e._w.d!==s&&(f(e).weekdayMismatch=!0)}}var pt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],yt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vt=/^\/?Date\((\-?\d+)/i;function bt(e){var t,r,n,i,s,a,o=e._i,u=pt.exec(o)||mt.exec(o);if(u){for(f(e).iso=!0,t=0,r=gt.length;t<r;t++)if(gt[t][1].exec(u[1])){i=gt[t][0],n=!1!==gt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,r=yt.length;t<r;t++)if(yt[t][1].exec(u[3])){s=(u[2]||" ")+yt[t][0];break}if(null==s)return void(e._isValid=!1)}if(!n&&null!=s)return void(e._isValid=!1);if(u[4]){if(!_t.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(s||"")+(a||""),Mt(e)}else e._isValid=!1}var $t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,wt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t,r,n,i=$t.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(i){var s=function(e,t,r,n,i,s){var a=[function(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}(e),je.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return s&&a.push(parseInt(s,10)),a}(i[4],i[3],i[2],i[5],i[6],i[7]);if(t=i[1],r=s,n=e,t&&We.indexOf(t)!==new Date(r[0],r[1],r[2]).getDay()&&(f(n).weekdayMismatch=!0,!(n._isValid=!1)))return;e._a=s,e._tzm=function(e,t,r){if(e)return wt[e];if(t)return 0;var n=parseInt(r,10),i=n%100;return(n-i)/100*60+i}(i[8],i[9],i[10]),e._d=Ne.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function Mt(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],f(e).empty=!0;var t,r,i,s,a,o,u,c,d=""+e._i,h=d.length,p=0;for(i=B(e._f,e._locale).match(F)||[],t=0;t<i.length;t++)s=i[t],(r=(d.match(le(s,e))||[])[0])&&(0<(a=d.substr(0,d.indexOf(r))).length&&f(e).unusedInput.push(a),d=d.slice(d.indexOf(r)+r.length),p+=r.length),q[s]?(r?f(e).empty=!1:f(e).unusedTokens.push(s),o=s,c=e,null!=(u=r)&&l(he,o)&&he[o](u,c._a,c,o)):e._strict&&!r&&f(e).unusedTokens.push(s);f(e).charsLeftOver=h-p,0<d.length&&f(e).unusedInput.push(d),e._a[ye]<=12&&!0===f(e).bigHour&&0<e._a[ye]&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[ye]=function(e,t,r){var n;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):(null!=e.isPM&&((n=e.isPM(r))&&t<12&&(t+=12),n||12!==t||(t=0)),t)}(e._locale,e._a[ye],e._meridiem),ft(e),dt(e)}else kt(e);else bt(e)}function St(e){var t,r,l,h,_=e._i,y=e._f;return e._locale=e._locale||lt(e._l),null===_||void 0===y&&""===_?m({nullInput:!0}):("string"==typeof _&&(e._i=_=e._locale.preparse(_)),b(_)?new v(dt(_)):(u(_)?e._d=_:i(y)?function(e){var t,r,n,i,s;if(0===e._f.length)return f(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)s=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Mt(t),p(t)&&(s+=f(t).charsLeftOver,s+=10*f(t).unusedTokens.length,f(t).score=s,(null==n||s<n)&&(n=s,r=t));d(e,r||t)}(e):y?Mt(e):a(r=(t=e)._i)?t._d=new Date(n.now()):u(r)?t._d=new Date(r.valueOf()):"string"==typeof r?(l=t,null===(h=vt.exec(l._i))?(bt(l),!1===l._isValid&&(delete l._isValid,kt(l),!1===l._isValid&&(delete l._isValid,n.createFromInputFallback(l)))):l._d=new Date(+h[1])):i(r)?(t._a=c(r.slice(0),function(e){return parseInt(e,10)}),ft(t)):s(r)?function(e){if(!e._d){var t=R(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ft(e)}}(t):o(r)?t._d=new Date(r):n.createFromInputFallback(t),p(e)||(e._d=null),e))}function Ot(e,t,r,n,a){var o,u={};return!0!==r&&!1!==r||(n=r,r=void 0),(s(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||i(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=r,u._i=e,u._f=t,u._strict=n,(o=new v(dt(St(u))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function xt(e,t,r,n){return Ot(e,t,r,n,!1)}n.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Tt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=xt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),Et=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=xt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:m()});function Dt(e,t){var r,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return xt();for(r=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r}var Lt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Pt(e){var t=R(e),r=t.year||0,n=t.quarter||0,i=t.month||0,s=t.week||0,a=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Oe.call(Lt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,n=0;n<Lt.length;++n)if(e[Lt[n]]){if(r)return!1;parseFloat(e[Lt[n]])!==w(e[Lt[n]])&&(r=!0)}return!0}(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*o*60*60,this._days=+a+7*s,this._months=+i+3*n+12*r,this._data={},this._locale=lt(),this._bubble()}function At(e){return e instanceof Pt}function jt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Rt(e,t){H(e,0,0,function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+Y(~~(e/60),2)+t+Y(~~e%60,2)})}Rt("Z",":"),Rt("ZZ",""),ce("Z",ae),ce("ZZ",ae),fe(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=Ct(ae,e)});var It=/([\+\-]|\d\d)/gi;function Ct(e,t){var r=(t||"").match(e);if(null===r)return null;var n=((r[r.length-1]||[])+"").match(It)||["-",0,0],i=60*n[1]+w(n[2]);return 0===i?0:"+"===n[0]?i:-i}function Yt(e,t){var r,i;return t._isUTC?(r=t.clone(),i=(b(e)||u(e)?e.valueOf():xt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):xt(e).local()}function Ft(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Nt(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var Ut=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,qt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ht(e,t){var r,n,i,s=e,a=null;return At(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(s={},t?s[t]=e:s.milliseconds=e):(a=Ut.exec(e))?(r="-"===a[1]?-1:1,s={y:0,d:w(a[ge])*r,h:w(a[ye])*r,m:w(a[ve])*r,s:w(a[be])*r,ms:w(jt(1e3*a[$e]))*r}):(a=qt.exec(e))?(r="-"===a[1]?-1:(a[1],1),s={y:zt(a[2],r),M:zt(a[3],r),w:zt(a[4],r),d:zt(a[5],r),h:zt(a[6],r),m:zt(a[7],r),s:zt(a[8],r)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(i=function(e,t){var r;return e.isValid()&&t.isValid()?(t=Yt(t,e),e.isBefore(t)?r=Bt(e,t):((r=Bt(t,e)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}(xt(s.from),xt(s.to)),(s={}).ms=i.milliseconds,s.M=i.months),n=new Pt(s),At(e)&&l(e,"_locale")&&(n._locale=e._locale),n}function zt(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Bt(e,t){var r={milliseconds:0,months:0};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Wt(e,t){return function(r,n){var i;return null===n||isNaN(+n)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),Vt(this,Ht(r="string"==typeof r?+r:r,n),e),this}}function Vt(e,t,r,i){var s=t._milliseconds,a=jt(t._days),o=jt(t._months);e.isValid()&&(i=null==i||i,o&&Re(e,Ee(e,"Month")+o*r),a&&De(e,"Date",Ee(e,"Date")+a*r),s&&e._d.setTime(e._d.valueOf()+s*r),i&&n.updateOffset(e,a||o))}Ht.fn=Pt.prototype,Ht.invalid=function(){return Ht(NaN)};var Gt=Wt(1,"add"),Kt=Wt(-1,"subtract");function Jt(e,t){var r=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(r,"months");return-(r+(t-n<0?(t-n)/(n-e.clone().add(r-1,"months")):(t-n)/(e.clone().add(r+1,"months")-n)))||0}function Qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=lt(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Zt=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Xt(){return this._locale}function er(e,t){H(0,[e,e.length],0,t)}function tr(e,t,r,n,i){var s;return null==e?He(this,n,i).year:((s=ze(e,n,i))<t&&(t=s),function(e,t,r,n,i){var s=qe(e,t,r,n,i),a=Ne(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,r,n,i))}H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),er("gggg","weekYear"),er("ggggg","weekYear"),er("GGGG","isoWeekYear"),er("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),C("weekYear",1),C("isoWeekYear",1),ce("G",ie),ce("g",ie),ce("GG",Q,V),ce("gg",Q,V),ce("GGGG",te,K),ce("gggg",te,K),ce("GGGGG",re,J),ce("ggggg",re,J),pe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=w(e)}),pe(["gg","GG"],function(e,t,r,i){t[i]=n.parseTwoDigitYear(e)}),H("Q",0,"Qo","quarter"),A("quarter","Q"),C("quarter",7),ce("Q",W),fe("Q",function(e,t){t[_e]=3*(w(e)-1)}),H("D",["DD",2],"Do","date"),A("date","D"),C("date",9),ce("D",Q),ce("DD",Q,V),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),fe(["D","DD"],ge),fe("Do",function(e,t){t[ge]=w(e.match(Q)[0])});var rr=Te("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),C("dayOfYear",4),ce("DDD",ee),ce("DDDD",G),fe(["DDD","DDDD"],function(e,t,r){r._dayOfYear=w(e)}),H("m",["mm",2],0,"minute"),A("minute","m"),C("minute",14),ce("m",Q),ce("mm",Q,V),fe(["m","mm"],ve);var nr=Te("Minutes",!1);H("s",["ss",2],0,"second"),A("second","s"),C("second",15),ce("s",Q),ce("ss",Q,V),fe(["s","ss"],be);var ir,sr=Te("Seconds",!1);for(H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),C("millisecond",16),ce("S",ee,W),ce("SS",ee,V),ce("SSS",ee,G),ir="SSSS";ir.length<=9;ir+="S")ce(ir,ne);function ar(e,t){t[$e]=w(1e3*("0."+e))}for(ir="S";ir.length<=9;ir+="S")fe(ir,ar);var or=Te("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var ur=v.prototype;function cr(e){return e}ur.add=Gt,ur.calendar=function(e,t){var r=e||xt(),i=Yt(r,this).startOf("day"),s=n.calendarFormat(this,i)||"sameElse",a=t&&(E(t[s])?t[s].call(this,r):t[s]);return this.format(a||this.localeData().calendar(s,this,xt(r)))},ur.clone=function(){return new v(this)},ur.diff=function(e,t,r){var n,i,s;if(!this.isValid())return NaN;if(!(n=Yt(e,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),t=j(t)){case"year":s=Jt(this,n)/12;break;case"month":s=Jt(this,n);break;case"quarter":s=Jt(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-i)/864e5;break;case"week":s=(this-n-i)/6048e5;break;default:s=this-n}return r?s:$(s)},ur.endOf=function(e){return void 0===(e=j(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ur.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=z(this,e);return this.localeData().postformat(t)},ur.from=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||xt(e).isValid())?Ht({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ur.fromNow=function(e){return this.from(xt(),e)},ur.to=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||xt(e).isValid())?Ht({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ur.toNow=function(e){return this.to(xt(),e)},ur.get=function(e){return E(this[e=j(e)])?this[e]():this},ur.invalidAt=function(){return f(this).overflow},ur.isAfter=function(e,t){var r=b(e)?e:xt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=j(a(t)?"millisecond":t))?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())},ur.isBefore=function(e,t){var r=b(e)?e:xt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=j(a(t)?"millisecond":t))?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())},ur.isBetween=function(e,t,r,n){return("("===(n=n||"()")[0]?this.isAfter(e,r):!this.isBefore(e,r))&&(")"===n[1]?this.isBefore(t,r):!this.isAfter(t,r))},ur.isSame=function(e,t){var r,n=b(e)?e:xt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=j(t||"millisecond"))?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))},ur.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ur.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ur.isValid=function(){return p(this)},ur.lang=Zt,ur.locale=Qt,ur.localeData=Xt,ur.max=Et,ur.min=Tt,ur.parsingFlags=function(){return d({},f(this))},ur.set=function(e,t){if("object"==typeof e)for(var r=function(e){var t=[];for(var r in e)t.push({unit:r,priority:I[r]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=R(e)),n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit]);else if(E(this[e=j(e)]))return this[e](t);return this},ur.startOf=function(e){switch(e=j(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ur.subtract=Kt,ur.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ur.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ur.toDate=function(){return new Date(this.valueOf())},ur.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,r=t?this.clone().utc():this;return r.year()<0||9999<r.year()?z(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",z(r,"Z")):z(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ur.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(r+n+"-MM-DD[T]HH:mm:ss.SSS"+i)},ur.toJSON=function(){return this.isValid()?this.toISOString():null},ur.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ur.unix=function(){return Math.floor(this.valueOf()/1e3)},ur.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ur.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ur.year=xe,ur.isLeapYear=function(){return Se(this.year())},ur.weekYear=function(e){return tr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ur.isoWeekYear=function(e){return tr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ur.quarter=ur.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ur.month=Ie,ur.daysInMonth=function(){return Le(this.year(),this.month())},ur.week=ur.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ur.isoWeek=ur.isoWeeks=function(e){var t=He(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ur.weeksInYear=function(){var e=this.localeData()._week;return ze(this.year(),e.dow,e.doy)},ur.isoWeeksInYear=function(){return ze(this.year(),1,4)},ur.date=rr,ur.day=ur.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,r,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,r=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=r.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-n,"d")):n},ur.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ur.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=(r=e,n=this.localeData(),"string"==typeof r?n.weekdaysParse(r)%7||7:isNaN(r)?null:r);return this.day(this.day()%7?t:t-7)}return this.day()||7;var r,n},ur.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ur.hour=ur.hours=rt,ur.minute=ur.minutes=nr,ur.second=ur.seconds=sr,ur.millisecond=ur.milliseconds=or,ur.utcOffset=function(e,t,r){var i,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ct(ae,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(i=Ft(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?Vt(this,Ht(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:Ft(this)},ur.utc=function(e){return this.utcOffset(0,e)},ur.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ft(this),"m")),this},ur.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ct(se,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ur.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?xt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ur.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ur.isLocal=function(){return!!this.isValid()&&!this._isUTC},ur.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ur.isUtc=Nt,ur.isUTC=Nt,ur.zoneAbbr=function(){return this._isUTC?"UTC":""},ur.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ur.dates=S("dates accessor is deprecated. Use date instead.",rr),ur.months=S("months accessor is deprecated. Use month instead",Ie),ur.years=S("years accessor is deprecated. Use year instead",xe),ur.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ur.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=St(e))._a){var t=e._isUTC?h(e._a):xt(e._a);this._isDSTShifted=this.isValid()&&0<k(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var lr=L.prototype;function dr(e,t,r,n){var i=lt(),s=h().set(n,t);return i[r](s,e)}function hr(e,t,r){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return dr(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=dr(e,n,r,"month");return i}function fr(e,t,r,n){"boolean"==typeof e?o(t)&&(r=t,t=void 0):(t=e,e=!1,o(r=t)&&(r=t,t=void 0)),t=t||"";var i,s=lt(),a=e?s._week.dow:0;if(null!=r)return dr(t,(r+a)%7,n,"day");var u=[];for(i=0;i<7;i++)u[i]=dr(t,(i+a)%7,n,"day");return u}lr.calendar=function(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return E(n)?n.call(t,r):n},lr.longDateFormat=function(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},lr.invalidDate=function(){return this._invalidDate},lr.ordinal=function(e){return this._ordinal.replace("%d",e)},lr.preparse=cr,lr.postformat=cr,lr.relativeTime=function(e,t,r,n){var i=this._relativeTime[r];return E(i)?i(e,t,r,n):i.replace(/%d/i,e)},lr.pastFuture=function(e,t){var r=this._relativeTime[0<e?"future":"past"];return E(r)?r(t):r.replace(/%s/i,t)},lr.set=function(e){var t,r;for(r in e)E(t=e[r])?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},lr.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Pe).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},lr.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Pe.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},lr.monthsParse=function(e,t,r){var n,i,s;if(this._monthsParseExact)return function(e,t,r){var n,i,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=h([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(i=Oe.call(this._shortMonthsParse,a))?i:null:-1!==(i=Oe.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Oe.call(this._shortMonthsParse,a))?i:-1!==(i=Oe.call(this._longMonthsParse,a))?i:null:-1!==(i=Oe.call(this._longMonthsParse,a))?i:-1!==(i=Oe.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=h([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}},lr.monthsRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Ye),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},lr.monthsShortRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Ce),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},lr.week=function(e){return He(e,this._week.dow,this._week.doy).week},lr.firstDayOfYear=function(){return this._week.doy},lr.firstDayOfWeek=function(){return this._week.dow},lr.weekdays=function(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone},lr.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},lr.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},lr.weekdaysParse=function(e,t,r){var n,i,s;if(this._weekdaysParseExact)return function(e,t,r){var n,i,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=h([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(i=Oe.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Oe.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Oe.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Oe.call(this._weekdaysParse,a))?i:-1!==(i=Oe.call(this._shortWeekdaysParse,a))?i:-1!==(i=Oe.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Oe.call(this._shortWeekdaysParse,a))?i:-1!==(i=Oe.call(this._weekdaysParse,a))?i:-1!==(i=Oe.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Oe.call(this._minWeekdaysParse,a))?i:-1!==(i=Oe.call(this._weekdaysParse,a))?i:-1!==(i=Oe.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=h([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}},lr.weekdaysRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Ge),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},lr.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ke),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},lr.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},lr.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},lr.meridiem=function(e,t,r){return 11<e?r?"pm":"PM":r?"am":"AM"},ut("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=S("moment.lang is deprecated. Use moment.locale instead.",ut),n.langData=S("moment.langData is deprecated. Use moment.localeData instead.",lt);var pr=Math.abs;function mr(e,t,r,n){var i=Ht(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function _r(e){return e<0?Math.floor(e):Math.ceil(e)}function gr(e){return 4800*e/146097}function yr(e){return 146097*e/4800}function vr(e){return function(){return this.as(e)}}var br=vr("ms"),$r=vr("s"),wr=vr("m"),kr=vr("h"),Mr=vr("d"),Sr=vr("w"),Or=vr("M"),xr=vr("y");function Tr(e){return function(){return this.isValid()?this._data[e]:NaN}}var Er=Tr("milliseconds"),Dr=Tr("seconds"),Lr=Tr("minutes"),Pr=Tr("hours"),Ar=Tr("days"),jr=Tr("months"),Rr=Tr("years"),Ir=Math.round,Cr={ss:44,s:45,m:45,h:22,d:26,M:11},Yr=Math.abs;function Fr(e){return(0<e)-(e<0)||+e}function Nr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r=Yr(this._milliseconds)/1e3,n=Yr(this._days),i=Yr(this._months);t=$((e=$(r/60))/60),r%=60,e%=60;var s=$(i/12),a=i%=12,o=n,u=t,c=e,l=r?r.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=d<0?"-":"",f=Fr(this._months)!==Fr(d)?"-":"",p=Fr(this._days)!==Fr(d)?"-":"",m=Fr(this._milliseconds)!==Fr(d)?"-":"";return h+"P"+(s?f+s+"Y":"")+(a?f+a+"M":"")+(o?p+o+"D":"")+(u||c||l?"T":"")+(u?m+u+"H":"")+(c?m+c+"M":"")+(l?m+l+"S":"")}var Ur=Pt.prototype;Ur.isValid=function(){return this._isValid},Ur.abs=function(){var e=this._data;return this._milliseconds=pr(this._milliseconds),this._days=pr(this._days),this._months=pr(this._months),e.milliseconds=pr(e.milliseconds),e.seconds=pr(e.seconds),e.minutes=pr(e.minutes),e.hours=pr(e.hours),e.months=pr(e.months),e.years=pr(e.years),this},Ur.add=function(e,t){return mr(this,e,t,1)},Ur.subtract=function(e,t){return mr(this,e,t,-1)},Ur.as=function(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if("month"===(e=j(e))||"year"===e)return t=this._days+n/864e5,r=this._months+gr(t),"month"===e?r:r/12;switch(t=this._days+Math.round(yr(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},Ur.asMilliseconds=br,Ur.asSeconds=$r,Ur.asMinutes=wr,Ur.asHours=kr,Ur.asDays=Mr,Ur.asWeeks=Sr,Ur.asMonths=Or,Ur.asYears=xr,Ur.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN},Ur._bubble=function(){var e,t,r,n,i,s=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=s&&0<=a&&0<=o||s<=0&&a<=0&&o<=0||(s+=864e5*_r(yr(o)+a),o=a=0),u.milliseconds=s%1e3,e=$(s/1e3),u.seconds=e%60,t=$(e/60),u.minutes=t%60,r=$(t/60),u.hours=r%24,o+=i=$(gr(a+=$(r/24))),a-=_r(yr(i)),n=$(o/12),o%=12,u.days=a,u.months=o,u.years=n,this},Ur.clone=function(){return Ht(this)},Ur.get=function(e){return e=j(e),this.isValid()?this[e+"s"]():NaN},Ur.milliseconds=Er,Ur.seconds=Dr,Ur.minutes=Lr,Ur.hours=Pr,Ur.days=Ar,Ur.weeks=function(){return $(this.days()/7)},Ur.months=jr,Ur.years=Rr,Ur.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,r,n,i,s,a,o,u,c,l,d=this.localeData(),h=(t=!e,r=d,n=Ht(this).abs(),i=Ir(n.as("s")),s=Ir(n.as("m")),a=Ir(n.as("h")),o=Ir(n.as("d")),u=Ir(n.as("M")),c=Ir(n.as("y")),(l=i<=Cr.ss&&["s",i]||i<Cr.s&&["ss",i]||s<=1&&["m"]||s<Cr.m&&["mm",s]||a<=1&&["h"]||a<Cr.h&&["hh",a]||o<=1&&["d"]||o<Cr.d&&["dd",o]||u<=1&&["M"]||u<Cr.M&&["MM",u]||c<=1&&["y"]||["yy",c])[2]=t,l[3]=0<+this,l[4]=r,function(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}.apply(null,l));return e&&(h=d.pastFuture(+this,h)),d.postformat(h)},Ur.toISOString=Nr,Ur.toString=Nr,Ur.toJSON=Nr,Ur.locale=Qt,Ur.localeData=Xt,Ur.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nr),Ur.lang=Zt,H("X",0,0,"unix"),H("x",0,0,"valueOf"),ce("x",ie),ce("X",/[+-]?\d+(\.\d{1,3})?/),fe("X",function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))}),fe("x",function(e,t,r){r._d=new Date(w(e))}),n.version="2.22.2",t=xt,n.fn=ur,n.min=function(){return Dt("isBefore",[].slice.call(arguments,0))},n.max=function(){return Dt("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=h,n.unix=function(e){return xt(1e3*e)},n.months=function(e,t){return hr(e,t,"months")},n.isDate=u,n.locale=ut,n.invalid=m,n.duration=Ht,n.isMoment=b,n.weekdays=function(e,t,r){return fr(e,t,r,"weekdays")},n.parseZone=function(){return xt.apply(null,arguments).parseZone()},n.localeData=lt,n.isDuration=At,n.monthsShort=function(e,t){return hr(e,t,"monthsShort")},n.weekdaysMin=function(e,t,r){return fr(e,t,r,"weekdaysMin")},n.defineLocale=ct,n.updateLocale=function(e,t){if(null!=t){var r,n,i=nt;null!=(n=ot(e))&&(i=n._config),(r=new L(t=D(i,t))).parentLocale=it[e],it[e]=r,ut(e)}else null!=it[e]&&(null!=it[e].parentLocale?it[e]=it[e].parentLocale:null!=it[e]&&delete it[e]);return it[e]},n.locales=function(){return O(it)},n.weekdaysShort=function(e,t,r){return fr(e,t,r,"weekdaysShort")},n.normalizeUnits=j,n.relativeTimeRounding=function(e){return void 0===e?Ir:"function"==typeof e&&(Ir=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==Cr[e]&&(void 0===t?Cr[e]:(Cr[e]=t,"s"===e&&(Cr.ss=t-1),!0))},n.calendarFormat=function(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},n.prototype=ur,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},n.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,r){return e<12?r?"vm":"VM":r?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}}),n.defineLocale("ar-dz",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"أح_إث_ثلا_أر_خم_جم_سب".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:4}}),n.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}});var qr={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},Hr=function(e){return 0===e?0:1===e?1:2===e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5},zr={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},Br=function(e){return function(t,r,n,i){var s=Hr(t),a=zr[e][Hr(t)];return 2===s&&(a=a[r?0:1]),a.replace(/%d/i,t)}},Wr=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];n.defineLocale("ar-ly",{months:Wr,monthsShort:Wr,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"م"===e},meridiem:function(e,t,r){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:Br("s"),ss:Br("s"),m:Br("m"),mm:Br("m"),h:Br("h"),hh:Br("h"),d:Br("d"),dd:Br("d"),M:Br("M"),MM:Br("M"),y:Br("y"),yy:Br("y")},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return qr[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}}),n.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}});var Vr={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},Gr={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};n.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"م"===e},meridiem:function(e,t,r){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return Gr[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Vr[e]}).replace(/,/g,"،")},week:{dow:0,doy:6}}),n.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}});var Kr={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},Jr={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},Qr=function(e){return 0===e?0:1===e?1:2===e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5},Zr={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},Xr=function(e){return function(t,r,n,i){var s=Qr(t),a=Zr[e][Qr(t)];return 2===s&&(a=a[r?0:1]),a.replace(/%d/i,t)}},en=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];n.defineLocale("ar",{months:en,monthsShort:en,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"م"===e},meridiem:function(e,t,r){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:Xr("s"),ss:Xr("s"),m:Xr("m"),mm:Xr("m"),h:Xr("h"),hh:Xr("h"),d:Xr("d"),dd:Xr("d"),M:Xr("M"),MM:Xr("M"),y:Xr("y"),yy:Xr("y")},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return Jr[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Kr[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}});var tn={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};function rn(e,t,r){var n,i;return"m"===r?t?"хвіліна":"хвіліну":"h"===r?t?"гадзіна":"гадзіну":e+" "+(n=+e,i={ss:t?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:t?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:t?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[r].split("_"),n%10==1&&n%100!=11?i[0]:2<=n%10&&n%10<=4&&(n%100<10||20<=n%100)?i[1]:i[2])}n.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec\u0259|s\u0259h\u0259r|g\xfcnd\xfcz|ax\u015fam/,isPM:function(e){return/^(g\xfcnd\xfcz|ax\u015fam)$/.test(e)},meridiem:function(e,t,r){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0131nc\u0131|inci|nci|\xfcnc\xfc|nc\u0131|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var t=e%10;return e+(tn[t]||tn[e%100-t]||tn[100<=e?100:null])},week:{dow:1,doy:7}}),n.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[\u0423\u0443\u045e] ?(?:\u043c\u0456\u043d\u0443\u043b\u0443\u044e|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u0443\u044e)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:rn,mm:rn,h:rn,hh:rn,d:"дзень",dd:rn,M:"месяц",MM:rn,y:"год",yy:rn},meridiemParse:/\u043d\u043e\u0447\u044b|\u0440\u0430\u043d\u0456\u0446\u044b|\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430/,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430)$/.test(e)},meridiem:function(e,t,r){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0456|\u044b|\u0433\u0430)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}}),n.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(e){var t=e%10,r=e%100;return 0===e?e+"-ев":0===r?e+"-ен":10<r&&r<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}}),n.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}});var nn={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},sn={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};n.defineLocale("bn",{months:"জানুয়ারী_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপ্র_মে_জুন_জুল_আগ_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গ_বুধ_বৃহঃ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ee\u09ef\u09e6]/g,function(e){return sn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return nn[e]})},meridiemParse:/\u09b0\u09be\u09a4|\u09b8\u0995\u09be\u09b2|\u09a6\u09c1\u09aa\u09c1\u09b0|\u09ac\u09bf\u0995\u09be\u09b2|\u09b0\u09be\u09a4/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t&&4<=e||"দুপুর"===t&&e<5||"বিকাল"===t?e+12:e},meridiem:function(e,t,r){return e<4?"রাত":e<10?"সকাল":e<17?"দুপুর":e<20?"বিকাল":"রাত"},week:{dow:0,doy:6}});var an={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},on={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};function un(e,t,r){return e+" "+function(e,t){return 2===t?function(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}(e):e}({mm:"munutenn",MM:"miz",dd:"devezh"}[r],e)}function cn(e,t,r){var n=e+" ";switch(r){case"ss":return n+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return n+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return n+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return n+=1===e?"dan":"dana";case"MM":return n+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return n+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}n.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[\u0f21\u0f22\u0f23\u0f24\u0f25\u0f26\u0f27\u0f28\u0f29\u0f20]/g,function(e){return on[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return an[e]})},meridiemParse:/\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c|\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66|\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44|\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42|\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c/,meridiemHour:function(e,t){return 12===e&&(e=0),"མཚན་མོ"===t&&4<=e||"ཉིན་གུང"===t&&e<5||"དགོང་དག"===t?e+12:e},meridiem:function(e,t,r){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}}),n.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:un,h:"un eur",hh:"%d eur",d:"un devezh",dd:un,M:"ur miz",MM:un,y:"ur bloaz",yy:function(e){switch(function e(t){return 9<t?e(t%10):t}(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a\xf1|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4}}),n.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:cn,m:cn,mm:cn,h:cn,hh:cn,d:"dan",dd:cn,M:"mjesec",MM:cn,y:"godinu",yy:cn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),n.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|\xe8|a)/,ordinal:function(e,t){var r=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(r="a"),e+r},week:{dow:1,doy:4}});var ln="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),dn="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");function hn(e){return 1<e&&e<5&&1!=~~(e/10)}function fn(e,t,r,n){var i=e+" ";switch(r){case"s":return t||n?"pár sekund":"pár sekundami";case"ss":return t||n?i+(hn(e)?"sekundy":"sekund"):i+"sekundami";case"m":return t?"minuta":n?"minutu":"minutou";case"mm":return t||n?i+(hn(e)?"minuty":"minut"):i+"minutami";case"h":return t?"hodina":n?"hodinu":"hodinou";case"hh":return t||n?i+(hn(e)?"hodiny":"hodin"):i+"hodinami";case"d":return t||n?"den":"dnem";case"dd":return t||n?i+(hn(e)?"dny":"dní"):i+"dny";case"M":return t||n?"měsíc":"měsícem";case"MM":return t||n?i+(hn(e)?"měsíce":"měsíců"):i+"měsíci";case"y":return t||n?"rok":"rokem";case"yy":return t||n?i+(hn(e)?"roky":"let"):i+"lety"}}function pn(e,t,r,n){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[r][0]:i[r][1]}function mn(e,t,r,n){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[r][0]:i[r][1]}function _n(e,t,r,n){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[r][0]:i[r][1]}n.defineLocale("cs",{months:ln,monthsShort:dn,monthsParse:function(e,t){var r,n=[];for(r=0;r<12;r++)n[r]=new RegExp("^"+e[r]+"$|^"+t[r]+"$","i");return n}(ln,dn),shortMonthsParse:function(e){var t,r=[];for(t=0;t<12;t++)r[t]=new RegExp("^"+e[t]+"$","i");return r}(dn),longMonthsParse:function(e){var t,r=[];for(t=0;t<12;t++)r[t]=new RegExp("^"+e[t]+"$","i");return r}(ln),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:fn,ss:fn,m:fn,mm:fn,h:fn,hh:fn,d:fn,dd:fn,M:fn,MM:fn,y:fn,yy:fn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/\u0441\u0435\u0445\u0435\u0442$/i.exec(e)?"рен":/\u04ab\u0443\u043b$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-\u043c\u04d7\u0448/,ordinal:"%d-мӗш",week:{dow:1,doy:7}}),n.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return 20<e?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":0<e&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}}),n.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:pn,mm:"%d Minuten",h:pn,hh:"%d Stunden",d:pn,dd:pn,M:pn,MM:pn,y:pn,yy:pn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:mn,mm:"%d Minuten",h:mn,hh:"%d Stunden",d:mn,dd:mn,M:mn,MM:mn,y:mn,yy:mn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:_n,mm:"%d Minuten",h:_n,hh:"%d Stunden",d:_n,dd:_n,M:_n,MM:_n,y:_n,yy:_n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var gn=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],yn=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];n.defineLocale("dv",{months:gn,monthsShort:gn,weekdays:yn,weekdaysShort:yn,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0789\u0786|\u0789\u078a/,isPM:function(e){return"މފ"===e},meridiem:function(e,t,r){return e<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:7,doy:12}}),n.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,r){return 11<e?r?"μμ":"ΜΜ":r?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[\u03a0\u039c]\.?\u039c?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var r=this._calendarEl[e],n=t&&t.hours();return E(r)&&(r=r.apply(t)),r.replace("{}",n%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}\u03b7/,ordinal:"%dη",week:{dow:1,doy:4}}),n.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),n.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),n.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),n.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),n.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,r){return 11<e?r?"p.t.m.":"P.T.M.":r?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"sekundoj",ss:"%d sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});var vn="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),bn="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),$n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],wn=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;n.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?bn[e.month()]:vn[e.month()]:vn},monthsRegex:wn,monthsShortRegex:wn,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:$n,longMonthsParse:$n,shortMonthsParse:$n,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº",week:{dow:1,doy:4}});var kn="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),Mn="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");n.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?Mn[e.month()]:kn[e.month()]:kn},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"MMMM [de] D [de] YYYY",LLL:"MMMM [de] D [de] YYYY h:mm A",LLLL:"dddd, MMMM [de] D [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº",week:{dow:0,doy:6}});var Sn="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),On="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),xn=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],Tn=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;function En(e,t,r,n){var i={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?i[r][2]?i[r][2]:i[r][1]:n?i[r][0]:i[r][1]}n.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?On[e.month()]:Sn[e.month()]:Sn},monthsRegex:Tn,monthsShortRegex:Tn,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:xn,longMonthsParse:xn,shortMonthsParse:xn,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº",week:{dow:1,doy:4}}),n.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:En,ss:En,m:En,mm:En,h:En,hh:En,d:En,dd:"%d päeva",M:En,MM:En,y:En,yy:En},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Dn={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},Ln={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};n.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631|\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/,isPM:function(e){return/\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/.test(e)},meridiem:function(e,t,r){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"ثانیه d%",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[\u06f0-\u06f9]/g,function(e){return Ln[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Dn[e]}).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}\u0645/,ordinal:"%dم",week:{dow:6,doy:12}});var Pn="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),An=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",Pn[7],Pn[8],Pn[9]];function jn(e,t,r,n){var i,s="";switch(r){case"s":return n?"muutaman sekunnin":"muutama sekunti";case"ss":return n?"sekunnin":"sekuntia";case"m":return n?"minuutin":"minuutti";case"mm":s=n?"minuutin":"minuuttia";break;case"h":return n?"tunnin":"tunti";case"hh":s=n?"tunnin":"tuntia";break;case"d":return n?"päivän":"päivä";case"dd":s=n?"päivän":"päivää";break;case"M":return n?"kuukauden":"kuukausi";case"MM":s=n?"kuukauden":"kuukautta";break;case"y":return n?"vuoden":"vuosi";case"yy":s=n?"vuoden":"vuotta"}return s=((i=e)<10?n?An[i]:Pn[i]:i)+" "+s}n.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:jn,ss:jn,m:jn,mm:jn,h:jn,hh:jn,d:jn,dd:jn,M:jn,MM:jn,y:jn,yy:jn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}}),n.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}}),n.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}});var Rn="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),In="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");function Cn(e,t,r,n){var i={s:["thodde secondanim","thodde second"],ss:[e+" secondanim",e+" second"],m:["eka mintan","ek minute"],mm:[e+" mintanim",e+" mintam"],h:["eka horan","ek hor"],hh:[e+" horanim",e+" horam"],d:["eka disan","ek dis"],dd:[e+" disanim",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineanim",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsanim",e+" vorsam"]};return t?i[r][0]:i[r][1]}n.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?In[e.month()]:Rn[e.month()]:Rn},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}}),n.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],monthsShort:["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],monthsParseExact:!0,weekdays:["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["Dò","Lu","Mà","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}}),n.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº",week:{dow:1,doy:4}}),n.defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:Cn,ss:Cn,m:Cn,mm:Cn,h:Cn,hh:Cn,d:Cn,dd:Cn,M:Cn,MM:Cn,y:Cn,yy:Cn},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){switch(t){case"D":return e+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokalli"===t?e:"donparam"===t?12<e?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,r){return e<4?"rati":e<12?"sokalli":e<16?"donparam":e<20?"sanje":"rati"}});var Yn={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},Fn={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};n.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પેહલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(e){return e.replace(/[\u0ae7\u0ae8\u0ae9\u0aea\u0aeb\u0aec\u0aed\u0aee\u0aef\u0ae6]/g,function(e){return Fn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Yn[e]})},meridiemParse:/\u0ab0\u0abe\u0aa4|\u0aac\u0aaa\u0acb\u0ab0|\u0ab8\u0ab5\u0abe\u0ab0|\u0ab8\u0abe\u0a82\u0a9c/,meridiemHour:function(e,t){return 12===e&&(e=0),"રાત"===t?e<4?e:e+12:"સવાર"===t?e:"બપોર"===t?10<=e?e:e+12:"સાંજ"===t?e+12:void 0},meridiem:function(e,t,r){return e<4?"રાત":e<10?"સવાર":e<17?"બપોર":e<20?"સાંજ":"રાત"},week:{dow:0,doy:6}}),n.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}},meridiemParse:/\u05d0\u05d7\u05d4"\u05e6|\u05dc\u05e4\u05e0\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8|\u05d1\u05d1\u05d5\u05e7\u05e8|\u05d1\u05e2\u05e8\u05d1/i,isPM:function(e){return/^(\u05d0\u05d7\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05d1\u05e2\u05e8\u05d1)$/.test(e)},meridiem:function(e,t,r){return e<5?"לפנות בוקר":e<10?"בבוקר":e<12?r?'לפנה"צ':"לפני הצהריים":e<18?r?'אחה"צ':"אחרי הצהריים":"בערב"}});var Nn={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},Un={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function qn(e,t,r){var n=e+" ";switch(r){case"ss":return n+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return n+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return n+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return n+=1===e?"dan":"dana";case"MM":return n+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return n+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}n.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return Un[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Nn[e]})},meridiemParse:/\u0930\u093e\u0924|\u0938\u0941\u092c\u0939|\u0926\u094b\u092a\u0939\u0930|\u0936\u093e\u092e/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?10<=e?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,r){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}}),n.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:qn,m:qn,mm:qn,h:qn,hh:qn,d:"dan",dd:qn,M:"mjesec",MM:qn,y:"godinu",yy:qn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Hn="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function zn(e,t,r,n){var i=e;switch(r){case"s":return n||t?"néhány másodperc":"néhány másodperce";case"ss":return i+(n||t)?" másodperc":" másodperce";case"m":return"egy"+(n||t?" perc":" perce");case"mm":return i+(n||t?" perc":" perce");case"h":return"egy"+(n||t?" óra":" órája");case"hh":return i+(n||t?" óra":" órája");case"d":return"egy"+(n||t?" nap":" napja");case"dd":return i+(n||t?" nap":" napja");case"M":return"egy"+(n||t?" hónap":" hónapja");case"MM":return i+(n||t?" hónap":" hónapja");case"y":return"egy"+(n||t?" év":" éve");case"yy":return i+(n||t?" év":" éve")}return""}function Bn(e){return(e?"":"[múlt] ")+"["+Hn[this.day()]+"] LT[-kor]"}function Wn(e){return e%100==11||e%10!=1}function Vn(e,t,r,n){var i=e+" ";switch(r){case"s":return t||n?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return Wn(e)?i+(t||n?"sekúndur":"sekúndum"):i+"sekúnda";case"m":return t?"mínúta":"mínútu";case"mm":return Wn(e)?i+(t||n?"mínútur":"mínútum"):t?i+"mínúta":i+"mínútu";case"hh":return Wn(e)?i+(t||n?"klukkustundir":"klukkustundum"):i+"klukkustund";case"d":return t?"dagur":n?"dag":"degi";case"dd":return Wn(e)?t?i+"dagar":i+(n?"daga":"dögum"):t?i+"dagur":i+(n?"dag":"degi");case"M":return t?"mánuður":n?"mánuð":"mánuði";case"MM":return Wn(e)?t?i+"mánuðir":i+(n?"mánuði":"mánuðum"):t?i+"mánuður":i+(n?"mánuð":"mánuði");case"y":return t||n?"ár":"ári";case"yy":return Wn(e)?i+(t||n?"ár":"árum"):i+(t||n?"ár":"ári")}}n.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,r){return e<12?!0===r?"de":"DE":!0===r?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return Bn.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return Bn.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:zn,ss:zn,m:zn,mm:zn,h:zn,hh:zn,d:zn,dd:zn,M:zn,MM:zn,y:zn,yy:zn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/\u0563\u056b\u0577\u0565\u0580\u057e\u0561|\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561|\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576/,isPM:function(e){return/^(\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(\u056b\u0576|\u0580\u0564)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}}),n.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?11<=e?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,r){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),n.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:Vn,ss:Vn,m:Vn,mm:Vn,h:"klukkustund",hh:Vn,d:Vn,dd:Vn,M:Vn,MM:Vn,y:Vn,yy:Vn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº",week:{dow:1,doy:4}}),n.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,r){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(e){return e.week()<this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(e){return this.week()<e.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}\u65e5/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}}),n.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?11<=e?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,r){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),n.defineLocale("ka",{months:{standalone:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),format:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(\u10ec\u10d8\u10dc\u10d0|\u10e8\u10d4\u10db\u10d3\u10d4\u10d2)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10ec\u10d4\u10da\u10d8)/.test(e)?e.replace(/\u10d8$/,"ში"):e+"ში"},past:function(e){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10d3\u10e6\u10d4|\u10d7\u10d5\u10d4)/.test(e)?e.replace(/(\u10d8|\u10d4)$/,"ის წინ"):/\u10ec\u10d4\u10da\u10d8/.test(e)?e.replace(/\u10ec\u10d4\u10da\u10d8$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-\u10da\u10d8|\u10db\u10d4-\d{1,2}|\d{1,2}-\u10d4/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}});var Gn={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};n.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0448\u0456|\u0448\u044b)/,ordinal:function(e){return e+(Gn[e]||Gn[e%10]||Gn[100<=e?100:null])},week:{dow:1,doy:7}});var Kn={1:"១",2:"២",3:"៣",4:"៤",5:"៥",6:"៦",7:"៧",8:"៨",9:"៩",0:"០"},Jn={"១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9","០":"0"};n.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysMin:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u1796\u17d2\u179a\u17b9\u1780|\u179b\u17d2\u1784\u17b6\u1785/,isPM:function(e){return"ល្ងាច"===e},meridiem:function(e,t,r){return e<12?"ព្រឹក":"ល្ងាច"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},dayOfMonthOrdinalParse:/\u1791\u17b8\d{1,2}/,ordinal:"ទី%d",preparse:function(e){return e.replace(/[\u17e1\u17e2\u17e3\u17e4\u17e5\u17e6\u17e7\u17e8\u17e9\u17e0]/g,function(e){return Jn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Kn[e]})},week:{dow:1,doy:4}});var Qn={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},Zn={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};n.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(e){return e.replace(/[\u0ce7\u0ce8\u0ce9\u0cea\u0ceb\u0cec\u0ced\u0cee\u0cef\u0ce6]/g,function(e){return Zn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Qn[e]})},meridiemParse:/\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf|\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6|\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8|\u0cb8\u0c82\u0c9c\u0cc6/,meridiemHour:function(e,t){return 12===e&&(e=0),"ರಾತ್ರಿ"===t?e<4?e:e+12:"ಬೆಳಿಗ್ಗೆ"===t?e:"ಮಧ್ಯಾಹ್ನ"===t?10<=e?e:e+12:"ಸಂಜೆ"===t?e+12:void 0},meridiem:function(e,t,r){return e<4?"ರಾತ್ರಿ":e<10?"ಬೆಳಿಗ್ಗೆ":e<17?"ಮಧ್ಯಾಹ್ನ":e<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(\u0ca8\u0cc6\u0cd5)/,ordinal:function(e){return e+"ನೇ"},week:{dow:0,doy:6}}),n.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(\uc77c|\uc6d4|\uc8fc)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"일";case"M":return e+"월";case"w":case"W":return e+"주";default:return e}},meridiemParse:/\uc624\uc804|\uc624\ud6c4/,isPM:function(e){return"오후"===e},meridiem:function(e,t,r){return e<12?"오전":"오후"}});var Xn={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};function ei(e,t,r,n){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[r][0]:i[r][1]}function ti(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return ti(0===t?e/10:t)}if(e<1e4){for(;10<=e;)e/=10;return ti(e)}return ti(e/=1e3)}n.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кече саат] LT",lastWeek:"[Өткен аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0447\u0438|\u0447\u044b|\u0447\u04af|\u0447\u0443)/,ordinal:function(e){return e+(Xn[e]||Xn[e%10]||Xn[100<=e?100:null])},week:{dow:1,doy:7}}),n.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return ti(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return ti(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:ei,mm:"%d Minutten",h:ei,hh:"%d Stonnen",d:ei,dd:"%d Deeg",M:ei,MM:"%d Méint",y:ei,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2|\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87/,isPM:function(e){return"ຕອນແລງ"===e},meridiem:function(e,t,r){return e<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(\u0e97\u0eb5\u0ec8)\d{1,2}/,ordinal:function(e){return"ທີ່"+e}});var ri={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function ni(e,t,r,n){return t?si(r)[0]:n?si(r)[1]:si(r)[2]}function ii(e){return e%10==0||10<e&&e<20}function si(e){return ri[e].split("_")}function ai(e,t,r,n){var i=e+" ";return 1===e?i+ni(0,t,r[0],n):t?i+(ii(e)?si(r)[1]:si(r)[0]):n?i+si(r)[1]:i+(ii(e)?si(r)[1]:si(r)[2])}n.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:function(e,t,r,n){return t?"kelios sekundės":n?"kelių sekundžių":"kelias sekundes"},ss:ai,m:ni,mm:ai,h:ni,hh:ai,d:ni,dd:ai,M:ni,MM:ai,y:ni,yy:ai},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}});var oi={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function ui(e,t,r){return r?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function ci(e,t,r){return e+" "+ui(oi[r],e,t)}function li(e,t,r){return ui(oi[r],e,t)}n.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:function(e,t){return t?"dažas sekundes":"dažām sekundēm"},ss:ci,m:li,mm:ci,h:li,hh:ci,d:li,dd:ci,M:li,MM:ci,y:li,yy:ci},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var di={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:2<=e&&e<=4?t[1]:t[2]},translate:function(e,t,r){var n=di.words[r];return 1===r.length?t?n[0]:n[1]:e+" "+di.correctGrammaticalCase(e,n)}};function hi(e,t,r,n){switch(r){case"s":return t?"хэдхэн секунд":"хэдхэн секундын";case"ss":return e+(t?" секунд":" секундын");case"m":case"mm":return e+(t?" минут":" минутын");case"h":case"hh":return e+(t?" цаг":" цагийн");case"d":case"dd":return e+(t?" өдөр":" өдрийн");case"M":case"MM":return e+(t?" сар":" сарын");case"y":case"yy":return e+(t?" жил":" жилийн");default:return e}}n.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:di.translate,m:di.translate,mm:di.translate,h:di.translate,hh:di.translate,d:"dan",dd:di.translate,M:"mjesec",MM:di.translate,y:"godinu",yy:di.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),n.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº",week:{dow:1,doy:4}}),n.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(e){var t=e%10,r=e%100;return 0===e?e+"-ев":0===r?e+"-ен":10<r&&r<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}}),n.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f|\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46|\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d|\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02|\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f/i,meridiemHour:function(e,t){return 12===e&&(e=0),"രാത്രി"===t&&4<=e||"ഉച്ച കഴിഞ്ഞ്"===t||"വൈകുന്നേരം"===t?e+12:e},meridiem:function(e,t,r){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}}),n.defineLocale("mn",{months:"Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар".split("_"),monthsShort:"1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар".split("_"),monthsParseExact:!0,weekdays:"Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба".split("_"),weekdaysShort:"Ням_Дав_Мяг_Лха_Пүр_Баа_Бям".split("_"),weekdaysMin:"Ня_Да_Мя_Лх_Пү_Ба_Бя".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY оны MMMMын D",LLL:"YYYY оны MMMMын D HH:mm",LLLL:"dddd, YYYY оны MMMMын D HH:mm"},meridiemParse:/\u04ae\u04e8|\u04ae\u0425/i,isPM:function(e){return"ҮХ"===e},meridiem:function(e,t,r){return e<12?"ҮӨ":"ҮХ"},calendar:{sameDay:"[Өнөөдөр] LT",nextDay:"[Маргааш] LT",nextWeek:"[Ирэх] dddd LT",lastDay:"[Өчигдөр] LT",lastWeek:"[Өнгөрсөн] dddd LT",sameElse:"L"},relativeTime:{future:"%s дараа",past:"%s өмнө",s:hi,ss:hi,m:hi,mm:hi,h:hi,hh:hi,d:hi,dd:hi,M:hi,MM:hi,y:hi,yy:hi},dayOfMonthOrdinalParse:/\d{1,2} \u04e9\u0434\u04e9\u0440/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" өдөр";default:return e}}});var fi={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},pi={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function mi(e,t,r,n){var i="";if(t)switch(r){case"s":i="काही सेकंद";break;case"ss":i="%d सेकंद";break;case"m":i="एक मिनिट";break;case"mm":i="%d मिनिटे";break;case"h":i="एक तास";break;case"hh":i="%d तास";break;case"d":i="एक दिवस";break;case"dd":i="%d दिवस";break;case"M":i="एक महिना";break;case"MM":i="%d महिने";break;case"y":i="एक वर्ष";break;case"yy":i="%d वर्षे"}else switch(r){case"s":i="काही सेकंदां";break;case"ss":i="%d सेकंदां";break;case"m":i="एका मिनिटा";break;case"mm":i="%d मिनिटां";break;case"h":i="एका तासा";break;case"hh":i="%d तासां";break;case"d":i="एका दिवसा";break;case"dd":i="%d दिवसां";break;case"M":i="एका महिन्या";break;case"MM":i="%d महिन्यां";break;case"y":i="एका वर्षा";break;case"yy":i="%d वर्षां"}return i.replace(/%d/i,e)}n.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:mi,ss:mi,m:mi,mm:mi,h:mi,hh:mi,d:mi,dd:mi,M:mi,MM:mi,y:mi,yy:mi},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return pi[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return fi[e]})},meridiemParse:/\u0930\u093e\u0924\u094d\u0930\u0940|\u0938\u0915\u093e\u0933\u0940|\u0926\u0941\u092a\u093e\u0930\u0940|\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात्री"===t?e<4?e:e+12:"सकाळी"===t?e:"दुपारी"===t?10<=e?e:e+12:"सायंकाळी"===t?e+12:void 0},meridiem:function(e,t,r){return e<4?"रात्री":e<10?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}}),n.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?11<=e?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,r){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),n.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?11<=e?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,r){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),n.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº",week:{dow:1,doy:4}});var _i={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},gi={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};n.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[\u1041\u1042\u1043\u1044\u1045\u1046\u1047\u1048\u1049\u1040]/g,function(e){return gi[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return _i[e]})},week:{dow:1,doy:4}}),n.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var yi={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},vi={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};n.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return vi[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return yi[e]})},meridiemParse:/\u0930\u093e\u0924\u093f|\u092c\u093f\u0939\u093e\u0928|\u0926\u093f\u0909\u0901\u0938\u094b|\u0938\u093e\u0901\u091d/,meridiemHour:function(e,t){return 12===e&&(e=0),"राति"===t?e<4?e:e+12:"बिहान"===t?e:"दिउँसो"===t?10<=e?e:e+12:"साँझ"===t?e+12:void 0},meridiem:function(e,t,r){return e<3?"राति":e<12?"बिहान":e<16?"दिउँसो":e<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}});var bi="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),$i="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),wi=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],ki=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;n.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?$i[e.month()]:bi[e.month()]:bi},monthsRegex:ki,monthsShortRegex:ki,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:wi,longMonthsParse:wi,shortMonthsParse:wi,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}});var Mi="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),Si="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),Oi=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],xi=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;n.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?Si[e.month()]:Mi[e.month()]:Mi},monthsRegex:xi,monthsShortRegex:xi,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:Oi,longMonthsParse:Oi,shortMonthsParse:Oi,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}}),n.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Ti={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},Ei={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};n.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"[ਅਗਲਾ] dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(e){return e.replace(/[\u0a67\u0a68\u0a69\u0a6a\u0a6b\u0a6c\u0a6d\u0a6e\u0a6f\u0a66]/g,function(e){return Ei[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Ti[e]})},meridiemParse:/\u0a30\u0a3e\u0a24|\u0a38\u0a35\u0a47\u0a30|\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30|\u0a38\u0a3c\u0a3e\u0a2e/,meridiemHour:function(e,t){return 12===e&&(e=0),"ਰਾਤ"===t?e<4?e:e+12:"ਸਵੇਰ"===t?e:"ਦੁਪਹਿਰ"===t?10<=e?e:e+12:"ਸ਼ਾਮ"===t?e+12:void 0},meridiem:function(e,t,r){return e<4?"ਰਾਤ":e<10?"ਸਵੇਰ":e<17?"ਦੁਪਹਿਰ":e<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}});var Di="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),Li="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");function Pi(e){return e%10<5&&1<e%10&&~~(e/10)%10!=1}function Ai(e,t,r){var n=e+" ";switch(r){case"ss":return n+(Pi(e)?"sekundy":"sekund");case"m":return t?"minuta":"minutę";case"mm":return n+(Pi(e)?"minuty":"minut");case"h":return t?"godzina":"godzinę";case"hh":return n+(Pi(e)?"godziny":"godzin");case"MM":return n+(Pi(e)?"miesiące":"miesięcy");case"yy":return n+(Pi(e)?"lata":"lat")}}function ji(e,t,r){var n=" ";return(20<=e%100||100<=e&&e%100==0)&&(n=" de "),e+n+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[r]}function Ri(e,t,r){var n,i;return"m"===r?t?"минута":"минуту":e+" "+(n=+e,i={ss:t?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[r].split("_"),n%10==1&&n%100!=11?i[0]:2<=n%10&&n%10<=4&&(n%100<10||20<=n%100)?i[1]:i[2])}n.defineLocale("pl",{months:function(e,t){return e?""===t?"("+Li[e.month()]+"|"+Di[e.month()]+")":/D MMMM/.test(t)?Li[e.month()]:Di[e.month()]:Di},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:Ai,m:Ai,mm:Ai,h:Ai,hh:Ai,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:Ai,y:"rok",yy:Ai},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº"}),n.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%dº",week:{dow:1,doy:4}}),n.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:ji,m:"un minut",mm:ji,h:"o oră",hh:ji,d:"o zi",dd:ji,M:"o lună",MM:ji,y:"un an",yy:ji},week:{dow:1,doy:7}});var Ii=[/^\u044f\u043d\u0432/i,/^\u0444\u0435\u0432/i,/^\u043c\u0430\u0440/i,/^\u0430\u043f\u0440/i,/^\u043c\u0430[\u0439\u044f]/i,/^\u0438\u044e\u043d/i,/^\u0438\u044e\u043b/i,/^\u0430\u0432\u0433/i,/^\u0441\u0435\u043d/i,/^\u043e\u043a\u0442/i,/^\u043d\u043e\u044f/i,/^\u0434\u0435\u043a/i];n.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e|\u044d\u0442\u0443)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:Ii,longMonthsParse:Ii,shortMonthsParse:Ii,monthsRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsShortRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsStrictRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044f\u044c]|\u0444\u0435\u0432\u0440\u0430\u043b[\u044f\u044c]|\u043c\u0430\u0440\u0442\u0430?|\u0430\u043f\u0440\u0435\u043b[\u044f\u044c]|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044f\u044c]|\u0438\u044e\u043b[\u044f\u044c]|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043d\u043e\u044f\u0431\u0440[\u044f\u044c]|\u0434\u0435\u043a\u0430\u0431\u0440[\u044f\u044c])/i,monthsShortStrictRegex:/^(\u044f\u043d\u0432\.|\u0444\u0435\u0432\u0440?\.|\u043c\u0430\u0440[\u0442.]|\u0430\u043f\u0440\.|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044c\u044f.]|\u0438\u044e\u043b[\u044c\u044f.]|\u0430\u0432\u0433\.|\u0441\u0435\u043d\u0442?\.|\u043e\u043a\u0442\.|\u043d\u043e\u044f\u0431?\.|\u0434\u0435\u043a\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:Ri,m:Ri,mm:Ri,h:"час",hh:Ri,d:"день",dd:Ri,M:"месяц",MM:Ri,y:"год",yy:Ri},meridiemParse:/\u043d\u043e\u0447\u0438|\u0443\u0442\u0440\u0430|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430/i,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430)$/.test(e)},meridiem:function(e,t,r){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e|\u044f)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:4}});var Ci=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],Yi=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];n.defineLocale("sd",{months:Ci,monthsShort:Ci,weekdays:Yi,weekdaysShort:Yi,weekdaysMin:Yi,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(e){return"شام"===e},meridiem:function(e,t,r){return e<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}}),n.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} \u0dc0\u0dd0\u0db1\u0dd2/,ordinal:function(e){return e+" වැනි"},meridiemParse:/\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4|\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4|\u0db4\u0dd9.\u0dc0|\u0db4.\u0dc0./,isPM:function(e){return"ප.ව."===e||"පස් වරු"===e},meridiem:function(e,t,r){return 11<e?r?"ප.ව.":"පස් වරු":r?"පෙ.ව.":"පෙර වරු"}});var Fi="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),Ni="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function Ui(e){return 1<e&&e<5}function qi(e,t,r,n){var i=e+" ";switch(r){case"s":return t||n?"pár sekúnd":"pár sekundami";case"ss":return t||n?i+(Ui(e)?"sekundy":"sekúnd"):i+"sekundami";case"m":return t?"minúta":n?"minútu":"minútou";case"mm":return t||n?i+(Ui(e)?"minúty":"minút"):i+"minútami";case"h":return t?"hodina":n?"hodinu":"hodinou";case"hh":return t||n?i+(Ui(e)?"hodiny":"hodín"):i+"hodinami";case"d":return t||n?"deň":"dňom";case"dd":return t||n?i+(Ui(e)?"dni":"dní"):i+"dňami";case"M":return t||n?"mesiac":"mesiacom";case"MM":return t||n?i+(Ui(e)?"mesiace":"mesiacov"):i+"mesiacmi";case"y":return t||n?"rok":"rokom";case"yy":return t||n?i+(Ui(e)?"roky":"rokov"):i+"rokmi"}}function Hi(e,t,r,n){var i=e+" ";switch(r){case"s":return t||n?"nekaj sekund":"nekaj sekundami";case"ss":return i+=1===e?t?"sekundo":"sekundi":2===e?t||n?"sekundi":"sekundah":e<5?t||n?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return i+=1===e?t?"minuta":"minuto":2===e?t||n?"minuti":"minutama":e<5?t||n?"minute":"minutami":t||n?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return i+=1===e?t?"ura":"uro":2===e?t||n?"uri":"urama":e<5?t||n?"ure":"urami":t||n?"ur":"urami";case"d":return t||n?"en dan":"enim dnem";case"dd":return i+=1===e?t||n?"dan":"dnem":2===e?t||n?"dni":"dnevoma":t||n?"dni":"dnevi";case"M":return t||n?"en mesec":"enim mesecem";case"MM":return i+=1===e?t||n?"mesec":"mesecem":2===e?t||n?"meseca":"mesecema":e<5?t||n?"mesece":"meseci":t||n?"mesecev":"meseci";case"y":return t||n?"eno leto":"enim letom";case"yy":return i+=1===e?t||n?"leto":"letom":2===e?t||n?"leti":"letoma":e<5?t||n?"leta":"leti":t||n?"let":"leti"}}n.defineLocale("sk",{months:Fi,monthsShort:Ni,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:qi,ss:qi,m:qi,mm:qi,h:qi,hh:qi,d:qi,dd:qi,M:qi,MM:qi,y:qi,yy:qi},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:Hi,ss:Hi,m:Hi,mm:Hi,h:Hi,hh:Hi,d:Hi,dd:Hi,M:Hi,MM:Hi,y:Hi,yy:Hi},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),n.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,r){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var zi={words:{ss:["секунда","секунде","секунди"],m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:2<=e&&e<=4?t[1]:t[2]},translate:function(e,t,r){var n=zi.words[r];return 1===r.length?t?n[0]:n[1]:e+" "+zi.correctGrammaticalCase(e,n)}};n.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:zi.translate,m:zi.translate,mm:zi.translate,h:zi.translate,hh:zi.translate,d:"дан",dd:zi.translate,M:"месец",MM:zi.translate,y:"годину",yy:zi.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Bi={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:2<=e&&e<=4?t[1]:t[2]},translate:function(e,t,r){var n=Bi.words[r];return 1===r.length?t?n[0]:n[1]:e+" "+Bi.correctGrammaticalCase(e,n)}};n.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:Bi.translate,m:Bi.translate,mm:Bi.translate,h:Bi.translate,hh:Bi.translate,d:"dan",dd:Bi.translate,M:"mesec",MM:Bi.translate,y:"godinu",yy:Bi.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),n.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,r){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?11<=e?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),n.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}}),n.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}});var Wi={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},Vi={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};n.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}\u0bb5\u0ba4\u0bc1/,ordinal:function(e){return e+"வது"},preparse:function(e){return e.replace(/[\u0be7\u0be8\u0be9\u0bea\u0beb\u0bec\u0bed\u0bee\u0bef\u0be6]/g,function(e){return Vi[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Wi[e]})},meridiemParse:/\u0baf\u0bbe\u0bae\u0bae\u0bcd|\u0bb5\u0bc8\u0b95\u0bb1\u0bc8|\u0b95\u0bbe\u0bb2\u0bc8|\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd|\u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1|\u0bae\u0bbe\u0bb2\u0bc8/,meridiem:function(e,t,r){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t?e:"நண்பகல்"===t&&10<=e?e:e+12},week:{dow:0,doy:6}}),n.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జూలై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జూలై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}\u0c35/,ordinal:"%dవ",meridiemParse:/\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f|\u0c09\u0c26\u0c2f\u0c02|\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02|\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02/,meridiemHour:function(e,t){return 12===e&&(e=0),"రాత్రి"===t?e<4?e:e+12:"ఉదయం"===t?e:"మధ్యాహ్నం"===t?10<=e?e:e+12:"సాయంత్రం"===t?e+12:void 0},meridiem:function(e,t,r){return e<4?"రాత్రి":e<10?"ఉదయం":e<17?"మధ్యాహ్నం":e<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}}),n.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",ss:"minutu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}});var Gi={0:"-ум",1:"-ум",2:"-юм",3:"-юм",4:"-ум",5:"-ум",6:"-ум",7:"-ум",8:"-ум",9:"-ум",10:"-ум",12:"-ум",13:"-ум",20:"-ум",30:"-юм",40:"-ум",50:"-ум",60:"-ум",70:"-ум",80:"-ум",90:"-ум",100:"-ум"};n.defineLocale("tg",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе".split("_"),weekdaysShort:"яшб_дшб_сшб_чшб_пшб_ҷум_шнб".split("_"),weekdaysMin:"яш_дш_сш_чш_пш_ҷм_шб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Имрӯз соати] LT",nextDay:"[Пагоҳ соати] LT",lastDay:"[Дирӯз соати] LT",nextWeek:"dddd[и] [ҳафтаи оянда соати] LT",lastWeek:"dddd[и] [ҳафтаи гузашта соати] LT",sameElse:"L"},relativeTime:{future:"баъди %s",past:"%s пеш",s:"якчанд сония",m:"як дақиқа",mm:"%d дақиқа",h:"як соат",hh:"%d соат",d:"як рӯз",dd:"%d рӯз",M:"як моҳ",MM:"%d моҳ",y:"як сол",yy:"%d сол"},meridiemParse:/\u0448\u0430\u0431|\u0441\u0443\u0431\u04b3|\u0440\u04ef\u0437|\u0431\u0435\u0433\u043e\u04b3/,meridiemHour:function(e,t){return 12===e&&(e=0),"шаб"===t?e<4?e:e+12:"субҳ"===t?e:"рӯз"===t?11<=e?e:e+12:"бегоҳ"===t?e+12:void 0},meridiem:function(e,t,r){return e<4?"шаб":e<11?"субҳ":e<16?"рӯз":e<19?"бегоҳ":"шаб"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0443\u043c|\u044e\u043c)/,ordinal:function(e){return e+(Gi[e]||Gi[e%10]||Gi[100<=e?100:null])},week:{dow:1,doy:7}}),n.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,r){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}}),n.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});var Ki="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function Ji(e,t,r,n){var i=function(e){var t=Math.floor(e%1e3/100),r=Math.floor(e%100/10),n=e%10,i="";return 0<t&&(i+=Ki[t]+"vatlh"),0<r&&(i+=(""!==i?" ":"")+Ki[r]+"maH"),0<n&&(i+=(""!==i?" ":"")+Ki[n]),""===i?"pagh":i}(e);switch(r){case"ss":return i+" lup";case"mm":return i+" tup";case"hh":return i+" rep";case"dd":return i+" jaj";case"MM":return i+" jar";case"yy":return i+" DIS"}}n.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu’":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",ss:Ji,m:"wa’ tup",mm:Ji,h:"wa’ rep",hh:Ji,d:"wa’ jaj",dd:Ji,M:"wa’ jar",MM:Ji,y:"wa’ DIS",yy:Ji},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Qi={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};function Zi(e,t,r,n){var i={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n míut","'iens míut"],mm:[e+" míuts",e+" míuts"],h:["'n þora","'iensa þora"],hh:[e+" þoras",e+" þoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return n?i[r][0]:t?i[r][0]:i[r][1]}function Xi(e,t,r){var n,i;return"m"===r?t?"хвилина":"хвилину":"h"===r?t?"година":"годину":e+" "+(n=+e,i={ss:t?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:t?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:t?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[r].split("_"),n%10==1&&n%100!=11?i[0]:2<=n%10&&n%10<=4&&(n%100<10||20<=n%100)?i[1]:i[2])}function es(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}n.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(e,t){switch(t){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'ıncı";var r=e%10;return e+(Qi[r]||Qi[e%100-r]||Qi[100<=e?100:null])}},week:{dow:1,doy:7}}),n.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,r){return 11<e?r?"d'o":"D'O":r?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:Zi,ss:Zi,m:Zi,mm:Zi,h:Zi,hh:Zi,d:Zi,dd:Zi,M:Zi,MM:Zi,y:Zi,yy:Zi},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),n.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),n.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}}),n.defineLocale("ug-cn",{months:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),monthsShort:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),weekdays:"يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە".split("_"),weekdaysShort:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),weekdaysMin:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-يىلىM-ئاينىڭD-كۈنى",LLL:"YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm",LLLL:"dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm"},meridiemParse:/\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5|\u0633\u06d5\u06be\u06d5\u0631|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646|\u0686\u06c8\u0634|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646|\u0643\u06d5\u0686/,meridiemHour:function(e,t){return 12===e&&(e=0),"يېرىم كېچە"===t||"سەھەر"===t||"چۈشتىن بۇرۇن"===t?e:"چۈشتىن كېيىن"===t||"كەچ"===t?e+12:11<=e?e:e+12},meridiem:function(e,t,r){var n=100*e+t;return n<600?"يېرىم كېچە":n<900?"سەھەر":n<1130?"چۈشتىن بۇرۇن":n<1230?"چۈش":n<1800?"چۈشتىن كېيىن":"كەچ"},calendar:{sameDay:"[بۈگۈن سائەت] LT",nextDay:"[ئەتە سائەت] LT",nextWeek:"[كېلەركى] dddd [سائەت] LT",lastDay:"[تۆنۈگۈن] LT",lastWeek:"[ئالدىنقى] dddd [سائەت] LT",sameElse:"L"},relativeTime:{future:"%s كېيىن",past:"%s بۇرۇن",s:"نەچچە سېكونت",ss:"%d سېكونت",m:"بىر مىنۇت",mm:"%d مىنۇت",h:"بىر سائەت",hh:"%d سائەت",d:"بىر كۈن",dd:"%d كۈن",M:"بىر ئاي",MM:"%d ئاي",y:"بىر يىل",yy:"%d يىل"},dayOfMonthOrdinalParse:/\d{1,2}(-\u0643\u06c8\u0646\u0649|-\u0626\u0627\u064a|-\u06be\u06d5\u067e\u062a\u06d5)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-كۈنى";case"w":case"W":return e+"-ھەپتە";default:return e}},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:7}}),n.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:function(e,t){var r={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return e?r[/(\[[\u0412\u0432\u0423\u0443]\]) ?dddd/.test(t)?"accusative":/\[?(?:\u043c\u0438\u043d\u0443\u043b\u043e\u0457|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u043e\u0457)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:r.nominative},weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:es("[Сьогодні "),nextDay:es("[Завтра "),lastDay:es("[Вчора "),nextWeek:es("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return es("[Минулої] dddd [").call(this);case 1:case 2:case 4:return es("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:Xi,m:Xi,mm:Xi,h:"годину",hh:Xi,d:"день",dd:Xi,M:"місяць",MM:Xi,y:"рік",yy:Xi},meridiemParse:/\u043d\u043e\u0447\u0456|\u0440\u0430\u043d\u043a\u0443|\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430/,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430)$/.test(e)},meridiem:function(e,t,r){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}});var ts=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],rs=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];return n.defineLocale("ur",{months:ts,monthsShort:ts,weekdays:rs,weekdaysShort:rs,weekdaysMin:rs,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(e){return"شام"===e},meridiem:function(e,t,r){return e<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}}),n.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}}),n.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}}),n.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,r){return e<12?r?"sa":"SA":r?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}}),n.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),n.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/\u1ecdj\u1ecd\u0301\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}}),n.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:11<=e?e:e+12},meridiem:function(e,t,r){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1130?"上午":n<1230?"中午":n<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}}),n.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?11<=e?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,r){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1130?"上午":n<1230?"中午":n<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}}),n.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?11<=e?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,r){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1130?"上午":n<1230?"中午":n<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}}),n.locale("en"),n}()}).call(this,r(67)(e))},function(e,t,r){"use strict";var n=r(1),i=r(96),s=r(2);t.a=new class extends i.a{constructor(e){super(e),this.allowOnceList={}}processList(e,t){let r;Object(s.log)("processing c2p...");try{r=this._buildDb(t.click2play,t.click2playVersion)}catch(e){return Object(s.log)("Click2PlayDb processList() error",e),!1}return!!r&&(Object(s.log)("processed c2p..."),this.db=r,e||(n.a.click2play=t),!0)}reset(e){delete this.allowOnceList[e]}allowedOnce(e,t){return this.allowOnceList.hasOwnProperty(e)&&this.allowOnceList[e].hasOwnProperty(t)}allowOnce(e,t){this.allowOnceList[t]={},e.forEach(e=>{this.allowOnceList[t][e]=1})}_buildDb(e,t){const r={};let n;return e.forEach(e=>{r.hasOwnProperty(e.aid)||(r[e.aid]=[]),n=[e.aid],e.alsoAllow&&(n=n.concat(e.alsoAllow)),r[e.aid].push({aid:e.aid,allow:n,frameColor:e.frameBackground?e.frameBackground:"",text:e.text?e.text:"",button:e.button?e.button:"",attach:!!e.attach&&e.attach,ele:e.selector?e.selector:"",type:e.type?e.type:""})}),{apps:r,version:t}}}("click2play")},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e?w.get(e):""};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(148));const i=new Int32Array(4),s=new ArrayBuffer(68),a=new Uint8Array(s),o=new Uint32Array(s),u=new Int32Array([128,32768,8388608,-2147483648]),c="0123456789abcdef".split("");let l,d=!1,h=!0,f=!1,p=0,m=0;function _(e,t){return e+t&4294967295}function g(e,t,r,n,i,s,a){const o=e+(t&r|~t&n)+(i>>>0)+a|0;return(o<<s|o>>>32-s)+t|0}function y(e,t,r,n,i,s,a){const o=e+(t&n|r&~n)+(i>>>0)+a|0;return(o<<s|o>>>32-s)+t|0}function v(e,t,r,n,i,s,a){const o=e+(t^r^n)+(i>>>0)+a|0;return(o<<s|o>>>32-s)+t|0}function b(e,t,r,n,i,s,a){const o=e+(r^(t|~n))+(i>>>0)+a|0;return(o<<s|o>>>32-s)+t|0}function $(){let e,t,r,n;h?t=((t=((e=((e=o[0]-680876937)<<7|e>>>25)-271733879<<0)^(r=((r=(-271733879^(n=((n=(-1732584194^2004318071&e)+o[1]-117830708)<<12|n>>>20)+e<<0)&(-271733879^e))+o[2]-1126478375)<<17|r>>>15)+n<<0)&(n^e))+o[3]-1316259209)<<22|t>>>10)+r<<0:(e=i[0],t=g(t=i[1],r=g(r=i[2],n=g(n=i[3],e=g(e,t,r,n,o[0],7,-680876936),t,r,o[1],12,-389564586),e,t,o[2],17,606105819),n,e,o[3],22,-1044525330)),t=b(t=b(t=b(t=b(t=v(t=v(t=v(t=v(t=y(t=y(t=y(t=y(t=g(t=g(t=g(t,r=g(r,n=g(n,e=g(e,t,r,n,o[4],7,-176418897),t,r,o[5],12,1200080426),e,t,o[6],17,-1473231341),n,e,o[7],22,-45705983),r=g(r,n=g(n,e=g(e,t,r,n,o[8],7,1770035416),t,r,o[9],12,-1958414417),e,t,o[10],17,-42063),n,e,o[11],22,-1990404162),r=g(r,n=g(n,e=g(e,t,r,n,o[12],7,1804603682),t,r,o[13],12,-40341101),e,t,o[14],17,-1502002290),n,e,o[15],22,1236535329),r=y(r,n=y(n,e=y(e,t,r,n,o[1],5,-165796510),t,r,o[6],9,-1069501632),e,t,o[11],14,643717713),n,e,o[0],20,-373897302),r=y(r,n=y(n,e=y(e,t,r,n,o[5],5,-701558691),t,r,o[10],9,38016083),e,t,o[15],14,-660478335),n,e,o[4],20,-405537848),r=y(r,n=y(n,e=y(e,t,r,n,o[9],5,568446438),t,r,o[14],9,-1019803690),e,t,o[3],14,-187363961),n,e,o[8],20,1163531501),r=y(r,n=y(n,e=y(e,t,r,n,o[13],5,-1444681467),t,r,o[2],9,-51403784),e,t,o[7],14,1735328473),n,e,o[12],20,-1926607734),r=v(r,n=v(n,e=v(e,t,r,n,o[5],4,-378558),t,r,o[8],11,-2022574463),e,t,o[11],16,1839030562),n,e,o[14],23,-35309556),r=v(r,n=v(n,e=v(e,t,r,n,o[1],4,-1530992060),t,r,o[4],11,1272893353),e,t,o[7],16,-155497632),n,e,o[10],23,-1094730640),r=v(r,n=v(n,e=v(e,t,r,n,o[13],4,681279174),t,r,o[0],11,-358537222),e,t,o[3],16,-722521979),n,e,o[6],23,76029189),r=v(r,n=v(n,e=v(e,t,r,n,o[9],4,-640364487),t,r,o[12],11,-421815835),e,t,o[15],16,530742520),n,e,o[2],23,-995338651),r=b(r,n=b(n,e=b(e,t,r,n,o[0],6,-198630844),t,r,o[7],10,1126891415),e,t,o[14],15,-1416354905),n,e,o[5],21,-57434055),r=b(r,n=b(n,e=b(e,t,r,n,o[12],6,1700485571),t,r,o[3],10,-1894986606),e,t,o[10],15,-1051523),n,e,o[1],21,-2054922799),r=b(r,n=b(n,e=b(e,t,r,n,o[8],6,1873313359),t,r,o[15],10,-30611744),e,t,o[6],15,-1560198380),n,e,o[13],21,1309151649),r=b(r,n=b(n,e=b(e,t,r,n,o[4],6,-145523070),t,r,o[11],10,-1120210379),e,t,o[2],15,718787259),n,e,o[9],21,-343485551),h?(i[0]=_(e,1732584193),i[1]=_(t,-271733879),i[2]=_(r,-1732584194),i[3]=_(n,271733878),h=!1):(i[0]=_(i[0],e),i[1]=_(i[1],t),i[2]=_(i[2],r),i[3]=_(i[3],n))}const w=new n.default(function(e){return o.fill(0),i.fill(0),p=0,m=0,d=!1,h=!0,f=!1,function(e){if(d)return;const t=e.length;let r,n,i=0;for(;i<t;){for(f&&(f=!1,o[0]=o[16],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=0,o[16]=0),n=m;i<t&&n<64;++i)(r=e.charCodeAt(i))<128?a[n++]=r:r<2048?(a[n++]=192|r>>6,a[n++]=128|63&r):r<55296||r>=57344?(a[n++]=224|r>>12,a[n++]=128|r>>6&63,a[n++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),a[n++]=240|r>>18,a[n++]=128|r>>12&63,a[n++]=128|r>>6&63,a[n++]=128|63&r);l=n,p+=n-m,n>=64?(m=n-64,$(),f=!0):m=n}}(e),function(){if(d)return;d=!0;const e=l;o[e>>2]|=u[3&e],e>=56&&(f||$(),o[0]=o[16],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=0,o[16]=0),o[14]=p<<3,$()}(),function(e){const t=e[0],r=e[1],n=e[2],i=e[3];return c[t>>4&15]+c[15&t]+c[t>>12&15]+c[t>>8&15]+c[t>>20&15]+c[t>>16&15]+c[t>>28&15]+c[t>>24&15]+c[r>>4&15]+c[15&r]+c[r>>12&15]+c[r>>8&15]+c[r>>20&15]+c[r>>16&15]+c[r>>28&15]+c[r>>24&15]+c[n>>4&15]+c[15&n]+c[n>>12&15]+c[n>>8&15]+c[n>>20&15]+c[n>>16&15]+c[n>>28&15]+c[n>>24&15]+c[i>>4&15]+c[15&i]+c[i>>12&15]+c[i>>8&15]+c[i>>20&15]+c[i>>16&15]+c[i>>28&15]+c[i>>24&15]}(i)},1600)},function(e,t,r){"use strict";function n(e){if("string"!=typeof e)return"";let t=e;const r=e.indexOf("://");-1!==r&&r<=6&&(t=e.substr(r+3));const n=t.indexOf("/");return-1!==n&&(t=t.substr(0,n)),t.endsWith(".")&&(t=t.substr(0,t.length-1)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.sameGeneralDomain=t.extractHostname=t.getPublicSuffix=t.getGeneralDomain=t.parse=void 0;const i=function(e){return e&&e.__esModule?e:{default:e}}(r(1215)).default.fromUserSettings({extractHostname:n,validHosts:["localhost"]});function s(e){const t=i.parse(e);return t.isIp&&(t.domain=t.hostname),!t.domain&&t.publicSuffix&&(t.domain=t.publicSuffix),t}function a(e){return s(e).domain}t.parse=s,t.getGeneralDomain=a,t.getPublicSuffix=function(e){return i.getPublicSuffix(e)},t.extractHostname=n,t.sameGeneralDomain=function(e,t){return e===t||a(e)===a(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=window.browser||window.chrome;t.chrome=n,t.window=window},,,function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"a",function(){return p});var n=r(57),i=r(1),s=r(8),a=r(3);const o="BLOCK_REASON_BLOCK_PAUSED",u="BLOCK_REASON_GLOBAL_BLOCKED",c="BLOCK_REASON_WHITELISTED",l="BLOCK_REASON_BLACKLISTED",d="BLOCK_REASON_SS_UNBLOCKED",h="BLOCK_REASON_SS_BLOCKED",f="BLOCK_REASON_C2P_ALLOWED_ONCE",p="BLOCK_REASON_C2P_ALLOWED_THROUGH";t.c=class{getSitePolicy(e){return this.blacklisted(e)?1:!!this.whitelisted(e)&&2}whitelisted(e){if(e){e=(e=Object(s.processUrl)(e).host).replace(/^www\./,"");const t=i.a.site_whitelist||[],r=t.length;for(let n=0;n<r;n++)if(e===t[n])return t[n]}return!1}blacklisted(e){if(e){e=(e=Object(s.processUrl)(e).host).replace(/^www\./,"");const t=i.a.site_blacklist||[],r=t.length;for(let n=0;n<r;n++)if(e===t[n])return t[n]}return!1}shouldBlock(e,t,r,s,p){if(a.a.SESSION.paused_blocking)return{block:!1,reason:o};if(i.a.selected_app_ids.hasOwnProperty(e)){if(i.a.toggle_individual_trackers&&i.a.site_specific_unblocks.hasOwnProperty(s)&&i.a.site_specific_unblocks[s].includes(+e)){if(this.blacklisted(p)){const t=n.a.allowedOnce(r,e);return{block:!t,reason:t?f:l}}return{block:!1,reason:d}}if(this.whitelisted(p))return{block:!1,reason:c};const t=n.a.allowedOnce(r,e);return{block:!t,reason:t?f:u}}if(i.a.toggle_individual_trackers&&i.a.site_specific_blocks.hasOwnProperty(s)&&i.a.site_specific_blocks[s].includes(+e)){if(this.whitelisted(p))return{block:!1,reason:c};const t=n.a.allowedOnce(r,e);return{block:!t,reason:t?f:h}}if(this.blacklisted(p)){const t=n.a.allowedOnce(r,e);return{block:!t,reason:t?f:l}}return{block:!1,reason:u}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigTs=function(){null===i&&(i=n.default.get("config_ts",null));return i},t.updateTimestamp=function(e){i=e},t.getTime=s,t.newUTCDate=function(){const e=s();return new Date(Date.UTC(e.substring(0,4),parseInt(e.substring(4,6),10)-1,e.substring(6,8),e.substring(8,10)))},t.dateString=a,t.hourString=function(e){const t=e.getUTCHours().toString();return a(e)+(t[1]?t:`0${t[0]}`)},t.getHourTimestamp=function(){return s().slice(0,10)};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11));let i=null;function s(){const e=new Date;let t,r=null;if(i)t=i+""+(r=(e.getUTCHours()<10?"0":"")+e.getUTCHours());else{let n=null,i=null,s=null;n=(e.getDate()<10?"0":"")+e.getDate(),i=(e.getMonth()<9?"0":"")+parseInt(e.getMonth()+1,10),r=(e.getUTCHours()<10?"0":"")+e.getUTCHours(),t=(s=e.getFullYear())+""+i+n+r}return t}function a(e){const t=e.getFullYear().toString(),r=(e.getMonth()+1).toString(),n=e.getDate().toString();return t+(r[1]?r:`0${r[0]}`)+(n[1]?n:`0${n[0]}`)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Window=void 0;var n=r(428);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var i=r(427);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}),t.mapWindows=a,t.isTabURL=function(){return!1},t.getLocale=function(){return s.window.navigator.language||s.window.navigator.userLanguage},t.getBrowserMajorVersion=function(){let e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),t=!!e&&parseInt(e[2],10);t||(e=navigator.userAgent.match(/Firefox\/([0-9]+)\./),t=!!e&&parseInt(e[1],10));return t},t.setInstallDatePref=function(){},t.setOurOwnPrefs=function(){},t.enableChangeEvents=function(){},t.addWindowObserver=function(){},t.removeWindowObserver=function(){},t.addSessionRestoreObserver=function(){},t.removeSessionRestoreObserver=function(){},t.addMigrationObserver=function(){},t.removeMigrationObserver=function(){},t.forEachWindow=function(e){a(e=>e).forEach(e)},t.mustLoadWindow=function(){return!0},t.waitWindowReady=function(){return Promise.resolve()},t.getUrlForTab=function(e){return new Promise(t=>{s.chrome.tabs.get(Number(e),e=>{s.chrome.runtime.lastError?t(null):t(e.url)})})},t.getActiveTab=function(){return new Promise((e,t)=>{s.chrome.tabs.query({active:!0},r=>{const n=r[0];n?e({id:n.id,url:n.url}):t("Result of query for active tab is undefined")})})},t.getCookies=function(e){return new Promise(t=>{s.chrome.cookies.getAll({url:e},e=>t(e.map(e=>e.value).join(";")))})},t.reportError=function(){},t.disableChangeEvents=function(){},t.resetOriginalPrefs=function(){},t.getThemeStyle=function(){};var s=r(61);function a(e){return[s.window].map(t=>{let r;try{r=e(t)}catch(e){}return r})}t.Window=class{constructor(e){this.window=e}static findByTabId(){}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=u(r(443)),s=u(r(11)),a=r(32),o=u(r(81));function u(e){return e&&e.__esModule?e:{default:e}}function c(){}function l(){if(arguments.length>0){dump(arguments.length<=0?void 0:arguments[0]);for(let e=1;e<arguments.length;e+=1)dump(" "),dump(arguments.length<=e?void 0:arguments[e]);dump("\n")}}const d="logger.",h="log",f=new Map([["debug",1],["info",2],["log",2],["warn",3],["warning",3],["error",4],["off",5]]),p="showConsoleLogs";class m{constructor(e){let t=e.getLevel,r=e.setLevel,n=e.prefix,s=e.useDump;this.getLevel=t,this.setLevel=r,this._debug=i.default.debug||c,this._log=i.default.log||c,this._warning=i.default.warning||c,this._error=i.default.error||c,s&&(this._debug=l.bind(null,"[debug]"),this._log=l.bind(null,"[log]"),this._warning=l.bind(null,"[warning]"),this._error=l.bind(null,"[error]")),n&&(this._debug=this._debug.bind(null,n),this._log=this._log.bind(null,n),this._warning=this._warning.bind(null,n),this._error=this._error.bind(null,n))}setLevel(e){return this.setLevel(e)}isEnabledFor(e){return(f.get(e)||-1)>=f.get(this.getLevel())}logObject(e){this.isEnabledFor("debug")&&this.debug(JSON.parse(JSON.stringify(e)))}exception(){if(this.isEnabledFor("error")){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this._error(...t,(new Error).stack)}}get debug(){return this.isEnabledFor("debug")?this._debug:c}get info(){return this.log}get log(){return this.isEnabledFor("log")?this._log:c}get warn(){return this.warning}get warning(){return this.isEnabledFor("warn")?this._warning:c}get error(){return this.isEnabledFor("error")?this._error:c}}const _=new class{constructor(){this.logLevels=new o.default(()=>h),this.prefListener=null,this.loggingEnabled=function(){const t=void 0!==e&&!0===e.__DEV__;try{return s.default.get(p,t||!1)}catch(e){return!1}}()}init(){this.prefListener=(0,a.subscribe)("prefchange",e=>{if(e.startsWith(d)){const t=s.default.get(e);f.has(t)?this.logLevels.set(e,t):i.default.log(`Got invalid log level ${t} for ${e}`)}e===p&&(this.loggingEnabled=s.default.get(e))})}unload(){null!==this.prefListener&&(this.prefListener.unsubscribe(),this.prefListener=null)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=function(e){return`${d}${e}.level`}(e),i=e=>!!f.has(e)&&(this.logLevels.set(r,e),s.default.set(r,t.level),!0);return i(t.level),new m(n({getLevel:()=>this.loggingEnabled?this.logLevels.get(r):"off",setLevel:i,prefix:`Cliqz [${e}]`},t))}};t.default=_}).call(this,r(17))},,,,,,function(e,t,r){"use strict";t.isScheduler=function(e){return e&&"function"==typeof e.schedule}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(69));t.default=n.default.get("anolysis",{level:"log"})},function(e,t,r){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(t=>{const r=Object.keys(t).reduce((e,r)=>(e[r]=Object.getOwnPropertyDescriptor(t,r),e),{});"undefined"!=typeof Symbol&&Object.getOwnPropertySymbols(t).forEach(e=>{const n=Object.getOwnPropertyDescriptor(t,e);n.enumerable&&(r[e]=n)}),Object.defineProperties(e,r)}),e}({},e),r=t.init,i=t.unload,s=t.events;return Object.keys(t.actions||{}).forEach(e=>{t.actions[e]=t.actions[e].bind(t)}),t.init=function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];const o=Promise.resolve(r.apply(t,i));return Object.keys(s||{}).forEach(e=>{s[e]=s[e].bind(t),n.default.sub(e,s[e])}),o},t.unload=function(){Object.keys(s||{}).forEach(e=>{n.default.un_sub(e,s[e])});for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];i.apply(t,r)},t};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(32))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoPersistentObject=t.PersistentObject=t.LazyPersistentObject=t.saveRecord=t.loadRecord=void 0,t.createPersistent=function(e,t){o(e,r=>{let n={},i=!1;try{n=JSON.parse(r||"{}")}catch(e){n={},i=!0}t(new Proxy(n,new c(e,n,i)))})},t.clearPersistent=function(e){Object.keys(e).forEach(t=>delete e[t])},t.getValue=function(e,t){return n.default.get(`attrack.${e}`,t)},t.setValue=function(e,t){n.default.set(`attrack.${e}`,t)},t.deletePersistantObject=function(e){return function(e){return s.default.removeItem(`cliqz.dbattrack.${e}`)}(e)};var n=a(r(11)),i=a(r(109)),s=a(r(1135));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){s.default.getItem(`cliqz.dbattrack.${e}`).then(t)}function u(e,t){s.default.setItem(`cliqz.dbattrack.${e}`,t)}class c{constructor(e,t,r){this.name=e,this.target=t,this.dirty=r||!1,i.default.register(this.persistState.bind(this),6e4,this.isDirty.bind(this)),Object.keys(this.target).forEach(e=>{this.target[e]=this.proxyBranch(this.target[e])}),this.set=function(e,t,r){return e[t]=this.proxyBranch(r),this.dirty=!0,!0},this.deleteProperty=function(e,t){return delete e[t],this.dirty=!0,!0}}persistState(){this.dirty&&(u(this.name,JSON.stringify(this.target)),this.dirty=!1)}proxyBranch(e){return"object"==typeof e?(Object.keys(e).forEach(t=>{e[t]=this.proxyBranch(e[t])}),new Proxy(e,this)):e}isDirty(){return this.dirty}}t.loadRecord=o,t.saveRecord=u;t.LazyPersistentObject=class{constructor(e){this.name=e,this.value={},this.dirty=!1}load(){return new Promise(e=>{o(this.name,t=>{try{this.value=JSON.parse(t||"{}")}catch(e){this.value={},this.dirty=!0}e(this.value)})})}save(){this.dirty&&(u(this.name,JSON.stringify(this.value)),this.dirty=!1)}setValue(e){this.value=e,this.dirty=!0,this.save()}setDirty(){this.dirty=!0}isDirty(){return this.dirty}clear(){this.value={},this.dirty=!0,this.save()}};class l{constructor(e,t){this.name=e,this.value={},this.dirty=!1,this.setter=t,this.setter(this.value),this.load()}load(){o(this.name,e=>{try{this.value=JSON.parse(e||"{}")}catch(e){this.value={},this.dirty=!0}this.setter(this.value)})}setValue(e){this.value=e,this.dirty=!0,this.setter(e),this.save()}save(){this.dirty&&(u(this.name,JSON.stringify(this.value)),this.dirty=!1)}setDirty(){this.dirty=!0}isDirty(){return this.dirty}clear(){this.value={},this.dirty=!0,this.save(),this.setter(this.value)}}t.PersistentObject=l;t.AutoPersistentObject=class extends l{constructor(e,t,r){super(e,t),i.default.register(this.save.bind(this),r,this.isDirty.bind(this))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=t.UpdateCallbackHandler=void 0;var n=d(r(22)),i=d(r(69)),s=d(r(11)),a=r(55),o=d(r(1189)),u=r(146),c=r(419),l=r(52);function d(e){return e&&e.__esModule?e:{default:e}}const h=i.default.get("core",{level:"log",prefix:"[resource-loader]"}),f=6e4,p=60*f;class m{constructor(){this.callbacks=[]}onUpdate(e){this.callbacks.push(e)}triggerCallbacks(e){return Promise.all(this.callbacks.map(t=>t(e)))}}t.UpdateCallbackHandler=m;class _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.name="string"==typeof e?[e]:e,this.remoteURL=t.remoteURL,this.dataType=t.dataType||"json",this.filePath=["cliqz",...this.name],this.chromeURL=t.chromeURL||`${n.default.baseURL}${this.name.join("/")}`,this.storage=new o.default(this.filePath),this.remoteOnly=t.remoteOnly||"mobile"===l.platformName,this.compress=t.compress||l.isChromium}load(){return this.storage.load().then(e=>this.decompressData(e)).then(e=>{try{return(0,u.fromUTF8)(e)||e}catch(t){return e}}).then(e=>this.parseData(e)).catch(()=>this.remoteOnly?Promise.reject("Should update only from remote"):this.updateFromURL(this.chromeURL)).catch(()=>this.updateFromRemote())}updateFromRemote(){return void 0===this.remoteURL?Promise.reject("updateFromRemote: remoteURL is undefined"):this.updateFromURL(this.remoteURL)}updateFromURL(e){return e?function(e){return(0,a.fetch)(e).then(e=>e.text())}(e).then(this.persist.bind(this)):Promise.reject("updateFromURL: url is undefined")}compressData(e){return this.compress?(0,c.deflate)(e,{to:"string"}):e}decompressData(e){if(!this.compress)return e;try{return(0,c.inflate)(e,{to:"string"})}catch(t){return e}}persist(e){return this.parseData(e).then(t=>{const r=this.compressData(e);return this.storage.save(r).catch(e=>h.error("Failed to persist:",e)).then(()=>t)})}parseData(e){if("json"===this.dataType)try{const t=JSON.parse(e);return Promise.resolve(t)}catch(t){return Promise.reject(`parseData: failed with exception ${t} ${e}`)}return Promise.resolve(e)}}t.Resource=_;t.default=class extends m{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.resource=new _(e,t),this.cron=t.cron||p,this.updateInterval=t.updateInterval||10*f,this.intervalTimer=null}init(){this.intervalTimer||(this.intervalTimer=setInterval(this.updateFromRemote.bind(this),this.updateInterval))}load(){return this.init(),this.resource.load()}updateFromRemote(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).force;let r=void 0!==t&&t;return function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){const t=e.resource.name.join("/"),n=`resource-loader.lastUpdates.${t}`,i=Number(s.default.get(n,0)),a=Date.now();if(r||a>e.cron+i){let r;try{r=yield e.resource.updateFromRemote(),s.default.set(n,String(Date.now()))}catch(r){return void h.warn(`Failed to fetch resources for ${t} from remoteUrl: ${e.resource.remoteURL}`,r)}try{return yield e.triggerCallbacks(r),r}catch(e){h.error(`Failed to execute callbacks for ${t}`,e)}}})()}stop(){clearInterval(this.intervalTimer)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.map=new Map(...r),this.valueCtr=e}toMap(){return this.map}toObj(){const e=Object.create(null);return this.forEach((t,r)=>{e[r]=t}),e}get size(){return this.map.size}clear(){return this.map.clear()}delete(){return this.map.delete(...arguments)}entries(){return this.map.entries(...arguments)}forEach(){return this.map.forEach(...arguments)}get(e){return this.has(e)||this.set(e,this.valueCtr()),this.map.get(e)}has(){return this.map.has(...arguments)}keys(){return this.map.keys(...arguments)}set(){return this.map.set(...arguments)}values(){return this.map.values(...arguments)}update(e,t){const r=this.get(e),n=t(r);this.set(e,void 0===n?r:n)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryEncodeURIComponent=t.tryEncodeURI=t.tryDecodeURIComponent=t.tryDecodeURI=t.fixURL=t.isCliqzAction=t.cleanMozillaActions=t.urlStripProtocol=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(1202);Object.defineProperty(t,"urlStripProtocol",{enumerable:!0,get:function(){return i.urlStripProtocol}}),Object.defineProperty(t,"cleanMozillaActions",{enumerable:!0,get:function(){return i.cleanMozillaActions}}),Object.defineProperty(t,"isCliqzAction",{enumerable:!0,get:function(){return i.isCliqzAction}});var s=r(1201);Object.defineProperty(t,"fixURL",{enumerable:!0,get:function(){return s.fixURL}}),t.isIpv4Address=g,t.isIpv6Address=y,t.isIpAddress=v,t.isUrl=function(e){if(!e)return!1;if((0,s.isURI)(e))return!0;const t=e.indexOf("://");-1!==t&&t<=6&&(e=e.slice(t+3));return e=e.split("/")[0],d.test(e)||v(e)},t.isLocalhost=b,t.extractSimpleURI=function(e){return new s.URI(e)},t.equals=function(e,t){const r=(0,i.equals)(e,t);if((0,a.default)(e,t))return!0;return r},t.stripTrailingSlash=$,t.getDetailsFromUrl=function(e){return w.get(e)},t.getSearchEngineUrl=function(e,t,r){if(!c.isFirefox)return e.getSubmissionForQuery(t);return`moz-action:searchengine,${JSON.stringify({engineName:e.name,input:encodeURIComponent(t),searchQuery:encodeURIComponent(r),alias:e.alias})}`},t.getVisitUrl=function(e){if(!c.isFirefox)return e;return`moz-action:visiturl,${JSON.stringify({url:encodeURIComponent(e)})}`},t.cleanUrlProtocol=k,t.generalizeUrl=function(e,t){if(!e)return"";let r=e.toLowerCase();const n=k(r,!1).split("/"),i=n[0];let s=0;const a=/,|\./g;t||(n.length>1&&(s=`/${n.slice(1).join("/")}`.length),0===i.indexOf("www")&&i.length>4&&a.test(i[3])&&" "!==i[4]&&(r=r.substr(0,r.length-s).replace(a,".")+(s?r.substr(-s):"")));return"/"===(e=k(r,!0))[e.length-1]?e.slice(0,-1):e};var a=l(s),o=r(60),u=l(r(148)),c=r(52);function l(e){return e&&e.__esModule?e:{default:e}}const d=/^(([a-z\d]([a-z\d-]*[a-z\d])?)\.)+[a-z]{2,}(:\d+)?$/i;function h(e){return function(){try{return e(...arguments)}catch(e){return arguments.length<=0?void 0:arguments[0]}}}const f="0*([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])",p=new RegExp(`^${f}\\.${f}\\.${f}\\.${f}([:]([0-9])+)?$`),m=new RegExp("^\\[?(([0-9]|[a-f]|[A-F])*[:.]+([0-9]|[a-f]|[A-F])+[:.]*)+[\\]]?([:][0-9]+)?$"),_=/^(\S+?):(\/\/)?(.*)$/i;function g(e){return p.test(e)}function y(e){return m.test(e)}function v(e){return g(e)||y(e)}function b(e,t,r){return"localhost"===e||(!(!t||"127"!==e.substr(0,3))||!(!r||"::1"!==e))}t.tryDecodeURI=h(decodeURI),t.tryDecodeURIComponent=h(decodeURIComponent),t.tryEncodeURI=h(encodeURI),t.tryEncodeURIComponent=h(encodeURIComponent);function $(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e}const w=new u.default(function(e){var t=(0,i.cleanMozillaActions)(e),r=n(t,2);const s=r[0],a=r[1];let u=a,c="",l="",d="",h="",f=[],p="",m="",v="";const w=_.exec(u);w&&(c=w[1],l=w[2]||"",u=w[3]);const k="https"===c;let M=u.split(/[/#?]/)[0].toLowerCase();p=u.replace(M,"");const S=M.split("@");S.length>1&&(M=S[1]);let O="",x=g(M),T=y(M);const E=M.indexOf(":");(!T||x)&&E>=0?(O=M.substr(E+1),M=M.substr(0,E)):T&&M.indexOf("]:")>=0&&(O=M.split("]:")[1],M=M.split("]:")[0].replace("[","").replace("]",""));m="";const D=p.indexOf("?");-1!==D&&(m=p.substr(D+1)),v="";const L=p.indexOf("#");-1!==L&&(v=p.substr(L+1));let P=p=(p=p.replace(`?${m}`,"")).replace(`#${v}`,"");(m=m.replace(`#${v}`,""))&&(P+=`?${m}`),v&&(P+=`#${v}`);const A=b(M,x=g(M),T=y(M));if(x||T||A)d=A?"localhost":"IP";else try{let e=M;(h=(0,o.getPublicSuffix)(M))&&(e=M.slice(0,-(h.length+1))),d=(f=e.split(".")).pop()}catch(e){d="",M=""}let j=M;0===M.toLowerCase().indexOf("www.")&&(j=M.slice(4));let R=j+P;return c&&"http"!==c&&"https"!==c&&(R=`${c}:${l}${R}`),R=$(R),j===h&&(d=h),{action:s,originalUrl:a,scheme:c?`${c}:`:"",name:d,domain:h?`${d}.${h}`:"",tld:h,subdomains:f,path:p,query:m,fragment:v,extra:P,host:M,cleanHost:j,ssl:k,port:O,friendly_url:R}},50);function k(e,t){if(!e)return"";const r=e.toLowerCase();return r.startsWith("http://")&&(e=e.slice(7)),r.startsWith("https://")&&(e=e.slice(8)),t&&e.toLowerCase().startsWith("www.")&&(e=e.slice(4)),e}},,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(783);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confOnPrefChange=function(e){switch(e){case"triggersBE":return c.BACKEND_URL=i.default.get(e,s.default.settings.OFFERS_BE_BASE_URL),void(c.SIGNALS_HPN_BE_ADDR=`${c.BACKEND_URL}/api/v1/savesignal`)}const t=o(e);t&&u.has(t)&&(c[t]=i.default.get(e))};var n=r(52),i=a(r(11)),s=a(r(22));function a(e){return e&&e.__esModule?e:{default:e}}const o=e=>e.startsWith("offers-v2.")?e.slice("offers-v2.".length).toUpperCase():null,u=new Set(["MAX_NUM_OFFERS_PER_DAY"]),c={MINUTE:60,HOUR:3600,DAY:86400,CURRENT_VERSION:2,LOG_LEVEL:"debug",IS_DEV_MODE:!1,BACKEND_URL:i.default.get("triggersBE",s.default.settings.OFFERS_BE_BASE_URL),OFFER_INFORMATION_URL:"https://cliqz.com/products/cliqz-for-desktop/cliqz-angebote",OFFERS_HISTORY_LIVE_TIME_SECS:1728e3,TRIGGER_HISTORY_DATA:n.isChromium?void 0:"chrome://cliqz/content/offers-v2/trigger_history.json",TRIGGER_ENGINE_VERSION:"21",LOAD_OFFERS_STORAGE_DATA:!0,OFFERS_STORAGE_DEFAULT_TTS_SECS:864e3,SIGNALS_OFFERS_FREQ_SECS:30,SIGNALS_HPN_BE_ADDR:`${i.default.get("triggersBE",s.default.settings.OFFERS_BE_BASE_URL)}/api/v1/savesignal`,SIGNALS_HPN_BE_ACTION:"offers-signal",SIGNALS_OFFERS_EXPIRATION_SECS:5184e3,SIGNALS_VERSION:3.1,SIGNALS_LOAD_FROM_DB:!0,SIGNALS_AUTOSAVE_FREQ_SECS:120,MAX_RETRIES:3,SEND_SIG_OP_EXPIRATION_SECS:5184e3,SEND_SIG_OP_SHOULD_LOAD:!0,OFFERS_OVERRIDE_TIMEOUT:-1,MAX_NUM_OFFERS_PER_DAY:i.default.get((e=>`offers-v2.${e.toLowerCase()}`)("MAX_NUM_OFFERS_PER_DAY"),5)};t.default=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t){e.call(this),this.scheduler=t}return n(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(r(4).Observable);t.EmptyObservable=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(238),a=r(89),o=r(75),u=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=e[e.length-1];o.isScheduler(n)?e.pop():n=null;var i=e.length;return i>1?new t(e,n):1===i?new s.ScalarObservable(e[0],n):new a.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t[r]),i.closed||(e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{array:r,index:0,count:n,subscriber:e});for(var s=0;s<n&&!e.closed;s++)e.next(r[s]);e.complete()},t}(i.Observable);t.ArrayObservable=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findOauth=t.shuffle=t.URLInfo=t.getHeaderMD5=t.dURIC=t.getParametersQS=t.parseURL=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=c(r(148)),s=c(r(416)),a=c(r(59)),o=c(r(1123)),u=r(60);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){const t=s.default.parse(e,!1,!1,!0);if(!t._protocol||!t.slashes||!t.host&&t._port<0&&!t.auth)return null;const r=t._port<0?80:t._port;let i="",a="";if(t.auth){var o=t.auth.split(":"),u=n(o,2);i=u[0],a=u[1]}let c=t.pathname||"/";const l=null!==t.search?t.search.slice(1):"";let d="";if(null!==t.pathname){const e=t.pathname.indexOf(";");-1!==e&&(c=c.slice(0,e),d=t.pathname.slice(e+1))}const h=null!==t.hash?t.hash.slice(1):"";return{urlString:e,protocol:t._protocol,hostname:t.hostname,port:r,username:i,password:a,path:c,query:l,parameters:d,fragment:h}}const d=[JSON.parse,o.default];function h(e){if(function(e){if("string"!=typeof e)return!1;const t=e.trim(),r=t[0],n=t[t.length-1];return"{"===r&&"}"===n||"["===r&&"]"===n}(e)){let t=e;for(let r=0;r<d.length;r+=1)try{t=d[r](e);break}catch(e){}return function e(t){if("string"==typeof t&&(t.indexOf("{")>-1||t.indexOf("[")>-1))try{"object"==typeof(t=JSON.parse(t))||Array.isArray(t)||(t=JSON.stringify(t))}catch(e){}const r={};switch(typeof t){case"object":for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=e(t[n]);for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&(r[n+e]=i[e])}break;case"number":t=JSON.stringify(t),r[""]=t;break;default:r[""]=t}return r}(t)}return!1}function f(e){try{return decodeURIComponent(e)}catch(t){return e}}function p(e){const t={},r=new Set;let n="key",i="",s="";const a=(e,n)=>{const i=h(s);i?Object.keys(i).forEach(r=>{t[e+r]=i[r]}):r.has(e)?t[e].push(n):e in t?(r.add(e),t[e]=[t[e],n]):t[e]=n};let o="";for(let r=0;r<e.length;r+=1){const u=e.charAt(r);if('"'!==u&&"'"!==u||(o.slice(-1)===u?o=o.slice(0,o.length-1):o+=u),"="===u&&"key"===n&&i.length>0)n="value";else if("&"!==u&&";"!==u||""!==o)switch(n){case"key":i+=u;break;case"value":s+=u}else"value"===n?(n="key",s=f(s),a(i,s)):"key"===n&&i.length>0&&(t[i]="true"),i="",s=""}return"value"===n?(n="key",s=f(s),a(i,s)):"key"===n&&i.length>0&&(t[i]="true"),r.forEach(e=>{const r=t[e].filter(e=>e.indexOf("=")>-1);r.length>0&&(r.forEach(t=>{const r=t.split("="),n=`${e}_${r[0]}`,i=r.splice(1).join("=");a(n,i)}),r.length===t[e].length?delete t[e]:(t[e]=t[e].filter(e=>-1===e.indexOf("=")),1===t[e].length&&(t[e]=t[e][0])))}),t}const m=new i.default(e=>new class{constructor(e){this.urlString=e;const t=l(e);if(!t)throw new Error(`invalid url: ${e}`);Object.assign(this,t)}get host(){return this._parsedHost||(this._parsedHost=(0,u.parse)(this.hostname)),this._parsedHost}get generalDomain(){return this.host.domain}get generalDomainHash(){return(0,a.default)(this.generalDomain).substring(0,16)}toString(){return this.urlString}get query_keys(){return this._query_keys?this._query_keys:(this._query_keys=p(this.query),this._query_keys)}get parameter_keys(){return this._parameter_keys?this._parameter_keys:(this._parameter_keys=p(this.parameters),this._parameter_keys)}get fragment_keys(){return this._fragment_keys?this._fragment_keys:(this._fragment_keys=p(this.fragment),this._fragment_keys)}getKeyValues(){if(this._kvList)return this._kvList;const e=[];for(var t=[this.query_keys,this.parameter_keys],r=0;r<t.length;r++){const n=t[r];for(const t in n)Array.isArray(n[t])?n[t].forEach(r=>{e.push({k:t,v:r})}):e.push({k:t,v:n[t]})}return this._kvList=e,e}getKeyValuesMD5(){if(this._kvMD5List)return this._kvMD5List;const e=this.getKeyValues().map(e=>{const t=""+e.v;return{k_len:e.k.length,v_len:t.length,k:(0,a.default)(e.k),v:(0,a.default)(t)}});return this._kvMD5List=e,e}}(e),100);const _={get(e){if(!e)return"";try{return function(e){return m.get(e)}(e)}catch(e){return null}}};function g(e){const t={},r=e.split("&");for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const n=r[e].split("=");t[f(n[0])]=f(n[1])}return t}t.parseURL=l,t.getParametersQS=p,t.dURIC=f,t.getHeaderMD5=function(e){const t={};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=f(e[r]);for(;n===f(n);)n=f(n);t[(0,a.default)(r)]=(0,a.default)(n)}return t},t.URLInfo=_,t.shuffle=function(e){const t=e.split("");for(let e=t.length-1;e>0;e-=1){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t.join("")},t.findOauth=function(e,t){try{let e=null;if(t.path.length<50&&t.query_string&&-1!==t.path.indexOf("oauth")){const r=g(t.query_string),n=Object.keys(r);for(let i=0;i<n.length;i+=1)if(-1!==n[i].indexOf("callback")||-1!==n[i].indexOf("redirect"))e=f(r[n[i]]);else if(0===r[n[i]].indexOf("http")&&-1!==r[n[i]].indexOf("/oauth")){const s=l(r[n[i]]);if(s&&s.path&&s.path.indexOf("oauth")&&t.query_string){const t=g(s.query_string),r=Object.keys(t);for(let n=0;n<r.length;n+=1)-1===r[n].indexOf("callback")&&-1===r[n].indexOf("redirect")||(e=f(t[r[n]]))}}}return e}catch(e){return null}}},function(e,t){var r,n,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&f())}function f(){if(!l){var e=o(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(e[n]=r[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){var t,r,n,i,s,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)s=e[t],a.set(s,i),i+=s.length;return a}},a={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,s)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(n)},,,function(e,t,r){"use strict";var n=r(16),i=r.n(n),s=r(3),a=r(1),o=r(8),u=r(2);const{CDN_SUB_DOMAIN:c}=s.a;t.a=class{constructor(e){this.type=e,this.db={},this.just_upgraded=!1}init(e){return this.just_upgraded=e,this._localFetcher().then(e=>this.processList(e.fromMemory,e.data,!0)).catch(e=>{Object(u.log)("Updatable init() error",e)})}update(e,t){const r={remote:!0,version:e,callback:t};i.a.isFunction(e)&&(r.callback=e,delete r.version),this._loadList(r)}_localFetcher(){return new Promise((e,t)=>{const r=a.a[this.type],n="bugs"===this.type||"surrogates"===this.type?"version":`${this.type}Version`;r&&r.hasOwnProperty(n)?this.just_upgraded?Object(o.fetchLocalJSONResource)(`databases/${this.type}.json`).then(t=>{t[n]>r[n]?(Object(u.log)(`fetching updated${this.type} from disk`),e({fromMemory:!1,data:t})):e({fromMemory:!0,data:r})}).catch(e=>{Object(u.log)(`Error fetching updated databases/${this.type}.json`,e),t(e)}):(Object(u.log)(`fetching ${this.type} from memory`),e({fromMemory:!0,data:r})):(Object(u.log)(`fetching ${this.type} from disk`),Object(o.fetchLocalJSONResource)(`databases/${this.type}.json`).then(t=>{Object(u.log)(`got data for ${this.type} from disk`,t),e({fromMemory:!1,data:t})}).catch(e=>{Object(u.log)(`Error fetching databases/${this.type}.json`,e),t(e)}))})}_remoteFetcher(e){Object(u.log)(`fetching ${this.type} from remote`);const t=`https://${c}.ghostery.com/update/${"bugs"===this.type?"v3/bugs":this.type}`;Object(o.getJson)(t).then(t=>{e(!0,t)}).catch(t=>{Object(u.log)("Updatable _remoteFetcher() error",t),e(!1)})}_loadList(e={}){if(Object(u.log)("LOCAL VERSION, SERVER VERSION",this.db.version,e.version),this.db.version&&e.version&&e.version<=this.db.version)return e.callback&&e.callback({success:!0,updated:!1}),void(a.a[`${this.type}_last_updated`]=(new Date).getTime());this._remoteFetcher(i.a.bind(function(t,r){t&&r?this.processList(!1,r)?(a.a[`${this.type}_last_updated`]=(new Date).getTime(),e.callback&&e.callback({success:!0,updated:!0})):(Object(u.log)("Updatable _loadList() error calling processList()"),e.callback&&e.callback({success:!1,updated:!1})):e.callback&&e.callback({success:!1,updated:!1})},this))}}},,,,,,,,,function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MONTH_FORMAT=t.WEEK_FORMAT=t.DAY_FORMAT=t.DATE_FORMAT=t.default=void 0;var n=r(219);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s(n).default}}),t.getSynchronizedDateFormatted=function(){return(0,i.default)().format(a)};var i=s(n);function s(e){return e&&e.__esModule?e:{default:e}}const a=t.DATE_FORMAT="YYYY-MM-DD";t.DAY_FORMAT="YYYY-DDD",t.WEEK_FORMAT="YYYY-WW",t.MONTH_FORMAT="YYYY-M"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40),i=function(e){return e&&e.__esModule?e:{default:e}}(r(25));t.default=class{constructor(e){this.data=e,this.hash_id=null}getHashID(){return this.hash_id||this._buildHashID(),this.hash_id}getOpName(){return this.data&&this.data.raw_op?this.data.raw_op.op_name:""}getTTL(){return this.data&&this.data.raw_op?this.data.raw_op.ttl:null}evalExpr(e){if(!this.isBuilt())try{this.build()}catch(e){return Promise.reject(e)}const t=this.getTTL();if(t){const r=this.getHashID();return this.data.expression_cache.hasEntry(r)?Promise.resolve(this.data.expression_cache.getEntry(r)):this.getExprValue(e).then(e=>(this.data.expression_cache.addEntry(r,t,e),Promise.resolve(e)))}return this.getExprValue(e)}isBuilt(){throw new Error("isBuilt: this should be implemented on the inherited classes")}build(){throw new Error("build: this should be implemented on the inherited classes")}destroy(){}getExprValue(){throw new Error("getExprValue: this should be implemented on the inherited classes")}_buildHashID(){if(!this.hash_id&&this.data&&this.data.raw_op)try{this.hash_id=(0,n.hashString)(JSON.stringify(this.data.raw_op))}catch(e){i.default.error(`Error building the hash: ${e}`),i.default.error(`Error building the hash for trigger id: ${this.data.parent_trigger.trigger_id}`),this.hash_id=null}}}},function(e,t,r){"use strict";var n=r(351);t.multicast=function(e,t){return function(r){var s;if(s="function"==typeof e?e:function(){return e},"function"==typeof t)return r.lift(new i(s,t));var a=Object.create(r,n.connectableObservableDescriptor);return a.source=r,a.subjectFactory=s,a}};var i=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}();t.MulticastOperator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(24)),i=s(r(145));function s(e){return e&&e.__esModule?e:{default:e}}const a=1e4;const o=new class{constructor(e,t){this.tpace=e||a,this.twait=(new Date).getTime()+(t||0),this._timer=null,this._tasks=new Set}start(){this._timer&&this.stop(),this._timer=(0,i.default)(this._tick.bind(this),this.tpace,null)}stop(){this._timer&&this._timer.stop(),this._timer=null,this._tasks=new Set}_tick(){const e=(new Date).getTime();this.twait>e?n.default.log("tick wait","pacemaker"):this._tasks.forEach(t=>{e>t.last+t.freq&&setTimeout(()=>{const r=t.fn.name||"<anon>";try{t.when&&!t.when(t)||(n.default.log(`run task: ${r}`,"pacemaker"),t.fn(e)),t.last=e}catch(e){n.default.log(`Error executing task ${r}: ${e}`,"pacemaker")}},0)})}register(e,t,r){if(!e)throw new Error("fn cannot be undefined");const n={fn:e,freq:t||0,last:0,when:r};return this._tasks.add(n),n}deregister(e){this._tasks.delete(e)}}(3e4,3e4);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageFromLocale=t.LOCALE_PATH=void 0;var n=r(1199);Object.defineProperty(t,"LOCALE_PATH",{enumerable:!0,get:function(){return n.LOCALE_PATH}}),t.getMessage=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(n.IMPLEMENTS_GET_MESSAGE)return(0,n.getMessage)(e,t);if(!e)return"";0===Object.keys(n.locale).length&&(0,n.loadTranslation)(a.currLocale);const r=(n.locale[a.currLocale][e]||{message:e}).message||e;let i=t;Array.isArray(t)||(i=[t]);return r.replace(/\$(?:([1-9]\d*)|(\$+))/g,function(e,t,r){if(t){const e=parseInt(t,10)-1;return e in i?i[e]:""}return r})};var i=r(66);const s=t.getLanguageFromLocale=(e=>e.match(/([a-z]+)(?:[-_]([A-Z]+))?/)[1]);const a={locale:n.locale,get currLocale(){return function(e){return-1!==n.SUPPORTED_LANGS.indexOf(e)?e:"en"}(this.PLATFORM_LANGUAGE)},get PLATFORM_LOCALE(){return(0,i.getLocale)()},get PLATFORM_LANGUAGE(){return s(this.PLATFORM_LOCALE)}};t.default=a},,,,,,function(e,t,r){"use strict";(function(e,n){
/*!
 * @overview RSVP - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2016 Yehuda Katz, Tom Dale, Stefan Penner and contributors
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE
 * @version   4.7.0+2254ba40
 */
function i(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}var s={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,t){if("function"!=typeof t)throw new TypeError("Callback must be a function");var r=i(this),n=void 0;(n=r[e])||(n=r[e]=[]),n.indexOf(t)&&n.push(t)},off:function(e,t){var r,n=i(this),s=void 0;t?-1!==(r=(s=n[e]).indexOf(t))&&s.splice(r,1):n[e]=[]},trigger:function(e,t,r){var n;if(n=i(this)[e])for(var s=0;s<n.length;s++)(0,n[s])(t,r)}},a={instrument:!1};function o(e,t){if(2!==arguments.length)return a[e];a[e]=t}s.mixin(a);var u=[];function c(e,t,r){1===u.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:r&&r._id,label:t._label,timeStamp:Date.now(),error:a["instrument-with-stack"]?new Error(t._label):null}})&&setTimeout(function(){for(var e=0;e<u.length;e++){var t=u[e],r=t.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),a.trigger(t.name,t.payload)}u.length=0},50)}function l(e,t){if(e&&"object"==typeof e&&e.constructor===this)return e;var r=new this(d,t);return $(r,e),r}function d(){}var h=void 0,f=1,p=2,m={error:null};function _(e){try{return e.then}catch(e){return m.error=e,m}}var g=void 0;function y(){try{var e=g;return g=null,e.apply(this,arguments)}catch(e){return m.error=e,m}}function v(e){return g=e,y}function b(e,t,r){if(t.constructor===e.constructor&&r===T&&e.constructor.resolve===l)!function(e,t){t._state===f?k(e,t._result):t._state===p?(t._onError=null,M(e,t._result)):S(t,void 0,function(r){t===r?k(e,r):$(e,r)},function(t){return M(e,t)})}(e,t);else if(r===m){var n=m.error;m.error=null,M(e,n)}else"function"==typeof r?function(e,t,r){a.async(function(e){var n=!1,i=v(r).call(t,function(r){n||(n=!0,t===r?k(e,r):$(e,r))},function(t){n||(n=!0,M(e,t))},"Settle: "+(e._label||" unknown promise"));if(!n&&i===m){n=!0;var s=m.error;m.error=null,M(e,s)}},e)}(e,t,r):k(e,t)}function $(e,t){e===t?k(e,t):!function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?k(e,t):b(e,t,_(t))}function w(e){e._onError&&e._onError(e._result),O(e)}function k(e,t){e._state===h&&(e._result=t,e._state=f,0===e._subscribers.length?a.instrument&&c("fulfilled",e):a.async(O,e))}function M(e,t){e._state===h&&(e._state=p,e._result=t,a.async(w,e))}function S(e,t,r,n){var i=e._subscribers,s=i.length;e._onError=null,i[s]=t,i[s+f]=r,i[s+p]=n,0===s&&e._state&&a.async(O,e)}function O(e){var t=e._subscribers,r=e._state;if(a.instrument&&c(r===f?"fulfilled":"rejected",e),0!==t.length){for(var n=void 0,i=void 0,s=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?x(r,n,i,s):i(s);e._subscribers.length=0}}function x(e,t,r,n){var i="function"==typeof r,s=void 0;if(s=i?v(r)(n):n,t._state!==h);else if(s===t)M(t,new TypeError("A promises callback cannot return that same promise."));else if(s===m){var a=m.error;m.error=null,M(t,a)}else i?$(t,s):e===f?k(t,s):e===p&&M(t,s)}function T(e,t,r){var n=this._state;if(n===f&&!e||n===p&&!t)return a.instrument&&c("chained",this,this),this;this._onError=null;var i=new this.constructor(d,r),s=this._result;if(a.instrument&&c("chained",this,i),n===h)S(this,i,e,t);else{var o=n===f?e:t;a.async(function(){return x(n,i,o,s)})}return i}var E=function(){function e(e,t,r,n){this._instanceConstructor=e,this.promise=new e(d,n),this._abortOnReject=r,this._isUsingOwnPromise=e===A,this._isUsingOwnResolve=e.resolve===l,this._init.apply(this,arguments)}return e.prototype._init=function(e,t){var r=t.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(t)},e.prototype._enumerate=function(e){for(var t=this.length,r=this.promise,n=0;r._state===h&&n<t;n++)this._eachEntry(e[n],n,!0);this._checkFullfillment()},e.prototype._checkFullfillment=function(){0===this._remaining&&k(this.promise,this._result)},e.prototype._settleMaybeThenable=function(e,t,r){var n=this._instanceConstructor;if(this._isUsingOwnResolve){var i=_(e);if(i===T&&e._state!==h)e._onError=null,this._settledAt(e._state,t,e._result,r);else if("function"!=typeof i)this._settledAt(f,t,e,r);else if(this._isUsingOwnPromise){var s=new n(d);b(s,e,i),this._willSettleAt(s,t,r)}else this._willSettleAt(new n(function(t){return t(e)}),t,r)}else this._willSettleAt(n.resolve(e),t,r)},e.prototype._eachEntry=function(e,t,r){null!==e&&"object"==typeof e?this._settleMaybeThenable(e,t,r):this._setResultAt(f,t,e,r)},e.prototype._settledAt=function(e,t,r,n){var i=this.promise;i._state===h&&(this._abortOnReject&&e===p?M(i,r):(this._setResultAt(e,t,r,n),this._checkFullfillment()))},e.prototype._setResultAt=function(e,t,r,n){this._remaining--,this._result[t]=r},e.prototype._willSettleAt=function(e,t,r){var n=this;S(e,void 0,function(e){return n._settledAt(f,t,e,r)},function(e){return n._settledAt(p,t,e,r)})},e}();function D(e,t,r){this._remaining--,this._result[t]=e===f?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}var L="rsvp_"+Date.now()+"-",P=0;var A=function(){function e(t,r){this._id=P++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],a.instrument&&c("created",this),d!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){var r=!1;try{t(function(t){r||(r=!0,$(e,t))},function(t){r||(r=!0,M(e,t))})}catch(t){M(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype._onError=function(e){var t=this;a.after(function(){t._onError&&a.trigger("error",e,t._label)})},e.prototype.catch=function(e,t){return this.then(void 0,e,t)},e.prototype.finally=function(e,t){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})},t)},e}();function j(e,t){return{then:function(r,n){return e.call(t,r,n)}}}function R(e,t,r,n){if(v(r).apply(n,t)===m){var i=m.error;m.error=null,M(e,i)}return e}function I(e){return null!==e&&"object"==typeof e&&(e.constructor===A||_(e))}A.all=function(e,t){return Array.isArray(e)?new E(this,e,!0,t).promise:this.reject(new TypeError("Promise.all must be called with an array"),t)},A.race=function(e,t){var r=new this(d,t);if(!Array.isArray(e))return M(r,new TypeError("Promise.race must be called with an array")),r;for(var n=0;r._state===h&&n<e.length;n++)S(this.resolve(e[n]),void 0,function(e){return $(r,e)},function(e){return M(r,e)});return r},A.resolve=l,A.reject=function(e,t){var r=new this(d,t);return M(r,e),r},A.prototype._guidKey=L,A.prototype.then=T;var C=function(e){function t(t,r,n){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!1,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(E);C.prototype._setResultAt=D;var Y=Object.prototype.hasOwnProperty,F=function(e){function t(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,n,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t){this._result={},this._enumerate(t),0===this._remaining&&k(this.promise,this._result)},t.prototype._enumerate=function(e){var t=this.promise,r=[];for(var n in e)Y.call(e,n)&&r.push({position:n,entry:e[n]});var i=r.length;this._remaining=i;for(var s=void 0,a=0;t._state===h&&a<i;a++)s=r[a],this._eachEntry(s.entry,s.position)},t}(E);var N=function(e){function t(t,r,n){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!1,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(F);N.prototype._setResultAt=D;var U=function(e){function t(t,r,n,i){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!0,i,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t,r,n,i){var s=t.length||0;this.length=s,this._remaining=s,this._result=new Array(s),this._mapFn=i,this._enumerate(t)},t.prototype._setResultAt=function(e,t,r,n){if(n){var i=v(this._mapFn)(r,t);i===m?this._settledAt(p,t,i.error,!1):this._eachEntry(i,t,!1)}else this._remaining--,this._result[t]=r},t}(E);var q={},H=function(e){function t(t,r,n,i){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!0,i,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t,r,n,i){var s=t.length||0;this.length=s,this._remaining=s,this._result=new Array(s),this._filterFn=i,this._enumerate(t)},t.prototype._checkFullfillment=function(){0===this._remaining&&(this._result=this._result.filter(function(e){return e!==q}),k(this.promise,this._result))},t.prototype._setResultAt=function(e,t,r,n){if(n){this._result[t]=r;var i=v(this._filterFn)(r,t);i===m?this._settledAt(p,t,i.error,!1):this._eachEntry(i,t,!1)}else this._remaining--,r||(this._result[t]=q)},t}(E);var z=0,B=void 0;function W(e,t){X[z]=e,X[z+1]=t,2===(z+=2)&&re()}var V="undefined"!=typeof window?window:void 0,G=V||{},K=G.MutationObserver||G.WebKitMutationObserver,J="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function Z(){return function(){return setTimeout(ee,1)}}var X=new Array(1e3);function ee(){for(var e=0;e<z;e+=2){(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0}z=0}var te,re=void 0;function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}re=J?function(){var t=e.nextTick,r=e.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(r)&&"0"===r[1]&&"10"===r[2]&&(t=n),function(){return t(ee)}}():K?function(){var e=0,t=new K(ee),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){return r.data=e=++e%2}}():Q?function(){var e=new MessageChannel;return e.port1.onmessage=ee,function(){return e.port2.postMessage(0)}}():void 0===V?function(){try{var e=r(208);return void 0!==(B=e.runOnLoop||e.runOnContext)?function(){B(ee)}:Z()}catch(e){return Z()}}():Z(),a.async=W,a.after=function(e){return setTimeout(e,0)};function ie(){a.on.apply(a,arguments)}if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var se=window.__PROMISE_INSTRUMENTATION__;for(var ae in o("instrument",!0),se)se.hasOwnProperty(ae)&&ie(ae,se[ae])}var oe=(ne(te={asap:W,Promise:A,EventTarget:s,all:function(e,t){return A.all(e,t)},allSettled:function(e,t){return Array.isArray(e)?new C(A,e,t).promise:A.reject(new TypeError("Promise.allSettled must be called with an array"),t)},race:function(e,t){return A.race(e,t)},hash:function(e,t){return null===e||"object"!=typeof e?A.reject(new TypeError("Promise.hash must be called with an object"),t):new F(A,e,t).promise},hashSettled:function(e,t){return null===e||"object"!=typeof e?A.reject(new TypeError("RSVP.hashSettled must be called with an object"),t):new N(A,e,!1,t).promise},rethrow:function(e){throw setTimeout(function(){throw e}),e},defer:function(e){var t={resolve:void 0,reject:void 0};return t.promise=new A(function(e,r){t.resolve=e,t.reject=r},e),t},denodeify:function(e,t){var r=function(){for(var r=arguments.length,n=new Array(r+1),i=!1,s=0;s<r;++s){var a=arguments[s];if(!i){if((i=I(a))===m){var o=m.error;m.error=null;var u=new A(d);return M(u,o),u}i&&!0!==i&&(a=j(i,a))}n[s]=a}var c=new A(d);return n[r]=function(e,r){e?M(c,e):void 0===t?$(c,r):!0===t?$(c,function(e){for(var t=e.length,r=new Array(t-1),n=1;n<t;n++)r[n-1]=e[n];return r}(arguments)):Array.isArray(t)?$(c,function(e,t){for(var r={},n=e.length,i=new Array(n),s=0;s<n;s++)i[s]=e[s];for(var a=0;a<t.length;a++)r[t[a]]=i[a+1];return r}(arguments,t)):$(c,r)},i?function(e,t,r,n){return A.all(t).then(function(t){return R(e,t,r,n)})}(c,n,e,this):R(c,n,e,this)};return r.__proto__=e,r},configure:o,on:ie,off:function(){a.off.apply(a,arguments)},resolve:function(e,t){return A.resolve(e,t)},reject:function(e,t){return A.reject(e,t)},map:function(e,t,r){return Array.isArray(e)?"function"!=typeof t?A.reject(new TypeError("RSVP.map expects a function as a second argument"),r):new U(A,e,t,r).promise:A.reject(new TypeError("RSVP.map must be called with an array"),r)}},"async",function(e,t){return a.async(e,t)}),ne(te,"filter",function(e,t,r){return"function"!=typeof t?A.reject(new TypeError("RSVP.filter expects function as a second argument"),r):A.resolve(e,r).then(function(e){if(!Array.isArray(e))throw new TypeError("RSVP.filter must be called with an array");return new H(A,e,t,r).promise})}),te);t.a=oe}).call(this,r(92),r(124).setImmediate)},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){var n=r(280),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();e.exports=s},function(e,t,r){"use strict";function n(e,t,r){var n=r?" !== ":" === ",i=r?" || ":" && ",s=r?"!":"",a=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return s+"Array.isArray("+t+")";case"object":return"("+s+t+i+"typeof "+t+n+'"object"'+i+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+i+a+"("+t+" % 1)"+i+t+n+t+")";default:return"typeof "+t+n+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t){switch(e.length){case 1:return n(e[0],t,!0);default:var r="",i=s(e);for(var a in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+n(a,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var s=t[n];i[s]?r[r.length]=s:"array"===e&&"array"===s&&(r[r.length]=s)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:s,getProperty:u,escapeQuotes:c,equal:r(217),ucs2length:r(714),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(l,"").replace(d,"").replace(h,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(f);r&&2==r.length&&(e=t?e.replace(m,"").replace(y,v):e.replace(p,"").replace(_,g));return(r=e.match(b))&&3===r.length?e.replace($,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},toQuotedString:w,getPathExpr:function(e,t,r,n){return S(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=w(r?"/"+O(t):u(t));return S(e,n)},getData:function(e,t,r){var n,i,s,a;if(""===e)return"rootData";if("/"==e[0]){if(!k.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,s="rootData"}else{if(!(a=e.match(M)))throw new Error("Invalid JSON-pointer: "+e);if(n=+a[1],"#"==(i=a[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(s="data"+(t-n||""),!i)return s}for(var o=s,c=i.split("/"),l=0;l<c.length;l++){var d=c[l];d&&(s+=u(x(d)),o+=" && "+s)}return o},unescapeFragment:function(e){return x(decodeURIComponent(e))},unescapeJsonPointer:x,escapeFragment:function(e){return encodeURIComponent(O(e))},escapeJsonPointer:O};var i=s(["string","number","integer","boolean","null"]);function s(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var a=/^[a-z$_][a-z$_0-9]*$/i,o=/'|\\/g;function u(e){return"number"==typeof e?"["+e+"]":a.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(o,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var l=/else\s*{\s*}/g,d=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,h=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var f=/[^v.]errors/g,p=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,_="return errors === 0;",g="validate.errors = null; return true;",y=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,v="return data;",b=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,$=/if \(rootData === undefined\) rootData = data;/;function w(e){return"'"+c(e)+"'"}var k=/^\/(?:[^~]|~0|~1)*$/,M=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function S(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function O(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function x(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMultiPatternIndexPatternAsID=t.buildSimplePatternIndex=t.buildMultiPatternIndex=void 0,t.default=function(e){if(e){var t=(0,a.parse)(e);const r=t.hostname,n=t.domain;return(0,i.mkRequest)({url:e,domain:n,hostname:r,cpt:2,sourceHostname:r,sourceDomain:n})}return null};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(25)),i=r(160),s=r(795),a=r(60);t.buildMultiPatternIndex=function(e){const t=[];return e.forEach(e=>{e.patterns.forEach(r=>{const s=(0,i.parseNetworkFilter)(r);s?(s.groupID=e.groupID,t.push(s)):n.default.error("Error parsing the filter / pattern ",r)})}),new s.MultiPatternIndex(t)},t.buildSimplePatternIndex=function(e){const t=(e.map(e=>(0,i.parseNetworkFilter)(e))||[]).filter(e=>!!e);return new s.SimplePatternIndex(t)},t.buildMultiPatternIndexPatternAsID=function(e){const t=[];return e.forEach(e=>{const r=(0,i.parseNetworkFilter)(e);r?(r.groupID=e,t.push(r)):n.default.error("Error parsing the filter / pattern ",e)}),new s.MultiPatternIndex(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PREFS=t.DEFAULTS=t.TELEMETRY=t.MIN_BROWSER_VERSION=t.VERSION=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(79)),i=c(r(32)),s=c(r(80)),a=c(r(423)),o=c(r(11)),u=c(r(22));function c(e){return e&&e.__esModule?e:{default:e}}const l=`${u.default.settings.CDN_BASEURL}/anti-tracking/whitelist/versioncheck.json`,d=`${u.default.settings.CDN_BASEURL}/anti-tracking/config.json`,h=(t.VERSION="0.102",t.MIN_BROWSER_VERSION=35,t.TELEMETRY={DISABLED:0,TRACKERS_ONLY:1,ALL:2}),f=t.DEFAULTS={safekeyValuesThreshold:4,shortTokenLength:6,placeHolder:u.default.settings.antitrackingPlaceholder,cliqzHeader:u.default.settings.antitrackingHeader,enabled:!0,cookieEnabled:!0,qsEnabled:!0,bloomFilterEnabled:!0,telemetryMode:h.ALL,sendAntiTrackingHeader:!0,blockCookieNewToken:!1,tpDomainDepth:2},p=t.PREFS={enabled:"modules.antitracking.enabled",cookieEnabled:"attrackBlockCookieTracking",qsEnabled:"attrackRemoveQueryStringTracking",fingerprintEnabled:"attrackCanvasFingerprintTracking",referrerEnabled:"attrackRefererTracking",trackerTxtEnabled:"trackerTxt",bloomFilterEnabled:"attrackBloomFilter",forceBlockEnabled:"attrackForceBlock",overrideUserAgent:"attrackOverrideUserAgent",cookieTrustReferers:"attrackCookieTrustReferers",telemetryMode:"attrackTelemetryMode",sendAntiTrackingHeader:"attrackSendHeader"},m=["blockRules","reportList","cookieWhitelist","subdomainRewriteRules","compatibilityList"];t.default=class{constructor(e){var t=e.defaults;let r=void 0===t?f:t;var i=e.versionUrl;let s=void 0===i?l:i;this.debugMode=!1,this.versionCheckUrl=s,this.tokenDomainCountThreshold=2,this.safeKeyExpire=7,this.localBlockExpire=24,Object.assign(this,r),this.safekeyValuesThreshold=parseInt(n.getValue("safekeyValuesThreshold"),10)||this.safekeyValuesThreshold,this.shortTokenLength=parseInt(n.getValue("shortTokenLength"),10)||this.shortTokenLength,this.paused=!1,this.loadPrefs()}loadPrefs(){Object.keys(p).forEach(e=>{this[e]=o.default.get(p[e],this[e]||!1)})}setPref(e,t){if(!p[e])throw new Error(`pref ${e} not known`);o.default.set(p[e],t)}onPrefChange(e){Object.keys(p).map(e=>p[e]).indexOf(e)>-1&&this.loadPrefs()}init(){const e=new s.default(["antitracking","versioncheck.json"],{remoteURL:this.versionCheckUrl,cron:432e5,remoteOnly:!0});a.default.addResourceLoader(e,this._updateVersionCheck.bind(this));const t=new s.default(["antitracking","config.json"],{remoteURL:d,cron:432e5});return a.default.addResourceLoader(t,this._updateConfig.bind(this)),Promise.resolve()}unload(){}_updateVersionCheck(e){e.shortTokenLength&&(n.setValue("shortTokenLength",e.shortTokenLength),this.shortTokenLength=parseInt(e.shortTokenLength,10)||this.shortTokenLength),e.safekeyValuesThreshold&&(n.setValue("safekeyValuesThreshold",e.safekeyValuesThreshold),this.safekeyValuesThreshold=parseInt(e.safekeyValuesThreshold,10)||this.safekeyValuesThreshold),i.default.pub("attrack:updated_config",e)}_updateConfig(e){m.forEach(t=>{this[t]=e[t]})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(69));t.default=n.default.get("human-web",{level:"error"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this._messageQueue=[],this._callbacks={}}enqueueMessage(e,t){this._messageQueue.some(t=>t.id===e.id)||(this._messageQueue.push(e),this._callbacks[e.id]=t,1===this._messageQueue.length&&this._renderMessage(e))}dequeueMessage(e){let t=this._messageQueue.indexOf(e);if(-1===t){const r=this._messageQueue.find(t=>t.id===e.id);r&&(e=r,t=this._messageQueue.indexOf(e))}0===t?this.showNextMessage():t>-1&&(this._messageQueue.splice(t,1),delete this._callbacks[e.id])}showNextMessage(){const e=this._messageQueue.shift();e&&(delete this._callbacks[e.id],this._hideMessage(e),this._messageQueue.length>0&&this._renderMessage(this._messageQueue[0]))}_renderMessage(){throw new Error("_renderMessage not implemented")}_hideMessage(){throw new Error("_hideMessage not implemented")}}},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(248),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(17))},,,,,,function(e,t,r){var n=r(213),i=r(642),s=r(641),a="[object Null]",o="[object Undefined]",u=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?o:a:u&&u in Object(e)?i(e):s(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this._name=e}get name(){return this._name}process(){throw new Error("should be implemented by the inheritance class")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildCachedMap=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(774));class i{constructor(){this.data=new Map}init(){return Promise.resolve()}unload(){this.data.clear()}get(e){return this.data.get(e)}set(e,t){this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}clear(){this.data.clear()}size(){return this.data.size}keys(){return[...this.data.keys()]}entries(){return[...this.data.entries()]}}t.default=i;t.buildCachedMap=((e,t)=>t?new n.default(e):new i)},function(e,t,r){"use strict";var n=r(228),i=r(227),s=r(233),a=r(240);t.reduce=function(e,t){return arguments.length>=2?function(r){return a.pipe(n.scan(e,t),i.takeLast(1),s.defaultIfEmpty(t))(r)}:function(t){return a.pipe(n.scan(function(t,r,n){return e(t,r,n+1)}),i.takeLast(1))(t)}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ArgumentOutOfRangeError=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.map=function(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new s(e,t))}};var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}();t.MapOperator=s;var a=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return n(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(r(1070).Scheduler);t.AsyncScheduler=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(54),s=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return n(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;i.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(r(1071).Action);t.AsyncAction=s},function(e,t,r){"use strict";var n=r(77);t.isNumeric=function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(20),s=r(21);t.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return"number"==typeof t&&(r=t,t=null),n.lift(new a(e,t,r))}};var a=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=a;var o=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(i.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._notifyResultSelector(e,t,r,n):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(s.OuterSubscriber);t.MergeMapSubscriber=o},function(e,t,r){"use strict";var n=r(4),i=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();t.Notification=i},function(e,t,r){"use strict";var n=r(75),i=r(397),s=r(396),a=r(237);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length||2===e.length&&n.isScheduler(e[1])?s.from(e[0]):a.concatAll()(i.of.apply(void 0,e))}},function(e,t,r){"use strict";var n=r(54);function i(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=e.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),s=0;s<i.length;++s){var a=i[s];if("entries"!==a&&"size"!==a&&n.prototype[a]===n.prototype.entries)return a}return"@@iterator"}t.symbolIteratorPonyfill=i,t.iterator=i(n.root),t.$$iterator=t.iterator},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressionAvailable=function(){return!1!==i.compress},t.compressJSONToBase64=function(e){const t=(0,i.compress)(JSON.stringify(e));return(0,n.toBase64)(t)},t.splitTelemetryData=function(e,t){let r=0,n={};const i=[];for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const a=JSON.stringify(e[s]).length;0!==r&&r+a>t&&(i.push(n),n={},r=0),r+=a,n[s]=e[s]}Object.keys(n).length>0&&i.push(n);return i},t.generatePayload=u,t.cleanTimestampCache=function(e,t,r){Object.keys(e).forEach(n=>{(r-e[n]||t<0)&&delete e[n]})},t.generateAttrackPayload=function(e,t,r){const n=r;return n.ver=s.VERSION,n.ctry=o.default.get("config_location","--"),t=t||(0,a.getHourTimestamp)(),u(e,t,!1,n)},t.truncateDomain=function(e,t){const r=e.domain;if(e.isIp||e.hostname===r||0===r.length)return e.hostname;const n=e.subdomain.split(".").filter(e=>e.length>0);return`${n.slice(Math.max(n.length-t,0)).join(".")}.${r}`};var n=r(146),i=r(440),s=r(121),a=r(65),o=function(e){return e&&e.__esModule?e:{default:e}}(r(11));function u(e,t,r,n){const i={data:e,ts:t};if(r&&(i.instant=!0),n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e]);return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r(11)),i=m(r(1145)),s=m(r(47)),a=m(r(22)),o=m(r(80)),u=m(r(1144)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(414)),l=m(r(24)),d=r(1142),h=m(r(1141)),f=m(r(245)),p=r(1139);function m(e){return e&&e.__esModule?e:{default:e}}let _=0;const g={CHANNEL:a.default.settings.HPN_CHANNEL,VERSION:"0.1",LOG_KEY:"securemessage",debug:!1,counter:0,secureLogger:{},uPK:{},dsPK:{},routeTable:null,routeTableLoader:null,RSAKey:"",eventID:{},sourceMap:null,sourceMapLoader:null,tmult:4,tpace:250,SOURCE_MAP_PROVIDER:a.default.settings.ENDPOINT_SOURCE_MAP_PROVIDER,LOOKUP_TABLE_PROVIDER:a.default.settings.ENDPOINT_LOOKUP_TABLE_PROVIDER,KEYS_PROVIDER:a.default.settings.ENDPOINT_KEYS_PROVIDER,proxyList:null,proxyStats:{},BLIND_SIGNER:a.default.settings.ENDPOINT_BLIND_SIGNER,USER_REG:a.default.settings.ENDPOINT_USER_REG,localTemporalUniq:null,wCrypto:null,queriesID:{},servicesToProxy:["api.cliqz.com","antiphishing.cliqz.com","collector-hpn.cliqz.com"],proxyInfoObj:{},queryProxyFilter:null,pacemaker(){if(g.counter+=1,g.counter/g.tmult%10==0&&g.debug&&l.default.log(`Pacemaker: ${g.counter/g.tmult}`,g.LOG_KEY),g.counter/g.tmult%5==0){const e=Date.now();if(!s.default.getWindow()||!s.default.getWindow().CLIQZ||!s.default.getWindow().CLIQZ.UI)return;const t=e-s.default.getWindow().CLIQZ.UI.lastInputTime;t>0&&t>2e3&&g.proxyIP(),g.uPK.publicKeyB64&&g.uPK.privateKey||g.registerUser()}g.counter/g.tmult%900==0&&(g.debug&&l.default.log("Clean local temp queue",g.LOG_KEY),c.prunelocalTemporalUniq())},trk:[],trkTimer:null,telemetry(e,t){g&&!n.default.get("humanWebOptOut",!1)&&(e&&g.trk.push(e),clearTimeout(g.trkTimer),t||g.trk.length%20==0?g.pushTelemetry():g.trkTimer=setTimeout(g.pushTelemetry,1e4))},_telemetry_req:null,telemetry_MAX_SIZE:500,previousDataPost:null,pushMessage:[],routeHashTable:null,queryProxyIP:null,performance:null,pushTelemetry(){const e=g.trk.splice(0);return g.messageSender.send(e)},initAtWindow(){},init(){null==g.pacemakerId&&(g.pacemakerId=setInterval(g.pacemaker.bind(this),g.tpace,null)),this.storage=new i.default(this),g.localTemporalUniq||this.storage.loadLocalCheckTable(),this.sourceMapLoader=new o.default(["hpn","sourcemap.json"],{remoteURL:g.SOURCE_MAP_PROVIDER}),this.sourceMapLoader.load().then(e=>{g.sourceMap=e}),this.sourceMapLoader.onUpdate(e=>{g.sourceMap=e}),this.routeTableLoader=new o.default(["hpn","routeTableV2.json"],{remoteURL:g.LOOKUP_TABLE_PROVIDER,cron:3e5,updateInterval:3e5}),this.routeTableLoader.load().then(e=>{g._updateRoutingInfo(e)}).catch(e=>{g.debug&&l.default.error("Failed to update initial routeTable",e)}),this.routeTableLoader.onUpdate(e=>{g._updateRoutingInfo(e)}),g.dsPK.pubKeyB64=a.default.settings.KEY_DS_PUBKEY,g.secureLogger.publicKeyB64=a.default.settings.KEY_SECURE_LOGGER_PUBKEY,n.default.get("proxyNetwork",!0)&&(0,d.overRideCliqzResults)(),g.registerUser(),g.queryProxyFilter=new h.default,g.queryProxyFilter.init(),this.messageSender=new u.default},unload(){g.queryProxyFilter.unload(),this.storage.saveLocalCheckTable(),this.messageSender.stop({quick:!0}),this.sourceMapLoader.stop(),this.routeTableLoader.stop(),clearTimeout(g.pacemakerId),this.storage.close()},proxyIP(){if(!g.proxyList)return;_>=g.proxyList.length&&(_=0);const e=g.proxyList[_],t=(0,p.getProxyVerifyUrl)({host:e.dns,ip:e.ip,supportsHttps:e.ssl});return g.queryProxyIP=t,_+=1,t},registerUser(){this.storage.loadKeys().then(e=>{if(e)g.uPK.publicKeyB64=e.publicKey,g.uPK.privateKey=e.privateKey;else{const e=new f.default;e.onmessage=(t=>{if(t.data.status){const e={};e.privateKey=t.data.privateKey,e.publicKey=t.data.publicKey,e.ts=Date.now(),this.storage.saveKeys(e).then(e=>{e.status&&(g.uPK.publicKeyB64=e.data.publicKey,g.uPK.privateKey=e.data.privateKey)})}e.terminate()}),e.postMessage({type:"user-key"})}})},_updateRoutingInfo(e){g.routeTable=e[g.CHANNEL],g.proxyList=(0,p.createProxyList)(g.routeTable),l.default.log("Updated proxy list and routing table",g.LOG_KEY),g.proxyIP()}};t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let r=!0,i=null;const s=(()=>{var a=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){if(r)try{yield e()}catch(e){n.default.error(e)}r&&(i=setTimeout(s,t))});return function(){return a.apply(this,arguments)}})();return i=setTimeout(s,t),{stop:()=>{r=!1,clearTimeout(i)}}};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(24))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toByteArray=t.fromUTF8=t.toUTF8=t.fromHex=t.toHex=t.fromBase64=t.toBase64=void 0;var n=s(r(1188)),i=s(r(1187));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function o(e){const t=[],r=e.length;for(let n=0;n<r;n+=32767)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32767)));return t.join("")}function u(e){const t=new Uint8Array(e.length),r=e.length;for(let n=0;n<r;n+=1)t[n]=e.charCodeAt(n);return t}const c=i.default?new i.default:{decode:function(e){return decodeURIComponent(escape(o(e)))}};const l=n.default?new n.default:{encode:function(e){return u(unescape(encodeURIComponent(e)))}};const d="undefined"!=typeof btoa?function(e){return btoa(o(a(e)))}:function(e){const t=[0,2,1],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=(e=a(e)).byteLength,i=4*Math.floor((n+2)/3),s=new Array(i);for(let t=0,i=0;t<n;){const a=((t<n?e[t++]:0)<<16)+((t<n?e[t++]:0)<<8)+(t<n?e[t++]:0);s[i++]=r[a>>18&63],s[i++]=r[a>>12&63],s[i++]=r[a>>6&63],s[i++]=r[a>>0&63]}for(let e=0;e<t[n%3];e++)s[i-1-e]="=";return s.join("")},h="undefined"!=typeof atob?function(e){return u(atob(e))}:function(e){const t=[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62,,,,63,52,53,54,55,56,57,58,59,60,61,,,,,,,,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,,,,,,,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],r=e.length;if(r%4!=0)return null;let n=3*Math.floor(r/4);"="===e[r-1]&&n--,"="===e[r-2]&&n--;const i=new Uint8Array(n);for(let s=0,a=0;s<r;){const r=(("="===e[s]?0&s++:t[e[s++].charCodeAt()])<<18)+(("="===e[s]?0&s++:t[e[s++].charCodeAt()])<<12)+(("="===e[s]?0&s++:t[e[s++].charCodeAt()])<<6)+(("="===e[s]?0&s++:t[e[s++].charCodeAt()])<<0);a<n&&(i[a++]=r>>16&255),a<n&&(i[a++]=r>>8&255),a<n&&(i[a++]=r>>0&255)}return i};t.toBase64=d,t.fromBase64=h,t.toHex=function(e){const t=(e=a(e)).byteLength,r=[];for(let n=0;n<t;++n)r[2*n]="0123456789abcdef"[e[n]>>4],r[2*n+1]="0123456789abcdef"[15&e[n]];return r.join("")},t.fromHex=function(e){const t=[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,5,6,7,8,9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10,11,12,13,14,15];if((e=e.toLowerCase()).length%2!=0)throw new Error(`fromHex: ${e} has odd length`);const r=e.length/2,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=t[e[2*i].charCodeAt()]<<4|t[e[2*i+1].charCodeAt()];return n},t.toUTF8=function(e){return l.encode(e)},t.fromUTF8=function(e){return c.decode(a(e))},t.toByteArray=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.randomInt=function(){return Math.floor(i()*Number.MAX_SAFE_INTEGER)};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(425));function i(){const e=n.default.getRandomValues(new Uint32Array(2));return(Math.pow(2,32)*(2097151&e[0])+e[1])/Math.pow(2,53)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1200));t.default=class{constructor(e,t,r){this._buildValue=e,this._buildKey=r,this._maxKeySize=1e3,this._hitCounter=0,this._missCounter=0,this.lru=new n.default(t)}get(e){const t=this._buildKey?this._buildKey(e):e;let r=this.lru.get(t);return void 0!==r?(this._hitCounter+=1,r):(this._missCounter+=1,r=this._buildValue(e),!t||t.length>this._maxKeySize?r:(this.lru.set(t,r),r))}}},,,function(e,t,r){var n=r(587);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){var n=r(210)(Object,"create");e.exports=n},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(153);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(611),i=r(610),s=r(609),a=r(608),o=r(607);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=a,u.prototype.set=o,e.exports=u},function(e,t,r){var n=r(211),i=r(273);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var n=r(645);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={AID_OFFER_DB_ADDED:"offer_added",AID_OFFER_TRIGGERED:"offer_triggered",AID_OFFER_PUSHED:"offer_pushed",AID_OFFER_NOTIF_T:"offer_notif_tooltip",AID_OFFER_NOTIF_T_E:"offer_notif_tooltip_extra",AID_OFFER_NOTIF_P:"offer_notif_popup",AID_OFFER_NOTIF_D:"offer_notif_dot",AID_OFFER_FILTERED:"offer_filtered",AID_OFFER_DISPLAY_SESSION:"offer_dsp_session",AID_OFFER_SHOWN:"offer_shown",AID_OFFER_TIMEOUT:"offer_timeout",AID_OFFER_CLOSED:"offer_closed",AID_OFFER_REMOVED:"offer_removed",AID_OFFER_DB_REMOVED:"offer_db_removed",AID_OFFER_EXPIRED:"offer_expired",AID_OFFER_MORE_ABT_CLIQZ:"more_about_cliqz",AID_OFFER_MORE_INFO:"offer_more_info",AID_OFFER_CALL_TO_ACTION:"offer_ca_action",AID_OFFER_LOGO:"offer_logo",AID_OFFER_PICTURE:"offer_picture",AID_OFFER_BENEFIT:"offer_benefit",AID_OFFER_HEADLINE:"offer_headline",AID_OFFER_TITLE:"offer_title",AID_OFFER_DESCRIPTION:"offer_description",AID_OFFER_CODE_COPIED:"code_copied",AID_OFFER_EXPANDED:"offer_expanded",AID_OFFER_HUB_PULLED:"offer_pulled",AID_OFFER_HUB_FB_NO_OPT:"feedback_no",AID_OFFER_HUB_FB_OPT_1:"feedback_option1",AID_OFFER_HUB_FB_OPT_2:"feedback_option2",AID_OFFER_HUB_FB_OPT_3:"feedback_option3",AID_OFFER_HUB_REMOVE_LINK:"remove_offer_link",AID_OFFER_HUB_CANCEL_REMOVE_LINK:"remove_offer_cancel",AID_OFFER_HUB_TOOLTIP_CLICKED:"tooltip_clicked",AID_OFFER_HUB_TOOLTIP_CLOSED:"tooltip_closed",AID_OFFER_HUB_TOOLTIP_SHOWN:"tooltip_shown",AID_OFFER_HUB_POP_UP:"hub_pop_up",AID_OFFER_HUB_OPEN:"hub_open",AID_OFFER_HUB_CLOSED:"hub_closed",AID_OFFER_HUB_SHOW_MORE_OFFERS:"show_more_offers",AID_OFFER_DD_OFFER_SHOWN_1:"offer_shown_1",AID_OFFER_DD_OFFER_SHOWN_2:"offer_shown_2",AID_OFFER_DD_OFFER_CA_ACTION_1:"offer_ca_action_1",AID_OFFER_DD_OFFER_CA_ACTION_2:"offer_ca_action_2",AID_OFFER_DD_OFFER_DSP_SESSION_1:"offer_dsp_session_1",AID_OFFER_DD_OFFER_DSP_SESSION_2:"offer_dsp_session_2",AID_OFFER_DD_OFFER_SHOWN_ATTACHED:"offer_shown_attached",AID_OFFER_DD_OFFER_CA_ACTION_ATTACHED:"offer_ca_action_attached",AID_OFFER_DD_OFFER_DSP_SESSION_ATTACHED:"offer_dsp_session_attached"}},function(e,t,r){"use strict";function n(e){return e}Object.defineProperty(t,"__esModule",{value:!0});function i(e){const t=e.sort();let r=1;for(let e=1;e<t.length;e+=1)t[r-1]!==t[e]&&(t[r]=t[e],r+=1);return t.subarray(0,r)}function s(e,t){return!!(e&t)}function a(e,t){return e|t}function o(e,t){return e&~t}function u(e){if(!e)return 0;let t=5407;for(let r=0;r<e.length;r+=1)t=31*t^e.charCodeAt(r);return t>>>0}function c(e,t){if(e.length<t.length)return!1;const r=t.length;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}function l(e){return function(e){return e>=48&&e<=57}(e)||function(e){return(e&=-33)>=65&&e<=90}(e)||function(e){return e>=192&&e<=450}(e)}function d(e){return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[];let i=!1,s=0,a=0;for(let o=0,c=e.length;o<c;o+=1){const c=e.charCodeAt(o);t(c)?(i||(i=!0,s=o,a=0),a+=1):i&&(i=!1,(r||42!==c)&&n.push(u(e.substr(s,a))))}return i&&n.push(u(e.substr(s,a))),n}(e,l,!1)}function h(e){return i(new Uint32Array(d(e)))}function f(e,t){const r=t.indexOf(e);return 0===r&&(t.length===e.length||"."===e[e.length-1]||"."===t[e.length])||r>0&&"."===t[r-1]}function p(e,t){return e.substring(e.indexOf(t)+t.length)}function m(e,t){const r=e.getFuzzySignature();void 0===t.fuzzySignature&&(t.fuzzySignature=h(t.url));const n=t.fuzzySignature;if(r.length>n.length)return!1;let i=0;for(let e=0;e<r.length;e+=1){const t=r[e],s=n.indexOf(t,i);if(-1===s)return!1;i=s+1}return!0}function _(e,t){let r=t.url;return e.getRegex().test(r)}function g(e,t){return e.isHostnameAnchor()?e.isRegex()?function(e,t){let r=t.url,n=t.hostname;if(f(e.getHostname(),n))return _(e,{url:p(r,e.getHostname())});return!1}(e,t):e.isRightAnchor()?function(e,t){let r=t.url,n=t.hostname;if(f(e.getHostname(),n)){const t=p(r,e.getHostname());return e.getFilter()===t}return!1}(e,t):e.isFuzzy()?function(e,t){const r=t.hostname;return!!f(e.getHostname(),r)&&m(e,t)}(e,t):function(e,t){let r=t.url,n=t.hostname;if(f(e.getHostname(),n))return c(p(r,e.getHostname()),e.getFilter());return!1}(e,t):e.isRegex()?_(e,t):e.isLeftAnchor()&&e.isRightAnchor()?function(e,t){return t.url===e.getFilter()}(e,t):e.isLeftAnchor()?function(e,t){return c(t.url,e.getFilter())}(e,t):e.isRightAnchor()?function(e,t){return t.url.endsWith(e.getFilter())}(e,t):e.isFuzzy()?m(e,t):function(e,t){return-1!==t.url.indexOf(e.getFilter())}(e,t)}const y=131071,v={1:16,2:64,3:1,4:128,5:4,7:256,10:32,11:1024,12:8,13:4096,14:8192,15:2,16:512,17:65536,18:16384,19:32768,20:2048,21:1},b=/[/^*]/;function $(e){return new Set(e?e.split("|"):[])}class w{constructor(e){let t=e.mask,r=e.filter,n=e.optDomains,i=e.optNotDomains,s=e.redirect,a=e.hostname,o=e.id;this.id=o,this.mask=t,this.filter=r,this.optDomains=n,this.optNotDomains=i,this.redirect=s,this.hostname=a,this.fuzzySignature=null,this.optDomainsSet=null,this.optNotDomainsSet=null,this.regex=null,this.rawLine=null}isCosmeticFilter(){return!1}isNetworkFilter(){return!0}toString(){let e="";this.isException()&&(e+="@@"),this.isHostnameAnchor()&&(e+="||"),this.isLeftAnchor()&&(e+="|"),this.hasHostname()&&(e+=this.getHostname(),e+="^"),this.isRegex()?e+=this.getRegex().source:e+=this.getFilter();const t=[];if(this.fromAny()||(this.isFuzzy()&&t.push("fuzzy"),this.fromImage()&&t.push("image"),this.fromMedia()&&t.push("media"),this.fromObject()&&t.push("object"),this.fromObjectSubrequest()&&t.push("object-subrequest"),this.fromOther()&&t.push("other"),this.fromPing()&&t.push("ping"),this.fromScript()&&t.push("script"),this.fromStylesheet()&&t.push("stylesheet"),this.fromSubdocument()&&t.push("subdocument"),this.fromWebsocket()&&t.push("websocket"),this.fromXmlHttpRequest()&&t.push("xmlhttprequest"),this.fromFont()&&t.push("font")),this.isImportant()&&t.push("important"),this.isRedirect()&&t.push(`redirect=${this.getRedirect()}`),this.firstParty()!==this.thirdParty()&&(this.firstParty()&&t.push("first-party"),this.thirdParty()&&t.push("third-party")),this.hasOptDomains()||this.hasOptNotDomains()){const e=[...this.getOptDomains()];this.getOptNotDomains().forEach(t=>e.push(`~${t}`)),t.push(`domain=${e.join("|")}`)}return t.length>0&&(e+=`$${t.join(",")}`),this.isRightAnchor()&&(e+="|"),e}hasFilter(){return!!this.filter}hasOptNotDomains(){return!!this.optNotDomains}getOptNotDomains(){return this.optNotDomainsSet=this.optNotDomainsSet||$(this.optNotDomains),this.optNotDomainsSet}hasOptDomains(){return!!this.optDomains}getOptDomains(){return this.optDomainsSet=this.optDomainsSet||$(this.optDomains),this.optDomainsSet}getMask(){return this.mask}isRedirect(){return!!this.redirect}getRedirect(){return this.redirect}hasHostname(){return!!this.hostname}getHostname(){return this.hostname}getFilter(){return this.filter}setRegex(e){this.regex=e,this.mask=a(this.mask,16777216),this.mask=o(this.mask,8388608)}getRegex(){return null===this.regex&&(this.regex=function(e,t,r,n){let i=e;return i=(i=(i=i.replace(/([|.$+?{}()[\]\\])/g,"\\$1")).replace(/\*/g,".*")).replace(/\^/g,"(?:[^\\w\\d_.%-]|$)"),t&&(i=`${i}$`),r&&(i=`^${i}`),n?new RegExp(i):new RegExp(i,"i")}(this.filter,this.isRightAnchor(),this.isLeftAnchor(),this.matchCase())),this.regex}getFuzzySignature(){return null===this.fuzzySignature&&(this.fuzzySignature=h(this.filter)),this.fuzzySignature}getTokens(){return d(this.filter).concat(d(this.hostname))}isCptAllowed(e){const t=v[e];return void 0===t||s(this.mask,t)}isFuzzy(){return s(this.mask,524288)}isException(){return s(this.mask,268435456)}isHostnameAnchor(){return s(this.mask,134217728)}isRightAnchor(){return s(this.mask,67108864)}isLeftAnchor(){return s(this.mask,33554432)}matchCase(){return s(this.mask,262144)}isImportant(){return s(this.mask,131072)}isRegex(){return s(this.mask,16777216)}isPlain(){return!s(this.mask,16777216)}isHostname(){return s(this.mask,4194304)}fromAny(){return(this.mask&y)===y}thirdParty(){return s(this.mask,1048576)}firstParty(){return s(this.mask,2097152)}fromImage(){return s(this.mask,1)}fromMedia(){return s(this.mask,2)}fromObject(){return s(this.mask,4)}fromObjectSubrequest(){return s(this.mask,8)}fromOther(){return s(this.mask,16)}fromPing(){return s(this.mask,32)}fromScript(){return s(this.mask,64)}fromStylesheet(){return s(this.mask,128)}fromSubdocument(){return s(this.mask,256)}fromWebsocket(){return s(this.mask,512)}fromXmlHttpRequest(){return s(this.mask,1024)}fromFont(){return s(this.mask,8192)}}function k(e,t,r){return r?a(e,t):o(e,t)}function M(e,t,r){const n=e.indexOf("*",t),i=e.indexOf("^",t);return-1!==n&&n<r||-1!==i&&i<r}t.ReverseIndex=class{constructor(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.optimizer;let s=void 0===i?n:i;var a=r.multiKeys;let o=void 0!==a&&a;this.index=new Map,this.size=0,this.optimizer=s,this.getTokens=t,this.multiKeys=o||!1,this.addFilters(e||[])}iterMatchingFilters(e,t){for(let r=0;r<e.length;r+=1)if(!1===this.iterBucket(e[r],t))return;this.iterBucket(0,t)}report(){const e=new Map;let t="";return this.index.forEach((r,n)=>{const i=r.filters;e.set(i.length,(e.get(i.length)||0)+1),length>5&&(t=t.concat(`adblocker size bucket "${n}" => ${i.length}\n`),i.forEach(e=>{t=t.concat(`    ${e.toString()} ${e.mask}\n`)}))}),e.forEach((e,r)=>{t=t.concat(`adblocker sizes ${r} => ${e} buckets\n`)}),t}optimizeAheadOfTime(){this.optimizer&&this.index.forEach(e=>{this.optimize(e,!0)})}addFilters(e){const t=e.length;this.size=t;const r=new Map,n=new Map;for(let t=0;t<e.length;t+=1){const i=e[t],s=this.multiKeys?this.getTokens(i):[this.getTokens(i)];r.set(i.id,s);for(let e=0;e<s.length;e+=1){const t=s[e];for(let e=0;e<t.length;e+=1){const r=t[e];n.set(r,(n.get(r)||0)+1)}}}for(let i=0;i<e.length;i+=1){let s=!1;const a=e[i],o=r.get(a.id);for(let e=0;e<o.length;e+=1){const r=o[e];let i=0,u=t;for(let e=0;e<r.length;e+=1){const t=r[e],s=n.get(t);s<u&&(i=t,u=s)}if(0===i){if(s)continue;s=!0}const c=this.index.get(i);void 0===c?this.index.set(i,{filters:[a],hit:0,optimized:!1}):c.filters.push(a)}}}optimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.optimizer&&!e.optimized&&(t||e.hit>=5)&&(e.filters.length>1&&(e.filters=this.optimizer(e.filters)),e.optimized=!0)}iterBucket(e,t){const r=this.index.get(e);if(void 0!==r){r.hit+=1,this.optimize(r);const e=r.filters;for(let r=0;r<e.length;r+=1)if(!1===t(e[r]))return!1}return!0}},t.matchNetworkFilter=function(e,t){return function(e,t){if(!e.isCptAllowed(t.cpt))return!1;const r=t.sourceHostname,n=t.sourceGD,i=n===t.hostGD;if(!e.firstParty()&&i)return!1;if(!e.thirdParty()&&!i)return!1;if(e.hasOptDomains()){const t=e.getOptDomains();if(t.size>0&&!t.has(n)&&!t.has(r))return!1}if(e.hasOptNotDomains()){const t=e.getOptNotDomains();if(t.size>0&&(t.has(n)||t.has(r)))return!1}return!0}(e,t)&&g(e,t)},t.parseNetworkFilter=function(e){const t=e;let r=3145728,n=null,i=null,l="",d="",h="",f=!1,p=0,m=t.length;c(t,"@@")&&(p+=2,r=a(r,268435456));const _=t.indexOf("$",p);if(-1!==_){m=_;const e=t.substr(_+1).split(",");for(let t=0;t<e.length;t+=1){let n=!1,i=e[t];c(i,"~")?(n=!0,i=i.substr(1)):n=!1;let s=[];if(-1!==i.indexOf("=")){const e=i.split("=",2);i=e[0],s=e[1].split("|")}switch(i){case"domain":{const e=[],t=[];for(let r=0;r<s.length;r+=1){const n=s[r];n&&(c(n,"~")?t.push(n.substr(1)):e.push(n))}e.length>0&&(l=e.join("|")),t.length>0&&(d=t.join("|"));break}case"image":f=!0,r=k(r,1,!n);break;case"media":f=!0,r=k(r,2,!n);break;case"object":f=!0,r=k(r,4,!n);break;case"object-subrequest":f=!0,r=k(r,8,!n);break;case"other":f=!0,r=k(r,16,!n);break;case"ping":f=!0,r=k(r,32,!n);break;case"script":f=!0,r=k(r,64,!n);break;case"stylesheet":f=!0,r=k(r,128,!n);break;case"subdocument":f=!0,r=k(r,256,!n);break;case"xmlhttprequest":f=!0,r=k(r,1024,!n);break;case"websocket":f=!0,r=k(r,512,!n);break;case"font":f=!0,r=k(r,8192,!n);break;case"important":if(n)return null;r=a(r,131072);break;case"match-case":if(n)return null;r=a(r,262144);break;case"third-party":r=o(r,n?1048576:2097152);break;case"first-party":r=o(r,n?2097152:1048576);break;case"fuzzy":r=a(r,524288);break;case"collapse":break;case"redirect":if(n)return null;if(0===s.length)return null;h=s[0];break;default:return null}}}if(!1===f&&(r=a(r,y)),c(t,"127.0.0.1"))i=t.substr(t.lastIndexOf(" ")+1),n="",r=a(r=a(r=o(r,16777216),4194304),134217728);else{"|"===t[m-1]&&(r=a(r,67108864),m-=1),function(e,t,r){if(e.length-r<t.length)return!1;const n=r+t.length;for(let i=r;i<n;i+=1)if(e[i]!==t[i-r])return!1;return!0}(t,"||",p)?(r=a(r,134217728),p+=2):"|"===t[p]&&(r=a(r,33554432),p+=1),"*"===t.charAt(m-1)&&m-p>1&&(m-=1);const e=M(t,p,m),u=s(r=k(r,16777216,e),134217728);if(!e&&u){const e=t.indexOf("/",p);-1!==e?(i=t.substring(p,e),p=e):(i=t.substring(p,m),n="")}else if(e&&u){const e=t.search(b);-1!==e&&(i=t.substring(p,e),m-(p=e)==1&&"^"===t.charAt(p)?(n="",r=o(r,16777216)):r=k(r,16777216,M(t,p,m)))}}null===n&&(n=t.substring(p,m).toLowerCase());let g="";null!==i&&(g=i);let v="";null!==n&&(v=n),s(r,134217728)&&c(g,"www.")&&(g=g.slice(4)),""!==g&&(g=g.toLowerCase());const $=u(t);return new w({filter:v,hostname:g,id:$,mask:r,optDomains:l,optNotDomains:d,redirect:h})},t.mkRequest=function(e){var t=e.url;let r=void 0===t?"":t;var n=e.hostname;let i=void 0===n?"":n;var s=e.domain;let a=void 0===s?"":s;var o=e.sourceHostname;let u=void 0===o?"":o;var c=e.sourceDomain;let l=void 0===c?"":c;var h=e.cpt;return{cpt:void 0===h?6:h,tokens:d(r),sourceGD:l,sourceHostname:u,hostGD:a,hostname:i,url:r.toLowerCase()}},t.tokenize=d,t.compactTokens=i,t.hasEmptyIntersection=function(e,t){let r=0,n=0;for(;r<e.length&&n<t.length&&e[r]!==t[n];)e[r]<t[n]?r+=1:t[n]<e[r]&&(n+=1);return!(r<e.length&&n<t.length)},t.mergeCompactSets=function(){return i(function(){let e=0;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];for(let t=0;t<r.length;t+=1)e+=r[t].length;const i=new Uint32Array(e);let s=0;for(let e=0;e<r.length;e+=1){const t=r[e];for(let e=0;e<t.length;e+=1)i[s]=t[e],s+=1}return i}(...arguments))}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.defaultThrottleConfig={leading:!0,trailing:!1},t.throttle=function(e,r){return void 0===r&&(r=t.defaultThrottleConfig),function(t){return t.lift(new a(e,r.leading,r.trailing))}};var a=function(){function e(e,t,r){this.durationSelector=e,this.leading=t,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.durationSelector,this.leading,this.trailing))},e}(),o=function(e){function t(t,r,n,i){e.call(this,t),this.destination=t,this.durationSelector=r,this._leading=n,this._trailing=i,this._hasTrailingValue=!1}return n(t,e),t.prototype._next=function(e){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e);else{var t=this.tryDurationSelector(e);t&&this.add(this.throttled=s.subscribeToResult(this,t)),this._leading&&(this.destination.next(e),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e))}},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype._unsubscribe=function(){var e=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing;this._trailingValue=null,this._hasTrailingValue=!1,e&&(this.remove(e),this.throttled=null,e.unsubscribe())},t.prototype._sendTrailing=function(){var e=this,t=e.destination,r=e.throttled,n=e._trailing,i=e._trailingValue,s=e._hasTrailingValue;r&&n&&s&&(t.next(i),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(e,t,r,n,i){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.EmptyError=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(390),a=r(46),o=r(168),u=r(171),c=r(400),l=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=n,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r}return n(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new d(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),n&&e.add(e=new o.ObserveOnSubscriber(e,n));for(var i=r.length,s=0;s<i&&!e.closed;s++)e.next(r[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||s.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,s=0;s<i&&!(e-n[s].time<r);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&n.splice(0,s),n},t}(i.Subject);t.ReplaySubject=l;var d=function(){return function(e,t){this.time=e,this.value=t}}()},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(90),s=r(77),a=r(14),o=r(21),u=r(20),c=r(142);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),new i.ArrayObservable(e).lift(new d(r))}t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(l.apply(void 0,[t].concat(e)))}},t.zipStatic=l;var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))},e}();t.ZipOperator=d;var h=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof r?r:null,this.values=n}return n(t,e),t.prototype._next=function(e){var t=this.iterators;s.isArray(e)?t.push(new p(e)):"function"==typeof e[c.iterator]?t.push(new f(e[c.iterator]())):t.push(new m(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(a=e[n]).hasValue&&!a.hasValue())return}var i=!1,s=[];for(n=0;n<t;n++){var a,o=(a=e[n]).next();if(a.hasCompleted()&&(i=!0),o.done)return void r.complete();s.push(o.value)}this.project?this._tryProject(s):r.next(s),i&&r.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(a.Subscriber);t.ZipSubscriber=h;var f=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),p=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(e){function t(t,r,n){e.call(this,t),this.parent=r,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return n(t,e),t.prototype[c.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return u.subscribeToResult(this,this.observable,this,t)},t}(o.OuterSubscriber)},function(e,t,r){"use strict";t.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},function(e,t,r){"use strict";var n=r(4),i=r(90),s=r(75),a=r(167);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,o=null,u=e[e.length-1];return s.isScheduler(u)?(o=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof u&&(r=e.pop()),null===o&&1===e.length&&e[0]instanceof n.Observable?e[0]:a.mergeAll(r)(new i.ArrayObservable(e,o))}},function(e,t,r){"use strict";var n=r(139),i=r(393);t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),n.mergeMap(i.identity,null,e)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(140);t.observeOn=function(e,t){return void 0===t&&(t=0),function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=a;var o=function(e){function t(t,r,n){void 0===n&&(n=0),e.call(this,t),this.scheduler=r,this.delay=n}return n(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(s.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(s.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete())},t}(i.Subscriber);t.ObserveOnSubscriber=o;var u=function(){return function(e,t){this.notification=e,this.destination=t}}();t.ObserveOnMessage=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(90),s=r(77),a=r(21),o=r(20),u={};t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&s.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(new i.ArrayObservable([t].concat(e)),new c(r))}};var c=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project))},e}();t.CombineLatestOperator=c;var l=function(e){function t(t,r){e.call(this,t),this.project=r,this.active=0,this.values=[],this.observables=[]}return n(t,e),t.prototype._next=function(e){this.values.push(u),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(o.subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var s=this.values,a=s[r],o=this.toRespond?a===u?--this.toRespond:this.toRespond:0;s[r]=t,0===o&&(this.project?this._tryProject(s):this.destination.next(s.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(a.OuterSubscriber);t.CombineLatestSubscriber=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(46),a=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return n(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),s.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(i.Subject);t.AsyncSubject=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=i},function(e,t,r){"use strict";var n=r(54);function i(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}t.getSymbolObservable=i,t.observable=i(n.root),t.$$observable=t.observable},function(e,t,r){"use strict";var n=r(54).root.Symbol;t.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,r){"use strict";t.isFunction=function(e){return"function"==typeof e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Promise.resolve(n.default)};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(420))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.service=void 0;var n=o(r(31)),i=o(r(80)),s=r(60),a=o(r(22));function o(e){return e&&e.__esModule?e:{default:e}}t.service=(()=>{var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){const e=new class{constructor(){this.domainOwners={},this.apps={},this.bugs={},this.domains={}}getAppOwner(e){return this.apps[e]||{name:"Unknown",cat:"unknown"}}getBugOwner(e){const t=this.bugs[e];return this.getAppOwner(t)}_getDomainOwner(e){return e in this.domains?this.apps[this.domains[e]]:-1!==e.indexOf(".")&&this._getDomainOwner(e.substring(e.indexOf(".")+1))}getDomainOwner(e){return this._getDomainOwner(e)||{name:(0,s.getGeneralDomain)(e),cat:"unknown"}}};function r(t){const r=t.apps,n=t.bugs,i=t.domains;e.apps=r,e.bugs=n,e.domains=i;const s={};Object.keys(i).forEach(e=>{s[e]=r[i[e]].name}),e.domainOwners=s}const n=new i.default(["antitracking","tracker_db_v2.json"],{remoteURL:`${a.default.settings.CDN_BASEURL}/anti-tracking/tracker_db_v2.json`,cron:864e5});return n.onUpdate(r),r(yield n.load()),t.unload=function(){n.stop()},e});function t(){return e.apply(this,arguments)}return t})();t.default=n.default.service("domainInfo")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.service=void 0;var n=u(r(31)),i=u(r(11)),s=r(52),a=r(32),o=u(r(422));function u(e){return e&&e.__esModule?e:{default:e}}const c=u(r(69)).default.get("core",{level:"log",prefix:"[telemetry]"});function l(){return(!s.isCliqzBrowser||!0===i.default.get("uploadEnabled",!0,"datareporting.healthreport."))&&i.default.get("telemetry",!0)}t.service=function e(){let t=l();const r=new class extends o.default{constructor(){super(["enabled","disabled"])}},i=()=>{const e=l();e!==t&&((t=e)?r.emit("enabled"):r.emit("disabled"))},s=(0,a.subscribe)("prefchange",e=>{"telemetry"===e&&i()}),u=(0,a.subscribe)("healthReportChange",()=>{i()});e.unload=(()=>{s.unsubscribe(),u.unsubscribe()});const d=n.default.module("anolysis");return{removeListener(e){r.unsubscribe("enabled",e),r.unsubscribe("disabled",e)},onTelemetryEnabled(e){r.on("enabled",e)},onTelemetryDisabled(e){r.on("disabled",e)},isEnabled:()=>t,push:(e,r)=>t?d.action("handleTelemetrySignal",e,!1,r):(c.log("Could not push telemetry: disabled.",r,e),Promise.resolve())}};t.default=n.default.service("telemetry")},,function(e,t,r){"use strict";var n=r(452),i=r.n(n),s=r(3);t.a=new i.a.App({debug:s.a.DEBUG})},function(e,t,r){"use strict";(function(e){var n=r(16),i=r.n(n),s=r(204),a=r.n(s),o=r(203),u=r.n(o),c=r(116),l=r(3),d=r(1),h=r(182),f=r(2);const p=new(r(187).b),{GHOSTERY_DOMAIN:m,AUTH_SERVER:_,ACCOUNT_SERVER:g,SYNC_ARRAY:y,IS_CLIQZ:v,BROWSER_INFO:b}=l.a,$="edge"===b.name,w=new Set(y);t.a=new class{constructor(){this.login=((t,r)=>{const n=`email=${window.encodeURIComponent(t)}&password=${encodeURIComponent(r)}`;return fetch(`${_}/api/v2/login`,{method:"POST",body:n,headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(n)},credentials:"include"}).then(e=>e.status>=400?e.json():(this._getUserIDFromCookie().then(e=>{this._setAccountInfo(e)}),{}))}),this.register=((t,r,n,i,s)=>{const a=`email=${window.encodeURIComponent(t)}&email_confirmation=${window.encodeURIComponent(r)}&first_name=${window.encodeURIComponent(i)}&last_name=${window.encodeURIComponent(s)}&password=${window.encodeURIComponent(n)}`;return fetch(`${_}/api/v2/register`,{method:"POST",body:a,headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(a)},credentials:"include"}).then(e=>e.status>=400?e.json():(this._getUserIDFromCookie().then(e=>{this._setAccountInfo(e)}),{}))}),this.logout=(()=>new c.a.Promise((e,t)=>{chrome.cookies.get({url:`https://${m}.com`,name:"csrf_token"},r=>null===r?t():fetch(`${_}/api/v2/logout`,{method:"POST",credentials:"include",headers:{"X-CSRF-Token":r.value}}).then(r=>r.status<400?e():r.json().then(e=>t(e))).catch(e=>t(e)))}).finally(()=>{this._removeCookies(),this._clearAccountInfo()})),this.getUser=(()=>this._getUserID().then(e=>p.get("users",e)).then(e=>{const t=u()(a()(e),"users",e.data.id);return this._setAccountUserInfo(t),t})),this.getUserSettings=(()=>this._getUserID().then(e=>p.get("settings",e)).then(e=>{const t=u()(a()(e,{camelizeKeys:!1}),"settings",e.data.id),{settings_json:r}=t;return this._setConfUserSettings(r),this._setAccountUserSettings(r),r})),this.saveUserSettings=(()=>this._getUserID().then(e=>p.update("settings",{type:"settings",id:e,attributes:{settings_json:this.buildUserSettings()}}))),this.getTheme=(e=>new Promise((t,r)=>{p.get("themes",e).then(e=>{const{css:r}=u()(a()(e),"themes",e.data.id);t(r)}).catch(e=>r(e))})),this.sendValidateAccountEmail=(()=>this._getUserID().then(e=>fetch(`${_}/api/v2/send_email/validate_account/${e}`)).then(e=>e.status<400)),this.resetPassword=(t=>{const r=`email=${window.encodeURIComponent(t)}`;return fetch(`${_}/api/v2/send_email/reset_password`,{method:"POST",body:r,headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(r)}}).then(e=>e.status>=400?e.json():{})}),this.migrate=(()=>new Promise(e=>{chrome.storage.local.get("login_info",t=>{if(chrome.runtime.lastError)return void e(new Error(chrome.runtime.lastError));const{login_info:r}=t;if(!t||!r)return void e();const{decoded_user_token:n,user_token:i}=r;if(!n||!i)return void chrome.storage.local.remove("login_info",()=>e());const{UserId:s,csrf_token:a,RefreshToken:o,exp:u}=n;s&&a&&o&&u?Promise.all([this._setLoginCookie({name:"refresh_token",value:o,expirationDate:u+604800,httpOnly:!0}),this._setLoginCookie({name:"access_token",value:i,expirationDate:u,httpOnly:!0}),this._setLoginCookie({name:"csrf_token",value:a,expirationDate:u,httpOnly:!1}),this._setLoginCookie({name:"user_id",value:s,expirationDate:1893456e3,httpOnly:!1})]).then(()=>{this._setAccountInfo(s),chrome.storage.local.remove("login_info",()=>e())}).catch(t=>{e(t)}):chrome.storage.local.remove("login_info",()=>e())})}).then(()=>new Promise(e=>{null===d.a.account?chrome.cookies.get({url:`https://${m}.com`,name:"user_id"},t=>{null!==t&&this._setAccountInfo(t.value),e()}):e()}))),this.hasScopesUnverified=((...e)=>{if(null===d.a.account)return!1;if(null===d.a.account.user)return!1;const t=d.a.account.user.scopes;if(null===t)return!1;if(0===e.length)return!1;if(t.indexOf("god")>=0)return!0;for(const r of e){let e=!0;if(r.length>0){for(const n of r)if(-1===t.indexOf(n)){e=!1;break}if(e)return!0}}return!1}),this.buildUserSettings=(()=>{const e={},t=Number((new Date).getTime());return w.forEach(r=>{e[r]="reload_banner_status"===r||"trackers_banner_status"===r?{dismissals:[],show_time:t,show:d.a[r]}:d.a[r]}),e}),this._setLoginCookie=(e=>new Promise((t,r)=>{const{name:n,value:i,expirationDate:s,httpOnly:a}=e;n&&i?chrome.cookies.set({name:n,value:i,url:`https://${m}.com`,domain:`.${m}.com`,expirationDate:s,secure:!0,httpOnly:a},n=>{chrome.runtime.lastError||null===n?r(new Error(`Error setting cookie ${JSON.stringify(e)}: ${chrome.runtime.lastError}`)):t(n)}):r(new Error(`One or more required values missing: ${JSON.stringify({name:n,value:i})}`))})),this._getUserID=(()=>new Promise((e,t)=>null===d.a.account?t(new Error("_getUserID() Not logged in")):e(d.a.account.userID))),this._setAccountInfo=(e=>{d.a.account={userID:e,user:null,userSettings:null}}),this._setAccountUserInfo=(e=>{d.a.account.user=e,h.a.trigger("conf.save.account")}),this._setAccountUserSettings=(e=>{d.a.account.userSettings=e,h.a.trigger("conf.save.account")}),this._clearAccountInfo=(()=>{d.a.account=null}),this._getUserIDFromCookie=(()=>new Promise((e,t)=>{chrome.cookies.get({url:`https://${m}.com`,name:"user_id"},r=>{r?e(r.value):t(new Error("err getting login user_id cookie"))})})),this._setConfUserSettings=(e=>(Object(f.log)("SET USER SETTINGS",e),$&&(e.enable_human_web=!1,e.enable_offers=!1),v&&(e.enable_human_web=!1,e.enable_offers=!1,e.enable_ad_block=!1,e.enable_anti_tracking=!1),w.forEach(t=>{void 0===e[t]||i.a.isEqual(d.a[t],e[t])||(d.a[t]=e[t])}),e)),this._removeCookies=(()=>{["user_id","access_token","refresh_token","csrf_token","AUTH"].forEach(e=>{chrome.cookies.remove({url:`https://${m}.com`,name:e},()=>{Object(f.log)(`Removed cookie with name: ${e}`)})})});const t={AUTH_SERVER:_,ACCOUNT_SERVER:g,CSRF_DOMAIN:m},r={errorHandler:e=>new Promise((t,r)=>{for(const n of e)switch(n.code){case"10020":case"10060":case"10180":case"10181":case"10190":case"10200":case"10201":case"10300":case"10301":return this.logout().then(()=>t()).catch(()=>t());case"10030":case"not-found":return r(n);default:return t()}return t()})};p.init(t,r)}}}).call(this,r(37).Buffer)},,function(e,t,r){"use strict";var n=r(2);t.a=new class{constructor(){this.handlers=new Map}on(e,t,r){Object(n.log)("dispatcher.on called from",e),void 0===r&&(r=t),this.handlers.set(e,t.bind(r))}trigger(e,t){const r=this.handlers.get(e);r&&r(t)}}},function(e,t,r){"use strict";var n=r(3),i=r(1),s=r(2),a=r(8),o=r(30);const u={daily:864e5,weekly:6048e5,biweekly:12096e5,monthly:24192e5},c=["install","install_complete","upgrade","active","engaged","uninstall"],l=["install","active","uninstall"],d=["rewards_first_accept","rewards_first_reject","rewards_first_reject_optin","rewards_first_reject_optout","rewards_first_learn_more"],{METRICS_SUB_DOMAIN:h,EXTENSION_VERSION:f,BROWSER_INFO:p}=n.a,m="edge"===p.name,_=100;t.a=new class{constructor(){this.utm_source="",this.utm_campaign="",this.ping_set=new Set}init(e){return e?m?new Promise(e=>{chrome.tabs.query({},t=>{let r=!1;t.forEach(e=>{if(!r&&e.url&&e.url.includes("https://www.ghostery.com/")){const t=Object(a.processUrlQuery)(e.url);if(!t.utm_source||!t.utm_campaign)return;this.utm_source=t.utm_source,this.utm_campaign=t.utm_campaign,r=!0,Object(s.prefsSet)({utm_source:this.utm_source,utm_campaign:this.utm_campaign})}}),e()})}):new Promise(e=>{let t=!1;chrome.tabs.query({url:["https://www.ghostery.com/*"]},r=>{r.forEach(e=>{if(t)return;const r=Object(a.processUrlQuery)(e.url);r.utm_source&&r.utm_campaign&&(this.utm_source=r.utm_source,this.utm_campaign=r.utm_campaign,t=!0,Object(s.prefsSet)({utm_source:this.utm_source,utm_campaign:this.utm_campaign}))}),e()})}):Object(s.prefsGet)("utm_source","utm_campaign").then(e=>{this.utm_source=e.utm_source||"",this.utm_campaign=e.utm_campaign||""}).catch(e=>{Object(s.log)("Metrics init() error",e)})}ping(e){switch(e){case"install":this._recordInstall();break;case"install_complete":this._recordInstallComplete();break;case"upgrade":this._recordUpgrade();break;case"active":this._recordActive();break;case"engaged":this._sendReq("engaged",["daily","weekly","monthly"]);break;case"live_scan":case"pause":case"restrict_site":case"resume":case"sign_in":case"trust_site":this._sendReq(e,["all","daily","weekly"]);break;case"adblock_off":case"adblock_on":case"antitrack_off":case"antitrack_on":case"create_account_extension":case"create_account_setup":case"list_dash":case"rewards_dash":case"rewards_learn":case"pause_snooze":case"smartblock_off":case"smartblock_on":case"viewchange_from_detailed":case"viewchange_from_expanded":case"viewchange_from_simple":this._sendReq(e,["all","daily","weekly","monthly"]);break;case"engaged_offer":this._sendReq("engaged_offer",["daily","weekly","monthly"]);break;case"rewards_off":case"rewards_on":this._sendReq(e,["all","daily"]);break;case"rewards_first_learn_more":case"rewards_first_accept":case"rewards_first_reject":case"rewards_first_reject_optin":case"rewards_first_reject_optout":this._sendReq(e,["all"]);break;default:Object(s.log)(`metrics ping() error: ping name ${e} not found`)}}setUninstallUrl(e){if("function"==typeof chrome.runtime.setUninstallURL){const t=new Set(["enable_human_web","enable_offers","account","enable_metrics","show_alert","alert_expanded","show_cmp"]);if(!e||t.has(e)){const e=this._buildMetricsUrl("uninstall");e.length&&chrome.runtime.setUninstallURL(e)}}}_buildMetricsUrl(e,t){let r=`https://${h}.ghostery.com/${e}${"uninstall"!==e?`/${t}`:""}?gr=-1`+`&hw=${encodeURIComponent(i.a.enable_human_web?"1":"0")}`+`&v=${encodeURIComponent(f)}`+`&ua=${encodeURIComponent(p.token)}`+`&os=${encodeURIComponent(p.os)}`+`&l=${encodeURIComponent(i.a.language)}`+`&bv=${encodeURIComponent(p.version)}`+`&of=${encodeURIComponent(i.a.enable_offers?"1":"0")}`+`&ir=${encodeURIComponent(i.a.install_random_number)}`+`&sn=${encodeURIComponent(i.a.account?"1":"0")}`+`&id=${encodeURIComponent(i.a.install_date)}`+`&nc=${encodeURIComponent(i.a.enable_metrics?"1":"0")}`+`&pb=${encodeURIComponent(i.a.show_alert?i.a.alert_expanded?"1":"2":"0")}`+`&sc=${encodeURIComponent(i.a.show_cmp?"1":"0")}`+`&ev=${encodeURIComponent(i.a.is_expert?i.a.is_expanded?"3":"2":"1")}`+`&ab=${encodeURIComponent(i.a.enable_ad_block?"1":"0")}`+`&sm=${encodeURIComponent(i.a.enable_smart_block?"1":"0")}`+`&at=${encodeURIComponent(i.a.enable_anti_tracking?"1":"0")}`+`&ss=${encodeURIComponent(i.a.metrics.install_complete_all||"install_complete"===e?i.a.setup_step.toString():"-1")}`+`&sp=${encodeURIComponent(i.a.setup_path.toString())}`+`&sb=${encodeURIComponent(i.a.setup_block.toString())}`+`&rc=${encodeURIComponent(this._getRecency(e,t).toString())}`+`&rr=${encodeURIComponent(this._getRewardsCount().toString())}`;return l.includes(e)?r+=`&us=${encodeURIComponent(this.utm_source)}`+`&uc=${encodeURIComponent(this.utm_campaign)}`:d.includes(e)&&(r+=`&rid=${encodeURIComponent(this._getRewardId().toString())}`),r}_sendReq(e,t){let r={};if(void 0===t&&(t=["all"]),!m&&"function"==typeof fetch){const e=new Headers;e.append("Content-Type","image/gif"),r={headers:e,referrerPolicy:"no-referrer",credentials:"omit",type:"image"}}t.forEach(t=>{if(this._checkPing(e,t)){const n=Number((new Date).getTime()),a=this._buildMetricsUrl(e,t),o=i.a.metrics||{};if(o[`${e}_${t}`]=n,i.a.metrics=o,Object(s.log)(`sending ${e} ping with ${t} frequency`),m||"function"!=typeof fetch){const e=new XMLHttpRequest;e.open("GET",a,!0),e.setRequestHeader("Content-Type","image/gif"),e.send()}else{const t=new Request(a,r);fetch(t).catch(t=>{Object(s.log)(`Error sending Metrics ${e} ping`,t)})}}})}_getRecency(e,t){return i.a.metrics.active_daily&&"active"===e&&"daily"===t?Math.floor((Number((new Date).getTime())-i.a.metrics.active_daily)/864e5):-1}_getRewardsCount(){const e=o.a.totalOffersSeen;return e>=6?"6+":e>=2?"2-5":1===e?"1":"0"}_getRewardId(){return(o.a.currentOffer||{offer_id:"no_id"}).offer_id}_timeToExpired(e,t){if("all"===t)return 0;const r=i.a.metrics[`${e}_${t}`],n=void 0===r?0:r,s=Number((new Date).getTime())-u[t];return null===n?0:n-s}_checkPing(e,t){return!(this._timeToExpired(e,t)>0||!c.includes(e)&&!i.a.enable_metrics&&(i.a.metrics.install_complete_all||(this.ping_set&&this.ping_set.size<_?this.ping_set.add(e):this.ping_set=[],1)))}_recordInstall(){i.a.metrics.install_all||this._sendReq("install")}_recordInstallComplete(){i.a.metrics.install_complete_all||(this._sendReq("install_complete"),this.ping_set.forEach(e=>{this.ping(e)}),delete this.ping_set)}_recordUpgrade(){const{metrics:e}=i.a;e.install_all=Number((new Date).getTime()),i.a.metrics=e,this._sendReq("upgrade")}_recordActive(){const e=this._timeToExpired("active","daily");e>0?setTimeout(()=>{this._sendReq("active",["daily"]),setInterval(()=>{this._sendReq("active",["daily"])},u.daily)},e):(this._sendReq("active",["daily"]),setInterval(()=>{this._sendReq("active",["daily"])},u.daily));const t=this._timeToExpired("active","weekly");t>0?setTimeout(()=>{this._sendReq("active",["weekly"]),setInterval(()=>{this._sendReq("active",["weekly"])},u.weekly)},t):(this._sendReq("active",["weekly"]),setInterval(()=>{this._sendReq("active",["weekly"])},u.weekly));const r=this._timeToExpired("active","monthly");r>0?r<=u.biweekly?setTimeout(()=>{this._sendReq("active",["monthly"]),this._repeat()},r):setTimeout(()=>{setTimeout(()=>{this._sendReq("active",["monthly"]),this._repeat()},r-u.biweekly)},u.biweekly):(this._sendReq("active",["monthly"]),this._repeat())}_repeat(){let e=!1;setInterval(()=>{e&&this._sendReq("active",["monthly"]),e=!e},u.biweekly)}}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,a,o,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(s(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(i(r))for(o=Array.prototype.slice.call(arguments,1),a=(c=r.slice()).length,u=0;u<a;u++)c[u].apply(this,o);return!0},r.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,s,a,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,s=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(o=a;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){s=o;break}if(s<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";(function(t){var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var s=0,a=new i(l),o=t.document.createTextNode("");a.observe(o,{characterData:!0}),r=function(){o.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var u=new t.MessageChannel;u.port1.onmessage=l,r=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;n=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}n=!1}e.exports=function(e){1!==c.push(e)||n||r()}}).call(this,r(17))},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return n});const n=e=>[{title:e.message||"",detail:e.message||"",code:e.code||e.message||""}];class i{constructor(){this._getCsrfCookie=((e=this.config.CSRF_DOMAIN)=>new Promise(t=>{chrome.cookies.get({url:`https://${e}.com`,name:"csrf_token"},e=>t(null!==e?e.value:""))})),this._errorHandler=(e=>Promise.resolve(e)),this.get=((e,t,r="")=>t?this._sendAuthenticatedRequest("GET",`/api/v2/${e}/${t}?${r?`include=${r}`:""}`):Promise.reject(new Error("id is missing"))),this.save=((e,t)=>this._sendAuthenticatedRequest("POST",`/api/v2/${e}/`,t)),this.update=((e,t)=>this._sendAuthenticatedRequest("PATCH",`/api/v2/${e}/${t.id}`,{data:t})),this.remove=((e,t)=>this._sendAuthenticatedRequest("DELETE",`/api/v2/${e}/${t}`)),this.isRefreshing=!1,this.tokenRefreshedEventType="tokenRefreshed"}init(e,t){this.config=e;const{errorHandler:r}=t;"function"==typeof r&&(this._errorHandler=r)}_refreshToken(){if(this.isRefreshing){let e;const t=(t,r)=>{window.removeEventListener(this.tokenRefreshedEventType,e,!1),t(r.detail)};return new Promise(r=>{e=t.bind(null,r),window.addEventListener(this.tokenRefreshedEventType,e,!1)})}return this.isRefreshing=!0,fetch(`${this.config.AUTH_SERVER}/api/v2/refresh_token`,{method:"POST",credentials:"include"})}_sendReq(t,r,n){return this._getCsrfCookie().then(s=>fetch(`${this.config.ACCOUNT_SERVER}${r}`,{method:t,headers:{"Content-Type":i.JSONAPI_CONTENT_TYPE,"Content-Length":e.byteLength(JSON.stringify(n)),"X-CSRF-Token":s},body:JSON.stringify(n),credentials:"include"}))}_processResponse(e){return new Promise((t,r)=>{const{status:n}=e;204!==n?404!==n?e.json().then(e=>{n>=400?r(e):t(e)}):r({errors:[{title:"Resource not found",code:"not-found",status:"404"}]}):t()})}_sendAuthenticatedRequest(e,t,r){return new Promise((n,i)=>{this._sendReq(e,t,r).then(this._processResponse).then(e=>n(e)).catch(s=>{let a=!1;s&&s.errors&&s.errors.forEach(e=>{"10021"!==e.code&&"10022"!==e.code||(a=!0)}),a?this._refreshToken().then(s=>{this.isRefreshing=!1,window.dispatchEvent(new CustomEvent(this.tokenRefreshedEventType,{detail:s}));const{status:a}=s;a>=400&&s.json().then(e=>this._errorHandler(e.errors).then(()=>n(e)).catch(e=>i(e))).catch(e=>i(e)),this._sendReq(e,t,r).then(this._processResponse).then(e=>n(e)).catch(e=>{this._errorHandler(e.errors).then(()=>n(e)).catch(e=>i(e))})}):this._errorHandler(s.errors).then(()=>n(s)).catch(e=>i(e))})})}static get JSONAPI_CONTENT_TYPE(){return"application/vnd.api+json"}}t.b=i}).call(this,r(37).Buffer)},,,,,,function(e,t,r){"use strict";var n=r(1),i=r(96),s=r(199),a=r(2);t.a=new class extends i.a{processList(e,t){let r;Object(a.log)("processing comp...");try{r=this._buildDb(t.compatibility,t.compatibilityVersion)}catch(e){return Object(a.log)("CompatibilityDb processList() error",e),!1}return!!r&&(Object(a.log)("processed comp..."),this.db=r,e||(n.a.compatibility=t),!0)}hasIssue(e,t){return this.db.list&&this.db.list.hasOwnProperty(e)&&Object(s.a)(t,this.db.list[e])}_buildDb(e,t){const r={};return e.forEach(e=>{r[e.aid]=e.urls}),{list:r,version:t}}}("compatibility")},function(e,t,r){"use strict";e.exports=function(e){return function(){var t=arguments.length;if(t){for(var r=[],n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}return e.call(this,[])}}},function(e,t,r){"use strict";var n=r(1214).fromJson(r(1213)),i=r(1212),s=r(1208),a=r(1207),o=r(1206),u=r(430),c=r(1205),l=r(1204),d=1,h=2,f=3,p=4,m=5;e.exports=function e(t){var r=t.rules||n||{},_=t.validHosts||[],g=t.extractHostname||i;function y(e,t){var n=t||m,i={hostname:g(e),isValid:null,isIp:null,tldExists:!1,publicSuffix:null,domain:null,subdomain:null};return null===i.hostname?(i.isIp=!1,i.isValid=!1,i):(i.isIp=c(i.hostname),i.isIp?(i.isValid=!0,i):(i.isValid=u(i.hostname),!1===i.isValid?i:(n!==m&&n!==d||(i.tldExists=l(r,i.hostname)),n===d?i:(i.publicSuffix=a(r,i.hostname),n===h?i:(i.domain=s(_,i.publicSuffix,i.hostname),n===f?i:(i.subdomain=o(i.hostname,i.domain),i))))))}return{extractHostname:g,isValid:u,parse:y,tldExists:function(e){return y(e,d).tldExists},getPublicSuffix:function(e){return y(e,h).publicSuffix},getDomain:function(e){return y(e,f).domain},getSubdomain:function(e){return y(e,p).subdomain},fromUserSettings:e}}({})},,,,function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return u});var n=r(29),i=r(1),s=r(8),a=r(2);function o(e,t){const{db:r}=n.a,a=Object(s.processUrl)(e.toLowerCase());let o=!1;return o=l(r.patterns.host_path,a.host,a.path)||l(r.patterns.host,a.host)||function(e){const t=n.a.db.patterns.path,r=`/${e}`;for(const e in t)if(r.includes(e))return t[e];return!1}(a.path)||function(e){const t=n.a.db.patterns.regex;for(const r in t)if(t[r].test(e))return+r;return!1}(a.host_with_path),!(void 0!==t&&i.a.ignore_first_party&&!1!==o&&r.firstPartyExceptions[o]&&u(t,r.firstPartyExceptions[o]))&&o}function u(e,t){const r=Object(s.processUrl)(e.toLowerCase());let n=r.host;const i=r.path;n.startsWith("www.")&&(n=n.slice(4));for(let e=0;e<t.length;e++){const{host:r,path:o}=Object(s.processFpeUrl)(t[e]);if(r===n){if(!o)return Object(a.log)(`[fuzzyUrlMatcher] host (${r}) match`),!0;if("*"===o.slice(-1)){if(i.startsWith(o.slice(0,-1)))return Object(a.log)(`[fuzzyUrlMatcher] host (${r}) and path (${o}) fuzzy match`),!0}else if(o===i)return Object(a.log)(`[fuzzyUrlMatcher] host (${r}) and path (${o}) match`),!0}}return!1}function c(e,t){let r,n,i,s;for(i=0;i<e.length;i++)if((r=e[i]).hasOwnProperty("$"))for(n=r.$,s=0;s<n.length;s++)if(t.startsWith(n[s].path))return n[s].id;return!1}function l(e,t,r){const n=t.split(".").reverse(),i=[];let s,a=e,o=!1;for(let e=0;e<n.length;e++){if(s=n[e],!a.hasOwnProperty(s))return void 0!==r?c(i,r):o;o=(a=a[s]).hasOwnProperty("$")?a.$:o,void 0!==r&&a.hasOwnProperty("$")&&i.push(a)}return void 0!==r?c(i,r):o}},function(e,t,r){"use strict";var n=r(1),i=r(10),s=r(193),a=r(3),o=r(64);t.a=class{constructor(){this.policy=new o.c,this.allowedCategoriesList=["essential","audio_video_player","comments"],this.allowedTypesList=["stylesheet","image","font"]}shouldUnblock(e,t,r,n,s){if(!this.shouldCheck(r,e))return!1;let a;return this._appHasKnownIssue(r,e,n)?a="hasIssue":this._allowedCategories(r,e,t)?a="allowedCategory":this._allowedTypes(r,e,s)?a="allowedType":this._pageWasReloaded(r,e)&&(a="pageReloaded"),!!a&&(i.a.setTabSmartBlockAppInfo(r,e,a,!1),!0)}shouldBlock(e,t,r,n,s,a){if(!this.shouldCheck(r,e))return!1;let o;this._requestWasSlow(r,e,a)&&(o="slow",this._appHasKnownIssue(r,e,n)?o="hasIssue":this._allowedCategories(r,e,t)?o="allowedCategory":this._allowedTypes(r,e,s)?o="allowedType":this._pageWasReloaded(r,e)&&(o="pageReloaded"));const u="slow"===o;return u&&i.a.setTabSmartBlockAppInfo(r,e,"slow",!0),u}shouldCheck(e,t=!1){const r=i.a.getTabInfo(e,"url"),s=i.a.getTabInfo(e,"host");return n.a.enable_smart_block&&!a.a.SESSION.paused_blocking&&!this.policy.getSitePolicy(r)&&(t&&(!n.a.site_specific_unblocks.hasOwnProperty(s)||!n.a.site_specific_unblocks[s].includes(+t))||!1===t)&&(t&&(!n.a.site_specific_blocks.hasOwnProperty(s)||!n.a.site_specific_blocks[s].includes(+t))||!1===t)}isFirstPartyRequest(e,t="",r=""){let n=t,i=r;if(!this.shouldCheck(e))return!1;n.startsWith("www.")&&(n=n.slice(4)),i.startsWith("www.")&&(i=i.slice(4));const s=Math.min(i.length,n.length);let a=!0,o=0;for(;o<s&&a;)a=i.charAt(i.length-o+1)===n.charAt(n.length-o+1),o++;return a}_pageWasReloaded(e){return i.a.getTabInfo(e,"reloaded")||!1}_appHasKnownIssue(e,t,r){return s.a.hasIssue(t,r)}isInsecureRequest(e,t,r,n){return!(!this.shouldCheck(e)||"localhost"===n||"127.0.0.1"===n||"[::1]"===n||"https"!==t||"http"!==r&&"ws"!==r)}_allowedCategories(e,t,r){return this.allowedCategoriesList.includes(r)}_allowedTypes(e,t,r){return this.allowedTypesList.includes(r)}checkReloadThreshold(e){return this.shouldCheck(e)&&i.a.getTabInfoPersist(e,"numOfReloads")>1&&Date.now()-i.a.getTabInfoPersist(e,"firstLoadTimestamp")<3e4||!1}_requestWasSlow(e,t,r){return r-i.a.getTabInfo(e,"timestamp")>5e3||!1}}},function(e,t,r){"use strict";var n=r(3),i=r(2);const s="edge"===n.a.BROWSER_INFO.name,{IS_CLIQZ:a}=n.a;t.a=new class{constructor(){this.language=this._getDefaultLanguage(),this.SYNC_SET=new Set(n.a.SYNC_ARRAY)}init(){return Object(i.prefsGet)().then(e=>{const t=Number((new Date).getTime()),r=(t,r)=>{null!==e[t]&&void 0!==e[t]||(e[t]=r,i(t,r)),this[t]=e[t]},i=(e,t)=>{n.a.INIT_COMPLETE||(n.a.initProps[e]=t)},{previous_version:o}=e;null!==e.previous_version&&void 0!==e.previous_version||e.previousVersion&&(e.previous_version=e.previousVersion,chrome.storage.local.remove("previousVersion"),delete e.previousVersion),this.previous_version=e.previous_version||"",o!==this.previous_version&&i("previous_version",this.previous_version);const{reload_banner_status:u,trackers_banner_status:c}=e;u&&"object"==typeof u?(this.reload_banner_status=!!u.show,i("reload_banner_status",this.reload_banner_status)):r("reload_banner_status",!0),c&&"object"==typeof c?(this.trackers_banner_status=!!c.show,i("trackers_banner_status",this.trackers_banner_status)):r("trackers_banner_status",!0),r("alert_bubble_pos","br"),r("alert_bubble_timeout",15),r("alert_expanded",!1),r("block_by_default",!1),r("bugs_last_checked",0),r("bugs_last_updated",t),r("cmp_version",0),r("enable_ad_block",!a),r("enable_anti_tracking",!a),r("enable_autoupdate",!0),r("enable_click2play",!0),r("enable_click2play_social",!0),r("enable_human_web",!(s||a)),r("enable_metrics",!1),r("enable_offers",!(s||a)),r("enable_smart_block",!0),r("expand_all_trackers",!0),r("hide_alert_trusted",!1),r("ignore_first_party",!0),r("import_callout_dismissed",!0),r("install_random_number",0),r("install_date",0),r("is_expanded",!1),r("is_expert",!1),r("last_cmp_date",0),r("notify_library_updates",!1),r("notify_upgrade_updates",!0),r("rewards_accepted",!1),r("settings_last_imported",0),r("settings_last_exported",0),r("show_alert",!0),r("show_badge",!0),r("show_cmp",!0),r("show_tracker_urls",!0),r("toggle_individual_trackers",!0),r("setup_step",0),r("setup_path",0),r("setup_block",1),r("cliqz_import_state",0),r("bugs",{}),r("click2play",{}),r("cmp_data",[]),r("compatibility",{}),r("metrics",{}),r("new_app_ids",[]),r("selected_app_ids",{}),r("site_blacklist",[]),r("site_specific_blocks",{}),r("site_specific_unblocks",{}),r("site_whitelist",[]),r("surrogates",{}),r("version_history",[]),r("account",null)})}_getDefaultLanguage(){const e={de:"Deutsch",en:"English",es:"español",fr:"Français",hu:"magyar",it:"Italiano",ja:"日本語",ko:"한국어",nl:"Nederlands",pl:"Polski",pt_BR:"português",ru:"Русский",zh_CN:"简体中文",zh_TW:"繁體中文"};let t=window.navigator.language.replace("-","_");return e.hasOwnProperty(t)?t:(t=t.slice(0,2),e.hasOwnProperty(t)?t:"en")}}},function(e,t,r){"use strict";var n=r(432),i=r(1211);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=v(e));return e instanceof s?e.format():s.prototype.format.call(e)},t.Url=s;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),d=["%","/","?",";","#"].concat(l),h=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=r(431);function v(e,t,r){if(e&&i.isObject(e)&&e instanceof s)return e;var n=new s;return n.parse(e,t,r),n}s.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),o=-1!==s&&s<e.indexOf("#")?"?":"#",c=e.split(o);c[0]=c[0].replace(/\\/g,"/");var v=e=c.join(o);if(v=v.trim(),!r&&1===e.split("#").length){var b=u.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var $=a.exec(v);if($){var w=($=$[0]).toLowerCase();this.protocol=w,v=v.substr($.length)}if(r||$||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===v.substr(0,2);!k||$&&_[$]||(v=v.substr(2),this.slashes=!0)}if(!_[$]&&(k||$&&!g[$])){for(var M,S,O=-1,x=0;x<h.length;x++){-1!==(T=v.indexOf(h[x]))&&(-1===O||T<O)&&(O=T)}-1!==(S=-1===O?v.lastIndexOf("@"):v.lastIndexOf("@",O))&&(M=v.slice(0,S),v=v.slice(S+1),this.auth=decodeURIComponent(M)),O=-1;for(x=0;x<d.length;x++){var T;-1!==(T=v.indexOf(d[x]))&&(-1===O||T<O)&&(O=T)}-1===O&&(O=v.length),this.host=v.slice(0,O),v=v.slice(O),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var D=this.hostname.split(/\./),L=(x=0,D.length);x<L;x++){var P=D[x];if(P&&!P.match(f)){for(var A="",j=0,R=P.length;j<R;j++)P.charCodeAt(j)>127?A+="x":A+=P[j];if(!A.match(f)){var I=D.slice(0,x),C=D.slice(x+1),Y=P.match(p);Y&&(I.push(Y[1]),C.unshift(Y[2])),C.length&&(v="/"+C.join(".")+v),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=n.toASCII(this.hostname));var F=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+F,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[w])for(x=0,L=l.length;x<L;x++){var U=l[x];if(-1!==v.indexOf(U)){var q=encodeURIComponent(U);q===U&&(q=escape(U)),v=v.split(U).join(q)}}var H=v.indexOf("#");-1!==H&&(this.hash=v.substr(H),v=v.slice(0,H));var z=v.indexOf("?");if(-1!==z?(this.search=v.substr(z),this.query=v.substr(z+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,z)):t&&(this.search="",this.query={}),v&&(this.pathname=v),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var B=this.search||"";this.path=F+B}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,a="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),t+s+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(o=o.replace("#","%23"))+n},s.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(i.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var r=new s,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=e[l])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var f=d[h];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||_[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",y=r.search||"";r.path=m+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),$=b||v||r.host&&e.pathname,w=$,k=r.pathname&&r.pathname.split("/")||[],M=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(M&&(r.hostname="",r.port=null,r.host&&(""===k[0]?k[0]=r.host:k.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),$=$&&(""===p[0]||""===k[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,k=p;else if(p.length)k||(k=[]),k.pop(),k=k.concat(p),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(M)r.hostname=r.host=k.shift(),(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.host=r.hostname=E.shift());return r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=k.slice(-1)[0],O=(r.host||e.host||k.length>1)&&("."===S||".."===S)||""===S,x=0,T=k.length;T>=0;T--)"."===(S=k[T])?k.splice(T,1):".."===S?(k.splice(T,1),x++):x&&(k.splice(T,1),x--);if(!$&&!w)for(;x--;x)k.unshift("..");!$||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),O&&"/"!==k.join("/").substr(-1)&&k.push("");var E,D=""===k[0]||k[0]&&"/"===k[0].charAt(0);M&&(r.hostname=r.host=D?"":k.length?k.shift():"",(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.host=r.hostname=E.shift()));return($=$||r.host&&k.length)&&!D&&k.unshift(""),k.length?r.pathname=k.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},s.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t){"use strict";function r(e){return!(!e||"function"!=typeof e.hasOwnProperty||!(e.hasOwnProperty("__ownerID")||e._map&&e._map.hasOwnProperty("__ownerID")))}function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t)||(t=[t]),r(e)){var i=e.getIn(t.map(function(e){return""+e}));return n&&i?i.toJS():i}return t.reduce(function(e,t){return e[t]},e)}function i(e){return r(e)?e.keySeq().toArray():Object.keys(e)}function s(e,t,r,n,i){var s=n.ignoreLinks,o=t.relationships[r];if(void 0!==o.data)return Array.isArray(o.data)?o.data.map(function(t){return a(e,t.type,t.id,n,i)||t}):null===o.data?null:a(e,o.data.type,o.data.id,n,i)||o.data;if(!s&&o.links)throw new Error("Remote lazy loading is not supported (see: https://github.com/yury-dymov/json-api-normalizer/issues/2). To disable this error, include option 'ignoreLinks: true' in the build function like so: build(reducer, type, id, { ignoreLinks: true })")}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=o({},{eager:!1,ignoreLinks:!1,includeType:!1},u),d=l.eager,h=l.includeType;if(!n(e,t))return null;if(null===r||Array.isArray(r))return(r||i(n(e,t))).map(function(r){return a(e,t,r,l,c)});var f=r.toString(),p=function(e,t){return t?""+e+t:null}(t,f),m=c[p];if(m)return m;var _={},g=n(e,[t,f],!0);return g?(g.id&&(_.id=g.id),g.attributes&&Object.keys(g.attributes).forEach(function(e){_[e]=g.attributes[e]}),g.meta&&(_.meta=g.meta),h&&!_.type&&(_.type=t),c[p]=_,g.relationships&&Object.keys(g.relationships).forEach(function(t){d?_[t]=s(e,g,t,l,c):Object.defineProperty(_,t,{enumerable:!0,get:function(){var r="__"+t;if(_[r])return _[r];var n=s(e,g,t,l,c);return Object.defineProperty(_,r,{enumerable:!1,value:n}),_[r]}})}),void 0===_.id&&(_.id=f),_):null}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=a}])},function(e,t,r){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,h.default)(e)?e:[e]}function s(e){if(null===e||"object"!==(void 0===e?"undefined":l(e))||function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e))return e;if((0,h.default)(e))return e.map(s);var t={};return(0,p.default)(e).forEach(function(r){t[(0,d.default)(r)]=s(e[r])}),t}function a(e,t){var r=t.camelizeKeys,n=t.camelizeTypeValues,i={};return(0,p.default)(e).forEach(function(t){var a=e[t],o=r?(0,d.default)(t):t;i[o]={},void 0!==a.data&&((0,h.default)(a.data)?i[o].data=a.data.map(function(e){return{id:e.id,type:n?(0,d.default)(e.type):e.type}}):(0,f.default)(a.data)?i[o].data=a.data:i[o].data={id:a.data.id,type:n?(0,d.default)(a.data.type):a.data.type},void 0!==a.meta&&(i[o].meta=s(a.meta))),a.links&&(i[o].links=a.links)}),i}function o(e,t){var r=t.camelizeKeys,n=t.camelizeTypeValues,o={};return i(e).forEach(function(e){var t=r?(0,d.default)(e.type):e.type;o[t]=o[t]||{},o[t][e.id]=o[t][e.id]||{id:e.id},o[t][e.id].type=n?(0,d.default)(e.type):e.type,r?(o[t][e.id].attributes={},(0,p.default)(e.attributes).forEach(function(r){o[t][e.id].attributes[(0,d.default)(r)]=s(e.attributes[r])})):o[t][e.id].attributes=e.attributes,e.links&&(o[t][e.id].links={},(0,p.default)(e.links).forEach(function(r){o[t][e.id].links[r]=e.links[r]})),e.relationships&&(o[t][e.id].relationships=a(e.relationships,{camelizeKeys:r,camelizeTypeValues:n})),e.meta&&(r?(o[t][e.id].meta={},(0,p.default)(e.meta).forEach(function(r){o[t][e.id].meta[(0,d.default)(r)]=s(e.meta[r])})):o[t][e.id].meta=e.meta)}),o}function u(e){return e.replace(/\?.*$/,"")}function c(e,t,r){var n=r.camelizeKeys,s=r.camelizeTypeValues,o={meta:{}},c=void 0;if(r.filterEndpoint)o.meta[t]={},c=o.meta[t];else{var l=u(t);o.meta[l]={},o.meta[l][t.slice(l.length)]={},c=o.meta[l][t.slice(l.length)]}if(c.data={},e.data){var h=[];i(e.data).forEach(function(e){var t={id:e.id,type:s?(0,d.default)(e.type):e.type};e.relationships&&(t.relationships=a(e.relationships,{camelizeKeys:n,camelizeTypeValues:s})),h.push(t)}),c.data=h}return e.links&&(c.links=e.links,o.meta[u(t)].links=e.links),e.meta&&(c.meta=e.meta),o}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=t.endpoint,i=t.filterEndpoint,s=t.camelizeKeys,a=t.camelizeTypeValues;if(void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===a&&(a=!0),e.data&&(0,m.default)(r,o(e.data,{camelizeKeys:s,camelizeTypeValues:a})),e.included&&(0,m.default)(r,o(e.included,{camelizeKeys:s,camelizeTypeValues:a})),n){var l=i?u(n):n;(0,m.default)(r,c(e,l,{camelizeKeys:s,camelizeTypeValues:a,filterEndpoint:i}))}return r};var d=n(r(2)),h=n(r(3)),f=n(r(4)),p=n(r(5)),m=n(r(6))},function(e,t){e.exports=r(647)},function(e,t){e.exports=r(157)},function(e,t){e.exports=r(624)},function(e,t){e.exports=r(623)},function(e,t){e.exports=r(614)}])},function(e,t,r){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],n=e[1],i=e[2],s=e[3];r+=(n&i|~n&s)+t[0]-680876936|0,s+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0,i+=((s=(s<<12|s>>>20)+r|0)&r|~s&n)+t[2]+606105819|0,n+=((i=(i<<17|i>>>15)+s|0)&s|~i&r)+t[3]-1044525330|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&s)+t[4]-176418897|0,s+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0,i+=((s=(s<<12|s>>>20)+r|0)&r|~s&n)+t[6]-1473231341|0,n+=((i=(i<<17|i>>>15)+s|0)&s|~i&r)+t[7]-45705983|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&s)+t[8]+1770035416|0,s+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0,i+=((s=(s<<12|s>>>20)+r|0)&r|~s&n)+t[10]-42063|0,n+=((i=(i<<17|i>>>15)+s|0)&s|~i&r)+t[11]-1990404162|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&s)+t[12]+1804603682|0,s+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0,i+=((s=(s<<12|s>>>20)+r|0)&r|~s&n)+t[14]-1502002290|0,n+=((i=(i<<17|i>>>15)+s|0)&s|~i&r)+t[15]+1236535329|0,r+=((n=(n<<22|n>>>10)+i|0)&s|i&~s)+t[1]-165796510|0,s+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0,i+=((s=(s<<9|s>>>23)+r|0)&n|r&~n)+t[11]+643717713|0,n+=((i=(i<<14|i>>>18)+s|0)&r|s&~r)+t[0]-373897302|0,r+=((n=(n<<20|n>>>12)+i|0)&s|i&~s)+t[5]-701558691|0,s+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0,i+=((s=(s<<9|s>>>23)+r|0)&n|r&~n)+t[15]-660478335|0,n+=((i=(i<<14|i>>>18)+s|0)&r|s&~r)+t[4]-405537848|0,r+=((n=(n<<20|n>>>12)+i|0)&s|i&~s)+t[9]+568446438|0,s+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0,i+=((s=(s<<9|s>>>23)+r|0)&n|r&~n)+t[3]-187363961|0,n+=((i=(i<<14|i>>>18)+s|0)&r|s&~r)+t[8]+1163531501|0,r+=((n=(n<<20|n>>>12)+i|0)&s|i&~s)+t[13]-1444681467|0,s+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0,i+=((s=(s<<9|s>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0,n+=((i=(i<<14|i>>>18)+s|0)&r|s&~r)+t[12]-1926607734|0,r+=((n=(n<<20|n>>>12)+i|0)^i^s)+t[5]-378558|0,s+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0,i+=((s=(s<<11|s>>>21)+r|0)^r^n)+t[11]+1839030562|0,n+=((i=(i<<16|i>>>16)+s|0)^s^r)+t[14]-35309556|0,r+=((n=(n<<23|n>>>9)+i|0)^i^s)+t[1]-1530992060|0,s+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0,i+=((s=(s<<11|s>>>21)+r|0)^r^n)+t[7]-155497632|0,n+=((i=(i<<16|i>>>16)+s|0)^s^r)+t[10]-1094730640|0,r+=((n=(n<<23|n>>>9)+i|0)^i^s)+t[13]+681279174|0,s+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0,i+=((s=(s<<11|s>>>21)+r|0)^r^n)+t[3]-722521979|0,n+=((i=(i<<16|i>>>16)+s|0)^s^r)+t[6]+76029189|0,r+=((n=(n<<23|n>>>9)+i|0)^i^s)+t[9]-640364487|0,s+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0,i+=((s=(s<<11|s>>>21)+r|0)^r^n)+t[15]+530742520|0,n+=((i=(i<<16|i>>>16)+s|0)^s^r)+t[2]-995338651|0,r+=(i^((n=(n<<23|n>>>9)+i|0)|~s))+t[0]-198630844|0,s+=(n^((r=(r<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0,i+=(r^((s=(s<<10|s>>>22)+r|0)|~n))+t[14]-1416354905|0,n+=(s^((i=(i<<15|i>>>17)+s|0)|~r))+t[5]-57434055|0,r+=(i^((n=(n<<21|n>>>11)+i|0)|~s))+t[12]+1700485571|0,s+=(n^((r=(r<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0,i+=(r^((s=(s<<10|s>>>22)+r|0)|~n))+t[10]-1051523|0,n+=(s^((i=(i<<15|i>>>17)+s|0)|~r))+t[1]-2054922799|0,r+=(i^((n=(n<<21|n>>>11)+i|0)|~s))+t[8]+1873313359|0,s+=(n^((r=(r<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0,i+=(r^((s=(s<<10|s>>>22)+r|0)|~n))+t[6]-1560198380|0,n+=(s^((i=(i<<15|i>>>17)+s|0)|~r))+t[13]+1309151649|0,r+=(i^((n=(n<<21|n>>>11)+i|0)|~s))+t[4]-145523070|0,s+=(n^((r=(r<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0,i+=(r^((s=(s<<10|s>>>22)+r|0)|~n))+t[2]+718787259|0,n=((n+=(s^((i=(i<<15|i>>>17)+s|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=s+e[3]|0}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function i(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function s(e){var t,i,s,a,o,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(l,n(e.substring(t-64,t)));for(e=e.substring(t-64),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(r(l,s),t=0;t<16;t+=1)s[t]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(a[2],16),u=parseInt(a[1],16)||0,s[14]=o,s[15]=u,r(l,s),l}function a(e){var r,n="";for(r=0;r<4;r+=1)n+=t[e>>8*r+4&15]+t[e>>8*r&15];return n}function o(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function l(){this.reset()}return o(s("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var i,s,a,o,u=this.byteLength,c=t(r,u),l=u;return n!==e&&(l=t(n,u)),c>l?new ArrayBuffer(0):(i=l-c,s=new ArrayBuffer(i),a=new Uint8Array(s),o=new Uint8Array(this,c,i),a.set(o),s)}}(),l.prototype.append=function(e){return this.appendBinary(u(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)r(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,r,n=this._buff,i=n.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(s,i),r=o(this._hash),e&&(r=c(r)),this.reset(),r},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var n,i,s,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(r(this._hash,e),a=0;a<16;a+=1)e[a]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),s=parseInt(n[1],16)||0,e[14]=i,e[15]=s,r(this._hash,e)},l.hash=function(e,t){return l.hashBinary(u(e),t)},l.hashBinary=function(e,t){var r=o(s(e));return t?c(r):r},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(e){var t,n=function(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),r?n:n.buffer}(this._buff.buffer,e,!0),s=n.length;for(this._length+=e.byteLength,t=64;t<=s;t+=64)r(this._hash,i(n.subarray(t-64,t)));return this._buff=t-64<s?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=n[t]<<(t%4<<3);return this._finish(s,i),r=o(this._hash),e&&(r=c(r)),this.reset(),r},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e=l.prototype.getState.call(this);return e.buff=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}(e.buff),e},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,n=e.length,i=new ArrayBuffer(n),s=new Uint8Array(i);for(r=0;r<n;r+=1)s[r]=e.charCodeAt(r);return t?s:i}(e.buff,!0),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var n=o(function(e){var t,n,s,a,o,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(l,i(e.subarray(t-64,t)));for(e=t-64<c?e.subarray(t-64):new Uint8Array(0),n=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)s[t>>2]|=e[t]<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(r(l,s),t=0;t<16;t+=1)s[t]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(a[2],16),u=parseInt(a[1],16)||0,s[14]=o,s[15]=u,r(l,s),l}(new Uint8Array(e)));return t?c(n):n},l}()},,,function(e,t){},function(e,t,r){var n=r(269);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t,r){var n=r(601),i=r(597);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},function(e,t,r){var n=r(130),i=r(105),s="[object AsyncFunction]",a="[object Function]",o="[object GeneratorFunction]",u="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=n(e);return t==a||t==o||t==s||t==u}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(118).Symbol;e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(81));t.default=class extends n.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(()=>0),e.forEach(e=>this.incr(e))}incr(e){this.update(e,e=>e+1)}}},function(e,t,r){"use strict";var n=r(218);function i(e,t,r){this.message=r||i.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function s(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:s(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:s(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,r){"use strict";var n=Array.isArray,i=Object.keys,s=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var a,o,u,c=n(t),l=n(r);if(c&&l){if((o=t.length)!=r.length)return!1;for(a=o;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(c!=l)return!1;var d=t instanceof Date,h=r instanceof Date;if(d!=h)return!1;if(d&&h)return t.getTime()==r.getTime();var f=t instanceof RegExp,p=r instanceof RegExp;if(f!=p)return!1;if(f&&p)return t.toString()==r.toString();var m=i(t);if((o=m.length)!==i(r).length)return!1;for(a=o;0!=a--;)if(!s.call(r,m[a]))return!1;for(a=o;0!=a--;)if(!e(t[u=m[a]],r[u]))return!1;return!0}return t!=t&&r!=r}},function(e,t,r){"use strict";var n=r(715),i=r(217),s=r(119),a=r(294),o=r(713);function u(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return u.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof a)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,s,o,l=c.call(this,t,r);return l&&(i=l.schema,t=l.root,o=l.baseId),i instanceof a?s=i.validate||e.call(this,i.schema,t,void 0,o):void 0!==i&&(s=f(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,o)),s}function c(e,t){var r=n.parse(t),i=m(r),s=p(this._getId(e.schema));if(i!==s){var o=g(i),u=this._refs[o];if("string"==typeof u)return function(e,t,r){var n=c.call(this,e,t);if(n){var i=n.schema,s=n.baseId;e=n.root;var a=this._getId(i);return a&&(s=y(s,a)),d.call(this,r,s,i,e)}}.call(this,e,u,r);if(u instanceof a)u.validate||this._compile(u),e=u;else{if(!((u=this._schemas[o])instanceof a))return;if(u.validate||this._compile(u),o==g(t))return{schema:u,root:e,baseId:s};e=u}if(!e.schema)return;s=p(this._getId(e.schema))}return d.call(this,r,s,e.schema,e)}e.exports=u,u.normalizeId=g,u.fullPath=p,u.url=y,u.ids=function(e){var t=g(this._getId(e)),r={"":t},a={"":p(t,!1)},u={},c=this;return o(e,{allKeys:!0},function(e,t,o,l,d,h,f){if(""!==t){var p=c._getId(e),m=r[l],_=a[l]+"/"+d;if(void 0!==f&&(_+="/"+("number"==typeof f?f:s.escapeFragment(f))),"string"==typeof p){p=m=g(m?n.resolve(m,p):p);var y=c._refs[p];if("string"==typeof y&&(y=c._refs[y]),y&&y.schema){if(!i(e,y.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=g(_))if("#"==p[0]){if(u[p]&&!i(e,u[p]))throw new Error('id "'+p+'" resolves to more than one schema');u[p]=e}else c._refs[p]=_}r[t]=m,a[t]=_}}),u},u.inlineRef=f,u.schema=c;var l=s.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),a=1;a<i.length;a++){var o=i[a];if(o){if(void 0===(r=r[o=s.unescapeFragment(o)]))break;var u;if(!l[o]&&((u=this._getId(r))&&(t=y(t,u)),r.$ref)){var d=y(t,r.$ref),h=c.call(this,n,d);h&&(r=h.schema,n=h.root,t=h.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var h=s.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(n+=e(r)),n==1/0)return 1/0}else for(var s in t){if("$ref"==s)return 1/0;if(h[s])n++;else if("object"==typeof(r=t[s])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function p(e,t){return!1!==t&&(e=g(e)),m(n.parse(e))}function m(e){return n.serialize(e).split("#")[0]+"#"}var _=/#\/?$/;function g(e){return e?e.replace(_,""):""}function y(e,t){return t=g(t),n.resolve(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=i.default.get("config_ts",null);if(null!==e){const t=e.substr(0,4),r=e.substr(4,2),i=e.substr(6,2);return(0,n.default)(`${t}-${r}-${i}`,"YYYY-MM-DD")}return null};var n=s(r(87)),i=s(r(11));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(25)),i=a(r(768)),s=r(120);function a(e){return e&&e.__esModule?e:{default:e}}const o=e=>{const t=new Map;return Object.keys(e).forEach(r=>{t.set(r,new Map),Object.keys(e[r]).forEach(n=>{t.get(r).set(n,new Set(e[r][n]||[]))})}),t},u=e=>e&&e.patterns&&e.patterns.p_list&&e.patterns.p_list.length>0&&e.patterns.pid&&e.min_matches_expected>0&&e.since_secs>0&&e.till_secs>=0&&e.since_secs>=e.till_secs&&void 0!==e.remove_if_matches,c=e=>(e.patternIndex=(0,s.buildSimplePatternIndex)(e.patterns.p_list),e);t.default=class{constructor(e){this.offerObj=e,this._geo=null,this._filterRules=null,this._blackListPatterns=null,this._historyChecks=null}isValid(){return!(!(this.offerObj&&this.offerObj.offer_id&&this.offerObj.campaign_id&&this.offerObj.display_id&&this.offerObj.ui_info&&this.offerObj.monitorData)||this.hasHistoryChecks()&&this.historyChecks.some(e=>!u(e)))}get ABTestInfo(){return this.offerObj.abTestInfo}get destinationRealEstates(){return this.offerObj.rs_dest||[]}get version(){return void 0===this.offerObj.version?"":this.offerObj.version}get monitorData(){return this.offerObj.monitorData}get uiInfo(){return this.offerObj.ui_info}isGeoLocated(){return!!this.offerObj.geo}get geoInfo(){return null===this._geo&&this.isGeoLocated()&&(this._geo=o(this.offerObj.geo)),this._geo}get displayPriority(){return void 0!==this.offerObj.displayPriority?this.offerObj.displayPriority:0}hasBlacklistPatterns(){return!!this.offerObj.blackListPatterns}get blackListPatterns(){return null===this._blackListPatterns&&this.hasBlacklistPatterns()&&(this._blackListPatterns=(0,s.buildSimplePatternIndex)(this.offerObj.blackListPatterns)),this._blackListPatterns}get displayID(){return this.offerObj.display_id}get clientID(){return this.offerObj.client_id}hasTypes(){return!!this.offerObj.types}get types(){return this.offerObj.types?this.offerObj.types:[]}get uniqueID(){return this.offerObj.offer_id}get campaignID(){return this.offerObj.campaign_id}hasFilterRules(){return!!this.offerObj.filterRules&&""!==this.offerObj.filterRules.eval_expression}get filterRules(){if(null===this._filterRules&&this.hasFilterRules())try{this._filterRules=(0,i.default)(this.offerObj.filterRules.eval_expression)}catch(e){n.default.error("jsep couldn't parse:",e)}return this._filterRules}get ruleInfo(){return this.offerObj.rule_info?this.offerObj.rule_info:{rule_info:{display_time_secs:999999,type:"exact_match",url:[]}}}hasHistoryChecks(){return!!this.offerObj.historyChecks}get historyChecks(){return null===this._historyChecks&&this.hasHistoryChecks()&&(this._historyChecks=this.offerObj.historyChecks.map(e=>c(e))||[]),this._historyChecks}hasExpirationMs(){return!!this.offerObj.expirationMs}get expirationMs(){return this.offerObj.expirationMs}hasCategories(){return this.offerObj.categories&&this.offerObj.categories.length>0}get categories(){return this.offerObj.categories}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_LIFE_TIME_SECS=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(25)),i=r(40),s=r(300);const a=1296e3,o=(e,t)=>{const r=(0,i.timestampMS)(),n=r-1e3*e,a=r,o=new Set((0,s.getDaysFromTimeRange)(n,a)),u={},c=Object.keys(t.per_day);for(let e=0;e<c.length;e+=1){const r=c[e];o.has(r)&&t.per_day[r]&&t.per_day[r].m>0&&(u[r]=t.per_day[r])}return u};t.default=class{constructor(e,t,r,n,s){this.name=e,this.patterns=t,this.version=r,this.timeRangeSecs=n,this.activationData=s;const a=(0,i.timestampMS)();this.lastUpdateTs=a,this.createdTs=a,this.matchData=this._defaultMatchData(),this.lastActivationTS=null,this.isHistoryDataSet=!1,this.todayKey=null,this.tmpActivationValue=null,this.activationFunctionMap={normalized:this._normalizedResults.bind(this),simpleCount:this._simpleCountResults.bind(this)}}setTotalDayHandler(e){this.totalDayHandler=e}serialize(){return{name:this.name,patterns:this.patterns,version:this.version,timeRangeSecs:this.timeRangeSecs,lastUpdateTs:this.lastUpdateTs,createdTs:this.createdTs,matchData:this.matchData,isHistoryDataSet:this.isHistoryDataSet,activationData:this.activationData,lastActivationTS:this.lastActivationTS}}deserialize(e){this.name=e.name,this.patterns=e.patterns,this.version=e.version,this.lastUpdateTs=e.lastUpdateTs,this.createdTs=e.createdTs,this.timeRangeSecs=e.timeRangeSecs,this.matchData=e.matchData,this.isHistoryDataSet=e.isHistoryDataSet,this.activationData=e.activationData,this.lastActivationTS=e.lastActivationTS}getName(){return this.name}getVersion(){return this.version}hasPatterns(){return!!this.patterns}getPatterns(){return this.patterns}isHistoryDataSettedUp(){return this.isHistoryDataSet}isActive(){const e=(0,i.timestampMS)();if(null!==this.lastActivationTS){if((e-this.lastActivationTS)/1e3<=this.activationData.activationTimeSecs)return!0;this.lastActivationTS=null}const t=(0,s.getTodayDayKey)();t!==this.todayKey&&(this.todayKey=t,this.cleanUp());const r=this.activationFunctionMap[this.activationData.func];if(!r)return n.default.error(`We do not have the activation function ${this.activationData.func}`),!1;const a=r(this.activationData.args);return a&&(this.lastActivationTS=e),a}getTimeRangeSecs(){return this.timeRangeSecs}cleanUp(){const e=(0,i.timestampMS)(),t=(0,s.getTodayDayKey)(),r=Object.keys(this.matchData.perDay);let n=!1;const a=1e3*this.timeRangeSecs;for(let i=0;i<r.length;i+=1)r[i]!==t&&e-(0,s.getDateFromDateKey)(r[i],12)>a&&(this._removeDay(r[i]),n=!0);n&&(this.lastUpdateTs=e)}isObsolete(){const e=(0,i.timestampMS)(),t=Math.max(1e3*a,1e3*this.timeRangeSecs);let r=!1;return r=null===this.matchData.lastMatchTs?e-this.createdTs>t:e-this.matchData.lastMatchTs>t}hit(){const e=(0,i.timestampMS)();null===this.matchData.firstMatchTs&&(this.matchData.firstMatchTs=e),this.matchData.lastMatchTs=e,this.matchData.total.matches+=1;const t=(0,s.getTodayDayKey)();let r=this.matchData.perDay[t];r||(r={matches:0},this.matchData.perDay[t]=r),r.matches+=1,this.lastUpdateTs=e}updateWithHistoryData(e){if(!e||!e.per_day)throw new Error("invalid history data",e);this.matchData=this._defaultMatchData(),this.isHistoryDataSet=!0;let t=!1;const r=o(this.timeRangeSecs,e),n=Object.keys(r);for(let e=0;e<n.length;e+=1){const i=n[e],a=r[i],o=(0,s.getDateFromDateKey)(i,12);this.matchData.perDay[i]={matches:a.m},this.matchData.total.matches+=a.m,this.matchData.firstMatchTs=Math.min(this.matchData.firstMatchTs,o),this.matchData.lastMatchTs=Math.max(this.matchData.lastMatchTs,o),t=!0}t&&(this.lastUpdateTs=(0,i.timestampMS)())}getTotalMatches(){return this.matchData.total.matches}getLastMatchTs(){return this.matchData.lastMatchTs}getFirstMatchTs(){return this.matchData.firstMatchTs}countDaysWithMatches(){return Object.keys(this.matchData.perDay).length}_removeDay(e){this.matchData.total.matches-=this.matchData.perDay[e].matches,delete this.matchData.perDay[e],this.lastUpdateTs=(0,i.timestampMS)()}_defaultMatchData(){return{total:{matches:0},perDay:{},firstMatchTs:null,lastMatchTs:null}}_simpleCountResults(e){let t=e.numDays,r=e.totNumHits;return(void 0===t||this.countDaysWithMatches()>=t)&&(void 0===r||this.getTotalMatches()>=r)}_normalizedResults(e){if(((0,s.getTodayDayKey)()!==this.todayKey||void 0===this._sumTotalCount)&&(this._sumTotalCount=0,this._sumTotMatches=0,e.endDayIdx>0)){const t=this._gatherPrevDaysData(e.endDayIdx,e.startDayIdx);for(let e=0;e<t.length;e+=1)this._sumTotalCount+=t[e].t,this._sumTotMatches+=t[e].m}let t=this._sumTotalCount,r=this._sumTotMatches;if(0===e.startDayIdx){const e=this._gatherTodayData();t+=e.t,r+=e.m}return(t>0?r/t:0)>=e.threshold}_gatherPrevDaysData(e,t){const r=(0,s.getTodayDayKey)(),a=(0,i.timestampMS)(),o=a-9e7*e,u=a-9e7*t,c=(0,s.getDaysFromTimeRange)(o,u).filter(e=>e!==r),l=[];for(let e=0;e<c.length;e+=1){const t=c[e],r=this.totalDayHandler.getCount(t),i=this.matchData.perDay[t]?this.matchData.perDay[t].matches:void 0;if(void 0===r||void 0===i)return n.default.info(`Warning: we do not have information yet for the day ${t}`),-1;l.push({t:r,m:i})}return l}_gatherTodayData(){const e=(0,s.getTodayDayKey)(),t=this.totalDayHandler.getCount(e);let r=0;return t>0&&this.matchData.perDay[e]&&(r=this.matchData.perDay[e].matches),{t:t,m:r}}},t.CATEGORY_LIFE_TIME_SECS=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e){return e&&e.__esModule?e:{default:e}}(r(24));t.default=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.default,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"docData";this.db=e,this.contID=r,this.logger=t}upsert(e,t){return this.db.get(e).catch(()=>({_id:e,[this.contID]:{}})).then(e=>this.db.put(n({},e,{[this.contID]:n({},e.docData,t)})))}get(e){return this.db.get(e).then(e=>e[this.contID]).catch(t=>(t&&t.status&&404!==t.status?this.logger.error(`getDocData: error getting doc ${e} with err: `,t):this.logger.log(`missing DB entry for docID ${e}`),null))}remove(e){return this.db.get(e).then(t=>(this.logger.log(`removeDocData: removing doc ${e}`),this.db.remove(t))).then(()=>{this.logger.log(`removeDocData: doc ${e} removed properly`)}).catch(t=>{t&&t.status&&404!==t.status?this.logger.error(`removeDocData: something happened removing the doc: ${e} - err:`,t):this.logger.log(`missing DB entry for docID ${e}`)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82),i=function(e){return e&&e.__esModule?e:{default:e}}(r(120)),s=r(60);t.default=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"!=typeof e)throw new Error("invalid raw url type");this.rawUrl=e,this.referrerName=t,this.normalizedUrl=null,this.urlDetails=null,this.domain=null,this.patternsRequest=null,this.activatedCategoriesIDs=new Set}hasReferrerName(){return null!==this.referrerName}getReferrerName(){return this.referrerName}getRawUrl(){return this.rawUrl}getNormalizedUrl(){if(null===this.normalizedUrl)try{this.normalizedUrl=decodeURIComponent(this.rawUrl.replace(/\+/g,"%20")).toLowerCase()}catch(e){this.normalizedUrl=this.rawUrl.toLowerCase()}return this.normalizedUrl}getUrlDetails(){return null===this.urlDetails&&(this.urlDetails=(0,n.getDetailsFromUrl)(this.rawUrl)),this.urlDetails}getDomain(){return null===this.domain&&(this.domain=(0,s.getGeneralDomain)(this.rawUrl)),this.domain}getPatternRequest(){return null===this.patternsRequest&&(this.patternsRequest=(0,i.default)(this.getNormalizedUrl())),this.patternsRequest}setActivatedCategoriesIDs(e){this.activatedCategoriesIDs=e}getActivatedCategoriesIDs(){return this.activatedCategoriesIDs}}},function(e,t,r){"use strict";var n=r(34),i=r(135);t.timestamp=function(e){return void 0===e&&(e=n.async),i.map(function(t){return new s(t,e.now())})};var s=function(){return function(e,t){this.value=e,this.timestamp=t}}();t.Timestamp=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.switchMap=function(e,t){return function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.project,this.resultSelector))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.index=0}return n(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._tryNotifyNext(e,t,r,n):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.refCount=function(){return function(e){return e.lift(new s(e))}};var s=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new a(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),a=function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(134),a=r(89);t.takeLast=function(e){return function(t){return 0===e?new a.EmptyObservable:t.lift(new o(e))}};var o=function(){function e(e){if(this.total=e,this.total<0)throw new s.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,r){e.call(this,t),this.total=r,this.ring=new Array,this.count=0}return n(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var s=t++%r;e.next(n[s])}e.complete()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.scan=function(e,t){var r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new s(e,t,r))}};var s=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.accumulator,this.seed,this.hasSeed))},e}(),a=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this._seed=n,this.hasSeed=i,this.index=0}return n(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(51),s=r(49),a=r(21),o=r(20);t.audit=function(e){return function(t){return t.lift(new u(e))}};var u=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=i.tryCatch(this.durationSelector)(e);if(t===s.errorObject)this.destination.error(s.errorObject.e);else{var r=o.subscribeToResult(this,t);r.closed?this.clearThrottle():this.add(this.throttled=r)}}},t.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))},t.prototype.notifyNext=function(e,t,r,n){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(a.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.find=function(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(r){return r.lift(new s(e,r,!1,t))}};var s=function(){function e(e,t,r,n){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}();t.FindValueOperator=s;var a=function(e){function t(t,r,n,i,s){e.call(this,t),this.predicate=r,this.source=n,this.yieldIndex=i,this.thisArg=s,this.index=0}return n(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this.predicate,r=this.thisArg,n=this.index++;try{t.call(r||this,e,n,this.source)&&this.notifyComplete(this.yieldIndex?n:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(i.Subscriber);t.FindValueSubscriber=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.filter=function(e,t){return function(r){return r.lift(new s(e,t))}};var s=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0}return n(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(51),a=r(49);t.distinctUntilChanged=function(e,t){return function(r){return r.lift(new o(e,t))}};var o=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.compare,this.keySelector))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.keySelector=n,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return n(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=s.tryCatch(this.keySelector)(e))===a.errorObject)return this.destination.error(a.errorObject.e);var r=!1;if(this.hasKey){if((r=s.tryCatch(this.compare)(this.key,t))===a.errorObject)return this.destination.error(a.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=t,this.destination.next(e))},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.defaultIfEmpty=function(e){return void 0===e&&(e=null),function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.defaultValue))},e}(),a=function(e){function t(t,r){e.call(this,t),this.defaultValue=r,this.isEmpty=!0}return n(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=r(139);t.concatMap=function(e,t){return n.mergeMap(e,t,1)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(395),s=r(77),a=r(21),o=r(20);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&s.isArray(e[0])&&(e=e[0]),function(t){return t.lift(new u(e))}},t.onErrorResumeNextStatic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r;return 1===e.length&&s.isArray(e[0])&&(e=e[0]),r=e.shift(),new i.FromObservable(r,null).lift(new u(e))};var u=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.nextSources))},e}(),c=function(e){function t(t,r){e.call(this,t),this.destination=t,this.nextSources=r}return n(t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(o.subscribeToResult(this,e)):this.destination.complete()},t}(a.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(77),s=r(90),a=r(21),o=r(20);t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!i.isArray(e[0]))return e[0];e=e[0]}return new s.ArrayObservable(e).lift(new u)};var u=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}();t.RaceOperator=u;var c=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return n(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=o.subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==r){var a=this.subscriptions[s];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)},t}(a.OuterSubscriber);t.RaceSubscriber=c},function(e,t,r){"use strict";var n=r(167);t.concatAll=function(){return n.mergeAll(1)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;t?n.complete():(n.next(r),n.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.value,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e});e.next(r),e.closed||e.complete()},t}(r(4).Observable);t.ScalarObservable=i},function(e,t,r){"use strict";t.noop=function(){}},function(e,t,r){"use strict";var n=r(239);function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:n.noop}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i(e)},t.pipeFromArray=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if((0,n.deletePersistantObject)("requestKeyValue"),(0,n.deletePersistantObject)("checkedToken"),(0,n.deletePersistantObject)("blockedToken"),(0,n.deletePersistantObject)("loadedPage"),0===i.default.get("attrack.tokenDbState",0)){new s.default("cliqz-attrack-tokens",{auto_compaction:!0}).destroy(),i.default.set("attrack.tokenDbState",1)}},t.migrateTokenDomain=function(e,t){const r=new s.default("cliqz-attrack-token-domain",{auto_compaction:!0});return r.allDocs({include_docs:!0}).then(e=>e.rows.filter(e=>Object.keys(e.doc.fps).length>=t).map(e=>e.id)).then(t=>(t.forEach(t=>e.addBlockedToken(t)),r.destroy()))},t.migrateRequestKeyValue=function(){return new s.default("cliqz-attrack-request-key-value",{auto_compaction:!0}).destroy()};var n=r(79),i=a(r(11)),s=a(r(409));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(24)),i=l(r(11)),s=l(r(1131)),a=r(31),o=l(a),u=l(r(147)),c=r(65);function l(e){return e&&e.__esModule?e:{default:e}}t.default={telemetry(e){this.provider?"hpn"===this.providerName?(e=function(e,t){i.default.get("ff-experiment",null)?e.channel="ff-experiment":e.channel=t;try{e.ts=(0,c.getConfigTs)()}catch(e){return}if(e.ts)return e["anti-duplicates"]=Math.floor(1e7*(0,u.default)()),e}(e,this.channel))&&(0,a.ifModuleEnabled)(this.provider.action("sendTelemetry",e)):(0,a.ifModuleEnabled)(this.provider.action("telemetry",e)):n.default.log("No telemetry provider loaded","attrack")},provider:null,providerName:null,msgType:"humanweb",channel:null,loadFromProvider(e,t){if(n.default.log(`Load telemetry provider: ${e}`,"attrack"),this.providerName=e,this.channel=t,"platform"===e)return this.telemetry=s.default.telemetry.bind(s.default),this.msgType=s.default.msgType,Promise.resolve(this);this.provider=o.default.module(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(177)),i=a(r(412)),s=a(r(1133));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.name=e,this.isBreakable=r,this.measureLatency=n.default.isEnabled(),this.measureLatency&&(this.latencyMetrics=new s.default(e),this.latencyMetrics.init()),this.unload({shallow:!0}),this.addAll(t)}get length(){return this.pipeline.length}unload(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shallow;let t=void 0!==e&&e;this.pipeline=[],this.stepFns=new Map,this.measureLatency&&!t&&this.latencyMetrics.unload()}add(e){let t=e.fn,r=e.name,n=e.spec;if(!r)throw new Error(`Every step of the pipeline should be given a name in ${this.name}`);if(!n)throw new Error(`Every step of the pipeline should be given a spec ${r} in ${this.name}`);if("break"===n&&!this.isBreakable)throw new Error(`Cannot add a break step '${r}' to an unbreakable pipline`);return this.addPipelineStep({name:r,fn:t,spec:n||"all"})}addAll(e){for(let t=0;t<e.length;t+=1)this.add(e[t])}addPipelineStep(e){let t=e.name,r=e.fn,n=e.after,i=e.before,s=e.spec;if(this.stepFns.has(t))throw new Error(`trying to overwrite existing stepFn ${t} in ${this.name}`);this.stepFns.set(t,{fn:r,spec:s});const a=n||[],o=i||[],u=0===this.pipeline.length,c=a.length>0,l=o.length>0;if(!c&&!l||u)this.pipeline.push(t);else if(c&&!l){const e=a.map(e=>this.pipeline.indexOf(e)),r=Math.max(...e);if(e.indexOf(-1)>=0)throw new Error(`missing steps from 'after' list, after=${a}, pipeline=${this.pipeline}`);this.pipeline.splice(r+1,0,t)}else{if(!l||c)throw new Error("cannot take both before and after constraints");{const e=o.map(e=>this.pipeline.indexOf(e)).filter(e=>-1!==e),r=Math.min(...e);this.pipeline.splice(r,0,t)}}}removePipelineStep(e){const t=this.pipeline.indexOf(e);-1!==t&&this.pipeline.splice(t,1),this.stepFns.delete(e)}execute(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(let s=0;s<this.pipeline.length;s+=1){const a=Date.now(),o=this.pipeline[s];var n=this.stepFns.get(o);const u=n.fn,c=n.spec;let l;try{switch(c){case"break":case"annotate":l=u(e);break;case"collect":setTimeout(()=>u(e),0);break;case"blocking":r&&(l=u(e,t));break;default:i.default.error("Invalid spec for step",{spec:c,name:o,pipeline:this.name})}}catch(t){i.default.error("Exception in pipeline",{pipeline:this.name,url:e.url,step:o,spec:c},t);break}if(this.measureLatency&&this.latencyMetrics.addTiming(o,Date.now()-a),!1===l){if(this.isBreakable){i.default.debug(this.name,e.url,"Break at",o);break}i.default.debug(this.name,e.url,"ignoring attempted break of unbreakable pipeline at",o)}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82),i=u(r(11)),s=r(60),a=r(79),o=u(r(69));function u(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e,t){this.whitelist=new Set,this.whitelistPersist=new a.LazyPersistentObject(e),this.logger=o.default.get("core",{prefix:`url-whitelist:${e}`}),t&&this.migrate(t)}init(){return this.whitelistPersist.load().then(e=>{void 0!==e.urls&&(this.whitelist=new Set(e.urls),e.urls.some(e=>":"!==e.charAt(1))&&this.upgrade())})}clear(){this.whitelist.clear(),this.persistWhitelist()}persistWhitelist(){this.whitelistPersist.setValue({urls:[...this.whitelist.values()]})}upgrade(){const e=new Set;this.whitelist.forEach(t=>{let r;r=t===(0,s.getGeneralDomain)(t)?`g:${t}`:t===(0,s.extractHostname)(t)?`h:${t}`:`u:${t}`,e.add(r)}),this.whitelist=e,this.persistWhitelist()}migrate(e){const t=i.default.get(e,null);t&&(this.whitelist=new Set(t)),i.default.clear(e),this.persistWhitelist()}isWhitelisted(e){return this.whitelist.has(`u:${(0,n.cleanUrlProtocol)(e,!0)}`)||this.whitelist.has(`h:${(0,s.extractHostname)(e)}`)||this.whitelist.has(`g:${(0,s.getGeneralDomain)(e)}`)}getState(e){return{url:this.whitelist.has(`u:${(0,n.cleanUrlProtocol)(e,!0)}`),hostname:this.whitelist.has(`h:${(0,s.extractHostname)(e)}`),generalDomain:this.whitelist.has(`g:${(0,s.getGeneralDomain)(e)}`)}}clearState(e){this.changeState(e,"url","remove",!0),this.changeState(e,"hostname","remove",!0),this.changeState(e,"generalDomain","remove",!0),this.persistWhitelist()}changeState(e,t,r,i){let a;switch(this.logger.log(e,t,r,"changeState"),t){case"url":a=`u:${(0,n.cleanUrlProtocol)(e,!0)}`;break;case"hostname":a=`h:${(0,s.extractHostname)(e)}`;break;case"generalDomain":a=`g:${(0,s.getGeneralDomain)(e)}`;break;default:throw new Error("Supported types: url, hostname, generalDomain",t)}if(a){switch(r){case"add":this.whitelist.add(a);break;case"remove":this.whitelist.delete(a);break;case"toggle":this.whitelist.has(a)?this.whitelist.delete(a):this.whitelist.add(a);break;default:return void this.logger.error("Supprted actions: add, remove, toggle",r)}i||this.persistWhitelist()}else this.logger.log("Not valid",t,e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(22)),i=s(r(1143));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.worker=new i.default(`${n.default.baseURL}hpn/worker.bundle.js?name=${e||""}`,{name:e})}set onmessage(e){this.worker.onmessage=e}postMessage(){this.worker.postMessage(...arguments)}terminate(){this.worker.terminate()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Network=void 0,t.parseHostname=c,t.parseURL=l,t.isIPInternal=d;var n=o(r(122)),i=r(252),s=r(1159),a=o(r(1158));function o(e){return e&&e.__esModule?e:{default:e}}const u=s.Dns||a.default;function c(e){const t={hostname:null,username:"",password:"",port:null};let r=e,n=e.split("@");if(n.length>1){const e=n[0].split(":");t.username=e[0],t.password=e[1],r=n[1]}return(n=r.split(":")).length>1?(t.hostname=n[0],t.port=parseInt(n[1],10)):(t.hostname=n[0],t.port=80),t}function l(e){const t={};let r=e.split("://");if(!(r.length>=2))return null;{t.protocol=r[0];let e=r.slice(1,r.length).join("://");if(""===(r=e.split("/"))[0])return null;if(/[?!@#\$\^\&*\)\(+=]/g.test(r[0]))return null;const n=c(r[0]);t.hostname=n.hostname,t.port=n.port,t.username=n.username,t.password=n.password,t.path="/",t.query_string=null,r.length>1&&(r=(e=r.splice(1,r.length).join("/")).split("?"),t.path="/"+r[0],r.length>1&&(t.query_string=r.splice(1,r.length).join("?")),r=t.path.split(";"),t.path=r[0],r.length>1&&(t.query_string=r.splice(1,r.length).join(";")+"&"+(t.query_string||"")),r=t.path.split("#"),t.path=r[0],r.length>1&&(t.query_string=r.splice(1,r.length).join("#")+"&"+(t.query_string||"")))}return t}function d(e){const t=e.split(".");return 10===parseInt(t[0])||172===parseInt(t[0])&&parseInt(t[1])>=16&&parseInt(t[1])<=31||192===parseInt(t[0])&&168===parseInt(t[1])||127===parseInt(t[0])||0===parseInt(t[0])}t.Network=class{constructor(){this.dns=new u}isPublicDomain(e){return new Promise((t,r)=>{if("page"===e.action){const i=[];i.push(e.payload.url),e.payload.ref&&i.push(e.payload.ref),e.payload.red&&e.payload.red.forEach(e=>{i.push(e)}),n.default.debug("isPublicDomain: All urls in the message:",i),Promise.all(i.map(e=>this.isHostNamePrivate(e))).then(e=>{e.indexOf(!0)>-1?(n.default.debug("isPublicDomain: Contains private URL"),r(!1)):(n.default.debug("isPublicDomain: URLs are public"),t(!0))})}else t(!0)})}isHostNamePrivate(e){let t;try{t=l(e).hostname}catch(e){return Promise.resolve(!0)}return t?this.dns.resolveHost(t).then(e=>d(e)).catch(e=>(n.default.error("Could not resolve domain",t,". Be conservative and assume that the domain is private.",e),!0)):Promise.resolve(!0)}cacheDnsResolution(e,t){this.dns.cacheDnsResolution(e,t)}flushExpiredCacheEntries(){(0,i.nextTick)(()=>{this.dns.flushExpiredCacheEntries()}).catch(n.default.error)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];"function"==typeof n&&(e[r]=n.bind(t))}}},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i=1,s={},a=!1,o=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&l(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},n=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;n=function(t){var r=o.createElement("script");r.onreadystatechange=function(){l(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return s[i]=a,n(i),i++},u.clearImmediate=c}function c(e){delete s[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=s[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{c(e),a=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(17),r(92))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(1203);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}),t.isSearchEngineResult=function(e){var t=(0,a.cleanMozillaActions)(e);return"searchengine"===n(t,1)[0]},t.isValidUrl=function(e){const t=(0,a.getDetailsFromUrl)(e);if("google"===t.name.toLowerCase()&&t.subdomains.length>0&&"www"===t.subdomains[0].toLowerCase()&&(-1!==t.extra.indexOf("/search")||0===t.extra.indexOf("/url?")||-1!==t.extra.indexOf("q=")))return!1;if("bing"===t.name.toLowerCase()&&-1!==t.extra.indexOf("q="))return!1;if("yahoo"===t.name.toLowerCase()&&(1===t.subdomains.length&&"search"===t.subdomains[0].toLowerCase()&&0===t.path.indexOf("/search")||2===t.subdomains.length&&"search"===t.subdomains[1].toLowerCase()&&0===t.path.indexOf("/search")||2===t.subdomains.length&&"r"===t.subdomains[0].toLowerCase()&&"search"===t.subdomains[1].toLowerCase()))return!1;if(["suche.cliqz.com","search.cliqz.com"].indexOf(t.cleanHost)>-1)return!1;if(0===e.search(/http(s?):\/\/bit\.ly\/.*/i))return!1;if(0===e.search(/http(s?):\/\/t\.co\/.*/i))return!1;if(0===e.search(/http(s?):\/\/rover\.ebay\.com\/.*/i))return!1;const r=function(e,t){const r=t.split("&");for(let t=0;t<r.length;t+=1){const n=r[t].split("=");if(-1!==e.indexOf(n[0]))return n[1]}return null}(["q","query","search_query","field-keywords","search"],t.query);if(r){const n=s.getSearchEngines().filter(e=>e.urlDetails.host===t.host).map(e=>decodeURIComponent(e.getSubmissionForQuery(r)));if(n.some(t=>-1!==e.indexOf(t)))return!1}return!0};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(82)},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFactory=function(){return fetch},t.default=fetch,t.fetch=fetch,t.Headers=Headers,t.Request=Request,t.Response=Response},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t,r){let n,i;return function(){for(var s=arguments.length,a=Array(s),o=0;o<s;o++)a[o]=arguments[o];const u=Date.now();n&&u<n+r?(e.clearTimeout(i),i=e.setTimeout(()=>{n=u,t(...a)},r)):(n=u,t(...a))}},t.nextTick=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Promise.resolve().then(()=>e(...r))}},,,,,function(e,t,r){"use strict";function n(e,t,r){var n=r[r.length-1];e===n.element&&(r.pop(),n=r[r.length-1]);var i=n.element,s=n.index;if(Array.isArray(i))i.push(e);else if(s===t.length-2){i[t.pop()]=e}else t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var r,n,i,s,a,o,u,c,l,d,h="";r=t.pop();)if(n=r.obj,h+=r.prefix||"",i=r.val||"")h+=i;else if("object"!=typeof n)h+=void 0===n?null:JSON.stringify(n);else if(null===n)h+="null";else if(Array.isArray(n)){for(t.push({val:"]"}),s=n.length-1;s>=0;s--)a=0===s?"":",",t.push({obj:n[s],prefix:a});t.push({val:"["})}else{for(u in o=[],n)n.hasOwnProperty(u)&&o.push(u);for(t.push({val:"}"}),s=o.length-1;s>=0;s--)l=n[c=o[s]],d=s>0?",":"",d+=JSON.stringify(c)+":",t.push({obj:l,prefix:d});t.push({val:"{"})}return h},t.parse=function(e){for(var t,r,i,s,a,o,u,c,l,d=[],h=[],f=0;;)if("}"!==(t=e[f++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":f+=3,n(null,d,h);break;case"t":f+=3,n(!0,d,h);break;case"f":f+=4,n(!1,d,h);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(r="",f--;;){if(i=e[f++],!/[\d\.\-e\+]/.test(i)){f--;break}r+=i}n(parseFloat(r),d,h);break;case'"':for(s="",a=void 0,o=0;'"'!==(u=e[f++])||"\\"===a&&o%2==1;)s+=u,"\\"===(a=u)?o++:o=0;n(JSON.parse('"'+s+'"'),d,h);break;case"[":c={element:[],index:d.length},d.push(c.element),h.push(c);break;case"{":l={element:{},index:d.length},d.push(l.element),h.push(l);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===d.length)return d.pop();n(d.pop(),d,h)}}},function(e,t,r){(function(n){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(1126)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(s=++i)}),e.splice(s,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window&&void 0!==window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,r(92))},function(e,t,r){var n=r(1128),i=r(1127),s=i;s.v1=n,s.v4=i,e.exports=s},,,,,,function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(278),i=r(568),s=r(156);e.exports=function(e){return s(e)?n(e,!0):i(e)}},function(e,t){e.exports=function(e,t){return"__proto__"==t?void 0:e[t]}},function(e,t,r){var n=r(272)(Object.getPrototypeOf,Object);e.exports=n},function(e,t,r){var n=r(210),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,r){var n=r(209),i=r(153);e.exports=function(e,t,r){(void 0===r||i(e[t],r))&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t,r){var n=r(210)(r(118),"Map");e.exports=n},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t){var r=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t,r){var n=r(619),i=r(618),s=r(617),a=s&&s.isTypedArray,o=a?i(a):n;e.exports=o},function(e,t){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?r:t)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){(function(e){var n=r(118),i=r(620),s="object"==typeof t&&t&&!t.nodeType&&t,a=s&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===s?n.Buffer:void 0,u=(o?o.isBuffer:void 0)||i;e.exports=u}).call(this,r(67)(e))},function(e,t,r){var n=r(621),i=r(117),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!o.call(e,"callee")};e.exports=u},function(e,t,r){var n=r(622),i=r(277),s=r(157),a=r(276),o=r(275),u=r(274),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=s(e),l=!r&&i(e),d=!r&&!l&&a(e),h=!r&&!l&&!d&&u(e),f=r||l||d||h,p=f?n(e.length,String):[],m=p.length;for(var _ in e)!t&&!c.call(e,_)||f&&("length"==_||d&&("offset"==_||"parent"==_)||h&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||o(_,m))||p.push(_);return p}},function(e,t){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return r.test(e)}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(17))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=h(r(11)),s=h(r(59)),a=h(r(31)),o=h(r(251)),u=r(79),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(65)),l=h(r(22)),d=h(r(24));function h(e){return e&&e.__esModule?e:{default:e}}function f(){const e=a.default.module("core");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.action("queryHTML",...r)}function p(e){return!!e&&(e.indexOf("getTime")>-1&&e.indexOf("getDay")>-1&&e.indexOf("getDate")>-1||(e.indexOf("onbeforeunload")>-1||e.indexOf("downloadEXEWithName")>-1))}function m(e,t){(function(){const e=a.default.module("core");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.action("getHTML",...r)})(e).then(r=>{const n=r[0];n&&(n.indexOf("progress-bar-warning")>-1&&n.indexOf("progress-bar-success")>-1&&n.indexOf("buffer-progress")>-1||n.indexOf("play-progress")>-1?t(e,"cheat"):n.indexOf("security")>-1&&n.indexOf("update")>-1&&n.indexOf("account")>-1&&t(e,"password"))})}function _(e,t){!function(e,t){const r=e.replace("http://","").replace("https://","").split("/")[0];f(e,"script","src").then(n=>{n.filter(e=>e).some(e=>e.replace("http://","").replace("https://","").split("/")[0]!==r?null:(0,o.default)(e).then(e=>e.text()).then(e=>p(e)))&&t(e,"script")}),f(e,"script","innerHTML").then(r=>{r.some(p)&&t(e,"script")})}(e,t),m(e,t),function(e,t){f(e,"input","type,value,name").then(e=>e.some(e=>Object.keys(e).some(e=>"password"===e||"passwort"===e)))&&t(e,"password")}(e,t)}const g={WHITELISTED_NONE:0,WHITELISTED_SAFE:1,WHITELISTED_TEMPORARY:2,WHITELISTED_PERMANENTLY:3,BW_URL:l.default.settings.BW_URL,DELAY:24,forceWhiteList:new u.LazyPersistentObject("anti-phishing-fw"),blackWhiteList:new u.LazyPersistentObject("anti-phishing-bw"),init(){g.blackWhiteList.load(),g.clearBWList(),g.forceWhiteList.load()},clearBWList(){const e=g.blackWhiteList.value,t=c.newUTCDate();t.setHours(t.getHours()-g.DELAY);const r=c.hourString(t);for(const t in e)"h"in e[t]?e[t].h<r&&(delete e[t],g.blackWhiteList.setDirty()):(delete e[t],g.blackWhiteList.setDirty())},unload(){g.saveLists()},clear(){g.clearBlackWhitelist(),g.clearForceWhitelist()},saveLists(){g.blackWhiteList.save(),g.forceWhiteList.save()},getSplitMd5(e){const t=function(e){const t=e.replace("http://","").replace("https://","").split("/")[0];return(0,s.default)(t)}(e);return[t.substring(0,t.length-16),t.substring(16,t.length)]},onHwActiveURL(e){const t=e.activeURL;var r=g.getSplitMd5(t),i=n(r,2);const s=i[0],a=i[1];g.blackWhiteList[s]&&g.blackWhiteList[s][a]||_(t,g.updateSuspiciousStatus)},whitelist(e,t){t=t||g.WHITELISTED_PERMANENTLY;const r=g.getSplitMd5(e)[0];g.forceWhiteList.value[r]=t,g.forceWhiteList.setDirty()},whitelistTemporary(e){g.whitelist(e,g.WHITELISTED_TEMPORARY)},markAsSafe(e){g.whitelist(e,g.WHITELISTED_SAFE)},getUrlWhitelistStatus(e){const t=g.getSplitMd5(e)[0];return g.forceWhiteList.value[t]||g.WHITELISTED_NONE},isInWhitelist:e=>g.getUrlWhitelistStatus(e)!==g.WHITELISTED_NONE,removeForceWhitelist(e){const t=g.getSplitMd5(e)[0],r=g.forceWhiteList.value;t in r&&(delete r[t],g.forceWhiteList.setDirty())},clearForceWhitelist(){g.forceWhiteList.value={},g.forceWhiteList.setDirty()},clearBlackWhitelist(){g.blackWhiteList.value={},g.blackWhiteList.setDirty()},isInABTest:()=>i.default.get("cliqz-anti-phishing",!1),isAntiPhishingActive:()=>i.default.get("cliqz-anti-phishing-enabled",!0),updateSuspiciousStatus(e,t){const r=g.blackWhiteList.value;var i=g.getSplitMd5(e),s=n(i,2);const o=s[0],u=s[1];r[o]&&r[o][u]||(r[o]||(r[o]={}),r[o][u]=`suspicious:${t}`,g.blackWhiteList.setDirty(),function(){const e=a.default.module("human-web");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.action("addDataToUrl",...r)}(e,"isMU",t).catch(()=>d.default.log("failed to update url",e)))}};t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.historySources=t.mkHistogramSchema=t.integersToHistogram=t.isAutocompleteAction=t.isEnterAction=t.isClickAction=t.mkCountSchema=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e){return e&&e.__esModule?e:{default:e}}(r(215)),s=r(286);const a=e=>e.reduce((e,t)=>n({},e,t)),o=e=>({[e]:{type:"integer",minimum:0}}),u=e=>e.map(o),c=()=>({source:{required:[],properties:n({},a(u(["history","backend","mixed"])))}}),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{action:{required:[],properties:n({},a(u(["click","enter",...e])))}}},d=e=>({required:[],properties:n({},a(Array.from(Array(e).keys()).map(o)),o("rest"))}),h=new Set(Object.keys(s.RESULT_SOURCE_MAP.history)),f=new Set(Object.keys(s.RESULT_SOURCE_MAP.backend)),p=e=>{let t=e.action,r=e.isAutocomplete;return"enter"===t&&r},m=e=>{return"click"===e.action},_=e=>{let t=e.action,r=e.isAutocomplete;return"enter"===t&&!r},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.binSize;let n=void 0===r?1:r;var s=t.binCount;let a=void 0===s?10:s;var o=t.overflowBinName;let u=void 0===o?"rest":o;return new i.default(e.map(e=>parseInt(e/n,10)).map(e=>!a||e<a?e*n:u)).toObj()},y=e=>{const t=(e=>e.some(e=>h.has(e)))(e),r=(e=>e.some(e=>f.has(e)))(e);return{hasOnlyHistorySources:t&&!r,hasOnlyBackendSources:!t&&r,hasMixedSources:t&&r}};t.default=[{name:"search.sessions",version:1,needsGid:!0,sendToBackend:!0,generate:e=>{const t=e.records.get("search.session");if(0===t.length)return[];const r=t.filter(e=>{return e.hasUserInput}),n=r.map(e=>{var t=e.results;return void 0===t?[]:t}).filter(e=>e.length>0),i=r.map(e=>{var t=e.selection;return void 0===t?[]:t}),s=n.map(e=>[].concat(...e.map(e=>{var t=e.sources;return void 0===t?[]:t}))).map(y).filter(e=>{let t=e.hasOnlyHistorySources,r=e.hasOnlyBackendSources,n=e.hasMixedSources;return t||r||n}),a=i.filter(e=>"cliqz"===e.origin),o=i.filter(e=>"direct"===e.origin),u=i.filter(e=>"other"===e.origin),c=i.filter(e=>null===e.origin),l=a.map(e=>{var t=e.sources;return y(void 0===t?[]:t)});return[{results:{total:n.length,origin:{cliqz:{total:s.length,source:{history:s.filter(e=>{return e.hasOnlyHistorySources}).length,backend:s.filter(e=>{return e.hasOnlyBackendSources}).length,mixed:s.filter(e=>{return e.hasMixedSources}).length}}}},selections:{total:i.length,index:g(i.map(e=>{return e.index}),{binSize:1,binCount:16}),queryLength:g(i.map(e=>{return e.queryLength}),{binSize:1,binCount:32}),origin:{cliqz:{total:a.length,action:{autocomplete:a.filter(p).length,click:a.filter(m).length,enter:a.filter(_).length},source:{history:l.filter(e=>{return e.hasOnlyHistorySources}).length,backend:l.filter(e=>{return e.hasOnlyBackendSources}).length,mixed:l.filter(e=>{return e.hasMixedSources}).length}},direct:{total:o.length,action:{click:o.filter(m).length,enter:o.filter(_).length}},other:{total:u.length,action:{click:u.filter(m).length,enter:u.filter(_).length}},abandoned:{total:c.length,showTime:g(c.map(e=>{let t=e.showTime;return Math.round(t/1e3)},{binSize:1,binCount:10}))}}}}]},schema:{required:[],properties:{results:{required:[],properties:n({},o("total"),{origin:{required:[],properties:{cliqz:{required:[],properties:n({},o("total"),c())}}}})},selections:{required:[],properties:n({},o("total"),{index:n({},d(16)),queryLength:n({},d(32)),origin:{required:[],properties:n({},o("total"),{cliqz:{required:[],properties:n({},o("total"),l(["autocomplete"]),c())},direct:{required:[],properties:n({},o("total"),l())},other:{required:[],properties:n({},o("total"),l())},abandoned:{required:[],properties:n({},o("total"),{showTime:n({},d(10))})}})}})}}}}],t.mkCountSchema=o,t.isClickAction=m,t.isEnterAction=_,t.isAutocompleteAction=p,t.integersToHistogram=g,t.mkHistogramSchema=d,t.historySources=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.indicesHistogramToArray=function(e){const t=[],r=Math.max(...e.keys());for(let n=0;n<=r;n+=1)t.push(e.get(n));return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"metrics.performance.webrequest-pipeline.timings",schema:{type:"array",minItems:1,items:{required:["step","histogram"],type:"object",properties:{step:{type:"string"},histogram:{type:"object",minProperties:1,required:[],properties:{0:{type:"integer",minimum:1},1:{type:"integer",minimum:1},2:{type:"integer",minimum:1},3:{type:"integer",minimum:1},4:{type:"integer",minimum:1},"5-9":{type:"integer",minimum:1},"10-14":{type:"integer",minimum:1},"15-19":{type:"integer",minimum:1},"20-24":{type:"integer",minimum:1},"25-29":{type:"integer",minimum:1},"30-39":{type:"integer",minimum:1},"40-49":{type:"integer",minimum:1},"50-59":{type:"integer",minimum:1},"60-69":{type:"integer",minimum:1},"70+":{type:"integer",minimum:1}}}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ANCHOR_RESULT="anchor",t.HISTORY_RESULT="history",t.IMAGE_RESULT="image",t.INTERNAL_RESULT="internal",t.LIVE_TICKER_RESULT="liveTicker",t.MOVIE_INFO_RESULT="movieInfo",t.NEWS_RESULT="news",t.SOCIAL_RESULT="social"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESULT_SOURCE_MAP=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(285);const s={history:{C:"Cluster",H:"History"},backend:{m:"Generic",X:"SmartCliqz",n:"News",h:"Wikipedia",r:"Recipe",v:"Video",p:"People",c:"Census",k:"Science",l:"Dictionary",q:"Qaa",s:"Shopping",g:"Game",o:"Movie"},"default-search":{"default-search":"Default search engine"},"custom-search":{"custom-search":"Custom search engine"},navigation:{"navigate-to":"Direct URL"},"query-suggestion":{Z:"Query suggestion"}},a=Object.keys(s).map(e=>Object.keys(s[e])).reduce((e,t)=>e.concat(t)),o=["CliqzEZ","EmergencyContactEZ","EntityCurrency","EntityDownload","EntityFlight","EntityGeneric","EntityKPI","EntityLocal","EntityLotto","EntityMovie","EntityMusic","EntityNews","EntityTopNews","EntityTime","EntityVOD","EntityVideo","EntityWeather","SoccerEZ"],u=[i.ANCHOR_RESULT,i.HISTORY_RESULT,i.IMAGE_RESULT,i.INTERNAL_RESULT,i.LIVE_TICKER_RESULT,i.MOVIE_INFO_RESULT,i.NEWS_RESULT,i.SOCIAL_RESULT],c=()=>({sources:{type:"array",items:{type:"string",enum:a}},classes:{type:"array",items:{type:"string",enum:o}}});t.default=[{name:"search.session",schema:{required:["version","hasUserInput","results"],properties:{version:{type:"integer",value:2},hasUserInput:{type:"boolean"},results:{type:"array",items:{type:"object",required:[],properties:n({},c())}},selection:{required:[],properties:n({action:{type:"string",enum:["click","enter"]},element:{type:"string",enum:["","description","full-url","image","logo","map-image","title","url"]},index:{type:"integer",minimum:0},isAutocomplete:{type:"boolean"}},c(),{origin:{type:"string",enum:["cliqz","other","direct"]},queryLength:{type:"integer",minimum:0},showTime:{type:"integer",minimum:0},subResult:{required:[],properties:{type:{type:"string",enum:u},index:{type:"integer",minimum:0}}}})}}}},{name:"metrics.search.latency",sendToBackend:!0,version:1,schema:{required:["backend","latency"],properties:{backend:{type:"string",enum:["de","us","fr","uk","es","it"]},latency:{required:[],properties:{0:{type:"integer",minimum:0},20:{type:"integer",minimum:0},40:{type:"integer",minimum:0},60:{type:"integer",minimum:0},80:{type:"integer",minimum:0},100:{type:"integer",minimum:0},120:{type:"integer",minimum:0},140:{type:"integer",minimum:0},160:{type:"integer",minimum:0},180:{type:"integer",minimum:0},200:{type:"integer",minimum:0},300:{type:"integer",minimum:0},400:{type:"integer",minimum:0},500:{type:"integer",minimum:0},600:{type:"integer",minimum:0},700:{type:"integer",minimum:0},800:{type:"integer",minimum:0},900:{type:"integer",minimum:0},rest:{type:"integer",minimum:0}}}}}}],t.RESULT_SOURCE_MAP=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NEWS_EDITIONS=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(e){return e&&e.__esModule?e:{default:e}}(r(31));function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}function o(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={};for(let t=0;t<e.length;t+=1){var s=e[t];const r=s.key,i=s.value;n[r]={type:"string",enum:[i]}}return t&&(n.index={type:"integer",minimum:0,maximum:100}),{name:`freshtab.${e.map(e=>{return e.value}).filter(e=>e).join(".")}`,schema:{required:[...Object.keys(n),...Object.keys(r)],properties:i({},n,r)}}}const u=t.NEWS_EDITIONS=["de","de-tr-en","es","fr","gb","intl","it","pl","us"];t.default=[{name:"freshtab.prefs.state",offsets:[0],generate:(()=>{var e=a(function*(){return[yield s.default.module("freshtab").action("getState")]});return function(){return e.apply(this,arguments)}})(),schema:{required:["active"],properties:{active:{type:"boolean"}}}},{name:"freshtab.prefs.blueTheme",offsets:[0],generate:(()=>{var e=a(function*(){return[{enabled:yield s.default.module("freshtab").action("isBlueThemeEnabled")}]});return function(){return e.apply(this,arguments)}})(),schema:{required:["enabled"],properties:{enabled:{type:"boolean"}}}},{name:"freshtab.prefs.config",offsets:[0],generate:(()=>{var e=a(function*(){return[yield s.default.module("freshtab").action("getComponentsState")]});return function(){return e.apply(this,arguments)}})(),schema:{required:["components","historyDials","customDials","search","news","background"],properties:{components:{type:"object"},historyDials:{required:["visible"],properties:{visible:{type:"boolean"}}},customDials:{required:["visible"],properties:{visible:{type:"boolean"}}},search:{required:["visible"],properties:{visible:{type:"boolean"}}},news:{required:["visible","preferedCountry"],properties:{visible:{type:"boolean"},preferedCountry:{type:"string"}}},background:{required:["image","index"],properties:{image:{type:"string"},index:{type:"number"}}}}}},o([{key:"type",value:"home"},{key:"action",value:"show"}],!1),o([{key:"type",value:"home"},{key:"action",value:"blur"}],!1),o([{key:"type",value:"home"},{key:"action",value:"focus"}],!1),o([{key:"type",value:"home"},{key:"action",value:"hide"}],!1),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"settings"}],!1),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"history"}],!1),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"worldcup"}],!1),o([{key:"type",value:"worldcup.notification"},{key:"action",value:"click"},{key:"target",value:"group.later"}],!1),o([{key:"type",value:"worldcup.notification"},{key:"action",value:"click"},{key:"target",value:"knockout.later"}],!1),o([{key:"type",value:"worldcup.notification"},{key:"action",value:"click"},{key:"target",value:"knockout.close"}],!1),o([{key:"type",value:"worldcup.notification"},{key:"action",value:"click"},{key:"target",value:"group.close"}],!1),o([{key:"type",value:"worldcup.notification"},{key:"action",value:"show"},{key:"target",value:"group"}],!1),o([{key:"type",value:"worldcup.notification"},{key:"action",value:"show"},{key:"target",value:"knockout"}],!1),o([{key:"type",value:"worldcup.notification"},{key:"action",value:"click"},{key:"target",value:"knockout.explore"}],!1),o([{key:"type",value:"worldcup.notification"},{key:"action",value:"click"},{key:"target",value:"group.explore"}],!1),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"topsite"}],!0),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"delete_topsite"}],!0),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"favorite"}],!0),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"add_favorite"}],!0),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"delete_favorite"}],!0),o([{key:"type",value:"home"},{key:"action",value:"focus"},{key:"target",value:"search_bar"}],!1),o([{key:"type",value:"home"},{key:"action",value:"blur"},{key:"target",value:"search_bar"}],!1),o([{key:"type",value:"home"},{key:"action",value:"click"},{key:"target",value:"news_pagination"}],!0),o([{key:"type",value:"offrz"},{key:"action",value:"show"}],!1),o([{key:"type",value:"offrz"},{key:"action",value:"click"},{key:"target",value:"use"}],!1),o([{key:"type",value:"offrz"},{key:"action",value:"click"},{key:"target",value:"copy_code"}],!1),o([{key:"type",value:"offrz"},{key:"action",value:"click"},{key:"target",value:"remove_offer"}],!1),o([{key:"type",value:"offrz"},{key:"action",value:"click"},{key:"target",value:"remove"}],!1),o([{key:"type",value:"offrz"},{key:"action",value:"hover"},{key:"target",value:"conditions"}],!1),...function e(t,r){for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return r?e(((e,t)=>[].concat(...e.map(e=>t.map(t=>[].concat(e,t)))))(t,r),...i):t}(["click","hover"],["topnews","breakingnews","yournews"]).map(e=>{var t=n(e,2);return o([{key:"type",value:"home"},{key:"action",value:t[0]},{key:"target",value:t[1]}],!0,{edition:{type:"string",enum:u}})})]},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,a=e.dataLevel,o=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",n="schema"+s):n=o,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var f=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"less",i+=" than ",i+=h?"' + "+n+" + '":""+o,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,a=e.dataLevel,o=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",n="schema"+s):n=o;var f="maxLength"==t?">":"<";i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?i+=" "+d+".length ":i+=" ucs2length("+d+") ",i+=" "+f+" "+n+") { ";var p=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=h?"' + "+n+" + '":""+o,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var _=i;return i=m.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,a=e.dataLevel,o=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",n="schema"+s):n=o,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+d+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var f=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"less",i+=" than ",i+=h?"' + "+n+" + '":""+o,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,a=e.dataLevel,o=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",n="schema"+s):n=o;var f="maximum"==t,p=f?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[p],_=e.opts.$data&&m&&m.$data,g=f?"<":">",y=f?">":"<",v=void 0;if(_){var b=e.util.getData(m.$data,a,e.dataPathArr),$="exclusive"+s,w="exclType"+s,k="exclIsNumber"+s,M="' + "+(x="op"+s)+" + '";i+=" var schemaExcl"+s+" = "+b+"; ",i+=" var "+$+"; var "+w+" = typeof "+(b="schemaExcl"+s)+"; if ("+w+" != 'boolean' && "+w+" != 'undefined' && "+w+" != 'number') { ";var S;v=p;(S=S||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(v||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var O=i;i=S.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+O+"]); ":i+=" validate.errors = ["+O+"]; return false; ":i+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+w+" == 'number' ? ( ("+$+" = "+n+" === undefined || "+b+" "+g+"= "+n+") ? "+d+" "+y+"= "+b+" : "+d+" "+y+" "+n+" ) : ( ("+$+" = "+b+" === true) ? "+d+" "+y+"= "+n+" : "+d+" "+y+" "+n+" ) || "+d+" !== "+d+") { var op"+s+" = "+$+" ? '"+g+"' : '"+g+"='; ",void 0===o&&(v=p,c=e.errSchemaPath+"/"+p,n=b,h=_)}else{M=g;if((k="number"==typeof m)&&h){var x="'"+M+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+m+" "+g+"= "+n+" ? "+d+" "+y+"= "+m+" : "+d+" "+y+" "+n+" ) || "+d+" !== "+d+") { "}else{k&&void 0===o?($=!0,v=p,c=e.errSchemaPath+"/"+p,n=m,y+="="):(k&&(n=Math[f?"min":"max"](m,o)),m===(!k||n)?($=!0,v=p,c=e.errSchemaPath+"/"+p,y+="="):($=!1,M+="="));x="'"+M+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+d+" "+y+" "+n+" || "+d+" !== "+d+") { "}}v=v||t,(S=S||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(v||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+x+", limit: "+n+", exclusive: "+$+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+M+" ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";O=i;return i=S.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+O+"]); ":i+=" validate.errors = ["+O+"]; return false; ":i+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",i=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.isTop&&(n+=" var validate = ",i&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){var o=e.level,u=e.dataLevel,c=e.schema["false schema"],l=e.schemaPath+e.util.getProperty("false schema"),d=e.errSchemaPath+"/false schema",h=!e.opts.allErrors,f="data"+(u||""),p="valid"+o;if(!1===e.schema){e.isTop?h=!0:n+=" var "+p+" = false; ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(g||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var m=n;n=J.pop(),!e.compositeRule&&h?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=i?" return data; ":" validate.errors = null; return true; ":n+=" var "+p+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var _=e.isTop;o=e.level=0,u=e.dataLevel=0,f="data";e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{o=e.level,f="data"+((u=e.dataLevel)||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+o+" = errors;"}p="valid"+o,h=!e.opts.allErrors;var g,y="",v="",b=e.schema.type,$=Array.isArray(b);if($&&1==b.length&&(b=b[0],$=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),b){if(e.opts.coerceTypes)var w=e.util.coerceToTypes(e.opts.coerceTypes,b);var k=e.RULES.types[b];if(w||$||!0===k||k&&!Q(k)){l=e.schemaPath+".type",d=e.errSchemaPath+"/type",l=e.schemaPath+".type",d=e.errSchemaPath+"/type";var M=$?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[M](b,f,!0)+") { ",w){var S="dataType"+o,O="coerced"+o;n+=" var "+S+" = typeof "+f+"; ","array"==e.opts.coerceTypes&&(n+=" if ("+S+" == 'object' && Array.isArray("+f+")) "+S+" = 'array'; "),n+=" var "+O+" = undefined; ";var x="",T=w;if(T)for(var E,D=-1,L=T.length-1;D<L;)E=T[D+=1],D&&(n+=" if ("+O+" === undefined) { ",x+="}"),"array"==e.opts.coerceTypes&&"array"!=E&&(n+=" if ("+S+" == 'array' && "+f+".length == 1) { "+O+" = "+f+" = "+f+"[0]; "+S+" = typeof "+f+";  } "),"string"==E?n+=" if ("+S+" == 'number' || "+S+" == 'boolean') "+O+" = '' + "+f+"; else if ("+f+" === null) "+O+" = ''; ":"number"==E||"integer"==E?(n+=" if ("+S+" == 'boolean' || "+f+" === null || ("+S+" == 'string' && "+f+" && "+f+" == +"+f+" ","integer"==E&&(n+=" && !("+f+" % 1)"),n+=")) "+O+" = +"+f+"; "):"boolean"==E?n+=" if ("+f+" === 'false' || "+f+" === 0 || "+f+" === null) "+O+" = false; else if ("+f+" === 'true' || "+f+" === 1) "+O+" = true; ":"null"==E?n+=" if ("+f+" === '' || "+f+" === 0 || "+f+" === false) "+O+" = null; ":"array"==e.opts.coerceTypes&&"array"==E&&(n+=" if ("+S+" == 'string' || "+S+" == 'number' || "+S+" == 'boolean' || "+f+" == null) "+O+" = ["+f+"]; ");n+=" "+x+" if ("+O+" === undefined) {   ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(g||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=$?""+b.join(","):""+b,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=$?""+b.join(","):""+b,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";m=n;n=J.pop(),!e.compositeRule&&h?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var P=u?"data"+(u-1||""):"parentData",A=u?e.dataPathArr[u]:"parentDataProperty";n+=" "+f+" = "+O+"; ",u||(n+="if ("+P+" !== undefined)"),n+=" "+P+"["+A+"] = "+O+"; } "}else{(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(g||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=$?""+b.join(","):""+b,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=$?""+b.join(","):""+b,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";m=n;n=J.pop(),!e.compositeRule&&h?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!s)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",h&&(n+=" } if (errors === ",n+=_?"0":"errs_"+o,n+=") { ",v+="}");else{var j=e.RULES;if(j)for(var R=-1,I=j.length-1;R<I;)if(Q(k=j[R+=1])){if(k.type&&(n+=" if ("+e.util.checkDataType(k.type,f)+") { "),e.opts.useDefaults&&!e.compositeRule)if("object"==k.type&&e.schema.properties){c=e.schema.properties;var C=Object.keys(c);if(C)for(var Y,F=-1,N=C.length-1;F<N;){if(void 0!==(q=c[Y=C[F+=1]]).default)n+="  if ("+(z=f+e.util.getProperty(Y))+" === undefined) "+z+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(q.default)+" ":n+=" "+JSON.stringify(q.default)+" ",n+="; "}}else if("array"==k.type&&Array.isArray(e.schema.items)){var U=e.schema.items;if(U){D=-1;for(var q,H=U.length-1;D<H;){var z;if(void 0!==(q=U[D+=1]).default)n+="  if ("+(z=f+"["+D+"]")+" === undefined) "+z+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(q.default)+" ":n+=" "+JSON.stringify(q.default)+" ",n+="; "}}}var B=k.rules;if(B)for(var W,V=-1,G=B.length-1;V<G;)if(Z(W=B[V+=1])){var K=W.code(e,W.keyword,k.type);K&&(n+=" "+K+" ",h&&(y+="}"))}if(h&&(n+=" "+y+" ",y=""),k.type&&(n+=" } ",b&&b===k.type&&!w)){n+=" else { ";var J;l=e.schemaPath+".type",d=e.errSchemaPath+"/type";(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(g||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=$?""+b.join(","):""+b,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=$?""+b.join(","):""+b,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";m=n;n=J.pop(),!e.compositeRule&&h?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}h&&(n+=" if (errors === ",n+=_?"0":"errs_"+o,n+=") { ",v+="}")}}function Q(e){for(var t=e.rules,r=0;r<t.length;r++)if(Z(t[r]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return h&&(n+=" "+v+" "),_?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+p+" = errors === errs_"+o+";",n=e.util.cleanUpCode(n),_&&(n=e.util.finalCleanUpCode(n,i)),n}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&function(e){return function(t){return function(r,n){var i={key:r,value:t[r]},s={key:n,value:t[n]};return e(i,s)}}}(t.cmp),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var s,a;if(Array.isArray(t)){for(a="[",s=0;s<t.length;s++)s&&(a+=","),a+=e(t[s])||"null";return a+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=i.push(t)-1,u=Object.keys(t).sort(n&&n(t));for(a="",s=0;s<u.length;s++){var c=u[s],l=e(t[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return i.splice(o,1),"{"+a+"}"}}(e)}},function(e,t,r){"use strict";var n=r(119);e.exports=function(e){n.copy(e,this)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(723)),i=o(r(59)),s=r(55),a=o(r(76));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return new Promise((r,n)=>{(0,s.httpPost)(e,t=>{try{const i=JSON.parse(t.response);r(i)}catch(r){n(`Backend ${e} could not parse JSON: ${t.response}`)}},JSON.stringify(t),n,15e3)})}t.default=class{constructor(e){this.backendUrl=e.get("backend.url")}sendDemographics(e,t){return a.default.debug(t,e),u(`${this.backendUrl}/${t}`,{id:e}).then(e=>e.id?e.id:Promise.reject("No id returned by the backend."))}newInstall(e){return this.sendDemographics(e,"new_install")}reappearingUser(e){return this.sendDemographics(e,"reappearing_user")}activeUserSignal(e){return this.sendDemographics(e,"active_user")}updateGID(e){a.default.log("updateDemographics",e);const t=(0,i.default)(e),r=t.slice(0,3);return u(`${this.backendUrl}/update_gid`,{hash_prefix:r}).then(e=>{if(a.default.log("updateGID response",e),e.candidates){let r=null;if(e.candidates.forEach(e=>{e.hash===t&&(r=e.gid)}),null!==r)return Promise.resolve(r)}return Promise.reject(`No valid GID found ${t}`)})}sendSignal(e){return a.default.debug("sendSignal",e),"wifi"!==n.default.type?Promise.reject("Device is not connected to WiFi"):u(`${this.backendUrl}/collect`,e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(69));t.default=n.default.get("adblocker",{level:"log"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdBlocker=t.ADB_USER_LANG=t.ADB_DEFAULT_VALUE=t.ADB_PREF_VALUES=t.ADB_ABTEST_PREF=t.ADB_PREF_OPTIMIZED=t.ADB_PREF=t.ADB_DISK_CACHE=t.ADB_VERSION=void 0,t.adbABTestEnabled=O,t.isSupportedProtocol=x;var n=v(r(148)),i=v(r(32)),s=r(31),a=v(s),o=v(r(11)),u=r(60),c=v(r(244)),l=r(419),d=v(r(298)),h=r(52),f=v(r(735)),p=v(r(734)),m=r(733),_=v(m),g=v(r(296)),y=v(r(243));function v(e){return e&&e.__esModule?e:{default:e}}const b=t.ADB_VERSION=12,$=t.ADB_DISK_CACHE="cliqz-adb-disk-cache",w=t.ADB_PREF="cliqz-adb",k=(t.ADB_PREF_OPTIMIZED="cliqz-adb-optimized",t.ADB_ABTEST_PREF="cliqz-adb-abtest"),M=t.ADB_PREF_VALUES={Enabled:1,Disabled:0},S=(t.ADB_DEFAULT_VALUE=M.Disabled,t.ADB_USER_LANG="cliqz-adb-lang");function O(){return o.default.get(k,M.Enabled)}function x(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ws://")||e.startsWith("wss://")}const T={1:"other",2:"script",3:"image",4:"css",5:"object",6:"document",7:"iframe",8:"refresh",9:"xbl",10:"ping",11:"xhr",12:"object_subrequest",13:"dtd",14:"font",15:"media",16:"websocket",17:"csp_report",18:"xslt",19:"beacon",20:"fetch",21:"imageset"},E={onDiskCache:!0,compressDiskCache:!1,useCountryList:!0,loadNetworkFilters:!0,loadCosmeticFilters:"mobile"!==h.platformName};class D{constructor(e){var t=Object.assign({},E,e);const r=t.onDiskCache,n=t.compressDiskCache,i=t.loadNetworkFilters,s=t.loadCosmeticFilters,a=t.useCountryList;this.useCountryList=a,this.onDiskCache=r,this.compressDiskCache=n,this.loadNetworkFilters=i,this.loadCosmeticFilters=s,this.diagnosisEnabled=!1,this.blockingLogger=new Map,this.logs=[],this.engine=null,this.resetEngine(),this.listsManager=null,this.resetLists()}log(e){const t=new Date,r=`${t.getHours()}:${t.getMinutes()} ${e}`;this.logs.push(r),g.default.log(e)}logBlocking(e,t,r){if(this.diagnosisEnabled){6!==e.cpt&&this.blockingLogger.has(e.sourceUrl)||this.blockingLogger.set(e.sourceUrl,["<tr>\n          <th>Time</th>\n          <th>Blocked</th>\n          <th>Redirect</th>\n          <th>Filter</th>\n          <th>Cpt</th>\n          <th>Url</th>\n        </tr>"]);let n="white";t.redirect?n="#ffe552":t.exception?n="#33cc33":t.match&&(n="#ff5050"),this.blockingLogger.get(e.sourceUrl).push(`<tr\n        style="background: ${n}">\n        <td>${r}</td>\n        <td>${!!t.match}</td>\n        <td>${!!t.redirect}</td>\n        <td>${t.filter||""}</td>\n        <td>${T[e.cpt]||e.cpt}</td>\n        <td>${e.url}</td>\n      </tr>`)}}resetLists(){this.log("Reset lists"),null!==this.listsManager&&this.listsManager.stop(),this.listsManager=new _.default(this.useCountryList,o.default.get(S,null)),this.listsManager.onUpdate(e=>{const t=e.filter(e=>{const t=e.isFiltersList,r=e.asset,n=e.checksum;return!t&&this.engine.resourceChecksum!==n&&(this.log(`Resources list ${r} (${n}) will be updated`),!0)});if(t.length>0){const e=Date.now();this.engine.onUpdateResource(t),this.log(`Engine updated with ${t.length} resources`+` (${Date.now()-e} ms)`)}const r=e.filter(e=>{const t=e.asset,r=e.checksum;return!(!e.isFiltersList||this.engine.hasList(t,r))&&(this.log(`Filters list ${t} (${r}) will be updated`),!0)});let n=null;if(r.length>0){const e=Date.now();n=this.engine.onUpdateFilters(r,this.listsManager.getLoadedAssets(),this.onDiskCache),this.log(`Engine updated with ${r.length} lists`+` (${Date.now()-e} ms)`)}else n=this.engine.onUpdateFilters([],this.listsManager.getLoadedAssets(),this.onDiskCache);if(this.initCache(),null!==n){const e=Date.now(),t=new d.default("cliqz-adb");t.init().then(()=>t.set("engine",this.compressDiskCache?(0,l.deflate)(n):n)).then(()=>{const t=Date.now()-e;this.log(`Serialized filters engine (${t} ms)`)}).catch(e=>{this.log(`Failed to serialize filters engine ${e}`)})}else this.log("Engine has not been updated, do not serialize")})}resetCache(){this.log("Reset cache");const e=new d.default("cliqz-adb");return e.init().then(()=>e.delete("engine")).catch(e=>{g.default.error("Error while resetCache",e)})}resetEngine(){this.log("Reset engine"),this.engine=new f.default.FiltersEngine({version:b,loadNetworkFilters:this.loadNetworkFilters,loadCosmeticFilters:this.loadCosmeticFilters})}initCache(){this.log("Init in-memory cache"),this.cache=new n.default(this.engine.match.bind(this.engine),1e3,e=>(0,u.getGeneralDomain)(e.sourceUrl)+e.url)}loadEngineFromDisk(){if(this.onDiskCache){const e=new d.default("cliqz-adb");return e.init().then(()=>e.get("engine")).then(e=>{const t=Date.now();this.engine=f.default.deserializeEngine(this.compressDiskCache?(0,l.inflate)(e):e,b),this.listsManager.lists=new Map,this.engine.lists.forEach((e,t)=>{const r=new m.FiltersList(e.checksum,t,"");this.listsManager.lists.set(t,r)});const r=Date.now()-t;this.log(`Loaded filters engine (${r} ms)`)}).catch(e=>{this.log(`Exception while loading engine ${e}`),this.resetEngine()})}return Promise.resolve()}reset(){return this.resetCache().then(()=>this.resetEngine()).then(()=>this.resetLists()).then(()=>this.listsManager.load())}init(){return this.initCache(),this.loadEngineFromDisk().then(()=>this.listsManager.load()).then(()=>{this.log("Check for updates"),this.loadingTimer=setTimeout(()=>this.listsManager.update(),3e4)})}unload(){clearTimeout(this.loadingTimer),this.listsManager.stop()}match(e){const t=Date.now(),r=this.cache.get(e),n=Date.now()-t;return this.logBlocking(e,r,n),r}}t.AdBlocker=D;const L={adblockInitialized:!1,adbStats:new p.default,adBlocker:null,MIN_BROWSER_VERSION:35,timers:[],webRequestPipeline:a.default.module("webrequest-pipeline"),urlWhitelist:new c.default("adb-blacklist"),humanWeb:null,paused:!1,pipeline:null,whitelistChecks:[],adbEnabled:()=>!L.paused&&O()&&o.default.get(w,M.Disabled)!==M.Disabled,addWhiteListCheck(e){L.whitelistChecks.push(e)},cliqzWhitelisted:e=>L.urlWhitelist.isWhitelisted(e),isAdbActive:e=>L.adbEnabled()&&L.adblockInitialized&&!L.whitelistChecks.some(t=>t(e)),logActionHW(e,t,r){const n=L.humanWeb.action("isProcessingUrl",e);n.catch(()=>{g.default.log("no humanweb -> black/whitelist will not be logged")}),n.then(e=>e?Promise.resolve():Promise.reject()).then(()=>{const n={};return n[t]=r,L.humanWeb.action("addDataToUrl",e,"adblocker_blacklist",n)},()=>g.default.log("url does not exist in hw"))},init(e){L.humanWeb=e,null===o.default.get(w,null)&&o.default.set(w,M.Disabled);const t=()=>(L.adblockInitialized=!0,L.adBlocker=new D({onDiskCache:o.default.get($,E.onDiskCache),useCountryList:o.default.get(S,E.useCountryList)}),L.pipeline=new y.default("adblocker",[{name:"checkContext",spec:"blocking",fn:L.stepCheckContext},{name:"checkWhitelist",spec:"break",fn:L.stepCheckWhitelist},{name:"checkBlocklist",spec:"blocking",fn:L.stepCheckBlockList}]),L.whitelistChecks.push(L.cliqzWhitelisted),L.adBlocker.init().then(()=>(L.initPacemaker(),L.webRequestPipeline.action("addPipelineStep","onBeforeRequest",{name:"adblocker",spec:"blocking",fn:function(){return L.pipeline.execute(...arguments)},before:["antitracking.onBeforeRequest"]}))));return this.onPrefChangeEvent=i.default.subscribe("prefchange",e=>{e===w&&(!L.adblockInitialized&&L.adbEnabled()?t():L.adblockInitialized&&!L.adbEnabled()&&L.unload(!1))}),L.adbEnabled()?L.urlWhitelist.init().then(()=>t()):Promise.resolve()},unload(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];L.adblockInitialized&&(L.adBlocker.unload(),L.adBlocker=null,L.adblockInitialized=!1,L.unloadPacemaker(),(0,s.ifModuleEnabled)(L.webRequestPipeline.action("removePipelineStep","onBeforeRequest","adblocker"))),e&&this.onPrefChangeEvent&&this.onPrefChangeEvent.unsubscribe()},initPacemaker(){const e=setInterval(()=>{L.adbStats.clearStats()},6e5);L.timers.push(e)},unloadPacemaker(){L.timers.forEach(clearTimeout)},stepCheckContext(e,t){if(!L.adbEnabled()||!L.adblockInitialized)return!1;if(!0===t.cancel||t.redirectUrl)return!1;const r=e.url;if(!r||!x(r))return!1;const n=e.sourceUrl||"";return!!x(n)&&(6!==e.cpt||(L.adbStats.addNewPage(n,e.tabId),!1))},stepCheckWhitelist(e){const t=e.sourceUrl||"";return!L.urlWhitelist.isWhitelisted(t)},stepCheckBlockList(e,t){const r=e.sourceUrl,n=e.url,i=L.adBlocker.match({sourceUrl:r,url:n,cpt:e.cpt});return i.redirect?(t.redirectTo(i.redirect),!1):!i.match||(L.adbStats.addBlockedUrl(r,n,e.tabId),t.block(),!1)}};t.default=L},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(773);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.name=e}getName(){return this.name}init(){throw new Error("This should be implemented by the inherited class")}unload(){throw new Error("This should be implemented by the inherited class")}isAvailable(){throw new Error("This should be implemented by the inherited class")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestamp=t.getTodayDayKey=t.getDaysFromTimeRange=t.getDateFromDateKey=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(87));t.getDateFromDateKey=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=t<10?`0${t}`:`${t}`,a=r<10?`0${r}`:`${r}`,o=i<10?`0${i}`:`${i}`;return Number((0,n.default)(`${e}:${s}:${a}:${o}`,"YYYYMMDD:HH:mm:ss").format("x"))},t.getDaysFromTimeRange=function(e,t){if(t<e)return null;let r=(0,n.default)(e).startOf("day");const i=(0,n.default)(t).startOf("day");let s=i.diff(r,"days");s>1825&&(r=i.clone().subtract(1825,"days"),s=1825);const a=[Number(r.format("YYYYMMDD"))];for(;s>0;)a.push(Number(r.add(1,"days").format("YYYYMMDD"))),s-=1;return a},t.getTodayDayKey=function(){return(0,n.default)().format("YYYYMMDD")},t.timestamp=function(){return Date.now()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40);class i{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,n.timestampMS)();this.name=e,this.durationSecs=t,this.activationTime=r}serialize(){return{name:this.name,durationSecs:this.durationSecs,activationTime:this.activationTime}}static deserialize(e){return new i(e.name,e.durationSecs,e.activationTime)}getDurationSecs(){return this.durationSecs}getName(){return this.name}activate(){this.activationTime=(0,n.timestampMS)()}isActive(){return((0,n.timestampMS)()-this.activationTime)/1e3<this.durationSecs}}t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e,t){const r=[];let s=null;const a=()=>{new Promise(e=>{r.length>0?e(r.splice(0,1)[0]):s=e}).then(e=>{var r=n(e,3);let i=r[0],s=r[1],a=r[2];return Promise.resolve(t(i)).then(s).catch(a)}).catch(t=>i.default.error(`MessageQueue ${e} :: error: ${t}`)).then(a)};return a(),{push:e=>{if(null!==s){const t=s;return s=null,new Promise((r,n)=>t([e,r,n]))}return new Promise((t,n)=>{r.push([e,t,n])})},getSize:()=>r.length}};var i=function(e){return e&&e.__esModule?e:{default:e}}(r(24))},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(137),s=function(e){function t(t,r){var n=this;void 0===t&&(t=a),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this,t,function(){return n.frame}),this.maxFrames=r,this.frame=0,this.index=-1}return n(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r.shift())&&(this.frame=t.delay)<=n&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(r(136).AsyncScheduler);t.VirtualTimeScheduler=s;var a=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1),e.call(this,t,r),this.scheduler=t,this.work=r,this.index=n,this.active=!0,this.index=t.index=n}return n(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(i.AsyncAction);t.VirtualAction=a},function(e,t,r){"use strict";t.applyMixins=function(e,t){for(var r=0,n=t.length;r<n;r++)for(var i=t[r],s=Object.getOwnPropertyNames(i.prototype),a=0,o=s.length;a<o;a++){var u=s[a];e.prototype[u]=i.prototype[u]}}},function(e,t,r){"use strict";var n=function(){return function(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t}}();t.SubscriptionLog=n},function(e,t,r){"use strict";var n=r(305),i=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new n.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions,r=t[e];t[e]=new n.SubscriptionLog(r.subscribedFrame,this.scheduler.now())},e}();t.SubscriptionLoggable=i},function(e,t,r){"use strict";var n=r(164);t.zipAll=function(e){return function(t){return t.lift(new n.ZipOperator(e))}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var r;"function"==typeof e[e.length-1]&&(r=e.pop());var n=e;return t.lift(new a(n,r))}};var a=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.observables,this.project))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.observables=r,this.project=n,this.toRespond=[];var i=r.length;this.values=new Array(i);for(var a=0;a<i;a++)this.toRespond.push(a);for(a=0;a<i;a++){var o=r[a];this.add(s.subscribeToResult(this,o,o,a))}}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t;var s=this.toRespond;if(s.length>0){var a=s.indexOf(r);-1!==a&&s.splice(a,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(51),a=r(49),o=r(21),u=r(20);t.windowWhen=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.closingSelector))},e}(),l=function(e){function t(t,r){e.call(this,t),this.destination=t,this.closingSelector=r,this.openWindow()}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.openWindow(i)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var r=this.window=new i.Subject;this.destination.next(r);var n=s.tryCatch(this.closingSelector)();if(n===a.errorObject){var o=a.errorObject.e;this.destination.error(o),this.window.error(o)}else this.add(this.closingNotification=u.subscribeToResult(this,n))},t}(o.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(46),a=r(51),o=r(49),u=r(21),c=r(20);t.windowToggle=function(e,t){return function(r){return r.lift(new l(e,t))}};var l=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.openings,this.closingSelector))},e}(),d=function(e){function t(t,r,n){e.call(this,t),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(this.openSubscription=c.subscribeToResult(this,r,r))}return n(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var r=t.length,n=0;n<r;n++)t[n].window.next(e)},t.prototype._error=function(t){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var s=r[i];s.window.error(t),s.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,n=-1;++n<r;){var i=t[n];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,r,n,u){if(e===this.openings){var l=this.closingSelector,d=a.tryCatch(l)(t);if(d===o.errorObject)return this.error(o.errorObject.e);var h=new i.Subject,f=new s.Subscription,p={window:h,subscription:f};this.contexts.push(p);var m=c.subscribeToResult(this,d,p);m.closed?this.closeWindow(this.contexts.length-1):(m.context=p,f.add(m)),this.destination.next(h)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,r=t[e],n=r.window,i=r.subscription;t.splice(e,1),n.complete(),i.unsubscribe()}},t}(u.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(34),a=r(14),o=r(138),u=r(75);t.windowTime=function(e){var t=s.async,r=null,n=Number.POSITIVE_INFINITY;return u.isScheduler(arguments[3])&&(t=arguments[3]),u.isScheduler(arguments[2])?t=arguments[2]:o.isNumeric(arguments[2])&&(n=arguments[2]),u.isScheduler(arguments[1])?t=arguments[1]:o.isNumeric(arguments[1])&&(r=arguments[1]),function(i){return i.lift(new c(e,r,n,t))}};var c=function(){function e(e,t,r,n){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),l=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return n(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(i.Subject),d=function(e){function t(t,r,n,i,s){e.call(this,t),this.destination=t,this.windowTimeSpan=r,this.windowCreationInterval=n,this.maxWindowSize=i,this.scheduler=s,this.windows=[];var a=this.openWindow();if(null!==n&&n>=0){var o={subscriber:this,window:a,context:null},u={windowTimeSpan:r,windowCreationInterval:n,subscriber:this,scheduler:s};this.add(s.schedule(p,r,o)),this.add(s.schedule(f,n,u))}else{var c={subscriber:this,window:a,windowTimeSpan:r};this.add(s.schedule(h,r,c))}}return n(t,e),t.prototype._next=function(e){for(var t=this.windows,r=t.length,n=0;n<r;n++){var i=t[n];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new l;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(a.Subscriber);function h(e){var t=e.subscriber,r=e.windowTimeSpan,n=e.window;n&&t.closeWindow(n),e.window=t.openWindow(),this.schedule(e,r)}function f(e){var t=e.windowTimeSpan,r=e.subscriber,n=e.scheduler,i=e.windowCreationInterval,s={action:this,subscription:null},a={subscriber:r,window:r.openWindow(),context:s};s.subscription=n.schedule(p,t,a),this.add(s.subscription),this.schedule(e,i)}function p(e){var t=e.subscriber,r=e.window,n=e.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(r)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(50);t.windowCount=function(e,t){return void 0===t&&(t=0),function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.windowSize,this.startWindowEvery))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.destination=t,this.windowSize=r,this.startWindowEvery=n,this.windows=[new s.Subject],this.count=0,t.next(this.windows[0])}return n(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,a=i.length,o=0;o<a&&!this.closed;o++)i[o].next(e);var u=this.count-n+1;if(u>=0&&u%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var c=new s.Subject;i.push(c),r.next(c)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(21),a=r(20);t.window=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var r=new u(e),n=t.subscribe(r);return n.closed||r.add(a.subscribeToResult(r,this.windowBoundaries)),n},e}(),u=function(e){function t(t){e.call(this,t),this.window=new i.Subject,t.next(this.window)}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,r=this.window=new i.Subject;t.next(r)},t}(s.OuterSubscriber)},function(e,t,r){"use strict";var n=r(133);function i(e,t,r){return e.push(t),e}t.toArray=function(){return n.reduce(i,[])}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(34),s=r(165),a=r(21),o=r(20);t.timeoutWith=function(e,t,r){return void 0===r&&(r=i.async),function(n){var i=s.isDate(e),a=i?+e-r.now():Math.abs(e);return n.lift(new u(a,i,t,r))}};var u=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),c=function(e){function t(t,r,n,i,s){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.withObservable=i,this.scheduler=s,this.action=null,this.scheduleTimeout()}return n(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(o.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(a.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.TimeoutError=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(34),s=r(165),a=r(14),o=r(316);t.timeout=function(e,t){void 0===t&&(t=i.async);var r=s.isDate(e),n=r?+e-t.now():Math.abs(e);return function(e){return e.lift(new u(n,r,t,new o.TimeoutError))}};var u=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=r,this.errorInstance=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),c=function(e){function t(t,r,n,i,s){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.scheduler=i,this.errorInstance=s,this.action=null,this.scheduleTimeout()}return n(t,e),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(a.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(34);t.timeInterval=function(e){return void 0===e&&(e=s.async),function(t){return t.lift(new o(e))}};var a=function(){return function(e,t){this.value=e,this.interval=t}}();t.TimeInterval=a;var o=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler))},e}(),u=function(e){function t(t,r){e.call(this,t),this.scheduler=r,this.lastTime=0,this.lastTime=r.now()}return n(t,e),t.prototype._next=function(e){var t=this.scheduler.now(),r=t-this.lastTime;this.lastTime=t,this.destination.next(new a(e,r))},t}(i.Subscriber)},function(e,t,r){"use strict";var n=r(34),i=r(318);t.TimeInterval=i.TimeInterval,t.timeInterval=function(e){return void 0===e&&(e=n.async),i.timeInterval(e)(this)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(34),a=r(161);t.throttleTime=function(e,t,r){return void 0===t&&(t=s.async),void 0===r&&(r=a.defaultThrottleConfig),function(n){return n.lift(new o(e,t,r.leading,r.trailing))}};var o=function(){function e(e,t,r,n){this.duration=e,this.scheduler=t,this.leading=r,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),u=function(e){function t(t,r,n,i,s){e.call(this,t),this.duration=r,this.scheduler=n,this.leading=i,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}return n(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(c,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(i.Subscriber);function c(e){e.subscriber.clearThrottle()}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.takeWhile=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.index=0}return n(t,e),t.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void r.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):r.complete()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.takeUntil=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.notifier))},e}(),o=function(e){function t(t,r){e.call(this,t),this.notifier=r,this.add(s.subscribeToResult(this,r))}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.complete()},t.prototype.notifyComplete=function(){},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(134),a=r(89);t.take=function(e){return function(t){return 0===e?new a.EmptyObservable:t.lift(new o(e))}};var o=function(){function e(e){if(this.total=e,this.total<0)throw new s.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return n(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.switchMapTo=function(e,t){return function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.observable,this.resultSelector))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.inner=r,this.resultSelector=n,this.index=0}return n(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){var s=this.resultSelector,a=this.destination;s?this.tryResultSelector(e,t,r,n):a.next(t)},t.prototype.tryResultSelector=function(e,t,r,n){var i,s=this.resultSelector,a=this.destination;try{i=s(e,t,r,n)}catch(e){return void a.error(e)}a.next(i)},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=r(225),i=r(393);t.switchAll=function(){return n.switchMap(i.identity)}},function(e,t,r){"use strict";var n=r(872),i=r(870);t.asap=new i.AsapScheduler(n.AsapAction)},function(e,t,r){"use strict";var n=r(90),i=r(238),s=r(89),a=r(141),o=r(75);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var r=e[e.length-1];o.isScheduler(r)?e.pop():r=null;var u=e.length;return 1===u?a.concat(new i.ScalarObservable(e[0],r),t):u>1?a.concat(new n.ArrayObservable(e,r),t):a.concat(new s.EmptyObservable(r),t)}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.skipWhile=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.skipping=!0,this.index=0}return n(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.skipUntil=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.notifier))},e}(),o=function(e){function t(t,r){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(s.subscribeToResult(this,r))}return n(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(134);t.skipLast=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new s.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new i.Subscriber(e)):t.subscribe(new o(e,this._skipCount))},e}(),o=function(e){function t(t,r){e.call(this,t),this._skipCount=r,this._count=0,this._ring=new Array(r)}return n(t,e),t.prototype._next=function(e){var t=this._skipCount,r=this._count++;if(r<t)this._ring[r]=e;else{var n=r%t,i=this._ring,s=i[n];i[n]=e,this.destination.next(s)}},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.skip=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.total))},e}(),a=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return n(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(162);t.single=function(e){return function(t){return t.lift(new a(e,t))}};var a=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.predicate,this.source))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.source=n,this.seenValue=!1,this.index=0}return n(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new s.EmptyError)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=r(163);t.shareReplay=function(e,t,r){return function(i){return i.lift(function(e,t,r){var i,s,a=0,o=!1,u=!1;return function(c){a++,i&&!o||(o=!1,i=new n.ReplaySubject(e,t,r),s=c.subscribe({next:function(e){i.next(e)},error:function(e){o=!0,i.error(e)},complete:function(){u=!0,i.complete()}}));var l=i.subscribe(this);return function(){a--,l.unsubscribe(),s&&0===a&&u&&s.unsubscribe()}}}(e,t,r))}}},function(e,t,r){"use strict";var n=r(108),i=r(226),s=r(50);function a(){return new s.Subject}t.share=function(){return function(e){return i.refCount()(n.multicast(a)(e))}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(51),a=r(49);t.sequenceEqual=function(e,t){return function(r){return r.lift(new o(e,t))}};var o=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.compareTo,this.comparor))},e}();t.SequenceEqualOperator=o;var u=function(e){function t(t,r,n){e.call(this,t),this.compareTo=r,this.comparor=n,this._a=[],this._b=[],this._oneComplete=!1,this.add(r.subscribe(new c(t,this)))}return n(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var e=this._a,t=this._b,r=this.comparor;e.length>0&&t.length>0;){var n=e.shift(),i=t.shift(),o=!1;r?(o=s.tryCatch(r)(n,i))===a.errorObject&&this.destination.error(a.errorObject.e):o=n===i,o||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t}(i.Subscriber);t.SequenceEqualSubscriber=u;var c=function(e){function t(t,r){e.call(this,t),this.parent=r}return n(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e)},t.prototype._complete=function(){this.parent._complete()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(34);t.sampleTime=function(e,t){return void 0===t&&(t=s.async),function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.period,this.scheduler))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.period=r,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(u,r,{subscriber:this,period:r}))}return n(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i.Subscriber);function u(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.sample=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new o(e),n=t.subscribe(r);return n.add(s.subscribeToResult(r,this.notifier)),n},e}(),o=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(51),a=r(49),o=r(21),u=r(20);t.retryWhen=function(e){return function(t){return t.lift(new c(e,t))}};var c=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.notifier,this.source))},e}(),l=function(e){function t(t,r,n){e.call(this,t),this.notifier=r,this.source=n}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.errors,n=this.retries,o=this.retriesSubscription;if(n)this.errors=null,this.retriesSubscription=null;else{if(r=new i.Subject,(n=s.tryCatch(this.notifier)(r))===a.errorObject)return e.prototype.error.call(this,a.errorObject.e);o=u.subscribeToResult(this,n)}this._unsubscribeAndRecycle(),this.errors=r,this.retries=n,this.retriesSubscription=o,r.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,r,n,i){var s=this.errors,a=this.retries,o=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=s,this.retries=a,this.retriesSubscription=o,this.source.subscribe(this)},t}(o.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.retry=function(e){return void 0===e&&(e=-1),function(t){return t.lift(new s(e,t))}};var s=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.count,this.source))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.count=r,this.source=n}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.source,n=this.count;if(0===n)return e.prototype.error.call(this,t);n>-1&&(this.count=n-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(51),a=r(49),o=r(21),u=r(20);t.repeatWhen=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.notifier,t))},e}(),l=function(e){function t(t,r,n){e.call(this,t),this.notifier=r,this.source=n,this.sourceIsBeingSubscribedTo=!0}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries){if(this.retriesSubscription.closed)return e.prototype.complete.call(this)}else this.subscribeToRetries();this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this.notifications,r=this.retries,n=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,e.prototype._unsubscribeAndRecycle.call(this),this.notifications=t,this.retries=r,this.retriesSubscription=n,this},t.prototype.subscribeToRetries=function(){this.notifications=new i.Subject;var t=s.tryCatch(this.notifier)(this.notifications);if(t===a.errorObject)return e.prototype.complete.call(this);this.retries=t,this.retriesSubscription=u.subscribeToResult(this,t)},t}(o.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(89);t.repeat=function(e){return void 0===e&&(e=-1),function(t){return 0===e?new s.EmptyObservable:e<0?t.lift(new a(-1,t)):t.lift(new a(e-1,t))}};var a=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.count,this.source))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.count=r,this.source=n}return n(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,r=this.count;if(0===r)return e.prototype.complete.call(this);r>-1&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(i.Subscriber)},function(e,t,r){"use strict";var n=r(77),i=r(236);t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return 1===e.length&&n.isArray(e[0])&&(e=e[0]),t.lift.call(i.race.apply(void 0,[t].concat(e)))}}},function(e,t,r){"use strict";var n=r(170),i=r(108);t.publishLast=function(){return function(e){return i.multicast(new n.AsyncSubject)(e)}}},function(e,t,r){"use strict";var n=r(163),i=r(108);t.publishReplay=function(e,t,r,s){r&&"function"!=typeof r&&(s=r);var a="function"==typeof r?r:void 0,o=new n.ReplaySubject(e,t,s);return function(e){return i.multicast(function(){return o},a)(e)}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(171),a=function(e){function t(t){e.call(this),this._value=t}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.Subject);t.BehaviorSubject=a},function(e,t,r){"use strict";var n=r(345),i=r(108);t.publishBehavior=function(e){return function(t){return i.multicast(new n.BehaviorSubject(e))(t)}}},function(e,t,r){"use strict";var n=r(50),i=r(108);t.publish=function(e){return e?i.multicast(function(){return new n.Subject},e):i.multicast(new n.Subject)}},function(e,t,r){"use strict";var n=r(135);t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(t){return n.map(function(e,t){return function(r){for(var n=r,i=0;i<t;i++){var s=n[e[i]];if(void 0===s)return;n=s}return n}}(e,r))(t)}}},function(e,t,r){"use strict";var n=r(923),i=r(231);t.partition=function(e,t){return function(r){return[i.filter(e,t)(r),i.filter(n.not(e,t))(r)]}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.pairwise=function(){return function(e){return e.lift(new s)}};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return n(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(4),a=r(14),o=r(46),u=r(226),c=function(e){function t(t,r){e.call(this),this.source=t,this.subjectFactory=r,this._refCount=0,this._isComplete=!1}return n(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new o.Subscription).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed?(this._connection=null,e=o.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return u.refCount()(this)},t}(s.Observable);t.ConnectableObservable=c;var l=c.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}};var d=function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),h=(function(){function e(e){this.connectable=e}e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new h(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i}}(),function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(a.Subscriber))},function(e,t,r){"use strict";var n=r(133);t.min=function(e){var t="function"==typeof e?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t};return n.reduce(t)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(51),s=r(49),a=r(20),o=r(21);t.mergeScan=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return n.lift(new u(e,t,r))}};var u=function(){function e(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.accumulator,this.seed,this.concurrent))},e}();t.MergeScanOperator=u;var c=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this.acc=n,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=i.tryCatch(this.accumulator)(this.acc,e),n=this.destination;r===s.errorObject?n.error(s.errorObject.e):(this.active++,this._innerSub(r,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r){this.add(a.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,r,n,i){var s=this.destination;this.acc=t,this.hasValue=!0,s.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(o.OuterSubscriber);t.MergeScanSubscriber=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.mergeMapTo=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),function(n){return n.lift(new a(e,t,r))}};var a=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.ish,this.resultSelector,this.concurrent))},e}();t.MergeMapToOperator=a;var o=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,r=this.index++,n=this.ish,i=this.destination;this.active++,this._innerSub(n,i,t,e,r)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r,n,i){this.add(s.subscribeToResult(this,e,n,i))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var s=this.resultSelector,a=this.destination;s?this.trySelectResult(e,t,r,n):a.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var i,s=this.resultSelector,a=this.destination;try{i=s(e,t,r,n)}catch(e){return void a.error(e)}a.next(i)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeMapToSubscriber=o},function(e,t,r){"use strict";var n=r(166),i=r(166);t.mergeStatic=i.merge,t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(n.merge.apply(void 0,[t].concat(e)))}}},function(e,t,r){"use strict";var n=r(133);t.max=function(e){var t="function"==typeof e?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t};return n.reduce(t)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(140);t.materialize=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new o(e))},e}(),o=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype._next=function(e){this.destination.next(s.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(s.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(s.Notification.createComplete()),e.complete()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.mapTo=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.value))},e}(),a=function(e){function t(t,r){e.call(this,t),this.value=r}return n(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.every=function(e,t){return function(r){return r.lift(new s(e,t,r))}};var s=function(){function e(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg,this.source))},e}(),a=function(e){function t(t,r,n,i){e.call(this,t),this.predicate=r,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}return n(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(162);t.last=function(e,t,r){return function(n){return n.lift(new a(e,t,r,n))}};var a=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),o=function(e){function t(t,r,n,i,s){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=s,this.hasValue=!1,this.index=0,void 0!==i&&(this.lastValue=i,this.hasValue=!0)}return n(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}if(r){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this.lastValue=r,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new s.EmptyError)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=r(34),i=r(229),s=r(392);t.auditTime=function(e,t){return void 0===t&&(t=n.async),i.audit(function(){return s.timer(e,t)})}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.isEmpty=function(){return function(e){return e.lift(new s)}};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(239);t.ignoreElements=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new o(e))},e}(),o=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype._next=function(e){s.noop()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(46),a=r(4),o=r(50),u=r(970),c=r(968);t.groupBy=function(e,t,r,n){return function(i){return i.lift(new l(e,t,r,n))}};var l=function(){function e(e,t,r,n){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=n}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),d=function(e){function t(t,r,n,i,s){e.call(this,t),this.keySelector=r,this.elementSelector=n,this.durationSelector=i,this.subjectSelector=s,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return n(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups="string"==typeof t?new c.FastMap:new u.Map);var n,i=r.get(t);if(this.elementSelector)try{n=this.elementSelector(e)}catch(e){this.error(e)}else n=e;if(!i){i=this.subjectSelector?this.subjectSelector():new o.Subject,r.set(t,i);var s=new f(t,i,this);if(this.destination.next(s),this.durationSelector){var a=void 0;try{a=this.durationSelector(new f(t,i))}catch(e){return void this.error(e)}this.add(a.subscribe(new h(t,i,this)))}}i.closed||i.next(n)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t,r){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(i.Subscriber),h=function(e){function t(t,r,n){e.call(this,r),this.key=t,this.group=r,this.parent=n}return n(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(i.Subscriber),f=function(e){function t(t,r,n){e.call(this),this.key=t,this.groupSubject=r,this.refCountSubscription=n}return n(t,e),t.prototype._subscribe=function(e){var t=new s.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new p(r)),t.add(n.subscribe(e)),t},t}(a.Observable);t.GroupedObservable=f;var p=function(e){function t(t){e.call(this),this.parent=t,t.count++}return n(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(s.Subscription)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(162);t.first=function(e,t,r){return function(n){return n.lift(new a(e,t,r,n))}};var a=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),o=function(e){function t(t,r,n,i,s){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=s,this.index=0,this.hasCompleted=!1,this._emitted=!1}return n(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new s.EmptyError):(e.next(this.defaultValue),e.complete())},t}(i.Subscriber)},function(e,t,r){"use strict";var n=r(230);t.findIndex=function(e,t){return function(r){return r.lift(new n.FindValueOperator(e,r,!0,t))}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(46);t.finalize=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.callback))},e}(),o=function(e){function t(t,r){e.call(this,t),this.add(new s.Subscription(r))}return n(t,e),t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(134);t.elementAt=function(e,t){return function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){if(this.index=e,this.defaultValue=t,e<0)throw new s.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.index,this.defaultValue))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.index=r,this.defaultValue=n}return n(t,e),t.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;this.index>=0&&(void 0!==this.defaultValue?e.next(this.defaultValue):e.error(new s.ArgumentOutOfRangeError)),e.complete()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(51),s=r(49),a=r(21),o=r(20);t.expand=function(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(n){return n.lift(new u(e,t,r))}};var u=function(){function e(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.concurrent,this.scheduler))},e}();t.ExpandOperator=u;var c=function(e){function t(t,r,n,i){e.call(this,t),this.project=r,this.concurrent=n,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}return n(t,e),t.dispatch=function(e){var t=e.subscriber,r=e.result,n=e.value,i=e.index;t.subscribeToProjection(r,n,i)},t.prototype._next=function(e){var r=this.destination;if(r.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){r.next(e);var a=i.tryCatch(this.project)(e,n);if(a===s.errorObject)r.error(s.errorObject.e);else if(this.scheduler){var o={subscriber:this,result:a,value:e,index:n};this.add(this.scheduler.schedule(t.dispatch,0,o))}else this.subscribeToProjection(a,e,n)}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,r){this.active++,this.add(o.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(a.OuterSubscriber);t.ExpandSubscriber=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.exhaustMap=function(e,t){return function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.project,this.resultSelector))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return n(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,r=this.destination;try{var n=this.project(e,t);this.hasSubscription=!0,this.add(s.subscribeToResult(this,n,e,t))}catch(e){r.error(e)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var s=this.resultSelector,a=this.destination;s?this.trySelectResult(e,t,r,n):a.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var i=this.resultSelector,s=this.destination;try{var a=i(e,t,r,n);s.next(a)}catch(e){s.error(e)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.exhaust=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new o(e))},e}(),o=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return n(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(s.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.tap=function(e,t,r){return function(n){return n.lift(new s(e,t,r))}};var s=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.nextOrObserver,this.error,this.complete))},e}(),a=function(e){function t(t,r,n,s){e.call(this,t);var a=new i.Subscriber(r,n,s);a.syncErrorThrowable=!0,this.add(a),this.safeSubscriber=a}return n(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=r(232);t.distinctUntilKeyChanged=function(e,t){return n.distinctUntilChanged(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20),a=r(997);t.distinct=function(e,t){return function(r){return r.lift(new o(e,t))}};var o=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.keySelector,this.flushes))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.keySelector=r,this.values=new a.Set,n&&this.add(s.subscribeToResult(this,n))}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(i.OuterSubscriber);t.DistinctSubscriber=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(4),a=r(21),o=r(20);t.delayWhen=function(e,t){return t?function(r){return new l(r,t).lift(new u(e))}:function(t){return t.lift(new u(e))}};var u=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.delayDurationSelector))},e}(),c=function(e){function t(t,r){e.call(this,t),this.delayDurationSelector=r,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),r=null;return-1!==t&&(r=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),r},t.prototype.tryDelay=function(e,t){var r=o.subscribeToResult(this,e,t);r&&!r.closed&&(this.add(r),this.delayNotifierSubscriptions.push(r)),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(a.OuterSubscriber),l=function(e){function t(t,r){e.call(this),this.source=t,this.subscriptionDelay=r}return n(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new d(e,this.source))},t}(s.Observable),d=function(e){function t(t,r){e.call(this),this.parent=t,this.source=r,this.sourceSubscribed=!1}return n(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(34),s=r(165),a=r(14),o=r(140);t.delay=function(e,t){void 0===t&&(t=i.async);var r=s.isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new u(r,t))}};var u=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.delay,this.scheduler))},e}(),c=function(e){function t(t,r,n){e.call(this,t),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return n(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var s=Math.max(0,r[0].time-n.now());this.schedule(e,s)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new l(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(o.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(o.Notification.createComplete())},t}(a.Subscriber),l=function(){return function(e,t){this.time=e,this.notification=t}}()},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14),s=r(34);t.debounceTime=function(e,t){return void 0===t&&(t=s.async),function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.dueTime,this.scheduler))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.dueTime=r,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(i.Subscriber);function u(e){e.debouncedNext()}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.debounce=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.durationSelector))},e}(),o=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1,this.durationSubscription=null}return n(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=s.subscribeToResult(this,t)).closed||this.add(this.durationSubscription=r)},t.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,r=this.durationSubscription;r&&(this.durationSubscription=null,r.unsubscribe(),this.remove(r)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.dematerialize=function(){return function(e){return e.lift(new s)}};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.count=function(e){return function(t){return t.lift(new s(e,t))}};var s=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.source=n,this.count=0,this.index=0}return n(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(i.Subscriber)},function(e,t,r){"use strict";var n=r(234);t.concatMapTo=function(e,t){return n.concatMap(function(){return e},t)}},function(e,t,r){"use strict";var n=r(141),i=r(141);t.concatStatic=i.concat,t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(n.concat.apply(void 0,[t].concat(e)))}}},function(e,t,r){"use strict";var n=r(169);t.combineAll=function(e){return function(t){return t.lift(new n.CombineLatestOperator(e))}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.catchError=function(e){return function(t){var r=new a(e),n=t.lift(r);return r.caught=n}};var a=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.selector,this.caught))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.selector=r,this.caught=n}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(s.subscribeToResult(this,r))}},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(46),s=r(51),a=r(49),o=r(21),u=r(20);t.bufferWhen=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.closingSelector))},e}(),l=function(e){function t(t,r){e.call(this,t),this.closingSelector=r,this.subscribing=!1,this.openBuffer()}return n(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,r,n,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var r=s.tryCatch(this.closingSelector)();r===a.errorObject?this.error(a.errorObject.e):(e=new i.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(u.subscribeToResult(this,r)),this.subscribing=!1)},t}(o.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(46),s=r(20),a=r(21);t.bufferToggle=function(e,t){return function(r){return r.lift(new o(e,t))}};var o=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.openings,this.closingSelector))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(s.subscribeToResult(this,r))}return n(t,e),t.prototype._next=function(e){for(var t=this.contexts,r=t.length,n=0;n<r;n++)t[n].buffer.push(e)},t.prototype._error=function(t){for(var r=this.contexts;r.length>0;){var n=r.shift();n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var r=t.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,n=e.subscription;this.destination.next(r),t.splice(t.indexOf(e),1),this.remove(n),n.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,r=new i.Subscription,n={buffer:[],subscription:r};t.push(n);var a=s.subscribeToResult(this,e,n);!a||a.closed?this.closeBuffer(n):(a.context=n,this.add(a),r.add(a))},t}(a.OuterSubscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(34),s=r(14),a=r(75);t.bufferTime=function(e){var t=arguments.length,r=i.async;a.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var s=Number.POSITIVE_INFINITY;return t>=3&&(s=arguments[2]),function(t){return t.lift(new o(e,n,s,r))}};var o=function(){function e(e,t,r,n){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),u=function(){return function(){this.buffer=[]}}(),c=function(e){function t(t,r,n,i,s){e.call(this,t),this.bufferTimeSpan=r,this.bufferCreationInterval=n,this.maxBufferSize=i,this.scheduler=s,this.contexts=[];var a=this.openContext();if(this.timespanOnly=null==n||n<0,this.timespanOnly){var o={subscriber:this,context:a,bufferTimeSpan:r};this.add(a.closeAction=s.schedule(l,r,o))}else{var u={subscriber:this,context:a},c={bufferTimeSpan:r,bufferCreationInterval:n,subscriber:this,scheduler:s};this.add(a.closeAction=s.schedule(h,r,u)),this.add(s.schedule(d,n,c))}}return n(t,e),t.prototype._next=function(e){for(var t,r=this.contexts,n=r.length,i=0;i<n;i++){var s=r[i],a=s.buffer;a.push(e),a.length==this.maxBufferSize&&(t=s)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,r=this.destination;t.length>0;){var n=t.shift();r.next(n.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(l,r,n))}},t.prototype.openContext=function(){var e=new u;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(s.Subscriber);function l(e){var t=e.subscriber,r=e.context;r&&t.closeContext(r),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function d(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,n=e.subscriber,i=e.scheduler,s=n.openContext();n.closed||(n.add(s.closeAction=i.schedule(h,r,{subscriber:n,context:s})),this.schedule(e,t))}function h(e){var t=e.subscriber,r=e.context;t.closeContext(r)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(14);t.bufferCount=function(e,t){return void 0===t&&(t=null),function(r){return r.lift(new s(e,t))}};var s=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?o:a}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),a=function(e){function t(t,r){e.call(this,t),this.bufferSize=r,this.buffer=[]}return n(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(i.Subscriber),o=function(e){function t(t,r,n){e.call(this,t),this.bufferSize=r,this.startBufferEvery=n,this.buffers=[],this.count=0}return n(t,e),t.prototype._next=function(e){var t=this.bufferSize,r=this.startBufferEvery,n=this.buffers,i=this.count;this.count++,i%r==0&&n.push([]);for(var s=n.length;s--;){var a=n[s];a.push(e),a.length===t&&(n.splice(s,1),this.destination.next(a))}},t.prototype._complete=function(){for(var t=this.buffers,r=this.destination;t.length>0;){var n=t.shift();n.length>0&&r.next(n)}e.prototype._complete.call(this)},t}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(21),s=r(20);t.buffer=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.closingNotifier))},e}(),o=function(e){function t(t,r){e.call(this,t),this.buffer=[],this.add(s.subscribeToResult(this,r))}return n(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,r,n,i){var s=this.buffer;this.buffer=[],this.destination.next(s)},t}(i.OuterSubscriber)},function(e,t,r){"use strict";var n=r(1040),i=r(1039);t.queue=new i.QueueScheduler(n.QueueAction)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(54),s=r(51),a=r(49),o=r(4),u=r(14),c=r(135);function l(e,t){return void 0===t&&(t=null),new g({method:"GET",url:e,headers:t})}function d(e,t,r){return new g({method:"POST",url:e,body:t,headers:r})}function h(e,t){return new g({method:"DELETE",url:e,headers:t})}function f(e,t,r){return new g({method:"PUT",url:e,body:t,headers:r})}function p(e,t,r){return new g({method:"PATCH",url:e,body:t,headers:r})}t.ajaxGet=l,t.ajaxPost=d,t.ajaxDelete=h,t.ajaxPut=f,t.ajaxPatch=p;var m=c.map(function(e,t){return e.response});function _(e,t){return m(new g({method:"GET",url:e,responseType:"json",headers:t}))}t.ajaxGetJSON=_;var g=function(e){function t(t){e.call(this);var r={async:!0,createXHR:function(){return this.crossDomain?function(){if(i.root.XMLHttpRequest)return new i.root.XMLHttpRequest;if(i.root.XDomainRequest)return new i.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}.call(this):function(){if(i.root.XMLHttpRequest)return new i.root.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=t[r],new i.root.ActiveXObject(e))break}catch(e){}return new i.root.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);this.request=r}return n(t,e),t.prototype._subscribe=function(e){return new y(e,this.request)},t.create=function(){var e=function(e){return new t(e)};return e.get=l,e.post=d,e.delete=h,e.put=f,e.patch=p,e.getJSON=_,e}(),t}(o.Observable);t.AjaxObservable=g;var y=function(e){function t(t,r){e.call(this,t),this.request=r,this.done=!1;var n=r.headers=r.headers||{};r.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in n||i.root.FormData&&r.body instanceof i.root.FormData||void 0===r.body||(n["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=this.serializeBody(r.body,r.headers["Content-Type"]),this.send()}return n(t,e),t.prototype.next=function(e){this.done=!0;var t=this.xhr,r=this.request,n=this.destination,i=new v(e,t,r);n.next(i)},t.prototype.send=function(){var e=this.request,t=this.request,r=t.user,n=t.method,i=t.url,o=t.async,u=t.password,c=t.headers,l=t.body,d=e.createXHR,h=s.tryCatch(d).call(e);if(h===a.errorObject)this.error(a.errorObject.e);else{this.xhr=h,this.setupEvents(h,e);if((r?s.tryCatch(h.open).call(h,n,i,o,r,u):s.tryCatch(h.open).call(h,n,i,o))===a.errorObject)return this.error(a.errorObject.e),null;if(o&&(h.timeout=e.timeout,h.responseType=e.responseType),"withCredentials"in h&&(h.withCredentials=!!e.withCredentials),this.setHeaders(h,c),(l?s.tryCatch(h.send).call(h,l):s.tryCatch(h.send).call(h))===a.errorObject)return this.error(a.errorObject.e),null}return h},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(i.root.FormData&&e instanceof i.root.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},t.prototype.setupEvents=function(e,t){var r=t.progressSubscriber;function n(e){var t=n,r=t.subscriber,i=t.progressSubscriber,s=t.request;i&&i.error(e),r.error(new w(this,s))}if(e.ontimeout=n,n.request=t,n.subscriber=this,n.progressSubscriber=r,e.upload&&"withCredentials"in e){var s,a;if(r)s=function(e){s.progressSubscriber.next(e)},i.root.XDomainRequest?e.onprogress=s:e.upload.onprogress=s,s.progressSubscriber=r;a=function(e){var t=a,r=t.progressSubscriber,n=t.subscriber,i=t.request;r&&r.error(e),n.error(new b("ajax error",this,i))},e.onerror=a,a.request=t,a.subscriber=this,a.progressSubscriber=r}function o(e){var t=o,r=t.subscriber,n=t.progressSubscriber,i=t.request;if(4===this.readyState){var s=1223===this.status?204:this.status,a="text"===this.responseType?this.response||this.responseText:this.response;0===s&&(s=a?200:0),200<=s&&s<300?(n&&n.complete(),r.next(e),r.complete()):(n&&n.error(e),r.error(new b("ajax error "+s,this,i)))}}e.onreadystatechange=o,o.subscriber=this,o.progressSubscriber=r,o.request=t},t.prototype.unsubscribe=function(){var t=this.done,r=this.xhr;!t&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(u.Subscriber);t.AjaxSubscriber=y;var v=function(){return function(e,t,r){this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.response=$(this.responseType,t)}}();t.AjaxResponse=v;var b=function(e){function t(t,r,n){e.call(this,t),this.message=t,this.xhr=r,this.request=n,this.status=r.status,this.responseType=r.responseType||n.responseType,this.response=$(this.responseType,r)}return n(t,e),t}(Error);function $(e,t){switch(e){case"json":return"response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null");case"xml":return t.responseXML;case"text":default:return"response"in t?t.response:t.responseText}}t.AjaxError=b;var w=function(e){function t(t,r){e.call(this,"ajax timeout",t,r)}return n(t,e),t}(b);t.AjaxTimeoutError=w},function(e,t,r){"use strict";var n=r(1048);t.timer=n.TimerObservable.create},function(e,t,r){"use strict";t.identity=function(e){return e}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(54),s=function(e){function t(t,r){e.call(this),this.promise=t,this.scheduler=r}return n(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then(function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){i.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return n.schedule(a,0,{value:this.value,subscriber:e})}else r.then(function(r){t.value=r,t._isScalar=!0,e.closed||e.add(n.schedule(a,0,{value:r,subscriber:e}))},function(t){e.closed||e.add(n.schedule(o,0,{err:t,subscriber:e}))}).then(null,function(e){i.root.setTimeout(function(){throw e})})},t}(r(4).Observable);function a(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function o(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}t.PromiseObservable=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(77),s=r(399),a=r(398),o=r(394),u=r(1099),c=r(90),l=r(1098),d=r(142),h=r(4),f=r(168),p=r(172),m=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return n(t,e),t.create=function(e,r){if(null!=e){if("function"==typeof e[p.observable])return e instanceof h.Observable&&!r?e:new t(e,r);if(i.isArray(e))return new c.ArrayObservable(e,r);if(a.isPromise(e))return new o.PromiseObservable(e,r);if("function"==typeof e[d.iterator]||"string"==typeof e)return new u.IteratorObservable(e,r);if(s.isArrayLike(e))return new l.ArrayLikeObservable(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[p.observable]().subscribe(e):t[p.observable]().subscribe(new f.ObserveOnSubscriber(e,r,0))},t}(h.Observable);t.FromObservable=m},function(e,t,r){"use strict";var n=r(395);t.from=n.FromObservable.create},function(e,t,r){"use strict";var n=r(90);t.of=n.ArrayObservable.of},function(e,t,r){"use strict";t.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},function(e,t,r){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(r(46).Subscription);t.SubjectSubscription=i},function(e,t,r){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(t,e),t}(Error);t.UnsubscriptionError=i},function(e,t,r){"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1111));t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackerRuleParser=t.TrackerTXT=t.DEFAULT_ACTION_PREF=void 0,t.getDefaultTrackerTxtRule=d,t.setDefaultTrackerTxtRule=function(e){l=e},t.updateDefaultTrackerTxtRule=function(){const e=a.default.get("attrackDefaultAction","same");u.has(e)||"same"===e?l=e:a.default.clear("attrackDefaultAction")};var n=o(r(148)),i=r(65),s=r(55),a=o(r(11));function o(e){return e&&e.__esModule?e:{default:e}}const u=new Set(["placeholder","block","empty","replace"]),c=t.DEFAULT_ACTION_PREF="attrackDefaultAction";let l=null;function d(){return null===l&&(l=a.default.get(c,"same")),l}const h=(e,t)=>{e.split("\n").map(e=>e.trim()).filter(e=>"R"===e[0]).forEach(e=>{const r=e.split(/\s+/).map(e=>e.trim().toLowerCase());3===r.length&&u.has(r[2])&&t.push({site:r[1],rule:r[2]})})},f=function(e){this.baseurl=e,this.rules=[],this.status=null,this.last_update=null};f._cache=new n.default(e=>new f(e),1e3),f.get=(e=>{const t=`${e.protocol}://${e.hostname}(${e.port} !== 80 ? :${e.port} : '')`;return f._cache.get(t)}),f.prototype={update(){if("updating"===this.status||this.last_update===(0,i.getTime)())return;this.status="updating";const e=this;(0,s.httpGet)(`${e.baseurl}/tracking.txt`,function(t){t.responseText.length<4096&&(e.rules=[],h(t.responseText,e.rules)),e.status="updated",e.last_update=(0,i.getTime)()},function(){e.status="error",e.last_update=(0,i.getTime)()})},getRule(e){for(let t=0;t<this.rules.length;t+=1){const r=this.rules[t];if(e.endsWith(r.site))return r.rule}return d()}},t.TrackerTXT=f,t.trackerRuleParser=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HashProb=void 0,t.isMostlyNumeric=function(e){let t=0;const r=e.length;for(let r=0;r<e.length;r+=1){const n=e.charCodeAt(r);n>=48&&n<58&&(t+=1)}return t/r>a};var n=s(r(80)),i=s(r(22));function s(e){return e&&e.__esModule?e:{default:e}}t.HashProb=class{constructor(){this.probHashLogM=null,this.probHashThreshold=null,this.probHashChars={},"abcdefghijklmnopqrstuvwxyz1234567890.- ".split("").forEach((e,t)=>{this.probHashChars[e]=t}),this.probLoader=new n.default(["antitracking","prob.json"],{remoteURL:`${i.default.settings.CDN_BASEURL}/anti-tracking/prob.json`,cron:864e5})}_update(e){this.probHashLogM=e.logM,this.probHashThreshold=e.thresh}init(){return this.probLoader.onUpdate(this._update.bind(this)),this.probLoader.load().then(this._update.bind(this))}unload(){this.probLoader.stop()}isHashProb(e){if(!this.probHashLogM||!this.probHashThreshold)return 0;let t=0,r=0;e=e.toLowerCase().replace(/[^a-z0-9.\- ]/g,"");for(let n=0;n<e.length-1;n+=1){const i=this.probHashChars[e[n]],s=this.probHashChars[e[n+1]];t+=this.probHashLogM[i][s],r+=1}return r>0?Math.exp(t/r):Math.exp(t)}isHash(e){return this.isHashProb(e)<this.probHashThreshold}};const a=.8},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dbs=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){const t=o.get(e)||{name:e,createdAt:Date.now(),instances:0};t.instances+=1,o.set(e,t);for(var r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return(0,i.default)(e,...n)},t.report=u,t.reportPeriodically=function(e){let t,r={};function n(){u().then(e=>{t||(t=e);const n={};[...o.keys()].forEach(i=>{const s=t[i]||{docs:0,seq:0},a=r[i]||{docs:0,seq:0},o=e[i]||{docs:0,seq:0};n[i]={diffToPrev:{docs:a.docs?o.docs-a.docs:0,seq:o.seq?o.seq-a.seq:0}},t!==e&&(n[i].diffToFirst={docs:o.docs-s.docs,seq:o.seq-s.seq})}),r=e,function(e){s.default.log("Db report",JSON.stringify(e,null,2))}(n)}).catch(s.default.error.bind(s.default,"DB report error"))}n();const i=setInterval(n,e);return{stop(){clearInterval(i)}}};var i=a(r(1130)),s=a(r(24));function a(e){return e&&e.__esModule?e:{default:e}}const o=t.dbs=new Map;function u(){const e=[...o.keys()].map(e=>{const t=o.get(e);let r;return new i.default(e).info().then(e=>{r=e}).then(()=>n({},t,{docs:r.doc_count,seq:r.update_seq}))});return Promise.all(e).then(e=>e.reduce((e,t)=>n({},e,{[t.name]:t}),{}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this._items=new Set,this._timeouts=new Set}contains(e){return this._items.has(e)}has(e){return this.contains(e)}add(e,t){this._items.add(e);const r=setTimeout(function(){this.delete(e),this._timeouts.delete(r)}.bind(this),t||0);this._timeouts.add(r)}delete(e){this._items.delete(e)}clear(){var e=!0,t=!1,r=void 0;try{for(var n,i=this._timeouts[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){const e=n.value;clearTimeout(e)}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}this._timeouts.clear(),this._items.clear()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(79)),i=d(r(65)),s=r(143),a=l(r(109)),o=l(r(242)),u=l(r(47)),c=r(121);function l(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}const h=7;t.default=class{constructor(e){this.config=e,this.safeKeys=new n.LazyPersistentObject("safeKey")}init(){const e=u.default.getWindow();return e&&e.requestIdleCallback?e.requestIdleCallback(()=>this.safeKeys.load(),{timeout:2e3}):setTimeout(this.safeKeys.load.bind(this.safeKeys),2e3),a.default.register(this._hourlyPruneAndSend.bind(this),36e5),Promise.resolve()}destroy(){}get _safeKeysLastSent(){let e=n.getValue("safeKeysLastSent");return e||(e=i.getTime(),this._safeKeysLastSent=e),e}set _safeKeysLastSent(e){n.setValue("safeKeysLastSent",e)}_hourlyPruneAndSend(){const e=i.getTime();this._pruneSafeKeys(),this._safeKeysLastSent<e&&(this._sendSafeKeys(),this._safeKeysLastSent=e)}isSafeKey(e,t){return e in this.safeKeys.value&&t in this.safeKeys.value[e]}addSafeKey(e,t,r){const n=i.dateString(i.newUTCDate());e in this.safeKeys.value||(this.safeKeys.value[e]={}),this.safeKeys.value[e][t]=[n,"l",r],this.safeKeys.setDirty()}annotateSafeKeys(e){for(const t in this.safeKeys.value)if(Object.prototype.hasOwnProperty.call(this.safeKeys.value,t))for(const r in this.safeKeys.value[t])if(Object.prototype.hasOwnProperty.call(this.safeKeys.value[t],r)){const n=this.safeKeys.value[t][r];if(e[t]&&e[t][r]){2===n.length&&n.push(0);const i=Object.keys(e[t][r]).length;n[2]=Math.max(n[2],i)}}this.safeKeys.setDirty(),this.safeKeys.save()}_pruneSafeKeys(){const e=i.newUTCDate();e.setDate(e.getDate()-h);const t=i.dateString(e);for(const e in this.safeKeys.value)if(Object.prototype.hasOwnProperty.call(this.safeKeys.value,e)){for(const r in this.safeKeys.value[e])this.safeKeys.value[e][r][0]<t&&delete this.safeKeys.value[e][r];0===Object.keys(this.safeKeys.value[e]).length&&delete this.safeKeys.value[e]}this.safeKeys.setDirty(),this.safeKeys.save()}_sendSafeKeys(){if(this.config.telemetryMode===c.TELEMETRY.DISABLED)return;const e=i.getTime(),t=e.substring(0,8),r={},n={};let a,u;const l=this.safeKeys.value;for(a in l)if(Object.prototype.hasOwnProperty.call(l,a))for(u in l[a])Object.prototype.hasOwnProperty.call(l[a],u)&&"l"===l[a][u][1]&&(n[a]||(n[a]={}),n[a]=l[a][u],l[a][u][0]===t&&(r[a]||(r[a]={}),r[a][u]=l[a][u][0]));if(Object.keys(r).length>0){const t=(0,s.generateAttrackPayload)(r,e,this.getVersion());o.default.telemetry({type:o.default.msgType,action:"attrack.safekey",payload:t})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(69));t.default=n.default.get("webrequest-pipeline",{level:"log"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r(78)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(66)),s=m(r(1136)),a=r(405),o=m(r(47)),u=m(r(11)),c=m(r(242)),l=r(121),d=m(l),h=r(65),f=m(r(176)),p=m(r(247));function m(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)({requiresServices:["cliqz-config","domainInfo"],init(e){return this.settings=e,this.attrack=new s.default,i.getBrowserMajorVersion()<l.MIN_BROWSER_VERSION?Promise.resolve():(u.default.has("attrackRemoveQueryStringTracking")||u.default.set("attrackRemoveQueryStringTracking",!0),this.enabled=!0,this.clickCache={},(0,p.default)(this.popupActions,this),e.DISABLE_ATTRACK_TELEMETRY||c.default.loadFromProvider(e.ATTRACK_TELEMETRY_PROVIDER||"human-web",e.HW_CHANNEL),this.config=new d.default({}),this.config.init().then(()=>this.attrack.init(this.config)))},unload(){i.getBrowserMajorVersion()<l.MIN_BROWSER_VERSION?this.enabled=!1:(null!==this.attrack&&(this.attrack.unload(),this.attrack=null),this.enabled=!1)},actions:{getCurrentTabBlockingInfo(){return this.attrack.getCurrentTabBlockingInfo()},addPipelineStep(e,t){return this.attrack.pipelines&&this.attrack.pipelines[e]?this.attrack.pipelines[e].addPipelineStep(t):Promise.reject(`Could not add pipeline step: ${e}, ${t.name}`)},removePipelineStep(e,t){this.attrack&&this.attrack.pipelines&&this.attrack.pipelines[e]&&this.attrack.pipelines[e].removePipelineStep(t)},telemetry(e){return this.attrack.telemetry(e)},getWhitelist(){return this.attrack.qs_whitelist},getTabTracker(){return this.attrack.tp_events},getTrackerListForTab(e){return this.attrack.getTrackerListForTab(e)},aggregatedBlockingStats(e){return this.attrack.getAppsForTab(e).then(e=>{const t={};return Object.keys(e.known||{}).forEach(r=>{const n=f.default.getAppOwner(r);n&&(t[n.cat]||(t[n.cat]={}),t[n.cat][n.name]=e.known[r])}),Object.keys(e.unknown).forEach(r=>{t.unknown||(t.unknown={}),t.unknown[r]=e.unknown[r]}),t})},isEnabled(){return this.enabled},disable(){this.unload()},enable(){this.init(this.settings)},isWhitelisted(e){return this.attrack.urlWhitelist.isWhitelisted(e)},changeWhitelistState(e,t,r){return this.attrack.urlWhitelist.changeState(e,t,r)},getWhitelistState(e){return this.attrack.urlWhitelist.getState(e)},isSourceWhitelisted(e){return this.actions.isWhitelisted(e)},addSourceDomainToWhitelist(e){return this.actions.changeWhitelistState(e,"hostname","add")},removeSourceDomainFromWhitelist(e){return this.actions.changeWhitelistState(e,"hostname","remove")},setConfigOption(e,t){this.config.setPref(e,t)},pause(){this.config.paused=!0},resume(){this.config.paused=!1}},popupActions:{toggleAttrack(e,t){const r=u.default.get("modules.antitracking.enabled",!0);r?this.attrack.disableModule():this.attrack.enableModule(),t(),this.popupActions.telemetry({action:"click",target:r?"deactivate":"activate"})},closePopup(e,t){t()},toggleWhiteList(e,t){const r=e.hostname;this.attrack.urlWhitelist.isWhitelisted(r)?this.popupActions.telemetry({action:"click",target:"unwhitelist_domain"}):this.popupActions.telemetry({action:"click",target:"whitelist_domain"}),this.attrack.urlWhitelist.changeState(r,"hostname","toggle"),t()},_isDuplicate(e){const t=Date.now(),r=e.tab+e.hostname+e.path;var n=!0,i=!1,s=void 0;try{for(var a,o=Object.keys(this.clickCache)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){const e=a.value;t-this.clickCache[e]>6e4&&delete this.clickCache[e]}}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r in this.clickCache||(this.clickCache[r]=t,!1)},telemetry(e){if(e.includeUnsafeCount){delete e.includeUnsafeCount;const t=this.attrack.getCurrentTabBlockingInfo();if(t.error||this.popupActions._isDuplicate(t))return;e.unsafe_count=t.cookies.blocked+t.requests.unsafe,e.special=void 0!==t.error}e.type="antitracking",o.default.telemetry(e)}},status(){const e=u.default.get("modules.antitracking.enabled",!0);return{visible:!0,strict:u.default.get("attrackForceBlock",!1),state:e?"active":"critical",totalCount:0}},events:{prefchange:function(e){e===a.DEFAULT_ACTION_PREF?(0,a.updateDefaultTrackerTxtRule)():"config_ts"===e&&(0,h.updateTimestamp)(u.default.get("config_ts",null)),this.config.onPrefChange(e)},"content:dom-ready":function(e){const t=this.attrack.pipelineSteps.domChecker;t&&(t.loadedTabs[e]=!0,t.recordLinksForURL(e),t.clearDomLinks())},"antitracking:whitelist:add":function(e,t){this.attrack.urlWhitelist.changeState(e,"hostname","add"),this.attrack.logWhitelist(e),t||this.popupActions.telemetry({action:"click",target:"whitelist_domain"})},"antitracking:whitelist:remove":function(e){this.attrack.urlWhitelist.changeState(e,"hostname","remove"),this.popupActions.telemetry({action:"click",target:"unwhitelist_domain"})},"control-center:antitracking-strict":()=>{u.default.set("attrackForceBlock",!u.default.get("attrackForceBlock",!1))},"core:mouse-down":function(){if(this.attrack.pipelineSteps.cookieContext){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.attrack.pipelineSteps.cookieContext.setContextFromEvent.call(this.attrack.pipelineSteps.cookieContext,...t)}},"control-center:antitracking-clearcache":function(){this.attrack.clearCache(),this.popupActions.telemetry({action:"click",target:"clearcache"})}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trkGen=function(e){const t=e;let r=-1;return{next:()=>(r+=1)<t.length?{value:r,done:!1}:{value:void 0,done:!0}}},t.prunelocalTemporalUniq=function(){if(n.default.localTemporalUniq&&Object.keys(n.default.localTemporalUniq).length>0){const e=Date.now();Object.keys(n.default.localTemporalUniq).forEach(t=>{const r=n.default.localTemporalUniq[t].ts,i=e-r;i>=864e5&&delete n.default.localTemporalUniq[t]})}},t.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(144))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1149);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}}),Object.defineProperty(t,"VALID_RESPONSE_PROPERTIES",{enumerable:!0,get:function(){return n.VALID_RESPONSE_PROPERTIES}});t.EXTRA_INFO_SPEC={onBeforeRequest:["blocking"],onBeforeSendHeaders:["blocking","requestHeaders"],onSendHeaders:["requestHeaders"],onHeadersReceived:["blocking","responseHeaders"],onAuthRequired:["blocking","responseHeaders"],onResponseStarted:["responseHeaders"],onBeforeRedirect:["responseHeaders"],onCompleted:["responseHeaders"],onErrorOccurred:void 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1163));t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=O(r(32)),s=O(r(1166)),a=O(r(47)),o=O(r(59)),u=O(r(147)),c=r(55),l=r(82),d=O(r(1165)),h=O(r(22)),f=r(1164),p=O(r(416)),m=r(1162),_=r(66),g=O(r(1161)),y=O(r(1157)),v=r(1156),b=r(1155),$=O(r(122)),w=r(1154),k=r(246),M=O(r(11)),S=O(r(145));function O(e){return e&&e.__esModule?e:{default:e}}const x=h.default.settings.ALLOWED_COUNTRY_CODES;function T(){if(E.debug){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(E.LOG_KEY,...t)}}const E={adDetails:{},CHANNEL:h.default.settings.HW_CHANNEL,VERSION:"2.7",WAIT_TIME:2e3,PAGE_WAIT_TIME:5e3,LOG_KEY:"humanweb",debug:!1,httpCache:{},httpCache401:{},domParser:null,queryCache:{},privateCache:{},UrlsCache:!1,docCache:{},strictMode:!1,qs_len:30,rel_part_len:18,rel_segment_len:15,doubleFetchTimeInSec:3600,MAX_NUMBER_DOUBLEFETCH_ATTEMPS:3,can_urls:{},deadFiveMts:5,deadTwentyMts:20,msgType:"humanweb",probHashLogM:[[-1.839225984234144,-1.8009413231413045,-2.5864601561900273,-2.779077348461893,-2.41154163187108,-2.8701669802592216,-3.010853183897427,-2.9831997811803244,-3.0258844950086354,-3.028549665472028,-4.922879838696041,-4.503195676571833,-4.598154161855354,-5.027344698225922,-5.217723368153992,-5.366375752342653,-5.195909278900248,-3.2940850310881387,-5.181468249477294,-6.110371416838184,-5.766202229535159,-5.393352786265537,-4.920024681004049,-6.049294408676102,-6.399015490326156,-4.690163484884073,-7.459851804835359,-5.825337077308845,-4.675000760327133,-5.3635239851672845,-6.331713706782754,-6.169284763337202,-5.951151191317628,-5.768078242705815,-7.332129653597336,-6.766704624275413,-6.01222435569866,-5.268617743244878,-6.279416117827666,-5.861972559492891,-5.838071468059843,-6.267250173459698,-6.283981033030117,-6.454759516784266,-6.5195694451700765,-6.83526729571271,-6.458157413359671,-6.359696067797872,-6.250241538141395,-6.647172527007435,-6.973987597161365,-6.4598607011160425,-7.685547265665763,-6.5912026847359835,-5.794718807999361,-6.474629988987015,-7.135098972554303,-6.880960523371609,-6.747429130747086,-7.733118660641065,-8.398636456057481,-7.6323973914922005],[-2.11332750230783,-2.3060786022344897,-2.3740965556720726,-2.5398307619465608,-2.463417892707307,-2.130953109899374,-2.8009573227909073,-2.9401508827086436,-2.748847204575824,-2.8414237914951976,-5.010884149435608,-4.7716590964777925,-4.868359687249472,-5.322380370933768,-5.037006822424893,-5.279762905036231,-5.635270908532894,-2.9219817650555973,-5.50179037155463,-6.5406369920023,-6.311742070591071,-5.516975693542294,-5.7251712834206305,-6.083331008626942,-6.409455776722731,-4.856277028595425,-7.356357334609669,-6.255977591877104,-5.042089425488359,-5.723688703460408,-6.9306288690141455,-5.879866127104103,-6.269949621534028,-6.969512838475713,-7.475373123729266,-6.802062729887527,-6.566109586768108,-6.661695002244713,-6.634070998648396,-6.128265317507457,-6.0654489711795785,-6.79728322915323,-6.99559673771516,-6.996654379273295,-7.671972036661277,-7.840255377779173,-7.132455920432357,-7.233113706563278,-6.737551430374816,-7.2706736012479585,-7.430290364348156,-6.991903776514698,-8.559572276072503,-7.231105001502197,-6.117005677632925,-6.669675284003577,-7.87022016648111,-7.635233211015519,-7.18343028641663,-8.53463332772525,-8.567176875457722,-7.573077285525099],[-1.6313545940843748,-2.457209014039589,-2.565380346827546,-2.767788786784649,-2.6386222432933284,-2.595661570703591,-2.6893427324813977,-2.7198733792574403,-2.720533202987637,-2.8467380805237736,-5.029918409868431,-4.178710463028381,-5.07588590483658,-5.057436988529895,-4.899938336310833,-5.271744381251988,-5.715419865537325,-3.1739071041721116,-5.367102243680773,-6.224018730172038,-5.866973141306898,-5.730015933050199,-5.360958031920617,-6.20201967617667,-6.328452890969734,-4.837569916970598,-7.520833339090353,-5.8325529174204185,-4.950768880962046,-5.339171801246006,-6.500538943869661,-6.141626179853517,-5.826929659866057,-6.371549418153106,-7.095602530626063,-6.863928261303842,-6.26532998038965,-6.486382994639529,-6.568804701240378,-5.928030195562504,-6.138501621140467,-6.375855129864318,-6.672567424416514,-6.87690014131182,-7.500698430681298,-7.486404619424152,-7.110483757622713,-6.948864783187929,-6.7689909475117735,-7.44680608044408,-7.305175362028806,-6.490004000406482,-8.278142463867583,-7.100043692626031,-6.262757631704339,-6.785644569035485,-7.917859578552653,-6.966883288690608,-6.7663306639529575,-7.827911341889713,-7.709275282211631,-7.650980633730635],[-2.2483023852308777,-2.2601431921520803,-2.543211818297523,-2.6290975996017654,-2.597012293697696,-2.425038774903284,-2.6464962853598264,-2.7268820909874645,-2.7170988469992086,-2.6384412943652213,-4.8059842634060495,-4.801920790322523,-4.881995682865955,-4.399130557719554,-4.977525552072196,-5.254333597613871,-5.4861286120783905,-3.172333855510997,-5.311009967578493,-6.3787775808955045,-6.060833750357407,-5.179488625881995,-5.284849141539821,-6.185226477248653,-6.342526765978808,-5.0477193482508715,-7.229508117457252,-5.92913163950562,-4.781563610047119,-5.175693021409531,-6.686598785853124,-5.953265540842049,-5.765108625614716,-6.249636653394711,-7.053405713688212,-6.871084156894258,-4.746700678954438,-4.435206614193364,-6.2492260600816145,-5.437566316202071,-5.90294982336378,-6.5708663077474965,-6.4774110336687505,-6.642451113295277,-7.490560332753359,-7.638809897851904,-7.037026821604173,-6.792453878834064,-6.557926605402683,-7.183535297458448,-7.556615154408894,-6.675849393697125,-7.929241490870054,-6.920447880012594,-5.937211886970303,-6.536908132533395,-7.266281062975223,-7.138583909596181,-6.9407325511841,-7.611188320541975,-8.063402408224212,-7.7539194100649205],[-2.0350349956205984,-2.348602646771946,-2.41594411405956,-2.651370395735765,-2.563410442434685,-2.706962611141542,-2.7917112923152776,-2.7483543933766477,-2.6785026736567357,-2.8111298756441037,-4.759837736546805,-4.20618015484438,-4.787453629928326,-4.659538126267765,-5.015532806050122,-5.056335259588051,-5.339468177159593,-3.040667184111712,-5.203144447478613,-6.2264472230490675,-5.7097357671058155,-5.585194192596145,-5.035187712987706,-5.542988699592872,-6.206189420830567,-4.864552817623237,-7.387161020524848,-5.130725109803191,-4.710070938057912,-5.015532806050122,-5.563665939332496,-5.8412571088023135,-5.744609136156329,-6.206575148897066,-6.842735398083401,-6.794361813799185,-5.850672107736916,-6.088449236501511,-6.348519254409916,-5.725588459198469,-6.064735388153122,-6.479956671206651,-6.2209527037314265,-6.70094736915976,-7.3405268040104845,-7.140183173146506,-6.467358872953416,-6.7233339772218645,-6.184068000080206,-6.381516598393398,-7.406185056529545,-6.368731036096427,-7.402351186018824,-6.6091509166536255,-5.9623588984476195,-6.352529061520146,-7.133337180638517,-7.24783614109371,-6.901266731308386,-7.234806640803376,-7.432126848507545,-7.494477663675224],[-2.0215812860615885,-2.455637406643175,-2.4330253990141046,-2.6113902739466517,-2.6033787533338284,-2.6337646574813993,-2.7111759743895725,-2.7471499108067454,-2.721672070749707,-2.7644985821403028,-4.771735346669196,-4.967298931497775,-4.806933772233218,-4.796223062219612,-4.702049659123834,-4.615986584200591,-5.422222957790021,-3.024083897225106,-5.341473161524181,-5.691932137893965,-5.870247680316981,-5.6516120254419615,-4.85258639108815,-5.9684706438872475,-6.205102036008844,-4.762283950640148,-7.106211026775939,-5.754565801069223,-4.28552037163959,-5.083154204506742,-6.514533306380853,-5.91282033178054,-5.801594696670316,-6.211408552601299,-6.884100000075919,-6.5060032575028,-6.051550266183317,-6.1528452495165125,-6.237040028392324,-5.845664774991169,-5.83750622157883,-6.376088248894053,-6.3936457603588925,-6.58430154569624,-7.071724850704769,-7.213982427018076,-6.56730052905341,-6.608473779316545,-6.403307671270629,-6.973970456584425,-7.485700648480843,-6.5060032575028,-7.126013654072119,-6.592294210440276,-5.525669597265563,-6.0726189713973024,-6.168884085714272,-7.057863242618145,-6.702467385782517,-7.84259108644045,-7.932742183434748,-6.889071012797939],[-2.3515175517946965,-2.4895377785815813,-2.455794452354539,-2.6177065611128625,-2.3916765698655924,-2.55893036105207,-2.621684157393488,-2.6988517931658524,-2.630805311213068,-2.6634082117951667,-4.639123440452939,-4.108116635400416,-4.850674635561831,-4.879642999369406,-5.020506071184806,-5.079702479761731,-5.3856932140647995,-2.922465393995544,-5.272571266829349,-6.095451326503016,-5.703507123198923,-5.5861660464475555,-5.144197286007818,-5.722031888813277,-6.28586346876822,-4.872555039237073,-6.886991750607913,-5.521389523166842,-4.712785087276782,-4.712557943607434,-6.258849400356963,-5.781080159458192,-5.683518571573409,-6.497978247391754,-6.801813554699944,-6.640350228026399,-6.23670827447975,-6.480528140170159,-6.503409353749256,-6.035279500709713,-6.187868456644626,-6.634900623258835,-6.227883924459252,-6.665648019797556,-7.5457712876636505,-7.422426740346121,-6.235666064901307,-6.769319721223498,-6.343344078699495,-6.975730165249003,-7.353206363454935,-6.635677322327007,-7.937813375439674,-6.762240045635436,-6.147006740966892,-6.741296871790193,-7.715813334827543,-7.183705495090042,-6.938232467377743,-7.593211012735211,-8.021194984378726,-7.326496213127361],[-2.404503840183417,-2.43761707422273,-2.4108252303609095,-2.2999425986283435,-2.542843475674806,-2.6029429346724786,-2.584141922741018,-2.5855127818195496,-2.5510561981552526,-2.647681869737238,-4.782820501953572,-4.808208666935694,-4.979563332219715,-5.008211525808261,-5.046432738628459,-5.142457459370653,-5.485491564024772,-3.1144173778919617,-5.417825855041213,-6.245547233803318,-5.938268453446564,-5.963941744764968,-5.450843208258146,-6.059373833665894,-6.223182084343739,-4.942745700375246,-7.208409268623897,-6.038143491827719,-4.6277437642171355,-4.892513996642899,-6.694766741586792,-6.117821568685912,-5.949820065666706,-6.502648045547855,-6.835922059321975,-6.694766741586792,-6.361312919572388,-6.403294392961231,-6.118769885494771,-5.676056523505988,-6.406451957946552,-6.5244722133881785,-6.6333977952105005,-6.6574953467895615,-7.573786078663716,-7.446115322000925,-6.883692335590661,-6.903250344490318,-6.3498910941692,-6.905331510694142,-7.588115904218541,-6.879623153983935,-8.035692497676832,-6.939233062369824,-5.959077527634608,-6.324513515108117,-7.549688527084656,-7.120692921566297,-6.988939594552065,-7.891731808755324,-7.727259481120012,-7.430143376434873],[-2.2924692182301323,-2.450539739657926,-2.3769703926915984,-2.532604294663703,-2.55393918066343,-2.609718771364289,-2.6246425013179655,-2.661744915258029,-2.6011009513028984,-2.6236780353341946,-4.669477044233787,-4.1521285006409165,-4.955491059584871,-4.818890308190988,-5.030853379357302,-5.002039294312803,-5.278250342600015,-3.076829272811893,-5.307731406455737,-5.826171280206974,-6.022604681193609,-5.8364861502494865,-5.222160875948972,-5.86734719439116,-6.263453577434854,-5.1217643044016885,-7.32073988901422,-5.758783848671988,-4.666476541899311,-5.259001445170042,-6.374002568031498,-6.083417735921755,-5.695962812152638,-6.490715185357981,-6.417147740477192,-6.55681384079998,-5.431378631989581,-5.843302320137157,-6.369727752361356,-5.638321273173884,-6.50456582229188,-6.275027142828877,-6.210627212225794,-6.774279201200845,-7.54625217416398,-7.377527245335997,-6.968174323388823,-6.961544464850153,-6.5738576027632725,-6.808653231033201,-7.247759185607984,-6.667823395181603,-8.06567857870257,-6.862038055489511,-5.923075085846576,-6.772454383176216,-7.732534132174032,-6.980444415980637,-6.935456028765855,-7.926350068393722,-7.409760739910981,-7.357691884279851],[-2.395140177772492,-2.3972905877762423,-2.4380054501613637,-2.59514809923619,-2.5304957080424493,-2.553494441315067,-2.592658670737186,-2.6234135177213647,-2.5068257242437872,-2.493912396989218,-4.415128005729072,-4.8162395242315545,-4.805681457561184,-4.959588437581088,-5.013259465745109,-5.070148436368585,-5.778302005668334,-3.0289910877331776,-5.527143864017425,-6.11105402601701,-6.123887370951674,-5.975929983744964,-5.442482986164537,-6.151079378646925,-6.120416006196215,-5.065655600056955,-7.071974876907828,-5.957253719340739,-4.781773843113505,-5.354948164056644,-6.520450343119245,-6.293473674919533,-5.817016517849025,-6.85914069525248,-6.81356318675616,-6.777584585720929,-5.97764525003172,-6.226877237430227,-6.02961643394924,-5.9729353291005545,-6.418715298488868,-5.532354351604477,-6.803710890313149,-6.889653320113874,-7.354541848692839,-7.502757793000282,-6.938924369120657,-6.214291571987144,-6.749334119435077,-7.237514956739779,-7.394443065445024,-6.457482478746571,-7.947443614261728,-6.86121538479334,-5.698583920623846,-6.845759126556648,-7.683896617545187,-7.180188461548061,-6.757725777071325,-7.8704825731256,-7.881944016644606,-7.107203568791572],[-6.7847523397462,-4.956382101946025,-5.55168468117927,-6.54694976738503,-6.679027997805541,-6.920449307304025,-6.651631877885628,-7.028532297007316,-6.819873006155468,-6.9668156836069475,-5.07824502580267,-3.6978375281608122,-3.2158001218369128,-3.221520357616586,-3.5888259593254497,-4.18118917224718,-3.0226572253435795,-3.971027081545084,-3.562365839815367,-6.241860395850777,-3.738063429007306,-2.286143322088719,-2.8154088123469325,-1.9366972011829824,-6.402763696295053,-4.09673956284193,-6.7632686126933175,-2.217315348390325,-2.7898081670861736,-2.2970370063901697,-2.7943042308650328,-4.45525252224197,-5.6170558845712195,-5.634999368405547,-4.204524838877218,-5.247540598697068,-7.679731693977602,-7.496500850432476,-7.694782629326121,-7.660949127015419,-8.444625153562612,-8.02242837580043,-7.9107342568656245,-7.844229700045118,-8.496568431723452,-8.90528981102539,-7.744710798608082,-7.796294560812227,-7.4084137546993,-8.54315037261458,-8.96995880381818,-7.702981796781846,-9.818649422090688,-7.982756374523151,-7.087136791691802,-7.726484291615801,-9.302472289566692,-8.264363329731667,-8.520253749464962,-9.573314897467998,-10.041792973404897,-9.03352354731742],[-5.530908158078372,-5.12660572425173,-5.285205739999349,-5.724471900365845,-5.873312125055024,-6.16534879225732,-6.148934708170209,-6.3610443530793574,-6.311033932504697,-6.085846837289822,-1.9318371570117603,-3.9897678769234868,-4.264721024425275,-4.508665668126993,-1.397989588361542,-5.165043688633805,-5.1354703161064155,-4.710076673495516,-2.2812710196631696,-5.744808587095395,-6.153180999051661,-2.7741841902487896,-4.878049696777151,-5.0409257316634655,-2.3898944653854226,-5.13595610674021,-7.841822106027579,-2.8471437524600627,-3.4340095911141377,-4.619316513108799,-2.3549200090866647,-5.921518406898233,-5.302848234969303,-6.786138406296854,-4.207750888408638,-6.039012800612939,-7.841822106027579,-7.704962923310382,-7.065002449743519,-7.589296290560376,-8.260096172428325,-8.035112694192108,-7.871344545293901,-7.140827013169332,-8.545938317958099,-8.836893715754849,-7.993349965830133,-7.27788665694764,-7.741565502287929,-7.888977243944857,-8.111485672976682,-7.875096894912451,-10.091297373707675,-7.392485113590403,-6.863268166852988,-7.610229500226842,-8.901213681542407,-8.92241588919301,-8.313038591698524,-9.803615301255896,-9.310181420201774,-9.00812940746704],[-5.262771475279199,-4.784242541566078,-5.27970172852834,-5.684918512820975,-5.945292208575153,-6.218979090786592,-6.228233983716081,-6.354509212158639,-6.204315840281487,-6.442281485719593,-2.526983467749325,-5.114296740462473,-4.530006859098648,-5.422625873895182,-2.9651924820539826,-5.615416770210166,-5.759915004501759,-.738654569892248,-3.9951800832331146,-7.496424744983864,-2.271649654828947,-3.6688863968618732,-4.479075949205008,-6.406971077861438,-2.7704548687771466,-5.064362048924221,-7.65209604855975,-4.10990241837356,-4.3379100438872245,-3.144791234860585,-4.257400003418622,-6.678114421469913,-6.866487433947222,-7.697728752690109,-5.8045538215356425,-6.443871311173693,-8.079096309219214,-8.153204281372934,-8.17767713789166,-8.353264662504271,-8.864090286270262,-8.820319623214933,-8.693771874337664,-8.686253041923635,-8.948055666387596,-9.842684901480572,-8.909864867655205,-8.569719225667685,-8.285794202093616,-9.08611589448313,-9.094531091408415,-7.571541334321345,-10.622843459030147,-8.818180584966184,-7.823031278179709,-8.265917771336019,-8.826764328657575,-9.481851947393176,-9.0917181500318,-8.558120089824332,-9.233307603986084,-10.138335143581529],[-6.352576341887475,-4.375482811098582,-5.097247890129581,-5.253867383491415,-5.300921501088017,-5.719261065235271,-5.695077377144448,-4.664604980788103,-6.0509261540753565,-6.1211148128546835,-2.6955840583648807,-4.0885439717448415,-4.601612684872268,-4.3272866151564005,-.8335121453767717,-4.368698782518719,-4.841722524158204,-3.6648788033138118,-2.5172646408008483,-5.8838060715240985,-5.03345350892465,-4.275021730152804,-4.6405776530763765,-5.25643229403688,-3.133213396702524,-3.881602832644344,-7.333792367288475,-3.6375800962202542,-3.280343679384232,-4.168603006615407,-3.0158762344692915,-4.957870530657444,-4.673357005846336,-7.071279326505898,-4.732292586433726,-6.102987428262127,-6.308187629826426,-6.692855118141101,-6.912844895031934,-6.811275201992611,-7.387021770702892,-6.866694309094154,-6.971677700053924,-7.120054614261141,-7.672123196561181,-8.47105299909571,-7.06564216575394,-7.303313817631059,-6.877175818825198,-7.588372692026248,-7.710844848156796,-7.012073355807918,-9.487490679574803,-7.203069557208429,-6.086293297912648,-6.450936411500557,-8.098699438256325,-7.677018501414594,-7.313496820953744,-9.611543328244782,-8.931691690166081,-8.112931574673333],[-6.278777370845214,-4.701340011999448,-5.078865738235898,-5.8830885176004895,-6.165050673343658,-6.274964098411205,-6.212416394644692,-6.400778791567437,-6.741692863598321,-6.816576094912807,-3.3928904712107735,-3.566247086795751,-3.646180662937257,-3.523693462975528,-4.243767227003855,-4.080529251966207,-3.795135190780714,-3.596123418433819,-2.7581828008765474,-6.336206897605354,-4.412794119233608,-2.7790238541384125,-3.7937492847610685,-1.8714655708089012,-4.039189587014222,-3.917817104421266,-7.57147815542886,-1.7211826197805813,-2.454732555101985,-3.258178620019967,-3.831607640543702,-4.745787338078659,-3.8173867609921763,-3.6132042458306612,-5.788388393117924,-5.078865738235898,-6.509442541403006,-6.358094961721853,-6.982655840165303,-5.955633264954192,-7.203135532877834,-6.519814112808369,-6.508748303549079,-6.5805671825510945,-7.521390752829464,-8.307422019239775,-6.987204748691672,-6.90870144071007,-6.578332663638785,-7.263487211998134,-7.281252691733005,-6.635300404511988,-9.747550691415777,-6.939413018359865,-5.8716986926591,-6.717215468733563,-8.061948046761787,-7.4055504084105825,-7.052394044113555,-9.471951436870118,-9.440772718621666,-8.392393495069179],[-6.019277337678054,-4.809610930457335,-5.353723551448762,-5.676382755872694,-5.70371603264992,-5.986064759126338,-5.8139317591377235,-5.978144349530662,-6.042881895447475,-6.198360420377549,-2.2921047448703056,-4.34095023979577,-4.345648109454055,-4.367598309292761,-2.0155741702111323,-3.0132780221373907,-4.923111941566577,-4.563679111444075,-2.223531060167143,-6.691102686207805,-5.506010794027101,-3.0594865563826104,-4.849221407410736,-4.504665385487454,-1.9294270482862954,-4.87704758753489,-7.8125932274537675,-2.476262613634102,-3.9821539473427885,-2.8193399945915623,-2.274864811699418,-5.85738068573614,-5.424700477670406,-7.189965927648669,-6.389275800912233,-5.638934468614081,-7.03745392086323,-7.341255375194895,-6.260863632640313,-7.279063354938447,-7.679061834829245,-7.811259004440631,-7.236144890792278,-7.5275849533863886,-7.494018129747305,-9.1181262319292,-7.907769904821474,-7.576977708715964,-7.061731490444577,-8.083943001314976,-8.105182737815888,-7.709906510180343,-8.65367988774833,-7.560240916360441,-6.676421938949557,-6.335428678009885,-9.006382193489584,-8.143473650809202,-7.5376758563683515,-10.154666091954931,-9.349927845986523,-8.656780665426579],[-6.45948206141902,-4.541389017548509,-5.0469147172405115,-5.714893702071352,-5.93765911006474,-6.159588168280474,-6.484829040506417,-6.54643138634695,-6.777423978144398,-6.472536180151478,-2.0992585177991696,-4.351360197286945,-4.810779680772453,-4.478347221038041,-1.057979923268165,-4.503803429976553,-4.369600328148692,-3.1761274441594316,-2.5925706700973334,-6.132316774171815,-5.0527495258256305,-3.548319221739584,-4.665298532220545,-4.239092161682817,-2.8823289365699227,-3.9799558061803935,-7.613527691788449,-2.9149052754992715,-3.0856952412535055,-3.988705873974733,-3.519423658731669,-5.380012776918168,-5.236242140888087,-7.294418265937878,-5.378236234528395,-5.653900468202214,-6.843339306558724,-6.1506932535462235,-7.23734725322546,-6.366553451469326,-7.364460455464448,-6.868708500684183,-6.652923233094938,-6.285920796794185,-7.434940854111734,-8.332992180665768,-7.045904469629325,-7.3935637933916185,-6.8666551118723405,-7.771896007559911,-7.6868589648739984,-6.982133113853507,-9.79784886428876,-7.098382406877942,-6.05045863483477,-6.643853499354418,-7.8988076492249855,-7.62952803313489,-7.2191872449632415,-9.030593711575094,-9.78510983851133,-8.512650620040239],[-7.312010848930209,-5.9704021836204655,-6.3878250976208735,-6.964626238636961,-6.946983784483292,-7.4124339237241115,-7.3181741966378775,-7.680384414313297,-7.712878247789743,-7.554150900935073,-2.446039713635401,-5.2426041270797,-5.947299500896444,-4.663409565765878,-1.9484553212571183,-5.736061416021277,-5.712018325729332,-4.9933347157551395,-3.124667578606162,-6.881965531986077,-5.837272445819192,-3.4071965596735665,-4.466780007835062,-3.7439634287862087,-2.4245394005655605,-2.7481043832730636,-7.96925132102691,-3.001717011027925,-4.3613498567188325,-1.0557054893757776,-3.70597885137566,-6.306264213716016,-4.571775536818785,-8.174476930790583,-5.896948417633875,-6.225037976827956,-7.408704473732679,-7.482057817244962,-7.278478028822127,-7.6772808871048746,-8.27951403118039,-7.874318428531343,-7.723948471543991,-7.700568997316141,-8.91379761462879,-8.048158534515101,-7.944081716081054,-7.980577820654186,-7.290733450482923,-8.159308709317411,-8.547715834521,-7.821812931153412,-10.179602578494553,-7.600205085285631,-6.935111692528849,-7.541317747952087,-8.80008790436004,-8.364689804291782,-8.08874001915325,-10.681459532277783,-10.11675467483489,-9.167510387022356],[-7.888212115175222,-6.644858293408979,-6.899926832152373,-7.644887076927795,-7.6845832447435445,-7.532598742461448,-8.35541557609491,-8.047237610771814,-8.039272966898704,-8.151069111852731,-3.668932909455333,-4.782855975285661,-2.6659061839419613,-2.8967154778709228,-2.0223904901109755,-4.446771913881909,-3.000219123980515,-4.8870757508472185,-5.930891109758962,-6.823383785692898,-3.2455278628878323,-2.6715253337166462,-3.4540042231373063,-1.613293110190054,-3.32378892967727,-4.249589417392827,-7.22956773062339,-3.479217249500404,-2.6394006861426296,-2.505331420610824,-5.608431497999796,-3.9128781321838506,-6.817651617834854,-5.899129031817539,-6.838124773860243,-4.798082958969038,-6.707198867504101,-6.862144714309829,-6.946702102337892,-6.119321735858142,-7.3106242225785305,-7.047703884629593,-7.1735103563413185,-7.1142937780684905,-7.8727953781736435,-7.684274173500164,-7.105593531784784,-7.043298950514618,-6.705339482889372,-7.153500510194026,-7.545964351744817,-6.429130146514012,-9.208169648866278,-7.146978747947639,-6.381569697965211,-6.863775814304458,-8.274721978073412,-7.87653370028425,-7.678419897035876,-9.611509357662127,-9.195484489338961,-8.64028017837942],[-5.479179331884548,-5.058052917950845,-5.462604366790335,-6.042749073104725,-5.955329948912708,-5.958323963125313,-6.182592584875092,-6.134964535885837,-5.987223312688662,-6.092926822690444,-1.4103668710151773,-5.3350267357418115,-4.970584606980225,-5.289457186272422,-1.770010358993832,-4.901554513033236,-5.37688758694302,-5.089624713826659,-3.3520314691389803,-5.392942008652894,-4.734460344193294,-5.4364649785873,-5.373540303482963,-5.098468738623112,-1.787587681664556,-3.2734283276295595,-6.018573842572738,-5.287155689284143,-2.4508369623232906,-5.268931950327691,-2.1042922431924556,-5.627005270227098,-5.60465202444635,-5.974953220096848,-5.917202163476144,-5.89303609762896,-7.4048682036926285,-7.92851451588768,-7.027392005486696,-7.609083745121319,-7.38594019380711,-7.373517673808553,-7.797674914928869,-7.69894007424318,-6.9721762828842495,-7.92851451588768,-7.9072371174403955,-7.498269378781029,-7.24617825143195,-7.836141195756666,-7.972477639308797,-8.030297210197622,-7.424161406627308,-8.130380668754604,-5.985681292336846,-7.548459123304884,-7.876146530370365,-7.886403030537553,-8.383576565135217,-8.509870290459508,-8.104405182351345,-7.3612475812167375],[-4.615704248273826,-5.059874046144977,-5.605352624766998,-6.125932548297868,-6.262849675716521,-6.79239877505316,-6.990929985784472,-6.841047905444769,-7.1584533214794765,-6.9886390340379165,-2.1061188583709898,-4.694960766195293,-5.294767434713961,-4.877455498156362,-1.7372915500183557,-4.54913156517679,-5.204152324138941,-4.129384627657894,-2.037945671503165,-6.073264053143508,-4.589028985169175,-2.990753289694604,-4.778969963958759,-4.689721987339014,-2.425686266522293,-4.746481928875957,-7.836127606736178,-3.351158263461062,-3.2418172438356554,-2.1018059989954563,-2.7036646563447677,-4.616611132654885,-4.89196974360223,-7.672674534246606,-4.594182160042578,-5.702759391924034,-6.928687676907251,-6.888038111045066,-6.879281938695605,-7.0247524516915965,-7.464610089759517,-7.314413547152238,-7.29014621148154,-7.293244587314209,-7.623992355607218,-8.372647679876952,-7.108856380340105,-7.38925322665568,-6.931385277679899,-7.915280634635728,-8.074744053353632,-6.836124212582984,-10.164407149105006,-7.372318020898097,-6.283267109907934,-7.0071153102054895,-7.702596214111655,-7.848216404055182,-7.332806708624255,-9.549591811814969,-9.295811291038868,-8.128717117098297],[-6.86596902684244,-5.052082122851932,-5.150933488599681,-5.292208274141252,-6.214682697483703,-6.745331904339627,-6.68552490120206,-6.760045968476806,-7.227305715576431,-6.950863382929711,-2.1215717821722215,-3.9228106947364623,-4.840908762978201,-3.0664686008437925,-1.6983460154315366,-4.061987675375524,-4.329017422576037,-4.468146834761754,-2.0559567932823986,-6.284656471404593,-4.495653917304999,-2.239702601986903,-4.059167724800704,-4.675038779649125,-2.554078005507218,-4.208324039380938,-7.846798279854166,-4.952711862629422,-3.1510988852700317,-2.942373372199169,-3.3895078376634635,-4.604176621456193,-5.1138376420493366,-7.9144140567925305,-4.640693910453494,-5.102920313867999,-6.555881088992486,-6.826369644359554,-6.799686147757116,-6.863359893400418,-7.558312671802701,-7.067443904093005,-7.193279183729173,-7.1899393531824245,-7.705592764618944,-8.457679157012771,-7.256276285899237,-7.186610639983997,-7.0503828029559665,-7.591798854832744,-8.06246715675167,-7.178062400973902,-9.768878866076495,-6.917516203514602,-5.665418470446385,-7.260143611855673,-6.937390775844807,-7.687607497719584,-7.3485921408206325,-9.2384661090352,-9.464847655623185,-7.897922355187247],[-6.774920173861653,-5.204290861824316,-5.43566671911157,-6.296930641076284,-6.565626027570306,-6.7373590105822805,-6.991252066666452,-7.063233360250443,-7.2676834795551315,-7.1966044322333405,-2.083909994196951,-4.067585265323549,-5.182321460673428,-4.835732283228186,-1.980079058156674,-5.0283663440075825,-5.072641431371989,-4.6392056435133515,-2.7086094993416667,-6.770304135451181,-5.008181972697398,-1.1019554288598505,-3.2594369265598493,-5.6765883311043766,-2.736784393019736,-3.364824539297133,-7.918041582638827,-5.789527217909832,-3.4282422713486094,-4.498435097687583,-3.6322465613937016,-5.355734234640129,-5.0804532195051415,-7.17597860187687,-4.9759313787901425,-6.718299350460867,-6.452973839496266,-6.266241964550636,-6.756169624516277,-6.43275589071587,-7.149632742116933,-6.722481373881418,-6.632646871978412,-6.5830057991087605,-7.441299494170494,-7.5325638154552745,-7.295254585596671,-7.196283868037615,-6.683920964952739,-7.4835386813502325,-7.587428922371031,-6.992558402580507,-9.54477866233574,-7.0691430439756715,-6.0008086042221205,-6.0079129112663265,-8.273962947039259,-7.457398913104675,-7.183861348039058,-9.235518989239411,-9.247910721534573,-8.527701618931673],[-6.725963719695806,-4.710012269685353,-4.981543035572536,-5.7693914443296395,-5.741238652017211,-6.34104225410854,-6.461701921452123,-6.616580803658851,-7.050213688876461,-6.932988782385651,-2.7442254377569215,-3.902092293780571,-4.081087684032349,-1.8459531867558991,-2.260196124051401,-3.8113055093318327,-2.1904142607255017,-3.5077174805325915,-3.070625904070985,-5.688404814159279,-3.676818033328958,-3.705969932950152,-4.175966474127823,-3.555777846153588,-3.6599169276373167,-4.233380646142029,-7.565625193952616,-4.758247211588438,-2.668505149650637,-2.593317887541856,-3.982238613532973,-4.922572014698711,-4.457568202222798,-6.922768742308341,-4.874097132395777,-3.7366670217502587,-6.099051002533345,-5.950541812233132,-6.754321355464054,-6.000835251677606,-6.818602573551164,-6.538250446625281,-6.5136752899401404,-5.7389354920585625,-6.837502673710269,-7.922940958163197,-6.4879709082904045,-6.559235554477551,-6.415308634074,-6.963830229106114,-7.464928001069955,-6.466545899251641,-9.489635645899149,-6.3635319575989815,-5.527598474760337,-6.407003965795449,-7.463914829757348,-7.418626873140783,-6.4607730713017455,-8.850715648219035,-9.544876513609825,-7.984492491801492],[-7.251231594323855,-5.21374696908488,-5.698223064924641,-6.1375976604763816,-6.322511629217009,-6.768362468268195,-6.494106816635844,-6.457670861321346,-6.860741199932812,-6.755693520691695,-4.0580333694338515,-3.9411669781297105,-3.7467312772977017,-3.0227837077197126,-3.61529958808048,-3.574469853485688,-3.2007714947116837,-4.080705573827712,-4.670471138732819,-5.7966968651863855,-4.155602316322404,-2.9527040483599185,-2.862751521261682,-2.037725742388079,-3.7818488691194445,-3.113228390392548,-8.164264994327704,-1.8458475827404217,-2.5467378386179824,-2.7020967605017185,-3.188124830525815,-3.6799312814828857,-3.4909044267832696,-5.197365837878935,-5.202188998354364,-5.870321468395694,-7.4721345906728445,-7.508740887837122,-7.308294052687071,-7.524695844262695,-8.528908107915612,-7.92499206108361,-7.684820971302881,-8.246116020758024,-8.52404191826444,-9.16793672064164,-7.835273241415741,-7.178620119286367,-7.559608480967977,-8.499112535221915,-8.875184344633446,-7.775193695995215,-10.198665810583236,-8.01769231637253,-6.730988787795164,-7.673144441641045,-9.323628945401888,-8.330457169191774,-8.013022138590646,-9.77099654516406,-9.908396414566504,-9.416350685452109],[-6.383306695601549,-4.903894061372386,-5.294037540593016,-5.450500954330478,-5.333223053427145,-6.308171725769449,-6.710407117707228,-6.887542628987831,-6.847572675445971,-7.035457528925254,-2.2105034037003235,-5.0202198363584465,-4.228806005807516,-4.2610399361561155,-2.630714925229401,-3.899363165669206,-4.911168632565807,-1.9598915311908123,-2.357698156549484,-6.874278408705108,-5.4856719078268386,-2.9453898821076563,-4.76865138002776,-5.849682782165729,-2.1582691520417923,-3.13711767038794,-7.932068702852963,-2.1341546758789423,-3.3759594869296796,-3.525124340216131,-3.4812218611704324,-5.083766155674364,-5.7936328268294535,-4.353576622920111,-5.907706290260866,-6.135534326871947,-6.846532994187875,-4.609063889576182,-7.503287789431182,-7.483445868632177,-7.2287173521187755,-7.853210127940644,-7.155334806184752,-7.407188463381393,-8.090673733029602,-9.081164896953064,-7.857960730699241,-7.896800564015505,-7.262268886290009,-8.128645226782451,-8.177248142566354,-7.485412437604219,-9.720755973044048,-7.9739596445621235,-6.796539470357211,-6.907958941482774,-8.646989682962468,-8.283628546124925,-7.797896489956591,-6.6686665609139695,-9.771081056931564,-8.750720965163202],[-4.685181991517679,-3.1394221383869034,-4.505733999919456,-4.7128201143378075,-4.721709061755053,-4.800636320344724,-4.867216645426291,-4.85864761270119,-4.820149134568306,-4.881081685563463,-3.6610088191091923,-4.523883318425133,-4.405422178721609,-4.511747247142908,-4.4973757423052545,-4.410859930021738,-4.692381446660533,-3.970040309575452,-4.061847858828575,-4.724689689893191,-4.678033998252392,-4.350556098635668,-4.167208374486401,-4.450909776342023,-4.644417387453407,-3.724277324458299,-4.630737283549326,-4.509337607422754,-3.787718752781497,-4.309323510802315,-.6823718671879156,-4.449775346271411,-4.306372205167735,-4.410859930021738,-4.920232593125288,-4.3914208729895154,-6.478377211171838,-6.487035273914953,-6.801150603434889,-6.531487036485786,-6.875258575588611,-6.039010551387992,-6.9553012832621475,-5.362670489144429,-7.042312660251777,-7.027274782887236,-6.983472160228843,-6.58757650313683,-6.732157731947938,-5.820321350423163,-6.504579583565862,-6.710178825229162,-6.395685495326725,-6.710178825229162,-6.559138567816296,-5.802621773323762,-6.789316145787886,-6.8131267944816045,-6.29749346914751,-7.1889161344436525,-7.012459697102096,-6.888161980424519],[-6.973841065843466,-5.090695336189662,-5.341561221116127,-6.0115634498929555,-6.202945132409144,-6.628849553394376,-6.911669409716161,-7.0009992844957765,-6.886081347969349,-6.711294966663227,-2.260331825727248,-3.839334077735597,-3.9667628422059718,-3.420241689905642,-1.8735787833427253,-4.188499103605226,-3.691171678101274,-3.8593630820739957,-2.3524981891706576,-6.231341006564324,-3.7662373591100775,-3.6465568924129386,-3.4963200738799767,-3.4321214183238204,-2.593050419274572,-4.346868167488547,-7.8364379197408365,-3.990422275679548,-2.904818352752614,-2.3714612152432646,-3.1378637759089556,-4.357037863124861,-4.651314292504279,-6.760867254793699,-4.107313187039242,-4.3976920060255535,-6.440759053046417,-6.465477098310146,-6.582182413654962,-6.610599862587676,-6.978263755093254,-6.719449335464573,-6.730879435939417,-6.514035039942995,-7.843934206718764,-7.66305587798569,-6.780807453646412,-6.810345466083276,-6.347157031161333,-7.321885120582923,-7.779113558339937,-6.602957069625781,-9.658525717989464,-6.893034874465941,-5.640541915214837,-6.61808064554899,-7.825297811959789,-7.623352248005446,-6.729273803531229,-8.625119353004427,-9.394209194493895,-8.033505455437194],[-5.604855175474509,-4.462285490693087,-4.571350651692403,-5.056493889833258,-5.072440143885144,-5.681064638387167,-6.280536665394942,-5.74786868753166,-6.300402104581103,-6.443541857970619,-3.08781816164275,-3.6971443171127936,-2.396573090959646,-4.216785762291264,-2.055069601332964,-4.2400357108180975,-4.510301966657801,-2.8725223515174108,-2.985980079879496,-6.151031964062443,-4.17853136290412,-3.739735408911567,-4.177743865892257,-4.758224336321508,-3.406169247786832,-2.7407038589797272,-6.9336687884910315,-4.884332887441078,-2.4403221799860293,-1.8263508274951405,-3.4054696763623764,-4.562592776233452,-4.420217843796468,-6.782722037918705,-4.9372619598181355,-5.457485531187882,-6.256287610141627,-6.611108985431037,-6.565907361549403,-6.49534726380481,-7.061567128112425,-6.599672447239019,-6.7013251912547664,-6.80746927442344,-7.516987128232732,-8.06324629910308,-6.809992050813993,-6.860502751231873,-6.646463246903641,-7.480934599971211,-7.54322475844959,-6.575185095427639,-8.985698479921282,-6.994899040702809,-5.767168821265772,-6.530694737719788,-7.839611467995152,-7.435063610819411,-7.091053743823944,-8.707954377459634,-9.10781723001913,-8.370947238445352],[-6.890344120648169,-5.02940421086846,-5.408867487897182,-5.967857793669728,-6.047653312106489,-6.46237897058548,-6.749954722267399,-6.888388607925276,-6.98955227182629,-7.21719797180092,-2.4868466816371,-4.771074471877903,-3.6481121610473157,-4.664656454469179,-1.6817234068168874,-4.586866350603287,-4.845552155508254,-3.154508356873059,-2.57905575846229,-6.254276196451527,-4.921506816489567,-4.4705470709445265,-1.6402347840968394,-5.1280286653720175,-2.882844123251368,-4.595878517780293,-8.231899529453244,-3.131328577959143,-2.841674626039629,-3.3059284308174086,-3.1776616460738145,-4.478455963747706,-4.881954395151054,-7.651052083171771,-4.569886902888001,-4.27044926534142,-6.859624364774909,-6.620591583748609,-7.035724951332805,-7.0226528697654516,-7.663432064808081,-6.880725735179707,-7.096836038369936,-7.001238775261635,-7.94609099384926,-8.742881147291776,-7.2506609077408095,-7.3153280695559095,-7.053568548019118,-7.728589206441718,-8.033869830584925,-6.95515998225557,-10.250083546611185,-7.317576103473792,-6.34314386192865,-6.83930777142871,-8.443181097280567,-7.8493114938202,-7.476614929901965,-9.60010853791645,-8.54213954241637,-8.677952686589895],[-7.97530600380511,-6.415691397743754,-6.861539964259856,-7.354178676035024,-7.5544322703441,-7.956843940965374,-8.00285595557334,-7.941715059369074,-7.997284910523884,-7.042078762400056,-4.593656623473984,-3.4358427231129607,-2.813804032113097,-3.8443096208464707,-2.253236786554918,-3.523372060796657,-3.771274119941123,-4.213005093082092,-4.26676474950711,-6.604661414352346,-4.071781743539046,-3.0636392294004997,-2.748766550188664,-1.5979085155684218,-6.096125476162904,-3.8319741165296572,-8.437883856353995,-2.362166563210972,-2.079080404566457,-2.423752746988421,-6.1373971409737065,-6.112261605870961,-6.033619491127531,-6.187046440930159,-5.880551407088361,-5.508879098944167,-8.771401153617497,-8.582218506443597,-8.081702252336468,-7.820268405959624,-9.01805471242806,-8.991966276343762,-8.037776271878622,-8.339328192194554,-9.20125771484982,-9.932145223392613,-8.711282886564021,-8.633361864553784,-8.75433589306331,-8.724333642759511,-9.49070501282617,-8.37573721938598,-10.194509487860104,-8.552742688310644,-7.968342726152964,-7.956843940965374,-9.863152351905661,-9.598817643450872,-9.08877973142313,-9.278218755985948,-10.729432663205156,-9.20125771484982],[-5.1527222081970026,-5.012025127950751,-5.39388426501389,-6.217687012129963,-6.355002880531065,-5.6351154829069525,-6.363993950090922,-6.903492332891861,-6.853964796193012,-7.129436704737862,-2.71361594954537,-4.917813116205636,-4.909342477322127,-4.834757647401019,-1.3606202815267094,-5.049186428683174,-4.831934627067998,-4.02878090419557,-.9857025802248848,-6.9583248115172545,-5.928056254423655,-5.1548164498001166,-5.532591229650075,-5.575217341325883,-2.1159432194090155,-4.2897086796604516,-7.362881241689201,-5.200780422733714,-4.007732553855012,-4.899317914996637,-5.732412626945404,-5.409409253401815,-4.570479874572386,-6.004563148213606,-4.806034206660294,-6.602559371961363,-8.008146936015933,-8.264296783798311,-8.114951495245993,-7.067733915701082,-8.653122572902513,-8.40456220860418,-8.35558820400772,-8.362968311305343,-9.101577865942044,-9.242891399008622,-8.693532111240389,-8.468328826963168,-8.348262163915647,-8.71436619814323,-8.123659823137777,-7.872345394856871,-9.1093600063841,-8.693532111240389,-7.279281672853908,-7.536521246398329,-8.924437667890087,-8.99854564004381,-8.061492916721225,-8.91796515338447,-7.579574252897618,-8.90514446495541],[-6.625065979493934,-4.788580474517243,-5.256407824340383,-5.37832984858721,-5.2038978790684185,-6.079823689638168,-6.317086566978479,-6.646320764762257,-6.72855886299923,-6.886116701148103,-1.505097000684665,-4.82588581184553,-5.253602398681012,-4.989577089424305,-1.5758741362397704,-5.185784176269271,-4.916501452893276,-3.8159863951228723,-1.6041923545980379,-5.633841418592661,-5.7199839934992545,-5.2161585690547705,-5.369003667873634,-3.3721189713516244,-2.661522576130661,-4.670108701549678,-7.227790153984301,-5.183916064386551,-2.494756625753895,-3.869077211017653,-4.27104038948766,-6.0954898063825675,-4.71167529774246,-7.136943681210728,-5.987593808088792,-6.590446143960144,-7.403791666759668,-6.814987319540992,-7.030531087602099,-7.451894781778061,-8.262224216961,-7.8389014914528286,-7.199379152151521,-7.871278420177289,-7.002535480112671,-8.630549778119708,-8.06204504276704,-7.169938203345767,-7.199379152151521,-8.169374062997537,-8.264930578558742,-7.090662928646722,-9.550754409315,-8.033689817011913,-7.078178371984477,-7.674437552058881,-7.921898411023797,-8.116604027017473,-8.273093889197904,-9.39660372948774,-7.831846788472939,-9.063739434242727],[-5.33959692367457,-3.901875433911095,-3.3263523840890916,-4.682859878096868,-5.0569946532038434,-4.833678156338227,-5.439237690659609,-5.4278954140556746,-5.662170026427569,-5.462315637942154,-3.751806551579704,-4.660118258928943,-3.8333548860836233,-3.8811153084238335,-3.4958051088141735,-4.553750303632283,-4.534932311997922,-1.8458046740483725,-3.0281790617647277,-4.436160927561686,-4.943995470762378,-4.549402848736927,-3.9218705969950047,-5.328568099202016,-4.452091297246621,-1.4302390343932077,-6.080922600826194,-5.1148485422425125,-3.3219189169449392,-2.621905648275213,-4.3789508674983555,-4.262632175345694,-5.088920047216344,-3.3849839728869298,-3.307281062205608,-5.974439120423745,-4.379829216259262,-6.791884017661267,-6.8166991867809905,-6.068955964208674,-7.1565271312491765,-6.683586642330131,-6.801736314104279,-6.532793078538745,-7.518256845849533,-8.152370494825284,-7.391505140210389,-6.7194113688482755,-6.416271872702784,-7.279027156783699,-6.4871905993829495,-6.66039719741122,-8.204669994228134,-6.878895394650897,-6.094660190607558,-6.427558674237414,-8.084652320770335,-7.339319387039819,-7.347830076707727,-6.950948712290955,-8.303341521735163,-7.468823387994359],[-5.431835629645527,-3.900968951139421,-4.151004765492447,-4.646528675532386,-4.521804796114552,-5.283128043243618,-5.29007437093391,-5.66335521876192,-5.740643416211578,-5.366660147370001,-2.670098748915231,-3.286242237340954,-3.3585141055181613,-3.755602707715123,-2.5586532961090027,-3.6926656242369105,-3.8330192649391925,-3.254475467118251,-3.8290307266838655,-5.019290301102854,-4.363753678748955,-2.9684754808494547,-3.151618081678543,-3.50657051212598,-2.895083629045828,-2.91665360144011,-6.285849431998168,-3.6228229122699127,-2.152751777383897,-3.3162167836347605,-4.2488413058475105,-4.652746019284857,-3.9288228848114928,-5.349158624766704,-5.572231075081914,-5.261791793324819,-5.624778734167247,-5.278347157643276,-5.3043854022704995,-5.210237912616575,-6.346428699255328,-5.93048158286466,-5.615084400228674,-5.89255288484716,-5.916841563358977,-6.777270925569916,-6.237681480853062,-5.483828321441287,-5.599254877723378,-5.735607736245962,-6.332645938959907,-5.443956990177872,-7.787390135984574,-5.974679054270741,-4.487700164671342,-5.484479363130949,-7.787390135984574,-6.624646575217306,-5.915838554247808,-7.256570295689133,-7.872330812633658,-7.3300889926342885],[-5.8962959205599565,-5.022482812723318,-5.262967235210922,-5.638331471894197,-5.778457744433211,-6.3109845765456285,-6.29163873510587,-6.56832765910669,-6.49255510063436,-6.3650100589758205,-2.863492599093995,-4.089024629780227,-5.154949557468251,-4.484159695248834,-.9343644420039627,-4.498161263246394,-4.6279862283262885,-3.982370058053253,-2.2035282537140866,-6.199482179547703,-4.571665803362194,-4.084960905072187,-4.755413554835734,-4.800997636581884,-3.6971982708382995,-4.566795129611478,-6.871351961660363,-5.099526707333125,-4.135788994836005,-3.1706024468180507,-2.212641008744242,-5.078715683958774,-3.5811841558979225,-6.741940888008861,-4.856098125468122,-3.980907107020626,-6.712325967469931,-6.644006723492454,-7.153784678226001,-6.945055157447498,-6.898020208742524,-7.021563043483541,-7.173168545047049,-6.854391346353318,-7.669859657878135,-8.284314569862415,-6.895321151773359,-7.513205847832758,-6.795366054682441,-7.556635405760094,-7.827916592672458,-7.241272132349116,-8.35137880044296,-7.187505708193456,-6.1188193168155305,-7.139919638088829,-8.075324765986299,-7.379987004046535,-7.364785842714484,-8.480789874094464,-8.527936652520165,-7.717773013574032],[-5.1596391409467905,-4.446625879300866,-4.792661465824471,-5.092676376197713,-3.486026851337387,-5.293817992318437,-5.4207097441730605,-5.031624556083574,-5.433394903700377,-5.123410202650332,-4.715036303793935,-3.7021536789683007,-3.7870302329121537,-4.088809455118969,-4.812132309601868,-4.898021981482298,-4.704305701448848,-5.045386241156256,-4.694501701352228,-7.439823297251669,-3.3979941838940024,-2.7387677229303073,-3.4751598040428164,-2.0375451283648167,-7.179408351140228,-3.811103778633784,-5.971540702552751,-2.9729698958508197,-3.825149191015764,-4.478865937874288,-2.6641628726801234,-5.3193066285353545,-5.996634270150407,-6.375549146164451,-6.785390628872414,-6.572829186888741,-4.124487206195906,-4.535138151336436,-3.7135200209337587,-3.96463850525401,-4.554386339641352,-4.765674647825141,-4.429638997109137,-5.277664924510665,-5.02086262836912,-5.937153360243275,-4.7565501004863675,-3.693750268171921,-3.749678820831146,-3.176252392796863,-5.722496422806384,-4.546642548744449,-5.417354036326088,-3.1803577086920454,-3.749362815140414,-4.066652137558128,-4.660532401294013,-5.1570534898617675,-5.430844966067104,-5.284241491875228,-5.5748604240003194,-5.63236491848051],[-2.1543734650260515,-4.349659150265929,-4.518901599180162,-4.334150339570116,-5.146931928181808,-4.726677895862385,-3.8738862022041083,-5.547738126032732,-4.965611539500847,-5.329386916158828,-2.0510193107742145,-7.017067715762613,-6.5514024881154755,-6.782731624016124,-2.1387030138865364,-6.887331394106641,-7.26098839501858,-5.915573580719614,-2.792353319034718,-6.475549145597215,-8.196805549243091,-2.7290425937620233,-6.57338139483425,-7.482751683863832,-2.7069370493135643,-6.6217549791184664,-7.959675755954141,-2.6929063910157374,-6.402701413055781,-7.378081061299943,-3.038722067403394,-7.146279447242619,-7.442205589469482,-7.777354199160186,-5.436617340201765,-7.9268859331311505,-4.21410095816366,-3.7159537926574395,-3.274052690014408,-3.8709022387814955,-3.903841048493916,-4.907248138723605,-5.564815386850924,-5.634025390029099,-4.794669640998671,-6.37044055083756,-5.773624479216047,-4.984713243886536,-4.705003878814023,-5.884409585684786,-4.869643914101749,-5.8105008762596295,-6.426399204485604,-4.552569937605819,-4.688840192155229,-5.1496039404596194,-5.387063525747035,-5.940338138344011,-5.40158748887255,-6.8282736444630405,-6.302506440698851,-6.49077786629904],[-5.042027972011844,-4.299718672656642,-4.243324982365076,-1.9825142998026875,-4.725280240738409,-4.751810055033314,-5.528415080508104,-5.372269658882421,-5.58057814379269,-5.634199235231788,-2.092585085927561,-5.359310514239916,-4.924244936355461,-6.182928172882705,-4.358300013368391,-5.644135441890917,-5.3193472574280785,-2.4216711986248063,-3.5454438576615357,-6.6553797837670805,-6.406683158028254,-3.42063060974259,-6.230496589801815,-5.313180742512414,-2.1141313157147192,-6.38251279710044,-7.199431055161392,-3.210947634389801,-4.823896962521179,-5.599497627038855,-3.7500872171087103,-6.903338504201014,-6.960201366095558,-7.542682978767983,-5.613234106766742,-6.36476085164199,-3.6714819678600925,-4.875454772186028,-4.20471280907303,-3.884017303250544,-3.4828969984685907,-4.20471280907303,-5.449056802096191,-3.411103801364231,-4.476181634325785,-6.299489461288767,-4.386290645201218,-5.042027972011844,-4.789932598747867,-5.333885415874105,-4.1803254304220925,-4.950988261330972,-6.251222720318932,-4.73156059252596,-4.355150404465494,-4.750641830601388,-5.174666905853347,-5.78646844695934,-5.852762894799176,-6.180486169227153,-6.353098911894147,-6.096324376905443],[-3.621153540136533,-3.927545190670303,-4.761298021301781,-5.2327070159671,-5.390836480884121,-5.489330016767771,-5.419938023343771,-5.638503085521277,-4.333907884333748,-4.5925613698517225,-2.3774699118392917,-7.240027999198052,-5.856199730573355,-5.309006462636489,-2.1188535037876086,-6.988713570917146,-7.259929153515347,-5.733217613565709,-2.1988937611323722,-6.914879308906094,-7.285375819176511,-7.471829613255376,-6.297483936486472,-6.369085087302357,-3.0144535413397078,-6.131611710433321,-8.510182710405289,-3.290870578196505,-5.79050447130796,-7.191941812530414,-3.661034886200146,-5.933160771709483,-6.992552347224311,-6.430741168725453,-6.006448567479316,-7.6405790925037875,-3.820123280601132,-4.60874181430768,-4.552214016916188,-4.152125265844404,-1.8440074384079603,-4.33229280995845,-4.748982594711727,-5.590043992369601,-4.083551769494654,-5.885005729822436,-5.570371226770897,-4.35431953325285,-5.037889407059404,-5.600505333614971,-5.2234842891983275,-5.239347146606377,-6.012203979049936,-3.2506791222758458,-3.493367719618491,-4.386449689183688,-4.5929103490909995,-3.6635121789617022,-5.259536257638402,-6.071656848963408,-5.913358144413303,-6.637031915632404],[-2.697794466436189,-3.604662393389068,-4.011263957500705,-4.728080882146555,-4.781372179196779,-5.33155887684335,-5.439355447299057,-5.586922158039964,-5.370633615250003,-5.513150772897161,-4.398260316869362,-5.11207163673225,-4.190082883743458,-3.4501177344839546,-6.597640067453566,-5.490434815062624,-5.150911470048515,-4.837107457567751,-2.85030853825846,-7.320346050255055,-5.997701716211621,-3.4753179136511876,-4.2866759373606715,-3.397053452568678,-6.703360230660674,-4.113003141200578,-6.444877312901155,-3.074043686998346,-3.452623303723489,-5.193702907090925,-3.9327969395172757,-4.131242383720524,-5.418238523858134,-3.7478131640115406,-6.184652086682414,-7.063123185287982,-3.7394230709797665,-3.4179694218787144,-4.267288710081795,-3.0709940324857143,-4.263518677341253,-4.701005637323521,-4.417094629495229,-4.569236359692398,-4.473887479448818,-5.8432973258667005,-4.728080882146555,-3.754953367214181,-4.1263095154005,-3.415012032977706,-4.81618158386264,-4.691820172692138,-5.666572324000903,-2.795735372125381,-3.2437129699651224,-3.9019638438387987,-3.582993942690341,-5.112804505947904,-4.894364079117085,-4.722110715160052,-6.056219323109372,-5.5022692727096265],[-4.619141531251806,-4.242478414047348,-4.655112011634125,-5.260049492712331,-5.018630839221239,-5.434973330528597,-5.291682300504695,-5.652426966065128,-4.133100006910822,-4.834429582625707,-1.998550183209591,-5.7433143168994505,-6.845817661060527,-6.562531200081784,-2.4549848852751466,-6.626189051853761,-6.290387731057782,-5.567486289416045,-2.141146196531367,-7.242549089199937,-7.104679294976816,-2.8517566389677937,-5.192894636686687,-7.082206439124757,-2.3092018462234853,-6.71448165899944,-8.017189304011065,-2.1705324264442973,-5.663122255181876,-6.392769837961348,-2.584044215625091,-7.28700085177077,-6.816997222525035,-7.454881724409931,-7.498844847831047,-6.3210545294507545,-3.9234738704665255,-5.210974225191004,-4.156261002958894,-4.841496749848799,-4.597299789336757,-4.421170202790724,-4.975365923256807,-5.672123216040852,-4.474317672329112,-6.090327349926446,-5.367408011032831,-4.491383872387231,-5.280618880960439,-5.815780620152271,-4.640826054386648,-5.541761398177608,-6.307308608546119,-4.360911011272527,-3.968855752517438,-5.060904184340462,-5.092811178129705,-5.9935197902566175,-5.119506808592894,-5.086750553518014,-6.052587021943599,-5.38489332537385],[-5.261046281621696,-4.9148297535258045,-5.093521542269181,-5.160962823064713,-5.492794680129424,-5.583178741597693,-5.608843109973599,-5.828958322395465,-5.818217080564052,-5.6351835265880075,-1.9431063436877503,-5.762127613913009,-6.364566555601998,-6.310693565661846,-1.465488331318766,-6.653479397439911,-6.983078754773362,-4.701955198551832,-2.920630198813372,-7.381717897811127,-7.114655112562081,-3.628618850962897,-4.741931970713727,-6.050483313874263,-2.961525855445553,-6.683481647743711,-7.823550650090166,-2.1208799042866553,-6.236585593508124,-6.735576759627112,-3.3232120191551315,-6.891511561247872,-6.08336298799342,-7.9413336857465495,-5.554867108771802,-7.122498290023107,-4.193090909121505,-3.901105949199606,-4.152689701478908,-4.935827900365578,-3.224590180736388,-5.347946392964479,-5.205112607677643,-4.550306897288771,-4.485129674572183,-6.303724896345753,-5.654950567328784,-4.928779413034516,-5.0770940681272325,-5.30867433061095,-4.570963767879653,-4.7737511552658995,-6.146602446129337,-3.6472116840395126,-4.583317229489316,-4.247999881283233,-5.050961927850385,-5.554867108771802,-5.239253651630843,-5.752077278059507,-6.0889495947020595,-6.114482896707225],[-4.8357984388643835,-4.657872493543467,-5.438431611883497,-5.481947249319659,-5.480513557317811,-5.739017089171186,-5.670890393572083,-5.859121927588727,-6.047318448825703,-5.930658377913943,-1.7234534048021994,-6.808376835001858,-7.018097365983928,-6.515303913915201,-2.0800327647225068,-6.985307543160936,-6.434021280478344,-5.690138581877,-3.0546210789668655,-7.433612809945593,-7.609892052283585,-6.846949109788098,-7.145930737493813,-6.771237288052402,-1.3242305561151027,-6.88123818326673,-7.934388097858083,-6.599387031125742,-6.8029859863669815,-6.569147145936024,-2.3927324727103167,-7.200418922777882,-7.33738477785104,-7.62201341281593,-4.893045313052039,-5.366877919534872,-4.1899951004809015,-5.453656819480563,-4.694403309779647,-3.431804500645092,-4.0124147615767685,-5.525942614164559,-5.309719505694924,-5.568828205702649,-4.124028746206436,-6.415604553692113,-5.4275025413513065,-4.984699762805498,-5.237511197353998,-5.157641365469638,-4.101047614464405,-5.085610237260755,-5.550223017871613,-4.869440755282619,-4.489173830779152,-4.234321454353582,-5.041242413079193,-5.780689785571754,-5.231908941805328,-5.964947451392574,-5.752089170738539,-6.139854701747302],[-5.508465007700513,-4.839258034686576,-5.109472414097966,-5.519275923804729,-5.707703038161169,-5.439902336263216,-5.7235763873174585,-5.821556795677663,-5.734300350680434,-5.610247702010455,-5.910709501108635,-5.7235763873174585,-4.435262434557772,-3.8610478472011964,-5.758858201462099,-6.0632537548876195,-6.044700346991872,-4.117878794499082,-6.575328598054043,-7.243783166023616,-6.403478341127383,-5.083829983484629,-3.317712944869911,-1.7163886672099804,-5.622223893057171,-5.543479525545615,-7.373836294271814,-4.235327303674574,-3.4757995308184078,-3.8216678856997803,-6.863010670505823,-5.619817153026606,-5.966922645949188,-7.096625521687328,-7.1845942946332855,-6.5629060780554855,-3.9611313057581787,-4.164449795424729,-3.6745940531223313,-2.809054169189011,-3.303860323066671,-4.356804692686432,-4.075943929085389,-4.993775889109478,-3.5055329961999946,-5.4956443192714515,-3.896020865817486,-3.604273312212492,-3.5622476861654384,-2.789152302491872,-3.9102728885246876,-3.0660244750660355,-5.631909198791635,-4.404134333185408,-2.9033092297609358,-3.155554830818952,-5.387104150696246,-4.341290047595106,-5.258585299895267,-5.109472414097966,-5.821556795677663,-5.14024407276472],[-4.364789554126129,-4.918384854279969,-4.918384854279969,-5.1613310328903585,-4.587530609962979,-4.784853461655446,-5.006160465162354,-5.0403784224726955,-4.994002260682545,-5.402493089707247,-1.4796200682550344,-6.181000119218348,-6.701776073837507,-6.252825853789604,-2.1508860947624866,-6.086590434747274,-5.772240115213331,-5.482914657017821,-3.9652464014134288,-6.426672783592586,-6.401671481387169,-6.285261129542758,-5.890845857621178,-6.3772800282630095,-1.9660163181458141,-6.770768945324459,-7.107241181945672,-5.362398632505369,-5.920923312858457,-6.7530693682250575,-2.0597919147266994,-6.701776073837507,-6.505661194911217,-6.5476253940102485,-6.637237552699936,-6.7530693682250575,-3.9354569646113213,-4.092932522818745,-4.814706424805127,-4.961309898997003,-4.355174095426687,-4.949681861001884,-4.869194610089197,-5.046727650151355,-4.8507000274530325,-5.115948027042541,-4.814706424805127,-4.689097748317353,-4.863875448611597,-5.043547997233975,-3.6732539774605253,-3.9481153614832447,-5.340799520701906,-4.835115296436334,-4.068688911208753,-5.024679512929592,-4.753487802377227,-4.994002260682545,-5.247044551164388,-4.698046353893368,-5.307182909902921,-5.227776132298511],[-5.115394338583977,-4.7561420736309445,-5.007842676853897,-5.66123448019507,-5.033665707964376,-5.645764558422938,-5.535809351386801,-5.907471144471458,-5.828086115216893,-6.105296887801378,-1.6832402388074508,-7.437524027650993,-5.590313253886724,-6.862982589498895,-3.0491034044747836,-5.586172461220692,-6.632458930887062,-5.218606625703514,-2.4710973040085813,-7.398809515470303,-7.268447697607059,-2.7116510959031834,-6.686853002952861,-3.7188303108266303,-1.9217106058640063,-6.098376444956805,-7.548749662761217,-2.711068175455316,-6.088084758920257,-7.1630871819492326,-2.4953178542046213,-6.5371487510827375,-6.531815405107375,-6.592107635363495,-5.218606625703514,-7.464192274733154,-4.025855346121542,-5.098759278079445,-4.812664759541027,-5.369662433402117,-3.845996309584077,-5.031290409935469,-4.627804324836165,-5.549657248245595,-3.554062953084761,-6.151486270270753,-4.8426621708268565,-4.640563668589926,-5.069989313821911,-5.128381534110789,-4.6191257693799175,-5.164313543336852,-5.9721996171719525,-5.146851716173189,-4.482065653234942,-4.222339216728002,-5.190396010216277,-5.978297197040071,-4.681519433426748,-6.057830350562455,-5.619789072019677,-5.749664153441089],[-4.867406343870729,-4.4533740975545415,-4.953434176237852,-5.384635998990067,-5.328952912513263,-5.6593669190947695,-5.597013688377717,-5.757806991908022,-5.710273291442284,-6.117674508577314,-2.0752354231922467,-5.330274789771179,-7.239817294655618,-4.653127950557675,-1.9861891376978962,-6.498730651806554,-6.748830013109291,-5.799220777458779,-1.8880861157511444,-7.060476365999801,-6.592340150928861,-6.615981913985901,-5.98705432616025,-6.055682832549346,-2.2283490142554703,-6.244583360441343,-7.060476365999801,-6.9543698600052535,-6.005072831662928,-6.675112437212724,-3.324941220245065,-6.737960340872387,-6.846328377594169,-7.276184938826493,-5.466076330930241,-7.601607339261121,-3.2284338811241238,-4.7571452826690335,-4.2772171644143535,-3.794375211195705,-2.9321390456478555,-4.655146114713912,-4.556474587206883,-4.658518799192551,-3.9133691163329902,-6.159223511490186,-4.874928318325417,-3.9851607325065794,-4.593769151695071,-4.865742449976033,-4.192747084853396,-4.158562847663465,-5.583291346122616,-4.6687056444995445,-4.403457644910037,-4.135470875670939,-4.338591952168042,-5.484425469598437,-5.10713123845697,-4.666659956776251,-5.507845743806536,-5.56639905255811],[-5.367738120634485,-4.778432275797196,-5.153988612512787,-4.9880684755260525,-5.022992659762126,-5.315533041364984,-5.937669186281741,-6.10637419308453,-5.985149724514735,-6.0666028696576335,-1.4917500304139726,-5.449683054485573,-5.538947192058466,-5.596026010244295,-2.1356770840200325,-7.153812526227932,-7.094389105757131,-6.013018623523528,-2.2775252846627545,-6.010847070010019,-7.246405313055757,-6.755173383190167,-6.697507741340358,-5.530860894627108,-1.9981251565724831,-5.698525293621089,-8.083802102460249,-4.860110306811463,-5.882753428685626,-6.945748081740843,-2.8863534391722627,-7.100819996087421,-6.962461562714583,-7.231590227270615,-4.4224533361891325,-6.0688990819179836,-3.292438554454217,-4.782234561746934,-4.459461169483883,-4.359771877270199,-3.9163352754091854,-5.15214868559078,-5.0863471755948115,-5.622152314836516,-4.041658687615878,-6.321199217523649,-5.22160122153078,-5.082053480720112,-4.742403534262838,-4.896452531238822,-4.577416633798337,-4.325814840936012,-5.22258692885554,-5.570564946046022,-3.7753199382595333,-4.751597592285044,-5.351900685535859,-5.538947192058466,-3.6838339356894148,-5.717756655548977,-5.9396873504379775,-6.193602560418941],[-4.999514188504179,-4.700587505853424,-4.67022803135639,-4.81576740495976,-4.92872993147181,-5.418517964945142,-5.4525477135314535,-5.471965799388554,-5.601583292691941,-5.294558257397029,-2.0675057720915833,-6.606510097282728,-6.66295140818768,-6.268297216183731,-1.8472066532219233,-6.801101746668497,-6.464629510047284,-5.518112402024337,-2.6153829107633095,-5.40926720517299,-7.042937430994859,-6.122880216325227,-4.984950824316282,-6.978988706394586,-2.5341534752438712,-6.335738496979263,-7.22903971062872,-5.047082605423289,-6.606510097282728,-7.195517018590076,-3.3881221963080814,-6.764734102497622,-6.935691900641261,-6.06802185577318,-5.518112402024337,-6.21743879895024,-3.306166689176508,-4.5835098665078435,-4.096018906794089,-2.7778687007936327,-3.149770331333854,-4.522505810044474,-3.6065186143693406,-4.579485716208118,-3.9009018998360694,-5.695109350702764,-4.592420415540891,-4.39850374434322,-4.858371250530563,-4.687974726037726,-4.284600731462279,-4.828050056815601,-5.7714823294873385,-4.760362534007699,-3.6910492160852075,-3.1337486268025883,-5.114702793098268,-5.044521784561615,-4.990993138772245,-5.21262268525524,-5.1495981689488834,-4.939033399841534],[-5.573013579156251,-4.7557456323553735,-4.835888625843566,-5.4310032481645445,-5.375816832597254,-5.748275644237248,-5.617589203744957,-5.426286258286405,-5.527732874623095,-6.027336973645122,-5.771265162461947,-3.4363190171520683,-4.863649827007062,-5.342810536129083,-3.9603112459777443,-3.1741279621323484,-6.522548369609561,-4.089429329592385,-5.667234434234122,-6.573100648772392,-5.74180312973163,-3.6814950844272993,-4.555731535734934,-2.60141208694855,-6.057840427938536,-2.6538446056843625,-7.3352407008192895,-2.4633202784204524,-3.0508881488790776,-5.069846636151324,-3.6495408996227328,-4.548858656447172,-5.7613477258046,-6.031638055544512,-6.61856302284915,-5.764642621701453,-4.906092884516815,-3.945751808422034,-4.075923906392578,-4.145352412824341,-4.3284585910787134,-4.1375398730875474,-4.386633312115669,-4.864991208831262,-5.2459274106602996,-5.389330551763976,-4.366047982499911,-3.5236520927129136,-3.6216686341149815,-3.0467401241562313,-4.4457511661828155,-3.28056139498962,-5.728982441302569,-3.2282776746379773,-3.3483163872180257,-3.6120365041642786,-4.280940073114231,-4.240597235287379,-4.439591885822281,-4.571620648562269,-5.13801612348307,-5.583972592945972],[-5.648871675811755,-4.741030782968909,-5.070478143556586,-5.038332518583169,-4.984450311189462,-5.652113169735926,-5.878916005474925,-6.018576120040821,-5.698633185370818,-5.924757364823166,-1.8468585970227798,-6.844251516414859,-7.126600242891277,-6.081398705962876,-2.934905888757429,-3.6595354362414967,-6.817864761241664,-3.5921374614243615,-2.9623018840998165,-7.15537920744132,-5.837035508229937,-2.956367800752568,-5.44072677540776,-6.135188880549014,-2.35874447462609,-6.817864761241664,-7.744626792983114,-1.829808862763535,-4.656579250518651,-7.012765100242478,-3.346772137573546,-6.156466278996299,-6.772055225210369,-5.459294948136628,-6.2464145156592386,-6.772055225210369,-3.9054574859103,-5.259720143195114,-3.484916480113615,-4.59888775210554,-4.26703708287839,-5.280773552392946,-4.568219053541838,-5.236954932422101,-4.227597595795837,-6.429913235626207,-5.14878310004672,-4.299244656170703,-5.066854951187166,-5.722730736949879,-4.343868104023761,-4.895290258966649,-5.924757364823166,-4.2366225736701635,-3.439140235431567,-5.290903070631802,-4.913738130330258,-5.32777360644013,-5.700335313441349,-4.118883335232663,-6.285399962372192,-5.825384891009962],[-4.134798672989471,-4.089847285127205,-4.1376763728170864,-4.175860159787245,-3.5867437074551245,-4.073498147125676,-4.247208240584712,-4.485742942219219,-4.161001045383496,-4.76664532768562,-4.782994465687151,-5.224827217966189,-5.79734641073752,-5.371880635922686,-5.362028339479674,-4.805217602471861,-5.696541711615555,-5.1428140663053545,-4.243997964954463,-5.696541711615555,-6.074978147335799,-4.388579193765571,-4.887134724939747,-5.433124261163405,-5.127188748402274,-5.465212575714905,-5.5681605449673475,-3.871109027280912,-4.3522115495946965,-4.887134724939747,-1.4812734394569864,-4.9697213159490214,-5.42265296129611,-5.5681605449673475,-5.696541711615555,-5.592551998091507,-3.9025017396887742,-4.303421385425264,-4.377529357578986,-3.2036759521599856,-4.414847120586181,-4.370230055097374,-4.283218678107745,-4.293269013961246,-4.570900750559526,-4.639893622046477,-4.473572406598963,-3.944368319081564,-3.9659778034144195,-4.663991173625537,-3.393956618621509,-4.489832927470744,-3.9232159440763374,-4.221810049979101,-3.677082874537429,-4.095356940938174,-3.0285527594662907,-4.570900750559526,-4.348646483430199,-4.449666885745409,-4.481669616831582,-4.21556002963393],[-5.468543074118657,-4.3409301123745765,-4.939132602788878,-5.030955774234888,-5.486636817561356,-5.444018684255573,-5.476853371252285,-5.808607963491769,-5.908385471304435,-5.666153323427702,-2.5849374499856705,-5.739356727450997,-6.452595908093631,-6.391754248837386,-1.3630653142736813,-7.218432822021854,-6.741508749931544,-4.321907198551311,-2.3295168721177877,-7.554905058643067,-7.600367432719824,-7.660265574300893,-6.068262723688894,-7.064282142194595,-2.4089621725210324,-6.261701120589188,-7.218432822021854,-7.400754378815808,-6.405740490812126,-6.66108718262097,-3.202908170420881,-7.345184527660997,-7.318516280578836,-7.17951740577218,-6.2346317986209705,-7.685266876506311,-3.523815890500982,-5.001129001779655,-4.254551658580372,-3.1791480369827805,-3.272238460048792,-4.979751531007288,-4.696520976240299,-4.996816791561475,-3.7821441205484283,-6.068262723688894,-4.767838317222632,-4.961310103104565,-3.3169412686460493,-4.254142074302682,-3.686717843919221,-4.781622132973809,-6.395232513213711,-4.882290151848487,-4.035101934573064,-4.142657840794326,-4.886134831709296,-5.154991621688459,-5.261248596393322,-5.763145589415012,-5.307128202144016,-5.4187681732866855],[-3.7153348719791315,-4.23835637018879,-5.401341822408315,-5.655381048015406,-5.3230099791384085,-5.723838105173554,-5.787159933132683,-6.191069830974041,-6.118044695959151,-6.512733837722823,-2.85919837658876,-7.902248813542757,-2.4061387894065027,-6.693770047296114,-2.250325724429897,-7.350962550860164,-6.005451461342365,-3.2057646919026945,-3.1269276063809657,-8.282234836349936,-4.929356031958588,-4.893377430923357,-4.350779231381914,-5.039126698093967,-3.0950598675329433,-2.702149075140166,-7.065140944061303,-6.4656293685353505,-6.6671525062961585,-1.5532677412410396,-3.407685858090993,-6.917395410231305,-4.818860209735889,-8.330553413620743,-4.697144805661785,-7.44034239452964,-4.201345166462018,-5.036551747250591,-4.447052124631202,-4.271306064673767,-4.3875307527168115,-5.68024420720805,-5.463555006909888,-4.6680077696105,-4.729585831829687,-6.877248342217893,-5.7894972929813875,-4.744562286019245,-4.863271676535759,-5.996776708148691,-5.115645847928164,-4.782587554878788,-6.69569868820252,-5.6198664278662305,-4.372289459396023,-3.8304137647360905,-5.143464614214886,-5.692911512408815,-5.442384299786921,-6.144390895990383,-6.553756817069401,-6.771887826560066],[-5.439192275092616,-4.781176186054329,-4.766861598657258,-5.578787193555129,-5.543563426336324,-5.577507602849504,-5.742587353208953,-6.240425781448133,-6.11031213333427,-6.461710020172159,-2.6665339561656087,-5.7471225083743445,-6.597455272456702,-6.655866034613116,-2.1677366785812078,-7.063212610820987,-6.615344837207477,-1.8542823223629723,-2.8203019407701473,-7.921874229858505,-5.964600322152877,-7.4190807777897785,-7.115398363991557,-7.50316389500032,-2.434370037607787,-6.75042461723813,-8.501692725111447,-2.436966652419961,-5.508344242912733,-7.262628600974241,-3.3318853658660776,-6.320468489121669,-4.662752576421778,-7.96269622437876,-4.3951216252530045,-7.773454224740232,-3.4248833433841024,-4.6171877485771935,-4.856615893655904,-5.148452521314832,-3.262215858586344,-5.067705520626301,-4.995134827791466,-4.808655260848847,-4.056803079326151,-6.372894286461519,-5.283769734998518,-4.869131701587735,-4.356292992089062,-5.580068423711178,-4.205055407055328,-5.300108397353307,-6.413362236014366,-4.081705328198343,-3.5651654031689133,-4.4607321960690065,-4.914213385439241,-3.3562768189902368,-5.301077859377855,-5.2191716350828905,-5.66568217643417,-5.148452521314832],[-4.692472771166889,-4.3008934499719516,-4.549181741142988,-4.955265087292482,-5.083773336506403,-5.36724487642184,-5.286555965171697,-5.606625988867734,-5.3561026998685985,-5.6766361544403825,-6.310506725070788,-5.345083304618988,-6.354631529979725,-5.436838168221035,-2.778870257014558,-5.888394383529467,-5.518132910614282,-3.971194340356585,-5.541198183545278,-7.353160360090853,-5.418980550821029,-3.590537431731367,-3.3241709789128793,-1.8944436557320132,-5.91226186493611,-3.390599447549114,-7.2559966116372046,-3.6807421830309885,-3.742794171598555,-5.40143624117012,-6.914247317915148,-6.268246915780905,-5.966865998970962,-6.802329401711162,-7.18453764765506,-6.063197107909394,-4.040088147996806,-3.4233375319614976,-2.7095546985241823,-4.374927246403353,-3.562959147374605,-4.404434128912793,-4.579296940419071,-4.391681565015401,-4.438151297809303,-5.606625988867734,-4.3282656378478706,-4.1449534915722195,-4.0950638220693705,-3.3913758451036427,-5.0164696546102965,-4.409796072054178,-6.030044900592494,-3.187603169643488,-2.500811269450856,-3.4121731416766146,-5.192891489277063,-4.804034117568558,-4.273312053475689,-5.056716535118889,-5.514880875227905,-5.219114684376165],[-5.262101982971463,-4.751704716461968,-4.4750082149096455,-5.006514043913175,-5.07515161250067,-5.251452255054804,-5.285938431125974,-5.392274080942006,-5.414469813333791,-5.840086736879263,-2.606359904105076,-6.823463761969788,-6.89757173412351,-5.234645136738424,-1.8016665052081617,-5.931967688708849,-5.7146991018376605,-5.437169400849897,-1.672652532530341,-6.72630001351614,-6.773702252410724,-5.308112288620296,-6.00575385876808,-6.6810434219280195,-2.3521748840468923,-5.96169386897405,-7.419447194076086,-6.095225261598572,-5.008173795331539,-6.397795946544104,-5.514028406375509,-5.907173030095633,-6.070893160939042,-4.572171963363293,-6.91979487090822,-6.823463761969788,-3.666029218824578,-4.169934399745995,-4.315857524665681,-2.6071122929751187,-3.822642418908326,-5.326212330263914,-4.3600448319184775,-4.917707706137853,-3.8075287810982776,-5.953110125282659,-5.187841070540621,-4.792366055507543,-4.8403533292283845,-5.164264339976624,-4.320022461964966,-3.8952676954062846,-5.745470760504414,-4.036941945426083,-4.228361366337563,-4.708930900478682,-5.247223918945283,-5.006514043913175,-3.8952676954062846,-4.574322501826521,-5.886970322778113,-5.748949024880739],[-5.49714261021104,-4.668772759709356,-4.7793028170607235,-5.269011517385791,-5.403728165571614,-5.600190986110487,-5.607143505425369,-5.736034518493389,-5.749350294469161,-5.980569259788917,-1.8463761496649909,-6.7957313909118255,-6.842614976810675,-6.277301167760615,-1.6016725181239624,-6.834646807161499,-6.483542908272222,-3.3781298559126016,-1.9147238137262874,-7.264209466848723,-6.97044834832056,-6.2503937148406905,-6.323821183395508,-6.466922027036182,-2.304012035094697,-6.232849405189781,-7.182292344380837,-4.500040235600472,-6.194465162181466,-7.045955900828706,-3.7335540179496816,-6.633976111699347,-6.224191342446667,-7.560054849939665,-6.541029999189903,-7.7391030813886506,-3.9953827115751284,-5.225208894727398,-4.2623981472183505,-4.983820106246462,-3.5900722944719905,-4.880831478599072,-4.625152137233465,-5.350160419862394,-4.464551422640724,-6.03257404477923,-5.25911044640308,-4.290672925686517,-4.802954305142684,-5.287422079228971,-4.798800612773991,-4.757191363453292,-5.977196575310277,-4.844383490556383,-2.946883968159507,-4.887603513509017,-5.795997983260946,-5.6188395451885595,-4.719156549714065,-5.921535728204724,-6.1778672707724285,-5.694577804815043],[-4.469097220436953,-3.6430767584970343,-3.7844067498952314,-3.931680914923784,-4.272838155799217,-4.129621978555971,-4.297357772973536,-4.384369149963165,-4.338992745625113,-4.178787025578902,-4.976420213651742,-4.292052720743842,-5.461928029433443,-5.887479896108345,-4.57562801124297,-5.526466550571014,-6.262964172004573,-4.4462034005711,-5.238784478119233,-6.017291507630335,-6.355745905455539,-5.968972930359527,-5.520424236115051,-6.328346931267425,-5.70515833931439,-4.218953067304238,-6.6434279779073195,-5.648805402763258,-5.5635078222513625,-4.870360641691417,-6.412904319295488,-1.949196049230905,-5.968972930359527,-4.4990139814749455,-6.027241838483503,-6.442757282445169,-4.057336183871974,-4.448263133534111,-4.000410247075965,-3.7940068236242506,-4.150834895195163,-4.166267300233975,-4.566303934367847,-4.3901887590164295,-4.028468199871122,-4.376661982718227,-4.915384323065373,-3.014652447863089,-3.369082406994758,-4.61381880997536,-4.55706599338291,-3.5814225774035497,-4.577972678202224,-4.001728638829222,-3.270401473211861,-3.264703452097223,-3.9718368746319084,-3.132988733879366,-4.361423592613295,-2.595191993338583,-4.516519898988561,-4.912100247864183],[-3.9699474093476774,-4.189042372135887,-4.058989243887689,-4.102030995146257,-4.171520021443684,-4.318254103615893,-4.424253392850214,-4.758810531535327,-4.504029895277935,-4.414714369803455,-3.0879080140350674,-5.469976217597951,-3.790334046490602,-5.366435538657111,-3.235086137375257,-5.727805326900051,-5.408282648592611,-4.971959552124542,-5.070590155566169,-5.076706382583605,-6.181472536826093,-5.921961341341008,-4.9999725883522155,-5.5070174892783,-1.5568628976878147,-5.5070174892783,-6.110013572843948,-4.0678979887767985,-5.089052218405905,-5.200643283814367,-3.6661684098537215,-4.557328477002297,-5.479108701161223,-5.159821289294111,-5.479108701161223,-5.616579691789827,-3.7152580200502454,-4.23556238777078,-4.212031890360586,-3.866007780968386,-4.0678979887767985,-4.4633463186414915,-4.142178063159669,-4.318254103615893,-4.276053749125516,-4.772293881872614,-4.332726136224427,-4.11133338780857,-3.9089648990693253,-4.309670359924501,-3.9127889955077286,-4.338574106106851,-4.528549512452254,-4.149433234040841,-3.5292744136497762,-3.6009751629760713,-4.350373653038005,-4.828122331425556,-4.047963773875981,-4.665125047458004,-4.673288358097166,-4.633122316371831],[-4.806719860900339,-3.6507473420444714,-4.429814962058902,-4.347330952102998,-4.3949170222076255,-4.698366552912107,-4.809448375553543,-4.35423944244681,-4.534137594904308,-4.3611959922401695,-2.871768725634745,-4.598399529122678,-5.564587232141456,-5.519124858064699,-2.4250566837898457,-5.688201188108633,-5.967149580591659,-5.01834957015221,-2.505498094634157,-5.3939617151106924,-6.3813483686685775,-5.360223575478843,-5.821732580733155,-5.742268409378909,-2.5427453130265225,-6.0299504818306895,-5.949907774157153,-6.048642614842842,-6.106911522966818,-6.522426966928483,-1.9368412502165815,-5.384205540165328,-3.2469989725553616,-5.166904264475346,-4.662348253722951,-5.93295821584338,-4.052787789271272,-3.8964417188805776,-4.725629703670472,-3.994277013931218,-3.570836586604418,-4.883136091344702,-4.20182336843176,-4.894970548991704,-4.1342203512338624,-5.159122124033291,-4.442985425248647,-4.740819869164446,-4.583031498894364,-4.589588899440523,-4.4058064220068935,-4.87144005158151,-4.8541485544714496,-4.806719860900339,-4.241282205172307,-4.937530163410501,-4.382360803432213,-5.0116381355642226,-4.368201274828579,-4.782492565565015,-4.544565218066568,-4.4563316672015425]],probHashThreshold:.015,probHashChars:{1:1,0:0,3:3,2:2,5:5,4:4,7:7,6:6,9:9,8:8,A:36,C:38,B:37,E:40,D:39,G:42,F:41,I:44,H:43,K:46,J:45,M:48,L:47,O:50,N:49,Q:52,P:51,S:54,R:53,U:56,T:55,W:58,V:57,Y:60,X:59,Z:61,a:10,c:12,b:11,e:14,d:13,g:16,f:15,i:18,h:17,k:20,j:19,m:22,l:21,o:24,n:23,q:26,p:25,s:28,r:27,u:30,t:29,w:32,v:31,y:34,x:33,z:35},userTransitions:{search:{}},patternsLoader:new y.default((e,t)=>{E.contentExtractor.updatePatterns(e,t)}),configURL:h.default.settings.ENDPOINT_CONFIGURL,ts:"",mRefresh:{},can_url_match:{},ismRefresh:!1,userTransitionsSearchSession:300,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},activeUsage:null,activeUsageThreshold:2,pageStatusCountSent:null,actionStats:null,actionStatsLastSent:null,bloomFilter:null,bf:null,strictQueries:[],oc:null,SAFE_QUORUM_ENDPOINT:h.default.settings.ENDPOINT_SAFE_QUORUM_ENDPOINT,SAFE_QUORUM_PROVIDER:h.default.settings.ENDPOINT_SAFE_QUORUM_PROVIDER,quorumBloomFilters:{},safeQuorumProvider:null,getAllOpenPages:f.getAllOpenPages,prefs:{humanWebOptOut:!1,config_ts:null,config_location:null},_md5:function(e){return(0,o.default)(e)},maskURL:function(e){var t=null,r=null;if(!(t=(0,k.parseURL)(e)))return"";if(E.dropLongURL(e)){if(t.hostname.indexOf("google")>0&&t.query_string){var n=(0,v.parseQueryString)(t.query_string);if(n.url)return r=n.url[0],r=E.maskURL(decodeURIComponent(""+r))}return r=t.protocol+"://"+t.hostname+"/ (PROTECTED)"}return e},maskURLStrict:function(e){var t;return(t=(0,k.parseURL)(e))?t.protocol+"://"+t.hostname+"/ (PROTECTED)":""},isShortenerURL:function(e){try{var t=(0,k.parseURL)(e);if(!t)return!0;if(t.hostname.length<8&&t.path.length>4)for(var r=t.path.split("/"),n=0;n<r.length;n++)if(E.isHash(r[n]))return!0;return!1}catch(e){return!0}},getTime:function(){try{var e=M.default.get("config_ts",null)}catch(e){}if(e)i=e+""+(n=((new Date).getUTCHours()<10?"0":"")+(new Date).getUTCHours());else{var t,r,n=null,i=null;t=((new Date).getDate()<10?"0":"")+(new Date).getDate(),r=((new Date).getMonth()<9?"0":"")+parseInt((new Date).getMonth()+1),n=((new Date).getUTCHours()<10?"0":"")+(new Date).getUTCHours(),i=(new Date).getFullYear()+""+r+t+n}return i},isSuspiciousDomainName:function(e){return e.split(".").length>6||(!!E.checkForLongNumber(e,5)||e.split("-").length>4)},isSuspiciousURL:function(e){try{var t={};if(!(t=(0,k.parseURL)(e)))return!0;if(T(JSON.stringify(t)),0==e.indexOf("about:"))return!0;if((0,l.isIpAddress)(t.hostname))return!0;if(""!=t.username||""!=t.password)return!0;if(""!=t.port&("80"!=t.port&&"443"!=t.port))return!0;if("http"!=t.protocol&"https"!=t.protocol&""!=t.protocol)return!0;var r=e.indexOf("#");return r>-1&&!E.contentExtractor.isSearchEngineUrl(e)&&e.length-r>=10?(T("Dropped because of # in url: "+decodeURIComponent(e)),!0):t.hostname.indexOf("localhost")>-1||(!!E.isSuspiciousDomainName(t.hostname)||(T("Sanitize: URL is ok: "+e),!1))}catch(e){return T("Exception in isSuspiciousURL: "+e),!0}},calculateStrictness:function(e,t){var r=!0;if(t&&t.x&&t.x.canonical_url){var n=(0,k.parseURL)(t.x.canonical_url),i=(0,k.parseURL)(e);if(!i||!n)return!0;null!=i.hostname&&""!=i.hostname&&i.hostname==n.hostname&&t.x.canonical_url!=e&&t.x.canonical_url.length<e.length&&(r=!1)}return r},dropLongURL:function(e,t){try{if(null==t&&(t={strict:!1}),E.checkForEmail(e))return!0;var r=(0,k.parseURL)(e);if(!r)return!0;if(1==t.strict){if(r.query_string&&r.query_string.length>.75*E.qs_len)return!0;if(r.query_string){if((o=r.query_string.split(/[&;]/)).length>1)return!0;for(var n=0;n<o.length;n++)if(o[n].length>3&&E.isHash(o[n]))return!0;if(null!=E.checkForLongNumber(r.query_string,8))return!0}if(null!=E.checkForLongNumber(r.path,8))return!0}else{if(r.query_string&&r.query_string.length>E.qs_len)return!0;if(r.query_string){if((o=r.query_string.split(/[&;]/)).length>4)return!0;if(null!=E.checkForLongNumber(r.query_string,12))return!0}if(null!=E.checkForLongNumber(r.path,12))return!0}var i=r.path.split(/[\/\._ \-:\+;]/);for(n=0;n<i.length;n++){if(i[n].length>E.rel_part_len)return!0;if(1==t.strict){if(i[n].length>5&&E.isHash(i[n]))return!0}else if(i[n].length>12&&E.isHash(i[n]))return!0}for(i=r.path.split("/"),n=0;n<i.length;n++){var s=i[n].replace(/[^A-Za-z0-9]/g,""),a=1;if(1==t.strict&&(a=.5),s.length>E.rel_segment_len*a&&E.isHash(s))return!0}var o=[/\/admin([\/\?#=]|$)/i,/\/wp-admin([\/\?#=]|$)/i,/\/edit([\/\?#=]|$)/i,/[&\?#\/]share([\/\?#=]|$)/i,/[&\?#\/;]sharing([\/\?#=]|$)/i,/[&\?#\/;]logout([\/\?#=]|$)/i,/WebLogic/i,/[&\?#\/;]token([\/\?#=_;]|$)/i,/[&\?#\/;]trk([\/\?#=_]|$)/i,/[&\?#\/=;](http|https)(:\/|\%3A\%2F)/],u=(r.path||"/")+"?"+(r.query_string||"");for(n=0;n<o.length;n++)if(o[n].test(u))return!0;var c=null,l=r.path.indexOf("#");if(-1!=l&&(c=r.path.slice(l,r.path.length)),r.query_string&&r.query_string.length>0||c&&c.length>0){o=[/[&\?#_\-;]user/i,/[&\?#_\-;]token/i,/[&\?#_\-;]auth/i,/[&\?#_\-;]uid/i,/[&\?#_\-;]email/i,/[&\?#_\-;]usr/i,/[&\?#_\-;]pin/i,/[&\?#_\-;]pwd/i,/[&\?#_\-;]password/i,/[&\?#;]u[=#]/i,/[&\?#;]url[=#]/i,/[&\?#_\-;]http/i,/[&\?#_\-;]ref[=#]/i,/[&\?#_\-;]red[=#]/i,/[&\?#_\-;]trk/i,/[&\?#_\-;]track/i,/[&\?#_\-;]shar/i,/[&\?#_\-;]login/i,/[&\?#_\-;]logout/i,/[&\?#_\-;]session/i];if(r.query_string&&r.query_string.length>0)for(n=0;n<o.length;n++)if(o[n].test("?"+r.query_string))return!0;if(c&&c.length>0)for(n=0;n<o.length;n++)if(o[n].test(c))return!0}return!1}catch(e){return T("Exception in dropLongURL: "+e),!0}},cleanDocCache:function(){for(var e in E.docCache)E.counter-E.docCache[e].time>3600*E.tmult&&delete E.docCache[e]},cleanHttpCache:function(){for(var e in E.httpCache)E.counter-E.httpCache[e].time>60*E.tmult&&delete E.httpCache[e];for(var e in E.httpCache401)E.counter-E.httpCache401[e].time>60*E.tmult&&delete E.httpCache401[e]},getHeaders:function(e){var t={};let r=e.split(" ")[1];r=parseInt(r)?parseInt(r):null,t.status=r;for(var n=e.split("\n"),i=0;i<n.length;i++)if(0==n[i].indexOf("Location: ")&&(t.loc=decodeURIComponent(n[i].split(" ")[1].trim())),0==n[i].indexOf("WWW-Authenticate: ")){var s=(s=n[i].split(" ")).slice(1,s.length).join(" ");t.auth=s}return t},httpObserver:{observeActivity:function(e){let t=e.url,r=e.type,n=e.responseStatus,i=e.statusCode,s=e.responseHeaders,a=e.isPrivate,o=e.tabId;a||6!==r&&"main_frame"!==r||(0,b.getTabInfo)(o,r).then(e=>{if(!e.isWebExtension||!e.isPrivate){E.detectAdClick(t);const e=decodeURIComponent(t),r=n||i;if(301===r||302===r){let t;s.forEach(e=>{e.name&&"location"===e.name.toLowerCase()&&(t=e.value)}),E.httpCache[e]={status:r,time:E.counter,location:t}}else 401===r?E.httpCache401[e]={time:E.counter}:r&&(E.httpCache[e]={status:r,time:E.counter})}}).catch(e=>{T(e)})}},onVisitRemoved(e){let t=e.urls;e.allHistory?E.db.clearHistory():1===t.length?E.db.deleteVisit(t[0]):t.length>1&&E.db.deleteTimeFrame()},linkCache:{},cleanLinkCache:function(){for(var e in E.linkCache)E.counter-E.linkCache[e].time>60*E.tmult&&delete E.linkCache[e]},getRedirects(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;const i=t||[];if(r<=0)return i;const s=(t,r)=>(301===t||302===t)&&(r===e||decodeURIComponent(r)===e||r+"/"===e);try{var a=!0,o=!1,u=void 0;try{for(var c,l=Object.entries(E.httpCache)[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){const t=c.value;var d=n(t,2);const a=d[0];var h=d[1];const o=h.status,u=h.location;if(a!==e&&s(o,u)&&i.indexOf(a)<0)return i.unshift(a),E.getRedirects(a,i,r-1)}}catch(e){o=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw u}}}catch(e){T(">>>> REDIRECT ERROR >>> "+e)}return i},userSearchTransition:function(e){if(null!=e){var t=e.qurl,r=e.q.replace(/\s+/g," ").trim().toLowerCase();t&&r&&r.length>0&&(null==E.userTransitions.search[r]&&(E.userTransitions.search[r]={time:E.counter,data:[]}),E.userTransitions.search[r].data.push([t,E.counter-E.userTransitions.search[r].time]))}},getParametersQS:function(e){for(var t={},r=e.split(/[\?&]+/),n=0;n<r.length;n++){var i=r[n].split("=");2==i.length&&(t[i[0]]=i[1])}return t},getEmbeddedURL:function(e){var t=e.lastIndexOf("https://"),r=e.lastIndexOf("http://");if(!(t>0||r>0))return null;{let t=p.default.parse(e,!0,!0,!0);if(t&&t._query&&t._query.url)return decodeURIComponent(t._query.url)}},auxIsAlive:function(){return!0},auxGetPageData:function(e,t,r,n,i){E.doublefetchHandler.anonymousHttpGet(e).then(w.parseHtml).then(i=>{const s=E.getPageData(e,i);E.docCache[e]={time:E.counter,doc:i},n(e,t,r,s)}).catch(n=>{T(`Error on doublefetch: ${n}`),i(e,t,r,n)})},auxIntersection:function(e,t){for(var r=0,n=0,i=new Array;r<e.length&&n<t.length;)e[r]<t[n]?r++:e[r]>t[n]?n++:(i.push(e[r]),r++,n++);return i},auxUnion:function(e,t){for(var r={},n=e.length-1;n>=0;--n)r[e[n]]=e[n];for(n=t.length-1;n>=0;--n)r[t[n]]=t[n];var i=[];for(var s in r)r.hasOwnProperty(s)&&i.push(r[s]);return i},validDoubleFetch:function(e,t,r){if(T("xbef: "+JSON.stringify(e)),T("xaft: "+JSON.stringify(t)),!e||!t)return T("fovalidDoubleFetch: found an empty structure"),!1;if(!e.t||!t.t)return T("fovalidDoubleFetch: found an empty title"),!1;if(!e.iall||!t.iall)return T("fovalidDoubleFetch: found a noindex"),!1;if(e.canonical_url!=t.canonical_url&&!(null!=t.canonical_url&&t.canonical_url.length>0&&null==e.canonical_url))return!1;if(1==r.structure_strict){var n=!0,i=!0,s=(e.lh||0)/((e.lh||0)+(t.lh||0));if((e.lh||0)>10240)((s=(e.lh||0)/((e.lh||0)+(t.lh||0)))<.1||s>.9)&&(T("fovalidDoubleFetch: lh is not balanced"),n=!1);var a=(e.nl||0)/((e.nl||0)+(t.nl||0));if((e.lh||0)>30)((a=(e.nl||0)/((e.nl||0)+(t.nl||0)))<.1||a>.9)&&(T("fovalidDoubleFetch: nl is not balanced"),i=!1);if(!i&&!n)return!1}if(null==t.canonical_url||""==t.canonical_url){if(null==e.nip||null==t.nip||0==e.nip&&t.nip>0)return T("validDoubleFetch: fail nip"),!1;if(null==e.nf||null==t.nf||0==e.nf&&t.nf>0)return T("validDoubleFetch: fail text nf"),!1}var o=e.t||"",u=t.t||"",c=1;if(o!=u){var l=o.split(" ").filter(function(e){return e.length>1}),d=u.split(" ").filter(function(e){return e.length>1});if(c=E.auxIntersection(l,d).length/E.auxUnion(l,d).length,Math.max(l.length,d.length)<=4)return c>=.5||(T("short title fail title overlap"),!1);if(c<=.5){var h=o.replace(/[^A-Za-z 0-9 \.,\?""!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]*/g,""),f=u.replace(/[^A-Za-z 0-9 \.,\?""!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]*/g,"");if(!(h.length>.5*o.length&&f.length>.5*u.length))return T("validDoubleFetch: fail title overlap"),!1;var p=h.split(" ").filter(function(e){return e.length>1}),m=f.split(" ").filter(function(e){return e.length>1});if((c=E.auxIntersection(p,m).length/E.auxUnion(p,m).length)<=.8)return T("validDoubleFetch: fail title overlap after ascii"),!1}return null==e.nip||null==t.nip||0==e.nip&&t.nip>0?(T("validDoubleFetch: fail nip"),!1):!(null==e.nf||null==t.nf||0==e.nf&&t.nf>0)||(T("validDoubleFetch: fail text nf"),!1)}return!0},getCleanerURL:function(e){var t=e,r=(0,k.parseURL)(e);if(!r)return null;if(r&&r.query_string&&""!=r.query_string)t=r.protocol+"://"+r.hostname+r.path;else if(r&&r.path&&""!=r.path){var n=r.path.split("/"),i=[];for(let e=0;e<n.length;e++)""!=n[e]&&i.push(n[e]);if(i.length>=3){var s=i.slice(0,i.length-1).join("/");t=r.protocol+"://"+r.hostname+"/"+s+"/"}}return t!=e?E.isSuspiciousURL(t)||E.dropLongURL(t)?e:t:e},fetchReferral:function(e,t){T("PPP in fetchReferral: "+e),e&&""!=e?null==E.docCache[e]?E.auxGetPageData(e,null,null,function(e){T("PPP in fetchReferral success auxGetPageData: "+e),t()},function(e){T("PPP in fetchReferral failure auxGetPageData: "+e),t()}):(T("PPP in fetchReferral already in docCache: "+e),t()):t()},doubleFetch:function(e,t){var r=!0;null!=t&&null!=t.x||(r=!1),t&&t.x&&0==t.x.iall&&(r=!1),1==E.isSuspiciousURL(e)&&(r=!1),E.dropLongURL(e)&&(T("The url: "+e+" is long"),t&&t.x&&t.x.canonical_url?E.dropLongURL(t.x.canonical_url)?(T("The canonical url: "+t.x.canonical_url+" is also long"),r=!1):r=!0:r=!!t.isMU),r?(T("going to double-fetch: "+e),E.auxGetPageData(e,t,e,function(e,t,r,n){if(T("success on doubleFetch, need further validation"+e),E.validDoubleFetch(t.x,n,{structure_strict:!1})){let i=E.validFrameCount(t.x,n),s=E.validFrameSetCount(t.x,n);n.nifshmatch=i,n.nfshmatch=s,n.nifshbf=t.x.nifsh,n.nfshbf=t.x.nifsh,E.fetchReferral(t.ref,function(){var i=E.calculateStrictness(e,t);if(t.ref&&""!=t.ref){T("PPP: page has a referral, "+e+" < "+t.ref);var s=E.hasURL(t.ref,e);T("PPP: page has a referral, "+e+" < "+t.ref+">>>> "+s),s&&(i=!1)}else T("PPP: page has NO referral, "+e);if(T("strict URL:"+e+" > "+i),!E.validDoubleFetch(t.x,n,{structure_strict:i}))return T("doubleFetch failed on structure_strict=true: "+e),void E.setAsPrivate(e);if(E.dropLongURL(e,{strict:i})){if(!(t&&t.x&&t.x.canonical_url))return T("doubleFetch failed on dropLongURL strict=true:"+e),void E.setAsPrivate(e);if(E.dropLongURL(t.x.canonical_url,{strict:i}))return T("doubleFetch failed on dropLongURL strict=true:"+e),void E.setAsPrivate(e)}T("success on doubleFetch, need further validation");var a=e;if(null!=n.canonical_url&&""!=n.canonical_url&&0==E.dropLongURL(n.canonical_url))t.url=n.canonical_url,t.x=n;else if(null!=t.x.canonical_url&&""!=t.x.canonical_url&&0==E.dropLongURL(t.x.canonical_url))t.url=t.x.canonical_url,t.x=n,t.x.canonical_url=t.url;else{if(0!=E.dropLongURL(e))return void E.setAsPrivate(e);t.url=e,t.x=n,null!=t.x.canonical_url&&""!=t.x.canonical_url&&(t.x.canonical_url=e)}var o=E.getCleanerURL(t.url);o!=t.url?(T("going to clean_url double-fetch: "+o),E.auxGetPageData(o,t,a,function(e,t,r,n){T("success on clean_url doubleFetch, need further validation"),E.validDoubleFetch(t.x,n,{structure_strict:!1})?(t.url=e,t.x=n,E.setAsPublic(r),E.telemetry({type:E.msgType,action:"page",payload:t})):(E.debug&&(T("checking clean_url, page_doc: "+JSON.stringify(t)),T("checking clean_url, data: "+JSON.stringify(n))),t.x.nip<n.nip?(T("failure on checking the password and forms for clean_url: "+r+" set as private"),E.setAsPrivate(r)):(E.setAsPublic(r),E.telemetry({type:E.msgType,action:"page",payload:t})))},function(e,t,r,n){T("failure on clean_url doubleFetch! structure did not match"),E.setAsPublic(r),E.telemetry({type:E.msgType,action:"page",payload:t})})):(E.setAsPublic(r),E.telemetry({type:E.msgType,action:"page",payload:t}))})}else T("failure on doubleFetch! structure did not match"),E.setAsPrivate(e)},function(e,t,r,n){T("failure on doubleFetch! "+n),E.setAsPrivate(e)})):(T("doubleFetch refused to process this url: "+e),E.setAsPrivate(e))},hasURL:function(e,t){try{var r=E.docCache[e];if(!r)return!1;var n=r.doc;if(!n)return T("hasURL no CD!!! "),!1;var i=t.replace(/^http(s?)\:\/\//,""),s=null;try{var a=(0,k.parseURL)(e).hostname,o=(0,k.parseURL)(t).hostname}catch(e){return!1}if(a==o){s="/";var u=i.split("/");u.length>1&&(s="/"+u.slice(1,u.length).join("/"))}for(var c=!1,l=n.documentElement.getElementsByTagName("a"),d=0;d<l.length;d++)try{var h=l[d].href;if((h=h.replace(/^http(s?)\:\/\//,""))==i){c=!0;break}if(s&&h==s){c=!0;break}}catch(e){}return c}catch(e){return T("Error on hasURL: "+e),!1}},getPageData:function(e,t){var r=null,n=null,i=null,s=null,a=null,o=null,u=null,c=null,d=null,h=null,f=null,p=null,m=null,_=!0,g=null,y=null,v=null;let b=(0,k.parseURL)(e);try{y=(0,k.parseURL)(e).hostname}catch(e){y=null}try{r=t.documentElement.innerHTML.length}catch(e){}try{n=t.documentElement.textContent.length}catch(e){}try{i=t.getElementsByTagName("title")[0].textContent}catch(e){}try{s=t.getElementsByTagName("a").length}catch(e){}try{a=t.getElementsByTagName("input")||[],o=0,u=0;for(var $=0;$<a.length;$++)a[$].type&&"hidden"!=a[$].type&&(o+=1),a[$].type&&"password"==a[$].type&&(u+=1)}catch(e){}try{h=t.getElementsByTagName("frame")||[],c=0;for($=0;$<h.length;$++)if(h[$].src){var w=h[$].src;h[$].src.startsWith("//")&&(w="http:"+h[$].src);try{(v=(0,k.parseURL)(w).hostname)!==y&&"browser"!=v||c++}catch(e){c++}}}catch(e){}try{h=t.getElementsByTagName("iframe")||[],d=0;for($=0;$<h.length;$++)if(h[$].src){w=h[$].src;h[$].src.startsWith("//")&&(w="http:"+h[$].src);try{(v=(0,k.parseURL)(w).hostname)!==y&&"browser"!=v||d++}catch(e){d++}}}catch(e){}try{f=t.getElementsByTagName("form")}catch(e){}m=t.getElementsByTagName("meta");try{for(let e=0;e<m.length;e++)"content-language"!=m[e].getAttribute("http-equiv")&&"language"!=m[e].getAttribute("name")||(p=m[e].getAttribute("content"));null==p&&(p=t.getElementsByTagName("html")[0].getAttribute("lang")),p&&p.length>10&&(p=null)}catch(e){}let M="";try{if(M=t.querySelector("head")){let e=M.innerHTML.toLowerCase();e&&e.indexOf("noindex")>-1&&(_=!1)}}catch(e){T("no-index check failed "+e)}for(var S=t.getElementsByTagName("link"),O=0;O<S.length;O++)"canonical"==S[O].getAttribute("rel")&&(g=S[O].href,E.can_url_match[g]&&E.can_url_match[g]!=e&&(g=null));if(null!=g&&g.length>0){g.startsWith("//")&&(g=g.replace("//",""));let e=(0,l.getDetailsFromUrl)(g);(e.scheme.startsWith("chrome")||""===e.scheme||e.name&&!e.tld)&&(g=`${b.protocol}://${b.hostname}${e.path}`)}try{var x=E.getCountryCode()}catch(e){}return{lh:r,lt:n,t:i,nl:s,ni:(a||[]).length,ninh:o,nip:u,nf:(f||[]).length,pagel:p,ctry:x,iall:_,canonical_url:g,nfsh:c,nifsh:d}},listener:{tmpURL:void 0,onLocationChange:function(e){let t=e.isPrivate,r=(e.isLoadingDocument,e.url);e.referrer,e.frameId;if(t)return;if(r===this.tmpURL)return;this.tmpURL=r,E.lastActive=E.counter,E.lastActiveAll=E.counter;const n=r,s=E.cleanCurrentUrl(r);if(!E.isSuspiciousURL(s)&&1!=s.indexOf("about:"))if(null==E.state.v[s]){E.contentExtractor.isSearchEngineUrl(s)&&setTimeout(function(e,t){E&&(0,w.getContentDocument)(t).then(t=>{E.checkURL(t,e,"normal")}).catch(r=>{$.default.info(`Failed to get content for originalURL=${t} (internalURL=${e}, details=${r})`)})},E.WAIT_TIME,s,n);var a=null;null!=E.httpCache[s]&&(a=E.httpCache[s].status);var o=null;null!=E.linkCache[s]&&(o=E.linkCache[s].s);var u=[];if(0==(u=E.getRedirects(s,u)).length&&(u=null),u&&null==o){var c=u[0],l=E.linkCache[c];l&&(o=l.s),E.queryCache[c]&&(E.queryCache[s]=E.queryCache[c])}if(E.state.v[s]={url:s,a:0,x:null,tin:(new Date).getTime(),e:{cp:0,mm:0,kp:0,sc:0,md:0},st:a,c:[],ref:o,red:u},o&&E.state.v[o]&&E.state.v[o].qr)if(E.state.v[s].qr={},E.state.v[s].qr.q=E.state.v[o].qr.q,E.state.v[s].qr.t=E.state.v[o].qr.t,E.state.v[s].qr.d=E.state.v[o].qr.d+1,E.state.v[s].qr.d>2)delete E.state.v[s].qr;else if(2==E.state.v[s].qr.d)try{(0,k.parseURL)(s).hostname!==(0,k.parseURL)(o).hostname&&delete E.state.v[s].qr}catch(e){delete E.state.v[s].qr}setTimeout(function(e){(0,w.getContentDocument)(n).then(function(t){if(!E.contentExtractor.isSearchEngineUrl(e)){try{E.checkURL(t,e,"normal")}catch(e){}E.incrActiveUsage()}var r=E.getPageData(e,t);r.canonical_url&&(E.can_urls[e]=r.canonical_url,E.can_url_match[r.canonical_url]=e),null!=E.state.v[e]&&(E.state.v[e].x=r),E.queryCache[e]&&(E.state.v[e].qr=E.queryCache[e],delete E.queryCache[e]),null!=E.state.v[e]&&(E.addURLtoDB(e,E.state.v[e].ref,E.state.v[e]),E.queryCache[e])},function(){E.debug&&T("CANNOT GET THE CONTENT OF : "+e)}).catch(t=>{T("Error fetching title and length of page: "+t+" : "+e)})},E.PAGE_WAIT_TIME,s,n)}else E.state.v[s].tend=null,i.default.pub("HW-activeURL:",{activeURL:s})}},pacemaker:function(){if(E.currentURL().then(e=>{if(e&&0!==e.indexOf("about:")&&E.counter-E.lastActive<5*E.tmult)try{E.state.v[e].a+=1}catch(e){}}).catch(e=>{T("Error fetching fetching the currentURL: "+e)}),E.counter/E.tmult%5==0&&E.getAllOpenPages().then(e=>{var t=(new Date).getTime();for(var r in E.state.v)E.state.v.hasOwnProperty(r)&&(-1==e.indexOf(r)?(null==E.state.v[r].tend&&(E.state.v[r].tend=t),t-E.state.v[r].tend>60*E.deadFiveMts*1e3&&(E.state.m.push(E.state.v[r]),E.addURLtoDB(r,E.state.v[r].ref,E.state.v[r]),delete E.state.v[r],delete E.queryCache[r])):t-E.state.v[r].tin>60*E.deadTwentyMts*1e3&&(E.state.v[r].tend=null,E.state.v[r].too_long=!0,E.state.m.push(E.state.v[r]),E.addURLtoDB(r,E.state.v[r].ref,E.state.v[r]),delete E.state.v[r],delete E.queryCache[r]))}).catch(e=>{T(e)}),E.counter/E.tmult%10==0){let e=E.counter;E.currentURL().then(t=>{T("Pacemaker: "+e/E.tmult+" "+t)}).catch(e=>{T("Error fetching fetching the currentURL: "+e)}),E.cleanHttpCache(),E.cleanDocCache(),E.cleanLinkCache(),E.purgeAdLookUp()}if(E.counter/E.tmult%60==0&&(E.listOfUnchecked(1,E.doubleFetchTimeInSec,null,E.processUnchecks),E.auxGetQuery()),E.counter/E.tmult%10==0){var e=E.state.m.length;if(e>0){E.state.m.slice(0,e);E.state.m=E.state.m.slice(e,E.state.m.length)}E.bloomFilter||E.loadBloomFilter()}E.counter/E.tmult%300==0&&($.default.debug("human-web: flush network cache"),E.network.flushExpiredCacheEntries()),E.counter/E.tmult%1200==0&&(E.debug&&T("Load ts config"),E.expireQuorumBloomFilter()),E.counter/E.tmult%1200==0&&(E.debug&&T("Check if alive"),E.checkActiveUsage()),E.counter/E.tmult%1200==0&&(E.debug&&T("Save actions stats"),E.saveActionStats(),E.sendActionStatsIfNeeded()),E.counter>10&&E.counter/E.tmult%1200==0&&E.fetchSafeQuorumConfig(),E.counter+=1},cleanUserTransitions:function(e){for(var t in E.userTransitions.search)if(e||E.counter-E.userTransitions.search[t].time>E.userTransitionsSearchSession*E.tmult){if(E.userTransitions.search[t].data.length>1){try{var r=E.getCountryCode()}catch(e){}var n={q:t,sources:E.userTransitions.search[t].data,ctry:r};E.debug&&T(JSON.stringify(n,void 0,2)),E.telemetry({type:E.msgType,action:"userTransition.search",payload:n})}delete E.userTransitions.search[t]}},pushAllData:function(){E.cleanUserTransitions(!0);var e=(new Date).getTime(),t=[];for(var r in E.state.v)E.state.v[r]&&t.push(r);for(var n=0;n<t.length;n++){r=t[n];E.state.v[r]&&(null==E.state.v[r].tend&&(E.state.v[r].tend=e),E.addURLtoDB(r,E.state.v[r].ref,E.state.v[r]),E.state.m.push(E.state.v[r]),delete E.state.v[r],delete E.queryCache[r])}var i=E.state.m.length;if(i>0){E.state.m.slice(0,i);E.state.m=E.state.m.slice(i,E.state.m.length),E.pushTelemetry()}},unload:function(){E.checkActiveUsage(),E.pushTelemetry(),E.pacemakerId&&(E.pacemakerId.stop(),E.pacemakerId=void 0),E.trkTimer&&(clearTimeout(E.trkTimer),E.trkTimer=void 0),E.patternsLoader.unload(),E.doublefetchHandler.unload()},currentURL:function(){return(0,_.getActiveTab)().then(e=>{let t=e.url;return E.cleanCurrentUrl(t)})},cleanCurrentUrl:function(e){try{e=decodeURIComponent(e.trim())}catch(e){}return null!=e||void 0!=e?e:null},pacemakerId:null,captureKeyPressPage:function(e){if(E.counter-(0|E.lastEv.keypresspage)>1*E.tmult){E.debug,E.lastEv.keypresspage=E.counter,E.lastActive=E.counter;var t=E.cleanCurrentUrl(e.target.baseURI);null!=E.state.v[t]&&E.state.v[t].a>1*E.tmult&&(E.state.v[t].e.kp+=1)}},captureMouseMovePage:function(e){if(E.counter-(0|E.lastEv.mousemovepage)>1*E.tmult){E.debug&&T("captureMouseMovePage"),E.lastEv.mousemovepage=E.counter,E.lastActive=E.counter;var t=E.cleanCurrentUrl(e.target.baseURI);null!=E.state.v[t]&&E.state.v[t].a>1*E.tmult&&(E.state.v[t].e.mm+=1)}},getURLFromEvent:function(e){T(">>>> Get url from event >>> "+e.target.href);try{if(null!=e.target.href||void 0!=e.target.href)return decodeURIComponent(""+e.target.href);if(null!=e.target.parentNode.href||void 0!=e.target.parentNode.href)return decodeURIComponent(""+e.target.parentNode.href)}catch(e){E.debug&&T("Error in getURLFromEvent: "+e)}return null},contextFromEvent:null,setContextFromEvent:function(e){try{for(var t=e.target,r=!1,n=0,i=null;!r;){var s=t.innerHTML;if(-1!=s.indexOf("http://")||-1!=s.indexOf("https://")){r=!0,i=s;break}if(t=t.parentNode,(n+=1)>4)break}r&&i&&(E.contextFromEvent={html:i,ts:(new Date).getTime()})}catch(e){E.contextFromEvent=null}},captureMouseClickPage:function(e,t,r){var n=E.getURLFromEvent(e)||r;if(T("captureMouseClickPage>> "+n),E.contextFromEvent=t?{html:t,ts:Date.now()}:null,null!=n){var i=E.getEmbeddedURL(n);null!=i&&(n=i);var s=E.cleanCurrentUrl(e.target.baseURI);if(E.debug&&T("captureMouseClickPage>> "+E.counter+" "+n+" :  active: "+s+" "+(null!=E.state.v[s])+" "+e.target+" :: "+e.target.value+" >>"+JSON.stringify(E.lastEv)),null!=E.state.v[s]){E.linkCache[n]={s:""+s,time:E.counter};var a=n;E.httpCache[n]&&301===E.httpCache[n].status&&(a=E.httpCache[n].location),E.isSuspiciousURL(a)||E.dropLongURL(a)||E.isAlreadyMarkedPrivate(a,function(e){e&&0==e.private?E.state.v[s].c.push({l:""+E.maskURL(a),t:E.counter}):e||E.state.v[s].c.push({l:""+E.maskURL(a),t:E.counter})})}}if(E.counter-(0|E.lastEv.mouseclickpage)>1*E.tmult){E.debug&&T("captureMouseClickPage"),E.lastEv.mouseclickpage=E.counter,E.lastActive=E.counter;s=E.cleanCurrentUrl(e.target.baseURI);null!=E.state.v[s]&&E.state.v[s].a>1*E.tmult&&(E.state.v[s].e.md+=1)}},captureScrollPage:function(e){if(E.counter-(0|E.lastEv.scrollpage)>1*E.tmult){E.debug&&T("captureScrollPage "),E.lastEv.scrollpage=E.counter,E.lastActive=E.counter;var t=E.cleanCurrentUrl(e.target.baseURI);null!=E.state.v[t]&&E.state.v[t].a>1*E.tmult&&(E.state.v[t].e.sc+=1)}},captureCopyPage:function(e){if(E.counter-(0|E.lastEv.copypage)>1*E.tmult){E.debug&&T("captureCopyPage"),E.lastEv.copypage=E.counter,E.lastActive=E.counter;var t=E.cleanCurrentUrl(e.target.baseURI);null!=E.state.v[t]&&E.state.v[t].a>1*E.tmult&&(E.state.v[t].e.cp+=1)}},counter:0,tmult:4,tpace:250,lastEv:{},lastActive:null,lastActiveAll:null,network:new k.Network,doublefetchHandler:new g.default({onHostnameResolved:(e,t)=>{E.network.cacheDnsResolution(e,t)}}),init:function(){return Promise.resolve().then(()=>{if(!M.default.get("humanWebOptOut",!1))return T("Init function called:"),E.log=T,Promise.resolve().then(()=>E.db?(T("Closing database connections..."),E.db.asyncClose().then(()=>{E.db=void 0,T("Closing database connections...done")}).catch(e=>T(e))):Promise.resolve()).then(()=>{const e=new d.default(E);return e.init().then(()=>{E.db=e,T("Successfully connected to database")})}).then(()=>{null==E.state&&(E.state={}),null==E.actionStats&&E.loadActionStats(),null==E.actionStatsLastSent&&E.loadActionStatsLastSent(),E.bloomFilter||E.loadBloomFilter(),E.loadStrictQueries();const e=[];return e.push(E.patternsLoader.init()),e.push(E.doublefetchHandler.init()),e.push(E.fetchSafeQuorumConfig()),E.loadQuorumBloomFilter(),null===E.activeUsage&&E.db.loadRecordTelemetry("activeUsage",e=>{E.activeUsage=null===e?{}:JSON.parse(e)}),E.db.loadRecordTelemetry("activeUsageLastSent",e=>{null===e?E.saveActiveUsageTime():(T(`Active usage last sent  from db as ${e}`),E.activeUsageLastSent=parseInt(e))}),Promise.all(e).then(()=>{null==E.pacemakerId&&(E.pacemakerId=(0,S.default)(E.pacemaker,E.tpace,null))})})})},state:{v:{},m:[],_id:Math.floor(1e3*(0,u.default)())},hashCode:function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},msgSanitize:function(e){if(e.channel=E.CHANNEL,e.ts=E.getTS(),!e.ts||""==e.ts)return null;if(e["anti-duplicates"]=Math.floor(1e7*(0,u.default)()),"page"==e.action){if(e.payload.tend&&e.payload.tin){var t=e.payload.tend-e.payload.tin;T("Duration spent: "+e.payload.tend+" : "+e.payload.tin+" : "+t)}else{t=null;T("Duration spent: "+e.payload.tend+" : "+e.payload.tin+" : "+t)}if(e.payload.dur=t,delete e.payload.tend,delete e.payload.tin,e.payload.ref&&(E.isSuspiciousURL(e.payload.ref)?e.payload.ref=null:e.payload.ref=E.maskURL(e.payload.ref),E.isAlreadyMarkedPrivate(e.payload.ref,function(t){t&&1==t.private&&(e.payload.ref=null)})),!e.payload.x.t)return T("Missing Title: "+e.payload.x.t),null;if(E.isSuspiciousTitle(e.payload.x.t))return T("Suspicious Title: "+e.payload.x.t),null;if(e.payload.c&&(e.payload.c=null),1==E.dropLongURL(e.payload.url)){if(null==(r=e.payload.x.canonical_url)||""==r||0!=E.dropLongURL(r))return T("Suspicious url with no/bad canonical: "+e.payload.url),null;e.payload.url=r}else{var r;null!=(r=e.payload.x.canonical_url)&&""!=r&&1==E.dropLongURL(r)&&(e.payload.x.canonical_url=null)}var n=E.isShortenerURL(e.payload.url),i=!1;if(null!=e.payload.x.canonical_url&&""!=e.payload.x.canonical_url&&(i=E.isShortenerURL(e.payload.x.canonical_url)),n||i)return null;if(E.isSuspiciousURL(e.payload.url))return null;if(null!=e.payload.x.canonical_url&&""!=e.payload.x.canonical_url&&E.isSuspiciousURL(e.payload.x.canonical_url))return null;if(e.payload.red){var s=[];e.payload.red.forEach(function(e){E.isSuspiciousURL(e)||s.push(E.maskURL(e))}),e.payload.red=s}e.payload.x.canonical_url&&(e.payload.url==e.payload.x.canonical_url&&(T("Canoncial is same: "),e.payload.csb&&e.payload.ft&&(T("Canoncial seen before: "),delete e.payload.csb,delete e.payload.ft)),e.payload.csb&&delete e.payload.csb)}if(e.payload.qr&&e.payload.qr.d>2&&delete e.payload.qr,e.payload.qr&&E.isSuspiciousQuery(e.payload.qr.q)&&delete e.payload.qr,"doorwaypage"==e.action){if(E.isSuspiciousURL(e.payload.durl)||E.isSuspiciousURL(e.payload.url))return null;if(E.dropLongURL(e.payload.durl)||E.dropLongURL(e.payload.url))return null}if("query"==e.action||"anon-query"==e.action){if(null==e.payload.q||""==e.payload.q)return null;if(E.isSuspiciousQuery(e.payload.q))return null;if(e.payload.r){let t=[],r={};if(Object.keys(e.payload.r).forEach(r=>{E.isSuspiciousURL(e.payload.r[r].u)||t.push(e.payload.r[r])}),t.length<8)return null;t.slice(0,8).forEach((e,t)=>{r[t]=e}),T("Original: "+JSON.stringify(e.payload.r)),T("New: "+JSON.stringify(r)),e.payload.r=r}}return e},trk:[],trkTimer:null,notification:function(e){try{var t=E.getCountryCode()}catch(e){}e&&"object"==typeof e?(e.ctry=t,E.telemetry({type:E.msgType,action:"telemetry",payload:e})):T("Not a valid object, not sent to notification")},telemetry:function(e,t){return!E||M.default.get("humanWebOptOut",!1)||a.default.isPrivateMode()?Promise.resolve():(e.ver=E.VERSION,e=E.msgSanitize(e),T("Message sanitized"),e?E.network.isPublicDomain(e).then(t=>E.safeQuorumCheck(e),e=>Promise.reject("localcheck")).then(r=>{if(T("Quorum consent ?"+r),r)return E.quorumCheckOtherUrls(e).then(e=>{E.incrActionStats(e.action),E.trk.push(e),T("Added to the queue"),clearTimeout(E.trkTimer),t||E.trk.length%100==0?E.pushTelemetry():E.trkTimer=setTimeout(E.pushTelemetry,6e4)}).catch(e=>T("Error while checking other urls for quorum.: "+e));T("Dropping data as quorum check failed"),E.incrActionStats("droppedQC")}).catch(e=>{T("Error while safe quorum check: "+e),E.incrActionStats("dropped-"+e)}):(T("Message failed sanitization step"),Promise.resolve()))},_telemetry_req:null,_telemetry_sending:[],telemetry_MAX_SIZE:500,pushTelemetry:function(){if(!E._telemetry_req){E._telemetry_sending=E.trk.splice(0);var e=JSON.stringify(E._telemetry_sending);E._telemetry_req=(0,c.promiseHttpHandler)("POST",h.default.settings.SAFE_BROWSING,e,6e4,!0),E._telemetry_req.then(E.pushTelemetryCallback),E._telemetry_req.catch(E.pushTelemetryError)}},pushTelemetryCallback:function(e){try{JSON.parse(e.response);E._telemetry_sending=[],E._telemetry_req=null}catch(e){}},pushTelemetryError:function(e){E.trk=E._telemetry_sending.concat(E.trk);var t=E.trk.length-E.telemetry_MAX_SIZE+100;t>0&&(E.trk=E.trk.slice(t)),E._telemetry_sending=[],E._telemetry_req=null},auxSameDomain:function(e,t){try{return(0,k.parseURL)(e).hostname.replace("www.","")==(0,k.parseURL)(t).hostname.replace("www.","")}catch(e){return!1}},isAlreadyMarkedPrivate:function(e,t){var r=(0,o.default)(e).substring(0,16),n=null;E.bloomFilter&&(n=E.bloomFilter.testSingle(r)?{hash:r,private:1}:{hash:r,private:0});t(n)},forceDoubleFetch:function(e){E.listOfUnchecked(1e12,0,e,E.processUnchecks)},checkForEmail:function(e){return null!=e.match(/[a-z0-9\-_@]+(@|%40|%(25)+40)[a-z0-9\-_]+\.[a-z0-9\-_]/i)},checkForLongNumber:function(e,t){var r=e.replace(/[^A-Za-z0-9]/g,""),n=0,i=0,s=null;for(let e=0;e<r.length;e++)r[e]>="0"&&r[e]<="9"?n+=1:n>i?(i=n,s=e,n=0):n=0;return n>i?(i=n,s=r.length,n=0):n=0,null!=s&&i>t?r.slice(s-i,s):null},checkURL:(e,t,r)=>E.contentExtractor.checkURL(e,t,r),isSearchEngineUrl:e=>E.contentExtractor.isSearchEngineUrl(e),aggregateMetrics:function(e,t){var r={cp:0,mm:0,kp:0,sc:0,md:0};E.debug&&T("aggregates: "+JSON.stringify(e)+JSON.stringify(t));for(var n=Object.keys(r),i=0;i<n.length;i++)r[n[i]]=e[n[i]]+t[n[i]];return E.debug&&T("aggregates: "+JSON.stringify(r)),r},isSuspiciousTitle:function(e){if(e.length>500)return!0;for(var t=e.split(" "),r=0;r<t.length;r++){if(t[r].length>E.rel_segment_len)if((n=t[r].replace(/[^A-Za-z0-9]/g,"")).length>E.rel_segment_len){if(E.isHash(n))return!0;if(E.isHashProb(n.toLowerCase())<1.5*E.probHashThreshold)return!0}var n=t[r].replace(/[^A-Za-z0-9]/g,"");if(null!=E.checkForLongNumber(n,8))return!0;if(E.checkForEmail(n))return!0;if(/<[^<]+>/.test(n))return!0}return null!=E.checkForLongNumber(e,8)||(!!E.checkForEmail(e)||!!/<[^<]+>/.test(e))},auxProbString:function(e,t,r,n){if(e[1]==r)return 1;var i=0;for(let u=e.length-1;u>1;u--)if(0!=e[u]){var s=(e[u-1]+1)*t,a=e.slice();a[u]-=1,a[u-1]+=1;var o=a.join("-");n[o]||(n[o]=E.auxProbString(a,t,r,n)),i+=1*s*n[o]}return i},probString:function(e){var t={};for(let r=0;r<e.length;r++)t[e[r]]=(t[e[r]]||0)+1;var r=Object.keys(t),n=1/r.length,i=(e.length,r.length,[]);for(let t=0;t<e.length+1;t++)i[t]=0;var s=0,a=0;for(let e=0;e<r.length+1;e++){var o=t[r[e]];o>0&&(i[t[r[e]]]+=1,s+=1,o>a&&(a=o))}i=i.slice(0,a+1);return E.auxProbString(i,n,s,{})},isHashProb:function(e){var t=0,r=0;e=e.replace(/[^A-Za-z0-9]/g,"");for(var n=0;n<e.length-1;n++){var i=E.probHashChars[e[n]],s=E.probHashChars[e[n+1]];i&&s&&(t+=E.probHashLogM[i][s],r+=1)}return r>0?Math.exp(t/r):Math.exp(t)},isHash:function(e){return E.isHashProb(e)<E.probHashThreshold},incrActiveUsage:function(){let e=E.getTime();E.activeUsage.hasOwnProperty(e)||(E.activeUsage[e]=0),E.activeUsage[e]+=1,E.db.saveRecordTelemetry("activeUsage",JSON.stringify(E.activeUsage),e=>{T("Active usage stats saved:",e)})},checkActiveUsage:function(){if(parseInt(((new Date).getTime()-E.activeUsageLastSent)/1e3)>3600){Object.keys(E.activeUsage).forEach(e=>{E.activeUsage[e]>E.activeUsageThreshold&&e!=E.getTime()&&(E.sendAliveMessage(e),delete E.activeUsage[e],E.db.saveRecordTelemetry("activeUsage",JSON.stringify(E.activeUsage),e=>{T("Active usage stats saved:",e)}),E.saveActiveUsageTime())})}},sendAliveMessage:function(e){const t={status:!0,t:e,ctry:E.getCountryCode()};T(`Sending alive message for the hour: ${e} , ${JSON.stringify(t)}`),E.telemetry({type:E.msgType,action:"alive",payload:t})},loadActionStats:function(){E.db.loadRecordTelemetry("actionStats",function(e){if(null==e)T("There was no data on action stats"),E.actionStats={};else try{E.actionStats=JSON.parse(e)}catch(e){E.actionStats={}}})},loadActionStatsLastSent:function(){E.db.loadRecordTelemetry("actionStats_last_send",function(e){null==e?(T("There was no data on CliqzHumanWeb.actionstats"),E.actionStatsLastSent=E.getTime().slice(0,8),E.saveActionStatsLastSent()):E.actionStatsLastSent=e})},incrActionStats:function(e){E.actionStats&&(null==E.actionStats[e]&&(E.actionStats[e]=0),null==E.actionStats.total&&(E.actionStats.total=0),E.actionStats[e]++,E.actionStats.total++)},saveActionStats:function(){E.actionStats&&Object.keys(E.actionStats).length>0&&E.db.saveRecordTelemetry("actionStats",JSON.stringify(E.actionStats),e=>{T("actionStats saved")})},saveActiveUsageTime:function(){let e=(new Date).getTime();E.db.saveRecordTelemetry("activeUsageLastSent",e,t=>{E.activeUsageLastSent=e,T(`Active usage last sent as ${e}`)})},sendActionStats:function(){var e;E.actionStats&&Object.keys(E.actionStats).length>0&&(e={data:E.actionStats},E.telemetry({type:E.msgType,action:"hw.telemetry.actionstats",payload:e}),E.actionStats={},E.saveActionStats())},saveActionStatsLastSent:function(){E.db.saveRecordTelemetry("actionStats_last_send",E.actionStatsLastSent,e=>{T("actionStats_last_send saved:",e)})},saveStrictQueries:function(){T("Saving local table"),E.db.saveRecordTelemetry("localStrictQueries",JSON.stringify(E.strictQueries),e=>{T("localStrictQueries saved:",e)})},sendActionStatsIfNeeded:function(){var e=E.getTime().slice(0,8);e!=E.actionStatsLastSent&&(E.actionStatsLastSent=e,E.saveActionStatsLastSent(),E.sendActionStats())},dumpBloomFilter:function(){var e=[].slice.call(E.bloomFilter.buckets);e&&E.db.saveRecordTelemetry("bf",e.join("|"),e=>{T("bloom filter saved:",e)})},loadBloomFilter:function(){E.db.loadRecordTelemetry("bf",function(e){if(null==e)T("There was no data on CliqzHumanWeb.bf"),E.bloomFilter=new s.default.BloomFilter(Array(500001).join("0"),7);else{var t=e.split("|").map(Number);E.bloomFilter=new s.default.BloomFilter(t,7)}})},loadStrictQueries:function(){E.db.loadRecordTelemetry("localStrictQueries",function(e){null==e||0==e.length?(T("There was no data on CliqzHumanWeb.bf"),E.strictQueries=[]):E.strictQueries=JSON.parse(e)})},auxGetQuery:function(){E.strictQueries.forEach(function(e,t){Date.now()-e.ts>60*e.tDiff*1e3&&(E.auxGetPageData(e.qurl,null,e.qurl,function(e,t,r,n){let i=E.docCache[e].doc;E.checkURL(i,e,"strict")},function(e,t,r,n){T("Error aux>>>> "+n)}),E.strictQueries.splice(t,1),E.saveStrictQueries())})},isSuspiciousQuery:function(e){if(e.length>50)return!0;if(e.split(" ").length>7)return!0;if(null!=E.checkForLongNumber(e,7))return!0;if(E.checkForEmail(e))return!0;if(/[^:]+:[^@]+@/.test(e))return!0;if(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))return!0;var t=e.split(" ");for(let e=0;e<t.length;e++){if(t[e].length>20)return!0;if(/[^:]+:[^@]+@/.test(t[e]))return!0;if(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t[e]))return!0}if(e.length>12){var r=e.replace(/[^A-Za-z0-9]/g,"");if(r.length>12)if(E.isHashProb(r)<1.5*E.probHashThreshold)return!0}return!1},sanitizeResultTelemetry:function(e){if(E&&0===E.counter)return Promise.reject("HumanWeb not initialized");const t=e.msg;e.type;let r=e.q,n=null,i=t.u;const s=(0,l.getDetailsFromUrl)(i).host;if(!r||0==r.length)return T("No Query"),Promise.reject("No Query");E.isSuspiciousQuery(r)&&(T("Query is suspicious"),n="(PROTECTED)");let a=(0,k.parseURL)(r),u=!1;if(!a||"http"!==a.protocol&&"https"!==a.protocol&&"www"!==a.protocol||(u=!0),u&&(E.isSuspiciousURL(r)||E.dropLongURL(r))&&(T("Query is dangerous"),n="(PROTECTED)"),s.length>0&&i&&i.length>0){if(!E.bloomFilter)return Promise.reject("Bloom filter not initialized");return E.bloomFilter.testSingle((0,o.default)(i))?(T("Url is already marked private"),Promise.reject("Url is already marked private")):(E.isSuspiciousURL(i)&&(T("Url is suspicious"),i="(PROTECTED)"),E.dropLongURL(i,{strict:!0})&&(i=E.contentExtractor.isSearchEngineUrl(i)?E.maskURL(i):"(PROTECTED)"),Promise.resolve().then(()=>{let t,s=(0,k.parseURL)(i);return t=s&&s.hostname?E.maskURL(i):"(PROTECTED)",i===r&&(t=n="(PROTECTED)"),n&&(r=n,t=n),{query:r,url:t,data:e}}))}return-1===r.indexOf(" ")&&r.indexOf(".")>-1?E.network.isHostNamePrivate(r).then(t=>(t&&(T("Private Domain"),n="(PROTECTED)"),n&&(r=n),{query:r,url:null,data:e})):(n&&(r=n),Promise.resolve({query:r,url:null,data:e}))},sendResultTelemetry:function(e,t,r){const n=encodeURIComponent(e)+(r.msg.a?"&a="+encodeURIComponent(r.msg.a):"")+"&i="+r.msg.i+(t?"&u="+encodeURIComponent(t):"")+r.s+r.msg.o+(r.msg.e?"&e="+r.msg.e:""),i=r.endpoint+n;(0,c.httpGet)(i)},validFrameCount:function(e,t){return null!=e.nifsh&&null!=t.nifsh&&e.nifsh==t.nifsh||(T("fovalidDoubleFetch: number of internal iframes does not match"),!1)},validFrameSetCount:function(e,t){return null!=e.nfsh&&null!=t.nfsh&&e.nfsh==t.nfsh||(T("fovalidDoubleFetch: number of internal frameset does not match"),!1)},performQC:function(e){if("page"===e.action){let t=(0,k.parseURL)(e.payload.url);if(!e.payload.qr||"cl"!==e.payload.qr.t&&"othr"!==e.payload.qr.t){if(!e.payload.qr&&(t&&t.path.length>1||t.query_string&&1==t.path.length&&t.query_string.length>1))return!0}else if(t&&t.path.length>1||t.query_string&&1==t.path.length&&t.query_string.length>1)return!0}return!1},safeQuorumCheck:function(e){return new Promise((t,r)=>{if(E.performQC(e)){T("Perform QC: true");let n=e.payload.url;return E.sha1(n).then(E.sendQuorumIncrement).then(E.getQuorumConsent).then(e=>t(e)).catch(e=>{T("Error while safe quorum check: "+e),r("quorumcheck")})}T("Perform QC: false"),t(!0)})},sha1:function(e){return E.hpn.action("sha1",e)},sendQuorumIncrement:function(e){return new Promise((t,r)=>{E.isPageVisitedQuorumBloomFilter(e).then(r=>{if(T("Page already visited: "+r),!r){let t=`?hu=${e}&oc=${E.oc}`,r=`${E.SAFE_QUORUM_ENDPOINT}incrquorum`;return E.hpn.action("sendInstantMessage",r,t)}t(e)}).then(E.setPageVisitQuorumBloomFilter(e)).then(()=>t(e)).catch(e=>{T("Error while sending send quorum increment"+e),r("quorumincr")})})},getQuorumConsent:function(e){let t="?hu="+e,r=E.SAFE_QUORUM_ENDPOINT+"checkquorum";return E.hpn.action("sendInstantMessage",r,t)},registerQuorumBloomFilters:function(){return new Promise((e,t)=>{let r=E.getTime().slice(0,8);if(-1===Object.keys(E.quorumBloomFilters).indexOf(r)){T("Need to create quorum bloom filter for: "+r);let e=1e4,t=new s.default.BloomFilter(Array(e).join("0"),7);E.quorumBloomFilters[r]=t}e(E.quorumBloomFilters[r])})},setPageVisitQuorumBloomFilter:function(e){E.registerQuorumBloomFilters().then(t=>{t&&(t.addSingle(e),E.dumpQuorumBloomFilter(),Promise.resolve(!0))})},isPageVisitedQuorumBloomFilter:function(e){return new Promise((t,r)=>{Object.keys(E.quorumBloomFilters).forEach(r=>{E.quorumBloomFilters[r].testSingle(e)&&t(!0)}),t(!1)})},dumpQuorumBloomFilter:function(){let e={};Object.keys(E.quorumBloomFilters).forEach(t=>{let r=[].slice.call(E.quorumBloomFilters[t].buckets);e[t]=r.join("|")}),E.db.saveRecordTelemetry("quorumbf",JSON.stringify(e),e=>{T("quorum bloom filter saved:",e)})},loadQuorumBloomFilter:function(){E.db.loadRecordTelemetry("quorumbf",function(e){if(e){let t=JSON.parse(e);T("Loading quorum bloom filter"),Object.keys(t).forEach(e=>{let r=t[e].split("|").map(Number),n=new s.default.BloomFilter(r,7);E.quorumBloomFilters[e]=n})}})},expireQuorumBloomFilter:function(){let e=E.getTime().slice(0,8),t=new Date(e.slice(0,4),e.slice(4,6)-1,e.slice(6,8));Object.keys(E.quorumBloomFilters).forEach(e=>{let r=new Date(e.slice(0,4),e.slice(4,6)-1,e.slice(6,8));t-r>E.keyExpire&&delete E.quorumBloomFilters[e]}),E.dumpQuorumBloomFilter()},fetchSafeQuorumConfig:()=>(function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}})(function*(){try{const e=yield(yield(0,c.fetch)(E.SAFE_QUORUM_PROVIDER)).json();E&&(E.keyExpire=864e5*e.expiry,E.oc=e.oc,E.quorumThreshold=e.threshold)}catch(e){T("Error loading config.",e)}})(),getCountryCode:function(){let e=M.default.get("config_location",null);return E.sanitizeCounrtyCode(e)},getTS:function(){try{return M.default.get("config_ts","--")}catch(e){return null}},sanitizeCounrtyCode:function(e){let t=e;return-1===x.indexOf(t)&&(t="--"),t},getQuorumCheckOtherUrls:function(e){let t=[],r={};if(e.payload.x.canonical_url&&!e.payload.qr||e.payload.x.canonical_url&&e.payload.qr&&("cl"===e.payload.qr.t||"othr"===e.payload.qr.t)){let n=e.payload.x.canonical_url,i=(0,k.parseURL)(n);(i&&i.path.length>1||i.query_string&&1==i.path.length&&i.query_string.length>1)&&(r[t.length]={t:"canonical",url:n},t.push(n))}if(e.payload.ref){let n=e.payload.ref,i=(0,k.parseURL)(n);(i&&i.path.length>1||i.query_string&&1==i.path.length&&i.query_string.length>1)&&(r[t.length]={t:"ref",url:n},t.push(n))}return e.payload.red&&e.payload.red.forEach((e,n)=>{let i=e,s=(0,k.parseURL)(i);(s&&s.path.length>1||s.query_string&&1==s.path.length&&s.query_string.length>1)&&(r[t.length]={t:"red:"+n,url:i},t.push(i))}),{u:t,up:r}},quorumCheckOtherUrls:function(e){return new Promise((t,r)=>{if("page"===e.action){var n,i,s=E.getQuorumCheckOtherUrls(e);n=s.u,i=s.up,T("All urls in the message:"+JSON.stringify(n)),T("All urls in the message:"+JSON.stringify(i)),Promise.all(n.map(E.sha1)).then(n=>{T(JSON.stringify(n)),Promise.all(n.map(E.getQuorumConsent)).then(r=>{T(JSON.stringify(r)),r.forEach((t,r)=>{let n=i[r];if("canonical"===n.t&&(t||(e.payload.x.canonical_url=E.maskURLStrict(n.url))),"ref"===n.t&&(t||(e.payload.ref=E.maskURLStrict(n.url))),n.t.startsWith("red")){let r=n.t.split(":")[1];t||(e.payload.red[r]=E.maskURLStrict(n.url))}}),T("All urls in the message:"+JSON.stringify(e)),t(e)}).catch(e=>{r("Error in getQuorumConsent")})}).catch(e=>r("Error in sha1"))}else t(e)})},addURLtoDB:function(e,t,r){var n=(new Date).getTime();if(!E.contentExtractor.isSearchEngineUrl(e)){var i=1,s=!1;E.isAlreadyMarkedPrivate(e,function(e){e?1==e.private?s=!0:i=0:r.ft=!0}),E.db.getURL(e,function(a){if(T(">>>>> Add url to dbobj"+a.length+s),s||0!==a.length){if(1===a.length){T(">>>>> Add url to dbobj found record"+JSON.stringify(a));let t=a[0];T(t);var o=JSON.parse(t.payload).e,u=r.e;r.e=E.aggregateMetrics(o,u);var c=t;c.last_visit=n,c.payload=r||{},E.db.updateURL(e,c,function(){T("Record updated")}),r.e={cp:0,mm:0,kp:0,sc:0,md:0}}}else{var l=!1,d={};if(d.url=e,d.ref=t,d.last_visit=n,d.first_visit=n,d.ft=i,d.payload=r||{},null==r.x){l=!0,T("Setting private because empty page data")}else if(E.isSuspiciousURL(e)){l=!0,T("Setting private because suspiciousURL")}else if(E.httpCache401[e]){l=!0,T("Setting private because of 401")}else{l=!1}T(">>>>> lets save >>> "+JSON.stringify(d)),E.db.saveURL(e,d,function(){E.debug&&T("Insertion success add urltoDB"),l&&E.setAsPrivate(e)})}})}},setAsPrivate:function(e){E.bloomFilter&&E.bloomFilter.addSingle((0,o.default)(e).substring(0,16)),E.db.removeUnsafe(e,t=>{T(`Deleting ${e} : ${t}`)}),E.state.v[e]&&delete E.state.v[e],E.dumpBloomFilter(),E.incrActionStats("mp")},setAsPublic:function(e){E.db.removeUnsafe(e,t=>{T(`Deleting ${e} : ${t}`)}),E.state.v[e]&&delete E.state.v[e]},listOfUnchecked:function(e,t,r,n){E.db.getListOfUnchecked(e,t,r,(e,t)=>{n(e)})},processUnchecks:function(e){T(">>> URLS UNPROCESSED >>> "+JSON.stringify(e));for(var t={},r=0;r<e.length;r++){var n=e[r][0],i=e[r][1],s=i.x;t[n]=i,E.log("Going for double fetch: "+n),E.log("Going for double fetch2: "+i),E.log("Going for double fetch3: "+s),E.log("Going for double fetch3: "+JSON.stringify(s)),E.db.loadRecordTelemetry("last-double-fetch",function(e){var r=null;if(null==e)r={url:n,count:1};else if((r=JSON.parse(e)).url!=n)r={url:n,count:1};else try{r.count+=1}catch(e){r.count=1}T(">>>>> DOUBLE FETCH COUNT >>> "+JSON.stringify(r)),E.db.saveRecordTelemetry("last-double-fetch",JSON.stringify(r),e=>{T("last-double-fetch saved:",e)}),r.count>E.MAX_NUMBER_DOUBLEFETCH_ATTEMPS?E.setAsPrivate(n):E.doubleFetch(n,t[n])})}},detectAdClick:function(e){if(e.indexOf("google")>-1&&e.indexOf("aclk?")>-1){let t=(0,m.normalizeAclkUrl)(e);if(E.adDetails[t]){let e={action:"ad-ctr","anti-duplicates":Math.floor(1e7*(0,u.default)()),type:"humanweb",channel:E.CHANNEL,payload:{ctry:E.getCountryCode()}},r=E.adDetails[t].query;E.isSuspiciousQuery(r)&&(r=" (PROTECTED) "),e.payload.query=r,e.payload.domain=function(e,t){let r=t,n=(0,k.parseURL)(t);return n&&n.hostname&&-1===n.hostname.indexOf("google")&&-1===n.path.indexOf("aclk?")?r=n.hostname:e&&(r=e.indexOf(",")>-1?e.split(",")[0]:e),r}(E.adDetails[t].furl[0],E.adDetails[t].furl[1]),T(`AD CTR Payload : ${JSON.stringify(e)}`),E.telemetry(e)}}},purgeAdLookUp:function(){let e=Date.now();Object.keys(E.adDetails).forEach(t=>{let r=E.adDetails[t].ts;(e-r)/6e4>15&&delete E.adDetails[t]})},addStrictQueries(e,t){if(!t)return void T(">> Got an undefined query >>> "+e);var r=E.contentExtractor.checkAnonSearchURL(e,t);const n=r.isSearchEngineUrl,i=r.queryUrl;if(n)try{const e={qurl:i,ts:Date.now(),tDiff:function(e,t){const r=Math.ceil(e),n=Math.floor(t);return Math.floor((0,u.default)()*(n-r+1))+e}(1,20)};E.strictQueries.push(e),E.saveStrictQueries()}catch(e){$.default.error("Failed to add query:",e)}}};E.contentExtractor=new v.ContentExtractor(E),t.default=E},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(47)),i=p(r(22)),s=p(r(11)),a=p(r(78)),o=p(r(417)),u=p(r(1151)),c=p(r(31)),l=p(r(415)),d=p(r(122)),h=r(52),f=p(r(247));function p(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.default)({requiresServices:["cliqz-config"],hpn:c.default.module("hpn"),enabled:()=>s.default.get("humanWeb",!0)&&!s.default.get("humanWebOptOut",!1),init(){this.collecting=!1,this.humanWeb=o.default,o.default.hpn=this.hpn;const e=(0,h.isPlatformAtLeastInVersion)("48.0");return h.isFirefox&&!e?(this.active=!1,Promise.resolve()):Promise.resolve().then(()=>this.enabled()?o.default.init().then(()=>{this.onHeadersReceivedListener=function(){return o.default.httpObserver.observeActivity(...arguments)},l.default.onHeadersReceived.addListener(this.onHeadersReceivedListener,{urls:["*://*/*"]},["responseHeaders"]),(0,f.default)(this.actions,this),u.default&&u.default.onVisitRemoved&&(this.onVisitRemovedListener=function(){return o.default.onVisitRemoved(...arguments)},u.default.onVisitRemoved.addListener(this.onVisitRemovedListener)),this.active=!0,this.collecting=!0}):(this.active=!0,void(this.collecting=!1)))},unload(){this.collecting=!1,this.active&&(this.active=!1,this.onVisitRemovedListener&&(u.default.onVisitRemoved.removeListener(this.onVisitRemovedListener),this.onVisitRemovedListener=void 0),this.onHeadersReceivedListener&&(l.default.onHeadersReceived.removeListener(this.onHeadersReceivedListener),this.onHeadersReceivedListener=void 0),o.default.unload())},beforeBrowserShutdown(){o.default.unload()},events:{"ui:click-on-url":function(e){if(e.isPrivateMode)return;this.collecting&&(o.default.queryCache[e.url]={d:1,q:e.query,t:e.isPrivateResult?"othr":"cl",pt:e.positionType||""});const t={type:"extension-result-telemetry",q:e.query,s:n.default.encodeSessionParams(),msg:{i:e.rawResult.index,o:`&o=${encodeURIComponent(JSON.stringify(e.resultOrder))}`,u:e.url,a:e.isFromAutocompletedURL},endpoint:i.default.settings.RESULTS_PROVIDER_LOG,method:"GET"};o.default.sanitizeResultTelemetry(t).then(e=>{let t=e.query,r=e.url,n=e.data;return o.default.sendResultTelemetry(t,r,n)}).catch(d.default.error)},"control-center:toggleHumanWeb":()=>{s.default.set("modules.human-web.enabled",!1),s.default.set("humanWebOptOut",!s.default.get("humanWebOptOut",!1)),setTimeout(()=>{s.default.set("modules.human-web.enabled",!0)},0)},"core:mouse-down":function(){this.collecting&&o.default.captureMouseClickPage(...arguments)},"core:key-press":function(){this.collecting&&o.default.captureKeyPressPage(...arguments)},"core:mouse-move":function(){this.collecting&&o.default.captureMouseMovePage(...arguments)},"core:scroll":function(){this.collecting&&o.default.captureScrollPage(...arguments)},"core:copy":function(){this.collecting&&o.default.captureCopyPage(...arguments)},"content:location-change":function(){this.collecting&&o.default.listener.onLocationChange(...arguments)}},actions:{getStatus:()=>s.default.get("humanWebOptOut",!1),setStatus(e){s.default.set("humanWebOptOut",e),n.default.telemetry({type:"humanWebStatus",state:e})},isProcessingUrl:e=>void 0!==o.default.state.v[e],addDataToUrl:(e,t,r)=>o.default.state.v[e]?(o.default.state.v[e][t]=Object.keys(r).reduce((e,t)=>(e[t]=r[t],e),o.default.state.v[e][t]||{}),Promise.resolve()):Promise.reject(),telemetry(e,t){o.default.telemetry(e,t)},contentScriptTopAds(){},contentScriptHTML(){},jsRedirect(e){o.default.httpCache[e.message.url]={status:301,time:o.default.counter,location:e.message.location}},adClick(e){const t=e.ads;Object.keys(t).forEach(e=>{o.default.adDetails[e]=t[e]})}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1186);Object.defineProperty(t,"inflate",{enumerable:!0,get:function(){return n.inflate}}),Object.defineProperty(t,"deflate",{enumerable:!0,get:function(){return n.deflate}})},function(e,t,r){"use strict";r.r(t),function(e,r){var n=Object.keys,i=Array.isArray,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:e;function a(e,t){return"object"!=typeof t?e:(n(t).forEach(function(r){e[r]=t[r]}),e)}var o=Object.getPrototypeOf,u={}.hasOwnProperty;function c(e,t){return u.call(e,t)}function l(e,t){"function"==typeof t&&(t=t(o(e))),n(t).forEach(function(r){h(e,r,t[r])})}var d=Object.defineProperty;function h(e,t,r,n){d(e,t,a(r&&c(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:l.bind(null,e.prototype)}}}}var p=Object.getOwnPropertyDescriptor;var m=[].slice;function _(e,t,r){return m.call(e,t,r)}function g(e,t){return t(e)}function y(e){if(!e)throw new Error("Assertion Failed")}function v(e){s.setImmediate?r(e):setTimeout(e,0)}function b(e,t){return e.reduce(function(e,r,n){var i=t(r,n);return i&&(e[i[0]]=i[1]),e},{})}function $(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function w(e,t,r){try{e.apply(null,r)}catch(e){t&&t(e)}}function k(e,t){if(c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var s=k(e,t[n]);r.push(s)}return r}var a=t.indexOf(".");if(-1!==a){var o=e[t.substr(0,a)];return void 0===o?void 0:k(o,t.substr(a+1))}}function M(e,t,r){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){y("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)M(e,t[n],r[n])}else{var s=t.indexOf(".");if(-1!==s){var a=t.substr(0,s),o=t.substr(s+1);if(""===o)void 0===r?delete e[a]:e[a]=r;else{var u=e[a];u||(u=e[a]={}),M(u,o,r)}}else void 0===r?delete e[t]:e[t]=r}}function S(e){var t={};for(var r in e)c(e,r)&&(t[r]=e[r]);return t}var O=[].concat;function x(e){return O.apply([],e)}var T="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(x([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return s[e]}).map(function(e){return s[e]});function E(e){if(!e||"object"!=typeof e)return e;var t;if(i(e)){t=[];for(var r=0,n=e.length;r<n;++r)t.push(E(e[r]))}else if(T.indexOf(e.constructor)>=0)t=e;else for(var s in t=e.constructor?Object.create(e.constructor.prototype):{},e)c(e,s)&&(t[s]=E(e[s]));return t}function D(e,t,r,i){return r=r||{},i=i||"",n(e).forEach(function(n){if(c(t,n)){var s=e[n],a=t[n];"object"==typeof s&&"object"==typeof a&&s&&a&&""+s.constructor==""+a.constructor?D(s,a,r,i+n+"."):s!==a&&(r[i+n]=t[n])}else r[i+n]=void 0}),n(t).forEach(function(n){c(e,n)||(r[i+n]=t[n])}),r}var L="undefined"!=typeof Symbol&&Symbol.iterator,P=L?function(e){var t;return null!=e&&(t=e[L])&&t.apply(e)}:function(){return null},A={};function j(e){var t,r,n,s;if(1===arguments.length){if(i(e))return e.slice();if(this===A&&"string"==typeof e)return[e];if(s=P(e)){for(r=[];!(n=s.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var R="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function I(e,t){R=e,C=t}var C=function(){return!0},Y=!new Error("").stack;function F(){if(Y)try{throw F.arguments,new Error}catch(e){return e}return new Error}function N(e,t){var r=e.stack;return r?(t=t||0,0===r.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),r.split("\n").slice(t).filter(C).map(function(e){return"\n"+e}).join("")):""}var U=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],q=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function z(e,t){this._e=F(),this.name=e,this.message=t}function B(e,t,r,n){this._e=F(),this.failures=t,this.failedKeys=n,this.successCount=r}function W(e,t){this._e=F(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}(e,t)}f(z).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+N(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(B).from(z),f(W).from(z);var V=q.reduce(function(e,t){return e[t]=t+"Error",e},{}),G=z,K=q.reduce(function(e,t){var r=t+"Error";function n(e,n){this._e=F(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=H[t]||r,this.inner=null)}return f(n).from(G),e[t]=n,e},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var J=U.reduce(function(e,t){return e[t+"Error"]=K[t],e},{});var Q=q.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=K[t]),e},{});function Z(){}function X(e){return e}function ee(e,t){return null==e||e===X?t:function(r){return t(e(r))}}function te(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function re(e,t){return e===Z?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?te(n,this.onsuccess):n),i&&(this.onerror=this.onerror?te(i,this.onerror):i),void 0!==s?s:r}}function ne(e,t){return e===Z?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?te(r,this.onsuccess):r),n&&(this.onerror=this.onerror?te(n,this.onerror):n)}}function ie(e,t){return e===Z?t:function(r){var n=e.apply(this,arguments);a(r,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?te(i,this.onsuccess):i),s&&(this.onerror=this.onerror?te(s,this.onerror):s),void 0===n?void 0===o?void 0:o:a(n,o)}}function se(e,t){return e===Z?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ae(e,t){return e===Z?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return r.then(function(){return t.apply(n,s)})}return t.apply(this,arguments)}}Q.ModifyError=B,Q.DexieError=z,Q.BulkError=W;var oe={},ue=100,ce=7,le=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=s.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),de=le[0],he=le[1],fe=le[2],pe=he&&he.then,me=de&&de.constructor,_e=le[3],ge=!!fe,ye=!1,ve=fe?function(){fe.then(Ne)}:s.setImmediate?r.bind(null,Ne):s.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Ne(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Ne,0)},be=function(e,t){Ee.push([e,t]),we&&(ve(),we=!1)},$e=!0,we=!0,ke=[],Me=[],Se=null,Oe=X,xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{ct(e[0],e[1])}catch(e){}})}},Te=xe,Ee=[],De=0,Le=[];function Pe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Z,this._lib=!1;var t=this._PSD=Te;if(R&&(this._stackHolder=F(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Re(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Ue();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof Pe?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,Ie(t)),n&&qe()}},Re.bind(null,t))}catch(e){Re(t,e)}}(this,e)}var Ae={get:function(){var e=Te,t=Je;function r(r,n){var i=this,s=!e.global&&(e!==Te||t!==Je);s&&et();var a=new Pe(function(t,a){Ce(i,new je(at(r,e,s),at(n,e,s),t,a,e))});return R&&Fe(a,this),a}return r.prototype=oe,r},set:function(e){h(this,"then",e&&e.prototype===oe?Ae:{get:function(){return e},set:Ae.set})}};function je(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function Re(e,t){if(Me.push(t),null===e._state){var r=e._lib&&Ue();t=Oe(t),e._state=!1,e._value=t,R&&null!==t&&"object"==typeof t&&!t._promise&&w(function(){var r=function e(t,r){var n;return p(t,r)||(n=o(t))&&e(n,r)}(t,"stack");t._promise=e,h(t,"stack",{get:function(){return ye?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),function(e){ke.some(function(t){return t._value===e._value})||ke.push(e)}(e),Ie(e),r&&qe()}}function Ie(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Ce(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===De&&(++De,be(function(){0==--De&&He()},[]))}function Ce(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++De,be(Ye,[r,e,t])}else e._listeners.push(t)}function Ye(e,t,r){try{Se=t;var n,i=t._value;t._state?n=e(i):(Me.length&&(Me=[]),n=e(i),-1===Me.indexOf(i)&&function(e){var t=ke.length;for(;t;)if(ke[--t]._value===e._value)return void ke.splice(t,1)}(t)),r.resolve(n)}catch(e){r.reject(e)}finally{Se=null,0==--De&&He(),--r.psd.ref||r.psd.finalize()}}function Fe(e,t){var r=t?t._numPrev+1:0;r<ue&&(e._prev=t,e._numPrev=r)}function Ne(){Ue()&&qe()}function Ue(){var e=$e;return $e=!1,we=!1,e}function qe(){var e,t,r;do{for(;Ee.length>0;)for(e=Ee,Ee=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(Ee.length>0);$e=!0,we=!0}function He(){var e=ke;ke=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Le.slice(0),r=t.length;r;)t[--r]()}function ze(e){return new Pe(oe,!1,e)}function Be(e,t){var r=Te;return function(){var n=Ue(),i=Te;try{return nt(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{nt(i,!1),n&&qe()}}}l(Pe.prototype,{then:Ae,_then:function(e,t){Ce(this,new je(null,null,e,t,Te))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],r=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?r(e):ze(e)}):this.then(null,function(e){return e&&e.name===t?r(e):ze(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),ze(t)})},stack:{get:function(){if(this._stack)return this._stack;try{ye=!0;var e=function e(t,r,n){if(r.length===n)return r;var i="";if(!1===t._state){var s,a,o=t._value;null!=o?(s=o.name||"Error",a=o.message||o,i=N(o,0)):(s=o,a=""),r.push(s+(a?": "+a:"")+i)}R&&((i=N(t._stackHolder,2))&&-1===r.indexOf(i)&&r.push(i),t._prev&&e(t._prev,r,n));return r}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ye=!1}}},timeout:function(e,t){var r=this;return e<1/0?new Pe(function(n,i){var s=setTimeout(function(){return i(new K.Timeout(t))},e);r.then(n,i).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Pe.prototype,Symbol.toStringTag,"Promise"),xe.env=it(),l(Pe,{all:function(){var e=j.apply(null,arguments).map(tt);return new Pe(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(i,s){return Pe.resolve(i).then(function(r){e[s]=r,--n||t(e)},r)})})},resolve:function(e){if(e instanceof Pe)return e;if(e&&"function"==typeof e.then)return new Pe(function(t,r){e.then(t,r)});var t=new Pe(oe,!0,e);return Fe(t,Se),t},reject:ze,race:function(){var e=j.apply(null,arguments).map(tt);return new Pe(function(t,r){e.map(function(e){return Pe.resolve(e).then(t,r)})})},PSD:{get:function(){return Te},set:function(e){return Te=e}},newPSD:Ze,usePSD:st,scheduler:{get:function(){return be},set:function(e){be=e}},rejectionMapper:{get:function(){return Oe},set:function(e){Oe=e}},follow:function(e,t){return new Pe(function(r,n){return Ze(function(t,r){var n=Te;n.unhandleds=[],n.onunhandled=r,n.finalize=te(function(){var e=this;!function(e){Le.push(function t(){e();Le.splice(Le.indexOf(t),1)}),++De,be(function(){0==--De&&He()},[])}(function(){0===e.unhandleds.length?t():r(e.unhandleds[0])})},n.finalize),e()},t,r,n)})}});var We={awaits:0,echoes:0,id:0},Ve=0,Ge=[],Ke=0,Je=0,Qe=0;function Ze(e,t,r,n){var i=Te,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Qe;var o=xe.env;s.env=ge?{Promise:Pe,PromiseProp:{value:Pe,configurable:!0,writable:!0},all:Pe.all,race:Pe.race,resolve:Pe.resolve,reject:Pe.reject,nthen:ot(o.nthen,s),gthen:ot(o.gthen,s)}:{},t&&a(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=st(s,e,r,n);return 0===s.ref&&s.finalize(),u}function Xe(){return We.id||(We.id=++Ve),++We.awaits,We.echoes+=ce,We.id}function et(e){!We.awaits||e&&e!==We.id||(0==--We.awaits&&(We.id=0),We.echoes=We.awaits*ce)}function tt(e){return We.echoes&&e&&e.constructor===me?(Xe(),e.then(function(e){return et(),e},function(e){return et(),lt(e)})):e}function rt(){var e=Ge[Ge.length-1];Ge.pop(),nt(e,!1)}function nt(e,t){var r=Te;if((t?!We.echoes||Ke++&&e===Te:!Ke||--Ke&&e===Te)||function(e){pe.call(de,e)}(t?function(e){++Je,We.echoes&&0!=--We.echoes||(We.echoes=We.id=0),Ge.push(Te),nt(e,!0)}.bind(null,e):rt),e!==Te&&(Te=e,r===xe&&(xe.env=it()),ge)){var n=xe.env.Promise,i=e.env;he.then=i.nthen,n.prototype.then=i.gthen,(r.global||e.global)&&(Object.defineProperty(s,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject)}}function it(){var e=s.Promise;return ge?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:he.then,gthen:e.prototype.then}:{}}function st(e,t,r,n,i){var s=Te;try{return nt(e,!0),t(r,n,i)}finally{nt(s,!1)}}function at(e,t,r){return"function"!=typeof e?e:function(){var n=Te;r&&Xe(),nt(t,!0);try{return e.apply(this,arguments)}finally{nt(n,!1)}}}function ot(e,t){return function(r,n){return e.call(this,at(r,t,!1),at(n,t,!1))}}var ut="unhandledrejection";function ct(e,t){var r;try{r=t.onuncatched(e)}catch(e){}if(!1!==r)try{var n,i={promise:t,reason:e};if(s.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(ut,!0,!0),a(n,i)):s.CustomEvent&&a(n=new CustomEvent(ut,{detail:i}),i),n&&s.dispatchEvent&&(dispatchEvent(n),!s.PromiseRejectionEvent&&s.onunhandledrejection))try{s.onunhandledrejection(n)}catch(e){}n.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var lt=Pe.reject;function dt(e){var t={},r=function(r,n){if(n){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return t[r].subscribe.apply(null,s),e}if("string"==typeof r)return t[r]};r.addEventType=o;for(var s=1,a=arguments.length;s<a;++s)o(arguments[s]);return r;function o(e,s,a){if("object"==typeof e)return function(e){n(e).forEach(function(t){var r=e[t];if(i(r))o(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new K.InvalidArgument("Invalid event config");var n=o(t,X,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){v(function(){e.apply(null,t)})})})}})}(e);s||(s=se),a||(a=Z);var u={subscribers:[],fire:a,subscribe:function(e){-1===u.subscribers.indexOf(e)&&(u.subscribers.push(e),u.fire=s(u.fire,e))},unsubscribe:function(e){u.subscribers=u.subscribers.filter(function(t){return t!==e}),u.fire=u.subscribers.reduce(s,a)}};return t[e]=r[e]=u,u}}var ht,ft=String.fromCharCode(65535),pt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return ft}}(),mt=-1/0,_t="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gt="String expected.",yt=[],vt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),bt=vt,$t=vt,wt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function kt(e,t){var r,o,u,d=kt.dependencies,f=a({addons:kt.addons,autoOpen:!0,indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},t),p=f.addons,m=f.autoOpen,v=f.indexedDB,O=f.IDBKeyRange,T=this._dbSchema={},L=[],P=[],I={},C=null,Y=null,U=!1,q=null,H=!1,z="readwrite",V=this,G=new Pe(function(e){r=e}),J=new Pe(function(e,t){o=t}),Q=!0,te=!!jt(v);function se(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function oe(e,t,r){var i=V._createTransaction(z,P,T);i.create(t),i._completion.catch(r);var s=i._reject.bind(i);Ze(function(){Te.trans=i,0===e?(n(T).forEach(function(e){ue(t,e,T[e].primKey,T[e].indexes)}),Pe.follow(function(){return V.on.populate.fire(i)}).catch(s)):function(e,t,r){var i=[],s=L.filter(function(t){return t._cfg.version===e})[0];if(!s)throw new K.Upgrade("Dexie specification of currently installed DB version is missing");T=V._dbSchema=s._cfg.dbschema;var a=!1;return L.filter(function(t){return t._cfg.version>e}).forEach(function(e){i.push(function(){var n=T,i=e._cfg.dbschema;Le(n,r),Le(i,r),T=V._dbSchema=i;var s=function(e,t){var r={del:[],add:[],change:[]};for(var n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],s=t[n];if(i){var a={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==s.primKey.src)a.recreate=!0,r.change.push(a);else{var o=i.idxByName,u=s.idxByName;for(var c in o)u[c]||a.del.push(c);for(c in u){var l=o[c],d=u[c];l?l.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,s])}return r}(n,i);if(s.add.forEach(function(e){ue(r,e[0],e[1].primKey,e[1].indexes)}),s.change.forEach(function(e){if(e.recreate)throw new K.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach(function(e){ce(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),ce(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return a=!0,Pe.follow(function(){e._cfg.contentUpgrade(t)})}),i.push(function(t){a&&bt||function(e,t){for(var r=0;r<t.db.objectStoreNames.length;++r){var n=t.db.objectStoreNames[r];null==e[n]&&t.db.deleteObjectStore(n)}}(e._cfg.dbschema,t)})}),function e(){return i.length?Pe.resolve(i.shift()(t.idbtrans)).then(e):Pe.resolve()}().then(function(){!function(e,t){n(e).forEach(function(r){t.db.objectStoreNames.contains(r)||ue(t,r,e[r].primKey,e[r].indexes)})}(T,r)})}(e,i,t).catch(s)})}function ue(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){ce(i,e)}),i}function ce(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function le(e,t,r){this.name=e,this.schema=t,this._tx=r,this.hook=I[e]?I[e].hook:dt(null,{creating:[re,Z],reading:[ee,X],updating:[ie,Z],deleting:[ne,Z]})}function de(e,t,r){return(r?Tt:Ot)(function(r){e.push(r),t&&t()})}function he(e,t,r,n,i){return new Pe(function(s,a){var o=r.length,u=o-1;if(0===o)return s();if(n){var c,l=Tt(a),d=St(null);w(function(){for(var n=0;n<o;++n){c={onsuccess:null,onerror:null};var a=r[n];i.call(c,a[0],a[1],t);var h=e.delete(a[0]);h._hookCtx=c,h.onerror=l,h.onsuccess=n===u?St(s):d}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var h=0;h<o;++h){var f=e.delete(r[h]);f.onerror=Ot(a),h===u&&(f.onsuccess=Be(function(){return s()}))}})}function fe(e,t,r,n){var i=this;this.db=V,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=dt(this,"complete","error","abort"),this.parent=n||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pe(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),lt(e)})}function pe(e,t,r){this._ctx={table:e,index:":id"===t?null:t,or:r}}function ge(e,t){var r=null,n=null;if(t)try{r=t()}catch(e){n=e}var i=e._ctx,s=i.table;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:s.hook.reading.fire}}function ye(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ve(e,t){return e._cfg.version-t._cfg.version}function be(e,t,r){t.forEach(function(t){var n=r[t];e.forEach(function(e){t in e||(e===fe.prototype||e instanceof fe?h(e,t,{get:function(){return this.table(t)}}):e[t]=new le(t,n))})})}function $e(e,t,r,n,i,s){var a=Be(s?function(e,t,n){return r(s(e),t,n)}:r,i);e.onerror||(e.onerror=Ot(i)),e.onsuccess=$(t?function(){var r=e.result;if(r){var s=function(){r.continue()};t(r,function(e){s=e},n,i)&&a(r.value,r,function(e){s=e}),s()}else n()}:function(){var t=e.result;if(t){var r=function(){t.continue()};a(t.value,t,function(e){r=e}),r()}else n()},i)}function we(e,t){return v.cmp(e,t)}function ke(e,t){return we(e,t)<0?e:t}function Me(e,t){return we(e,t)>0?e:t}function Se(e,t){return v.cmp(e,t)}function Oe(e,t){return v.cmp(t,e)}function xe(e,t){return e<t?-1:e===t?0:1}function Ee(e,t){return e>t?-1:e===t?0:1}function De(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Le(e,t){for(var r=t.db.objectStoreNames,n=0;n<r.length;++n){var i=r[n],a=t.objectStore(i);u="getAll"in a;for(var o=0;o<a.indexNames.length;++o){var c=a.indexNames[o],l=a.index(c).keyPath,d="string"==typeof l?l:"["+_(l).join("+")+"]";if(e[i]){var h=e[i].idxByName[d];h&&(h.name=c)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u=!1)}function Ae(e){V.on("blocked").fire(e),yt.filter(function(e){return e.name===V.name&&e!==V&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}this.version=function(e){if(C||U)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=L.filter(function(t){return t._cfg.version===e})[0];return t||(t=new se(e),L.push(t),L.sort(ve),Q=!1,t)},a(se.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;var t={};L.forEach(function(e){a(t,e._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(t,r),T=V._dbSchema=r,function(e){e.forEach(function(e){for(var t in e)e[t]instanceof le&&delete e[t]})}([I,V,fe.prototype]),be([I,V,fe.prototype,this._cfg.tables],n(r),r),P=n(r),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){n(e).forEach(function(r){if(null!==e[r]){var n={},s=function(e){var t=[];return e.split(",").forEach(function(e){var r=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;t.push(new Lt(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(n),/\./.test(e)))}),t}(e[r]),a=s.shift();if(a.multi)throw new K.Schema("Primary key cannot be multi-valued");a.keyPath&&M(n,a.keyPath,a.auto?0:a.keyPath),s.forEach(function(e){if(e.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string");M(n,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[r]=new Pt(r,a,s,n)}})}}),this._allTables=I,this._createTransaction=function(e,t,r,n){return new fe(e,t,r,n)},this._whenReady=function(e){return H||Te.letThrough?e():new Pe(function(e,t){if(!U){if(!m)return void t(new K.DatabaseClosed);V.open().catch(Z)}G.then(e,t)}).then(e)},this.verno=0,this.open=function(){if(U||C)return G.then(function(){return Y?lt(Y):V});R&&(J._stackHolder=F()),U=!0,Y=null,H=!1;var t=r,i=null;return Pe.race([J,new Pe(function(t,r){if(!v)throw new K.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var s=Q?v.open(e):v.open(e,Math.round(10*V.verno));if(!s)throw new K.MissingAPI("IndexedDB API not available");s.onerror=Ot(r),s.onblocked=Be(Ae),s.onupgradeneeded=Be(function(t){if(i=s.transaction,Q&&!V._allowEmptyDB){s.onerror=Et,i.abort(),s.result.close();var n=v.deleteDatabase(e);n.onsuccess=n.onerror=Be(function(){r(new K.NoSuchDatabase("Database "+e+" doesnt exist"))})}else{i.onerror=Ot(r),oe((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,i,r)}},r),s.onsuccess=Be(function(){if(i=null,C=s.result,yt.push(V),Q)!function(){if(V.verno=C.version/10,V._dbSchema=T={},0===(P=_(C.objectStoreNames,0)).length)return;var e=C.transaction(At(P),"readonly");P.forEach(function(t){for(var r=e.objectStore(t),n=r.keyPath,i=n&&"string"==typeof n&&-1!==n.indexOf("."),s=new Lt(n,n||"",!1,!1,!!r.autoIncrement,n&&"string"!=typeof n,i),a=[],o=0;o<r.indexNames.length;++o){var u=r.index(r.indexNames[o]);n=u.keyPath,i=n&&"string"==typeof n&&-1!==n.indexOf(".");var c=new Lt(u.name,n,!!u.unique,!!u.multiEntry,!1,n&&"string"!=typeof n,i);a.push(c)}T[t]=new Pt(t,s,a,{})}),be([I],n(T),T)}();else if(C.objectStoreNames.length>0)try{Le(T,C.transaction(At(C.objectStoreNames),"readonly"))}catch(e){}C.onversionchange=Be(function(e){V._vcFired=!0,V.on("versionchange").fire(e)}),te||"__dbnames"===e||ht.dbnames.put({name:e}).catch(Z),t()},r)})]).then(function(){return q=[],Pe.resolve(kt.vip(V.on.ready.fire)).then(function e(){if(q.length>0){var t=q.reduce(ae,Z);return q=[],Pe.resolve(kt.vip(t)).then(e)}})}).finally(function(){q=null}).then(function(){return U=!1,V}).catch(function(e){try{i&&i.abort()}catch(e){}return U=!1,V.close(),lt(Y=e)}).finally(function(){H=!0,t()})},this.close=function(){var e=yt.indexOf(V);if(e>=0&&yt.splice(e,1),C){try{C.close()}catch(e){}C=null}m=!1,Y=new K.DatabaseClosed,U&&o(Y),G=new Pe(function(e){r=e}),J=new Pe(function(e,t){o=t})},this.delete=function(){var t=arguments.length>0;return new Pe(function(r,n){if(t)throw new K.InvalidArgument("Arguments not allowed in db.delete()");function i(){V.close();var t=v.deleteDatabase(e);t.onsuccess=Be(function(){te||ht.dbnames.delete(e).catch(Z),r()}),t.onerror=Ot(n),t.onblocked=Ae}U?G.then(i):i()})},this.backendDB=function(){return C},this.isOpen=function(){return null!==C},this.hasBeenClosed=function(){return Y&&Y instanceof K.DatabaseClosed},this.hasFailed=function(){return null!==Y},this.dynamicallyOpened=function(){return Q},this.name=e,l(this,{tables:{get:function(){return n(I).map(function(e){return I[e]})}}}),this.on=dt(this,"populate","blocked","versionchange",{ready:[ae,Z]}),this.on.ready.subscribe=g(this.on.ready.subscribe,function(e){return function(t,r){kt.vip(function(){H?(Y||Pe.resolve().then(t),r&&e(t)):q?(q.push(t),r&&e(t)):(e(t),r||e(function e(){V.on.ready.unsubscribe(t),V.on.ready.unsubscribe(e)}))})}}),this.transaction=function(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new K.InvalidArgument("Too few arguments");var i=new Array(n-1);for(;--n;)i[n-1]=arguments[n];r=i.pop();var s=x(i);return[e,s,r]}.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,r){var n=Te.trans;n&&n.db===V&&-1===e.indexOf("!")||(n=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var s=t.map(function(e){var t=e instanceof le?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=z)throw new K.InvalidArgument("Invalid transaction mode: "+e);e=z}if(n){if("readonly"===n.mode&&e===z){if(!i)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n=null}n&&s.forEach(function(e){if(n&&-1===n.storeNames.indexOf(e)){if(!i)throw new K.SubTransaction("Table "+e+" not included in parent transaction.");n=null}}),i&&n&&!n.active&&(n=null)}}catch(e){return n?n._promise(null,function(t,r){r(e)}):lt(e)}return n?n._promise(e,a,"lock"):Te.trans?st(Te.transless,function(){return V._whenReady(a)}):V._whenReady(a);function a(){return Pe.resolve().then(function(){var t,i=Te.transless||Te,a=V._createTransaction(e,s,T,n),o={trans:a,transless:i};n?a.idbtrans=n.idbtrans:a.create(),r.constructor===_e&&Xe();var u=Pe.follow(function(){if(t=r.call(a,a))if(t.constructor===me){var e=et.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=Dt(t))},o);return(t&&"function"==typeof t.then?Pe.resolve(t).then(function(e){return a.active?e:lt(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return t})).then(function(e){return n&&a._resolve(),a._completion.then(function(){return e})}).catch(function(e){return a._reject(e),lt(e)})})}},this.table=function(e){if(!c(I,e))throw new K.InvalidTable("Table "+e+" does not exist");return I[e]},l(le.prototype,{_trans:function(e,t,r){var n=this._tx||Te.trans;return n&&n.db===V?n===Te.trans?n._promise(e,t,r):Ze(function(){return n._promise(e,t,r)},{trans:n,transless:Te.transless||Te}):function e(t,r,n){if(H||Te.letThrough){var i=V._createTransaction(t,r,T);try{i.create()}catch(e){return lt(e)}return i._promise(t,function(e,t){return Ze(function(){return Te.trans=i,n(e,t,i)})}).then(function(e){return i._completion.then(function(){return e})})}if(!U){if(!m)return lt(new K.DatabaseClosed);V.open().catch(Z)}return G.then(function(){return e(t,r,n)})}(e,[this.name],t)},_idbstore:function(e,t,r){var n=this.name;return this._trans(e,function(e,r,i){if(-1===i.storeNames.indexOf(n))throw new K.NotFound("Table"+n+" not part of transaction");return t(e,r,i.idbtrans.objectStore(n),i)},r)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var r=this;return this._idbstore("readonly",function(t,n,i){var s=i.get(e);s.onerror=Ot(n),s.onsuccess=Be(function(){t(r.hook.reading.fire(s.result))},n)}).then(t)},where:function(e){if("string"==typeof e)return new pe(this,e);if(i(e))return new pe(this,"["+e.join("+")+"]");var t=n(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})&&e.keyPath.every(function(e){return t.indexOf(e)>=0})})[0];if(r&&pt!==ft)return this.where(r.name).equals(r.keyPath.map(function(t){return e[t]}));r||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var s=this.schema.idxByName,a=t.reduce(function(t,r){return[t[0]||s[r],t[0]||!s[r]?De(t[1],function(t){return""+k(t,r)==""+e[r]}):t[1]]},[null,null]),o=a[0];return o?this.where(o.name).equals(e[o.keyPath]).filter(a[1]):r?this.filter(a[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new ge(new pe(this,i(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new ge(new pe(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var r=Object.create(e.prototype);t&&Mt(r,t),this.schema.instanceTemplate=r;var n=function(t){if(!t)return t;var r=Object.create(e.prototype);for(var n in t)if(c(t,n))try{r[n]=t[n]}catch(e){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},defineClass:function(e){return this.mapToClass(kt.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===Z?this._idbstore(z,function(t,r,n,i){t(he(n,i,e,!1,Z))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,t){var r=this;return this._idbstore(z,function(n,i,s){if(!s.keyPath&&!r.schema.primKey.auto&&!t)throw new K.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return n();var a,o,u=function(e){0===c.length?n(e):i(new W(r.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,d=r;if(r.hook.creating.fire===Z&&r.hook.updating.fire===Z){o=de(c);for(var h=0,f=e.length;h<f;++h)(a=t?s.put(e[h],t[h]):s.put(e[h])).onerror=o;a.onerror=de(c,u),a.onsuccess=xt(u)}else{var p=t||s.keyPath&&e.map(function(e){return k(e,s.keyPath)}),m=p&&b(p,function(t,r){return null!=t&&[t,e[r]]});(p?d.where(":id").anyOf(p.filter(function(e){return null!=e})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(B,function(e){c=e.failures}).then(function(){for(var r=[],n=t&&[],i=p.length-1;i>=0;--i){var s=p[i];(null==s||m[s])&&(r.push(e[i]),t&&n.push(s),null!=s&&(m[s]=null))}return r.reverse(),t&&n.reverse(),d.bulkAdd(r,n)}).then(function(e){var t=p[p.length-1];return null!=t?t:e}):d.bulkAdd(e)).then(u).catch(W,function(e){c=c.concat(e.failures),u()}).catch(i)}},"locked")},bulkAdd:function(e,t){var r=this,n=this.hook.creating.fire;return this._idbstore(z,function(i,s,a,o){if(!a.keyPath&&!r.schema.primKey.auto&&!t)throw new K.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();function u(e){0===h.length?i(e):s(new W(r.name+".bulkAdd(): "+h.length+" of "+f+" operations failed",h))}var c,l,d,h=[],f=e.length;if(n!==Z){var p,m=a.keyPath;l=de(h,null,!0),d=St(null),w(function(){for(var r=0,i=e.length;r<i;++r){p={onerror:null,onsuccess:null};var s=t&&t[r],u=e[r],h=t?s:m?k(u,m):void 0,f=n.call(p,h,u,o);null==h&&null!=f&&(m?M(u=E(u),m,f):s=f),(c=null!=s?a.add(u,s):a.add(u))._hookCtx=p,r<i-1&&(c.onerror=l,p.onsuccess&&(c.onsuccess=d))}},function(e){throw p.onerror&&p.onerror(e),e}),c.onerror=de(h,u,!0),c.onsuccess=St(u)}else{l=de(h);for(var _=0,g=e.length;_<g;++_)(c=t?a.add(e[_],t[_]):a.add(e[_])).onerror=l;c.onerror=de(h,u),c.onsuccess=xt(u)}})},add:function(e,t){var r=this.hook.creating.fire;return this._idbstore(z,function(n,i,s,a){var o={onsuccess:null,onerror:null};if(r!==Z){var u=null!=t?t:s.keyPath?k(e,s.keyPath):void 0,c=r.call(o,u,e,a);null==u&&null!=c&&(s.keyPath?M(e,s.keyPath,c):t=c)}try{var l=null!=t?s.add(e,t):s.add(e);l._hookCtx=o,l.onerror=Tt(i),l.onsuccess=St(function(t){var r=s.keyPath;r&&M(e,r,t),n(t)})}catch(e){throw o.onerror&&o.onerror(e),e}})},put:function(e,t){var r=this,n=this.hook.creating.fire,i=this.hook.updating.fire;if(n!==Z||i!==Z){var s=this.schema.primKey.keyPath,a=void 0!==t?t:s&&k(e,s);return null==a?this.add(e):(e=E(e),this._trans(z,function(){return r.where(":id").equals(a).modify(function(){this.value=e}).then(function(n){return 0===n?r.add(e,t):a})},"locked"))}return this._idbstore(z,function(r,n,i){var s=void 0!==t?i.put(e,t):i.put(e);s.onerror=Ot(n),s.onsuccess=Be(function(t){var n=i.keyPath;n&&M(e,n,t.target.result),r(s.result)})})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(z,function(t,r,n){var i=n.delete(e);i.onerror=Ot(r),i.onsuccess=Be(function(){t(i.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(z,function(e,t,r){var n=r.clear();n.onerror=Ot(t),n.onsuccess=Be(function(){e(n.result)})})},update:function(e,t){if("object"!=typeof t||i(t))throw new K.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||i(e))return this.where(":id").equals(e).modify(t);n(t).forEach(function(r){M(e,r,t[r])});var r=k(e,this.schema.primKey.keyPath);return void 0===r?lt(new K.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(t)}}),l(fe.prototype,{_lock:function(){return y(!Te.global),++this._reculock,1!==this._reculock||Te.global||(Te.lockOwnerFor=this),this},_unlock:function(){if(y(!Te.global),0==--this._reculock)for(Te.global||(Te.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{st(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Te.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(y(!this.idbtrans),!e&&!C)switch(Y&&Y.name){case"DatabaseClosedError":throw new K.DatabaseClosed(Y);case"MissingAPIError":throw new K.MissingAPI(Y.message,Y);default:throw new K.OpenFailed(Y)}if(!this.active)throw new K.TransactionInactive;return y(null===this._completion._state),(e=this.idbtrans=e||C.transaction(At(this.storeNames),this.mode)).onerror=Be(function(r){Et(r),t._reject(e.error)}),e.onabort=Be(function(r){Et(r),t.active&&t._reject(new K.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=Be(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,r){var n=this;if(e===z&&this.mode!==z)return lt(new K.ReadOnly("Transaction is readonly"));if(!this.active)return lt(new K.TransactionInactive);if(this._locked())return new Pe(function(i,s){n._blockedFuncs.push([function(){n._promise(e,t,r).then(i,s)},Te])});if(r)return Ze(function(){var e=new Pe(function(e,r){n._lock();var i=t(e,r,n);i&&i.then&&i.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var i=new Pe(function(e,r){var i=t(e,r,n);i&&i.then&&i.then(e,r)});return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Pe.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return e});else{t._waitingFor=e,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var n=t._waitingFor;return new Pe(function(r,i){e.then(function(e){return t._waitingQueue.push(Be(r.bind(null,e)))},function(e){return t._waitingQueue.push(Be(i.bind(null,e)))}).finally(function(){t._waitingFor===n&&(t._waitingFor=null)})})},abort:function(){this.active&&this._reject(new K.Abort),this.active=!1},tables:{get:function(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+N(F(),1)),t.apply(this,arguments)}}("Transaction.tables",function(){return I})},table:function(e){return new le(e,V.table(e).schema,this)}}),l(pe.prototype,function(){function e(e,t,r){var n=e instanceof pe?new ge(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function t(e){return new ge(e,function(){return O.only("")}).limit(0)}function r(e,t,r,n,i,s){for(var a=Math.min(e.length,n.length),o=-1,u=0;u<a;++u){var c=t[u];if(c!==n[u])return i(e[u],r[u])<0?e.substr(0,u)+r[u]+r.substr(u+1):i(e[u],n[u])<0?e.substr(0,u)+n[u]+r.substr(u+1):o>=0?e.substr(0,o)+t[o]+r.substr(o+1):null;i(e[u],c)<0&&(o=u)}return a<n.length&&"next"===s?e+r.substr(e.length):a<e.length&&"prev"===s?e.substr(0,r.length):o<0?null:e.substr(0,o)+n[o]+r.substr(o+1)}function n(t,n,i,s){var a,o,u,c,l,d,h,f=i.length;if(!i.every(function(e){return"string"==typeof e}))return e(t,gt);function p(e){a=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),u="next"===e?xe:Ee;var t=i.map(function(e){return{lower:o(e),upper:a(e)}}).sort(function(e,t){return u(e.lower,t.lower)});c=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),d=e,h="next"===e?"":s}p("next");var m=new ge(t,function(){return O.bound(c[0],l[f-1]+s)});m._ondirectionchange=function(e){p(e)};var _=0;return m._addAlgorithm(function(e,t,i){var s=e.key;if("string"!=typeof s)return!1;var a=o(s);if(n(a,l,_))return!0;for(var p=null,m=_;m<f;++m){var g=r(s,a,c[m],l[m],u,d);null===g&&null===p?_=m+1:(null===p||u(p,g)>0)&&(p=g)}return t(null!==p?function(){e.continue(p+h)}:i),!1}),m}return{between:function(r,n,i,s){i=!1!==i,s=!0===s;try{return we(r,n)>0||0===we(r,n)&&(i||s)&&(!i||!s)?t(this):new ge(this,function(){return O.bound(r,n,!i,!s)})}catch(t){return e(this,_t)}},equals:function(e){return new ge(this,function(){return O.only(e)})},above:function(e){return new ge(this,function(){return O.lowerBound(e,!0)})},aboveOrEqual:function(e){return new ge(this,function(){return O.lowerBound(e)})},below:function(e){return new ge(this,function(){return O.upperBound(e,!0)})},belowOrEqual:function(e){return new ge(this,function(){return O.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,gt):this.between(t,t+ft,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):n(this,function(e,t){return 0===e.indexOf(t[0])},[e],ft)},equalsIgnoreCase:function(e){return n(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=j.apply(A,arguments);return 0===e.length?t(this):n(this,function(e,t){return-1!==t.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=j.apply(A,arguments);return 0===e.length?t(this):n(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,ft)},anyOf:function(){var r=j.apply(A,arguments),n=Se;try{r.sort(n)}catch(t){return e(this,_t)}if(0===r.length)return t(this);var i=new ge(this,function(){return O.bound(r[0],r[r.length-1])});i._ondirectionchange=function(e){n="next"===e?Se:Oe,r.sort(n)};var s=0;return i._addAlgorithm(function(e,t,i){for(var a=e.key;n(a,r[s])>0;)if(++s===r.length)return t(i),!1;return 0===n(a,r[s])||(t(function(){e.continue(r[s])}),!1)}),i},notEqual:function(e){return this.inAnyRange([[mt,e],[e,pt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=j.apply(A,arguments);if(0===t.length)return new ge(this);try{t.sort(Se)}catch(t){return e(this,_t)}var r=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[mt,t]]},null);return r.push([t[t.length-1],pt]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(r,n){if(0===r.length)return t(this);if(!r.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&Se(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var i=!n||!1!==n.includeLowers,s=n&&!0===n.includeUppers;var a,o=Se;function u(e,t){return o(e[0],t[0])}try{(a=r.reduce(function(e,t){for(var r=0,n=e.length;r<n;++r){var i=e[r];if(we(t[0],i[1])<0&&we(t[1],i[0])>0){i[0]=ke(i[0],t[0]),i[1]=Me(i[1],t[1]);break}}return r===n&&e.push(t),e},[])).sort(u)}catch(t){return e(this,_t)}var c=0,l=s?function(e){return Se(e,a[c][1])>0}:function(e){return Se(e,a[c][1])>=0},d=i?function(e){return Oe(e,a[c][0])>0}:function(e){return Oe(e,a[c][0])>=0};var h=l,f=new ge(this,function(){return O.bound(a[0][0],a[a.length-1][1],!i,!s)});return f._ondirectionchange=function(e){"next"===e?(h=l,o=Se):(h=d,o=Oe),a.sort(u)},f._addAlgorithm(function(e,t,r){for(var n=e.key;h(n);)if(++c===a.length)return t(r),!1;return!!function(e){return!l(e)&&!d(e)}(n)||0!==we(n,a[c][1])&&0!==we(n,a[c][0])&&(t(function(){o===Se?e.continue(a[c][0]):e.continue(a[c][1])}),!1)}),f},startsWithAnyOf:function(){var r=j.apply(A,arguments);return r.every(function(e){return"string"==typeof e})?0===r.length?t(this):this.inAnyRange(r.map(function(e){return[e,e+ft]})):e(this,"startsWithAnyOf() only works with strings")}}}),l(ge.prototype,function(){function e(e,t){e.filter=De(e.filter,t)}function t(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return De(n(),t())}:t,e.justLimit=r&&!n}function r(e,t){if(e.isPrimKey)return t;var r=e.table.schema.idxByName[e.index];if(!r)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(r.name)}function i(e,t){var n=r(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function s(e,t,r,n,s){var a=e.replayFilter?De(e.filter,e.replayFilter()):e.filter;e.or?function(){var o={},u=0;function l(){2==++u&&r()}function d(e,r,i){if(!a||a(r,i,l,n)){var s=r.primaryKey,u=""+s;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(s)),c(o,u)||(o[u]=!0,t(e,r,i))}}e.or._iterate(d,l,n,s),$e(i(e,s),e.algorithm,d,l,n,!e.keysOnly&&e.valueMapper)}():$e(i(e,s),De(e.algorithm,a),t,r,n,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var r=this._ctx;return r.error?r.table._trans(null,lt.bind(null,r.error)):r.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,lt.bind(null,t.error)):t.table._idbstore(z,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=De(t.algorithm,e)},_iterate:function(e,t,r,n){return s(this._ctx,e,t,r,n)},clone:function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&a(r,e),t._ctx=r,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read(function(r,n,i){s(t,e,r,n,i)})},count:function(e){var t=this._ctx;if(ye(t,!0))return this._read(function(e,n,i){var s=r(t,i),a=t.range?s.count(t.range):s.count();a.onerror=Ot(n),a.onsuccess=function(r){e(Math.min(r.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,i){s(t,function(){return++n,!1},function(){e(n)},r,i)},e)},sortBy:function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function s(e,t){return t?s(e[r[t]],t-1):e[n]}var a="next"===this._ctx.dir?1:-1;function o(e,t){var r=s(e,i),n=s(t,i);return r<n?-a:r>n?a:0}return this.toArray(function(e){return e.sort(o)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,i){if(u&&"next"===t.dir&&ye(t,!0)&&t.limit>0){var a=t.table.hook.reading.fire,o=r(t,i),c=t.limit<1/0?o.getAll(t.range,t.limit):o.getAll(t.range);c.onerror=Ot(n),c.onsuccess=xt(a===X?e:function(t){try{e(t.map(a))}catch(e){n(e)}})}else{var l=[];s(t,function(e){l.push(e)},function(){e(l)},n,i)}},e)},offset:function(e){var r=this._ctx;return e<=0?this:(r.offset+=e,ye(r)?t(r,function(){var t=e;return function(e,r){return 0===t||(1===t?(--t,!1):(r(function(){e.advance(t),t=0}),!1))}}):t(r,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),t>=0}},!0),this},until:function(t,r){this._ctx;return e(this._ctx,function(e,n,i){return!t(e.value)||(n(i),r)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return e(this._ctx,function(e){return t(e.value)}),function(e,t){e.isMatch=De(e.isMatch,t)}(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new pe(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},primaryKeys:function(e){var t=this._ctx;if(u&&"next"===t.dir&&ye(t,!0)&&t.limit>0)return this._read(function(e,n,i){var s=r(t,i),a=t.limit<1/0?s.getAllKeys(t.range,t.limit):s.getAllKeys(t.range);a.onerror=Ot(n),a.onsuccess=xt(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var n={};return e(this._ctx,function(e){var t=e.primaryKey.toString(),r=c(n,t);return n[t]=!0,!r}),this},modify:function(e){var t=this,r=this._ctx.table.hook,i=r.updating.fire,s=r.deleting.fire;return this._write(function(r,o,u,l){var d;if("function"==typeof e)d=i===Z&&s===Z?e:function(t){var r=E(t);if(!1===e.call(this,t,this))return!1;if(c(this,"value")){var a=D(r,this.value),o=i.call(this,a,this.primKey,r,l);o&&(t=this.value,n(o).forEach(function(e){M(t,e,o[e])}))}else s.call(this,this.primKey,t,l)};else if(i===Z){var h=n(e),f=h.length;d=function(t){for(var r=!1,n=0;n<f;++n){var i=h[n],s=e[i];k(t,i)!==s&&(M(t,i,s),r=!0)}return r}}else{var p=e;e=S(p),d=function(t){var r=!1,s=i.call(this,e,this.primKey,E(t),l);return s&&a(e,s),n(e).forEach(function(n){var i=e[n];k(t,n)!==i&&(M(t,n,i),r=!0)}),s&&(e=S(p)),r}}var m=0,_=0,g=!1,y=[],v=[],b=null;function $(e){return e&&(y.push(e),v.push(b)),o(new B("Error modifying one or more objects",y,_,v))}function O(){g&&_+y.length===m&&(y.length>0?$():r(_))}t.clone().raw()._iterate(function(e,t){b=t.primaryKey;var r={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function n(e){return y.push(e),v.push(r.primKey),O(),!0}if(!1!==d.call(r,e,r)){var i=!c(r,"value");++m,w(function(){var e=i?t.delete():t.update(r.value);e._hookCtx=r,e.onerror=Tt(n),e.onsuccess=St(function(){++_,O()})},n)}else r.onsuccess&&r.onsuccess(r.value)},function(){g=!0,O()},$,u)})},delete:function(){var e=this,t=this._ctx,r=t.range,n=t.table.hook.deleting.fire,i=n!==Z;if(!i&&ye(t)&&(t.isPrimKey&&!$t||!r))return this._write(function(e,t,n){var i=Ot(t),s=r?n.count(r):n.count();s.onerror=i,s.onsuccess=function(){var a=s.result;w(function(){var t=r?n.delete(r):n.clear();t.onerror=i,t.onsuccess=function(){return e(a)}},function(e){return t(e)})}});var s=i?2e3:1e4;return this._write(function(r,a,o,u){var c=0,l=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(s).raw(),d=[],h=function(){return l.each(i?function(e,t){d.push([t.primaryKey,t.value])}:function(e,t){d.push(t.primaryKey)}).then(function(){return i?d.sort(function(e,t){return Se(e[0],t[0])}):d.sort(Se),he(o,u,d,i,n)}).then(function(){var e=d.length;return d=[],e<s?c+=e:h()})};r(h())})}}}),a(this,{Collection:ge,Table:le,Transaction:fe,Version:se,WhereClause:pe}),V.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+V.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+V.name+"'. Closing db now to resume the delete request."),V.close()}),V.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+V.name+"') was blocked"):console.warn("Upgrade '"+V.name+"' blocked by other connection holding version "+e.oldVersion/10)}),p.forEach(function(e){e(V)})}function Mt(e,t){return n(t).forEach(function(r){var n=function e(t){if("function"==typeof t)return new t;if(i(t))return[e(t[0])];if(t&&"object"==typeof t){var r={};return Mt(r,t),r}return t}(t[r]);e[r]=n}),e}function St(e){return Be(function(t){var r=t.target,n=r._hookCtx,i=n.value||r.result,s=n&&n.onsuccess;s&&s(i),e&&e(i)},e)}function Ot(e){return Be(function(t){return Et(t),e(t.target.error),!1})}function xt(e){return Be(function(t){e(t.target.result)})}function Tt(e){return Be(function(t){var r=t.target,n=r.error,i=r._hookCtx,s=i&&i.onerror;return s&&s(n),Et(t),e(n),!1})}function Et(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Dt(e){var t=function(t){return e.next(t)},r=s(t),n=s(function(t){return e.throw(t)});function s(e){return function(t){var s=e(t),a=s.value;return s.done?a:a&&"function"==typeof a.then?a.then(r,n):i(a)?Pe.all(a).then(r,n):r(a)}}return s(t)()}function Lt(e,t,r,n,i,s,a){this.name=e,this.keyPath=t,this.unique=r,this.multi=n,this.auto=i,this.compound=s,this.dotted=a;var o="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(r?"&":"")+(n?"*":"")+(i?"++":"")+o}function Pt(e,t,r,n){this.name=e,this.primKey=t||new Lt,this.indexes=r||[new Lt],this.instanceTemplate=n,this.mappedClass=null,this.idxByName=b(r,function(e){return[e.name,e]})}function At(e){return 1===e.length?e[0]:e}function jt(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}I(R,wt),l(kt,Q),l(kt,{delete:function(e){var t=new kt(e),r=t.delete();return r.onblocked=function(e){return t.on("blocked",e),this},r},exists:function(e){return new kt(e).open().then(function(e){return e.close(),!0}).catch(kt.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){var t=jt(kt.dependencies.indexedDB);return t?new Pe(function(e,r){var n=t();n.onsuccess=function(t){e(_(t.target.result,0))},n.onerror=Ot(r)}).then(e):ht.dbnames.toCollection().primaryKeys(e)},defineClass:function(e){return function(e){e&&a(this,e)}},applyStructure:Mt,ignoreTransaction:function(e){return Te.trans?st(Te.transless,e):e()},vip:function(e){return Ze(function(){return Te.letThrough=!0,e()})},async:function(e){return function(){try{var t=Dt(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Pe.resolve(t)}catch(e){return lt(e)}}},spawn:function(e,t,r){try{var n=Dt(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:Pe.resolve(n)}catch(e){return lt(e)}},currentTransaction:{get:function(){return Te.trans||null}},waitFor:function(e,t){var r=Pe.resolve("function"==typeof e?kt.ignoreTransaction(e):e).timeout(t||6e4);return Te.trans?Te.trans.waitFor(r):r},Promise:Pe,debug:{get:function(){return R},set:function(e){I(e,"dexie"===e?function(){return!0}:wt)}},derive:f,extend:a,props:l,override:g,Events:dt,getByKeyPath:k,setByKeyPath:M,delByKeyPath:function(e,t){"string"==typeof t?M(e,t,void 0):"length"in t&&[].map.call(t,function(t){M(e,t,void 0)})},shallowClone:S,deepClone:E,getObjectDiff:D,asap:v,maxKey:pt,minKey:mt,addons:[],connections:yt,MultiModifyError:K.Modify,errnames:V,IndexSpec:Lt,TableSchema:Pt,dependencies:{get indexedDB(){try{return s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB}catch(e){}},get IDBKeyRange(){try{return s.IDBKeyRange||s.webkitIDBKeyRange}catch(e){}}},semVer:"{version}",version:"{version}".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)}),default:kt,Dexie:kt}),Pe.rejectionMapper=function(e,t){if(!e||e instanceof z||e instanceof TypeError||e instanceof SyntaxError||!e.name||!J[e.name])return e;var r=new J[e.name](t||e.message,e);return"stack"in e&&h(r,"stack",{get:function(){return this.inner.stack}}),r},(ht=new kt("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{if(void 0!==typeof localStorage&&void 0!==s.document)try{JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(e){return ht.dbnames.put({name:e}).catch(Z)}),localStorage.removeItem("Dexie.DatabaseNames")}catch(e){}}catch(e){}}(),t.default=kt}.call(this,r(17),r(124).setImmediate)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(420)),i=r(61),s=a(r(24));function a(e){return e&&e.__esModule?e:{default:e}}let o={};try{const e=new n.default("cliqz-kv-store");e.version(1).stores({kv:"key"}),o={get:t=>e.kv.get(t).then(e=>e.value),set:(t,r)=>e.kv.put({key:t,value:r}),remove:t=>e.kv.delete(t)}}catch(e){o={get:e=>new Promise((t,r)=>{i.chrome.storage.local.get(e,n=>{i.chrome.runtime.lastError?(s.default.error(i.chrome.runtime.lastError),r(i.chrome.runtime.lastError)):n[e]?t(n[e]):r(`storage has no value for ${e}`)})}),set:(e,t)=>new Promise((r,n)=>{i.chrome.storage.local.set({[e]:t},()=>{i.chrome.runtime.lastError?(s.default.error(i.chrome.runtime.lastError),n(i.chrome.runtime.lastError)):r()})}),remove:e=>new Promise((t,r)=>{i.chrome.storage.local.remove(e,()=>{i.chrome.runtime.lastError?(s.default.error(i.chrome.runtime.lastError),r(i.chrome.runtime.lastError)):t()})})}}t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(r(24)),s=r(252);const a={ONCE:0,FOREVER:1};t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.events=new Map;for(let t=0;t<e.length;t+=1)this.events.set(e[t],new Map)}on(e,t){this._registerCallback(e,t,a.FOREVER)}once(e,t){this._registerCallback(e,t,a.ONCE)}emit(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(this.events.has(e)){const t=this.events.get(e);[...t.entries()].forEach(o=>{var u=n(o,2);let c=u[0];u[1]===a.ONCE&&t.delete(c),(0,s.nextTick)(()=>c(...r)).catch(t=>i.default.error("Error while emitting event",e,c,r,t))})}}unsubscribe(e,t){"function"==typeof t&&this.events.has(e)&&this.events.get(e).delete(t)}_registerCallback(e,t,r){if(!this.events.has(e))throw new Error(`${e} is not a valid app lifecycle event`,this);"function"==typeof t&&this.events.get(e).set(t,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new class{constructor(){this.loaders=[],this.initialised=!1}init(){const e=this.loaders.map(e=>this._startLoader(e.loader,e.callback));return this.initialised=!0,Promise.all(e)}unload(){this.loaders.forEach(e=>{e.loader.stop()}),this.initialised=!1}addResourceLoader(e,t){this.loaders.push({loader:e,callback:t}),this.initialised&&this._startLoader(e,t)}_startLoader(e,t){return e.onUpdate(t),e.load().then(t)}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1197));t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=crypto},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let r,i="";const s=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=s.length;for(r=0;r<e;r+=1)i+=s.charAt(Math.floor((0,n.default)()*a));return i};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(147))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsWindowActive=function(e){return Number(e)<0?Promise.resolve(!1):new Promise(t=>{n.chrome.tabs.get(Number(e),()=>{n.chrome.runtime.lastError?t(!1):t(!0)})})};var n=r(61);t.default=n.chrome.windows},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newTab=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=new Promise(e=>{t=e});return n.chrome.tabs.create({url:e,active:r},e=>{t(e.id)}),i},t.getCurrentgBrowser=function(){throw new Error("getCurrentgBrowser() is not implemented!")},t.closeTab=function(e){return new Promise(t=>{n.chrome.tabs.onRemoved.addListener(function r(i){i===e&&(t(),n.chrome.tabs.onRemoved.removeListener(r))}),n.chrome.tabs.remove(Number(e))})},t.updateTab=function(e,t){return new Promise(r=>{n.chrome.tabs.update(Number(e),{url:t},r)})},t.getTab=function(){};var n=r(61);t.default=n.chrome.tabs},function(e,t,r){"use strict";e.exports=function(e){var t=e.lastIndexOf(".");return-1===t?null:e.substr(t+1)}},function(e,t,r){"use strict";function n(e){return e>=48&&e<=57}function i(e){return e>=97&&e<=122}e.exports=function(e){if("string"!=typeof e)return!1;if(e.length>255)return!1;if(0===e.length)return!1;var t=e.charCodeAt(0);if(!i(t)&&!n(t))return!1;for(var r,s,a=-1,o=e.length,u=0;u<o;u+=1){if(46===(s=e.charCodeAt(u))){if(u-a>64||46===r||45===r)return!1;a=u}else if(!i(s)&&!n(s)&&45!==s)return!1;r=s}return o-a-1<=63&&45!==r}},function(e,t,r){"use strict";t.decode=t.parse=r(1210),t.encode=t.stringify=r(1209)},function(e,t,r){(function(e,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var o,u=2147483647,c=36,l=1,d=26,h=38,f=700,p=72,m=128,_="-",g=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=c-l,w=Math.floor,k=String.fromCharCode;function M(e){throw new RangeError(b[e])}function S(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function O(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+S((e=e.replace(v,".")).split("."),t).join(".")}function x(e){for(var t,r,n=[],i=0,s=e.length;i<s;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<s?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function T(e){return S(e,function(e){var t="";return e>65535&&(t+=k((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=k(e)}).join("")}function E(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:c}function D(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function L(e,t,r){var n=0;for(e=r?w(e/f):e>>1,e+=w(e/t);e>$*d>>1;n+=c)e=w(e/$);return w(n+($+1)*e/(e+h))}function P(e){var t,r,n,i,s,a,o,h,f,g,y=[],v=e.length,b=0,$=m,k=p;for((r=e.lastIndexOf(_))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&M("not-basic"),y.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<v;){for(s=b,a=1,o=c;i>=v&&M("invalid-input"),((h=E(e.charCodeAt(i++)))>=c||h>w((u-b)/a))&&M("overflow"),b+=h*a,!(h<(f=o<=k?l:o>=k+d?d:o-k));o+=c)a>w(u/(g=c-f))&&M("overflow"),a*=g;k=L(b-s,t=y.length+1,0==s),w(b/t)>u-$&&M("overflow"),$+=w(b/t),b%=t,y.splice(b++,0,$)}return T(y)}function A(e){var t,r,n,i,s,a,o,h,f,g,y,v,b,$,S,O=[];for(v=(e=x(e)).length,t=m,r=0,s=p,a=0;a<v;++a)(y=e[a])<128&&O.push(k(y));for(n=i=O.length,i&&O.push(_);n<v;){for(o=u,a=0;a<v;++a)(y=e[a])>=t&&y<o&&(o=y);for(o-t>w((u-r)/(b=n+1))&&M("overflow"),r+=(o-t)*b,t=o,a=0;a<v;++a)if((y=e[a])<t&&++r>u&&M("overflow"),y==t){for(h=r,f=c;!(h<(g=f<=s?l:f>=s+d?d:f-s));f+=c)S=h-g,$=c-g,O.push(k(D(g+S%$,0))),h=w(S/$);O.push(k(D(h,0))),s=L(r,b,n==i),r=0,++n}++r,++t}return O.join("")}o={version:"1.4.1",ucs2:{decode:x,encode:T},decode:P,encode:A,toASCII:function(e){return O(e,function(e){return y.test(e)?"xn--"+A(e):e})},toUnicode:function(e){return O(e,function(e){return g.test(e)?P(e.slice(4).toLowerCase()):e})}},void 0===(i=function(){return o}.call(t,r,t,e))||(e.exports=i)}()}).call(this,r(67)(e),r(17))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1216));class i{constructor(e){if(!(this instanceof i))return new i(e);this.storage=n.default.bind(null,e),this.url=e}getItem(e){try{return this.storage().getItem(e)}catch(e){}}setItem(e,t){try{return this.storage().setItem(e,t)}catch(e){}}removeItem(e){try{return this.storage().removeItem(e)}catch(e){}}clear(){try{return this.storage().clear()}catch(e){}}setObject(e,t){this.setItem(e,JSON.stringify(t))}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.getItem(e);return r?JSON.parse(r):t}}t.default=i},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,r){"use strict";var n=r(93),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var a=new n.Buf8(256),o=0;o<256;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function u(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}a[254]=a[254]=1,t.string2buf=function(e){var t,r,i,s,a,o=e.length,u=0;for(s=0;s<o;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(i=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(u),a=0,s=0;a<u;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(i=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,n,i,s,o=t||e.length,c=new Array(2*o);for(n=0,r=0;r<o;)if((i=e[r++])<128)c[n++]=i;else if((s=a[i])>4)c[n++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&r<o;)i=i<<6|63&e[r++],s--;s>1?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return u(c,n)},t.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+a[e[r]]>t?r:t}},function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,r,i){var s=n,a=i+r;e^=-1;for(var o=i;o<a;o++)e=e>>>8^s[255&(e^t[o])];return-1^e}},function(e,t,r){"use strict";e.exports=function(e,t,r,n){for(var i=65535&e|0,s=e>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{s=s+(i=i+t[n++]|0)|0}while(--a);i%=65521,s%=65521}return i|s<<16|0}},function(e,t,r){"use strict";var n={};(0,r(93).assign)(n,r(1227),r(1224),r(434)),e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompress=t.compress=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1228));t.compress=n.compress||!1,t.decompress=n.decompress||!1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=b(r(32)),s=b(r(47)),a=b(r(24)),o=b(r(424)),u=b(r(22)),c=b(r(1196)),l=b(r(78)),d=r(66),h=b(r(423)),f=b(r(69)),p=b(r(31)),m=r(1193),_=b(r(1192)),g=b(r(247)),y=r(55),v=r(1185);function b(e){return e&&e.__esModule?e:{default:e}}let $=0;const w={};t.default=(0,l.default)({providesServices:_.default,init(e,t){this.settings=e,this.utils=s.default,this.app=t,s.default.CliqzLanguage=o.default,this.dispatchMessage=this.dispatchMessage.bind(this),(0,g.default)(this.actions,this),this.mm=new c.default(this.dispatchMessage),this.mm.init(),h.default.init(),f.default.init()},unload(){this.mm.unload(),h.default.unload(),f.default.unload()},dispatchMessage(e){return"number"==typeof e.data.requestId?(e.data.requestId in w&&this.handleResponse(e),!1):(this.handleRequest(e),!0)},handleRequest(e){var t=e.data;const r=t.payload,n=t.sender,i=t.sendResponse,s=r.action,o=r.module,u=r.args;return p.default.module(o).action(s,...[...u||[],n]).catch(e=>{if("ModuleDisabledError"===e.name)return{moduleDisabled:!0};throw a.default.error(`Process Script ${o}/${s}`,e),e}).then(i)},handleResponse(e){w[e.data.requestId].apply(null,[e.data.payload])},getWindowStatusFromModules(e){return Object.keys(this.app.modules).map(t=>{const r=this.app.modules[t].getWindowModule(e),n=this.app.modules[t].backgroundModule;return r&&r.status?r.status():n&&n.status?n.status():null})},events:{"core:tab_select":function(e){let t=e.url,r=e.isPrivate;i.default.pub("core.location_change",t,r)},"content:location-change":function(e){let t=e.url,r=e.isPrivate;i.default.pub("core.location_change",t,r)}},actions:{notifyProcessInit(e){i.default.pub("process:init",e)},notifyLocationChange(e){const t=d.Window.findByTabId(e.domWindowId);if(!t)return;const r=n({},e,{windowId:t?t.id:null,tabId:e.windowTreeInformation.tabId});i.default.pub("content:location-change",r)},notifyStateChange(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t[0];i.default.pub("content:state-change",{url:n.urlSpec,originalUrl:n.originalUrl,triggeringUrl:n.triggeringUrl,windowTreeInformation:n.windowTreeInformation}),i.default.pub("core.tab_state_change",...t)},recordMouseDown(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];i.default.pub("core:mouse-down",...t)},recordKeyPress(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];i.default.pub("core:key-press",...t)},recordMouseMove(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];i.default.pub("core:mouse-move",...t)},recordScroll(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];i.default.pub("core:scroll",...t)},recordCopy(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];i.default.pub("core:copy",...t)},publishEvent(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.default.pub(e,...r)},restart(){return this.app.extensionRestart()},status(){const e=this.app.modules;return{modules:u.default.modules.reduce((t,r)=>{const n=e[r],i=(0,d.mapWindows)(e=>new d.Window(e)).reduce((e,t)=>(e[t.id]={loadingTime:n.getLoadingTime(t.window)},e),Object.create(null));return t[r]={name:n.name,isEnabled:n.isEnabled,loadingTime:n.loadingTime,windows:i},t},Object.create(null))}},broadcast(e,t){t||"object"!=typeof e||(t=e,e=null),this.mm.broadcast(e,t)},broadcastMessageToWindow(e,t,r){this.mm.broadcast(`window-${t}`,{payload:e,module:r,windowId:t})},broadcastMessage(e,t){this.mm.broadcast("cliqz:core",{action:"postMessage",url:e,args:[JSON.stringify(t)]})},getWindowStatus(e){return Promise.all(this.getWindowStatusFromModules(e)).then(e=>{const t={};return e.forEach((e,r)=>{t[u.default.modules[r]]=e||null}),t})},sendTelemetry(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length>1&&t.pop(),Promise.resolve(s.default.telemetry(...t))},refreshPopup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==e.trim())return this.actions.queryCliqz(e);const t=s.default.getWindow().document,r=t.getElementById("urlbar"),n=t.getAnonymousElementByAttribute(r,"anonid","historydropmarker");setTimeout(()=>{n.click()},0)},queryCliqz(e){(0,m.queryCliqz)(e)},openLink(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).newTab;let r=void 0===t||t;let n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{tab:{}}).tab.id;r?(0,m.openLink)(e):n&&(0,v.updateTabById)(n,{url:e})},openTab(e){(0,m.openTab)(e)},getOpenTabs:()=>(0,m.getOpenTabs)(),getReminders:e=>(0,m.getReminders)(e),setUrlbar(e){s.default.getWindow().document.getElementById("urlbar").mInputField.value=e},recordMeta:(e,t)=>(i.default.pub("core:url-meta",e,t),i.default.pub("content:dom-ready",e),t.lang&&o.default.addLocale(e,t.lang),Promise.resolve()),openFeedbackPage(){const e=s.default.getWindow(),t=s.default.openLink(e,s.default.FEEDBACK_URL,!0);e.gBrowser.selectedTab=t},enableModule(e){return this.app.enableModule(e)},disableModule(e){this.app.disableModule(e)},resizeWindow(e,t){s.default.getWindow().resizeTo(e,t)},click(e,t){const r=$;return $+=1,this.mm.broadcast("cliqz:core",{action:"click",url:e,args:[t],requestId:r}),new Promise((e,t)=>{w[r]=(t=>{delete w[r],e(t)}),setTimeout(()=>{delete w[r],t(new Error("click timeout"))},1e3)})},queryHTML(e,t,r){const n=$;return $+=1,this.mm.broadcast("cliqz:core",{action:"queryHTML",url:e,args:[t,r],requestId:n}),new Promise((e,t)=>{w[n]=(t=>{delete w[n],e(t)}),setTimeout(()=>{delete w[n],t(new Error("queryHTML timeout"))},1e3)})},getHTML(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const r=$;$+=1;const n=[];return this.mm.broadcast("cliqz:core",{action:"getHTML",url:e,args:[],requestId:r}),w[r]=(e=>{n.push(e)}),new Promise(e=>{setTimeout(()=>{delete w[r],e(n)},t)})},getCookie(e){return(0,d.getCookies)(e).catch(()=>{const t=$;return $+=1,this.mm.broadcast("cliqz:core",{action:"getCookie",url:e,args:[],requestId:t}),new Promise((e,r)=>{w[t]=(r=>{delete w[t],e(r)}),setTimeout(()=>{delete w[t],r(new Error("getCookie timeout"))},1e3)})})},sendUserFeedback(e){e._type="user_feedback",(0,y.httpHandler)("POST",u.default.settings.STATISTICS,null,null,1e4,JSON.stringify(e))}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){return new Promise(e=>{chrome.storage.local.get(a,t=>{Object.assign(u,t[a]||{}),o=!0,e()})})},t.getAllCliqzPrefs=d,t.getPref=h,t.setPref=function(e,t){const r=l(e),s=u[r]!==t;if(u[r]=t,n.default.pub("prefchange",r),!o)return void i.default.warn(`setting pref ${r} before prefs were initialised, you will not get the correct result`);s&&c()},t.hasPref=function(e){return l(e)in u},t.clearPref=function(e){const t=l(e);delete u[t],c()},t.enableChangeEvents=function(){throw new Error("not implemented - prefs.enableChangeEvents")},t.disableChangeEvents=function(){throw new Error("not implemented - prefs.disableChangeEvents")},t.getCliqzPrefs=function(){const e={},t=(void 0).filter(function(e){return-1===e.indexOf(".")&&-1===e.indexOf("backup")&&-1===e.indexOf("attrackSourceDomainWhitelist")||-1!==e.indexOf(".enabled")});for(let r=0;r<t.length;r+=1)e[t[r]]=h(t[r]);return e};var n=s(r(32)),i=s(r(24));function s(e){return e&&e.__esModule?e:{default:e}}const a="cliqzprefs";let o=!1;const u={};function c(){chrome.storage.local.set({[a]:u})}function l(e){return e.startsWith("extensions.cliqz.")?e.substr("extensions.cliqz.".length):e}function d(){}function h(e,t){const r=l(e);return o?u&&void 0!==u[r]?u[r]:t:(i.default.warn(`loading pref ${r} before prefs were initialised, you will not get the correct result`),u[r]||t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(61);t.default=n.window.console},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldEnableModule=m;var n=p(r(22)),i=r(32),s=p(i),a=p(r(11)),o=p(r(1232)),u=r(648),c=r(24),l=p(c),d=p(r(47)),h=r(66),f=p(r(214));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){const t=`modules.${e}.enabled`;return!a.default.has(t)||!0===a.default.get(t)}function _(){a.default.get("showConsoleLogs")?(0,c.enable)():(0,c.disable)()}t.default=class{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};let t=e.version,r=e.debug;this.version=t,this.debug=r,this.config=n.default,this.modules=Object.create(null),this.services=Object.create(null),this.loadedWindows=new WeakSet,this._startedDefer=new f.default,n.default.modules.forEach(e=>{const r=new o.default(e,Object.assign({},n.default.settings,{version:t}));this.modules[e]=r,Object.assign(this.services,r.providedServices)}),d.default.extensionVersion=t,(0,u.setApp)(this),this.isRunning=!1,this.onMigrationEnded=((e,t)=>{"Migration:Ended"===t&&this.extensionRestart()})}extensionRestart(e){return(0,h.forEachWindow)(e=>{e.CLIQZ&&e.CLIQZ.Core&&this.unloadWindow(e)}),this.unload(),e&&e(),this.load().then(()=>{const e=[];return(0,h.forEachWindow)(t=>{e.push(this.loadWindow(t))}),Promise.all(e)})}unloadFromWindow(e,t){if((0,h.mustLoadWindow)(e))try{this.unloadWindow(e,t);let r=0;(0,h.forEachWindow)(()=>{r+=1}),s.default.pub("core.window_closed",{remaining:r})}catch(e){(0,h.reportError)(e)}}loadIntoWindow(e,t){l.default.log("window loading -> source:",t),e&&(this.loadedWindows.has(e)?l.default.log("window loading -> stop: already loaded"):(this.loadedWindows.add(e),(0,h.waitWindowReady)(e).then(()=>(0,h.mustLoadWindow)(e)?this.loadWindow(e):null).catch(e=>{l.default.error(e,"Extension failed loaded window modules")})))}start(){return this.isRunning=!0,(0,h.addMigrationObserver)(this.onMigrationEnded),this.setupPrefs().then(()=>this.load().then(()=>{(0,h.enableChangeEvents)(),this.windowWatcher=((e,t)=>{"opened"===t?this.loadIntoWindow(e,"windowWatcher"):"closed"===t&&this.unloadFromWindow(e)}),(0,h.addWindowObserver)(this.windowWatcher),(0,h.forEachWindow)(e=>{this.loadIntoWindow(e,"existing window")}),this.sessionRestoreObserver=(()=>{(0,h.forEachWindow)(e=>{this.loadIntoWindow(e,"session restore")})}),(0,h.addSessionRestoreObserver)(this.sessionRestoreObserver)}))}stop(e,t,r){this.isRunning=!1,(0,h.removeMigrationObserver)(this.onMigrationEnded),d.default.telemetry({type:"activity",action:r,lifecyle:"stop"},!0),t&&"40"===n.default.settings.channel&&(t=!1),e?this.unload({quick:!0}):((0,h.forEachWindow)(e=>{this.unloadFromWindow(e,{disable:t})}),this.unload(),t&&this.restorePrefs(),(0,h.removeWindowObserver)(this.windowWatcher),(0,h.removeSessionRestoreObserver)(this.sessionRestoreObserver),(0,h.disableChangeEvents)())}get moduleList(){const e=this.modules;return Object.keys(e).map(t=>e[t])}enabledModules(){return n.default.modules.map(e=>this.modules[e]).filter(e=>e.isEnabled)}setupPrefs(){return(a.default.init||Promise.resolve.bind(Promise))().then(()=>{(0,h.setInstallDatePref)(d.default.getServerDay()),("development"===n.default.environment||this.debug)&&a.default.set("developer",!0),(0,h.setOurOwnPrefs)(this.version),"default_prefs"in n.default&&Object.keys(n.default.default_prefs).forEach(e=>{a.default.has(e)||(l.default.log("App","set up preference",`"${e}"`),a.default.set(e,n.default.default_prefs[e]))}),_(),this.prefchangeEventListener=(0,i.subscribe)("prefchange",this.onPrefChange,this)})}restorePrefs(){(0,h.resetOriginalPrefs)()}prepareServices(e){return Promise.all(e.map(e=>this.services[e].init()))}unloadServices(){Object.keys(this.services).forEach(e=>{try{this.services[e].unload()}catch(e){l.default.log("App","error unloading service",e)}})}loadModule(e){return e.isEnabled||e.isEnabling?(l.default.log("App","loadModule","module already loaded"),e.isReady()):(e.markAsEnabling(),this.prepareServices(e.requiredServices).then(()=>e.enable(this).catch(t=>l.default.error("App","Error on loading module:",e.name,t)),e=>l.default.error("App","Error on loading services",e)))}load(){l.default.log("App","Loading modules started");const e=this.moduleList,t=e.find(e=>"core"===e.name),r=e.filter(e=>"core"!==e.name&&m(e.name));return this.loadModule(t).then(()=>{Promise.all(r.map(e=>this.loadModule(e))).then(()=>{l.default.log("App","Loading modules -- all loaded"),this._startedDefer.resolve()}).catch(e=>{l.default.error("App","Loading modules failed",e),this._startedDefer.reject(e)})})}unload(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{quick:!1}).quick;this.prefchangeEventListener&&this.prefchangeEventListener.unsubscribe(),l.default.log("App","unload background modules"),this.enabledModules().reverse().forEach(t=>{try{l.default.log("App","unload background module: ",t.name),t.disable({quick:e})}catch(e){l.default.error(`Error unloading module: ${t.name}`,e)}}),l.default.log("App","unload background modules finished"),l.default.log("App","unload services"),this.unloadServices(),l.default.log("App","unload services finished")}loadWindow(e){if(!e.CLIQZ){const t={config:n.default,startedAt:Date.now(),app:this,Core:{}};Object.defineProperty(e,"CLIQZ",{configurable:!0,value:t})}const t=this.moduleList.find(e=>"core"===e.name),r=this.moduleList.filter(e=>"core"!==e.name&&!e.isDisabled);return t.loadWindow(e).then(()=>Promise.all(r.map(t=>t.loadWindow(e).catch(e=>l.default.error("App","error loading window module",t.name,e))))).then(()=>{l.default.log("App","Window loaded");const t=new h.Window(e).id;s.default.pub("app:window-loaded",{windowId:t}),e.CLIQZ.loadedAt=Date.now(),e.CLIQZ.loadingTime=e.CLIQZ.loadedAt-e.CLIQZ.startedAt,this.isFullyLoaded=!0}).catch(e=>{l.default.error("App window","Error loading (should not happen!)",e)})}unloadWindow(e,t){l.default.log("App window","unload window modules"),this.enabledModules().reverse().forEach(r=>{try{r.unloadWindow(e,t)}catch(e){l.default.error("App window",`error on unload module ${r.name}`,e)}}),delete e.CLIQZ}onPrefChange(e){if("showConsoleLogs"===e&&_(),!e.startsWith("modules."))return;const t=e.split(".");if("enabled"!==t.pop())return;const r=!0===a.default.get(e),n=!r,i=t.pop(),s=this.modules[i];s&&(r&&s.isDisabled?this.enableModule(s.name):n&&!s.isDisabled&&this.disableModule(s.name))}enableModule(e){const t=this.modules[e];return a.default.set(`modules.${e}.enabled`,!0),t.isEnabled||!this.isRunning?Promise.resolve():(t.isEnabling?t.isReady():this.loadModule(t)).then(()=>Promise.all((0,h.mapWindows)(t.loadWindow.bind(t))))}disableModule(e){const t=this.modules[e];if(a.default.set(`modules.${e}.enabled`,!1),t.isDisabled||!this.isRunning)return Promise.resolve();const r=()=>{(0,h.forEachWindow)(t.unloadWindow),t.disable()};return t.isEnabling?t.isReady().then(r):(r(),Promise.resolve())}ready(){return this._startedDefer.promise}}},,,,,function(e,t,r){var n;e.exports=function e(t,r,i){function s(o,u){if(!r[o]){if(!t[o]){var c="function"==typeof n&&n;if(!u&&c)return n(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[o]={exports:{}};t[o][0].call(d.exports,function(e){var r=t[o][1][e];return s(r||e)},d,d.exports,e,t,r,i)}return r[o].exports}for(var a="function"==typeof n&&n,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./server"),s=c(i),a=e("./uuid"),o=c(a),u=e("./helpers");function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){return console.error.bind(console)},d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.errorLogger;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sendFunction=t,this.callbacks=new Map,this.errorLogger=n||l(),this.listeners=[this]}return n(e,[{key:"send",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=void 0,s=(0,o.default)(),a=new Promise(function(e){i=e});return this.callbacks.set(s,function(){return i.apply(void 0,arguments)}),this.sendFunction({action:e,args:r,uuid:s}),a}},{key:"createProxy",value:function(){return new Proxy(this,{get:function(e,t){return e.send.bind(e,t)}})}},{key:"dispatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.callbacks.get(e.uuid);return!(!t||t&&!(0,u.has)(e,"response")||(t(e.response),this.callbacks.delete(e.uuid),0))}},{key:"handleMessage",value:function(e){return this.listeners.some(function(t){try{return t.dispatch(e)}catch(e){return t.errorLogger("Spanan dispatch error",e),!1}})}},{key:"export",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.filter,i=r.transform,a=r.respond,o=r.errorLogger,u=new s.default({actions:e,respond:a,filter:n,transform:i,errorLogger:o||l(),onTerminate:function(){t.listeners=t.listeners.filter(function(e){return e!==u})}});return this.listeners.push(u),u}},{key:"reset",value:function(){this.listeners=[]}}]),e}();r.default=d},{"./helpers":1,"./server":3,"./uuid":4}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./helpers"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.actions,n=void 0===r?{}:r,i=t.respond,s=void 0===i?function(){}:i,a=t.filter,o=void 0===a?function(){return!0}:a,u=t.transform,c=void 0===u?function(e){return e}:u,l=t.errorLogger,d=t.onTerminate,h=void 0===d?function(){}:d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actions=n,this.onTerminate=h,this.dispatch=this.dispatch.bind(this),this.filter=o,this.transform=c,this.respond=s,this.errorLogger=l}return n(e,[{key:"dispatch",value:function(e){var t,r=this;if(!this.filter||!this.filter(e))return!1;var n=this.transform(e),s=n.args,a=void 0===s?[]:s,o=n.action;if(!(0,i.has)(this.actions,o))return!1;var u=(t=this.actions)[o].apply(t,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a));return u instanceof Promise||(u=Promise.resolve(u)),u.then(function(t){return r.respond(t,e)}),!0}},{key:"terminate",value:function(){this.onTerminate()}}]),e}();r.default=s},{"./helpers":1}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return[e(),e(),"-",e(),"-",e(),"-",e(),"-",e(),e(),e()].join("")}},{}]},{},[2])(2)},function(e,t){e.exports=function(e){let t,r="";return Array.prototype.join,r+='<!doctype html>\n<html>\n<head>\n\t<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n\t<style>\n\t\tbody {\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\t\tp {\n\t\t\tmargin: 3px;\n\t\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\t\tfont-size: 13px;\n\t\t}\n\t\ttable {\n\t\t\tborder-spacing: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\ttext-align: center;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\ttd {\n\t\t\tpadding: 0;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<table>\n\t\t<tr>\n\t\t\t<td>\n\n\t\t\t\t',e.button?r+=`\n\n\t\t\t\t\t<a id="action-once" href="#" onclick="return false">\n\t\t\t\t\t\t<img id="ghostery-button" src="${null==(t=e.allow_once_src)?"":t}" title="${null==(t=e.allow_once_title)?"":t}">\n\t\t\t\t\t</a>\n\n\t\t\t\t`:(r+="\n\n\t\t\t\t\t",void 0!==e.click2play_text&&e.click2play_text&&(r+=`\n\t\t\t\t\t\t<p id="text">${null==(t=e.click2play_text)?"":t}</p>\n\t\t\t\t\t`),r+=`\n\n\t\t\t\t\t<img id="ghostery-blocked" src="${null==(t=e.ghostery_blocked_src)?"":t}" title="${null==(t=e.ghostery_blocked_title)?"":t}">\n\n\t\t\t\t\t<a id="action-once" href="#" onclick="return false"><img src="${null==(t=e.allow_once_src)?"":t}" title="${null==(t=e.allow_once_title)?"":t}"></a>\n\n\t\t\t\t\t`,!1===e.blacklisted&&(r+=`\n\t\t\t\t\t\t<a id="action-always" href="#" onclick="return false"><img src="${null==(t=e.allow_always_src)?"":t}" title="${null==(t=e.allow_always_title)?"":t}"></a>\n\t\t\t\t\t`),r+="\n\n\t\t\t\t"),r+"\n\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</body>\n</html>\n"}},function(e,t,r){"use strict";var n=r(186);function i(){}var s={},a=["REJECTED"],o=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){n(function(){var n;try{n=t(r)}catch(t){return s.reject(e,t)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function i(t){r||(r=!0,s.resolve(e,t))}var a=p(function(){t(i,n)});"error"===a.status&&n(a.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}e.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(i);this.state!==u?d(r,this.state===o?e:t,this.outcome):this.queue.push(new l(r,e,t));return r},l.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){s.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=p(h,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)f(e,n);else{e.state=o,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=function(e){if(e instanceof this)return e;return s.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return s.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var a=new Array(r),o=0,u=-1,c=new this(i);for(;++u<r;)l(e[u],u);return c;function l(e,i){t.resolve(e).then(function(e){a[i]=e,++o!==r||n||(n=!0,s.resolve(c,a))},function(e){n||(n=!0,s.reject(c,e))})}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var a=-1,o=new this(i);for(;++a<r;)u(e[a]);return o;function u(e){t.resolve(e).then(function(e){n||(n=!0,s.resolve(o,e))},function(e){n||(n=!0,s.reject(o,e))})}}},function(e,t,r){"use strict";e.exports={App:r(444).default,config:r(22).default}},,,,function(e,t,r){"use strict";r.r(t);var n=r(16),i=r.n(n),s=r(56),a=r.n(s),o=r(179),u=r(29),c=r(44),l=r(57),d=r(1),h=r(3),f=r(8),p=r(2);const{BROWSER_INFO:m,CMP_SUB_DOMAIN:_,EXTENSION_VERSION:g}=h.a,y="edge"===h.a.BROWSER_INFO.name;var v=new class{constructor(){this.CMP_DATA=[]}fetchCMPData(){if(!d.a.show_cmp)return Promise.resolve(!1);const e=`https://${_}.ghostery.com/check\n\t\t\t?os=${encodeURIComponent(m.os)}\n\t\t\t&offers=${encodeURIComponent(d.a.enable_offers?"1":"0")}\n\t\t\t&hw=${encodeURIComponent(y?"2":d.a.enable_human_web?"1":"0")}\n\t\t\t&install_date=${encodeURIComponent(d.a.install_date)}\n\t\t\t&ir=${encodeURIComponent(d.a.install_random_number)}\n\t\t\t&gv=${encodeURIComponent(g)}\n\t\t\t&si=${encodeURIComponent(d.a.account?"1":"0")}\n\t\t\t&ua=${encodeURIComponent(m.name)}\n\t\t\t&lc=${encodeURIComponent(d.a.last_cmp_date)}\n\t\t\t&v=${encodeURIComponent(d.a.cmp_version)}\n\t\t\t&l=${encodeURIComponent(d.a.language)}`;return Object(f.getJson)(e).then(e=>e&&(!d.a.cmp_version||e.Version>d.a.cmp_version)?(e.Campaigns.forEach(e=>{0===e.Dismiss&&(e.Dismiss=10),(!d.a.last_cmp_date||d.a.last_cmp_date<e.Timestamp)&&(d.a.last_cmp_date=e.Timestamp)}),d.a.cmp_version=e.Version,h.a.SESSION.cmp_data=this.CMP_DATA=e.Campaigns,this.CMP_DATA):(Object(p.log)("No CMP data to fetch at this time"),h.a.SESSION.cmp_data=[],!1)).catch(e=>(Object(p.log)("Error in fetchCMPData",e),!1))}},b=r(38);var $=new class{constructor(){this.latencies={}}logLatency(e){const t=e.requestId,r=e.tabId;if(!this.latencies.hasOwnProperty(t))return 0;if(i.a.isEmpty(this.latencies[t]))return delete this.latencies[t],0;if(!this.latencies[t].hasOwnProperty(e.url))return 0;const{start_time:n,bug_id:s}=this.latencies[t][e.url];delete this.latencies[t][e.url],i.a.isEmpty(this.latencies[t])&&delete this.latencies[t];const a="net::ERR_BLOCKED_BY_CLIENT"===e.error||e.redirectUrl&&!e.redirectUrl.startsWith("http");let o=Math.round(e.timeStamp-n);const u=b.a.checkLatencyIssue(r,s,o);return a&&(o=-1),u}},w=r(64),k=r(200),M=r(10),S=r(180);const O=chrome.i18n.getMessage;var x=class{constructor(){this.policy=new w.c,this.channelsSupported="object"==typeof chrome.runtime.onConnect,this.ports=new Map}createBox(e){const t=M.a.getTabInfo(e);return!d.a.show_alert||h.a.SESSION.paused_blocking||d.a.hide_alert_trusted&&this.policy.whitelisted(t.url)||!t||t.purplebox||t.path.includes("_/chrome/newtab")||"about"===t.protocol||h.a.EXCLUDES.includes(t.host)?Promise.resolve(!1):(M.a.setTabInfo(e,"purplebox",!0),this.createBoxParams={conf:{alert_expanded:d.a.alert_expanded,alert_bubble_pos:d.a.alert_bubble_pos,alert_bubble_timeout:d.a.alert_bubble_timeout},translations:{looking:O("box_looking"),trackers:O("box_trackers"),box_warning_compatibility:O("box_warning_compatibility"),box_warning_slow:O("box_warning_slow"),box_warning_nonsecure:O("box_warning_nonsecure"),tracker:O("box_tracker"),hide:O("box_hide"),settings:O("box_settings"),options_expanded:O("box_options_expanded"),hide_expanded:O("box_hide_expanded"),settings_expanded:O("box_settings_expanded"),box_dismiss_0s:O("box_dismiss_0s"),box_dismiss_5s:O("box_dismiss_5s"),box_dismiss_15s:O("box_dismiss_15s"),box_dismiss_30s:O("box_dismiss_30s"),box_display_br:O("box_display_br"),box_display_tr:O("box_display_tr"),box_display_tl:O("box_display_tl"),box_display_bl:O("box_display_bl")}},this.channelsSupported&&(this.ports.has(e)&&(this.ports.get(e).disconnect(),this.ports.delete(e)),this.connectListenerAdded||(this.connectListenerAdded=!0,chrome.runtime.onConnect.addListener(e=>{if(e&&"purpleBoxPort"===e.name&&e.sender&&e.sender.tab&&e.sender.tab.id){const t=e.sender.tab.id;this.ports.has(t)||(this.ports.set(t,e),this.ports.get(t).onMessage.addListener(e=>{"purpleBoxLoaded"===e.name?this.ports.get(t).postMessage({name:"createBox",message:this.createBoxParams}):"onCreateBox"===e.name?this.updateBox(t):"onDestroyBox"===e.name?this.destroyBox(t):"updateAlertConf"===e.name&&(d.a.alert_expanded=e.message.alert_expanded,d.a.alert_bubble_pos=e.message.alert_bubble_pos,d.a.alert_bubble_timeout=e.message.alert_bubble_timeout,S.a.pushUserSettings())}))}}))),Object(f.injectScript)(e,"dist/purplebox.js","dist/css/purplebox_styles.css","document_start").then(()=>{this.channelsSupported||Object(f.sendMessage)(e,"createBox",this.createBoxParams,()=>chrome.runtime.lastError?(Object(p.log)("createBox sendMessage error",chrome.runtime.lastError),!1):(this.updateBox(e),!0))}).catch(e=>(Object(p.log)("Purplebox injectScript error",e),!1)))}updateBox(e,t){const r=M.a.getTabInfo(e),n=b.a.getApps(e,!0,r.url,t);return!(!n||0===n.length||h.a.EXCLUDES.includes(r.host))&&(this.channelsSupported?this.ports.has(e)?(this.ports.get(e).postMessage({name:"updateBox",message:{apps:n}}),!0):(Object(p.log)("updateBox failed. Port is null"),!1):void Object(f.sendMessage)(e,"updateBox",{apps:n},()=>{chrome.runtime.lastError&&Object(p.log)("updateBox sendMessage failed",chrome.runtime.lastError,r)}))}destroyBox(e){const t=M.a.getTabInfo(e);if(t&&!h.a.EXCLUDES.includes(t.host))return this.channelsSupported&&this.ports.has(e)&&(this.ports.get(e).disconnect(),this.ports.delete(e)),M.a.setTabInfo(e,"purplebox",!1),!0}},T=r(96);var E=new class extends T.a{constructor(e){super(e),this.db={pattern_ids:{},app_ids:{},site_surrogates:{}}}update(){}processList(e,t){Object(p.log)("processing surrogates..."),t.mappings.forEach(e=>{e.code=t.surrogates[e.sid],["pattern_id","app_id","sites","match"].forEach(t=>{e.hasOwnProperty(t)&&!i.a.isArray(e[t])&&(e[t]=[e[t]])}),e.hasOwnProperty("match")&&(e.match=i.a.map(e.match,e=>new RegExp(e,""))),e.hasOwnProperty("pattern_id")||e.hasOwnProperty("app_id")?e.hasOwnProperty("pattern_id")?this._buildDb(e,"pattern_id","pattern_ids"):e.hasOwnProperty("app_id")&&this._buildDb(e,"app_id","app_ids"):e.hasOwnProperty("sites")&&this._buildDb(e,"sites","site_surrogates")}),Object(p.log)("processed surrogates..."),e||(d.a.surrogates=t)}getForTracker(e,t,r,n){let s=[];return this.db.app_ids.hasOwnProperty(t)&&(s=s.concat(this.db.app_ids[t])),this.db.pattern_ids.hasOwnProperty(r)&&(s=s.concat(this.db.pattern_ids[r])),i.a.filter(s,t=>!(t.hasOwnProperty("sites")&&!t.sites.includes(n)||t.hasOwnProperty("match")&&!i.a.any(t.match,t=>e.match(t))))}_buildDb(e,t,r){e[t].forEach(t=>{this.db[r].hasOwnProperty(t)||(this.db[r][t]=[]),this.db[r][t].push(e)})}}("surrogates"),D=r(450),L=r.n(D);const P=new w.c;function A(e,t){const{tab_id:r}=e;let n=l.a.db.apps&&l.a.db.apps[t];if(!n)return;if(d.a.enable_click2play_social||(n=i.a.reject(n,e=>!!e.button)),!n.length)return;const s=u.a.db.apps[t].name,a=[],o=M.a.getTabInfo(r,"host"),c=!!P.blacklisted(o),m=[];for(let e=0;e<n.length;e++)if(n[e].button){let t=`app/images/click2play/${n[e].button}`;t=t.replace(".png",".data"),m.push(R(t))}m.push(R("app/images/click2play/ghosty_blocked.data")),m.push(R("app/images/click2play/allow_unblock.data")),m.push(R("app/images/click2play/allow_once.data")),Promise.all(m).catch(e=>{Object(p.log)("buildC2P error",e)}).then(()=>{n.forEach(e=>{const r={blacklisted:c,button:!!e.button,ghostery_blocked_src:d.a.ghosty_blocked_data,allow_always_src:d.a.allow_unblock_data,allow_always_title:chrome.i18n.getMessage("click2play_allow_always_tooltip",void 0)};if(e.button){r.allow_once_title=function(e,t){return chrome.i18n.getMessage("click2play_allow_once_button_tooltip",t)}(0,s);let t=`app/images/click2play/${e.button}`;const n=(t=t.replace(".png",".data")).slice(t.lastIndexOf("/")+1).replace(".","_");r.allow_once_src=d.a[n]}else r.allow_once_title=chrome.i18n.getMessage("click2play_allow_once_tooltip",void 0),r.allow_once_src=d.a.allow_once_data,r.ghostery_blocked_title=function(e,t){return chrome.i18n.getMessage("click2play_blocked",t)}(0,s),e.type?r.click2play_text=function(e,t){return chrome.i18n.getMessage(e,t)}(`click2play_${e.type}_form`,s):2575===t&&(r.click2play_text=function(e,t){return chrome.i18n.getMessage("click2play_blocked",t)}(0,s));a.push(L()(r))}),2575===t&&(n.ele=function(e){return`form[id="hsForm_${e.substr(8).split(/\/|\&|\?|\#|\=/gi)[5]}"]`}(e.url)),function(e){if(h.a.C2P_LOADED)return Promise.resolve(!0);const t=M.a.getTabInfo(e);if(!t||t.prefetched||t.path.includes("_/chrome/newtab")||"about"===t.protocol||h.a.EXCLUDES.includes(t.host))return Promise.resolve(!0);return Object(f.injectScript)(e,"dist/click_to_play.js","","document_end").then(()=>(h.a.C2P_LOADED=!0,!0)).catch(e=>(Object(p.log)("_injectClickToPlay error",e),!1))}(r).then(e=>{e&&Object(f.sendMessage)(r,"c2p",{app_id:t,data:n,html:a})})}).catch(e=>{Object(p.log)("Click2Play error",e)})}function j(e,t){const{selected_app_ids:r}=d.a;if(delete r[e],d.a.selected_app_ids=r,d.a.site_specific_blocks.hasOwnProperty(t)&&d.a.site_specific_blocks[t].includes(+e)){const r=d.a.site_specific_blocks[t].indexOf(+e),{site_specific_blocks:n}=d.a;n[t].splice(r),d.a.site_specific_blocks=n}const{site_specific_unblocks:n}=d.a;n.hasOwnProperty(t)||(n[t]=[]),n[t].includes(e)||n[t].push(e),d.a.site_specific_unblocks=n}function R(e){const t=chrome.extension.getURL(e),r=t.slice(t.lastIndexOf("/")+1).replace(".","_");return Object(f.fetchLocalImageResource)(t).then(e=>(d.a[r]=e,!0)).catch(e=>(Object(p.log)(`click2play _getImage error: ${e}`),!1))}var I=r(199);const C=new Map;var Y=class{constructor(){this.policy=new w.c,this.policySmartBlock=new k.a,this.purplebox=new x,this._throttleButtonUpdate=i.a.throttle(()=>{c.a.update()},1e3,{leading:!1})}onBeforeNavigate(e){const{tabId:t,frameId:r,url:n}=e;0===r&&(Object(p.log)(`❤ ❤ ❤ Tab ${t} navigating to ${n} ❤ ❤ ❤`),C.clear(),this._clearTabData(t),this._resetNotifications(),M.a.create(t,n),b.a.update(t),c.a.update(t),setTimeout(()=>{f.getTab(t,null,()=>{Object(p.log)("Clearing orphan tab data for tab",t),this._clearTabData(t),this._resetNotifications()})},12e4))}onCommitted(e){const{tabId:t,frameId:r,transitionType:n,transitionQualifiers:i}=e;0===r&&("reload"!==n||i.includes("forward_back")?"auto_subframe"!==n&&"manual_subframe"!==n&&(M.a.setTabInfo(t,"reloaded",!1),M.a.setTabInfo(t,"numOfReloads",0)):M.a.setTabInfo(t,"numOfReloads",M.a.getTabInfo(t,"numOfReloads")+1),f.getTab(t,e=>{e&&(M.a.setTabInfo(t,"incognito",e.incognito),this._createBox(t))},()=>{f.getActiveTab(e=>{e&&M.a.setTabInfo(t,"incognito",e.incognito),M.a.setTabInfo(t,"prefetched",!0)})}))}onDOMContentLoaded(e){const t=e.tabId;f.isValidTopLevelNavigation(e)&&f.getActiveTab(r=>{if(!r||r.id!==t||r.incognito)return;const n=["notification_library_update","notification_library_update_link","notification_upgrade","notification_upgrade_link","notification_upgrade_title_v8","notification_upgrade_v8","notification_upgrade_link_v8"];if(0!==v.CMP_DATA.length){const n=v.CMP_DATA,i=n.length;let s,a;for(let t=0;t<i;t++){const r=n[t];if(f.isCliqzOffer(r)){const n=r.data.offer_info.offer_urls;if(n instanceof Array){const i=n.length;for(let a=0;a<i;a++)if(n[a]===e.url){(s=r).index=t;break}if(s)break}else s||((s=r).index=t)}else d.a.show_cmp&&(a||((a=r).index=t))}let o=s||a||void 0;if(!o)return;const{index:u}=o;o=v.CMP_DATA[u],f.injectNotifications(r.id).then(e=>{e&&f.sendMessage(t,"showCMPMessage",{data:o},()=>{o.Dismiss--,o.Dismiss<=0&&v.CMP_DATA.splice(u,1)})})}else h.a.JUST_UPGRADED&&!h.a.HOTFIX&&!h.a.upgrade_alert_shown&&d.a.notify_upgrade_updates?f.injectNotifications(r.id).then(e=>{e&&f.sendMessage(t,"showUpgradeAlert",{translations:i.a.object(i.a.map(n,e=>[e,chrome.i18n.getMessage(e)])),language:d.a.language,major_upgrade:h.a.JUST_UPGRADED_FROM_7},()=>{h.a.upgrade_alert_shown=!0})}):u.a.db.JUST_UPDATED_WITH_NEW_TRACKERS&&(d.a.notify_library_updates?f.injectNotifications(r.id).then(e=>{e&&f.sendMessage(t,"showLibraryUpdateAlert",{translations:i.a.object(i.a.map(n,e=>[e,chrome.i18n.getMessage(e)])),language:d.a.language},()=>{u.a.db.JUST_UPDATED_WITH_NEW_TRACKERS=!1})}):u.a.db.JUST_UPDATED_WITH_NEW_TRACKERS=!1)})}onNavigationCompleted(e){f.isValidTopLevelNavigation(e)&&(C.clear(),Object(p.log)(`foundBugs: ${b.a.getAppsCount(e.tabId)}, tab_id: ${e.tabId}`),this._isValidUrl(f.processUrl(e.url))&&f.injectScript(e.tabId,"dist/page_performance.js","","document_idle").catch(e=>{Object(p.log)("onNavigationCompleted injectScript error",e)}),setTimeout(()=>{this._eventReset(e.tabId)},2e3))}onNavigationErrorOccurred(e){const t=e.tabId;f.isValidTopLevelNavigation(e)?this._eventReset(t):e.url.startsWith("https://chrome.google.com/webstore/")&&(this._clearTabData(t),this._resetNotifications())}onBeforeRequest(e){const t=e.tabId,r=e.requestId;if(t<=0)return{cancel:!1};if(M.a.getTabInfo(t)||(Object(p.log)(`tabInfo not found for tab ${t}, initializing...`),"main_frame"===e.type?M.a.create(t,e.url):M.a.create(t),f.getTab(t,e=>{const r=M.a.getTabInfo(t);r&&(r.partialScan&&M.a.setTabInfo(t,"url",e.url),M.a.setTabInfo(t,"incognito",e.incognito))})),!this._checkRedirect(e.type,r))return{cancel:!1};const n=M.a.getTabInfo(t,"url"),i=M.a.getTabInfo(t,"host"),s=M.a.getTabInfo(t,"protocol"),a=h.a.REDIRECT_MAP.has(r),o=n?Object(I.b)(e.url,n):Object(I.b)(e.url),c=f.processUrl(e.url);if(this.policySmartBlock.isInsecureRequest(t,s,c.protocol,c.host))return this._blockHelper(e,t,null,null,r,a,!0);if(!o)return this._throttleButtonUpdate(),{cancel:!1};if(e.ghosteryBug=o,this.policySmartBlock.isFirstPartyRequest(t,i,c.host))return{cancel:!1};const l=u.a.db.bugs[o].aid,d=u.a.db.apps[l].cat,m=M.a.getTabInfo(t,"incognito"),_=M.a.getTabInfo(t,"host"),g=h.a.REDIRECT_MAP.has(r),{block:y,reason:v}=this._checkBlocking(l,d,t,_,n,r);return y||v!==w.b||(e.ghosteryWhitelisted=!0),!1===y&&($.latencies[r]=$.latencies[r]||{},$.latencies[r][e.url]={start_time:Math.round(e.timeStamp),bug_id:o,page_url:n,incognito:m}),setTimeout(()=>{this._processBug({bug_id:o,app_id:l,type:e.type,url:e.url,block:y,tab_id:t,from_frame:-1!==e.parentFrameId})},1),y?this.policySmartBlock.shouldUnblock(l,d,t,n,e.type)?{cancel:!1}:this._blockHelper(e,t,l,o,r,g):this.policySmartBlock.shouldBlock(l,d,t,n,e.type,e.timeStamp)?this._blockHelper(e,t,l,o,r):{cancel:!1}}onBeforeSendHeaders(e){for(let t=0;t<e.requestHeaders.length;++t)("origin"===e.requestHeaders[t].name.toLowerCase()&&e.requestHeaders[t].value.startsWith("moz-extension://")||"cookie"===e.requestHeaders[t].name.toLowerCase())&&(e.requestHeaders[t].value="");return{requestHeaders:e.requestHeaders}}onHeadersReceived(e){e.statusCode}onBeforeRedirect(e){"main_frame"===e.type&&(M.a.setTabInfo(e.tabId,"url",e.redirectUrl),h.a.REDIRECT_MAP.set(e.requestId,{url:e.url,redirectUrl:e.redirectUrl}));const t=$.logLatency(e);t&&this.purplebox.updateBox(e.tabId,t)}onRequestCompleted(e){if(e&&!(e.tabId<=0)&&(this._clearRedirects(e.requestId),"main_frame"!==e.type)){const t=$.logLatency(e);t&&this.purplebox.updateBox(e.tabId,t)}}onRequestErrorOccurred(e){$.logLatency(e),this._clearRedirects(e.requestId)}onTabCreated(){}onTabActivated(e){c.a.update(e.tabId),this._resetNotifications()}onTabReplaced(e){M.a.getTabInfo(e,"prefetched")?(M.a.setTabInfo(e,"prefetched",!1),this._createBox(e)):(b.a.update(e),c.a.update(e)),Object(p.log)("chrome.tabs.onReplaced",M.a.getTabInfo(e))}onTabRemoved(e){this._clearTabData(e),this._resetNotifications()}_processBug(e){const{bug_id:t,app_id:r,type:n,url:i,block:s,tab_id:a}=e,o=M.a.getTabInfo(a);let u;Object(p.log)(s?"Blocked":"Found",n,i),Object(p.log)(`^^^ Pattern ID ${t} on tab ID ${a}`),d.a.show_alert&&(u=b.a.getAppsCount(a)),b.a.update(a,t,i,s,n),c.a.update(e.tab_id),s&&(d.a.enable_click2play||d.a.enable_click2playSocial)&&A(e,r),d.a.show_alert&&o&&!o.prefetched&&o.purplebox&&(b.a.getAppsCount(e.tab_id)>u||l.a.allowedOnce(e.tab_id,r))&&this.purplebox.updateBox(e.tab_id,r)}_blockHelper(e,t,r,n,s,a,o){if(o){const r=M.a.getTabInfo(t,"insecureRedirects");return r.indexOf(s)>=0?{cancel:!0}:(r.push(s),M.a.setTabInfo(t,"insecureRedirects",r),{redirectUrl:e.url.replace(/^http:/,"https:")})}if("sub_frame"===e.type)return{redirectUrl:"about:blank"};if("image"===e.type)return{redirectUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="};if("script"===e.type&&n){let s="";if(2575===r)s=this._getHubspotFormSurrogate(e.url);else{const a=M.a.getTabInfo(t),o=E.getForTracker(e.url,r,n,a.host);o.length>0&&(s=i.a.reduce(o,(e,t)=>e+=t.code,""))}if(s){const e=`data:application/javascript;base64,${btoa(s)}`;return Object(p.log)("NEW SURROGATE",r),{redirectUrl:e}}}else if(a){const t=function(e,t,r){const n=Object(f.processUrl)(t.url).host,i=Object(f.processUrl)(t.redirectUrl).host,s=u.a.db.apps[r].name;return h.a.BLOCKED_REDIRECT_DATA={},h.a.BLOCKED_REDIRECT_DATA.app_id=r,h.a.BLOCKED_REDIRECT_DATA.url=t.redirectUrl,h.a.BLOCKED_REDIRECT_DATA.blacklisted=!!P.blacklisted(n),h.a.BLOCKED_REDIRECT_DATA.translations={blocked_redirect_page_title:chrome.i18n.getMessage("blocked_redirect_page_title",void 0),blocked_redirect_prevent:function(e,t){return chrome.i18n.getMessage("blocked_redirect_prevent",t)}(0,[n,i,s,`https://${h.a.APPS_SUB_DOMAIN}.ghostery.com/en/apps/${encodeURIComponent(s.replace(/\s+/g,"_").toLowerCase())}`]),blocked_redirect_action_always_title:chrome.i18n.getMessage("blocked_redirect_action_always_title",void 0),blocked_redirect_action_through_once_title:chrome.i18n.getMessage("blocked_redirect_action_through_once_title",void 0),blocked_redirect_url_content:function(e,t){return chrome.i18n.getMessage("blocked_redirect_url_content",t)}(0,[t.redirectUrl,s])},chrome.extension.getURL("app/templates/blocked_redirect.html")}(0,h.a.REDIRECT_MAP.get(s),r);setTimeout(()=>{chrome.tabs.update(e.tabId,{url:t})},0)}return{cancel:!0}}_isValidUrl(e){return!(!(e.protocol.startsWith("http")&&e.host.includes(".")&&/[A-Za-z]/.test(e.host))||e.path.includes("_/chrome/newtab"))}_getHubspotFormSurrogate(e){const t=e.substr(8).split(/\/|\&|\?|\#|\=/gi);return`${t[7]}({"form":{"portalId":${t[4]},"guid": "${t[5]}","cssClass":"hs-form stacked","formFieldGroups":[{"fields":[{}]}],"metaData":[]},"properties":{}})`}_clearTabData(e){b.a.clear(e),M.a.clear(e)}_clearRedirects(e){h.a.REDIRECT_MAP.delete(e),h.a.LET_REDIRECTS_THROUGH=!1}_checkRedirect(e,t){const r=h.a.REDIRECT_MAP.has(t);return!("main_frame"===e&&!r)}_checkBlocking(e,t,r,n,i,s){let a;return a=h.a.REDIRECT_MAP.has(s)&&h.a.LET_REDIRECTS_THROUGH?{block:!1,reason:w.a}:this.policy.shouldBlock(e,t,r,n,i)}_eventReset(e){l.a.reset(e),h.a.REDIRECT_MAP.clear(),h.a.LET_REDIRECTS_THROUGH=!1}_createBox(e){this.purplebox.createBox(e).then(()=>{b.a.update(e),c.a.update(e)}).catch(e=>{Object(p.log)("Purplebox creation failed:",e)})}_resetNotifications(){h.a.C2P_LOADED=h.a.NOTIFICATIONS_LOADED=!1}},F=r(30);const N=new Set(h.a.SYNC_ARRAY),U="edge"===h.a.BROWSER_INFO.name,{IS_CLIQZ:q}=h.a,H=new w.c;var z=class{constructor(){this._confData=new Map,this._trackerData=new Map,this._panelView={},this._summaryView={},this._blockingView={},this._rewardsView={},this._settingsView={}}init(){this._buildConfData()}get(e,t){if(Object(p.log)(`Get data for ${e} view`),"settings"===e)return this.settingsView;switch(this._buildTrackerData(t),e){case"panel":return this.panelView;case"summary":return this.summaryView;case"blocking":return this.blockingView;case"rewards":return this.rewardsView;default:return!1}}set(e){let t=!1,r=!1;U&&(e.enable_human_web=!1,e.enable_offers=!1),q&&(e.enable_human_web=!1,e.enable_offers=!1,e.enable_ad_block=!1,e.enable_anti_tracking=!1);for(const[n,s]of Object(p.objectEntries)(e))d.a.hasOwnProperty(n)&&!i.a.isEqual(d.a[n],s)?(d.a[n]=s,N.has(n)?t=!0:r=!0):"paused_blocking"===n&&("number"==typeof s?(h.a.SESSION.paused_blocking=!0,h.a.SESSION.paused_blocking_timeout=s,setTimeout(()=>{h.a.SESSION.paused_blocking=!1,c.a.update(),Object(f.flushChromeMemoryCache)()},s)):(h.a.SESSION.paused_blocking=s,h.a.SESSION.paused_blocking_timeout=0),c.a.update(),Object(f.flushChromeMemoryCache)());e.needsReload&&Object(f.getActiveTab)(t=>{t&&t.id&&M.a.getTabInfo(t.id)&&M.a.setTabInfo(t.id,"needsReload",e.needsReload)}),t&&S.a.saveUserSettings().catch(e=>Object(p.log)("PanelData saveUserSettings",e)),r&&this._buildConfData()}get panelView(){return this._panelView={panel:{enable_ad_block:this._confData.get("enable_ad_block"),enable_anti_tracking:this._confData.get("enable_anti_tracking"),enable_smart_block:this._confData.get("enable_smart_block"),enable_offers:this._confData.get("enable_offers"),is_expanded:this._confData.get("is_expanded"),is_expert:this._confData.get("is_expert"),is_android:"android"===h.a.BROWSER_INFO.os,language:this._confData.get("language"),reload_banner_status:this._confData.get("reload_banner_status"),trackers_banner_status:this._confData.get("trackers_banner_status"),needsReload:this._trackerData.get("needsReload"),smartBlock:this._trackerData.get("smartBlock"),tab_id:this._trackerData.get("tab_id"),unread_offer_ids:F.a.unreadOfferIds,account:this._confData.get("account")},summary:this.summaryView,blocking:!!this._confData.get("is_expert")&&this.blockingView},this._panelView}get summaryView(){return this._summaryView={paused_blocking:h.a.SESSION.paused_blocking,paused_blocking_timeout:h.a.SESSION.paused_blocking_timeout,site_blacklist:this._confData.get("site_blacklist"),site_whitelist:this._confData.get("site_whitelist"),alertCounts:this._trackerData.get("alertCounts"),categories:this._trackerData.get("categories"),pageHost:this._trackerData.get("pageHost"),pageUrl:this._trackerData.get("pageUrl"),performanceData:this._trackerData.get("performanceData"),siteNotScanned:this._trackerData.get("siteNotScanned"),sitePolicy:this._trackerData.get("sitePolicy"),trackerCounts:this._trackerData.get("trackerCounts")},this._summaryView}get blockingView(){return this._blockingView={expand_all_trackers:this._confData.get("expand_all_trackers"),selected_app_ids:this._confData.get("selected_app_ids"),show_tracker_urls:this._confData.get("show_tracker_urls"),siteNotScanned:this._trackerData.get("siteNotScanned"),site_specific_blocks:this._confData.get("site_specific_blocks"),site_specific_unblocks:this._confData.get("site_specific_unblocks"),toggle_individual_trackers:this._confData.get("toggle_individual_trackers"),pageUrl:this._trackerData.get("pageUrl"),categories:this._trackerData.get("categories")},this._blockingView}get rewardsView(){return this._rewardsView={enable_offers:this._confData.get("enable_offers"),rewards:F.a.storedOffers,unread_offer_ids:F.a.unreadOfferIds},this._rewardsView}get settingsView(){return this._settingsView={alert_bubble_pos:this._confData.get("alert_bubble_pos"),alert_bubble_timeout:this._confData.get("alert_bubble_timeout"),block_by_default:this._confData.get("block_by_default"),bugs_last_updated:this._confData.get("bugs_last_updated"),categories:this._confData.get("categories"),enable_autoupdate:this._confData.get("enable_autoupdate"),enable_click2play:this._confData.get("enable_click2play"),enable_click2play_social:this._confData.get("enable_click2play_social"),enable_human_web:this._confData.get("enable_human_web"),enable_offers:this._confData.get("enable_offers"),enable_metrics:this._confData.get("enable_metrics"),hide_alert_trusted:this._confData.get("hide_alert_trusted"),ignore_first_party:this._confData.get("ignore_first_party"),notify_library_updates:this._confData.get("notify_library_updates"),notify_upgrade_updates:this._confData.get("notify_upgrade_updates"),offer_human_web:this._confData.get("offer_human_web"),selected_app_ids:this._confData.get("selected_app_ids"),new_app_ids:this._confData.get("new_app_ids"),settings_last_imported:this._confData.get("settings_last_imported"),settings_last_exported:this._confData.get("settings_last_exported"),show_alert:this._confData.get("show_alert"),show_badge:this._confData.get("show_badge"),show_cmp:this._confData.get("show_cmp"),show_tracker_urls:this._confData.get("show_tracker_urls"),toggle_individual_trackers:this._confData.get("toggle_individual_trackers"),language:this._confData.get("language"),loggedIn:this._confData.get("loggedIn"),firstName:this._confData.get("firstName"),lastName:this._confData.get("lastName")},this._settingsView}_buildConfData(){this._confData.set("alert_bubble_pos",d.a.alert_bubble_pos).set("alert_bubble_timeout",d.a.alert_bubble_timeout).set("block_by_default",d.a.block_by_default).set("bugs_last_updated",d.a.bugs_last_updated).set("categories",this._buildGlobalCategories()).set("enable_ad_block",d.a.enable_ad_block).set("enable_anti_tracking",d.a.enable_anti_tracking).set("enable_autoupdate",d.a.enable_autoupdate).set("enable_click2play",d.a.enable_click2play).set("enable_click2play_social",d.a.enable_click2play_social).set("enable_human_web",d.a.enable_human_web).set("enable_metrics",d.a.enable_metrics).set("enable_offers",d.a.enable_offers).set("enable_smart_block",d.a.enable_smart_block).set("hide_alert_trusted",d.a.hide_alert_trusted).set("ignore_first_party",d.a.ignore_first_party).set("is_expanded",d.a.is_expanded).set("is_expert",d.a.is_expert).set("language",d.a.language).set("notify_library_updates",d.a.notify_library_updates).set("notify_upgrade_updates",d.a.notify_upgrade_updates).set("offer_human_web",!U).set("paused_blocking",h.a.SESSION.paused_blocking).set("reload_banner_status",d.a.reload_banner_status).set("selected_app_ids",d.a.selected_app_ids).set("new_app_ids",d.a.new_app_ids).set("settings_last_imported",d.a.settings_last_imported).set("settings_last_exported",d.a.settings_last_exported).set("show_alert",d.a.show_alert).set("show_badge",d.a.show_badge).set("show_cmp",d.a.show_cmp).set("show_tracker_urls",d.a.show_tracker_urls).set("site_blacklist",d.a.site_blacklist).set("site_specific_blocks",d.a.site_specific_blocks).set("site_specific_unblocks",d.a.site_specific_unblocks).set("site_whitelist",d.a.site_whitelist).set("toggle_individual_trackers",d.a.toggle_individual_trackers).set("trackers_banner_status",d.a.trackers_banner_status).set("expand_all_trackers",d.a.expand_all_trackers).set("account",d.a.account)}_buildTrackerData(e){const t=e&&e.id,r=e&&e.url,n=e&&M.a.getTabInfo(t,"host")||"",i=b.a.getApps(t,!1,r)||[];this._trackerData.set("alertCounts",e&&b.a.getAppsCountByIssues(t,r)||{}).set("categories",this._buildCategories(t,r,n,i)).set("needsReload",e&&M.a.getTabInfo(t,"needsReload")||{changes:{}}).set("pageUrl",r||"").set("pageHost",n).set("performanceData",e&&M.a.getTabInfo(t,"pageTiming")).set("sitePolicy",e&&H.getSitePolicy(r)||!1).set("siteNotScanned",e&&!b.a.getApps(t)||!1).set("tab_id",t).set("trackerCounts",e&&b.a.getAppsCountByBlocked(t)||{}).set("smartBlock",M.a.getTabInfo(t,"smartBlock"))}_buildGlobalCategories(){const e=u.a.db.categories||[],t=d.a.selected_app_ids||{};return e.forEach(e=>{const{trackers:r}=e;e.num_blocked=0,r.forEach(r=>{r.blocked=t.hasOwnProperty(r.id),r.blocked&&e.num_blocked++})}),e}_buildCategories(e,t,r,n){const i=this._confData.get("selected_app_ids"),s=this._confData.get("site_specific_unblocks")[r]||[],a=this._confData.get("site_specific_blocks")[r]||[],o={},u=[],c=this._confData.get("enable_smart_block"),l=M.a.getTabInfo(e,"smartBlock");let d;for(d in n.forEach(e=>{let t=e.cat;const r=i.hasOwnProperty(e.id),n=s.includes(+e.id),u=a.includes(+e.id),d=c&&l.blocked.hasOwnProperty(`${e.id}`),h=c&&l.unblocked.hasOwnProperty(`${e.id}`);(function(e,t){return chrome.i18n.getMessage(e,void 0)})(`category_${t}`)===`category_${t}`&&(t="uncategorized"),o.hasOwnProperty(t)?(o[t].num_total++,(u||d||r&&!n&&!h)&&o[t].num_blocked++):o[t]={id:t,name:function(e,t){return chrome.i18n.getMessage(e,void 0)}(`category_${t}`),description:function(e,t){return chrome.i18n.getMessage(e,void 0)}(`category_${t}_desc`),img_name:"advertising"===t?"adv":"social_media"===t?"smed":t,num_total:1,num_blocked:u||d||r&&!n&&!h?1:0,trackers:[],expanded:this._confData.get("expand_all_trackers")},o[t].trackers.push({id:e.id,name:e.name,description:"",blocked:r,ss_allowed:n,ss_blocked:u,shouldShow:!0,catId:t,sources:e.sources,warningCompatibility:e.hasCompatibilityIssue,warningInsecure:e.hasInsecureIssue,warningSlow:e.hasLatencyIssue,warningSmartBlock:(l.blocked.hasOwnProperty(e.id)?"blocked":l.unblocked.hasOwnProperty(e.id)&&"unblocked")||!1})}),o)o.hasOwnProperty(d)&&u.push(o[d]);return u.sort((e,t)=>(e=e.name.toLowerCase())>(t=t.name.toLowerCase())?1:e<t?-1:0),u}};const{BROWSER_INFO:B,CMP_SUB_DOMAIN:W,EXTENSION_VERSION:V}=h.a;var G=new class{constructor(){this.tests={}}hasTest(e){return this.tests.hasOwnProperty(e)}fetch(){Object(p.log)("A/B Tests: fetching...");const e=`https://${W}.ghostery.com/abtestcheck\n\t\t\t?os=${encodeURIComponent(B.os)}\n\t\t\t&install_date=${encodeURIComponent(d.a.install_date)}\n\t\t\t&ir=${encodeURIComponent(d.a.install_random_number)}\n\t\t\t&gv=${encodeURIComponent(V)}\n\t\t\t&si=${d.a.account?"1":"0"}\n\t\t\t&ua=${encodeURIComponent(B.name)}\n\t\t\t&v=${encodeURIComponent(d.a.cmp_version)}\n\t\t\t&l=${encodeURIComponent(d.a.language)}`;return Object(f.getJson)(e).then(e=>{e&&Array.isArray(e)?(Object(p.log)("A/B Tests: fetched",JSON.stringify(e)),this.tests=e.reduce((e,t)=>Object.assign(e,{[t.name]:t.data}),{})):Object(p.log)("A/B Tests: no tests found."),h.a.SESSION.abtests=this.tests,Object(p.log)("A/B Tests: tests updated to",JSON.stringify(this.tests))}).catch(()=>{Object(p.log)("A/B Tests: error fetching.")})}},K=r(193),J=r(201),Q=r(182),Z=r(183),X=r(187),ee=r(449),te=r.n(ee);class re{addListener(e){chrome.runtime.onMessageExternal.addListener(e)}removeListener(e){chrome.runtime.onMessageExternal.removeListener(e)}sendMessage(e,t){chrome.runtime.sendMessage(e,t,()=>{})}}class ne{constructor(){this.messenger=new re,this.extensionId="cliqz@cliqz.com",this.moduleWrappers=new Map,this._messageHandler=this._messageHandler.bind(this)}init(){this.messenger.addListener(this._messageHandler)}unload(){this.messenger.removeListener(this._messageHandler)}module(e){return this.moduleWrappers.has(e)||this.moduleWrappers.set(e,this._createModuleWrapper(e)),this.moduleWrappers.get(e).createProxy()}_createModuleWrapper(e){return new te.a(t=>{t.moduleName=e,this.messenger.sendMessage(this.extensionId,t)})}_messageHandler(e,t){const r=JSON.parse(e);t.id===this.extensionId&&(this.moduleWrappers.has(r.moduleName)||Object(p.log)("KordInjector error: Unhandled message",r),this.moduleWrappers.get(r.moduleName).handleMessage(r))}}function ie(e,t){Object(p.log)("CliqzSettingsImport: Run Cliqz settings importer");const r=new ne;r.init();const n=r.module("privacy-migration");return Promise.race([n.exportSettings(),function(e){return new Promise((t,r)=>{setTimeout(r,e)})}(5e3)]).then(r=>{if("error"===r)return Promise.reject();Object(p.log)("CliqzSettingsImport:",r);const i=["antitracking","adblocker"];i.forEach(t=>{!0===r[t].enabled?(Object(p.log)(`CliqzSettingsImport: import ${t} state: enabled`),e.enableModule(t)):(Object(p.log)(`CliqzSettingsImport: import ${t} state: disabled`),e.disableModule(t))});const s=new Set(t.site_whitelist),a=new Set(i.map(e=>r[e].whitelistedSites).reduce((e,t)=>e.concat(t),[]).map(e=>e.replace(/^(http[s]?:\/\/)?(www\.)?/,"")).filter(e=>!s.has(e)));Object(p.log)("CliqzSettingsImport: add whitelisted sites",[...a]);const o=t.site_whitelist;return a.forEach(e=>{o.push(e)}),t.site_whitelist=o,n.cleanModuleData(),Promise.resolve()}).then(()=>{r.unload()})}const se=new Y,ae=new z,{log:oe}=p,{sendMessage:ue}=f,{onMessage:ce}=chrome.runtime,{CDN_SUB_DOMAIN:le,BROWSER_INFO:de,IS_CLIQZ:he,DEBUG:fe}=h.a,pe="edge"===de.name,me=`https://${le}.ghostery.com/update/version`,_e="ghostery",ge="ghostery",ye=se.onBeforeRequest.bind(se),ve=se.onHeadersReceived.bind(se),be=o.a.modules["human-web"],{adblocker:$e,antitracking:we,hpn:ke}=o.a.modules,Me=o.a.modules["message-center"],Se=o.a.modules["offers-v2"];let Oe;function xe(e,t){return t?(oe("SET CLIQZ MODULE ENABLED",e),o.a.enableModule(e.name)):(oe("SET CLIQZ MODULE DISABLED",e),o.a.disableModule(e.name),Promise.resolve())}function Te(e,t){return e.isEnabled?(oe("REGISTER WITH OFFERS CALLED",t),e.action(t?"registerRealEstate":"unregisterRealEstate",{realEstateID:ge}).catch(()=>{oe(`FAILED TO ${t?"REGISTER":"UNREGISTER"} REAL ESTATE WITH OFFERS CORE`)})):Promise.resolve()}function Ee(){if(d.a.enable_autoupdate){const e=d.a.bugs_last_checked,t=Number((new Date).getTime());(!e||t>Number(e)+9e5)&&(oe("autoUpdateBugDb called",new Date),De())}}function De(){return new Promise((e,t)=>{const r={success:!1,updated:!1};f.getJson(me).then(t=>{oe("Database version retrieval succeeded",t),l.a.update(t.click2playVersion),K.a.update(t.compatibilityVersion),u.a.update(t.bugsVersion,t=>{if(oe("CHECK LIBRARY VERSION CALLED",t),t.success){const e=Number((new Date).getTime());d.a.bugs_last_checked=e,t.updated&&(oe("BUGS LAST UPDATED UPDATED",new Date),d.a.bugs_last_updated=e)}e(t)})}).catch(e=>{oe("Error in checkLibraryVersion",e),t(r)})})}function Le(e){const{offer_id:t}=e.cmp_data.data.offer_info,r={origin:_e,type:"offer-action-signal",data:{action_id:"",offer_id:t}};if("offerShown"===e.reason)r.data.action_id="offer_shown";else if("closeButton"===e.reason)r.data.action_id="offer_closed";else{if("link"!==e.reason)return void oe("[offers_log]: unknown message reason: ",e.reason);r.data.action_id="offer_ca_action"}o.a.modules.core.action("publishEvent","offers-recv-ch",r)}function Pe(e,t,r){if("cliqz-content-script"===e.source)return;const{name:n,message:i,messageId:s,origin:m}=e,{tab:_}=t,g=_&&_.id;if(pe&&s&&(r=g?function(e){f.sendMessage(g,s,e)}:function(e){f.sendMessageToPanel(s,e)}),"account_pages"===m)return function(e,t){if("accountPageLoaded"===e)null===d.a.account&&S.a._getUserIDFromCookie().then(e=>{S.a._setAccountInfo(e)}).then(S.a.getUser).then(S.a.getUserSettings).catch(e=>{oe("handleAccountPages error",e)});else if("account.logout"===e)return S.a.logout().then(e=>{t(e)}).catch(e=>{oe("LOGOUT ERROR",e),t(e)}),!0;return!1}(n,r);if("purplebox"===m)return function(e,t){return"updateAlertConf"===e&&(d.a.alert_expanded=t.alert_expanded,d.a.alert_bubble_pos=t.alert_bubble_pos,d.a.alert_bubble_timeout=t.alert_bubble_timeout,S.a.saveUserSettings().catch(e=>oe("Background handlePurplebox",e))),!1}(n,i);if("ghostery_dot_com"===m)return function(e,t,r){if("appsPageLoaded"===e)r?ue(r,"appsPageData",{blocked:1===d.a.selected_app_ids[t.id]}):f.getActiveTab(e=>{e&&ue(e.id,"appsPageData",{blocked:1===d.a.selected_app_ids[t.id]})});else if("panelSelectedAppsUpdate"===e){const{selected_app_ids:e}=d.a;t.app_selected?e[t.app_id]=1:delete e[t.app_id],d.a.selected_app_ids=e}return!1}(n,i,g);if("page_performance"===m&&"recordPageInfo"===n)return M.a.setTabInfo(g,"pageTiming",i.performanceAPI),!1;if("notifications"===m)return function(e,t,r,n){if("dismissCMPMessage"===e)f.isCliqzOffer(t.cmp_data)?Le(t):v.CMP_DATA&&v.CMP_DATA.length&&v.CMP_DATA.splice(0,1);else if("cmpMessageShown"===e)f.isCliqzOffer(t.cmp_data)&&Le(t);else if("openTab"===e){if(f.openNewTab(t),n)return n(),!0}else if("importFile"===e)try{const e=JSON.parse(t);if(e.hash!==p.hashCode(JSON.stringify(e.settings)))throw new Error("Invalid hash");const n=(e.settings||{}).conf||{};n.alert_bubble_timeout=n.alert_bubble_timeout>30?30:n.alert_bubble_timeout,n.settings_last_imported=Number((new Date).getTime()),ae.set(n),f.getActiveTab(e=>{const t=e?e.id:r;ue(t,"onFileImported",{type:"message",text:`${chrome.i18n.getMessage("settings_import_success",void 0)} ${a()(n.settings_last_imported).format("LLL")}`})})}catch(e){f.getActiveTab(e=>{const t=e?e.id:r;ue(t,"onFileImported",{type:"error",text:chrome.i18n.getMessage("settings_import_file_error",void 0)})})}return!1}(n,i,g);if("click_to_play"===m)return function(e,t,r,n){if("processC2P"===e){if("always"===t.action){const e=M.a.getTabInfo(r,"host");return t.app_ids.forEach(t=>{j(t,e)}),n(),!0}if("once"===t.action)return l.a.allowOnce(t.app_ids,r),n(),!0}}(n,i,g,r);if("blocked_redirect"===m)return function(e,t,r,n){if("getBlockedRedirectData"===e)return n(h.a.BLOCKED_REDIRECT_DATA),!0;if("allow_always_page_c2p_tracker"===e){const e=M.a.getTabInfo(r,"host");j(t.app_id,e),chrome.tabs.update(r,{url:t.url})}else"allow_once_page_c2p_tracker"===e&&(h.a.LET_REDIRECTS_THROUGH=!0,chrome.tabs.update(r,{url:t.url}));return!1}(n,i,g,r);if("rewards"===m||"rewardsPanel"===m)return function(e,t,r){switch(e){case"rewardSignal":F.a.sendSignal(t);break;case"rewardSeen":F.a.markRewardRead(t.offerId),c.a.update();break;case"deleteReward":F.a.markRewardRead(t.offerId),F.a.deleteReward(t.offerId),c.a.update();break;case"rewardsPromptAccepted":d.a.rewards_accepted=!0;break;case"ping":Z.a.ping(t);break;case"removeDisconnectListener":F.a.panelPort.onDisconnect.removeListener(F.a.panelHubClosedListener);break;case"setPanelData":return t.hasOwnProperty("enable_offers")&&(Se.isEnabled||!0!==t.enable_offers?!1===t.enable_offers&&F.a.sendSignal(t.signal):Oe=t.signal,ae.set({enable_offers:t.enable_offers})),r()}}(n,i,r);if("disableShowAlert"===n)d.a.show_alert=!1;else if("updateDataCollection"===n)he||pe||(d.a.enable_human_web=i&&!0,d.a.enable_offers=i&&!0),d.a.enable_metrics=i&&!0;else if("updateDisplayMode"===n)d.a.is_expert=i;else if("updateAntiTrack"===n)d.a.enable_anti_tracking=i;else if("updateSmartBlock"===n)d.a.enable_smart_block=i;else if("updateAdBlock"===n)d.a.enable_ad_block=i;else if("updateBlocking"===n)switch(i){case"UPDATE_BLOCK_ALL":d.a.selected_app_ids={};for(const e in u.a.db.apps)d.a.selected_app_ids.hasOwnProperty(e)||(d.a.selected_app_ids[e]=1);break;case"UPDATE_BLOCK_NONE":d.a.selected_app_ids={};break;case"UPDATE_BLOCK_ADS":d.a.selected_app_ids={};for(const e in u.a.db.apps)"advertising"!==u.a.db.apps[e].cat||d.a.selected_app_ids.hasOwnProperty(e)||(d.a.selected_app_ids[e]=1)}else{if("skipSetup"===n)return chrome.tabs.update(g,{url:"https://www.ghostery.com/blog/product-releases/browse-smarter-with-ghostery-8/"}),!1;if("closeSetup"===n)return chrome.tabs.update(g,{url:"https://www.ghostery.com/blog/product-releases/browse-smarter-with-ghostery-8/"}),!1;if("getPanelData"===n)return i.tabId?chrome.tabs.get(+i.tabId,e=>{const t=ae.get(i.view,e);r(t)}):f.getActiveTab(e=>{const t=ae.get(i.view,e);r(t)}),S.a.getUserSettings().catch(e=>oe("Error getting user settings from getPanelData:",e)),!0;if("setPanelData"===n)return ae.set(i),r(),!1;if("getCliqzModuleData"===n){const e={adblock:{},antitracking:{}};return f.getActiveTab(t=>{c.a.update(),d.a.enable_ad_block&&(e.adblock=o.a.modules.adblocker.background.actions.getAdBlockInfoForTab(t.id)),d.a.enable_anti_tracking?o.a.modules.antitracking.background.actions.aggregatedBlockingStats(t.id).then(t=>{e.antitracking=t,r(e)}).catch(()=>{r(e)}):r(e)}),!0}if("getTrackerDescription"===n)return f.getJson(i.url).then(e=>{const t=e?e.company_in_their_own_words?e.company_in_their_own_words:e.company_description?e.company_description:"":"";r(t)}),!0;if("account.login"===n){const{email:e,password:t}=i;return S.a.login(e,t).then(e=>{r(e)}).catch(e=>{oe("LOGIN ERROR",e),r({errors:Object(X.a)(e)})}),!0}if("account.register"===n){const{email:e,confirmEmail:t,password:n,firstName:s,lastName:a}=i;return S.a.register(e,t,n,s,a).then(e=>{r(e)}).catch(e=>{r({errors:[e]}),oe("REGISTER ERROR",e)}),!0}if("account.logout"===n)return S.a.logout().then(e=>{r(e)}).catch(e=>{oe("LOGOUT ERROR",e),r(e)}),!0;if("account.getUserSettings"===n)return S.a.getUserSettings().then(e=>{r(e)}).catch(e=>{oe("Error getting user settings:",e),r({errors:Object(X.a)(e)})}),!0;if("account.resetPassword"===n){const{email:e}=i;return S.a.resetPassword(e).then(e=>{r(e)}).catch(e=>{r({errors:Object(X.a)(e)}),oe("RESET PASSWORD ERROR",e)}),!0}if("account.getUser"===n)return S.a.getUser(i).then(e=>{r({user:e})}).catch(e=>{r({errors:Object(X.a)(e)}),oe("FETCH USER ERROR",e)}),!0;if("account.sendValidateAccountEmail"===n)return S.a.sendValidateAccountEmail().then(e=>{r(e)}).catch(e=>{r({errors:Object(X.a)(e)}),oe("sendValidateAccountEmail error",e)}),!0;if("update_database"===n)return De().then(e=>{r(e)}),!0;if("getSiteData"===n)return new Promise((e,t)=>{f.getActiveTab(r=>{const n=r?r.id:0,i=r?r.url:"";r?e({url:i,extensionVersion:h.a.EXTENSION_VERSION,browserDisplayName:de.displayName,browserVersion:de.version,categories:b.a.getCategories(n),os:de.os,language:d.a.language,dbVersion:u.a.db.version}):t(new Error("Tab not found. Cannot gather page data"))})}).then(e=>{r(e)}),!0;if("openNewTab"===n)return f.openNewTab(i),!1;if("reloadTab"===n)return function(e){e&&e.tab_id?f.getTab(e.tab_id,e=>{e&&e.url&&chrome.tabs.update(e.id,{url:e.url})},()=>{f.getActiveTab(e=>{e&&e.url&&chrome.tabs.update(e.id,{url:e.url})})}):f.getActiveTab(e=>{e&&e.url&&chrome.tabs.update(e.id,{url:e.url})})}(i),"android"===de.os&&chrome.tabs.query({active:!0,url:chrome.extension.getURL("app/templates/panel_android.html*")},e=>{chrome.tabs.remove(e.map(e=>e.id))}),!1;if("getSettingsForExport"===n)return f.getActiveTab(e=>{if(e&&e.id&&e.url.startsWith("http")){const t=S.a.buildUserSettings();t.site_blacklist=d.a.site_blacklist,t.site_whitelist=d.a.site_whitelist;try{const n=p.hashCode(JSON.stringify({conf:t})),i=JSON.stringify({hash:n,settings:{conf:t}});f.injectNotifications(e.id,!0).then(()=>{ue(e.id,"exportFile",i)}),r(!0)}catch(e){r(!1)}}else r(!1)}),!0;if("ping"===n)return Z.a.ping(i),!1;if("showBrowseWindow"===n)return f.getActiveTab(e=>{e&&e.id&&e.url.startsWith("http")?f.injectNotifications(e.id,!0).then(t=>{t&&ue(e.id,"showBrowseWindow",{translations:{browse_button_label:chrome.i18n.getMessage("browse_button_label",void 0),select_file_for_import:chrome.i18n.getMessage("select_file_for_import",void 0),file_was_not_selected:chrome.i18n.getMessage("file_was_not_selected",void 0)}},()=>{chrome.runtime.lastError?r(chrome.i18n.getMessage("refresh_and_try_again",void 0)):r(!0)})}):r(chrome.i18n.getMessage("not_http_page",void 0))}),!0;"setupStep"===n&&h.a.JUST_INSTALLED&&(i.final?Z.a.ping("install_complete"):void 0!==i.setup_block?d.a.setup_block=i.setup_block:void 0!==i.setup_path?d.a.setup_path=i.setup_path:void 0!==i.setup_step&&i.setup_step>d.a.setup_step&&(d.a.setup_step=i.setup_step))}}function Ae(){const e=G.hasTest("antitracking_full")?{qsEnabled:!0,telemetryMode:2}:G.hasTest("antitracking_half")?{qsEnabled:!0,telemetryMode:1}:G.hasTest("antitracking_collect")?{qsEnabled:!1,telemetryMode:1}:{qsEnabled:!0,telemetryMode:1};e&&d.a.enable_anti_tracking&&(d.a.enable_human_web||(e.telemetryMode=0),Object.keys(e).forEach(t=>{const r=e[t];oe("antitracking","set config option",t,r),we.action("setConfigOption",t,r)}))}function je(e){const t=e.sourceUrl;return h.a.SESSION.paused_blocking||2===se.policy.getSitePolicy(t)||e.ghosteryWhitelisted}function Re(){chrome.webNavigation.onBeforeNavigate.addListener(se.onBeforeNavigate.bind(se)),chrome.webNavigation.onCommitted.addListener(se.onCommitted.bind(se)),chrome.webNavigation.onDOMContentLoaded.addListener(se.onDOMContentLoaded.bind(se)),chrome.webNavigation.onCompleted.addListener(se.onNavigationCompleted.bind(se)),chrome.webNavigation.onErrorOccurred.addListener(se.onNavigationErrorOccurred.bind(se)),chrome.webRequest.onBeforeSendHeaders.addListener(se.onBeforeSendHeaders.bind(se),{urls:["https://l.ghostery.com/*","https://d.ghostery.com/*","https://cmp-cdn.ghostery.com/*","https://cdn.ghostery.com/*","https://apps.ghostery.com/*","https://gcache.ghostery.com/*"]},["requestHeaders","blocking"]),chrome.webRequest.onBeforeRequest.addListener(ye,{urls:["http://*/*","https://*/*"]},["blocking"]),chrome.webRequest.onHeadersReceived.addListener(ve,{urls:["http://*/*","https://*/*"]},["responseHeaders"]),chrome.webRequest.onBeforeRedirect.addListener(se.onBeforeRedirect.bind(se),{urls:["http://*/*","https://*/*"]}),chrome.webRequest.onCompleted.addListener(se.onRequestCompleted.bind(se),{urls:["http://*/*","https://*/*"]}),chrome.webRequest.onErrorOccurred.addListener(se.onRequestErrorOccurred.bind(se),{urls:["http://*/*","https://*/*"]}),chrome.tabs.onCreated.addListener(se.onTabCreated.bind(se)),chrome.tabs.onActivated.addListener(se.onTabActivated.bind(se)),chrome.tabs.onReplaced.addListener(se.onTabReplaced.bind(se)),chrome.tabs.onRemoved.addListener(se.onTabRemoved.bind(se)),window.addEventListener("beforeunload",()=>{}),ce.addListener(Pe),chrome.runtime.onConnect.addListener(e=>{e&&"rewardsPanelPort"===e.name&&(F.a.panelPort=e,F.a.panelPort.onDisconnect.addListener(F.a.panelHubClosedListener))})}function Ie(){if(h.a.JUST_UPGRADED){oe("JUST UPGRADED");const{version_history:e}=d.a,t=e.length;t&&e[t-1]===h.a.EXTENSION_VERSION||e.push(h.a.EXTENSION_VERSION),d.a.version_history=e,Z.a.ping("upgrade"),d.a.metrics.install_complete_all=Number((new Date).getTime())}else if(h.a.JUST_INSTALLED){oe("JUST INSTALLED");const e=new Date,t=`${e.getFullYear().toString()}-${`0${e.getMonth()+1}`.slice(-2).toString()}-${`0${e.getDate()}`.slice(-2).toString()}`,r=Math.floor(100*Math.random())+1;d.a.install_random_number=r,d.a.install_date=t,Z.a.setUninstallUrl(),Z.a.ping("install"),setTimeout(()=>{Z.a.ping("install_complete")},3e5),chrome.tabs.create({url:chrome.runtime.getURL("./app/templates/setup.html"),active:!0})}else Z.a.ping("install"),Z.a.ping("install_complete");const e=o.a.start().then(()=>{Promise.all([function(){const e=o.a.modules["webrequest-pipeline"];if(e.isDisabled)return Promise.reject(new Error("cannot initialise webrequest pipeline: module disabled"));chrome.webRequest.onBeforeRequest.removeListener(ye),chrome.webRequest.onHeadersReceived.removeListener(ve);const t={onBeforeRequest:[],onHeadersReceived:[]};return we.isEnabled&&(t.onBeforeRequest.push("antitracking.onBeforeRequest"),t.onHeadersReceived.push("antitracking.onHeadersReceived")),$e.isEnabled&&t.onBeforeRequest.push("adblocker"),Promise.all([e.action("addPipelineStep","onBeforeRequest",{name:"ghostery.onBeforeRequest",spec:"blocking",before:t.onBeforeRequest,fn:(e,t)=>{const r=se.onBeforeRequest(e);return!r||!0!==r.cancel&&!r.redirectUrl||(Object.assign(t,r),!1)}}),e.action("addPipelineStep","onHeadersReceived",{name:"ghostery.onHeadersReceived",spec:"collect",before:t.onHeadersReceived,fn:e=>(se.onHeadersReceived(e),!0)})])}()]).then(()=>{pe||he||(h.a.JUST_UPGRADED_FROM_7?(d.a.enable_human_web=!be.isDisabled,d.a.enable_ad_block=!1,d.a.enable_anti_tracking=!1,d.a.enable_offers=!0):h.a.JUST_UPGRADED_FROM_8_1?(d.a.enable_ad_block=!$e.isDisabled,d.a.enable_anti_tracking=!we.isDisabled,d.a.enable_human_web=!be.isDisabled,d.a.enable_offers=!0):(d.a.enable_ad_block=!$e.isDisabled,d.a.enable_anti_tracking=!we.isDisabled,d.a.enable_human_web=!be.isDisabled,d.a.enable_offers=!Se.isDisabled))})}).catch(e=>{oe("cliqzStartup error",e)});function t(){v.fetchCMPData(),pe||he||G.fetch().then(()=>{Ae()}).catch(()=>{oe("Unable to reach abtest server")})}return pe&&(xe(ke,!1),xe(be,!1),xe(Se,!1)),he&&(xe(ke,!1),xe(be,!1),xe(we,!1),xe($e,!1),xe(Se,!1)),setInterval(t,36e5),Ee(),setInterval(Ee,36e5),Q.a.on("conf.save.selected_app_ids",e=>{const t=i.a.size(e),{db:r}=u.a;r.noneSelected=0===t,r.allSelected=!!t&&i.a.every(r.apps,(t,r)=>e.hasOwnProperty(r))}),Q.a.on("conf.save.site_whitelist",()=>{c.a.update(),f.flushChromeMemoryCache()}),Q.a.on("conf.save.account",()=>{ae.init()}),Q.a.on("conf.save.enable_human_web",e=>{pe||he?xe(be,!1):xe(be,e).then(()=>{Ae()})}),Q.a.on("conf.save.enable_offers",e=>{if(c.a.update(),pe||he)xe(Se,!1),Te(Se,!1);else{if(!e){const t=o.a&&o.a.modules["offers-v2"]&&o.a.modules["offers-v2"].background&&o.a.modules["offers-v2"].background.actions;t&&t.flushSignals(),Oe=void 0,Te(Se,e)}xe(Se,e)}}),Q.a.on("conf.save.enable_anti_tracking",e=>{xe(we,!he&&e)}),Q.a.on("conf.save.enable_ad_block",e=>{xe($e,!he&&e)}),Q.a.on("conf.changed.settings",i.a.debounce(e=>{oe("Conf value changed for a watched user setting:",e),ae.init()},200)),f.getActiveTab(e=>{let t=0;e&&(t=e.id),c.a.update(t)}),Z.a.ping("active"),Promise.all([u.a.init(h.a.JUST_UPGRADED),l.a.init(h.a.JUST_UPGRADED),K.a.init(h.a.JUST_UPGRADED),E.init(h.a.JUST_UPGRADED),e]).then(()=>{t(),ae.init()})}we.on("enabled",()=>{we.isReady().then(()=>{const e=["onBeforeSendHeaders","onHeadersReceived"].map(e=>Promise.all([we.action("removePipelineStep",e,"checkIsCookieWhitelisted"),we.action("addPipelineStep",e,{name:"checkGhosteryWhitelisted",spec:"break",fn:t=>{if(je(t)){const r="onHeadersReceived"===e?"set_cookie":"cookie";return t.incrementStat(`${r}_allow_whitelisted`),!1}return!0},before:["cookieContext.checkCookieTrust"]})])).concat([we.action("removePipelineStep","onBeforeRequest","checkSourceWhitelisted"),we.action("addPipelineStep","onBeforeRequest",{name:"checkGhosteryWhitelisted",spec:"break",fn:e=>!je(e)||(e.incrementStat("ghostery_whitelisted"),!1),before:["checkShouldBlock"]})]);return Promise.all(e)})}),$e.on("enabled",()=>{$e.isReady().then(()=>Promise.all([$e.action("removePipelineStep","checkWhitelist"),$e.action("addPipelineStep",{name:"checkGhosteryWhitelist",spec:"break",fn:e=>!je(e),before:["checkBlocklist"]}),$e.action("addWhiteListCheck",e=>je({sourceUrl:e}))]))}),Se.on("enabled",()=>{Se.isReady().then(()=>{if(oe("IN OFFERS ON ENABLED",Se,Me),Oe){F.a.sendSignal(Oe);const e=o.a&&o.a.modules["offers-v2"]&&o.a.modules["offers-v2"].background&&o.a.modules["offers-v2"].background.actions;e&&e.flushSignals(),Oe=void 0}fe&&Se.action("setConfiguration",{config_location:"de",triggersBE:"http://offers-api-stage.clyqz.com:8181",showConsoleLogs:!0,offersLogsEnabled:!0,offersDevFlag:!0,offersTelemetryFreq:"10"}),Te(Se,!0).then(()=>{xe(Me,!0)})})}),Me.on("enabled",()=>{Me.isReady().then(()=>(oe("IN MESSAGE CENTER ON ENABLED",Se,Me),Me.action("registerMessageHandler",_e,e=>{if(Me.action("hideMessage",_e,e),e.Dismiss=1,"offers-core"===e.origin&&"push-offer"===e.type&&e.data.offer_data){oe("RECEIVED OFFER",e);const t=F.a.unreadOfferIds.indexOf(e.data.offer_id);-1!==t&&F.a.unreadOfferIds.splice(t,1),F.a.storedOffers[e.data.offer_id]=e.data,F.a.unreadOfferIds.push(e.data.offer_id),c.a.update(),"star"!==e.data.offer_data.ui_info.notif_type&&f.getActiveTab(t=>{let r=0;t&&(r=t.id),F.a.showHotDog(r,e.data)})}})))}),J.a.init().then(()=>("android"===de.os?chrome.browserAction.onClicked.addListener(e=>{chrome.tabs.create({url:chrome.extension.getURL(`app/templates/panel_android.html?tabId=${e.id}`),active:!0})}):chrome.browserAction.setPopup({popup:"app/templates/panel.html"}),Re(),function(){oe("INITIALIZE VERSIONING. CURRENT VERSION IS:",h.a.EXTENSION_VERSION);const e=d.a.previous_version;if(e)if(oe("PREVIOUS VERSION EXISTS",e),h.a.JUST_INSTALLED=!1,h.a.JUST_UPGRADED=e!==h.a.EXTENSION_VERSION,h.a.JUST_UPGRADED){oe("THIS IS AN UPGRADE"),d.a.previous_version=h.a.EXTENSION_VERSION;const t=e.split("."),r=h.a.EXTENSION_VERSION.split(".");t[0]===r[0]&&t[1]===r[1]&&(oe("THIS IS A HOT FIX UPGRADE"),h.a.HOTFIX=!0),t[0]<8&&(h.a.JUST_UPGRADED_FROM_7=!0,d.a.is_expert=!0,d.a.enable_smart_block=!1),8==+t[0]&&t[1]<2&&(h.a.JUST_UPGRADED_FROM_8_1=!0);const{version_history:n}=d.a;n.push(h.a.EXTENSION_VERSION),d.a.version_history=n}else oe("SAME VERSION OR NOT THE FIRST RUN");else{oe("NEW INSTALL"),d.a.previous_version=h.a.EXTENSION_VERSION;const e=[];e.push(h.a.EXTENSION_VERSION),d.a.version_history=e,h.a.JUST_INSTALLED=!0}}(),S.a.migrate().then(()=>{if(null!==d.a.account)return S.a.getUser().then(S.a.getUserSettings)}).catch(e=>oe(e)),Z.a.init(h.a.JUST_INSTALLED).then(()=>Ie().then(()=>{p.prefsSet(h.a.initProps),h.a.INIT_COMPLETE=!0,he&&function(e,t){Object(p.log)("checking cliqz import",t.cliqz_import_state),t.cliqz_import_state||ie(e,t).then(()=>{Object(p.log)("CliqzSettingsImport: cliqz settings import successful"),t.cliqz_import_state=1},e=>{Object(p.log)("CliqzSettingsImport: cliqz import not available at present",e)})}(o.a,d.a)})))).catch(e=>(oe("Error in init()",e),Promise.reject(e)))},function(e,t,r){"use strict";function n(e,t){const r=`\n    try {\n      ${e}\n    } catch (ex) { }\n\n    (function() {\n      var currentScript = document.currentScript;\n      var parent = currentScript && currentScript.parentNode;\n\n      if (parent) {\n        parent.removeChild(currentScript);\n      }\n    })();\n  `,n=t.createElement("script");n.type="text/javascript",n.id="cliqz-adblocker-script",n.appendChild(t.createTextNode(r)),(t.head||t.documentElement).appendChild(n)}function i(e,t){const r=new RegExp(e);t.addEventListener("beforescriptexecute",e=>{const t=e.target;t.textContent&&r.test(t.textContent)&&(e.preventDefault(),e.stopPropagation())})}r.r(t);class s{constructor(e,t){this.window=e,this.backgroundAction=t,this.mutationObserver=null,this.injectedRules=new Set,this.injectedScripts=new Set,this.blockedScripts=new Set,this.observedNodes=new Set,this.backgroundAction("getCosmeticsForDomain"),this.onMutation([{target:this.window.document.body}]),this.startObserving()}unload(){if(this.mutationObserver)try{this.mutationObserver.disconnect()}catch(e){}}handleResponseFromBackground({active:e,scripts:t,blockedScripts:r,styles:s}){if(e){for(let e=0;e<t.length;e+=1){const r=t[e];this.injectedScripts.has(r)||(n(r,this.window.document),this.injectedScripts.add(r))}for(let e=0;e<r.length;e+=1){const t=r[e];this.blockedScripts.has(t)||(i(t,this.window.document),this.blockedScripts.add(t))}this.handleRules(s)}else this.unload()}handleRules(e){const t=[];for(let r=0;r<e.length;r+=1){const n=e[r];if(!this.injectedRules.has(n)){try{if(!this.window.document.querySelector(n))continue}catch(e){continue}this.injectedRules.add(n),t.push(` :root ${n}`)}}t.length>0&&function(e,t){const r=t.createElement("style");r.type="text/css",r.id="cliqz-adblokcer-css-rules",(t.head||t.documentElement).appendChild(r),r.appendChild(t.createTextNode(e))}(`${t.join(" ,")} {display:none !important;}`,this.window.document)}onMutation(e){let t=new Set(e.map(e=>e.target).filter(e=>e));if(t.size>100&&(t=new Set([this.window.document.body])),0===t.size)return;const r=new Set;t.forEach(e=>{const t=e.querySelectorAll("*");for(let e=0;e<t.length;e+=1){const n=t[e];if(!n.hidden){if(n.id){const e=`#${n.id}`;this.observedNodes.has(e)||(r.add(e),this.observedNodes.add(e))}if(n.tagName){const e=n.tagName;this.observedNodes.has(e)||(r.add(e),this.observedNodes.add(e))}n.className&&n.className.split&&n.className.split(" ").forEach(e=>{const t=`.${e}`;this.observedNodes.has(t)||(r.add(t),this.observedNodes.add(t))})}}}),r.size>0&&this.backgroundAction("getCosmeticsForNodes",[[...r]])}startObserving(){void 0!==this.window.MutationObserver&&(this.mutationObserver=new this.window.MutationObserver(e=>this.onMutation(e)),this.mutationObserver.observe(this.window.document,{childList:!0,subtree:!0}))}}var a=r(195);function o(e){const t=e.sort();let r=1;for(let e=1;e<t.length;e+=1)t[r-1]!==t[e]&&(t[r]=t[e],r+=1);return t.subarray(0,r)}function u(e,t){let r=0,n=0;for(;r<e.length&&n<t.length&&e[r]!==t[n];)e[r]<t[n]?r+=1:t[n]<e[r]&&(n+=1);return!(r<e.length&&n<t.length)}function c(...e){return o(function(...e){let t=0;for(let r=0;r<e.length;r+=1)t+=e[r].length;const r=new Uint32Array(t);let n=0;for(let t=0;t<e.length;t+=1){const i=e[t];for(let e=0;e<i.length;e+=1)r[n]=i[e],n+=1}return r}(...e))}function l(e,t){return!!(e&t)}function d(e,t){return e|t}function h(e,t){return e&~t}function f(e){if(!e)return 0;let t=5407;for(let r=0;r<e.length;r+=1)t=31*t^e.charCodeAt(r);return t>>>0}function p(e,t){if(e.length<t.length)return!1;const r=t.length;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}function m(e,t,r){if(e.length-r<t.length)return!1;const n=r+t.length;for(let i=r;i<n;i+=1)if(e[i]!==t[i-r])return!1;return!0}function _(e){return e>=48&&e<=57}function g(e){return(e&=-33)>=65&&e<=90}function y(e){return _(e)||g(e)||function(e){return e>=192&&e<=450}(e)}function v(e){return _(e)||g(e)||95===e||45===e||46===e||35===e}function b(e,t,r=!1){const n=[];let i=!1,s=0,a=0;for(let o=0,u=e.length;o<u;o+=1){const u=e.charCodeAt(o);t(u)?(i||(i=!0,s=o,a=0),a+=1):i&&(i=!1,(r||42!==u)&&n.push(f(e.substr(s,a))))}return i&&n.push(f(e.substr(s,a))),n}function $(e){return b(e,y,!1)}function w(e){return b(e,v,!0)}function k(e){return o(new Uint32Array($(e)))}function M(e,t){let r=t;if(p(t,"~")&&(r=r.substr(1)),e.endsWith(r)){const t=e.length-r.length;if(0===t||"."===e[t-1])return!0}return!1}function S(e,t){if(t.endsWith(".*")){const r=t.slice(0,-2),n=Object(a.getPublicSuffix)(e);if(!n)return!1;const i=e.substr(0,e.length-n.length-1);return i.length>0&&M(i,r)}return M(e,t)}function O(e,t){if(e.hasHostnames()&&t){const r=e.getHostnames();for(let e=0;e<r.length;e+=1)if(S(t,r[e]))return{hostname:r[e]};return null}return{hostname:""}}function x(e,t){const r=t.indexOf(e);return 0===r&&(0===e.length||t.length===e.length||"."===e[e.length-1]||"."===t[e.length])||r>0&&"."===t[r-1]}function T(e,t){return e.substring(e.indexOf(t)+t.length)}function E(e,t){const r=e.getFuzzySignature();void 0===t.fuzzySignature&&(t.fuzzySignature=k(t.url));const n=t.fuzzySignature;if(r.length>n.length)return!1;let i=0;for(let e=0;e<r.length;e+=1){const t=r[e],s=n.indexOf(t,i);if(-1===s)return!1;i=s+1}return!0}function D(e,t){const{url:r}=t;return e.getRegex().test(r)}function L(e,t){return e.isHostnameAnchor()?e.isRegex()?function(e,t){const{url:r,hostname:n}=t;if(x(e.getHostname(),n)){const n=T(r,e.getHostname());return D(e,Object.assign({},t,{url:n}))}return!1}(e,t):e.isRightAnchor()?function(e,t){const{url:r,hostname:n}=t;if(x(e.getHostname(),n)){const t=T(r,e.getHostname());return e.getFilter()===t}return!1}(e,t):e.isFuzzy()?function(e,t){const{hostname:r}=t;return!!x(e.getHostname(),r)&&E(e,t)}(e,t):function(e,t){const{url:r,hostname:n}=t;if(x(e.getHostname(),n))return p(T(r,e.getHostname()),e.getFilter());return!1}(e,t):e.isRegex()?D(e,t):e.isLeftAnchor()&&e.isRightAnchor()?function(e,t){const{url:r}=t;return r===e.getFilter()}(e,t):e.isLeftAnchor()?function(e,t){const{url:r}=t;return p(r,e.getFilter())}(e,t):e.isRightAnchor()?function(e,t){const{url:r}=t;return r.endsWith(e.getFilter())}(e,t):e.isFuzzy()?E(e,t):function(e,t){const{url:r}=t;return-1!==r.indexOf(e.getFilter())}(e,t)}function P(e,t){return function(e,t){if(!e.isCptAllowed(t.cpt))return!1;const r=t.sourceHostname,n=t.sourceGD,i=n===t.hostGD;if(!e.firstParty()&&i)return!1;if(!e.thirdParty()&&!i)return!1;if(e.hasOptDomains()){const t=e.getOptDomains();if(t.size>0&&!t.has(n)&&!t.has(r))return!1}if(e.hasOptNotDomains()){const t=e.getOptNotDomains();if(t.size>0&&(t.has(n)||t.has(r)))return!1}return!0}(e,t)&&L(e,t)}const A=131071,j={1:16,2:64,3:1,4:128,5:4,7:256,10:32,11:1024,12:8,13:4096,14:8192,15:2,16:512,17:65536,18:16384,19:32768,20:2048,21:1},R=/[/^*]/;function I(e){return new Set(e?e.split("|"):[])}class C{constructor({mask:e,filter:t,optDomains:r,optNotDomains:n,redirect:i,hostname:s,id:a}){this.id=a,this.mask=e,this.filter=t,this.optDomains=r,this.optNotDomains=n,this.redirect=i,this.hostname=s,this.fuzzySignature=null,this.optDomainsSet=null,this.optNotDomainsSet=null,this.regex=null,this.rawLine=null}isCosmeticFilter(){return!1}isNetworkFilter(){return!0}toString(){let e="";this.isException()&&(e+="@@"),this.isHostnameAnchor()&&(e+="||"),this.isLeftAnchor()&&(e+="|"),this.hasHostname()&&(e+=this.getHostname(),e+="^"),this.isRegex()?e+=this.getRegex().source:e+=this.getFilter();const t=[];if(this.fromAny()||(this.isFuzzy()&&t.push("fuzzy"),this.fromImage()&&t.push("image"),this.fromMedia()&&t.push("media"),this.fromObject()&&t.push("object"),this.fromObjectSubrequest()&&t.push("object-subrequest"),this.fromOther()&&t.push("other"),this.fromPing()&&t.push("ping"),this.fromScript()&&t.push("script"),this.fromStylesheet()&&t.push("stylesheet"),this.fromSubdocument()&&t.push("subdocument"),this.fromWebsocket()&&t.push("websocket"),this.fromXmlHttpRequest()&&t.push("xmlhttprequest"),this.fromFont()&&t.push("font")),this.isImportant()&&t.push("important"),this.isRedirect()&&t.push(`redirect=${this.getRedirect()}`),this.firstParty()!==this.thirdParty()&&(this.firstParty()&&t.push("first-party"),this.thirdParty()&&t.push("third-party")),this.hasOptDomains()||this.hasOptNotDomains()){const e=[...this.getOptDomains()];this.getOptNotDomains().forEach(t=>e.push(`~${t}`)),t.push(`domain=${e.join("|")}`)}return t.length>0&&(e+=`$${t.join(",")}`),this.isRightAnchor()&&(e+="|"),e}hasFilter(){return!!this.filter}hasOptNotDomains(){return!!this.optNotDomains}getOptNotDomains(){return this.optNotDomainsSet=this.optNotDomainsSet||I(this.optNotDomains),this.optNotDomainsSet}hasOptDomains(){return!!this.optDomains}getOptDomains(){return this.optDomainsSet=this.optDomainsSet||I(this.optDomains),this.optDomainsSet}getMask(){return this.mask}isRedirect(){return!!this.redirect}getRedirect(){return this.redirect}hasHostname(){return!!this.hostname}getHostname(){return this.hostname}getFilter(){return this.filter}setRegex(e){this.regex=e,this.mask=d(this.mask,16777216),this.mask=h(this.mask,8388608)}getRegex(){return null===this.regex&&(this.regex=function(e,t,r,n){let i=e;return i=(i=(i=i.replace(/([|.$+?{}()[\]\\])/g,"\\$1")).replace(/\*/g,".*")).replace(/\^/g,"(?:[^\\w\\d_.%-]|$)"),t&&(i=`${i}$`),r&&(i=`^${i}`),n?new RegExp(i):new RegExp(i,"i")}(this.filter,this.isRightAnchor(),this.isLeftAnchor(),this.matchCase())),this.regex}getFuzzySignature(){return null===this.fuzzySignature&&(this.fuzzySignature=k(this.filter)),this.fuzzySignature}getTokens(){return[$(this.filter).concat($(this.hostname))]}isCptAllowed(e){const t=j[e];return void 0===t||l(this.mask,t)}isFuzzy(){return l(this.mask,524288)}isException(){return l(this.mask,268435456)}isHostnameAnchor(){return l(this.mask,134217728)}isRightAnchor(){return l(this.mask,67108864)}isLeftAnchor(){return l(this.mask,33554432)}matchCase(){return l(this.mask,262144)}isImportant(){return l(this.mask,131072)}isRegex(){return l(this.mask,16777216)}isPlain(){return!l(this.mask,16777216)}isHostname(){return l(this.mask,4194304)}fromAny(){return(this.mask&A)===A}thirdParty(){return l(this.mask,1048576)}firstParty(){return l(this.mask,2097152)}fromImage(){return l(this.mask,1)}fromMedia(){return l(this.mask,2)}fromObject(){return l(this.mask,4)}fromObjectSubrequest(){return l(this.mask,8)}fromOther(){return l(this.mask,16)}fromPing(){return l(this.mask,32)}fromScript(){return l(this.mask,64)}fromStylesheet(){return l(this.mask,128)}fromSubdocument(){return l(this.mask,256)}fromWebsocket(){return l(this.mask,512)}fromXmlHttpRequest(){return l(this.mask,1024)}fromFont(){return l(this.mask,8192)}}function Y(e,t,r){return r?d(e,t):h(e,t)}function F(e,t,r){const n=e.indexOf("*",t),i=e.indexOf("^",t);return-1!==n&&n<r||-1!==i&&i<r}function N(e){const t=e;let r=3145728,n=null,i=null,s="",a="",o="",u=!1,c=0,_=t.length;p(t,"@@")&&(c+=2,r=d(r,268435456));const g=t.indexOf("$",c);if(-1!==g){_=g;const e=t.substr(g+1).split(",");for(let t=0;t<e.length;t+=1){let n=!1,i=e[t];p(i,"~")?(n=!0,i=i.substr(1)):n=!1;let c=[];if(-1!==i.indexOf("=")){const e=i.split("=",2);i=e[0],c=e[1].split("|")}switch(i){case"domain":{const e=[],t=[];for(let r=0;r<c.length;r+=1){const n=c[r];n&&(p(n,"~")?t.push(n.substr(1)):e.push(n))}e.length>0&&(s=e.join("|")),t.length>0&&(a=t.join("|"));break}case"image":u=!0,r=Y(r,1,!n);break;case"media":u=!0,r=Y(r,2,!n);break;case"object":u=!0,r=Y(r,4,!n);break;case"object-subrequest":u=!0,r=Y(r,8,!n);break;case"other":u=!0,r=Y(r,16,!n);break;case"ping":u=!0,r=Y(r,32,!n);break;case"script":u=!0,r=Y(r,64,!n);break;case"stylesheet":u=!0,r=Y(r,128,!n);break;case"subdocument":u=!0,r=Y(r,256,!n);break;case"xmlhttprequest":u=!0,r=Y(r,1024,!n);break;case"websocket":u=!0,r=Y(r,512,!n);break;case"font":u=!0,r=Y(r,8192,!n);break;case"important":if(n)return null;r=d(r,131072);break;case"match-case":if(n)return null;r=d(r,262144);break;case"third-party":r=h(r,n?1048576:2097152);break;case"first-party":r=h(r,n?2097152:1048576);break;case"fuzzy":r=d(r,524288);break;case"collapse":break;case"redirect":if(n)return null;if(0===c.length)return null;o=c[0];break;default:return null}}}if(!1===u&&(r=d(r,A)),p(t,"127.0.0.1"))i=t.substr(t.lastIndexOf(" ")+1),n="",r=d(r=d(r=h(r,16777216),4194304),134217728);else{"|"===t[_-1]&&(r=d(r,67108864),_-=1),m(t,"||",c)?(r=d(r,134217728),c+=2):"|"===t[c]&&(r=d(r,33554432),c+=1),"*"===t.charAt(_-1)&&_-c>1&&(_-=1);const e=F(t,c,_),s=l(r=Y(r,16777216,e),134217728);if(!e&&s){const e=t.indexOf("/",c);-1!==e?(i=t.substring(c,e),c=e):(i=t.substring(c,_),n="")}else if(e&&s){const e=t.search(R);-1!==e&&(i=t.substring(c,e),_-(c=e)==1&&"^"===t.charAt(c)?(n="",r=h(r,16777216)):r=Y(r,16777216,F(t,c,_)))}}null===n&&(n=t.substring(c,_).toLowerCase());let y="";null!==i&&(y=i);let v="";null!==n&&(v=n),l(r,134217728)&&p(y,"www.")&&(y=y.slice(4)),""!==y&&(y=y.toLowerCase());const b=f(t);return new C({filter:v,hostname:y,id:b,mask:r,optDomains:s,optNotDomains:a,redirect:o})}function U(e){return`(?:${e.source})`}function q(e){return`(?:${e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")})`}function H(e,t,r){let n=e.get(t);void 0===n&&(n=[],e.set(t,n)),n.push(r)}function z(e){const t=[],r=new Map;for(let t=0;t<e.length;t+=1){const n=e[t];H(r,n.getMask(),n)}return r.forEach(e=>{const r=new Map,n=new Map,i=new Map;for(let t=0;t<e.length;t+=1){const s=e[t];s.isPlain()?s.hasOptDomains()||s.hasOptNotDomains()||s.isHostname()||s.isHostnameAnchor()?H(n,`${s.getHostname()}|||${s.getFilter()}|||${s.redirect}`,s):H(r,`${s.redirect}`,s):s.hasOptDomains()||s.hasOptNotDomains()?H(i,`${s.getHostname()}|||${s.getRegex().source}`,s):H(r,`${s.redirect}`,s)}r.forEach(e=>{if(1===e.length)t.push(e[0]);else{let r=null;const n=new Set;for(let t=0;t<e.length;t+=1){const i=e[t];null===r&&(r=new C(i)),i.isRegex()?n.add(U(i.getRegex())):i.isRightAnchor()?n.add(`${q(i.getFilter())}$`):i.isLeftAnchor()?n.add(`^${q(i.getFilter())}`):n.add(q(i.getFilter()))}null!==r&&(n.size>1&&r.setRegex(new RegExp([...n].join("|"))),t.push(r))}}),n.forEach(e=>{if(1===e.length)t.push(e[0]);else{let r=null,n=new Set,i=null,s=new Set,a=null;for(let t=0;t<e.length;t+=1){const o=e[t];o.hasOptNotDomains()?null===i?(i=new C(o),s=o.getOptNotDomains()):o.getOptNotDomains().forEach(e=>s.add(e)):o.hasOptDomains()?null===r?(r=new C(o),n=o.getOptDomains()):o.getOptDomains().forEach(e=>n.add(e)):null===a&&(a=new C(o))}null!==a&&t.push(a),null!==r&&t.push(r),null!==i&&t.push(i)}}),i.forEach(e=>{if(1===e.length)t.push(e[0]);else{let r=null;const n=new Set;let i=new Set,s=null,a=new Set;const o=new Set;let u=null;const c=new Set;for(let t=0;t<e.length;t+=1){const l=e[t];l.hasOptNotDomains()?null===s?(s=new C(l),a=l.getOptNotDomains(),o.add(U(l.getRegex()))):(l.getOptNotDomains().forEach(a.add.bind(a)),o.add(U(l.getRegex()))):l.hasOptDomains()?null===r?(r=new C(l),i=l.getOptDomains(),n.add(U(l.getRegex()))):(l.getOptDomains().forEach(i.add.bind(i)),n.add(U(l.getRegex()))):null===u?(u=new C(l),c.add(U(l.getRegex()))):c.add(U(l.getRegex()))}if(null!==u){const e=[...c].join("|");u.setRegex(new RegExp(e)),t.push(u)}if(null!==r){const e=[...n].join("|");r.setRegex(new RegExp(e)),t.push(r)}if(null!==s){const e=[...o].join("|");s.setRegex(new RegExp(e)),t.push(s)}}})}),t}class B{constructor({mask:e,selector:t,hostnames:r,id:n}){this.id=n,this.mask=e,this.selector=t,this.hostnames=r,this.hostnamesArray=null,this.rawLine=null}isCosmeticFilter(){return!0}isNetworkFilter(){return!1}toString(){let e="";return this.hasHostnames()&&(e+=this.hostnames),this.isUnhide()?e+="#@#":e+="##",this.isScriptInject()?(e+="script:inject(",e+=this.selector,e+=")"):this.isScriptBlock()?(e+="script:contains(",e+=this.selector,e+=")"):e+=this.selector,e}getTokens(){return[this.getTokensSelector()]}getTokensSelector(){if(this.isScriptInject()||this.isScriptBlock())return[];const e=this.selector.lastIndexOf(">");return w(-1!==e?this.selector.substr(e):this.selector)}getSelector(){return this.selector}hasHostnames(){return!!this.hostnames}getHostnames(){return null===this.hostnamesArray&&(this.hasHostnames()?this.hostnamesArray=this.hostnames.split(",").sort((e,t)=>e.length>t.length?-1:e.length<t.length?1:0):this.hostnamesArray=[]),this.hostnamesArray}isUnhide(){return l(this.mask,1)}isScriptInject(){return l(this.mask,2)}isScriptBlock(){return l(this.mask,4)}}function W(e){let t=0,r="",n="";const i=e.indexOf("#"),s=i+1;let a=s+1;if("@"===e[s]&&(t=d(t,1),a+=1),i>0&&(n=e.substring(0,i)),p(r=e.substr(a),"script:")){const e="script:".length;let n=e,i=r.length-1;m(r,"inject(",e)?(t=d(t,2),n+="inject(".length):m(r,"contains(",e)&&(t=d(t,4),"/"===r[n+="contains(".length]&&"/"===r[i-1]&&(n+=1,i-=1)),r=r.substring(n,i)}if(null===r||0===r.length||r.endsWith("}")||-1!==r.indexOf("##")||l(t,1)&&0===n.length)return null;const o=f(e);return new B({hostnames:n,id:o,mask:t,selector:r})}const V=/\s/;function G(e){if(1===e.length||"!"===e.charAt(0)||"#"===e.charAt(0)&&V.test(e.charAt(1))||p(e,"[Adblock"))return 0;if(p(e,"|")||p(e,"@@|"))return 1;if(-1!==e.indexOf("$$"))return 0;const t=e.indexOf("#");if(t>-1){const r=t+1;if(m(e,"@$#",r)||m(e,"@%#",r)||m(e,"%#",r)||m(e,"$#",r))return 0;if(m(e,"#",r)||m(e,"@#",r))return 2}return 1}function K(e,{loadNetworkFilters:t=!0,loadCosmeticFilters:r=!0,debug:n=!1}={}){const i=[],s=[],a=e.split("\n");for(let e=0;e<a.length;e+=1){const o=a[e].trim();if(o.length>0){const e=G(o);if(1===e&&t){const e=N(o);null!==e&&(i.push(e),n&&(e.rawLine=o))}else if(2===e&&r){const e=W(o);null!==e&&(s.push(e),n&&(e.rawLine=o))}}}return{cosmeticFilters:s,networkFilters:i}}function J(e){let t="end",r="",n="",i="";const s=new Map;if(e.split("\n").forEach(e=>{const a=e.trim();switch(t=p(a,"#")?"comment":a?"content"===t||i||2!==a.split(" ").length?"content":"title":"end"){case"end":if(r){let e=s.get(i);void 0===e&&(e=new Map,s.set(i,e)),e.set(n,r),r="",i=""}break;case"comment":break;case"title":[n,i]=a.split(" ");break;case"content":r+=`${a}\n`}}),r){let e=s.get(i);void 0===e&&(e=new Map,s.set(i,e)),e.set(n,r)}return s}function Q(e){const t=e.url.toLowerCase(),{hostname:r,domain:n}=Object(a.parse)(t);let i=e.sourceUrl,s="",o="";if(i){i=i.toLowerCase();const e=Object(a.parse)(i);s=e.hostname||"",o=e.domain||""}return function({url:e="",hostname:t="",domain:r="",sourceHostname:n="",sourceDomain:i="",cpt:s=6}){return{cpt:s,tokens:$(e),sourceGD:i,sourceHostname:n,hostGD:r,hostname:t,url:e.toLowerCase(),fuzzySignature:void 0}}({cpt:e.cpt,sourceDomain:o,sourceHostname:s,domain:n,hostname:r,url:t})}class Z{constructor(e,t,{optimizer:r=function(e){return e}}={}){this.index=new Map,this.size=0,this.optimizer=r,this.getTokens=t,this.addFilters(e||[])}iterMatchingFilters(e,t){for(let r=0;r<e.length;r+=1)if(!1===this.iterBucket(e[r],t))return;this.iterBucket(0,t)}report(){const e=new Map;let t="";return this.index.forEach((r,n)=>{const i=r.filters;e.set(i.length,(e.get(i.length)||0)+1),length>5&&(t=t.concat(`adblocker size bucket "${n}" => ${i.length}\n`),i.forEach(e=>{t=t.concat(`    ${e.toString()} ${e.mask}\n`)}))}),e.forEach((e,r)=>{t=t.concat(`adblocker sizes ${r} => ${e} buckets\n`)}),t}optimizeAheadOfTime(){this.optimizer&&this.index.forEach(e=>{this.optimize(e,!0)})}addFilters(e){const t=e.length;this.size=t;const r=new Map,n=new Map;for(let t=0;t<e.length;t+=1){const i=e[t],s=this.getTokens(i);r.set(i.id,s);for(let e=0;e<s.length;e+=1){const t=s[e];for(let e=0;e<t.length;e+=1){const r=t[e];n.set(r,(n.get(r)||0)+1)}}}for(let i=0;i<e.length;i+=1){let s=!1;const a=e[i],o=r.get(a.id);for(let e=0;e<o.length;e+=1){const r=o[e];let i=0,u=t;for(let e=0;e<r.length;e+=1){const t=r[e],s=n.get(t);s<u&&(i=t,u=s)}if(0===i){if(s)continue;s=!0}const c=this.index.get(i);void 0===c?this.index.set(i,{filters:[a],hit:0,optimized:!1}):c.filters.push(a)}}}optimize(e,t=!1){this.optimizer&&!e.optimized&&(t||e.hit>=5)&&(e.filters.length>1&&(e.filters=this.optimizer(e.filters)),e.optimized=!0)}iterBucket(e,t){const r=this.index.get(e);if(void 0!==r){r.hit+=1,this.optimize(r);const e=r.filters;for(let r=0;r<e.length;r+=1)if(!1===t(e[r]))return!1}return!0}}function X(e){return function(e){const t=new Uint8Array(e.length),r=e.length;for(let n=0;n<r;n+=1)t[n]=e.charCodeAt(n);return t}(unescape(encodeURIComponent(e)))}class ee{constructor(e){this.buffer=new Uint8Array(e),this.pos=0}seek(e=0){this.pos=e}crop(){return this.buffer.subarray(0,this.pos)}set(e){this.buffer=new Uint8Array(e),this.seek(0)}pushBytes(e){this.checkShouldResize(e.byteLength),this.buffer.set(e,this.pos),this.pos+=e.byteLength}pushByte(e){this.pushUint8(e)}pushUint8(e){this.checkShouldResize(1),this.buffer[this.pos]=e,this.pos+=1}pushUint16(e){this.checkShouldResize(2),this.buffer[this.pos]=e>>>8,this.buffer[this.pos+1]=e,this.pos+=2}pushUint32(e){this.checkShouldResize(4),this.buffer[this.pos]=e>>>24,this.buffer[this.pos+1]=e>>>16,this.buffer[this.pos+2]=e>>>8,this.buffer[this.pos+3]=e,this.pos+=4}pushUTF8(e){const t=X(e);this.pushUint16(t.byteLength),this.pushBytes(t)}pushStr(e){const t=this.pos;let r=!1;this.checkShouldResize(2+e.length),this.pushUint16(e.length);const n=this.pos,i=this.buffer;for(let t=0;t<e.length&&!r;t+=1){const s=e.charCodeAt(t);i[n+t]=s,r=r||s>127}r?(this.pos=t,this.pushUTF8(e)):this.pos+=e.length}getBytes(e){const t=this.buffer.subarray(this.pos,this.pos+e);return this.pos+=e,t}getByte(){return this.getUint8()}getUint8(){const e=this.buffer[this.pos];return this.pos+=1,e}getUint16(){const e=(this.buffer[this.pos]<<8|this.buffer[this.pos+1])>>>0;return this.pos+=2,e}getUint32(){const e=(this.buffer[this.pos]<<24>>>0)+(this.buffer[this.pos+1]<<16|this.buffer[this.pos+2]<<8|this.buffer[this.pos+3])>>>0;return this.pos+=4,e}getUTF8(){return function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}(this.getBytes(this.getUint16()))}getStr(){const e=this.pos,t=this.getUint16();let r=0;for(;r<t&&this.buffer[this.pos+r]<=127;r+=1);return r<t?(this.pos=e,this.getUTF8()):String.fromCharCode.apply(null,this.getBytes(t))}checkShouldResize(e){this.pos+e>=this.buffer.byteLength&&this.resize(e)}resize(e=0){const t=new Uint8Array(Math.floor(1.5*(this.pos+e)));t.set(this.buffer),this.buffer=t}}function te(e,t){let r=0;e.isRedirect()?r=5:e.hasOptNotDomains()?r=4:e.hasOptDomains()?r=3:e.hasFilter()?r=2:e.hasHostname()&&(r=1),t.pushUint8(r),t.pushUint32(e.mask),t.pushUint32(e.id),0!==r&&(t.pushStr(e.hostname),1!==r&&(t.pushStr(e.filter),2!==r&&(t.pushStr(e.optDomains),3!==r&&(t.pushStr(e.optNotDomains),4!==r&&t.pushStr(e.redirect)))))}function re(e){const t=e.getUint8(),r=e.getUint32(),n=e.getUint32(),i=t>0?e.getStr():"",s=t>1?e.getStr():"",a=t>2?e.getStr():"",o=t>3?e.getStr():"",u=t>4?e.getStr():"";return new C({filter:s,hostname:i,id:n,mask:r,optDomains:a,optNotDomains:o,redirect:u})}function ne(e,t){t.pushUint8(e.mask),t.pushUint32(e.id),t.pushStr(e.selector),t.pushStr(e.hostnames)}function ie(e){const t=e.getUint8(),r=e.getUint32(),n=e.getStr(),i=e.getStr();return new B({hostnames:i,id:r,mask:t,selector:n})}function se(e,t){t.pushUint32(e.length);for(let r=0;r<e.length;r+=1)te(e[r],t)}function ae(e,t){const r=e.getUint32(),n=[];for(let i=0;i<r;i+=1){const r=re(e);n.push(r),t.set(r.id,r)}return n}function oe(e,t){const r=e.getUint32(),n=[];for(let i=0;i<r;i+=1){const r=ie(e);n.push(r),t.set(r.id,r)}return n}function ue(e,t){e.pushUint8(t.size),t.forEach((t,r)=>{e.pushStr(r),e.pushStr(t.checksum),function(e,t){t.pushUint32(e.length);for(let r=0;r<e.length;r+=1)ne(e[r],t)}(t.cosmetics,e),se(t.exceptions,e),se(t.filters,e),se(t.importants,e),se(t.redirects,e)})}function ce(e,t){const r=[],n=e.getUint16(),i=e.getUint32();for(let i=0;i<n;i+=1){const n=e.getUint32(),i=t.get(n);void 0!==i&&r.push(i)}return{bucket:{filters:r,hit:0,optimized:!1},token:i}}function le(e,t){const r=e.index,n=[...r.keys()];t.pushUint32(e.size),t.pushUint32(n.length),r.forEach((e,r)=>{!function(e,t,r){r.pushUint16(t.length),r.pushUint32(e);for(let e=0;e<t.length;e+=1)r.pushUint32(t[e].id)}(r,e.filters,t)})}function de(e,t,r){const n=new Map,i=e.getUint32(),s=e.getUint32();for(let t=0;t<s;t+=1){const{token:t,bucket:i}=ce(e,r);n.set(t,i)}return t.index=n,t.size=i,t}function he(e,t){const r=new ee(0);r.set(e);const n=r.getUint8();if(t!==n)throw new Error("serialized engine version mismatch");const i={loadCosmeticFilters:Boolean(r.getUint8()),loadNetworkFilters:Boolean(r.getUint8()),optimizeAOT:Boolean(r.getUint8()),version:n},s=new _e(i),{js:a,resources:o,resourceChecksum:u}=function(e){const t=new Map,r=new Map,n=e.getStr(),i=e.getUint8();for(let r=0;r<i;r+=1)t.set(e.getStr(),e.getStr());const s=e.getUint8();for(let t=0;t<s;t+=1)r.set(e.getStr(),{contentType:e.getStr(),data:e.getStr()});return{js:t,resourceChecksum:n,resources:r}}(r);s.js=a,s.resources=o,s.resourceChecksum=u;const{lists:c,networkFilters:l,cosmeticFilters:d}=function(e){const t=new Map,r=new Map,n=new Map,i=e.getUint8();for(let s=0;s<i;s+=1)t.set(e.getStr(),{checksum:e.getStr(),cosmetics:oe(e,n),exceptions:ae(e,r),filters:ae(e,r),importants:ae(e,r),redirects:ae(e,r)});return{cosmeticFilters:n,lists:t,networkFilters:r}}(r);return s.lists=c,de(r,s.filters.index,l),de(r,s.exceptions.index,l),de(r,s.importants.index,l),de(r,s.redirects.index,l),de(r,s.cosmetics.hostnameIndex,d),de(r,s.cosmetics.selectorIndex,d),s}function fe(e,t){for(let r=0;r<t.length;r+=1)e.push(t[r]);return e}class pe{constructor(e,t=[]){this.name=e,this.index=new Z(t,e=>e.getTokens(),{optimizer:z})}get size(){return this.index.size}report(){return this.index.report()}optimizeAheadOfTime(){this.index.optimizeAheadOfTime()}match(e){let t=null;return this.index.iterMatchingFilters(e.tokens,r=>!P(r,e)||(t=r,!1)),t}}class me{constructor(e=[]){this.hostnameIndex=new Z((e||[]).filter(e=>e.hasHostnames()),e=>{const t=[];return e.hostnames.split(",").forEach(e=>{t.push($(e))}),t}),this.selectorIndex=new Z((e||[]).filter(e=>!(e.isScriptBlock()||e.isScriptInject())),e=>e.getTokens(),{})}get size(){return this.hostnameIndex.size+this.selectorIndex.size}createContentScriptResponse(e){const t=[],r=[],n=[];for(let i=0;i<e.length;i+=1){const s=e[i],a=s.getSelector();s.isScriptBlock()?n.push(a):s.isScriptInject()?r.push(a):t.push(a)}return{active:!0,blockedScripts:n,scripts:r,styles:t}}getDomainRules(e,t){const r=[];return this.hostnameIndex.iterMatchingFilters($(e),n=>{const i=O(n,e);if(null!==i)if(n.isScriptInject()){const e=new B(n);let s=n.getSelector(),a=[];if(-1!==s.indexOf(",")){const e=s.split(",");s=e[0],a=e.slice(1).map(e=>e.trim())}let o=t.get(s);if(void 0!==o){for(let e=0;e<a.length;e+=1)o=o.replace(`{{${e+1}}}`,a[e]);e.selector=o,r.push({hostname:i.hostname,rule:e})}}else r.push({hostname:i.hostname,rule:n});return!0}),this.filterExceptions(r)}getMatchingRules(e,t){const r=new Set;for(let e=0;e<t.length;e+=1){const n=t[e];for(let e=0;e<n.length;e+=1)r.add(f(n[e]))}const n=[];return this.selectorIndex.iterMatchingFilters([...r],t=>{const r=O(t,e);return null!==r&&n.push({hostname:r.hostname,rule:t}),!0}),this.filterExceptions(n)}filterExceptions(e){const t=new Map;for(let r=0;r<e.length;r+=1){const{rule:n,hostname:i}=e[r],s=n.getSelector(),a=p(i,"~");if(t.has(s)){const e=t.get(s);(n.isUnhide()||a||i.length>e.hostname.length)&&t.set(s,{hostname:i,isException:a,rule:n})}else t.set(s,{hostname:i,isException:a,rule:n})}const r=[];return t.forEach(({rule:e,isException:t})=>{t||e.isUnhide()||r.push(e)}),r}}class _e{constructor({loadCosmeticFilters:e,loadNetworkFilters:t,optimizeAOT:r,version:n}){this.loadCosmeticFilters=e,this.loadNetworkFilters=t,this.optimizeAOT=r,this.version=n,this.lists=new Map,this.exceptions=new pe("exceptions"),this.importants=new pe("importants"),this.redirects=new pe("redirects"),this.filters=new pe("filters"),this.cosmetics=new me,this.resourceChecksum="",this.js=new Map,this.resources=new Map}get size(){return this.exceptions.size+this.importants.size+this.redirects.size+this.cosmetics.size+this.filters.size}hasList(e,t){const r=this.lists.get(e);return void 0!==r&&r.checksum===t}onUpdateResource(e){for(let t=0;t<e.length;t+=1){const{filters:r,checksum:n}=e[t];this.resourceChecksum=n;const i=J(r),s=i.get("application/javascript");void 0!==s&&(this.js=s),i.forEach((e,t)=>{e.forEach((e,r)=>{this.resources.set(r,{contentType:t,data:e})})})}}onUpdateFilters(e,t,r=!1,n=!1){let i=!1;this.lists.forEach((e,r)=>{t.has(r)||(this.lists.delete(r),i=!0)}),e.length>0&&(i=!0);for(let t=0;t<e.length;t+=1){const{asset:r,filters:i,checksum:s}=e[t],{cosmeticFilters:a,networkFilters:o}=K(i,{debug:n,loadCosmeticFilters:this.loadCosmeticFilters,loadNetworkFilters:this.loadNetworkFilters}),u=[],c=[],l=[],d=[];for(let e=0;e<o.length;e+=1){const t=o[e];t.isException()?c.push(t):t.isImportant()?l.push(t):t.isRedirect()?d.push(t):u.push(t)}this.lists.set(r,{checksum:s,cosmetics:a,exceptions:c,filters:u,importants:l,redirects:d})}const s=function(e){const t=[],r=[],n=[],i=[],s=[];return e.forEach(e=>{fe(t,e.filters),fe(r,e.exceptions),fe(i,e.importants),fe(n,e.redirects),fe(s,e.cosmetics)}),{cosmetics:s,exceptions:r,filters:t,importants:i,redirects:n}}(this.lists);this.filters=new pe("filters",s.filters),this.exceptions=new pe("exceptions",s.exceptions),this.importants=new pe("importants",s.importants),this.redirects=new pe("redirects",s.redirects),this.cosmetics=new me(s.cosmetics);let a=null;return i&&r&&(a=function(e){const t=new ee(4e6);return t.pushUint8(e.version),t.pushUint8(Number(e.loadCosmeticFilters)),t.pushUint8(Number(e.loadNetworkFilters)),t.pushUint8(Number(e.optimizeAOT)),function(e,t){t.pushStr(e.resourceChecksum),t.pushUint8(e.js.size),e.js.forEach((e,r)=>{t.pushStr(r),t.pushStr(e)}),t.pushUint8(e.resources.size),e.resources.forEach(({contentType:e,data:r},n)=>{t.pushStr(n),t.pushStr(e),t.pushStr(r)})}(e,t),ue(t,e.lists),le(e.filters.index,t),le(e.exceptions.index,t),le(e.importants.index,t),le(e.redirects.index,t),le(e.cosmetics.hostnameIndex,t),le(e.cosmetics.selectorIndex,t),t.crop()}(this)),this.optimizeAOT&&(this.filters.optimizeAheadOfTime(),this.exceptions.optimizeAheadOfTime(),this.importants.optimizeAheadOfTime(),this.redirects.optimizeAheadOfTime()),a}getCosmeticsFilters(e,t){return this.loadCosmeticFilters?this.cosmetics.createContentScriptResponse(this.cosmetics.getMatchingRules(e,t)):this.cosmetics.createContentScriptResponse([])}getDomainFilters(e){return this.loadCosmeticFilters?this.cosmetics.createContentScriptResponse(this.cosmetics.getDomainRules(e,this.js)):this.cosmetics.createContentScriptResponse([])}match(e){if(!this.loadNetworkFilters)return{match:!1};const t=Q(e);let r,n=null,i=null;if(null===(n=this.importants.match(t))&&(null===(n=this.redirects.match(t))&&(n=this.filters.match(t)),null!==n&&null!==(i=this.exceptions.match(t))&&(n=null)),null!==n?r=n.toString():null!==i&&(r=i.toString()),null!==n){if(n.isRedirect()){const e=this.resources.get(n.getRedirect());if(void 0!==e){const{data:t,contentType:n}=e;let i;return{filter:r,match:!0,redirect:(i=-1!==n.indexOf(";")?`data:${n},${t}`:`data:${n};base64,${btoa(t)}`).trim()}}}return{filter:r,match:!0}}return{exception:null!==i,filter:r,match:!1}}}r.d(t,"CosmeticsInjection",function(){return s}),r.d(t,"FiltersEngine",function(){return _e}),r.d(t,"processRawRequest",function(){return Q}),r.d(t,"deserializeEngine",function(){return he}),r.d(t,"matchCosmeticFilter",function(){return O}),r.d(t,"matchNetworkFilter",function(){return P}),r.d(t,"ReverseIndex",function(){return Z}),r.d(t,"parseCosmeticFilter",function(){return W}),r.d(t,"parseNetworkFilter",function(){return N}),r.d(t,"compactTokens",function(){return o}),r.d(t,"hasEmptyIntersection",function(){return u}),r.d(t,"mergeCompactSets",function(){return c})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var n=r(153),i=r(156),s=r(275),a=r(105);e.exports=function(e,t,r){if(!a(r))return!1;var o=typeof t;return!!("number"==o?i(r)&&s(t,r.length):"string"==o&&t in r)&&n(r[t],e)}},function(e,t){var r=800,n=16,i=Date.now;e.exports=function(e){var t=0,s=0;return function(){var a=i(),o=n-(a-s);if(s=a,o>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,r){var n=r(560),i=r(269),s=r(265),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=a},function(e,t,r){var n=r(561),i=r(559)(n);e.exports=i},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var n=r(563),i=Math.max;e.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,a=-1,o=i(s.length-t,0),u=Array(o);++a<o;)u[a]=s[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=s[a];return c[t]=r(u),n(e,this,c)}}},function(e,t,r){var n=r(265),i=r(564),s=r(562);e.exports=function(e,t){return s(i(e,t,n),e+"")}},function(e,t,r){var n=r(565),i=r(558);e.exports=function(e){return n(function(t,r){var n=-1,s=r.length,a=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(s--,a):void 0,o&&i(r[0],r[1],o)&&(a=s<3?void 0:a,s=1),t=Object(t);++n<s;){var u=r[n];u&&e(t,u,n,a)}return t})}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){var n=r(105),i=r(212),s=r(567),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=i(e),r=[];for(var o in e)("constructor"!=o||!t&&a.call(e,o))&&r.push(o);return r}},function(e,t,r){var n=r(209),i=r(153),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];s.call(e,t)&&i(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t,r){var n=r(569),i=r(209);e.exports=function(e,t,r,s){var a=!r;r||(r={});for(var o=-1,u=t.length;++o<u;){var c=t[o],l=s?s(r[c],e[c],c,r,e):void 0;void 0===l&&(l=e[c]),a?i(r,c,l):n(r,c,l)}return r}},function(e,t,r){var n=r(570),i=r(266);e.exports=function(e){return n(e,i(e))}},function(e,t,r){var n=r(130),i=r(268),s=r(117),a="[object Object]",o=Function.prototype,u=Object.prototype,c=o.toString,l=u.hasOwnProperty,d=c.call(Object);e.exports=function(e){if(!s(e)||n(e)!=a)return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==d}},function(e,t,r){var n=r(156),i=r(117);e.exports=function(e){return i(e)&&n(e)}},function(e,t,r){var n=r(105),i=Object.create,s=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=s},function(e,t,r){var n=r(574),i=r(268),s=r(212);e.exports=function(e){return"function"!=typeof e.constructor||s(e)?{}:n(i(e))}},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){var n=r(118).Uint8Array;e.exports=n},function(e,t,r){var n=r(577);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t,r){var n=r(578);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t,r){(function(e){var n=r(118),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(67)(e))},function(e,t,r){var n=r(270),i=r(580),s=r(579),a=r(576),o=r(575),u=r(277),c=r(157),l=r(573),d=r(276),h=r(211),f=r(105),p=r(572),m=r(274),_=r(267),g=r(571);e.exports=function(e,t,r,y,v,b,$){var w=_(e,r),k=_(t,r),M=$.get(k);if(M)n(e,r,M);else{var S=b?b(w,k,r+"",e,t,$):void 0,O=void 0===S;if(O){var x=c(k),T=!x&&d(k),E=!x&&!T&&m(k);S=k,x||T||E?c(w)?S=w:l(w)?S=a(w):T?(O=!1,S=i(k,!0)):E?(O=!1,S=s(k,!0)):S=[]:p(k)||u(k)?(S=w,u(w)?S=g(w):(!f(w)||y&&h(w))&&(S=o(k))):O=!1}O&&($.set(k,S),v(S,k,y,b,$),$.delete(k)),n(e,r,S)}}},function(e,t){e.exports=function(e){return function(t,r,n){for(var i=-1,s=Object(t),a=n(t),o=a.length;o--;){var u=a[e?o:++i];if(!1===r(s[u],u,s))break}return t}}},function(e,t,r){var n=r(582)();e.exports=n},function(e,t,r){var n=r(151);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},function(e,t,r){var n=r(151);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(151);e.exports=function(e){return n(this,e).get(e)}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(151);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t,r){var n=r(152),i="__lodash_hash_undefined__";e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?i:t,this}},function(e,t,r){var n=r(152),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},function(e,t,r){var n=r(152),i="__lodash_hash_undefined__",s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===i?void 0:r}return s.call(t,e)?t[e]:void 0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(152);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t,r){var n=r(593),i=r(592),s=r(591),a=r(590),o=r(589);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=a,u.prototype.set=o,e.exports=u},function(e,t,r){var n=r(594),i=r(155),s=r(271);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},function(e,t,r){var n=r(595),i=r(588),s=r(586),a=r(585),o=r(584);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=a,u.prototype.set=o,e.exports=u},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){var n=r(118)["__core-js_shared__"];e.exports=n},function(e,t,r){var n=r(599),i=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t,r){var n=r(211),i=r(600),s=r(105),a=r(598),o=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,d=c.hasOwnProperty,h=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(n(e)?h:o).test(a(e))}},function(e,t,r){var n=r(155),i=r(271),s=r(596),a=200;e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var o=r.__data__;if(!i||o.length<a-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new s(o)}return r.set(e,t),this.size=r.size,this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t,r){var n=r(155);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t,r){var n=r(154);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},function(e,t,r){var n=r(154);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(154);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(154),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(155),i=r(606),s=r(605),a=r(604),o=r(603),u=r(602);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=a,c.prototype.has=o,c.prototype.set=u,e.exports=c},function(e,t,r){var n=r(612),i=r(270),s=r(583),a=r(581),o=r(105),u=r(266),c=r(267);e.exports=function e(t,r,l,d,h){t!==r&&s(r,function(s,u){if(o(s))h||(h=new n),a(t,r,u,l,e,d,h);else{var f=d?d(c(t,u),s,u+"",t,r,h):void 0;void 0===f&&(f=s),i(t,u,f)}},u)}},function(e,t,r){var n=r(613),i=r(566)(function(e,t,r){n(e,t,r)});e.exports=i},function(e,t,r){var n=r(272)(Object.keys,Object);e.exports=n},function(e,t,r){var n=r(212),i=r(615),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t,r){(function(e){var n=r(280),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i&&n.process,o=function(){try{var e=s&&s.require&&s.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o}).call(this,r(67)(e))},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){var n=r(130),i=r(273),s=r(117),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&i(e.length)&&!!a[n(e)]}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(130),i=r(117),s="[object Arguments]";e.exports=function(e){return i(e)&&n(e)==s}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(278),i=r(616),s=r(156);e.exports=function(e){return s(e)?n(e):i(e)}},function(e,t){e.exports=function(e){return null===e}},function(e,t){var r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="["+r+"]",i="\\d+",s="[\\u2700-\\u27bf]",a="[a-z\\xdf-\\xf6\\xf8-\\xff]",o="[^\\ud800-\\udfff"+r+i+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="[A-Z\\xc0-\\xd6\\xd8-\\xde]",d="(?:"+a+"|"+o+")",h="(?:"+l+"|"+o+")",f="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",p="[\\ufe0e\\ufe0f]?"+f+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",u,c].join("|")+")[\\ufe0e\\ufe0f]?"+f+")*"),m="(?:"+[s,u,c].join("|")+")"+p,_=RegExp([l+"?"+a+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[n,l,"$"].join("|")+")",h+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[n,l+d,"$"].join("|")+")",l+"?"+d+"+(?:['’](?:d|ll|m|re|s|t|ve))?",l+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i,m].join("|"),"g");e.exports=function(e){return e.match(_)||[]}},function(e,t){var r=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return r.test(e)}},function(e,t){var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(r)||[]}},function(e,t,r){var n=r(627),i=r(626),s=r(158),a=r(625);e.exports=function(e,t,r){return e=s(e),void 0===(t=r?void 0:t)?i(e)?a(e):n(e):e.match(t)||[]}},function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,r){var n=r(629)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});e.exports=n},function(e,t,r){var n=r(630),i=r(158),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(s,n).replace(a,"")}},function(e,t){e.exports=function(e,t,r,n){var i=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}},function(e,t,r){var n=r(632),i=r(631),s=r(628),a=RegExp("['’]","g");e.exports=function(e){return function(t){return n(s(i(t).replace(a,"")),e,"")}}},function(e,t){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",s="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[s,a,o].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[s+n+"?",n,a,o,r].join("|")+")",d=RegExp(i+"(?="+i+")|"+l+c,"g");e.exports=function(e){return e.match(d)||[]}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t,r){var n=r(635),i=r(279),s=r(634);e.exports=function(e){return i(e)?s(e):n(e)}},function(e,t){e.exports=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}},function(e,t,r){var n=r(637);e.exports=function(e,t,r){var i=e.length;return r=void 0===r?i:r,!t&&r>=i?e:n(e,t,r)}},function(e,t,r){var n=r(638),i=r(279),s=r(636),a=r(158);e.exports=function(e){return function(t){t=a(t);var r=i(t)?s(t):void 0,o=r?r[0]:t.charAt(0),u=r?n(r,1).join(""):t.slice(1);return o[e]()+u}}},function(e,t,r){var n=r(639)("toUpperCase");e.exports=n},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n=r(213),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[o]=r:delete e[o]),i}},function(e,t,r){var n=r(130),i=r(117),s="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&n(e)==s}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},function(e,t,r){var n=r(213),i=r(644),s=r(157),a=r(643),o=1/0,u=n?n.prototype:void 0,c=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return i(t,e)+"";if(a(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-o?"-0":r}},function(e,t,r){var n=r(158),i=r(640);e.exports=function(e){return i(n(e).toLowerCase())}},function(e,t,r){var n=r(646),i=r(633)(function(e,t,r){return t=t.toLowerCase(),e+(r?n(t):t)});e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setApp=function(e){(0,n.setGlobal)(e)};var n=r(31),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={inject:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(214));t.default=class{constructor(e){this._initializer=e}init(){return this._readyDefer?this._readyDefer.promise:(this._readyDefer=new n.default,Promise.resolve().then(()=>this._initializer()).then(e=>{this._readyDefer.resolve(),this.api=e},e=>{throw this._readyDefer.reject(e),e}),this._readyDefer.promise)}unload(){this._readyDefer&&this._initializer.unload&&this._initializer.unload()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(11)),i=s(r(281));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.window=e.window}init(){}unload(){}status(){const e=this.window.gBrowser.currentURI.spec,t=i.default.isInWhitelist(e),r=i.default.getUrlWhitelistStatus(e),s=n.default.get("cliqz-anti-phishing-enabled",!0);let a="active";return t&&r!==i.default.WHITELISTED_TEMPORARY&&(a="inactive"),s||(a="critical"),{visible:!0,active:s,isWhitelisted:t,state:a}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(55),s=d(r(11)),a=d(r(281)),o=d(r(78)),u=d(r(31)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(65)),l=d(r(24));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){const n=a.default.blackWhiteList.value[t],i=r in n&&n[r].includes("black");return i&&function(){const e=u.default.module("human-web");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.action("addDataToUrl",...r)}(e,"anti-phishing","block").catch(()=>l.default.log("failed to update url",e)),i}t.default=(0,o.default)({init(){a.default.init(),this.CliqzAntiPhishing=a.default},unload(){a.default.unload()},beforeBrowserShutdown(){a.default.unload()},actions:{isPhishingURL(e){if(!a.default.isAntiPhishingActive())return{block:!1,type:"phishingURL"};var t=a.default.getSplitMd5(e),r=n(t,2);const s=r[0],o=r[1],u=a.default.forceWhiteList.value;if(s in u)return u[s]===a.default.WHITELISTED_TEMPORARY&&setTimeout(()=>{delete u[s]},1e3),{block:!1,type:"phishingURL"};a.default.clearBWList();const l=a.default.blackWhiteList.value;return l[s]&&l[s][o]&&!l[s][o].startsWith("suspicious")?{block:h(e,s,o),type:"phishingURL"}:new Promise((t,r)=>{(0,i.httpGet)(a.default.BW_URL+s,r=>{!function(e,t){const r=c.getTime(),n=e.response,i=JSON.parse(n).blacklist,s=JSON.parse(n).whitelist,o=a.default.blackWhiteList.value;o[t]||(o[t]={h:r});for(let e=0;e<i.length;e+=1)o[t][i[e][0]]=`black:${i[e][1]}`;for(let e=0;e<s.length;e+=1)o[t][s[e]]="white";a.default.blackWhiteList.setDirty()}(r,s),t({block:h(e,s,o),type:"phishingURL"})},e=>{r(e)},3e3)})},activator(e,t){switch(e){case"active":a.default.removeForceWhitelist(t),s.default.set("cliqz-anti-phishing-enabled",!0);break;case"off_website":case"inactive":s.default.set("cliqz-anti-phishing-enabled",!0),a.default.whitelist(t);break;case"critical":case"off_all":a.default.removeForceWhitelist(t),s.default.set("cliqz-anti-phishing-enabled",!1)}}},events:{"human-web:active-url":function(){return a.default.onHwActiveURL(...arguments)}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(651)),i=s(r(650));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{init(){}unload(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(r(81)),s=a(r(284));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){const r=Object.create(null),n=[...new Set([...Object.keys(e),...Object.keys(t)])];for(let i=0;i<n.length;i+=1){const s=n[i];r[s]=(t[s]||0)+(e[s]||0)}return r}t.default={name:"analysis.performance.webrequest-pipeline.timings",version:1,needsGid:!0,sendToBackend:!0,generate:e=>{const t=e.records.get("metrics.performance.webrequest-pipeline.timings");if(0===t.length)return[];const r=new i.default(()=>Object.create(null));for(let e=0;e<t.length;e+=1){const n=t[e];for(let e=0;e<n.length;e+=1){var s=n[e];const t=s.step,i=s.histogram;r.update(t,e=>o(e,i))}}return[[...r.entries()].filter(e=>{let t=n(e,2)[1];return Object.keys(t)!==[0]}).map(e=>{var t=n(e,2);return{step:t[0],histogram:t[1]}})]},schema:s.default.schema}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"analysis.history.visits.count",version:1,needsGid:!0,sendToBackend:!0,generate:e=>{const t=e.records.get("metrics.history.visits.count");if(0===t.length)return[];let r=t.reduce((e,t)=>e+t.visitsCount,0);return r>300&&(r=null),[{count:r}]},schema:{required:["count"],properties:{count:{oneOf:[{type:"integer",minimum:0,maximum:300},{type:"null"}]}}}}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(282),s=r(285);const a=e=>{var t=e.sources;return(void 0===t?[]:t).includes("n")},o=e=>{var t=e.sources;let r=void 0===t?[]:t;var n=e.classes;let i=void 0===n?[]:n;return r.includes("X")&&i.includes("EntityNews")},u=e=>{var t=e.sources;return(void 0===t?[]:t).some(e=>i.historySources.has(e))},c=e=>e.some(u),l=(e,t)=>{const r=[];return e.forEach((e,n)=>{t(e)&&r.push(n)}),r},d=(e,t)=>e.filter(e=>{return e.subResult.type===t}).reduce(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1].subResult;return e.concat(t.index)},[]),h=(e,t)=>e.filter(e=>{var r=e.selection;return t(void 0===r?[]:r)}).map(e=>{var t=e.selection;return void 0===t?[]:t});t.default=[{name:"news-search",version:1,needsGid:!0,sendToBackend:!0,generate:e=>{const t=e.records.get("search.session");if(0===t.length)return[];const r=t.filter(e=>{return e.hasUserInput}),n=r.filter(e=>{return(e=>e.some(a))(e.results)}),f=n.map(e=>{var t=e.results;return void 0===t?[]:t}).filter(e=>e.length>0),p=f.map(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l(e,a)}).reduce(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return e.concat(t)},[]),m=f.reduce(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1].length;return e.concat(t)},[]),_=h(n,a),g=_.reduce(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1].index;return e.concat(t)},[]),y=r.filter(e=>{return(e=>e.some(o))(e.results)}),v=y.map(e=>{var t=e.results;return void 0===t?[]:t}).filter(e=>e.length>0),b=v.filter(c),$=v.map(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l(e,o)}).reduce(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return e.concat(t)},[]),w=h(y,o),k=h(y,u),M=w.reduce(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1].index;return e.concat(t)},[]),S=w.filter(e=>{return e.subResult.type===s.NEWS_RESULT}),O=w.filter(e=>{return e.subResult.type===s.INTERNAL_RESULT}),x=d(w,s.NEWS_RESULT),T=d(w,s.INTERNAL_RESULT);return[{nsd:{results:{total:f.length,index:(0,i.integersToHistogram)(p,{binSize:1,binCount:16}),size:(0,i.integersToHistogram)(m,{binSize:1,binCount:16})},selections:{total:_.length,index:(0,i.integersToHistogram)(g,{binSize:1,binCount:16}),action:{autocomplete:_.filter(i.isAutocompleteAction).length,click:_.filter(i.isClickAction).length,enter:_.filter(i.isEnterAction).length}}},scNews:{results:{total:v.length,index:(0,i.integersToHistogram)($,{binSize:1,binCount:16}),withHistory:b.length},selections:{total:w.length,history:k.length,index:(0,i.integersToHistogram)(M,{binSize:1,binCount:16}),subResult:{news:{total:S.length,index:(0,i.integersToHistogram)(x,{binSize:1,binCount:16})},category:{total:O.length,index:(0,i.integersToHistogram)(T,{binSize:1,binCount:16})}},action:{autocomplete:w.filter(i.isAutocompleteAction).length,click:w.filter(i.isClickAction).length,enter:w.filter(i.isEnterAction).length}}}}]},schema:{required:[],properties:{nsd:{required:[],properties:{results:{required:[],properties:n({},(0,i.mkCountSchema)("total"),{index:n({},(0,i.mkHistogramSchema)(16)),size:n({},(0,i.mkHistogramSchema)(16))})},selections:{required:[],properties:n({},(0,i.mkCountSchema)("total"),{index:n({},(0,i.mkHistogramSchema)(16)),action:{required:[],properties:n({},(0,i.mkCountSchema)("autocomplete"),(0,i.mkCountSchema)("click"),(0,i.mkCountSchema)("enter"))}})}}},scNews:{required:[],properties:{results:{required:[],properties:n({},(0,i.mkCountSchema)("total"),{index:n({},(0,i.mkHistogramSchema)(16))},(0,i.mkCountSchema)("withHistory"))},selections:{required:[],properties:n({},(0,i.mkCountSchema)("total"),(0,i.mkCountSchema)("history"),{index:n({},(0,i.mkHistogramSchema)(16)),subResult:{required:[],properties:{news:{required:[],properties:n({},(0,i.mkCountSchema)("total"),{index:n({},(0,i.mkHistogramSchema)(16))})},category:{required:[],properties:n({},(0,i.mkCountSchema)("total"),{index:n({},(0,i.mkHistogramSchema)(16))})}}},action:{required:[],properties:n({},(0,i.mkCountSchema)("autocomplete"),(0,i.mkCountSchema)("click"),(0,i.mkCountSchema)("enter"))}})}}}}}}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"analyses.favorites.migration.folders",version:1,needsGid:!0,sendToBackend:!0,generate:e=>{return e.records.get("metrics.favorites.migration.folders").splice(-1)},schema:{required:["count","rootFolderCount","maxDepth"],properties:{count:{type:"integer",minimum:0},rootFolderCount:{type:"integer",minimum:0},maxDepth:{type:"integer",minimum:0}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"analyses.controlCenter.interactions",version:1,needsGid:!0,sendToBackend:!0,generate:e=>{let t=e.records;return[{shows:t.get("metrics.controlCenter.show").length,clicks:{pause:t.get("metrics.controlCenter.click.pause").length,resume:t.get("metrics.controlCenter.click.resume").length,trustSite:t.get("metrics.controlCenter.click.trustSite").length,restrictSite:t.get("metrics.controlCenter.click.restrictSite").length}}]},schema:{required:["shows","clicks"],properties:{shows:{type:"integer",minimum:0},clicks:{required:["pause","resume","trustSite","restrictSite"],properties:{pause:{type:"integer",minimum:0},resume:{type:"integer",minimum:0},trustSite:{type:"integer",minimum:0},restrictSite:{type:"integer",minimum:0}}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"analyses.experiments.serp",version:1,needsGid:!1,sendToBackend:!0,generate:e=>{let t=e.records;const r=t.get("metrics.experiments.serp.state");if(0===r.length)return[];const n=r[r.length-1],i=n.group,s=n.isCliqzDefaultEngine,a=t.get("metrics.experiments.serp.show"),o=t.get("metrics.experiments.serp.click.result"),u=t.get("metrics.experiments.serp.click.search"),c=t.get("search.session").filter(e=>{return e.hasUserInput}).map(e=>{var t=e.selection;return void 0===t?[]:t}),l=c.filter(e=>"cliqz"===e.origin),d=c.filter(e=>"direct"===e.origin);return[{group:i,isCliqzDefaultEngine:s,dropdownSelections:{cliqz:{total:l.length,isSearchEngine:l.filter(e=>{return e.isSearchEngine}).length},direct:{total:d.length,isSearchEngine:d.filter(e=>{return e.isSearchEngine}).length},other:c.filter(e=>"other"===e.origin).length,abandoned:c.filter(e=>null===e.origin).length},serpSelections:{result:o.filter(e=>{return"m"===e.source}).length,suggestion:o.filter(e=>{return"Z"===e.source}).length,other:u.length,abandoned:a.length-(o.length+u.length)}}]},schema:{required:[],properties:{group:{enum:["A","B","C",null]},isCliqzDefaultEngine:{type:"boolean"},dropdownSelections:{required:[],properties:{cliqz:{required:[],properties:{total:{type:"integer",minimum:0},isSearchEngine:{type:"integer",minimum:0}}},direct:{required:[],properties:{total:{type:"integer",minimum:0},isSearchEngine:{type:"integer",minimum:0}}},other:{type:"integer",minimum:0},abandoned:{type:"integer",minimum:0}}},serpSelections:{required:[],properties:{result:{type:"integer",minimum:0},suggestion:{type:"integer",minimum:0},other:{type:"integer",minimum:0},abandoned:{type:"integer"}}}}}}]},function(e,t,r){!function(e){"use strict";function t(e){if(0===e.length)return 0;for(var t,r=e[0],n=0,i=1;i<e.length;i++)t=r+e[i],Math.abs(r)>=Math.abs(e[i])?n+=r-t+e[i]:n+=e[i]-t+r,r=t;return r+n}function r(e){if(0===e.length)throw new Error("mean requires at least one data point");return t(e)/e.length}function n(e,t){var n,i,s=r(e),a=0;if(2===t)for(i=0;i<e.length;i++)a+=(n=e[i]-s)*n;else for(i=0;i<e.length;i++)a+=Math.pow(e[i]-s,t);return a}function i(e){if(0===e.length)throw new Error("variance requires at least one data point");return n(e,2)/e.length}function s(e){if(1===e.length)return 0;var t=i(e);return Math.sqrt(t)}function a(e){if(0===e.length)throw new Error("mode requires at least one data point");if(1===e.length)return e[0];for(var t=e[0],r=NaN,n=0,i=1,s=1;s<e.length+1;s++)e[s]!==t?(i>n&&(n=i,r=t),i=1,t=e[s]):i++;return r}function o(e){return e.slice().sort(function(e,t){return e-t})}function u(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],r=1;r<e.length;r++)e[r]<t&&(t=e[r]);return t}function c(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],r=1;r<e.length;r++)e[r]>t&&(t=e[r]);return t}function l(e,t){var r=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:r%1!=0?e[Math.ceil(r)-1]:e.length%2==0?(e[r-1]+e[r])/2:e[r]}function d(e,t,r,n){for(r=r||0,n=n||e.length-1;n>r;){if(n-r>600){var i=n-r+1,s=t-r+1,a=Math.log(i),o=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*o*(i-o)/i);s-i/2<0&&(u*=-1),d(e,t,Math.max(r,Math.floor(t-s*o/i+u)),Math.min(n,Math.floor(t+(i-s)*o/i+u)))}var c=e[t],l=r,f=n;for(h(e,r,t),e[n]>c&&h(e,r,n);l<f;){for(h(e,l,f),l++,f--;e[l]<c;)l++;for(;e[f]>c;)f--}e[r]===c?h(e,r,f):h(e,++f,n),f<=t&&(r=f+1),t<=f&&(n=f-1)}}function h(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function f(e,t){var r=e.slice();if(Array.isArray(t)){!function(e,t){for(var r=[0],n=0;n<t.length;n++)r.push(_(e.length,t[n]));r.push(e.length-1),r.sort(m);for(var i=[0,r.length-1];i.length;){var s=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(s-a<=1)){var o=Math.floor((a+s)/2);p(e,r[o],r[a],r[s]),i.push(a,o,o,s)}}}(r,t);for(var n=[],i=0;i<t.length;i++)n[i]=l(r,t[i]);return n}return p(r,_(r.length,t),0,r.length-1),l(r,t)}function p(e,t,r,n){t%1==0?d(e,t,r,n):(d(e,t=Math.floor(t),r,n),d(e,t+1,t+1,n))}function m(e,t){return e-t}function _(e,t){var r=e*t;return 1===t?e-1:0===t?0:r%1!=0?Math.ceil(r)-1:e%2==0?r-.5:r}function g(e){var t=f(e,.75),r=f(e,.25);if("number"==typeof t&&"number"==typeof r)return t-r}function y(e){return+f(e,.5)}function v(e){for(var t=y(e),r=[],n=0;n<e.length;n++)r.push(Math.abs(e[n]-t));return y(r)}function b(e,t){t=t||Math.random;for(var r,n,i=e.length;i>0;)n=Math.floor(t()*i--),r=e[i],e[i]=e[n],e[n]=r;return e}function $(e,t){return b(e.slice().slice(),t)}function w(e){for(var t,r=0,n=0;n<e.length;n++)0!==n&&e[n]===t||(t=e[n],r++);return r}function k(e,t){for(var r=[],n=0;n<e;n++){for(var i=[],s=0;s<t;s++)i.push(0);r.push(i)}return r}function M(e,t,r,n){var i;if(e>0){var s=(r[t]-r[e-1])/(t-e+1);i=n[t]-n[e-1]-(t-e+1)*s*s}else i=n[t]-r[t]*r[t]/(t+1);return i<0?0:i}function S(e,t,r,n,i,s,a){if(!(e>t)){var o=Math.floor((e+t)/2);n[r][o]=n[r-1][o-1],i[r][o]=o;var u=r;e>r&&(u=Math.max(u,i[r][e-1]||0)),u=Math.max(u,i[r-1][o]||0);var c=o-1;t<n.length-1&&(c=Math.min(c,i[r][t+1]||0));for(var l,d,h,f=c;f>=u&&!((l=M(f,o,s,a))+n[r-1][u-1]>=n[r][o]);--f)(d=M(u,o,s,a)+n[r-1][u-1])<n[r][o]&&(n[r][o]=d,i[r][o]=u),u++,(h=l+n[r-1][f-1])<n[r][o]&&(n[r][o]=h,i[r][o]=f);S(e,o-1,r,n,i,s,a),S(o+1,t,r,n,i,s,a)}}function O(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=r(e),i=r(t),s=0,a=0;a<e.length;a++)s+=(e[a]-n)*(t[a]-i);return s/(e.length-1)}function x(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");return n(e,2)/(e.length-1)}function T(e){var t=x(e);return Math.sqrt(t)}function E(e,t,r,n){return(e*t+r*n)/(t+n)}function D(e){if(0===e.length)throw new Error("rootMeanSquare requires at least one data point");for(var t=0,r=0;r<e.length;r++)t+=Math.pow(e[r],2);return Math.sqrt(t/e.length)}function L(){this.totalCount=0,this.data={}}function P(){this.weights=[],this.bias=0}function A(e,t,r){var n,i;if(void 0===t)n=U.gaussian;else if("string"==typeof t){if(!U[t])throw new Error('Unknown kernel "'+t+'"');n=U[t]}else n=t;if(void 0===r)i=q.nrd(e);else if("string"==typeof r){if(!q[r])throw new Error('Unknown bandwidth method "'+r+'"');i=q[r](e)}else i=r;return function(t){var r=0,s=0;for(r=0;r<e.length;r++)s+=n((t-e[r])/i);return s/i/e.length}}function j(e){for(var t=e,r=e,n=1;n<15;n++)t+=r*=e*e/(2*n+1);return Math.round(1e4*(.5+t/H*Math.exp(-e*e/2)))/1e4}function R(e){var t=1/(1+.5*Math.abs(e)),r=t*Math.exp(-Math.pow(e,2)-1.26551223+1.00002368*t+.37409196*Math.pow(t,2)+.09678418*Math.pow(t,3)-.18628806*Math.pow(t,4)+.27886807*Math.pow(t,5)-1.13520398*Math.pow(t,6)+1.48851587*Math.pow(t,7)-.82215223*Math.pow(t,8)+.17087277*Math.pow(t,9));return e>=0?1-r:r-1}function I(e){var t=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),r=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*t)+Math.log(1-e*e)/2,2)-Math.log(1-e*e)/t)-(2/(Math.PI*t)+Math.log(1-e*e)/2));return e>=0?r:-r}function C(e){if("number"==typeof e)return e<0?-1:0===e?0:1;throw new TypeError("not a number")}L.prototype.train=function(e,t){for(var r in this.data[t]||(this.data[t]={}),e){var n=e[r];void 0===this.data[t][r]&&(this.data[t][r]={}),void 0===this.data[t][r][n]&&(this.data[t][r][n]=0),this.data[t][r][n]++}this.totalCount++},L.prototype.score=function(e){var t,r={};for(var n in e){var i=e[n];for(t in this.data)r[t]={},this.data[t][n]?r[t][n+"_"+i]=(this.data[t][n][i]||0)/this.totalCount:r[t][n+"_"+i]=0}var s={};for(t in r)for(var a in s[t]=0,r[t])s[t]+=r[t][a];return s},P.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,r=0;r<this.weights.length;r++)t+=this.weights[r]*e[r];return(t+=this.bias)>0?1:0},P.prototype.train=function(e,t){if(0!==t&&1!==t)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var r=this.predict(e);if(r!==t){for(var n=t-r,i=0;i<this.weights.length;i++)this.weights[i]+=n*e[i];this.bias+=n}return this};for(var Y=1e-4,F={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},N=Math.sqrt(2*Math.PI),U={gaussian:function(e){return Math.exp(-.5*e*e)/N}},q={nrd:function(e){var t=T(e),r=g(e);return"number"==typeof r&&(t=Math.min(t,r/1.34)),1.06*t*Math.pow(e.length,-.2)}},H=Math.sqrt(2*Math.PI),z=[],B=0;B<=3.09;B+=.01)z.push(j(B));e.linearRegression=function(e){var t,r,n=e.length;if(1===n)t=0,r=e[0][1];else{for(var i,s,a,o=0,u=0,c=0,l=0,d=0;d<n;d++)o+=s=(i=e[d])[0],u+=a=i[1],c+=s*s,l+=s*a;r=u/n-(t=(n*l-o*u)/(n*c-o*o))*o/n}return{m:t,b:r}},e.linearRegressionLine=function(e){return function(t){return e.b+e.m*t}},e.standardDeviation=s,e.rSquared=function(e,t){if(e.length<2)return 1;for(var r,n=0,i=0;i<e.length;i++)n+=e[i][1];r=n/e.length;for(var s=0,a=0;a<e.length;a++)s+=Math.pow(r-e[a][1],2);for(var o=0,u=0;u<e.length;u++)o+=Math.pow(e[u][1]-t(e[u][0]),2);return 1-o/s},e.mode=function(e){return a(o(e))},e.modeFast=function(e){for(var t,r=new Map,n=0,i=0;i<e.length;i++){var s=r.get(e[i]);void 0===s?s=1:s++,s>n&&(t=e[i],n=s),r.set(e[i],s)}if(0===n)throw new Error("mode requires at last one data point");return t},e.modeSorted=a,e.min=u,e.max=c,e.minSorted=function(e){return e[0]},e.maxSorted=function(e){return e[e.length-1]},e.sum=t,e.sumSimple=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t},e.product=function(e){for(var t=1,r=0;r<e.length;r++)t*=e[r];return t},e.quantile=f,e.quantileSorted=l,e.interquartileRange=g,e.iqr=g,e.medianAbsoluteDeviation=v,e.mad=v,e.chunk=function(e,t){var r=[];if(t<1)throw new Error("chunk size must be a positive number");if(Math.floor(t)!==t)throw new Error("chunk size must be an integer");for(var n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r},e.sampleWithReplacement=function(e,t,r){if(0===e.length)return[];r=r||Math.random;for(var n=e.length,i=[],s=0;s<t;s++){var a=Math.floor(r()*n);i.push(e[a])}return i},e.shuffle=$,e.shuffleInPlace=b,e.sample=function(e,t,r){return $(e,r).slice(0,t)},e.ckmeans=function(e,t){if(t>e.length)throw new Error("cannot generate more classes than there are data values");var r=o(e);if(1===w(r))return[r];var n=k(t,r.length),i=k(t,r.length);!function(e,t,r){for(var n,i=t[0].length,s=e[Math.floor(i/2)],a=[],o=[],u=0;u<i;++u)n=e[u]-s,0===u?(a.push(n),o.push(n*n)):(a.push(a[u-1]+n),o.push(o[u-1]+n*n)),t[0][u]=M(0,u,a,o),r[0][u]=0;for(var c=1;c<t.length;++c)S(c<t.length-1?c:i-1,i-1,c,t,r,a,o)}(r,n,i);for(var s=[],a=i[0].length-1,u=i.length-1;u>=0;u--){var c=i[u][a];s[u]=r.slice(c,a+1),u>0&&(a=c-1)}return s},e.uniqueCountSorted=w,e.sumNthPowerDeviations=n,e.equalIntervalBreaks=function(e,t){if(e.length<2)return e;for(var r=u(e),n=c(e),i=[r],s=(n-r)/t,a=1;a<t;a++)i.push(i[0]+s*a);return i.push(n),i},e.sampleCovariance=O,e.sampleCorrelation=function(e,t){return O(e,t)/T(e)/T(t)},e.sampleVariance=x,e.sampleStandardDeviation=T,e.sampleSkewness=function(e){if(e.length<3)throw new Error("sampleSkewness requires at least three data points");for(var t,n=r(e),i=0,s=0,a=0;a<e.length;a++)i+=(t=e[a]-n)*t,s+=t*t*t;var o=e.length-1,u=Math.sqrt(i/o),c=e.length;return c*s/((c-1)*(c-2)*Math.pow(u,3))},e.sampleKurtosis=function(e){var t=e.length;if(t<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,i=r(e),s=0,a=0,o=0;o<t;o++)s+=(n=e[o]-i)*n,a+=n*n*n*n;return(t-1)/((t-2)*(t-3))*(t*(t+1)*a/(s*s)-3*(t-1))},e.permutationsHeap=function(e){for(var t=new Array(e.length),r=[e.slice()],n=0;n<e.length;n++)t[n]=0;for(n=0;n<e.length;)if(t[n]<n){var i=0;n%2!=0&&(i=t[n]);var s=e[i];e[i]=e[n],e[n]=s,r.push(e.slice()),t[n]++,n=0}else t[n]=0,n++;return r},e.combinations=function e(t,r){var n,i,s,a,o=[];for(n=0;n<t.length;n++)if(1===r)o.push([t[n]]);else for(s=e(t.slice(n+1,t.length),r-1),i=0;i<s.length;i++)(a=s[i]).unshift(t[n]),o.push(a);return o},e.combinationsReplacement=function e(t,r){for(var n=[],i=0;i<t.length;i++)if(1===r)n.push([t[i]]);else for(var s=e(t.slice(i,t.length),r-1),a=0;a<s.length;a++)n.push([t[i]].concat(s[a]));return n},e.addToMean=function(e,t,r){return e+(r-e)/(t+1)},e.combineMeans=E,e.combineVariances=function(e,t,r,n,i,s){var a=E(t,r,i,s);return(r*(e+Math.pow(t-a,2))+s*(n+Math.pow(i-a,2)))/(r+s)},e.geometricMean=function(e){if(0===e.length)throw new Error("geometricMean requires at least one data point");for(var t=1,r=0;r<e.length;r++){if(e[r]<=0)throw new Error("geometricMean requires only positive numbers as input");t*=e[r]}return Math.pow(t,1/e.length)},e.harmonicMean=function(e){if(0===e.length)throw new Error("harmonicMean requires at least one data point");for(var t=0,r=0;r<e.length;r++){if(e[r]<=0)throw new Error("harmonicMean requires only positive numbers as input");t+=1/e[r]}return e.length/t},e.average=r,e.mean=r,e.median=y,e.medianSorted=function(e){return l(e,.5)},e.subtractFromMean=function(e,t,r){return(e*t-r)/(t-1)},e.rootMeanSquare=D,e.rms=D,e.variance=i,e.tTest=function(e,t){return(r(e)-t)/(s(e)/Math.sqrt(e.length))},e.tTestTwoSample=function(e,t,n){var i=e.length,s=t.length;if(!i||!s)return null;n||(n=0);var a=r(e),o=r(t),u=x(e),c=x(t);if("number"==typeof a&&"number"==typeof o&&"number"==typeof u&&"number"==typeof c){var l=((i-1)*u+(s-1)*c)/(i+s-2);return(a-o-n)/Math.sqrt(l*(1/i+1/s))}},e.BayesianClassifier=L,e.bayesian=L,e.PerceptronModel=P,e.perceptron=P,e.epsilon=Y,e.factorial=function(e){if(e<0)throw new Error("factorial requires a non-negative value");if(Math.floor(e)!==e)throw new Error("factorial requires an integer input");for(var t=1,r=2;r<=e;r++)t*=r;return t},e.bernoulliDistribution=function(e){if(e<0||e>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-e,e]},e.binomialDistribution=function(e,t){if(!(t<0||t>1||e<=0||e%1!=0)){var r=0,n=0,i=[],s=1;do{i[r]=s*Math.pow(t,r)*Math.pow(1-t,e-r),n+=i[r],s=s*(e-++r+1)/r}while(n<1-Y);return i}},e.poissonDistribution=function(e){if(!(e<=0)){var t=0,r=0,n=[],i=1;do{n[t]=Math.exp(-e)*Math.pow(e,t)/i,r+=n[t],i*=++t}while(r<1-Y);return n}},e.chiSquaredDistributionTable=F,e.chiSquaredGoodnessOfFit=function(e,t,n){for(var i,s,a=0,o=t(r(e)),u=[],c=[],l=0;l<e.length;l++)void 0===u[e[l]]&&(u[e[l]]=0),u[e[l]]++;for(l=0;l<u.length;l++)void 0===u[l]&&(u[l]=0);for(s in o)s in u&&(c[+s]=o[s]*e.length);for(s=c.length-1;s>=0;s--)c[s]<3&&(c[s-1]+=c[s],c.pop(),u[s-1]+=u[s],u.pop());for(s=0;s<u.length;s++)a+=Math.pow(u[s]-c[s],2)/c[s];return i=u.length-1-1,F[i][n]<a},e.kernelDensityEstimation=A,e.kde=A,e.zScore=function(e,t,r){return(e-t)/r},e.cumulativeStdNormalProbability=function(e){var t=Math.abs(e),r=Math.min(Math.round(100*t),z.length-1);return e>=0?z[r]:+(1-z[r]).toFixed(4)},e.standardNormalTable=z,e.errorFunction=R,e.erf=R,e.inverseErrorFunction=I,e.probit=function(e){return 0===e?e=Y:e>=1&&(e=1-Y),Math.sqrt(2)*I(2*e-1)},e.bisect=function(e,t,r,n,i){if("function"!=typeof e)throw new TypeError("func must be a function");for(var s=0;s<n;s++){var a=(t+r)/2;if(0===e(a)||Math.abs((r-t)/2)<i)return a;C(e(a))===C(e(t))?t=a:r=a}throw new Error("maximum number of iterations exceeded")},e.quickselect=d,e.sign=C,e.numericSort=o,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(660));t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(661));const i={type:"number"};t.default={name:"cookie-monster-performance",version:1,generate:e=>{let t=e.records;const r=t.get("cookie-monster.cookieBatch"),i=t.get("cookie-monster.prune"),s={moduleActive:r.length>0||i.length>0,batches:r.length,prunes:i.length};if(r.length>0){const e=r.reduce((e,t)=>(Object.keys(t).forEach(r=>{const n=e[r]||[];n.push(t[r]),Object.assign(e,{[r]:n})}),e),{});Object.assign(s,{medBatchSize:n.default.median(e.count),maxBatchSize:n.default.max(e.count),meanExisting:n.default.mean(e.existing),meanVisited:n.default.mean(e.visited),deleted:n.default.sum(e.deleted),modified:n.default.sum(e.modified)})}return i.length>0&&Object.assign(s,{cookiesSize:n.default.max(i.map(e=>e.cookiesCount)),visitsSize:n.default.max(i.map(e=>e.visitsCount)),visitsPruned:n.default.sum(i.map(e=>e.visitsPruned)),cookiesPruned:n.default.sum(i.map(e=>e.cookiesPruned))}),[s]},schema:{required:["moduleActive","batches","prunes"],properties:{moduleActive:{type:"boolean"},batches:i,medBatchSize:i,maxBatchSize:i,meanExisting:i,meanVisited:i,deleted:i,modified:i,prunes:i,cookiesSize:i,visitsSize:i,visitsPruned:i,cookiesPruned:i}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=u(r(81)),s=u(r(215)),a=r(283),o=r(287);function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"news-snippets",version:1,generate:e=>{let t=e.records;const r=new i.default(()=>new s.default);["freshtab.home.click.topnews","freshtab.home.click.breakingnews","freshtab.home.click.yournews","freshtab.home.hover.topnews","freshtab.home.hover.breakingnews","freshtab.home.hover.yournews"].forEach(e=>{t.get(e).forEach(e=>{let t=e.edition,n=e.target,i=e.action,s=e.index;r.update(`${t}.${n}.${i}`,e=>e.incr(s))})});const o=[];return r.forEach((e,t)=>{var r=t.split("."),i=n(r,3);const s=i[0],u=i[1],c=i[2];o.push({edition:s,target:u,action:c,histogram:(0,a.indicesHistogramToArray)(e)})}),o},schema:{required:["edition","target","action","histogram"],properties:{edition:{type:"string",enum:o.NEWS_EDITIONS},target:{type:"string",enum:["topnews","yournews","breakingnews"]},action:{type:"string",enum:["hover","click"]},histogram:{type:"array",items:{type:"integer",minimum:0}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(215)),i=r(283);t.default={name:"news-pagination",version:1,generate:e=>{const t=e.records.get("freshtab.home.click.news_pagination");if(0===t.length)return[];const r=new n.default(t.map(e=>{return e.index}));return[{clicks:(0,i.indicesHistogramToArray)(r)}]},schema:{required:["clicks"],properties:{clicks:{type:"array",items:{type:"integer",minimum:0}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"analyses.freshtab.settings.background",version:1,needsGid:!1,generate:e=>{const t=e.records.get("freshtab.prefs.config");if(0===t.length)return[];var r=t[t.length-1].background;const n=(r=void 0===r?{}:r).index;return n<0||n>31?[{index:null}]:[{index:n}]},schema:{required:["index"],properties:{index:{anyOf:[{type:"integer",minimum:0,maximum:31},{type:"null"}]}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"freshtab-state",version:1,needsGid:!0,generate:e=>{const t=e.records.get("freshtab.prefs.state");return 0===t.length?[]:[{is_freshtab_on:t[t.length-1].active}]},schema:{required:["is_freshtab_on"],properties:{is_freshtab_on:{type:"boolean"}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"freshtab-settings",version:1,generate:e=>{let t=e.records;const r=t.get("freshtab.prefs.config"),n=t.get("freshtab.prefs.blueTheme");if(0===r.length||0===n.length)return[];var i=r[r.length-1],s=i.background;const a=(s=void 0===s?{}:s).image;var o=i.historyDials;const u=(o=void 0===o?{}:o).visible;var c=i.customDials;const l=(c=void 0===c?{}:c).visible;var d=i.search;const h=(d=void 0===d?{}:d).visible;var f=i.news;const p=(f=void 0===f?{}:f).visible;return[{is_theme_on:n[n.length-1].enabled,is_background_on:!a||"bg-default"!==a,is_most_visited_on:Boolean(u),is_favorites_on:Boolean(l),is_search_on:Boolean(h),is_news_on:Boolean(p)}]},schema:{required:["is_theme_on","is_background_on","is_most_visited_on","is_favorites_on","is_search_on","is_news_on"],properties:{is_theme_on:{type:"boolean"},is_background_on:{type:"boolean"},is_most_visited_on:{type:"boolean"},is_favorites_on:{type:"boolean"},is_search_on:{type:"boolean"},is_news_on:{type:"boolean"}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"freshtab-activity",version:1,needsGid:!0,sendToBackend:!0,generate:e=>{let t=e.records;return[{shows:t.get("freshtab.home.show").length,clicks:{topSites:t.get("freshtab.home.click.topsite").length,customSites:t.get("freshtab.home.click.favorite").length}}]},schema:{required:["shows","clicks"],properties:{shows:{type:"integer",minimum:0},clicks:{required:["topSites","customSites"],properties:{topSites:{type:"integer",minimum:0},customSites:{type:"integer",minimum:0}}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(106);t.default=[{name:"daily-active",version:1,needsGid:!0,sendToBackend:!0,offsets:[0],generate:()=>[{}],schema:{}},{name:"weekly-active",version:1,needsGid:!0,sendToBackend:!0,offsets:[0],generate:e=>{let t=e.retention;const r=e.dateMoment.format(n.WEEK_FORMAT);return 1!==t.weekly[r].length?[]:[{}]},schema:{}},{name:"monthly-active",version:1,needsGid:!0,sendToBackend:!0,offsets:[0],generate:e=>{let t=e.retention;const r=e.dateMoment.format(n.MONTH_FORMAT);if(1!==t.monthly[r].length)return[];const i=t.monthly[r][0];return 1!==t.weekly[i].length?[]:[{}]},schema:{}}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(106);const i={required:["units_active","offset"],properties:{units_active:{type:"integer",minimum:0},offset:{type:"integer",minimum:0}}};function s(e){let t=e.state,r=e.date,n=e.timeframe,i=e.getPreviousUnit,s=e.initialOffset;const a=e=>(t[i(r,e)]||[]).length,o=[{offset:s,units_active:a(s)}];for(let e=1;e<n;e+=1)o.push({offset:e+s,units_active:a(1)});return o}t.default=[{name:"retention-daily",version:1,needsGid:!0,sendToBackend:!0,offsets:[0],generate:e=>{let t=e.retention,r=e.dateMoment;return s({state:t.daily,date:r,timeframe:10,getPreviousUnit:(e,t)=>e.subtract(t,"days").format(n.DAY_FORMAT),initialOffset:0})},schema:i},{name:"retention-weekly",version:1,needsGid:!0,sendToBackend:!0,offsets:[0],generate:e=>{let t=e.retention,r=e.dateMoment;const i=r.format(n.WEEK_FORMAT);return 1!==t.weekly[i].length?[]:s({state:t.weekly,date:r,timeframe:10,getPreviousUnit:(e,t)=>e.subtract(t,"weeks").format(n.WEEK_FORMAT),initialOffset:1})},schema:i},{name:"retention-monthly",version:1,needsGid:!0,sendToBackend:!0,offsets:[0],generate:e=>{let t=e.retention,r=e.dateMoment;const i=r.format(n.MONTH_FORMAT);if(1!==t.monthly[i].length)return[];const a=t.monthly[i][0];return 1!==t.weekly[a].length?[]:s({state:t.monthly,date:r,timeframe:12,getPreviousUnit:(e,t)=>e.subtract(t,"months").format(n.MONTH_FORMAT),initialOffset:1})},schema:i}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"metrics.history.visits.count",schema:{required:["visitsCount"],properties:{visitsCount:{type:"integer",minimum:0}}}}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(76)),i=s(r(11));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){if("string"!=typeof e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:Object.keys(t)}catch(e){n.default.error("while parsing abtests",e)}return[]}t.default={name:"metrics.core.abtests",offsets:[0],generate:()=>[[...a(i.default.get("abtests_running")),...a(i.default.get("ABTests"))]],schema:{type:"array",items:{type:"string"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"metrics.controlCenter.show",schema:{}},{name:"metrics.controlCenter.click.pause",schema:{}},{name:"metrics.controlCenter.click.resume",schema:{}},{name:"metrics.controlCenter.click.trustSite",schema:{}},{name:"metrics.controlCenter.click.restrictSite",schema:{}}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"metrics.experiments.serp.click.result",schema:{required:["source","index","queryLength"],properties:{source:{type:"string",enum:["m","Z"]},index:{type:"integer",minimum:0},queryLength:{type:"integer",minimum:0}}}},{name:"metrics.experiments.serp.click.search",schema:{}},{name:"metrics.experiments.serp.show",schema:{required:["queryLength","resultCount","suggestionCount"],properties:{queryLength:{type:"integer",minimum:0},resultCount:{type:"integer",minimum:0},suggestionCount:{type:"string",enum:["m","Z"]}}}},{name:"metrics.experiments.serp.state",schema:{required:["group","isCliqzDefaultEngine"],properties:{group:{enum:["A","B","C",null]},isCliqzDefaultEngine:{type:"boolean"}}}}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"cookie-monster.cookieBatch",schema:{required:["count","existing","visited","deleted","modified"],properties:{count:{type:"number",minimum:0},existing:{type:"number",minimum:0},visited:{type:"number",minimum:0},deleted:{type:"number",minimum:0},modified:{type:"number",minimum:0}}}},{name:"cookie-monster.prune",schema:{required:["visitsPruned","cookiesPruned","visitsCount","cookiesCount"],properties:{visitsPruned:{type:"number",minimum:0},cookiesPruned:{type:"number",minimum:0},visitsCount:{type:"number",minimum:0},cookiesCount:{type:"number",minimum:0}}}}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"metrics.favorites.migration.folders",schema:{required:["count","rootFolderCount","maxDepth"],properties:{count:{type:"integer",minimum:0},rootFolderCount:{type:"integer",minimum:0},maxDepth:{type:"integer",minimum:0}}}}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=E(r(287)),s=E(r(676)),a=E(r(675)),o=E(r(286)),u=E(r(674)),c=E(r(673)),l=E(r(672)),d=E(r(671)),h=E(r(284)),f=E(r(670)),p=E(r(669)),m=E(r(668)),_=E(r(667)),g=E(r(666)),y=E(r(665)),v=E(r(664)),b=E(r(663)),$=E(r(662)),w=E(r(282)),k=E(r(659)),M=E(r(658)),S=E(r(657)),O=E(r(656)),x=E(r(655)),T=E(r(654));function E(e){return e&&e.__esModule?e:{default:e}}const D=[l.default,...c.default,...i.default,...s.default,...a.default,...o.default,...u.default,...d.default,h.default].map(e=>n({},e,{sendToBackend:e.sendToBackend||!1})),L=[M.default,m.default,_.default,g.default,y.default,S.default,v.default,b.default,$.default,...p.default,...f.default,...w.default,...k.default,...O.default,...x.default,T.default].map(e=>n({},e,{sendToBackend:!0}));t.default=[...D,...L]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}function a(e){if("string"!=typeof e)throw new Error(`AsyncStorage expected a string, got: ${e}`)}t.default=new class{constructor(){this.storage=new Map}getItem(e){var t=this;return s(function*(){return a(e),t.storage.get(e)})()}setItem(e,t){var r=this;return s(function*(){a(e),a(t),r.storage.set(e,t)})()}removeItem(e){var t=this;return s(function*(){a(e),t.storage.delete(e)})()}mergeItem(e,t){var r=this;return s(function*(){return a(e),a(t),r.storage.has(e)?r.setItem(e,JSON.stringify(i({},JSON.parse(r.storage.get(e)),JSON.parse(t)))):r.setItem(e,t)})()}clear(){var e=this;return s(function*(){e.storage=new Map})()}getAllKeys(){var e=this;return s(function*(){return[...e.storage.keys()]})()}flushGetRequests(){return s(function*(){})()}multiGet(e){var t=this;return s(function*(){return e.forEach(a),e.map(function(e){return[e,t.storage.get(e)]})})()}multiSet(e){var t=this;return s(function*(){for(let i=0;i<e.length;i+=1){var r=n(e[i],2);const s=r[0],o=r[1];a(s),a(o),t.storage.set(s,o)}})()}multiRemove(e){var t=this;return s(function*(){e.forEach(a),e.forEach(function(e){return t.storage.delete(e)})})()}multiMerge(){return s(function*(){})()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(678);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=(()=>{var e=c(function*(e){const t=yield i.default.getAllKeys(),r=[];for(let n=0;n<t.length;n+=1){const i=t[n];i.startsWith(e)&&r.push(i.substr(e.length))}return r});return function(t){return e.apply(this,arguments)}})();var i=u(r(679)),s=u(r(81)),a=r(106),o=u(a);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}function l(){return`anolysis_storage_${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}`}class d{static key(){return l(`aggregated_${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}`)}runTaskAtMostOnce(e,t,r){return c(function*(){const n=d.key(e),s=yield i.default.getItem(n),a=new Set(void 0===s?[]:JSON.parse(s));a.has(t)||(yield r(),a.add(t),yield i.default.setItem(n,JSON.stringify([...a])))})()}getAggregatedDates(){return n(d.key())}deleteOlderThan(e){var t=this;return c(function*(){const r=yield t.getAggregatedDates(),n=[];for(let t=0;t<r.length;t+=1)r[t]<e&&n.push(r[t]);yield i.default.multiRemove(n.map(d.key))})()}}class h{static key(){return l(`behavior_${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}`)}getMetrics(e){return c(function*(){const t=yield i.default.getItem(h.key(e));return"string"==typeof t?JSON.parse(t):[]})()}getTypesForDate(e){var t=this;return c(function*(){const r=yield t.getMetrics(e),n=new s.default(function(){return[]});for(let e=0;e<r.length;e+=1){var i=r[e];const t=i.type,s=i.behavior;n.update(t,function(e){e.push(s)})}return n})()}add(e){var t=this;let r=e.type,n=e.behavior;return c(function*(){const e=(0,o.default)().format(a.DATE_FORMAT),s=h.key(e),u={behavior:n,date:e,type:r},c=yield t.getMetrics(e);c.push(u),yield i.default.setItem(s,JSON.stringify(c))})()}deleteByDate(e){return c(function*(){yield i.default.removeItem(h.key(e))})()}}class f{static key(){return l(`retention_${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}`)}getState(){var e=this;return c(function*(){const t=yield i.default.getItem(f.key("state"));if(!t){const t={daily:{},weekly:{},monthly:{}};return yield e.setState(t),t}return JSON.parse(t)})()}setState(e){return c(function*(){yield i.default.setItem(f.key("state"),JSON.stringify(e))})()}}class p{static key(){return l(`signals_${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}`)}constructor(){this.id=1,this.signals=[]}init(){var e=this;return c(function*(){const t=yield i.default.getItem(p.key("queue"));e.signals="string"!=typeof t?[]:JSON.parse(t);for(let t=0;t<e.signals.length;t+=1)e.id=(Math.max(e.id,e.signals[t].id)+1)%Number.MAX_SAFE_INTEGER})()}push(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c(function*(){const n=t.id;t.id+=1,t.signals.push({id:n,signal:e,attempts:r,date:(0,o.default)().format(a.DATE_FORMAT)}),yield i.default.setItem(p.key("queue"),JSON.stringify(t.signals))})()}remove(e){var t=this;return c(function*(){const r=t.signals,n=[];for(let t=0;t<r.length;t+=1)r[t].id!==e&&n.push(r[t]);r.length!==n.length&&(t.signals=n,yield i.default.setItem(p.key("queue"),JSON.stringify(n)))})()}getN(e){var t=this;return c(function*(){return t.signals.slice(0,e)})()}getAll(){var e=this;return c(function*(){return e.signals})()}getSize(){var e=this;return c(function*(){return e.signals.length})()}deleteOlderThan(e){var t=this;return c(function*(){const r=t.signals,n=[];for(let t=0;t<r.length;t+=1)r[t].date>=e&&n.push(r[t]);t.signals=n,yield i.default.setItem(p.key("queue"),JSON.stringify(n))})()}}class m{static key(){return l(`gid_${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}`)}constructor(){this.cache=new Map}init(){var e=this;return c(function*(){const t=yield n(m.key()),r=yield i.default.multiGet(t.map(function(e){return m.key(e)}));for(let n=0;n<t.length;n+=1)e.cache.set(r[n][0],r[n][1])})()}get(e){return this.cache.get(e)}set(e,t){var r=this;return c(function*(){r.cache.set(e,t),yield i.default.setItem(m.key(e),t)})()}entries(){const e=[];return this.cache.forEach((t,r)=>{e.push({key:r,value:t})}),e}}t.default=class{constructor(){this.aggregated=null,this.behavior=null,this.retention=null,this.signals=null,this.gid=null}init(){var e=this;return c(function*(){e.aggregated=new d,e.behavior=new h,e.retention=new f,e.gid=new m,yield e.gid.init(),e.signals=new p,yield e.signals.init()})()}destroy(){return c(function*(){const e=yield n(l());yield i.default.multiRemove(e.map(function(e){return l(e)}))})()}unload(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(175)),i=u(r(81)),s=u(r(76)),a=r(106),o=u(a);function u(e){return e&&e.__esModule?e:{default:e}}class c{constructor(e){this.db=e}init(){}runTaskAtMostOnce(e,t,r){var n=this;return function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){0===(yield n.db.where("[date+name]").equals([e,t]).toArray()).length&&(yield r(),yield n.db.add({date:e,name:t}))})()}getAggregatedDates(){return this.db.orderBy("date").uniqueKeys()}deleteOlderThan(e){return this.db.where("date").below(e).delete()}}class l{constructor(e){this.db=e}init(){}getTypesForDate(e){return this.db.where("date").equals(e).toArray().then(e=>{const t=new i.default(()=>[]);for(let n=0;n<e.length;n+=1){var r=e[n];const i=r.type,s=r.behavior;t.update(i,e=>{e.push(s)})}return t})}add(e){let t=e.type;const r={behavior:e.behavior,date:(0,o.default)().format(a.DATE_FORMAT),type:t};return s.default.debug("add",r),this.db.add(r)}deleteByDate(e){return this.db.where("date").equals(e).delete()}}class d{constructor(e){this.db=e,this.key="state"}init(){}getState(){return this.db.get(this.key).then(e=>e?e.value:{daily:{},weekly:{},monthly:{}})}setState(e){return this.db.put({key:this.key,value:e})}}class h{constructor(e){this.db=e}init(){}push(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.db.add({signal:e,attempts:t,date:(0,o.default)().format(a.DATE_FORMAT)})}remove(e){return"number"!=typeof e?Promise.resolve():this.db.delete(e)}getN(e){return this.db.limit(e).toArray()}getAll(){return this.db.toArray()}getSize(){return this.db.count()}deleteOlderThan(e){return this.db.where("date").below(e).delete()}}class f{constructor(e){this.db=e,this.cache=new Map}init(){return this.db.each(e=>{let t=e.key,r=e.value;this.cache.set(t,r)})}get(e){return this.cache.get(e)}set(e,t){return this.cache.set(e,t),this.db.put({key:e,value:t})}entries(){const e=[];return this.cache.forEach((t,r)=>{e.push({key:r,value:t})}),e}}t.default=class{constructor(){this.db=null,this.aggregated=null,this.behavior=null,this.retention=null,this.signals=null,this.gid=null}init(){return null!==this.db?Promise.resolve():(0,n.default)().then(e=>(this.db=new e("anolysis"),this.db.version(1).stores({aggregated:"[date+name],date",behavior:"++id,date",gid:"key",retention:"key",signals:"++id,date"}),this.db.open())).then(()=>(this.aggregated=new c(this.db.aggregated),this.behavior=new l(this.db.behavior),this.gid=new f(this.db.gid),this.retention=new d(this.db.retention),this.signals=new h(this.db.signals),Promise.all([this.aggregated.init(),this.behavior.init(),this.gid.init(),this.retention.init(),this.signals.init()]))).then(()=>{const e=(0,o.default)().subtract(30,"days").format(a.DATE_FORMAT);return Promise.all([this.aggregated.deleteOlderThan(e),this.signals.deleteOlderThan(e)])})}destroy(){if(null!==this.db){s.default.debug("destroy initialized Dexie DB");const e=this.db;return this.db=null,e.delete()}return s.default.debug("destroy un-initialized Dexie DB"),(0,n.default)().then(e=>e.delete("anolysis"))}unload(){null!==this.db&&(this.db.close(),this.db=null)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(22)),i=s(r(11));function s(e){return e&&e.__esModule?e:{default:e}}const a={session:i.default.get("session"),"backend.url":!0===i.default.get("developer",!1)||"99"===n.default.settings.channel?n.default.settings.ANOLYSIS_STAGING_BACKEND_URL:n.default.settings.ANOLYSIS_BACKEND_URL,"signalQueue.batchSize":5,"signalQueue.sendInterval":15e3,"signalQueue.maxAttempts":5,demographics:null,Storage:null};t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=new Map,Object.keys(a).forEach(e=>{this.options.set(e,a[e])}),Object.keys(e).forEach(t=>{this.options.set(t,e[t])})}get(e){if(!this.options.has(e))throw new Error(`Anolysis config has no such entry: ${e}`);return this.options.get(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDailyRetention=u,t.updateWeeklyRetention=c,t.updateMonthlyRetention=l,t.default=function(e){const t=(0,s.default)().format(i.DATE_FORMAT);return a.default.debug("Update retention for:",t),e.daily=u(e.daily,t),e.weekly=c(e.weekly,t),e.monthly=l(e.monthly,t),e};var n=o(r(87)),i=r(106),s=o(i),a=o(r(76));function o(e){return e&&e.__esModule?e:{default:e}}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];const r=(0,n.default)(t,i.DATE_FORMAT).format(i.DAY_FORMAT);return a.default.debug("Update retention daily for:",r),void 0===e[r]&&(e[r]=[t]),e}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];const r=(0,n.default)(t,i.DATE_FORMAT).format(i.WEEK_FORMAT);return a.default.debug("Update retention weekly for:",r),void 0===e[r]?e[r]=[t]:-1===e[r].indexOf(t)&&e[r].push(t),e}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];const r=(0,n.default)(t,i.DATE_FORMAT),s=r.format(i.WEEK_FORMAT),o=r.format(i.MONTH_FORMAT);return a.default.debug("Update retention monthly for:",o),void 0===e[o]?e[o]=[s]:-1===e[o].indexOf(s)&&e[o].push(s),e}},function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,s=" ",a=e.level,o=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(o||""),f="valid"+a,p="errs__"+a,m=e.opts.$data&&u&&u.$data;m?(s+=" var schema"+a+" = "+e.util.getData(u.$data,o,e.dataPathArr)+"; ",i="schema"+a):i=u;var _,g,y,v,b,$="definition"+a,w=this.definition,k="";if(m&&w.$data){b="keywordValidate"+a;var M=w.validateSchema;s+=" var "+$+" = RULES.custom['"+t+"'].definition; var "+b+" = "+$+".validate;"}else{if(!(v=e.useCustomRule(this,u,e.schema,e)))return;i="validate.schema"+c,b=v.code,_=w.compile,g=w.inline,y=w.macro}var S=b+".errors",O="i"+a,x="ruleErr"+a,T=w.async;if(T&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(s+=S+" = null;"),s+="var "+p+" = errors;var "+f+";",m&&w.$data&&(k+="}",s+=" if ("+i+" === undefined) { "+f+" = true; } else { ",M&&(k+="}",s+=" "+f+" = "+$+".validateSchema("+i+"); if ("+f+") { ")),g)w.statements?s+=" "+v.validate+" ":s+=" "+f+" = "+v.validate+"; ";else if(y){var E=e.util.copy(e);k="";E.level++;var D="valid"+E.level;E.schema=v.validate,E.schemaPath="";var L=e.compositeRule;e.compositeRule=E.compositeRule=!0;var P=e.validate(E).replace(/validate\.schema/g,b);e.compositeRule=E.compositeRule=L,s+=" "+P}else{(I=I||[]).push(s),s="",s+="  "+b+".call( ",e.opts.passContext?s+="this":s+="self",_||!1===w.schema?s+=" , "+h+" ":s+=" , "+i+" , "+h+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var A=o?"data"+(o-1||""):"parentData",j=o?e.dataPathArr[o]:"parentDataProperty",R=s+=" , "+A+" , "+j+" , rootData )  ";s=I.pop(),!1===w.errors?(s+=" "+f+" = ",T&&(s+="await "),s+=R+"; "):s+=T?" var "+(S="customErrors"+a)+" = null; try { "+f+" = await "+R+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+S+" = e.errors; else throw e; } ":" "+S+" = null; "+f+" = "+R+"; "}if(w.modifying&&(s+=" if ("+A+") "+h+" = "+A+"["+j+"];"),s+=""+k,w.valid)d&&(s+=" if (true) { ");else{var I;s+=" if ( ",void 0===w.valid?(s+=" !",s+=y?""+D:""+f):s+=" "+!w.valid+" ",s+=") { ",n=this.keyword,(I=I||[]).push(s),s="",(I=I||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ";var C=s;s=I.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+C+"]); ":s+=" validate.errors = ["+C+"]; return false; ":s+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Y=s;s=I.pop(),g?w.errors?"full"!=w.errors&&(s+="  for (var "+O+"="+p+"; "+O+"<errors; "+O+"++) { var "+x+" = vErrors["+O+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+x+".schemaPath === undefined) { "+x+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(s+=" "+x+".schema = "+i+"; "+x+".data = "+h+"; "),s+=" } "):!1===w.errors?s+=" "+Y+" ":(s+=" if ("+p+" == errors) { "+Y+" } else {  for (var "+O+"="+p+"; "+O+"<errors; "+O+"++) { var "+x+" = vErrors["+O+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+x+".schemaPath === undefined) { "+x+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(s+=" "+x+".schema = "+i+"; "+x+".data = "+h+"; "),s+=" } } "):y?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===w.errors?s+=" "+Y+" ":(s+=" if (Array.isArray("+S+")) { if (vErrors === null) vErrors = "+S+"; else vErrors = vErrors.concat("+S+"); errors = vErrors.length;  for (var "+O+"="+p+"; "+O+"<errors; "+O+"++) { var "+x+" = vErrors["+O+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+";  "+x+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(s+=" "+x+".schema = "+i+"; "+x+".data = "+h+"; "),s+=" } } else { "+Y+" } "),s+=" } ",d&&(s+=" else { ")}return s}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,i=r(686);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){if(t.macro&&void 0!==t.valid)throw new Error('"valid" option cannot be used with macro keywords');var s=t.type;if(Array.isArray(s)){var a,o=s.length;for(a=0;a<o;a++)d(s[a]);for(a=0;a<o;a++)l(e,s[a],t)}else s&&d(s),l(e,s,t);var u=!0===t.$data&&this._opts.$data;if(u&&!t.validate)throw new Error('$data support: "validate" function is not defined');var c=t.metaSchema;c&&(u&&(c={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(c,!0))}function l(e,t,n){for(var s,a=0;a<r.length;a++){var o=r[a];if(o.type==t){s=o;break}}s||(s={type:t,rules:[]},r.push(s));var u={keyword:e,definition:n,custom:!0,code:i,implements:n.implements};s.rules.push(u),r.custom[e]=u}function d(e){if(!r.types[e])throw new Error("Unknown type "+e)}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this}}},function(e,t,r){"use strict";var n=r(216).MissingRef;e.exports=function e(t,r,i){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=void 0);var a=o(t).then(function(){var e=s._addSchema(t,void 0,r);return e.validate||function e(t){try{return s._compile(t)}catch(e){if(e instanceof n)return function i(e){var i=e.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+e.missingRef+" cannot be resolved");var a=s._loadingSchemas[i];a||(a=s._loadingSchemas[i]=s._opts.loadSchema(i)).then(u,u);return a.then(function(e){if(!c(i))return o(e).then(function(){c(i)||s.addSchema(e,i,void 0,r)})}).then(function(){return function e(t){try{return s._compile(t)}catch(e){if(e instanceof n)return i(e);throw e}function i(n){var i=n.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+n.missingRef+" cannot be resolved");var a=s._loadingSchemas[i];return a||(a=s._loadingSchemas[i]=s._opts.loadSchema(i)).then(u,u),a.then(function(e){if(!c(i))return o(e).then(function(){c(i)||s.addSchema(e,i,void 0,r)})}).then(function(){return e(t)});function u(){delete s._loadingSchemas[i]}function c(e){return s._refs[e]||s._schemas[e]}}}(t)});function u(){delete s._loadingSchemas[i]}function c(e){return s._refs[e]||s._schemas[e]}}(e);throw e}function i(n){var i=n.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+n.missingRef+" cannot be resolved");var a=s._loadingSchemas[i];return a||(a=s._loadingSchemas[i]=s._opts.loadSchema(i)).then(u,u),a.then(function(e){if(!c(i))return o(e).then(function(){c(i)||s.addSchema(e,i,void 0,r)})}).then(function(){return e(t)});function u(){delete s._loadingSchemas[i]}function c(e){return s._refs[e]||s._schemas[e]}}}(e)});i&&a.then(function(e){i(null,e)},i);return a;function o(t){var r=t.$schema;return r&&!s.getSchema(r)?e.call(s,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,s=t[r].split("/"),a=e;for(i=1;i<s.length;i++)a=a[s[i]];for(i=0;i<n.length;i++){var o=n[i],u=a[o];u&&(a[o]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,a=e.dataLevel,o=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f=e.opts.$data&&o&&o.$data;if(f?(i+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",n="schema"+s):n=o,(o||f)&&!1!==e.opts.uniqueItems){f&&(i+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,m=Array.isArray(p);if(!p||"object"==p||"array"==p||m&&(p.indexOf("object")>=0||p.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var _="checkDataType"+(m?"s":"");i+=" if ("+e.util[_](p,"item",!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",f&&(i+="  }  "),i+=" if (!"+h+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var y=i;i=g.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ");var f="schema"+i;if(!h)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],m=a;if(m)for(var _,g=-1,y=m.length-1;g<y;){_=m[g+=1];var v=e.schema.properties[_];v&&e.util.schemaHasRules(v,e.RULES.all)||(p[p.length]=_)}}else p=a;if(h||p.length){var b=e.errorPath,$=h||p.length>=e.opts.loopRequired,w=e.opts.ownProperties;if(c)if(n+=" var missing"+i+"; ",$){h||(n+=" var "+f+" = validate.schema"+o+"; ");var k="' + "+(E="schema"+i+"["+(O="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,E,e.opts.jsonPointers)),n+=" var "+d+" = true; ",h&&(n+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),n+=" for (var "+O+" = 0; "+O+" < "+f+".length; "+O+"++) { "+d+" = "+l+"["+f+"["+O+"]] !== undefined ",w&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+f+"["+O+"]) "),n+="; if (!"+d+") break; } ",h&&(n+="  }  "),n+="  if (!"+d+") {   ",(T=T||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var M=n;n=T.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+M+"]); ":n+=" validate.errors = ["+M+"]; return false; ":n+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var S=p;if(S)for(var O=-1,x=S.length-1;O<x;){L=S[O+=1],O&&(n+=" || "),n+=" ( ( "+(R=l+(j=e.util.getProperty(L)))+" === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(L)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?L:j)+") ) "}n+=") {  ";var T;k="' + "+(E="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,E,!0):b+" + "+E),(T=T||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";M=n;n=T.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+M+"]); ":n+=" validate.errors = ["+M+"]; return false; ":n+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if($){h||(n+=" var "+f+" = validate.schema"+o+"; ");var E;k="' + "+(E="schema"+i+"["+(O="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,E,e.opts.jsonPointers)),h&&(n+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),n+=" for (var "+O+" = 0; "+O+" < "+f+".length; "+O+"++) { if ("+l+"["+f+"["+O+"]] === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+f+"["+O+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var D=p;if(D)for(var L,P=-1,A=D.length-1;P<A;){L=D[P+=1];var j=e.util.getProperty(L),R=(k=e.util.escapeQuotes(L),l+j);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,L,e.opts.jsonPointers)),n+=" if ( "+R+" === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(L)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else c&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="errs__"+i,h=e.util.copy(e);h.level++;var f="valid"+h.level;if(e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=o,h.errSchemaPath=u;var p="key"+i,m="idx"+i,_="i"+i,g="' + "+p+" + '",y="data"+(h.dataLevel=e.dataLevel+1),v="dataProperties"+i,b=e.opts.ownProperties,$=e.baseId;n+=" var "+d+" = errors; ",b&&(n+=" var "+v+" = undefined; "),n+=b?" "+v+" = "+v+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+v+".length; "+m+"++) { var "+p+" = "+v+"["+m+"]; ":" for (var "+p+" in "+l+") { ",n+=" var startErrs"+i+" = errors; ";var w=p,k=e.compositeRule;e.compositeRule=h.compositeRule=!0;var M=e.validate(h);h.baseId=$,e.util.varOccurences(M,y)<2?n+=" "+e.util.varReplace(M,y,w)+" ":n+=" var "+y+" = "+w+"; "+M+" ",e.compositeRule=h.compositeRule=k,n+=" if (!"+f+") { for (var "+_+"=startErrs"+i+"; "+_+"<errors; "+_+"++) { vErrors["+_+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+d+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="errs__"+i,h=e.util.copy(e),f="";h.level++;var p="valid"+h.level,m="key"+i,_="idx"+i,g=h.dataLevel=e.dataLevel+1,y="data"+g,v="dataProperties"+i,b=Object.keys(a||{}),$=e.schema.patternProperties||{},w=Object.keys($),k=e.schema.additionalProperties,M=b.length||w.length,S=!1===k,O="object"==typeof k&&Object.keys(k).length,x=e.opts.removeAdditional,T=S||O||x,E=e.opts.ownProperties,D=e.baseId,L=e.schema.required;if(L&&(!e.opts.$data||!L.$data)&&L.length<e.opts.loopRequired)var P=e.util.toHash(L);if(n+="var "+d+" = errors;var "+p+" = true;",E&&(n+=" var "+v+" = undefined;"),T){if(n+=E?" "+v+" = "+v+" || Object.keys("+l+"); for (var "+_+"=0; "+_+"<"+v+".length; "+_+"++) { var "+m+" = "+v+"["+_+"]; ":" for (var "+m+" in "+l+") { ",M){if(n+=" var isAdditional"+i+" = !(false ",b.length)if(b.length>8)n+=" || validate.schema"+o+".hasOwnProperty("+m+") ";else{var A=b;if(A)for(var j=-1,R=A.length-1;j<R;)G=A[j+=1],n+=" || "+m+" == "+e.util.toQuotedString(G)+" "}if(w.length){var I=w;if(I)for(var C=-1,Y=I.length-1;C<Y;)ie=I[C+=1],n+=" || "+e.usePattern(ie)+".test("+m+") "}n+=" ); if (isAdditional"+i+") { "}if("all"==x)n+=" delete "+l+"["+m+"]; ";else{var F=e.errorPath,N="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),S)if(x)n+=" delete "+l+"["+m+"]; ";else{n+=" "+p+" = false; ";var U=u;u=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+N+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var q=n;n=te.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+q+"]); ":n+=" validate.errors = ["+q+"]; return false; ":n+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=U,c&&(n+=" break; ")}else if(O)if("failing"==x){n+=" var "+d+" = errors;  ";var H=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=k,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var z=l+"["+m+"]";h.dataPathArr[g]=m;var B=e.validate(h);h.baseId=D,e.util.varOccurences(B,y)<2?n+=" "+e.util.varReplace(B,y,z)+" ":n+=" var "+y+" = "+z+"; "+B+" ",n+=" if (!"+p+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+m+"]; }  ",e.compositeRule=h.compositeRule=H}else{h.schema=k,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);z=l+"["+m+"]";h.dataPathArr[g]=m;B=e.validate(h);h.baseId=D,e.util.varOccurences(B,y)<2?n+=" "+e.util.varReplace(B,y,z)+" ":n+=" var "+y+" = "+z+"; "+B+" ",c&&(n+=" if (!"+p+") break; ")}e.errorPath=F}M&&(n+=" } "),n+=" }  ",c&&(n+=" if ("+p+") { ",f+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(b.length){var V=b;if(V)for(var G,K=-1,J=V.length-1;K<J;){var Q=a[G=V[K+=1]];if(e.util.schemaHasRules(Q,e.RULES.all)){var Z=e.util.getProperty(G),X=(z=l+Z,W&&void 0!==Q.default);h.schema=Q,h.schemaPath=o+Z,h.errSchemaPath=u+"/"+e.util.escapeFragment(G),h.errorPath=e.util.getPath(e.errorPath,G,e.opts.jsonPointers),h.dataPathArr[g]=e.util.toQuotedString(G);B=e.validate(h);if(h.baseId=D,e.util.varOccurences(B,y)<2){B=e.util.varReplace(B,y,z);var ee=z}else{ee=y;n+=" var "+y+" = "+z+"; "}if(X)n+=" "+B+" ";else{if(P&&P[G]){n+=" if ( "+ee+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(G)+"') "),n+=") { "+p+" = false; ";F=e.errorPath,U=u;var te,re=e.util.escapeQuotes(G);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(F,G,e.opts.jsonPointers)),u=e.errSchemaPath+"/required",(te=te||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+re+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";q=n;n=te.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+q+"]); ":n+=" validate.errors = ["+q+"]; return false; ":n+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=U,e.errorPath=F,n+=" } else { "}else c?(n+=" if ( "+ee+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(G)+"') "),n+=") { "+p+" = true; } else { "):(n+=" if ("+ee+" !== undefined ",E&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(G)+"') "),n+=" ) { ");n+=" "+B+" } "}}c&&(n+=" if ("+p+") { ",f+="}")}}if(w.length){var ne=w;if(ne)for(var ie,se=-1,ae=ne.length-1;se<ae;){Q=$[ie=ne[se+=1]];if(e.util.schemaHasRules(Q,e.RULES.all)){h.schema=Q,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),n+=E?" "+v+" = "+v+" || Object.keys("+l+"); for (var "+_+"=0; "+_+"<"+v+".length; "+_+"++) { var "+m+" = "+v+"["+_+"]; ":" for (var "+m+" in "+l+") { ",n+=" if ("+e.usePattern(ie)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);z=l+"["+m+"]";h.dataPathArr[g]=m;B=e.validate(h);h.baseId=D,e.util.varOccurences(B,y)<2?n+=" "+e.util.varReplace(B,y,z)+" ":n+=" var "+y+" = "+z+"; "+B+" ",c&&(n+=" if (!"+p+") break; "),n+=" } ",c&&(n+=" else "+p+" = true; "),n+=" }  ",c&&(n+=" if ("+p+") { ",f+="}")}}}return c&&(n+=" "+f+" if ("+d+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,a=e.dataLevel,o=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",n="schema"+s):n=o;var f=h?"(new RegExp("+n+"))":e.usePattern(o);i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),i+=" !"+f+".test("+d+") ) {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=h?""+n:""+e.util.toQuotedString(o),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=h?"' + "+n+" + '":""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level,_=f.baseId,g="prevValid"+i,y="passingSchemas"+i;n+="var "+h+" = errors , "+g+" = false , "+d+" = false , "+y+" = null; ";var v=e.compositeRule;e.compositeRule=f.compositeRule=!0;var b=a;if(b)for(var $,w=-1,k=b.length-1;w<k;)$=b[w+=1],e.util.schemaHasRules($,e.RULES.all)?(f.schema=$,f.schemaPath=o+"["+w+"]",f.errSchemaPath=u+"/"+w,n+="  "+e.validate(f)+" ",f.baseId=_):n+=" var "+m+" = true; ",w&&(n+=" if ("+m+" && "+g+") { "+d+" = false; "+y+" = ["+y+", "+w+"]; } else { ",p+="}"),n+=" if ("+m+") { "+d+" = "+g+" = true; "+y+" = "+w+"; }";return e.compositeRule=f.compositeRule=v,n+=p+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="errs__"+i,h=e.util.copy(e);h.level++;var f="valid"+h.level;if(e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=o,h.errSchemaPath=u,n+=" var "+d+" = errors;  ";var p,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(p=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,p&&(h.opts.allErrors=p),e.compositeRule=h.compositeRule=m,n+=" if ("+f+") {   ";var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var g=n;n=_.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,a=e.dataLevel,o=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&o&&o.$data;h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",n="schema"+s):n=o,i+="var division"+s+";if (",h&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+s+" = "+d+" / "+n+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+s+" !== parseInt(division"+s+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var p=i;return i=f.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level,_="i"+i,g=f.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId;if(n+="var "+h+" = errors;var "+d+";",Array.isArray(a)){var b=e.schema.additionalItems;if(!1===b){n+=" "+d+" = "+l+".length <= "+a.length+"; ";var $=u;u=e.errSchemaPath+"/additionalItems",n+="  if (!"+d+") {   ";var w=w||[];w.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var k=n;n=w.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u=$,c&&(p+="}",n+=" else { ")}var M=a;if(M)for(var S,O=-1,x=M.length-1;O<x;)if(S=M[O+=1],e.util.schemaHasRules(S,e.RULES.all)){n+=" "+m+" = true; if ("+l+".length > "+O+") { ";var T=l+"["+O+"]";f.schema=S,f.schemaPath=o+"["+O+"]",f.errSchemaPath=u+"/"+O,f.errorPath=e.util.getPathExpr(e.errorPath,O,e.opts.jsonPointers,!0),f.dataPathArr[g]=O;var E=e.validate(f);f.baseId=v,e.util.varOccurences(E,y)<2?n+=" "+e.util.varReplace(E,y,T)+" ":n+=" var "+y+" = "+T+"; "+E+" ",n+=" }  ",c&&(n+=" if ("+m+") { ",p+="}")}if("object"==typeof b&&e.util.schemaHasRules(b,e.RULES.all)){f.schema=b,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+l+".length > "+a.length+") {  for (var "+_+" = "+a.length+"; "+_+" < "+l+".length; "+_+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers,!0);T=l+"["+_+"]";f.dataPathArr[g]=_;E=e.validate(f);f.baseId=v,e.util.varOccurences(E,y)<2?n+=" "+e.util.varReplace(E,y,T)+" ":n+=" var "+y+" = "+T+"; "+E+" ",c&&(n+=" if (!"+m+") break; "),n+=" } }  ",c&&(n+=" if ("+m+") { ",p+="}")}}else if(e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=o,f.errSchemaPath=u,n+="  for (var "+_+" = 0; "+_+" < "+l+".length; "+_+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers,!0);T=l+"["+_+"]";f.dataPathArr[g]=_;E=e.validate(f);f.baseId=v,e.util.varOccurences(E,y)<2?n+=" "+e.util.varReplace(E,y,T)+" ":n+=" var "+y+" = "+T+"; "+E+" ",c&&(n+=" if (!"+m+") break; "),n+=" }"}return c&&(n+=" "+p+" if ("+h+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e);f.level++;var p="valid"+f.level,m=e.schema.then,_=e.schema.else,g=void 0!==m&&e.util.schemaHasRules(m,e.RULES.all),y=void 0!==_&&e.util.schemaHasRules(_,e.RULES.all),v=f.baseId;if(g||y){var b;f.createErrors=!1,f.schema=a,f.schemaPath=o,f.errSchemaPath=u,n+=" var "+h+" = errors; var "+d+" = true;  ";var $=e.compositeRule;e.compositeRule=f.compositeRule=!0,n+="  "+e.validate(f)+" ",f.baseId=v,f.createErrors=!0,n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=f.compositeRule=$,g?(n+=" if ("+p+") {  ",f.schema=e.schema.then,f.schemaPath=e.schemaPath+".then",f.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(f)+" ",f.baseId=v,n+=" "+d+" = "+p+"; ",g&&y?n+=" var "+(b="ifClause"+i)+" = 'then'; ":b="'then'",n+=" } ",y&&(n+=" else { ")):n+=" if (!"+p+") { ",y&&(f.schema=e.schema.else,f.schemaPath=e.schemaPath+".else",f.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(f)+" ",f.baseId=v,n+=" "+d+" = "+p+"; ",g&&y?n+=" var "+(b="ifClause"+i)+" = 'else'; ":b="'else'",n+=" } "),n+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",c&&(n+=" else { "),n=e.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||"");if(!1===e.opts.format)return c&&(n+=" if (true) { "),n;var d,h=e.opts.$data&&a&&a.$data;h?(n+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",d="schema"+i):d=a;var f=e.opts.unknownFormats,p=Array.isArray(f);if(h){n+=" var "+(m="format"+i)+" = formats["+d+"]; var "+(_="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(g="formatType"+i)+" = "+_+" && "+m+".type || 'string'; if ("+_+") { ",e.async&&(n+=" var async"+i+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",h&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),n+=" (","ignore"!=f&&(n+=" ("+d+" && !"+m+" ",p&&(n+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),n+=") || "),n+=" ("+m+" && "+g+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?n+=" (async"+i+" ? await "+m+"("+l+") : "+m+"("+l+")) ":n+=" "+m+"("+l+") ",n+=" : "+m+".test("+l+"))))) {"}else{var m;if(!(m=e.formats[a])){if("ignore"==f)return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(n+=" if (true) { "),n;if(p&&f.indexOf(a)>=0)return c&&(n+=" if (true) { "),n;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var _,g=(_="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(_){var y=!0===m.async;m=m.validate}if(g!=r)return c&&(n+=" if (true) { "),n;if(y){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(v="formats"+e.util.getProperty(a)+".validate")+"("+l+"))) { "}else{n+=" if (! ";var v="formats"+e.util.getProperty(a);_&&(v+=".validate"),n+="function"==typeof m?" "+v+"("+l+") ":" "+v+".test("+l+") ",n+=") { "}}var b=b||[];b.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",n+=h?""+d:""+e.util.toQuotedString(a),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=h?"' + "+d+" + '":""+e.util.escapeQuotes(a),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+o:""+e.util.toQuotedString(a),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var $=n;return n=b.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+$+"]); ":n+=" validate.errors = ["+$+"]; return false; ":n+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ");var f="i"+i,p="schema"+i;h||(n+=" var "+p+" = validate.schema"+o+";"),n+="var "+d+";",h&&(n+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),n+=d+" = false;for (var "+f+"=0; "+f+"<"+p+".length; "+f+"++) if (equal("+l+", "+p+"["+f+"])) { "+d+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+d+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var _=n;return n=m.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="errs__"+i,h=e.util.copy(e),f="";h.level++;var p="valid"+h.level,m={},_={},g=e.opts.ownProperties;for($ in a){var y=a[$],v=Array.isArray(y)?_:m;v[$]=y}n+="var "+d+" = errors;";var b=e.errorPath;for(var $ in n+="var missing"+i+";",_)if((v=_[$]).length){if(n+=" if ( "+l+e.util.getProperty($)+" !== undefined ",g&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes($)+"') "),c){n+=" && ( ";var w=v;if(w)for(var k=-1,M=w.length-1;k<M;){D=w[k+=1],k&&(n+=" || "),n+=" ( ( "+(j=l+(A=e.util.getProperty(D)))+" === undefined ",g&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(D)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?D:A)+") ) "}n+=")) {  ";var S="missing"+i,O="' + "+S+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,S,!0):b+" + "+S);var x=x||[];x.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes($)+"', missingProperty: '"+O+"', depsCount: "+v.length+", deps: '"+e.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==v.length?n+="property "+e.util.escapeQuotes(v[0]):n+="properties "+e.util.escapeQuotes(v.join(", ")),n+=" when property "+e.util.escapeQuotes($)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var T=n;n=x.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var E=v;if(E)for(var D,L=-1,P=E.length-1;L<P;){D=E[L+=1];var A=e.util.getProperty(D),j=(O=e.util.escapeQuotes(D),l+A);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,D,e.opts.jsonPointers)),n+=" if ( "+j+" === undefined ",g&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(D)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes($)+"', missingProperty: '"+O+"', depsCount: "+v.length+", deps: '"+e.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==v.length?n+="property "+e.util.escapeQuotes(v[0]):n+="properties "+e.util.escapeQuotes(v.join(", ")),n+=" when property "+e.util.escapeQuotes($)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(f+="}",n+=" else { ")}e.errorPath=b;var R=h.baseId;for(var $ in m){y=m[$];e.util.schemaHasRules(y,e.RULES.all)&&(n+=" "+p+" = true; if ( "+l+e.util.getProperty($)+" !== undefined ",g&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes($)+"') "),n+=") { ",h.schema=y,h.schemaPath=o+e.util.getProperty($),h.errSchemaPath=u+"/"+e.util.escapeFragment($),n+="  "+e.validate(h)+" ",h.baseId=R,n+=" }  ",c&&(n+=" if ("+p+") { ",f+="}"))}return c&&(n+="   "+f+" if ("+d+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e);f.level++;var p="valid"+f.level,m="i"+i,_=f.dataLevel=e.dataLevel+1,g="data"+_,y=e.baseId,v=e.util.schemaHasRules(a,e.RULES.all);if(n+="var "+h+" = errors;var "+d+";",v){var b=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=a,f.schemaPath=o,f.errSchemaPath=u,n+=" var "+p+" = false; for (var "+m+" = 0; "+m+" < "+l+".length; "+m+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var $=l+"["+m+"]";f.dataPathArr[_]=m;var w=e.validate(f);f.baseId=y,e.util.varOccurences(w,g)<2?n+=" "+e.util.varReplace(w,g,$)+" ":n+=" var "+g+" = "+$+"; "+w+" ",n+=" if ("+p+") break; }  ",e.compositeRule=f.compositeRule=b,n+="  if (!"+p+") {"}else n+=" if ("+l+".length == 0) {";var k=k||[];k.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var M=n;return n=k.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+M+"]); ":n+=" validate.errors = ["+M+"]; return false; ":n+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",v&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; "),h||(n+=" var schema"+i+" = validate.schema"+o+";"),n+="var "+d+" = equal("+l+", schema"+i+"); if (!"+d+") {   ";var f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.schema[t],s=e.errSchemaPath+"/"+t,a=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?n+=" console.log("+a+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+a+", "+e.util.toQuotedString(s)+", validate.root.schema);"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level;if(a.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)})){var _=f.baseId;n+=" var "+h+" = errors; var "+d+" = false;  ";var g=e.compositeRule;e.compositeRule=f.compositeRule=!0;var y=a;if(y)for(var v,b=-1,$=y.length-1;b<$;)v=y[b+=1],f.schema=v,f.schemaPath=o+"["+b+"]",f.errSchemaPath=u+"/"+b,n+="  "+e.validate(f)+" ",f.baseId=_,n+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",p+="}";e.compositeRule=f.compositeRule=g,n+=" "+p+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,u=e.util.copy(e),c="";u.level++;var l="valid"+u.level,d=u.baseId,h=!0,f=i;if(f)for(var p,m=-1,_=f.length-1;m<_;)p=f[m+=1],e.util.schemaHasRules(p,e.RULES.all)&&(h=!1,u.schema=p,u.schemaPath=s+"["+m+"]",u.errSchemaPath=a+"/"+m,n+="  "+e.validate(u)+" ",u.baseId=d,o&&(n+=" if ("+l+") { ",c+="}"));return o&&(n+=h?" if (true) { ":" "+c.slice(0,-1)+" "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,s=" ",a=e.level,o=e.dataLevel,u=e.schema[t],c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),h="valid"+a;if("#"==u||"#/"==u)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var f=e.resolveRef(e.baseId,u,e.isRoot);if(void 0===f){var p=e.MissingRefError.message(e.baseId,u);if("fail"==e.opts.missingRefs){e.logger.error(p),(y=y||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var m=s;s=y.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(s+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,u,p);e.logger.warn(p),l&&(s+=" if (true) { ")}}else if(f.inline){var _=e.util.copy(e);_.level++;var g="valid"+_.level;_.schema=f.schema,_.schemaPath="",_.errSchemaPath=u,s+=" "+e.validate(_).replace(/validate\.schema/g,f.code)+" ",l&&(s+=" if ("+g+") { ")}else n=!0===f.$async||e.async&&!1!==f.$async,i=f.code}if(i){var y;(y=y||[]).push(s),s="",e.opts.passContext?s+=" "+i+".call(this, ":s+=" "+i+"( ",s+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var v=s+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?e.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(s=y.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(s+=" var "+h+"; "),s+=" try { await "+v+"; ",l&&(s+=" "+h+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(s+=" "+h+" = false; "),s+=" } ",l&&(s+=" if ("+h+") { ")}else s+=" if (!"+v+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(s+=" else { ")}return s}},function(e,t,r){"use strict";e.exports={$ref:r(708),allOf:r(707),anyOf:r(706),$comment:r(705),const:r(704),contains:r(703),dependencies:r(702),enum:r(701),format:r(700),if:r(699),items:r(698),maximum:r(291),minimum:r(291),maxItems:r(290),minItems:r(290),maxLength:r(289),minLength:r(289),maxProperties:r(288),minProperties:r(288),multipleOf:r(697),not:r(696),oneOf:r(695),pattern:r(694),properties:r(693),propertyNames:r(692),required:r(691),uniqueItems:r(690),validate:r(292)}},function(e,t,r){"use strict";var n=r(709),i=r(119).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var i;if("object"==typeof r){var s=Object.keys(r)[0];i=r[s],r=s,i.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:i}}),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=i(t.concat(["$schema","$id","id","$data","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,r){"use strict";var n=r(119),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,o=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,u=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,f=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",n.copy(m[e])}function _(e){var t=e.match(i);if(!t)return!1;var r=+t[1],n=+t[2],a=+t[3];return n>=1&&n<=12&&a>=1&&a<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:s[n])}function g(e,t){var r=e.match(a);if(!r)return!1;var n=r[1],i=r[2],s=r[3],o=r[5];return(n<=23&&i<=59&&s<=59||23==n&&59==i&&60==s)&&(!t||o)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:l,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:o,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:$,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":f,"relative-json-pointer":p},m.full={date:_,time:g,"date-time":function(e){var t=e.split(y);return 2==t.length&&_(t[0])&&g(t[1],!0)},uri:function(e){return v.test(e)&&u.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:l,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&o.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:$,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":f,"relative-json-pointer":p};var y=/t|\s/i;var v=/\/|:/;var b=/[^\\]\\Z/;function $(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,s,a,o,u,c,l,d){if(s&&"object"==typeof s&&!Array.isArray(s))for(var h in r(s,a,o,u,c,l,d),s){var f=s[h];if(Array.isArray(f)){if(h in n.arrayKeywords)for(var p=0;p<f.length;p++)e(t,r,f[p],a+"/"+h+"/"+p,o,a,h,s,p)}else if(h in n.propsKeywords){if(f&&"object"==typeof f)for(var m in f)e(t,r,f[m],a+"/"+h+"/"+i(m),o,a,h,s,m)}else(h in n.keywords||t.allKeys&&!(h in n.skipKeywords))&&e(t,r,f,a+"/"+h,o,a,h,s)}}(t,r,e,"",e)};function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}},function(e,t,r){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function s(e){var n=t("[0-9]","[A-Fa-f]"),i=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",s),o=e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",u=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",o),l=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),d=r(r(i+"|"+t(c,s,"[\\:]"))+"*"),h=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),f=r(h+"\\."+h+"\\."+h+"\\."+h),p=r(n+"{1,4}"),m=r(r(p+"\\:"+p)+"|"+f),_=r(r(p+"\\:")+"{6}"+m),g=r("\\:\\:"+r(p+"\\:")+"{5}"+m),y=r(r(p)+"?\\:\\:"+r(p+"\\:")+"{4}"+m),v=r(r(r(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+r(p+"\\:")+"{3}"+m),b=r(r(r(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+r(p+"\\:")+"{2}"+m),$=r(r(r(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+m),w=r(r(r(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+m),k=r(r(r(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),M=r(r(r(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),S=r([_,g,y,v,b,$,w,k,M].join("|")),O=r(r(c+"|"+i)+"+"),x=(r(S+"\\%25"+O),r(S+r("\\%25|\\%(?!"+n+"{2})")+O)),T=r("[vV]"+n+"+\\."+t(c,s,"[\\:]")+"+"),E=r("\\["+r(x+"|"+S+"|"+T)+"\\]"),D=r(r(i+"|"+t(c,s))+"*"),L=r(E+"|"+f+"(?!"+D+")|"+D),P=r("[0-9]*"),A=r(r(d+"@")+"?"+L+r("\\:"+P)+"?"),j=r(i+"|"+t(c,s,"[\\:\\@]")),R=r(j+"*"),I=r(j+"+"),C=r(r(i+"|"+t(c,s,"[\\@]"))+"+"),Y=r(r("\\/"+R)+"*"),F=r("\\/"+r(I+Y)+"?"),N=r(C+Y),U=r(I+Y),q="(?!"+j+")",H=(r(Y+"|"+F+"|"+N+"|"+U+"|"+q),r(r(j+"|"+t("[\\/\\?]",u))+"*")),z=r(r(j+"|[\\/\\?]")+"*"),B=r(r("\\/\\/"+A+Y)+"|"+F+"|"+U+"|"+q),W=r(l+"\\:"+B+r("\\?"+H)+"?"+r("\\#"+z)+"?"),V=r(r("\\/\\/"+A+Y)+"|"+F+"|"+N+"|"+q),G=r(V+r("\\?"+H)+"?"+r("\\#"+z)+"?");return r(W+"|"+G),r(l+"\\:"+B+r("\\?"+H)+"?"),r(r("\\/\\/("+r("("+d+")@")+"?("+L+")"+r("\\:("+P+")")+"?)")+"?("+Y+"|"+F+"|"+U+"|"+q+")"),r("\\?("+H+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+d+")@")+"?("+L+")"+r("\\:("+P+")")+"?)")+"?("+Y+"|"+F+"|"+N+"|"+q+")"),r("\\?("+H+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+d+")@")+"?("+L+")"+r("\\:("+P+")")+"?)")+"?("+Y+"|"+F+"|"+U+"|"+q+")"),r("\\?("+H+")"),r("\\#("+z+")"),r("("+d+")@"),r("\\:("+P+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,s),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+O+")")+"?\\]?$")}}var a=s(!1),o=s(!0),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function _(e){throw new RangeError(f[e])}function g(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=(e=e.replace(h,".")).split("."),s=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}(i,t).join(".");return n+s}function y(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),r--)}else t.push(i)}return t}var v=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36},b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},$=function(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=36)e=p(e/35);return p(n+36*e/(e+38))},w=function(e){var t=[],r=e.length,n=0,i=128,s=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var o=0;o<a;++o)e.charCodeAt(o)>=128&&_("not-basic"),t.push(e.charCodeAt(o));for(var u=a>0?a+1:0;u<r;){for(var l=n,d=1,h=36;;h+=36){u>=r&&_("invalid-input");var f=v(e.charCodeAt(u++));(f>=36||f>p((c-n)/d))&&_("overflow"),n+=f*d;var m=h<=s?1:h>=s+26?26:h-s;if(f<m)break;var g=36-m;d>p(c/g)&&_("overflow"),d*=g}var y=t.length+1;s=$(n-l,y,0==l),p(n/y)>c-i&&_("overflow"),i+=p(n/y),n%=y,t.splice(n++,0,i)}return String.fromCodePoint.apply(String,t)},k=function(e){var t=[],r=(e=y(e)).length,n=128,i=0,s=72,a=!0,o=!1,u=void 0;try{for(var l,d=e[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){var h=l.value;h<128&&t.push(m(h))}}catch(e){o=!0,u=e}finally{try{!a&&d.return&&d.return()}finally{if(o)throw u}}var f=t.length,g=f;for(f&&t.push("-");g<r;){var v=c,w=!0,k=!1,M=void 0;try{for(var S,O=e[Symbol.iterator]();!(w=(S=O.next()).done);w=!0){var x=S.value;x>=n&&x<v&&(v=x)}}catch(e){k=!0,M=e}finally{try{!w&&O.return&&O.return()}finally{if(k)throw M}}var T=g+1;v-n>p((c-i)/T)&&_("overflow"),i+=(v-n)*T,n=v;var E=!0,D=!1,L=void 0;try{for(var P,A=e[Symbol.iterator]();!(E=(P=A.next()).done);E=!0){var j=P.value;if(j<n&&++i>c&&_("overflow"),j==n){for(var R=i,I=36;;I+=36){var C=I<=s?1:I>=s+26?26:I-s;if(R<C)break;var Y=R-C,F=36-C;t.push(m(b(C+Y%F,0))),R=p(Y/F)}t.push(m(b(R,0))),s=$(i,T,g==f),i=0,++g}}}catch(e){D=!0,L=e}finally{try{!E&&A.return&&A.return()}finally{if(D)throw L}}++i,++n}return t.join("")},M={version:"2.1.0",ucs2:{decode:y,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:w,encode:k,toASCII:function(e){return g(e,function(e){return d.test(e)?"xn--"+k(e):e})},toUnicode:function(e){return g(e,function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e})}},S={};function O(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function x(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var a=parseInt(e.substr(r+4,2),16),o=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function T(e,t){function r(e){var r=x(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,O).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,O).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,O).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,O).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,O).replace(t.PCT_ENCODED,i)),e}function E(e){return e.replace(/^0*(.*)/,"$1")||"0"}function D(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=u(r,2),i=n[1];return i?i.split(".").map(E).join("."):e}function L(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=u(r,3),i=n[1],s=n[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),o=u(a,2),c=o[0],l=o[1],d=l?l.split(":").map(E):[],h=c.split(":").map(E),f=t.IPV4ADDRESS.test(h[h.length-1]),p=f?7:8,m=h.length-p,_=Array(p),g=0;g<p;++g)_[g]=d[g]||h[m+g]||"";f&&(_[p-1]=D(_[p-1],t));var y=_.reduce(function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e},[]),v=y.sort(function(e,t){return t.length-e.length})[0],b=void 0;if(v&&v.length>1){var $=_.slice(0,v.index),w=_.slice(v.index+v.length);b=$.join(":")+"::"+w.join(":")}else b=_.join(":");return s&&(b+="%"+s),b}return e}var P=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,A=void 0==="".match(/(){0}/)[1];function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?o:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(P);if(i){A?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=L(D(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=S[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)T(r,n);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=M.toASCII(r.host.replace(n.PCT_ENCODED,x).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}T(r,a)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var R=/^\.\.?\//,I=/^\/\.(\/|$)/,C=/^\/\.\.(\/|$)/,Y=/^\/?(?:.|\n)*?(?=\/|$)/;function F(e){for(var t=[];e.length;)if(e.match(R))e=e.replace(R,"");else if(e.match(I))e=e.replace(I,"/");else if(e.match(C))e=e.replace(C,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(Y);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?o:a,n=[],i=S[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?M.toUnicode(e.host):M.toASCII(e.host.replace(r.PCT_ENCODED,x).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}T(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var s=function(e,t){var r=!1!==t.iri?o:a,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(L(D(String(e.host),r),r).replace(r.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),"number"==typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}(e,t);if(void 0!==s&&("suffix"!==t.reference&&n.push("//"),n.push(s),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;t.absolutePath||i&&i.absolutePath||(u=F(u)),void 0===s&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function U(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i={};return n||(e=j(N(e,r),r),t=j(N(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=F(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=F(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=F(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=F(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function q(e,t){return e&&e.toString().replace(t&&t.iri?o.PCT_ENCODED:a.PCT_ENCODED,x)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},z={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},B={},W="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",V="[0-9A-Fa-f]",G=r(r("%[EFef][0-9A-Fa-f]%"+V+V+"%"+V+V)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+V+V)+"|"+r("%"+V+V)),K=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),J=new RegExp(W,"g"),Q=new RegExp(G,"g"),Z=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',K),"g"),X=new RegExp(t("[^]",W,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ee=X;function te(e){var t=x(e);return t.match(J)?t:e}var re={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,s={},a=r.query.split("&"),o=0,u=a.length;o<u;++o){var c=a[o].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),d=0,h=l.length;d<h;++d)n.push(l[d]);break;case"subject":r.subject=q(c[1],t);break;case"body":r.body=q(c[1],t);break;default:i=!0,s[q(c[0],t)]=q(c[1],t)}}i&&(r.headers=s)}r.query=void 0;for(var f=0,p=n.length;f<p;++f){var m=n[f].split("@");if(m[0]=q(m[0]),t.unicodeSupport)m[1]=q(m[1],t).toLowerCase();else try{m[1]=M.toASCII(q(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[f]=m.join("@")}return r},serialize:function(e,t){var r=e,n=function(e){return void 0!==e&&null!==e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(n){for(var s=0,a=n.length;s<a;++s){var o=String(n[s]),u=o.lastIndexOf("@"),c=o.slice(0,u).replace(Q,te).replace(Q,i).replace(Z,O),l=o.slice(u+1);try{l=t.iri?M.toUnicode(l):M.toASCII(q(l,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}n[s]=c+"@"+l}r.path=n.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var h=[];for(var f in d)d[f]!==B[f]&&h.push(f.replace(Q,te).replace(Q,i).replace(X,O)+"="+d[f].replace(Q,te).replace(Q,i).replace(ee,O));return h.length&&(r.query=h.join("&")),r}},ne=/^([^\:]+)\:(.*)/,ie={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ne),n=e;if(r){var i=t.scheme||n.scheme||"urn",s=r[1].toLowerCase(),a=r[2],o=i+":"+(t.nid||s),u=S[o];n.nid=s,n.nss=a,n.path=void 0,u&&(n=u.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,i=r+":"+(t.nid||n),s=S[i];s&&(e=s.serialize(e,t));var a=e,o=e.nss;return a.path=(n||t.nid)+":"+o,a}},se=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ae={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(se)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};S[H.scheme]=H,S[z.scheme]=z,S[re.scheme]=re,S[ie.scheme]=ie,S[ae.scheme]=ae,e.SCHEMES=S,e.pctEncChar=O,e.pctDecChars=x,e.parse=j,e.removeDotSegments=F,e.serialize=N,e.resolveComponents=U,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return N(U(j(e,n),j(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=N(j(e,t),t):"object"===n(e)&&(e=j(N(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=N(j(e,r),r):"object"===n(e)&&(e=N(e,r)),"string"==typeof t?t=N(j(t,r),r):"object"===n(t)&&(t=N(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?o.ESCAPE:a.ESCAPE,O)},e.unescapeComponent=q,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";var n=r(218),i=r(119),s=r(216),a=r(293),o=r(292),u=i.ucs2length,c=r(217),l=s.Validation;function d(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function h(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function f(e){return"var default"+e+" = defaults["+e+"];"}function p(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function m(e){return"var customRule"+e+" = customRules["+e+"];"}function _(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,g,y){var v=this,b=this._opts,$=[void 0],w={},k=[],M={},S=[],O={},x=[];r=r||{schema:t,refVal:$,refs:w};var T=function(e,t,r){var n=d.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}.call(this,t,r,y);var E=this._compilations[T.index];if(T.compiling)return E.callValidate=function e(){var t=E.validate;var r=t.apply(this,arguments);e.errors=t.errors;return r};var D=this._formats;var L=this.RULES;try{var P=j(t,r,g,y);E.validate=P;var A=E.callValidate;return A&&(A.schema=P.schema,A.errors=null,A.refs=P.refs,A.refVal=P.refVal,A.root=P.root,A.$async=P.$async,b.sourceCode&&(A.source=P.source)),P}finally{(function(e,t,r){var n=d.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}).call(this,t,r,y)}function j(t,a,d,g){var y=!a||a&&a.schema==t;if(a.schema!=r.schema)return e.call(v,t,a,d,g);var M,O=!0===t.$async,T=o({isTop:!0,schema:t,isRoot:y,baseId:g,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:s.MissingRef,RULES:L,validate:o,util:i,resolve:n,resolveRef:R,usePattern:Y,useDefault:F,useCustomRule:N,opts:b,formats:D,logger:v.logger,self:v});T=_($,p)+_(k,h)+_(S,f)+_(x,m)+T,b.processCode&&(T=b.processCode(T));try{var E=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",T);M=E(v,L,D,r,$,S,x,c,u,l),$[0]=M}catch(e){throw v.logger.error("Error compiling schema, function code:",T),e}return M.schema=t,M.errors=null,M.refs=w,M.refVal=$,M.root=y?M:a,O&&(M.$async=!0),!0===b.sourceCode&&(M.source={code:T,patterns:k,defaults:S}),M}function R(t,i,s){i=n.url(t,i);var a,o,u=w[i];if(void 0!==u)return C(a=$[u],o="refVal["+u+"]");if(!s&&r.refs){var c=r.refs[i];if(void 0!==c)return a=r.refVal[c],o=I(i,a),C(a,o)}o=I(i);var l=n.call(v,j,r,i);if(void 0===l){var d=g&&g[i];d&&(l=n.inlineRef(d,b.inlineRefs)?d:e.call(v,d,r,g,t))}if(void 0!==l)return function(e,t){var r=w[e];$[r]=t}(i,l),C(l,o);!function(e){delete w[e]}(i)}function I(e,t){var r=$.length;return $[r]=t,w[e]=r,"refVal"+r}function C(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function Y(e){var t=M[e];return void 0===t&&(t=M[e]=k.length,k[t]=e),"pattern"+t}function F(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=a(e),r=O[t];return void 0===r&&(r=O[t]=S.length,S[r]=e),"default"+r}}function N(e,t,r,n){var i=e.definition.validateSchema;if(i&&!1!==v._opts.validateSchema){var s=i(t);if(!s){var a="keyword schema is invalid: "+v.errorsText(i.errors);if("log"!=v._opts.validateSchema)throw new Error(a);v.logger.error(a)}}var o,u=e.definition.compile,c=e.definition.inline,l=e.definition.macro;if(u)o=u.call(v,t,r,n);else if(l)o=l.call(v,t,r,n),!1!==b.validateSchema&&v.validateSchema(o,!0);else if(c)o=c.call(v,n,e.keyword,t,r);else if(!(o=e.definition.validate))return;if(void 0===o)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=x.length;return x[d]=o,{code:"customRule"+d,validate:o}}}},function(e,t,r){"use strict";var n=r(716),i=r(218),s=r(712),a=r(294),o=r(293),u=r(711),c=r(710),l=r(689),d=r(119);e.exports=g,g.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);!0!==r.$async&&(this.errors=r.errors);return i},g.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},g.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,r,n);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return k(this,t=i.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,r,n,!0),this},g.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},g.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(p)?p:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n,i=this._formats.uri;this._formats.uri="function"==typeof i?this._schemaUriFormatFunc:this._schemaUriFormat;try{n=this.validate(r,e)}finally{this._formats.uri=i}if(!n&&t){var s="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(s);this.logger.error(s)}return n},g.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=i.schema.call(e,{schema:{}},t);if(r){var s=r.schema,o=r.root,u=r.baseId,c=n.call(e,s,o,void 0,u);return e._fragments[t]=new a({ref:t,fragment:!0,schema:s,root:o,baseId:u,validate:c}),c}}(this,e)}},g.prototype.removeSchema=function(e){if(e instanceof RegExp)return v(this,this._schemas,e),v(this,this._refs,e),this;switch(typeof e){case"undefined":return v(this,this._schemas),v(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var s=this._getId(e);s&&(s=i.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},g.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},g.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,i="",s=0;s<e.length;s++){var a=e[s];a&&(i+=n+a.dataPath+" "+a.message+r)}return i.slice(0,-r.length)},g.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var s=this._opts.serialize,o=s?s(e):e,u=this._cache.get(o);if(u)return u;n=n||!1!==this._opts.addUsedSchema;var c=i.normalizeId(this._getId(e));c&&n&&k(this,c);var l,d=!1!==this._opts.validateSchema&&!t;d&&!(l=c&&c==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=i.ids.call(this,e),f=new a({id:c,schema:e,localRefs:h,cacheKey:o,meta:r});"#"!=c[0]&&n&&(this._refs[c]=f);this._cache.put(o,f),d&&l&&this.validateSchema(e,!0);return f},g.prototype._compile=function(e,t){if(e.compiling)return e.validate=s,s.schema=e.schema,s.errors=null,s.root=t||s,!0===e.schema.$async&&(s.$async=!0),s;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=n.call(this,e.schema,t,e.localRefs)}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function s(){var t=e.validate,r=t.apply(this,arguments);return s.errors=t.errors,r}},g.prototype.compileAsync=r(688);var h=r(687);g.prototype.addKeyword=h.add,g.prototype.getKeyword=h.get,g.prototype.removeKeyword=h.remove;var f=r(216);g.ValidationError=f.Validation,g.MissingRefError=f.MissingRef,g.$dataMetaSchema=l;var p="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes"],_=["/properties"];function g(e){if(!(this instanceof g))return new g(e);e=this._opts=d.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:M,warn:M,error:M};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=u(e.format);var t=this._schemaUriFormat=this._formats["uri-reference"];this._schemaUriFormatFunc=function(e){return t.test(e)},this._cache=e.cache||new s,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(e){switch(e.schemaId){case"auto":return w;case"id":return b;default:return $}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=o),this._metaOpts=function(e){for(var t=d.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(685),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(684);e._opts.$data&&(n=l(n,_));e.addMetaSchema(n,p,!0),e._refs["http://json-schema.org/schema"]=p}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function y(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function v(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function b(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function $(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function w(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function M(){}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(717);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(718)),i=s(r(76));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){if(!e||"object"!=typeof e)return e;const t={};let r=!1;return Object.keys(e).forEach(n=>{"properties"===n&&(r=!0);const i=e[n];Array.isArray(i)?t[n]=i.map(a):t[n]=null===i?i:"object"==typeof i?a(i):i}),r&&void 0===t.additionalProperties&&(t.additionalProperties=!1),r&&void 0===t.required&&(t.required=Object.keys(t.properties)),t}t.default=class{constructor(e){let t=e.name,r=e.schema,n=e.sendToBackend,s=e.needsGid,o=e.version,u=e.offsets,c=e.generate;try{this.schema=n?a(r):r}catch(e){i.default.error("failed to harden schema",{name:t,schema:r,sendToBackend:n},e)}this.sendToBackend=void 0!==n&&n,this.needsGid=void 0!==s&&s,this.version=void 0!==o?o:null,this.offsets=new Set(u||function(e,t){const r=[];for(let n=e;n<=t;n+=1)r.push(n);return r}(1,30)),this.generate=c,this._validate=null}validate(){if(null===this._validate){const e=new n.default;this._validate=e.compile(this.schema)}return{valid:this._validate(...arguments),errors:this._validate.errors}}shouldGenerateForOffset(e){return void 0!==this.generate&&this.offsets.has(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(295)),i=s(r(76));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.db=null,this.backend=new n.default(e),this.initialized=!1,this.batchSize=e.get("signalQueue.batchSize"),this.sendInterval=e.get("signalQueue.sendInterval"),this.maxAttempts=e.get("signalQueue.maxAttempts"),this.failureTimeout=6e4}init(e){return this.db=e,this.startListening()}unload(){i.default.debug("unload signal queue"),clearInterval(this.interval),clearTimeout(this.sleepTimeout),this.initialized=!1}getSize(){return this.db.getSize()}sleep(e){return new Promise(t=>{i.default.debug("signal queue sleeps for",e,"ms"),this.sleepTimeout=setTimeout(t,e)})}startListening(){i.default.debug("signal queue start listening");let e=!1;this.initialized=!0,this.interval=setInterval(()=>{!e&&this.initialized&&(e=!0,this.processNextBatch(this.batchSize).then(()=>(this.failureTimeout=6e4,this.sleep(this.sendInterval))).catch(e=>{if(this.initialized){i.default.debug("error while sending batch",e);const t=this.failureTimeout;return this.failureTimeout*=5,this.sleep(t)}return Promise.resolve()}).catch(()=>{}).then(()=>{e=!1}))},this.sendInterval)}sendSignal(e){let t=e.signal,r=e.attempts,n=e.id;return this.initialized?(i.default.debug("send signal",t),this.backend.sendSignal(t).then(()=>this.db.remove(n)).catch(e=>{const s=`failed to send signal with exception ${e} [${r}]`;let a;return(a=r<this.maxAttempts?this.db.remove(n).then(()=>this.db.push(t,r+1)).then(()=>i.default.debug("update number of attemps of signal",t)):this.db.remove(n).then(()=>i.default.debug("removed failed signal",t))).then(()=>Promise.reject(s))})):Promise.reject("signal-queue has been unloaded, cancel message sending")}sendBatch(e){if(e&&e.length>0){const t=e[0];return this.sendSignal(t).then(()=>this.sendBatch(e.slice(1)))}return Promise.resolve()}getNextBatch(e){return this.db.getN(e).catch(e=>(i.default.error("signal-queue could not get next batch",e),[]))}processNextBatch(e){return this.getNextBatch(e).then(e=>this.sendBatch(e))}push(e){return this.db.push(e).catch(t=>(i.default.log("Could not persist signal in queue, sending directly",t,e),e.meta.forcePushed=!0,this.sendSignal({signal:e})))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={"activity.result_click":e=>({type:"result_selection_click",behavior:{current_position:e.current_position,query_length:e.query_length,reaction_time:e.reaction_time,display_time:e.display_time,urlbar_time:e.urlbar_time}}),"activity.result_enter":e=>({type:`result_selection_${function(e){const t=(e.position_type||[""])[0];return"inbar_url"===t?e.source||e.autocompleted?"autocomplete":"url":"inbar_query"===t?"query":"enter"}(e)}`,behavior:{current_position:e.current_position,query_length:e.query_length,reaction_time:e.reaction_time,display_time:e.display_time,urlbar_time:e.urlbar_time}})};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(11)),i=a(r(721)),s=a(r(76));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){this.isDev=n.default.get("developer",!1)}process(e,t,r){if(this.isDemographics(e))return Promise.resolve({demographics:null});if(void 0===t){const t=this.getId(e);if(void 0!==i.default[t]){const r=i.default[t](e);return Promise.resolve({type:r.type||t,behavior:r.behavior})}const r={};return Object.keys(e).filter(t=>!this.isObject(e[t])).filter(e=>"seq"!==e&&"ts"!==e&&"session"!==e).forEach(t=>{r[t]=e[t]}),Promise.resolve({type:t,behavior:r})}if(this.isDev&&t.sendToBackend){var n=t.validate(e);const i=n.valid,a=n.errors;if(!i){s.default.error("Signal does not respect schema",r,e,a);const n=JSON.stringify(e,void 0,2),i=JSON.stringify(a,void 0,2),o=JSON.stringify(t.schema,void 0,2);return Promise.reject(`Signal could not be validated: got ${n} with errors: ${i} for schema: ${o}`)}}return Promise.resolve({type:r,behavior:e,meta:{}})}isObject(e){return null!==e&&"object"==typeof e}isDemographics(e){return"environment"===e.type}getId(e){let t=e.type,r=e.action,n=e.target,i="";return t&&(i=t,r&&(i=`${i}.${r}`,n&&(i=`${i}.${n}`))),i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addConnectionChangeListener=function(){},t.removeConnectionChangeListener=function(){},t.default={type:"wifi"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(87)),i=u(r(295)),s=r(106),a=u(s),o=u(r(76));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}const l="anolysisGID",d="anolysisLastAliveSignal",h="anolysisLastGIDUpdate",f="anolysisInstalled",p="anolysisSentNewInstall",m="anolysisDemographics";t.default=class{constructor(e){this.backend=new i.default(e),this.storage=null,this.demographics=e.get("demographics"),this.serializedDemographics=JSON.stringify(this.demographics),this.getGIDPromise=null}init(e){this.storage=e}setLastGIDUpdateDate(e){return this.storage.set(h,e)}getLastGIDUpdateDate(){return this.storage.get(h)}setRegisteredDemographics(e){return this.storage.set(m,e)}getRegisteredDemographics(){return this.storage.get(m)}setCurrentGID(e){return this.storage.set(l,e)}getCurrentGID(){return this.storage.get(l)}setNewInstallDate(e){return this.storage.set(f,e)}getNewInstallDate(){return this.storage.get(f)}setSentNewInstall(e){return this.storage.set(p,e)}getSentNewInstall(){return this.storage.get(p)}setLastTimeDemographicSent(e){return this.storage.set(d,e)}getLastTimeDemographicSent(){return this.storage.get(d)}_handleDemographicsSending(e){var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isNewInstall;let n=void 0!==r&&r;return c(function*(){try{const r=yield e(t.serializedDemographics);o.default.debug("Success sending demographics");const i=(0,s.getSynchronizedDateFormatted)();yield t.setLastTimeDemographicSent(i),yield t.setRegisteredDemographics(r),n&&(yield t.setSentNewInstall(i))}catch(e){o.default.error("Could not send demographics",e)}})()}handleNewInstall(){var e=this;return c(function*(){o.default.debug("handleNewInstall"),yield e._handleDemographicsSending(function(t){return e.backend.newInstall(t)},{isNewInstall:!0})})()}handleReappearingUser(){var e=this;return c(function*(){o.default.debug("handleReappearingUser"),yield e._handleDemographicsSending(function(t){return e.backend.reappearingUser(t)},{isNewInstall:!0})})()}handleActiveUserSignal(){var e=this;return c(function*(){o.default.debug("handleActiveUserSignal");const t=e.getLastTimeDemographicSent();if(void 0!==t){o.default.debug("Demographics have already been sent before");const r=(0,a.default)(),i=(0,n.default)(t,s.DATE_FORMAT);r.diff(i,"days")>=180&&(o.default.debug("handleActiveUserSignal send again"),yield e._handleDemographicsSending(function(t){return e.backend.activeUserSignal(t)},{isNewInstall:!1}))}})()}handleUpdate(){var e=this;return c(function*(){o.default.debug("handleUpdate");try{const t=yield e.backend.updateGID(e.getRegisteredDemographics());o.default.debug("success handleUpdate",t),yield e.setLastGIDUpdateDate((0,s.getSynchronizedDateFormatted)()),yield e.setCurrentGID(t)}catch(e){o.default.log("failed to update GID, will be retried later",e)}})()}_getGID(){var e=this;return c(function*(){const t=e.demographics,r=(0,a.default)(),i=r.format(s.DATE_FORMAT);e.getNewInstallDate()||e.setNewInstallDate(i);const o=(0,n.default)(t.install_date,"YYYY/MM/DD").format(s.DATE_FORMAT);if(e.getSentNewInstall()||(i!==o?yield e.handleReappearingUser():yield e.handleNewInstall()),yield e.handleActiveUserSignal(),(0,n.default)(e.getSentNewInstall(),s.DATE_FORMAT).isSame(r,"day"))return e.getRegisteredDemographics();if(void 0===e.getCurrentGID())yield e.handleUpdate();else{const t=(0,n.default)(e.getLastGIDUpdateDate(),s.DATE_FORMAT);r.diff(t,"hours")>1&&(yield e.handleUpdate())}return e.getCurrentGID()})()}getGID(){var e=this;return c(function*(){return null!==e.getGIDPromise?e.getGIDPromise:(e.getGIDPromise=c(function*(){try{return(yield e._getGID())||""}catch(e){return""}finally{e.getGIDPromise=null}})(),e.getGIDPromise)})()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=m(r(87)),s=m(r(11)),a=r(147),o=m(r(724)),u=m(r(722)),c=m(r(720)),l=m(r(719)),d=r(106),h=m(d),f=m(r(76)),p=m(r(683));function m(e){return e&&e.__esModule?e:{default:e}}function _(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}t.default=class{constructor(e){this.running=!1,this.currentDate=null,this.availableDefinitions=new Map,this.preprocessor=new u.default;const t=e.get("Storage");this.storage=new t,this.session=e.get("session"),this.signalQueue=new c.default(e),this.gidManager=new o.default(e)}init(){var e=this;return _(function*(){yield e.storage.init(),yield Promise.all([e.gidManager.init(e.storage.gid),e.signalQueue.init(e.storage.signals)]),e.running=!0})()}unload(){clearTimeout(this.runTasksTimeout),this.signalQueue.unload(),this.storage.unload(),this.running=!1}reset(){return this.storage.destroy()}registerSignalDefinitions(e){e.forEach(e=>{const t=e.name;if(f.default.debug("Register definition",t),this.availableDefinitions.has(t))throw new Error(`Signal ${t} already exists with value ${JSON.stringify(e)}`);this.availableDefinitions.set(t,new l.default(e))})}onNewDay(e){var t=this;return _(function*(){e!==t.currentDate&&(t.gidManager.getGID(),f.default.log("Generate aggregated signals (new day)",t.currentDate,e),t.currentDate=e,yield t.updateRetentionState(),f.default.log("Run aggregation tasks"),yield t.runDailyTasks())})()}updateRetentionState(){var e=this;return _(function*(){const t=yield e.storage.retention.getState();f.default.debug("retention state",t),yield e.storage.retention.setState((0,p.default)(t))})()}runDailyTasks(){var e=this;return _(function*(){let t=0;const r=(0,h.default)(),n=i.default.max((0,i.default)(e.gidManager.getNewInstallDate(),d.DATE_FORMAT),(0,h.default)().subtract(30,"days"));let s=r;for(;e.running&&n.isSameOrBefore(s,"day");){const r=s.format(d.DATE_FORMAT);try{yield e.runTasksForDay(r,t)}catch(e){f.default.error("Could not run tasks for day",r,e)}yield new Promise(function(t){e.runTasksTimeout=setTimeout(t,5e3)}),s=s.subtract(1,"days"),t+=1}})()}runTasksForDay(e,t){var r=this;return _(function*(){const s=yield r.storage.retention.getState();let a=null,o=0;if(0!==t&&(o=(a=yield r.storage.behavior.getTypesForDate(e)).size),f.default.debug("generateSignals",{date:e,numberOfSignals:o,offset:t}),0===t||0!==o){const o=[...r.availableDefinitions.entries()];for(let c=0;c<o.length;c+=1){var u=n(o[c],2);const l=u[0],h=u[1];if(h.shouldGenerateForOffset(t))try{yield r.storage.aggregated.runTaskAtMostOnce(e,l,_(function*(){f.default.debug("run task",l,t);const n=yield h.generate({date:e,dateMoment:(0,i.default)(e,d.DATE_FORMAT),records:a,retention:s});yield Promise.all(n.map(function(t){return r.handleTelemetrySignal(t,l,{date:e})}))}))}catch(e){f.default.log("Could not genereate signals for analysis:",l,e)}}}0!==t&&(yield r.storage.behavior.deleteByDate(e))})()}handleTelemetrySignal(e,t){let r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.default.debug("handleTelemetrySignal",t,e),void 0===t?(f.default.debug("Ignoring telemetry signal without schema",e),Promise.resolve()):void 0===(r=this.availableDefinitions.get(t))?(f.default.debug(`Telemetry schema ${t} was not found`),Promise.resolve()):(n=t,this.preprocessor.process(e,r,n).then(e=>{const t=void 0!==e.demographics,n=void 0===r,o=!n&&r.sendToBackend;return t?Promise.resolve():o&&!n?(f.default.debug("Signal is sendToBackend",e),(r.needsGid?this.gidManager.getGID():Promise.resolve("")).then(t=>(e.meta=i,e.meta.gid=t,e.meta.seed=(0,a.randomInt)(),e.meta.session=this.session,e.meta.dev=s.default.get("developer",!1),e.meta.version=r.version,e.meta.date=e.meta.date||(0,h.default)().format(d.DATE_FORMAT),this.signalQueue.push(e)))):this.storage.behavior.add(e)}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserAgent=function(){return navigator.userAgent},t.getDistribution=function(){return(0,n.getPref)("distribution","")},t.getInstallDate=function(){return(0,n.getPref)("install_date","")},t.getChannel=function(){return i.default.settings.channel||""},t.getCountry=function(){return(0,n.getPref)("config_location","")};var n=r(442),i=function(e){return e&&e.__esModule?e:{default:e}}(r(22))},function(e,t,r){var n;!function(i,s){"use strict";var a="model",o="name",u="type",c="vendor",l="version",d="mobile",h="tablet",f={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(){for(var e,t,r,n,i,s,a,o=0,u=arguments;o<u.length&&!s;){var c=u[o],l=u[o+1];if(void 0===e)for(n in e={},l)l.hasOwnProperty(n)&&("object"==typeof(i=l[n])?e[i[0]]=void 0:e[i]=void 0);for(t=r=0;t<c.length&&!s;)if(s=c[t++].exec(this.getUA()))for(n=0;n<l.length;n++)a=s[++r],"object"==typeof(i=l[n])&&i.length>0?2==i.length?"function"==typeof i[1]?e[i[0]]=i[1].call(this,a):e[i[0]]=i[1]:3==i.length?"function"!=typeof i[1]||i[1].exec&&i[1].test?e[i[0]]=a?a.replace(i[1],i[2]):void 0:e[i[0]]=a?i[1].call(this,a,i[2]):void 0:4==i.length&&(e[i[0]]=a?i[3].call(this,a.replace(i[1],i[2])):void 0):e[i]=a||void 0;o+=2}return e},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(f.has(t[r][n],e))return"?"===r?void 0:r}else if(f.has(t[r],e))return"?"===r?void 0:r;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},_={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,l],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[o,l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],l],[/(edge)\/((\d+)?[\w\.]+)/i],[o,l],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],l],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[o,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],l],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[o,l],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],l],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],l],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],l],[/;fbav\/([\w\.]+);/i],[l,[o,"Facebook"]],[/fxios\/([\w\.-]+)/i],[l,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,o],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[l,p.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,c,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[c,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,a,[u,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[a,[c,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[a,p.str,m.device.amazon.model],[c,"Amazon"],[u,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,c,[u,d]],[/\((ip[honed|\s\w*]+);/i],[a,[c,"Apple"],[u,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,a,[u,d]],[/\(bb10;\s(\w+)/i],[a,[c,"BlackBerry"],[u,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[c,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[a,"Xperia Tablet"],[u,h]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[c,"Sony"],[a,"Xperia Phone"],[u,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[c,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[c,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[c,p.str,m.device.sprint.vendor],[a,p.str,m.device.sprint.model],[u,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,a,[u,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[c,[a,/_/g," "],[u,d]],[/(nexus\s9)/i],[a,[c,"HTC"],[u,h]],[/(nexus\s6p)/i],[a,[c,"Huawei"],[u,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,a,[u,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[c,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[c,"Microsoft"],[u,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[c,"Motorola"],[u,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[c,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,f.trim],[a,f.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[c,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[c,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],a,[u,h]],[/smart-tv.+(samsung)/i],[c,[u,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[c,"Samsung"],a,[u,d]],[/sie-(\w+)*/i],[a,[c,"Siemens"],[u,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[c,"Nokia"],a,[u,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[c,"Acer"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],a,[u,h]],[/(lg) netcast\.tv/i],[c,a,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[a,[c,"LG"],[u,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[c,"Lenovo"],[u,h]],[/linux;.+((jolla));/i],[c,a,[u,d]],[/((pebble))app\/[\d\.]+\s/i],[c,a,[u,"wearable"]],[/android.+;\s(glass)\s\d/i],[a,[c,"Google"],[u,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,d]],[/android.+a000(1)\s+build/i],[a,[c,"OnePlus"],[u,d]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,f.lowerize],c,a]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,l],[/rv\:([\w\.]+).*(gecko)/i],[l,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[l,p.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[l,p.str,m.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[o,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[o,"Symbian"],l],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[o,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],l],[/(sunos)\s?([\w\.]+\d)*/i],[[o,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[o,l],[/(haiku)\s(\w+)/i],[o,l],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[o,"iOS"],[l,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[o,l]]},g=function(e,t){if(!(this instanceof g))return new g(e,t).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?f.extend(_,t):_;return this.getBrowser=function(){var e=p.rgx.apply(this,n.browser);return e.major=f.major(e.version),e},this.getCPU=function(){return p.rgx.apply(this,n.cpu)},this.getDevice=function(){return p.rgx.apply(this,n.device)},this.getEngine=function(){return p.rgx.apply(this,n.engine)},this.getOS=function(){return p.rgx.apply(this,n.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};g.VERSION="0.7.12",g.BROWSER={NAME:o,MAJOR:"major",VERSION:l},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:a,VENDOR:c,TYPE:u,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:o,VERSION:l},g.OS={NAME:o,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):r(39)?void 0===(n=function(){return g}.call(t,r,t,e))||(e.exports=n):i.UAParser=g;var y=i.jQuery||i.Zepto;if(void 0!==y){var v=new g;y.ua=v.getResult(),y.ua.get=function(){return v.getUA()},y.ua.set=function(e){v.setUA(e);var t=v.getResult();for(var r in t)y.ua[r]=t[r]}}}("object"==typeof window?window:this)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(727);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(87)),i=u(r(728)),s=r(726),a=u(r(69)),o=u(r(219));function u(e){return e&&e.__esModule?e:{default:e}}const c=a.default.get("core",{level:"log",prefix:"[demographics]"}),l=new Set(["amd64","i386","x86_64"]),d=new Set(["FreeBSD","NetBSD","OpenBSD","DragonFly"]),h=new Set(["Arch","CentOS","Fedora","Debian","Gentoo","GNU","Mageia","Mandriva","Mint","RedHat","Slackware","SUSE","Ubuntu","VectorLinux"]);function f(e){return e.trim().toLowerCase().replace(/\s+/g,"-")}t.default=(()=>{var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){const e=function(e){let t=`Other/${e}`;if("ios"===e)t="Mobile/iOS";else if("android"===e)t="Mobile/Android";else if(e){const n=new i.default;n.setUA(e);var r=n.getOS();const s=r.name,a=r.version;let o=!1;if("Windows"===s?(t="Desktop/Windows",o=!0):"Mac OS"===s?(t="Desktop/Mac OS",o=!0):d.has(s)?t=`Desktop/BSD/${s}`:"Linux"===s||"linux"===s?t="Desktop/Linux":h.has(s)?(t=`Desktop/Linux/${s}`,o=!0):"Android"===s?(t="Mobile/Android",o=!0):"iOS"===s?(t="Mobile/iOS",o=!0):void 0!==s&&(t=`Other/${s}`),o&&!l.has(a)&&void 0!==a){let e;(e=-1!==a.indexOf(" ")?a.split(" ",1)[0].split("."):a.split(".")).length>2&&(e=e.slice(0,2)),t=`${t}/${e.join(".").trim()}`}}return c.debug("platform",t),t}(yield(0,s.getUserAgent)());return{country:f(function(e){return e}(yield(0,s.getCountry)())),campaign:f(function(e){return e}(yield(0,s.getDistribution)())),install_date:f(function(e){let t=`Other/${e||""}`;if(e){const r=864e5*e,i=(0,n.default)(r);t=i.format("YYYY/MM/DD");const s=(0,o.default)();(e<16129||i.isAfter(s,"day"))&&(t=`Other/${t}`)}return c.debug("install_date",t),t}(yield(0,s.getInstallDate)())),platform:f(e),product:f(function(e,t){let r=`Other/${e||""}`;try{let n=null;try{n=Number(e)}catch(e){}if("40"===e){const e="CLIQZ/desktop";r=t.includes("Windows")?`${e}/Cliqz for Windows`:t.includes("Mac")?`${e}/Cliqz for Mac OS`:`${e}/Cliqz for Linux`}else null!==n&&n<40?r="CLIQZ/add-on/Cliqz for Firefox":"MA10"===e?r="third-party/mobile/Telefonica":e.startsWith("MA")?r="CLIQZ/mobile/Cliqz for Android":e.startsWith("MI")?r="CLIQZ/mobile/Cliqz for iOS":"CH50"===e&&(r="third-party/desktop/Avira Scout");return c.debug("product",r),r}catch(e){return c.error("exception",e),r}}(yield(0,s.getChannel)(),e))}});return function(){return e.apply(this,arguments)}})()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=(()=>{var e=b(function*(){const e=yield(0,s.default)(),t=h.isMobile?_.default:m.default,r=new p.default({demographics:e,Storage:t});let n=new f.default(r);return o.default.get($,null)!==w&&(g.default.log("reset anolysis state because of update"),yield n.reset(),o.default.set($,w),n=new f.default(r)),yield n.registerSignalDefinitions(y.default),yield n.init(),n});return function(){return e.apply(this,arguments)}})();var i=v(r(78)),s=v(r(729)),a=v(r(219)),o=v(r(11)),u=v(r(177)),c=v(r(47)),l=r(444),d=r(32),h=r(52),f=v(r(725)),p=v(r(682)),m=v(r(681)),_=v(r(680)),g=v(r(76)),y=v(r(677));function v(e){return e&&e.__esModule?e:{default:e}}function b(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}const $="anolysisVersion",w=7;function k(e,t,r){return u.default.push(e,r)}t.default=(0,i.default)({requiresServices:["cliqz-config","session","telemetry"],isBackgroundInitialized:!1,app:null,settings:null,anolysis:null,init(e,t){var r=this;return b(function*(){if(g.default.debug("init"),!r.isBackgroundInitialized)if(r.app=t,r.settings=e,u.default.onTelemetryEnabled(r.actions.onTelemetryEnabled),u.default.onTelemetryDisabled(r.actions.onTelemetryDisabled),u.default.isEnabled())if(r.isBackgroundInitialized=!0,null===(0,a.default)())c.default.telemetry({type:"anolysis.no_sync_time_available"}),r.onPrefChange||(r.onPrefChange=(0,d.subscribe)("prefchange",function(e){"config_ts"===e&&(r.onPrefChange.unsubscribe(),r.onPrefChange=void 0,g.default.debug("init Anolysis after config_ts pref change"),r.init(r.settings,r.app))}));else{r.onPrefChange&&(g.default.debug("remove config_ts pref listener"),r.onPrefChange.unsubscribe(),r.onPrefChange=void 0),c.default.telemetry({type:"anolysis.start_init"});try{g.default.debug("instantiate Anolysis");const e=yield n();if(r.anolysis||!r.isBackgroundInitialized||!u.default.isEnabled())return g.default.log("concurrent Anolysis init, aborting"),void e.unload();r.anolysis=e,g.default.debug("register Anolysis telemetryHandler"),-1===c.default.telemetryHandlers.indexOf(k)&&c.default.telemetryHandlers.push(k),g.default.debug("trigger aggregations"),r.anolysis.onNewDay(o.default.get("config_ts")),c.default.telemetry({type:"anolysis.start_end"})}catch(e){g.default.error("Exception while init anolysis",e),r.unload(),c.default.telemetry({type:"anolysis.start_exception",exception:`${e}`})}}else r.isBackgroundInitialized=!1})()},unload(){g.default.log("unloading"),this.isBackgroundInitialized=!1,this.onPrefChange&&(g.default.debug("remove config_ts pref listener"),this.onPrefChange.unsubscribe(),this.onPrefChange=void 0);const e=c.default.telemetryHandlers.indexOf(k);-1!==e&&(g.default.debug("remove Anolysis telemetryHandler"),c.default.telemetryHandlers.splice(e,1)),this.anolysis&&(g.default.debug("unloading Anolysis"),this.anolysis.unload(),this.anolysis=null)},beforeBrowserShutdown(){},isAnolysisInitialized(){return this.isBackgroundInitialized&&this.anolysis&&this.anolysis.running},events:{prefchange(e){"config_ts"===e&&this.isAnolysisInitialized()&&this.anolysis.onNewDay(o.default.get("config_ts"))}},actions:{getSignalDefinitions(){return[...this.anolysis.availableDefinitions.entries()]},registerSignalDefinitions(e){return this.anolysis?this.anolysis.registerSignalDefinitions(e):Promise.resolve()},handleTelemetrySignal(e,t,r){return this.isAnolysisInitialized()?c.default.isPrivateMode()?Promise.resolve():(t&&r&&g.default.error('instantPush argument is ignored by anolysis, please specify "sendToBackend" this in signals\' schema'),this.anolysis.handleTelemetrySignal(e,r).catch(t=>{this.isAnolysisInitialized()?g.default.error("handleTelemetrySignal",t,e,r):g.default.debug("Sending message was dropped because Anolysis was stopped",t,e,r)})):Promise.reject(`Anolysis is disabled, ignoring: ${r} ${JSON.stringify(e)}`)},getGID(){return this.isAnolysisInitialized()?this.anolysis.gidManager.getGID():Promise.reject("Cannot call `getGID` when Anolysis is unloaded")},getMetricsForDate(e){var t=this;return b(function*(){return t.isAnolysisInitialized()?(yield t.anolysis.storage.behavior.getTypesForDate(e)).toObj():Promise.reject("Cannot call `getMetricsForDate` when Anolysis is unloaded")})()},getLastGIDUpdateDate(){return this.isAnolysisInitialized()?this.anolysis.gidManager.getLastGIDUpdateDate():Promise.reject("Cannot call `getLastGIDUpdateDate` when Anolysis is unloaded")},getDemographics:()=>(0,s.default)(),onTelemetryEnabled(){(0,l.shouldEnableModule)("anolysis")&&this.init(this.settings,this.app)},onTelemetryDisabled(){this.unload()}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(730)),i=s(r(653));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66),i=r(82),s=u(r(11)),a=r(297),o=u(a);function u(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){let t=e.window;this.window=t}init(){}unload(){}status(){if((0,a.adbABTestEnabled)())return(0,n.getActiveTab)().then(e=>{let t=e.id,r=e.url,n=!1,u=!1,c=!1;if((0,i.isUrl)(r)&&o.default.adblockInitialized){const e=o.default.urlWhitelist.getState(r);u=e.hostname,n=e.url}const l=o.default.adbStats.report(t),d=s.default.get(a.ADB_PREF,!1)!==a.ADB_PREF_VALUES.Disabled;let h,f;return c=!d&&!n&&!u,h=d?n||u?"off":"active":"off",f=n?"off_website":u?"off_domain":c?"off_all":"off_website",{visible:!0,enabled:d&&!u&&!n,optimized:!0===s.default.get(a.ADB_PREF_OPTIMIZED,!1),disabledForUrl:n,disabledForDomain:u,disabledEverywhere:c,totalCount:l.totalCount,advertisersList:l.advertisersList,advertisersInfo:l.advertisersInfo,state:h,off_state:f}})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FiltersList=void 0;var n=r(80),i=l(n),s=l(r(424)),a=r(52),o=l(r(296)),u=l(r(22)),c=r(55);function l(e){return e&&e.__esModule?e:{default:e}}const d=["adblocker"],h=6e4,f=60*h,p=20,m="mobile"===a.platformName?"mobile-new":"firefox",_=`${u.default.settings.CDN_BASEURL}/adblocking`,g=`${_}/latest-filters/`;function y(e){let t=e;return["http://","https://"].forEach(e=>{t.startsWith(e)&&(t=t.substring(e.length))}),t}class v{constructor(e,t,r){this.checksum=e,this.baseRemoteURL=r,this.assetName=y(t);const i=()=>(0,c.fetch)(this.remoteURL()).then(e=>e.text());"mobile"===a.platformName?this.resource=new n.Resource(d.concat(this.assetName.split("/")),{remoteURL:this.remoteURL(),dataType:"plainText"}):this.resource={load:i,updateFromRemote:i}}remoteURL(){return`${this.baseRemoteURL}`}load(){return this.resource.load().then(this.updateList.bind(this)).catch(e=>{o.default.error(`exception while loading ${this.assetName} ${e} ${e.stack}`)})}update(){return this.resource.updateFromRemote().then(this.updateList.bind(this)).catch(e=>{o.default.error(`exception while updating ${this.assetName} ${e} ${e.stack}`)})}needsToUpdate(e){return e!==this.checksum}stop(){}updateFromChecksum(e){return this.resource.remoteURL=this.remoteURL(),this.checksum=e,this.update()}updateList(e){const t=e.trim();if(t.length>0)return t}}t.FiltersList=v;t.default=class extends n.UpdateCallbackHandler{constructor(e,t){super(),this.useCountryLists=e,this.adbLangOverride=t,this.allowedListsLoader=new i.default(d.concat(m,"checksums"),{cron:24*f,updateInterval:15*h,dataType:"json",remoteURL:this.remoteURL(),remoteOnly:!0}),this.allowedListsLoader.onUpdate(this.updateChecksums.bind(this)),this.initLists()}initLists(){this.lists=new Map,this.availableLang=new Set,this.loadedLang=new Set}remoteURL(){return`${_}/${m}/allowed-lists.json?t=${parseInt(Date.now()/60/60/1e3,10)}`}stop(){this.allowedListsLoader.stop()}load(){return this.allowedListsLoader.load().then(this.updateChecksums.bind(this)).catch(e=>{o.default.error(`exception while loading allowed lists ${e} ${e.stack}`)})}update(){return this.allowedListsLoader.updateFromRemote().catch(e=>{o.default.error(`exception while updating allowed lists ${e} ${e.stack}`)})}getLoadedAssets(){return new Set([...this.lists.keys()])}userOverrides(){const e=this.adbLangOverride;return"string"==typeof e&&""!==e?e.split(";"):null}userLang(){if(!this.useCountryLists)return[];const e=this.userOverrides();if(null!==e)return e;if(s.default.state){const e=[],t=s.default.state(!0);if(t.length>0){e.push(t[0][0]);const r=t[0][1];t.shift(0),t.filter(e=>e[1]<r*p).map(t=>e.push(t[0]))}return e}return["en"]}updateChecksums(e){this.allowedListsLoader.resource.remoteURL=this.remoteURL();const t=new Map;this.availableLang=new Set,this.loadedLang=new Set;const r=this.userLang();return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(i=>{const s=e[n][i].checksum;let a=null;"country_lists"===n&&(a=e[n][i].language,this.availableLang.add(a));const o=y(i),u=g+o;null!==a&&-1===r.indexOf(a)||(t.set(i,{checksum:s,asset:i,remoteURL:u,key:n}),null!==a&&this.loadedLang.add(a))})}),this.updateLists(t)}updateLists(e){const t=[];return[...this.lists.keys()].forEach(t=>{e.has(t)||this.lists.delete(t)}),e.forEach(e=>{const r=e.checksum,n=e.asset,i=e.remoteURL,s="js_resources"!==e.key;if(this.lists.has(n)){let e=this.lists.get(n);e.needsToUpdate(r)&&(e=new v(r,n,i),t.push(e.updateFromChecksum(r).then(t=>{if(void 0!==t)return{asset:n,filters:t,isFiltersList:s,checksum:e.checksum}})))}else{const e=new v(r,n,i);this.lists.set(n,e),t.push(e.load().then(t=>{if(void 0!==t)return{asset:n,filters:t,isFiltersList:s,checksum:e.checksum}}))}}),Promise.all(t).then(e=>e.filter(e=>void 0!==e)).then(e=>this.triggerCallbacks(e))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66),i=function(e){return e&&e.__esModule?e:{default:e}}(r(176)),s=r(91),a=r(60);class o{constructor(e){this.pageUrl=e,this.hostGD=(0,a.getGeneralDomain)(s.URLInfo.get(e).hostname),this.count=0,this.blocked=new Map,this.blockedDomains=new Set,this.blockedInfo={}}addBlockedUrl(e){const t=(0,a.getGeneralDomain)(s.URLInfo.get(e).hostname);let r;if(this.blockedDomains.add(t),t===this.hostGD)r="First party";else{const e=i.default.getDomainOwner(t);r=e.name,this.blockedInfo[r]=e}this.blocked.has(r)?(this.blocked.get(r).has(e)||(this.count+=1),this.blocked.get(r).add(e)):(this.blocked.set(r,new Set([e])),this.count+=1)}report(){const e={};return this.blocked.forEach((t,r)=>{e[r]=[...t]}),{totalCount:this.count,advertisersList:e,advertisersInfo:this.blockedInfo}}}t.default=class{constructor(){this.tabs=new Map}addBlockedUrl(e,t,r){let n;e!==(n=this.tabs.has(r)?this.tabs.get(r):this.addNewPage(e,r)).pageUrl&&(n=this.addNewPage(e,r)),n.addBlockedUrl(t)}addNewPage(e,t){const r=new o(e);return this.tabs.set(t,r),r}report(e){return this.tabs.has(e)?this.tabs.get(e).report():{totalCount:0,advertisersList:{},advertisersInfo:{}}}clearStats(){const e=[];return this.tabs.forEach((t,r)=>{e.push((0,n.checkIsWindowActive)(r).then(e=>{e&&this.tabs.delete(r)}))}),Promise.all(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(457));t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66),i=l(r(78)),s=l(r(31)),a=l(r(11)),o=r(60),u=r(297),c=l(u);function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)({humanWeb:s.default.module("human-web"),core:s.default.module("core"),requiresServices:["domainInfo"],enabled:()=>!0,init(){return(0,n.getBrowserMajorVersion)()<c.default.MIN_BROWSER_VERSION?Promise.resolve():(this.adb=c.default,c.default.init(this.humanWeb))},unload(){(0,n.getBrowserMajorVersion)()<c.default.MIN_BROWSER_VERSION||c.default.unload()},events:{"content:location-change":function(e){let t=e.windowId,r=e.url;if(c.default.isAdbActive(r)&&(0,u.isSupportedProtocol)(r)){const e=c.default.adBlocker.engine.getDomainFilters((0,o.extractHostname)(r));this.core.action("broadcastMessageToWindow",e,t,"adblocker")}},"control-center:adb-optimized":()=>{a.default.set(u.ADB_PREF_OPTIMIZED,!a.default.get(u.ADB_PREF_OPTIMIZED,!1))},"control-center:adb-activator":e=>{if(c.default.adblockInitialized&&c.default.urlWhitelist.clearState(e.url),"active"===e.status)a.default.set(u.ADB_PREF,u.ADB_PREF_VALUES.Enabled);else if("off"===e.status)if("all-sites"===e.option)a.default.set(u.ADB_PREF,u.ADB_PREF_VALUES.Disabled);else{a.default.set(u.ADB_PREF,u.ADB_PREF_VALUES.Enabled);let t=e.option;"domain"===e.option&&(t="hostname"),"page"===e.option&&(t="url"),c.default.urlWhitelist.changeState(e.url,t,"add"),c.default.logActionHW(e.url,t,"add")}},prefchange:e=>{e===u.ADB_USER_LANG&&c.default.adblockInitialized&&c.default.adBlocker.reset()}},actions:{getCosmeticsForNodes(e,t){const r=t.tab.url;return c.default.isAdbActive(r)?c.default.adBlocker.engine.getCosmeticsFilters((0,o.extractHostname)(r),e):{active:!1}},getCosmeticsForDomain(e){const t=e.url,r=e.tab.url;return c.default.isAdbActive(r)?c.default.adBlocker.engine.getDomainFilters((0,o.extractHostname)(t)):{active:!1}},getAdBlockInfo:e=>c.default.adbStats.report(e),getAdBlockInfoForTab:e=>c.default.adbStats.report(e),isWhitelisted:e=>c.default.urlWhitelist.isWhitelisted(e),changeWhitelistState:(e,t,r)=>c.default.urlWhitelist.changeState(e,t,r),getWhitelistState:e=>c.default.urlWhitelist.getState(e),isDomainInBlacklist(e){return this.actions.isWhitelisted(e)},toggleUrl(e,t){t?this.actions.changeWhitelistState(e,"hostname","toggle"):this.actions.changeWhitelistState(e,"url","toggle")},pause(){this.adb.paused=!0},resume(){this.adb.paused=!1},addPipelineStep(e){return this.adb.pipeline?this.adb.pipeline.addPipelineStep(e):Promise.reject(`Could not add pipeline step: ${e.name}`)},removePipelineStep(e){this.adb&&this.adb.pipeline&&this.adb.pipeline.removePipelineStep(e)},addWhiteListCheck(e){c.default.addWhiteListCheck(e)}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(736)),i=s(r(732));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11));t.default=class{init(){}unload(){}status(){return{visible:!0,userEnabled:!0===n.default.get("offers2UserEnabled",!0),locationEnabled:1===n.default.get("offers_location",1)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(69));t.default=n.default.get("green-ads",{level:"log"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(87)),i=r(160),s=o(r(81)),a=o(r(739));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){let n=null,s=null;if(void 0!==e.and)s="and";else if(void 0!==e.or)s="or";else if(void 0!==e.none)s="none";else if(e.seq)s="seq";else{if(void 0===e.match)return a.default.error("condition not supported",e),null;n=function(e,t,r){const n=r.map,s=r.urlPatterns,a=r.queryPatterns,o=e.match,u=Object.assign({parent:t},o);let c;if(void 0!==o.query){const e=(0,i.parseNetworkFilter)(o.query);a.push(e),c=e.id,u.query=e.id}else if(void 0!==o.url){const e=(0,i.parseNetworkFilter)(o.url);s.push(e),c=e.id,u.url=e.id}return n.update(c,e=>{e.push(u)}),u}(e,t,r)}return null!==s&&((n=Object.assign({parent:t},e))[s]=e[s].map(e=>u(e,n,r))),n}function c(e,t){const r=e.url||e.query,n=t.get(r);n.splice(n.indexOf(e),1),0===n.length&&t.delete(r)}function l(e,t){let r=t.type,i=t.ts,s=t.target;const a=void 0!==e.query&&"query"===r,o=void 0!==e.url&&"url"===r;if(a||o){if(a&&void 0!==e.source&&s.source!==e.source)return!1;if((void 0!==e.min_count||void 0!==e.max_count)&&(void 0===e.count?e.count=1:e.count+=1,e.count<e.min_count||e.count>e.max_count))return!1;if(void 0!==e.seen_in_last_n_days){if(i<(0,n.default)().subtract(e.seen_in_last_n_days,"days").startOf("day").valueOf())return!1}return!0}return!1}function d(e,t){const r=e.parent;if(null!==r){if(void 0!==r.and){const n=r.and,i=n.indexOf(e);if(n.splice(i,1),c(e,t),0!==n.length)return}else if(void 0!==r.or){if(void 0!==r.min_match&&1!==r.min_match){const n=r.or,i=n.indexOf(e);return n.splice(i,1),c(e,t),void(r.min_match-=1)}!function e(t,r){t instanceof Array?t.forEach(t=>{e(t,r)}):void 0!==t.url||void 0!==t.query?r(t):t instanceof Object&&Object.keys(t).forEach(n=>{"parent"!==n&&e(t[n],r)})}(r.or,e=>{c(e,t)})}else{if(void 0!==r.none)return;if(void 0!==r.seq){const n=r.seq,i=n.indexOf(e);return void(0===i&&(n.splice(i,1),c(e,t),n.length))}}d(r,t)}else c(e,t)}function h(e){let t=e.parent;for(;null!==t&&void 0===t.none;)t=t.parent;return null!==t&&void 0!==t.none}class f{constructor(e){this.reversed=new s.default(()=>[]),this.queryPatterns=[],this.urlPatterns=[],this.originalCondition=e,this.condition=u(e,null,{map:this.reversed,queryPatterns:this.queryPatterns,urlPatterns:this.urlPatterns}),this.wasMutated=!1,this.lastEventTs=null,this.events=[],this.triggered=!1}dump(){return{condition:this.originalCondition,events:this.events,wasMutated:this.wasMutated}}static load(e){let t=e.condition,r=e.events,n=e.wasMutated;const i=new f(t);return i.match(r),i.wasMutated=n,i}whyDidItMatch(){return this.events.map(e=>{const t=n.default.duration(Date.now()-e.ts).humanize();return"query"===e.type?`You queried '${e.target.query}' on ${e.target.source} ${t} ago (pattern: { query: ${e.pattern.filter} })`:"url"===e.type?`You visited ${e.target.url} ${t} ago (pattern: { url: ${e.pattern.filter} })`:"?????"})}match(e){if(this.triggered)return!1;if(0===e.length)return[...this.reversed.values()].every(e=>e.every(h));this.lastEventTs=e[e.length-1].ts;let t=!1;for(let r=0;r<e.length;r+=1){const n=e[r],i=n.pattern.id;if(this.reversed.has(i)){const e=this.reversed.get(i);for(let r=0;r<e.length;r+=1){const i=e[r];l(i,n)&&(h(i)?(t=!0,this.lastEventTs=n.ts):(this.wasMutated=!0,this.events.push(n),d(i,this.reversed)))}}}return!t&&(this.triggered=0===this.reversed.size||[...this.reversed.values()].every(e=>e.every(h)),this.triggered)}}t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(160);t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.index=new n.ReverseIndex(e,e=>(0,n.tokenize)(e.filter).concat((0,n.tokenize)(e.hostname))),this.tokens=(0,n.compactTokens)(new Uint32Array([...this.index.index.keys()]))}match(e){const t=[];return this.index.iterMatchingFilters((0,n.tokenize)(e.url),r=>((0,n.matchNetworkFilter)(r,e)&&t.push(r),!0)),t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=function(e){return e&&e.__esModule?e:{default:e}}(r(11)).default.get("developer",!1)?(e,t)=>{if(!e)throw new Error(`ASSERT ${t}`)}:()=>{};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortEventsByTs=a;var n=s(r(175)),i=s(r(742));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.sort((e,t)=>e.ts<t.ts?-1:e.ts>t.ts?1:0)}t.default=class{constructor(e){this.name=e,this.store=null}init(){var e=this;return function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){const t=yield(0,n.default)();return e.store=new t(e.name),e.store.version(1).stores({events:"++id,ts"}),e.store.open()})()}unload(){null!==this.store&&(this.store.close(),this.store=null)}destroy(){return null===this.store?(0,n.default)().then(e=>e.delete(this.name)):this.store.delete()}deleteDataOlderThan(e){return this.store.events.where("ts").below(e).delete()}info(){let e=0,t=0;return this.store.events.each(r=>{e+=1,t+=r.tokens.length}).then(()=>({numberOfEntries:e,numberOfTokens:t}))}push(e){return(0,i.default)(void 0!==e.ts,"`event` MUST have a `ts` attribute"),this.pushMany([e])}pushMany(e){return this.store.events.bulkAdd(e)}latestTs(){return this.store.events.orderBy("ts").last().then(e=>e&&e.ts)}query(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};let t,r=e.before,n=e.after;return(t=void 0!==r&&void 0!==n?this.store.events.where("ts").between(n,r,!1,!1):void 0!==r?this.store.events.where("ts").below(r):void 0!==n?this.store.events.where("ts").above(n):this.store.events).toArray().then(a)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(60),i=o(r(31)),s=o(r(743)),a=o(r(741));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){const t=[];return e.forEach(e=>{let r=e.queries,n=e.urls;r.forEach(e=>{t.push(e)}),n.forEach(e=>{t.push(e)})}),new a.default(t)}t.default=class{constructor(){this.patternIndex=new a.default,this.conditions=new Set,this.historyAnalyzer=i.default.module("history-analyzer"),this.stream=new s.default("green-ads-matching")}init(){return this.stream.init()}unload(){this.stream.unload()}destroy(){return this.stream.destroy()}deleteDataOlderThan(e){return this.stream.deleteDataOlderThan(e)}populateMatches(e){var t=this;let r=e.after,n=e.before,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){if(!t.historyAnalyzer.isEnabled())return Promise.resolve();const e=i||t.patternIndex,s=[];var a=!0,o=!1,u=void 0;try{for(var c,l,d=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")}(t.historyAnalyzer.action("query",{after:r,before:n,queries:e.tokens,urls:e.tokens}));a=(c=yield d.next()).done,l=yield c.value,!a;a=!0){const r=l;r.query?s.push(t.handleMatch(t.matchQuery(r,e))):s.push(t.handleMatch(t.matchUrl(r,e)))}}catch(e){o=!0,u=e}finally{try{!a&&d.return&&(yield d.return())}finally{if(o)throw u}}return Promise.all(s)})()}getNewMatches(e){return this.stream.latestTs().then(e=>this.populateMatches({after:e})).then(()=>this.stream.query({after:e}))}matchUrl(e){let t=e.url,r=e.ts;const i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||this.patternIndex,s=t.toLowerCase();var a=(0,n.parse)(s);const o={url:s,cpt:2,hostname:a.hostname,hostGD:a.domain};return i.match(o).map(e=>({event:"match",type:"url",ts:Date.now(),target:{url:t,ts:r},pattern:{filter:e.toString(),id:e.id}}))}matchQuery(e){let t=e.query,r=e.source,n=e.ts;const i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||this.patternIndex,s={url:t.toLowerCase(),cpt:2,hostname:"",hostGD:""};return i.match(s).map(e=>({event:"match",type:"query",ts:Date.now(),target:{query:t,source:r,ts:n},pattern:{filter:e.toString(),id:e.id}}))}handleMatch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.stream.pushMany(e)}addCondition(e){const t={queries:e.queryPatterns,urls:e.urlPatterns},r=u([t]);return this.populateMatches({},r).then(()=>{this.conditions.add(t),this.patternIndex=u(this.conditions)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(744)),i=s(r(740));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){this.conditions=new Map,this.engine=new n.default}init(){return this.engine.init()}unload(){this.engine.unload()}destroy(){return this.engine.destroy()}getCondition(e){let t=this.conditions.get(e);return void 0!==t?Promise.resolve(t):(t=new i.default(JSON.parse(e).triggers),this.conditions.set(e,t),this.engine.addCondition(t).then(()=>t))}getNewMatches(e){return this.engine.getNewMatches(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(221)),i=c(r(25)),s=c(r(222)),a=c(r(145)),o=r(40),u=c(r(11));function c(e){return e&&e.__esModule?e:{default:e}}const l=36e5,d="cliqz-cat-fetcher",h=e=>e&&e.name&&e.patterns&&e.revHash&&e.timeRangeSecs&&e.activationData?new n.default(e.name,e.patterns,e.revHash,e.timeRangeSecs,e.activationData):null;t.default=class{constructor(e,t,r){this.beConnector=e,this.categoryHandler=t,this.db=r&&!u.default.get("offersDevFlag",!1)?new s.default(r):null,this.lastRevision=null,this.intervalTimer=null,this.startTimer=null}init(){const e=()=>{null===this.intervalTimer&&(this.intervalTimer=(0,a.default)(this._performFetch.bind(this),l),this.startTimer=setTimeout(this._performFetch.bind(this),5e3))};return this.db?this.db.get(d).then(t=>{t&&(this.lastRevision=t.lastRevision),e()}):(e(),Promise.resolve())}unload(){this.intervalTimer&&(this.intervalTimer.stop(),this.intervalTimer=null,clearTimeout(this.startTimer))}_performFetch(){return this.beConnector.sendApiRequest("categories",{last_rev:this.lastRevision},"GET").then(e=>{let t=e.categories;const r=e.revision;return t&&r?(t=t.filter(e=>e&&(void 0===e.user_group||(0,o.shouldKeepResource)(e.user_group))),this._setLatestRevision(r),i.default.info(`Fetched ${t.length} categories from backend`),"debug"===i.default.LOG_LEVEL&&i.default.logObject(t),this._updateCategories(t),Promise.resolve(!0)):(i.default.error("We got an invalid response from the BE, skipping this.",e),Promise.resolve(!1))})}_setLatestRevision(e){this.lastRevision=e,this.db&&this.db.upsert(d,{lastRevision:e})}_updateCategories(e){let t=!1;for(let r=0;r<e.length;r+=1){const n=h(e[r]);n?(this.categoryHandler.addCategory(n),t=!0):i.default.error("Invalid category from BE?",n)}t&&this.categoryHandler.build()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(300);const i=365;t.default=class{constructor(){this.urlCountsPerDayMap={}}serialize(){return this._removeOldData(),{urlCountsPerDayMap:this.urlCountsPerDayMap}}deserialize(e){this.urlCountsPerDayMap=e.urlCountsPerDayMap}mergeDaysData(e){const t=Object.keys(e);for(let r=0;r<t.length;r+=1){const n=t[r];void 0!==this.urlCountsPerDayMap[n]?this.urlCountsPerDayMap[n]=Math.max(this.urlCountsPerDayMap[n],e[n].c):this.urlCountsPerDayMap[n]=e[n].c}}incToday(){const e=(0,n.getTodayDayKey)();this.urlCountsPerDayMap[e]||(this.urlCountsPerDayMap[e]=0),this.urlCountsPerDayMap[e]+=1}getCount(e){return this.urlCountsPerDayMap[e]}_removeOldData(){const e=Object.keys(this.urlCountsPerDayMap);if(e.length>i){e.sort();const t=e.length-i;for(let r=0;r<t;r+=1)delete this.urlCountsPerDayMap[e[r]]}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(221)),i=u(r(222)),s=u(r(25)),a=r(132),o=u(r(11));function u(e){return e&&e.__esModule?e:{default:e}}const c="cliqz-cat-metadata",l="cliqz-cat-day-counter",d=(e,t)=>{const r=new Set(e),n=new Set(t),i=[];return r.forEach(e=>{n.has(e)&&i.push(e)}),i},h=e=>{const t=e.serialize();return t.patterns=void 0,t},f=(e,t)=>{const r=new n.default;return r.deserialize(e),r.patterns=t,r};t.default=class{constructor(e){this.db=e?new i.default(e):null;const t=!o.default.get("offersDevFlag",!1);this.categoriesDataMap=(0,a.buildCachedMap)("cliqz-categories-data",t),this.categoriesPatternsMap=(0,a.buildCachedMap)("cliqz-categories-patterns",t)}unloadDB(){return Promise.all([this.categoriesDataMap.unload(),this.categoriesPatternsMap.unload()])}destroyDB(){return Promise.all([this.categoriesDataMap.destroy(),this.categoriesPatternsMap.destroy()])}loadMetadata(){return this.db.get(c)}saveMetadata(e){return this.db.upsert(c,e)}loadDayCounterData(){return this.db.get(l)}saveDayCounterData(e){return this.db.upsert(l,e)}loadCategories(){return Promise.all([this.categoriesDataMap.init(),this.categoriesPatternsMap.init()]).then(()=>{const e=[...this.categoriesDataMap.keys()],t=[...this.categoriesPatternsMap.keys()],r=new Set(d(e,t)),n=(e,t)=>{e.forEach(e=>{r.has(e)||t.delete(e)})};n(e,this.categoriesDataMap),n(t,this.categoriesPatternsMap);const i=[];return r.forEach(e=>{const t=this.categoriesDataMap.get(e),r=this.categoriesPatternsMap.get(e);i.push(f(t,r))}),Promise.resolve(i)})}categoryModified(e){e&&this.categoriesDataMap.has(e.getName())?this.categoriesDataMap.set(e.getName(),h(e)):s.default.error("Invalid category modified",e)}categoryRemoved(e){e&&(this.categoriesPatternsMap.delete(e.getName()),this.categoriesDataMap.delete(e.getName()))}categoryAdded(e){e&&(this.categoriesPatternsMap.set(e.getName(),e.getPatterns()),this.categoriesDataMap.set(e.getName(),h(e)))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(120);t.default=class{constructor(){this.multiPatternObj=null,this.patterns=new Map}addCategoryPatterns(e,t){e&&t&&this.patterns.set(e,t)}removeCategoryPatterns(e){this.patterns.delete(e)}clear(){this.patterns=new Map}build(){const e=[];this.patterns.forEach((t,r)=>e.push({groupID:r,patterns:t})),this.multiPatternObj=(0,n.buildMultiPatternIndex)(e)}checkMatches(e){return this.multiPatternObj?this.multiPatternObj.match(e):new Set}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e=>e?e.split("."):[],i=e=>{const t=n(e)||[];return t.pop(),t};class s{constructor(e,t){this.name=e,this.category=t,this.children=new Map}setCategory(e){this.category=e}hasCategory(){return!!this.category}getCategory(){return this.category}getName(){return this.name}addChild(e){this.children.set(e.name,e)}removeChild(e){this.children.delete(e)}hasChildName(e){return this.children.has(e)}getChild(e){return this.children.get(e)}getChildren(){return[...this.children.values()]}}t.default=class{constructor(){this.root=new s("")}addCategory(e){const t=e.getName(),r=n(t);this._getOrCreateNode(r).setCategory(e)}hasCategory(e){return null!==this._getNode(n(e))}clear(){this.root=new s("")}removeCategory(e){const t=this._getNode(i(e));null!==t&&t.removeChild(e)}getCategoryNode(e){return this._getNode(n(e))}getSubCategories(e){const t=this._getNode(n(e));return null===t?[]:t.getChildren()}getAllSubCategories(e){return this._filterSubCategoriesWithStop(e,()=>!1).result}someSubCategory(e,t){return this._filterSubCategoriesWithStop(e,t).cond}_filterSubCategoriesWithStop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=[],i=[this._getNode(n(e))];for(;i.length>0;){const e=i.pop();if(null!==e){if(t(e))return{result:r,cond:!0};r.push(e),e.getChildren().forEach(e=>i.push(e))}}return{result:r,cond:!1}}_getOrCreateNode(e){let t=this.root;for(let r=0;r<e.length;r+=1){const n=e[r];if(t.hasChildName(n))t=t.getChild(n);else{const e=new s(n);t.addChild(e),t=e}}return t}_getNode(e){let t=this.root;for(let r=0;r<e.length&&null!==t;r+=1){const n=e[r];if(n===t.getName())return t;t=t.hasChildName(n)?t.getChild(n):null}return t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40),i=l(r(750)),s=l(r(749)),a=l(r(748)),o=l(r(25)),u=l(r(747)),c=r(120);function l(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e,t){this.catTree=new i.default,this.catMatch=new s.default,e&&e.isAvailable()?this.historyFeature=e:this.historyFeature=null,this.persistentHelper=new a.default(t),this.metadata={version:1},this.dayCounterHelper=new u.default,this.persistentHelper.loadDayCounterData().then(e=>{e&&this.dayCounterHelper.deserialize(e)})}hasCategory(e){return this.catTree.hasCategory(e)}getCategory(e){const t=this.catTree.getCategoryNode(e);return t?t.getCategory():null}addCategory(e){if(this._checkCategory(e)){if(this.hasCategory(e.getName())){if(!this._shouldUpdateCategory(e))return;o.default.info(`updating category ${e.getName()}`),this.removeCategory(e)}this._addNewCategory(e)}else o.default.error("Category is invalid",e)}removeCategory(e){const t=e.getName();this.catTree.hasCategory(t)&&(o.default.debug(`Category ${t} is being removed`,e),this.catTree.removeCategory(t),this.persistentHelper.categoryRemoved(e),this.catMatch.removeCategoryPatterns(t))}build(){this.catMatch.build(),this._applyToAllSubCategories("",e=>{e.isHistoryDataSettedUp()||this._getHistoricalData(e)})}cleanUp(){this._applyToAllSubCategories("",e=>{e.cleanUp(),e.isObsolete()&&this.removeCategory(e)})}newUrlEvent(e){if(!e)return o.default.error("skipping invalid tokenizedUrl",e),new Set;const t=this.catMatch.checkMatches(e);return t.forEach(e=>{const t=this.catTree.getCategoryNode(e);null!==t&&t.hasCategory()?(t.getCategory().hit(),this._catModified(t.getCategory()),o.default.debug(`Category hitted: ${e}`)):o.default.error(`We do not have a category with id ${e}??`)}),this.dayCounterHelper.incToday(),this.persistentHelper.saveDayCounterData(this.dayCounterHelper.serialize()),t}loadPersistentData(){return this.persistentHelper.loadCategories().then(e=>{this.catTree.clear(),this.catMatch.clear();const t=[];for(let r=0;r<e.length;r+=1){const n=e[r];n.isObsolete()?t.push(n):(this.catTree.addCategory(n),this.catMatch.addCategoryPatterns(n.getName(),n.getPatterns()),n.isHistoryDataSettedUp()||this._getHistoricalData(n))}t.forEach(e=>{o.default.debug(`Removing obsolete category: ${e.getName()}`),this.persistentHelper.categoryRemoved(e)}),this.build()})}getMatchesForCategory(e){let t=0;return this._applyToAllSubCategories(e,e=>{t+=e.getTotalMatches()}),t}getMaxCountDaysForCategory(e){let t=0;return this._applyToAllSubCategories(e,e=>{t=Math.max(t,e.countDaysWithMatches())}),t}getLastMatchTsForCategory(e){let t=0;return this._applyToAllSubCategories(e,e=>{t=Math.max(t,e.getLastMatchTs())}),t>0?t:null}isCategoryActive(e){return this.hasCategory(e)&&this.catTree.someSubCategory(e,e=>e.hasCategory()&&e.getCategory().isActive())}_shouldUpdateCategory(e){const t=this.catTree.getCategoryNode(e.getName());return null===t||!t.hasCategory()||t.getCategory().getVersion()!==e.getVersion()}_addNewCategory(e){this.persistentHelper.categoryAdded(e),this.catTree.addCategory(e),this.catMatch.addCategoryPatterns(e.getName(),e.getPatterns()),e.setTotalDayHandler(this.dayCounterHelper)}_getHistoricalData(e){if(!this.historyFeature)return;const t=(0,n.timestampMS)(),r=this._getCatHistoryPIDID(e),i=e.getPatterns(),s={patterns:i,index:(0,c.buildSimplePatternIndex)(i),pid:r,start_ms:t-1e3*e.getTimeRangeSecs(),end_ms:t};this.historyFeature.performQuery(s).then(t=>{t&&t.d&&t.d.match_data&&t.pid?t.pid===r?(e.updateWithHistoryData(t.d.match_data),this.dayCounterHelper.mergeDaysData(t.d.match_data.per_day),this._catModified(e)):o.default.error(`invalid data for category ${e.getName()}?`,t):o.default.error("invalid data received from the history module",t)})}_checkCategory(e){return!!e}_applyToAllSubCategories(e,t){const r=this.catTree.getAllSubCategories(e);for(let e=0;e<r.length;e+=1){const n=r[e].getCategory();n&&t(n)}}_catModified(e){this.persistentHelper.categoryModified(e)}_getCatHistoryPIDID(e){return`${e.getName()}|${e.getVersion()}`}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(25)),i=r(40);const s=1800;t.default=class{constructor(e){this.historyFeature=e,this.cache=new Map}hasHistoryEnabled(){return!!this.historyFeature}countMatchesWithPartialCheck(e,t,r){if(!this._checkQuery(e)||!this._checkPatternObj(t)||!r)return n.default.error("Invalid arguments: ",e,t),{isPartial:!1,count:-1};const s=this._getCacheEntry(e,t.pid);if(s)return s;const a={lastQueryToHistoryTs:(0,i.timestampMS)(),isPartial:!0,count:0,query:JSON.parse(JSON.stringify(e))};return this.cache.set(t.pid,a),this._performQueryOnHistory(e,t,r),a}countMatches(e,t,r){if(!this._checkQuery(e)||!this._checkPatternObj(t)||!r)return n.default.error("Invalid arguments: ",e,t),Promise.resolve(-1);const s=this._getCacheEntry(e,t.pid);if(s)return s.promise?s.promise:Promise.resolve(s.count);const a={lastQueryToHistoryTs:(0,i.timestampMS)(),isPartial:!0,count:0,query:JSON.parse(JSON.stringify(e))};return this.cache.set(t.pid,a),this._performQueryOnHistory(e,t,r)}_getCacheEntry(e,t){const r=this.cache.get(t);return r?((e,t)=>e&&t&&e.since_secs===t.since_secs&&e.till_secs===t.till_secs)(e,r.query)?((0,i.timestampMS)()-r.lastQueryToHistoryTs)/1e3>s?(this.cache.delete(t),null):r:(this.cache.delete(t),null):null}_performQueryOnHistory(e,t,r){if(!this.historyFeature)return Promise.resolve(-1);const s=(0,i.timestampMS)(),a={index:r,start_ms:s-1e3*e.since_secs,end_ms:s-1e3*e.till_secs,pid:t.pid};let o=this.cache.get(t.pid);return o.promise=this.historyFeature.performQuery(a).then(e=>{e&&e.d&&e.d.match_data&&e.d.match_data.total?((o=this.cache.get(t.pid)).count=e.d.match_data.total.m,o.isPartial=!1,o.promise=null,n.default.info(`updated entry for ${t.pid} = ${o.count}`),Promise.resolve(o.count)):n.default.error("invalid data received? ",e)}),o.promise}_checkPatternObj(e){return void 0!==e&&null!==e&&e.pid&&e.p_list&&e.p_list.length>0}_checkQuery(e){return e&&e.since_secs>=0&&e.till_secs>=0&&e.since_secs>=e.till_secs}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55),i=o(r(25)),s=o(r(88)),a=r(40);function o(e){return e&&e.__esModule?e:{default:e}}const u=300,c=10;class l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.data=e,this.responseStatus=t,this.createdTS=(0,a.timestampMS)()}expired(){return((0,a.timestampMS)()-this.createdTS)/1e3>u}wasFailedCall(){return null!==this.responseStatus&&this.responseStatus>=400}}t.default=class{constructor(){this._cache=new Map,this._cacheClearCount=c}sendApiRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";i.default.info("backend_connector","sendApiRequest called"),this._expireCache(),t.t_eng_ver=s.default.TRIGGER_ENGINE_VERSION;const a=this._buildUrl(e,t),o=this._cache.has(a)?this._cache.get(a):null;if(o&&!o.expired())return i.default.debug("we have data cached for ",a),o.wasFailedCall()?Promise.reject(`Cached failed call: code ${o.responseStatus} - ${a}`):Promise.resolve(o.data);i.default.info("backend_connector",`url called: ${a}`);const u=new n.Headers;u.append("Content-Type","application/json");const c=new n.Request(a,{headers:u,method:r});return(0,n.fetch)(c).then(e=>e.ok?e.json().then(e=>(this._cache.set(a,new l(e)),Promise.resolve(e))):(this._cache.set(a,new l(null,e.status)),Promise.reject(`Status code ${e.status} for ${a}`)))}_buildUrl(e,t){return`${s.default.BACKEND_URL}/api/v1/${e}?`.concat(Object.keys(t).map(e=>`${e}=${encodeURIComponent(t[e])}`).join("&"))}_expireCache(){this._cacheClearCount-=1,this._cacheClearCount>0||(this._cacheClearCount=c,this._cache.forEach((e,t)=>{e.expired()&&this._cache.delete(t)}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(131)),i=s(r(25));function s(e){return e&&e.__esModule?e:{default:e}}const a=(e,t)=>{if(!e.hasCategories()||0===e.categories.length)return!0;const r=e.categories;var n=!0,s=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){const e=o.value;for(let t=0;t<r.length;t+=1)if(0===e.indexOf(r[t]))return!0}}catch(e){s=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(s)throw a}}return i.default.debug(`Offer ${e.uniqueID} context filtered (categories)`),!1};t.default=class extends n.default{constructor(){super("ContextFilter")}process(e,t){let r=t.urlData;return Promise.resolve(e.filter(e=>a(e,r.getActivatedCategoriesIDs())))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(131));t.default=class extends n.default{constructor(){super("Prioritizer")}process(e){return Promise.resolve(e.sort((e,t)=>e.displayPriority-t.displayPriority))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(131)),i=r(40),s=a(r(25));function a(e){return e&&e.__esModule?e:{default:e}}const o=(e,t)=>{const r={since_secs:t.since_secs,till_secs:t.till_secs};return e.countMatches(r,t.patterns,t.patternIndex).then(e=>{if(e<0)return s.default.error("Something went wrong trying to get the history result for",t),Promise.resolve(!0);const r=e>=t.min_matches_expected,n=t.remove_if_matches?r:!r;return Promise.resolve(n)})},u=(e,t)=>{let r=t.presentRealEstates,n=t.geoChecker,a=t.historyMatcher,u=t.categoryHandler;const c=[()=>Promise.resolve(!e||!e.isValid()),()=>Promise.resolve(e.ABTestInfo&&!((e,t,r)=>e>=t&&e<=r)((0,i.getABNumber)(),e.ABTestInfo.start,e.ABTestInfo.end)),()=>Promise.resolve(!e.destinationRealEstates||!e.destinationRealEstates.some(e=>r.has(e))),()=>Promise.resolve(e.isGeoLocated()&&(!n||!n.matches(e.geoInfo))),()=>Promise.resolve(e.hasCategories()&&!e.categories.some(e=>u.isCategoryActive(e))),()=>{if(!e.hasHistoryChecks())return Promise.resolve(!1);if(!a||!a.hasHistoryEnabled())return Promise.resolve(!0);const t=e.historyChecks,r=[];for(let e=0;e<t.length;e+=1)r.push(o(a,t[e]));return Promise.all(r).then(e=>e.some(e=>e))}];if("debug"===s.default.LOG_LEVEL){const t=(t,r)=>()=>t().then(t=>(t&&s.default.debug(`Offer ${e.uniqueID} filtered with filter: ${r}`),Promise.resolve(t)));for(let e=0;e<c.length;e+=1)c[e]=t(c[e],c[e].name)}return(0,i.orPromises)(c)};t.default=class extends n.default{constructor(){super("HardFilters")}process(e,t){const r=e.map(e=>u(e,t))||[];return Promise.all(r).then(t=>{const r=[];for(let n=0;n<e.length;n+=1)!1===t[n]?r.push(e[n]):s.default.debug(`Offer ${e[n].uniqueID} hard-filtered out!`);return Promise.resolve(r)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(131)),i=a(r(220)),s=a(r(25));function a(e){return e&&e.__esModule?e:{default:e}}const o=(e,t)=>{const r=[];return e.forEach(e=>{t.isOfferPresent(e.uniqueID)&&t.getOfferObject(e.uniqueID).version!==e.version?t.updateOfferObject(e.uniqueID,e.offerObj)?(r.push(e),s.default.debug(`Replacing db offer ${e.uniqueID} from the backend one`)):s.default.error(`Couldnt update offer on DB for offer id: ${e.uniqueID}, discarding it`):r.push(e)}),r},u=(e,t)=>{const r=[];return e.forEach(e=>{t.isOfferPresent(e.uniqueID)&&t.getOfferObject(e.uniqueID).version===e.version?(s.default.debug(`Replacing backend offer ${e.uniqueID} from the db one`),r.push(new i.default(t.getOfferObject(e.uniqueID)))):r.push(e)}),r},c=(e,t)=>e.filter(e=>!t.hasOfferRemoved(e.uniqueID));t.default=class extends n.default{constructor(){super("DBReplacer")}process(e,t){let r=t.offersDB;const n=c(e,r),i=o(n,r);return Promise.resolve(u(i,r))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(131)),i=s(r(25));function s(e){return e&&e.__esModule?e:{default:e}}const a=e=>{const t=new Set,r=[];return e.forEach(e=>{t.has(e.uniqueID)?i.default.debug(`Deduplicating offer ${e.uniqueID} from list`):(t.add(e.uniqueID),r.push(e))}),r};t.default=class extends n.default{constructor(){super("IntentGatherer")}process(e,t){let r=t.intentHandler,n=t.intentOffersHandler,i=[];return r.getActiveIntents().forEach(e=>{i=i.concat(n.getOffersForIntent(e.getName()))}),i=a(i),Promise.resolve(i)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){const i=e.offerID,u=s(i,t.offersDB);if(!u)return!1;const c=u.oid,l=u.cid;let d=e.signalID,h=!1,f=null;if(e.params){const i=r.getNormalizedUrl();if(e.params.store&&i){const r=t.urlSignalDB,n=r.getEntryContainer(i);n?(n.data.counter+=1,d=`repeated_${e.signalID}`):r.setEntryData(i,{counter:1})}if(e.params.filter_last_secs&&e.params.filter_last_secs>0){const r=t.lastCampaignSignalDB;let i=r.getEntryData(l),s=null;const a=(0,n.timestampMS)();if(i){const t=i[e.signalID];t?(i[e.signalID].counter+=1,s=t.l_u_ts,t.l_u_ts=a):i[e.signalID]={counter:1,l_u_ts:a}}else i={[e.signalID]:{counter:1,l_u_ts:a}};r.setEntryData(l,i);const o=(a-s)/1e3;s&&o<=e.params.filter_last_secs&&(h=!0)}e.params.referrer_cat&&(f=a(r.getReferrerName()))&&(f=`ref_${f}`)}let p=!0;h||(p=o(t.offersDB,t.sigHandler,c,d,f));return p};var n=r(40);const i={google:"search",yahoo:"search",bing:"search",duckduckgo:"search"},s=(e,t)=>{const r=t.getCampaignID(e),n=t.getCampaignOffers(r);if(!n)return null;const i=t.getLatestUpdatedOffer(n);return!i||i.length<=0||!i[0].offer_id?null:{oid:i[0].offer_id,cid:r}},a=e=>{if(!e||""===e)return"none";const t=i[e];return t||"other"},o=function(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r||!n||!e)return!1;const s=e.getCampaignID(r);if(!s)return!1;let a=t.setCampaignSignal(s,r,"trigger",n);return null!==i&&(a=t.setCampaignSignal(s,r,"trigger",i)&&a),a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(132),i=r(40);t.default=class{constructor(e,t){this.entriesMap=(0,n.buildCachedMap)(e,t.should_persist),this.configs=t}loadEntries(){return this.entriesMap.init().then(()=>this._removeOldEntries)}setEntryData(e,t){if(!e)return!1;const r=this.entriesMap.get(e)||this._createContainer();return r.data=t,r.l_u_ts=(0,i.timestampMS)(),this.entriesMap.set(e,r),!0}getEntryData(e){return this.entriesMap.has(e)?this.entriesMap.get(e).data:null}getEntryContainer(e){return this.entriesMap.has(e)?this.entriesMap.get(e):null}_removeOldEntries(){if(!this.configs||this.configs.old_entries_dt_secs<=0)return;const e=(0,i.timestampMS)();this.entriesMap.keys().forEach(t=>{const r=this.entriesMap.get(t);r&&(e-r.l_u_ts)/1e3>=this.configs.old_entries_dt_secs&&this.entriesMap.delete(t)})}_createContainer(){const e=(0,i.timestampMS)();return{c_ts:e,l_u_ts:e}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(760)),i=s(r(88));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){const e={should_persist:i.default.SEND_SIG_OP_SHOULD_LOAD,old_entries_dt_secs:i.default.SEND_SIG_OP_EXPIRATION_SECS};this.urlSignalsDB=new n.default("offers-signals-url",e),this.urlSignalsDB.loadEntries(),this.lastCampaignSignalDB=new n.default("offers-last-cmp-signals",e),this.lastCampaignSignalDB.loadEntries()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(25)),i=o(r(761)),s=r(120),a=o(r(759));function o(e){return e&&e.__esModule?e:{default:e}}const u="urlchange",c="webrequest",l="coupon",d=e=>{const t=e.offer;if(!t||!t.monitorData||!t.offer_id)return[];const r=[];return t.monitorData.forEach(n=>{const i={offerID:t.offer_id,signalID:n.signalID,type:n.type,params:n.params,patterns:n.patterns,click:e.click,view:e.view,last_update:e.last_update};if("webrequest"===n.type)i.domain=n.domain;else if("coupon"===n.type){i.couponInfo=n.couponInfo;const e=t.ui_info&&t.ui_info.template_data&&t.ui_info.template_data.code?t.ui_info.template_data.code:"";i.couponInfo.code=e,void 0===n.couponInfo.autoFillField&&(i.couponInfo.autoFillField=!1)}r.push(i)}),r},h=e=>{if(0===e.length)return[];e.sort((e,t)=>(t.click||0)-(e.click||0)||(t.view||0)-(e.view||0)||(t.last_update||0)-(e.last_update||0)||0);const t=e[0].offerID;return e.map(e=>{if(e.offerID===t)return e;const r=Object.assign({},e);return r.signalID=`repeated_${e.signalID}`,r})},f=(e,t)=>{const r=t.toLowerCase();return 0===r.length?"coupon_empty":e.some(e=>e.toLowerCase()===r)?"coupon_own_used":"coupon_other_used"};t.default=class{constructor(e,t,r){this.offersDB=t,this.sigHandler=e,this.monitorDBHandler=new i.default,this.eventHandler=r,this.monitors={},this.monitors[u]={patterns:{},index:null},this.monitors[c]={patterns:{},index:null},this.monitors[l]={patterns:{},index:null},t.dbLoaded&&this._loadAndRebuild(),this.handlers={sigHandler:this.sigHandler,offersDB:this.offersDB,lastCampaignSignalDB:this.monitorDBHandler.lastCampaignSignalDB,urlSignalDB:this.monitorDBHandler.urlSignalsDB},this._offersDBCallback=this._offersDBCallback.bind(this),this.offersDB.registerCallback(this._offersDBCallback),this.onUrlChange=this.onUrlChange.bind(this),this.eventHandler.subscribeUrlChange(this.onUrlChange),this.webRequestCallback=this.webRequestCallback.bind(this)}destroy(){this.offersDB.unregisterCallback(this._offersDBCallback),this.eventHandler.unsubscribeUrlChange(this.onUrlChange),Object.keys(this.monitors).forEach(e=>this.removeOfferMonitors(e))}addOfferMonitors(e){d(e).forEach(e=>this._addOfferMonitor(e))}removeOfferMonitors(e){const t=new Set;d(e).forEach(e=>this._removeOfferMonitor(e).forEach(e=>t.add(e)));const r=new Set;Object.keys(this.monitors[c].patterns).map(e=>this.monitors[c].patterns[e].map(e=>r.add(e.domain))),[...t].forEach(e=>{r.has(e)||this.eventHandler.unsubscribeHttpReq(this.webRequestCallback,e)})}build(){Object.keys(this.monitors).forEach(e=>{this.monitors[e].index=(0,s.buildMultiPatternIndexPatternAsID)(Object.keys(this.monitors[e].patterns))})}shouldActivateOfferForUrl(e){const t=this.monitors[l].index.match(e.getPatternRequest());if(0===t.size)return{activate:!1};const r=[...t].map(e=>this.monitors[l].patterns[e]).reduce((e,t)=>e.concat(t),[]),n=h(r)[0];return n.couponInfo.pattern=n.patterns[0],{offerInfo:n.couponInfo,activate:!0}}couponFormUsed(e){const t=e.offerInfo||{};void 0===t.autoFillField&&(t.autoFillField=!1);const r=this.monitors[l].patterns[t.pattern],n=r.map(e=>{if(e.couponInfo&&e.couponInfo.code)return e.couponInfo.code}).filter(e=>void 0!==e),i=f(n,e.couponValue),s=h(r)[0];s.signalID=i,(0,a.default)(s,this.handlers,e.urlData)}_isMonitorDataValid(e){return e&&e.offerID&&e.signalID&&("webrequest"===e.type&&e.domain||"urlchange"===e.type||"coupon"===e.type&&e.couponInfo)&&e.patterns&&e.patterns.length>0&&!e.patterns.some(e=>0===e.length)}_addOfferMonitor(e){if(!this._isMonitorDataValid(e))return void n.default.info("Invalid monitor data being set, discarding it: ",e);const t=e.type;t in this.monitors||(this.monitors[t]={patterns:{},index:null}),e.patterns.forEach(r=>{r in this.monitors[t].patterns||(this.monitors[t].patterns[r]=[]),this.monitors[t].patterns[r].push(e)}),t===c&&this.eventHandler.subscribeHttpReq(this.webRequestCallback,e.domain)}_removeOfferMonitor(e){const t=e.type,r=new Set;return e.patterns.forEach(n=>{const i=this.monitors[t].patterns[n].filter(t=>e.offerID!==t.offerID||e.signalID!==t.signalID||(r.add(t.domain),!1));this.monitors[t].patterns[n]=i,0===this.monitors[t].patterns[n].length&&delete this.monitors[t].patterns[n]}),r}checkUrl(e,t){const r=[...this.monitors[t].index.match(e.getPatternRequest())].map(e=>this.monitors[t].patterns[e]).reduce((e,t)=>e.concat(t),[]);h(r).forEach(t=>{(0,a.default)(t,this.handlers,e)})}onUrlChange(e){this.checkUrl(e,u)}webRequestCallback(e){const t=e.url_data;this.checkUrl(t,c)}_loadAndRebuild(){this.monitors={},this.monitors[u]={patterns:{},index:null},this.monitors[c]={patterns:{},index:null},this.monitors[l]={patterns:{},index:null},this.offersDB.getOffers({includeRemoved:!1}).forEach(e=>this.addOfferMonitors(e)),this.build()}_offersDBCallback(e){("offer-removed"===e.evt||"offer-updated"===e.evt)&&(n.default.log("SHOULD REMOVE EVT:",e),this.removeOfferMonitors(e)),this._loadAndRebuild()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return n.default.warn("shouldFilterOffer: undefined offer"),!0;if(!e.hasFilterRules())return!1;let r=!1;try{r=u(e,e.filterRules,t)}catch(t){n.default.error(`expr failed: ${JSON.stringify(e.filterRules)}`,t)}return!r};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(25)),i=r(40);const s={">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t,"==":(e,t)=>e===t,"!=":(e,t)=>e!==t},a=(e,t,r)=>{if(t.length<2)return n.default.warn(`genericCounterComparator: not enough arguments (${t.length})`),!1;const i=t[0].value,a=s[i];if(!a)return n.default.warn(`genericCounterComparator: This operation wasn't found ${i}`),!1;const o=t[1].value;return a(r(e),o)},o={generic_comparator:(e,t,r)=>{if(t.length<4)return n.default.warn(`_currentOfferGenericComparator: not enough arguments (${t.length})`),!1;const a={actionID:t[0].value,attType:t[1].value,operator:t[2].value,value:t[3].value};return((e,t,r)=>{let a=t.actionID,o=t.attType,u=t.operator,c=t.value;const l=s[u];if(!l)return n.default.warn(`_genericComparator: This operation wasn't found ${u}`),!1;const d=r.getOfferDisplayActionMeta(e,a);return!d||("counter"===o?l(d.count,c):"c_ts"===o||"l_u_ts"===o?l(((0,i.timestampMS)()-d[o])/1e3,c):(n.default.warn(`_genericComparator: unknown attribute '${o}'`),!1))})(e.displayID,a,r)},count_client_offers:(e,t,r)=>a(e,t,e=>{const t=r.getClientOffers(e.clientID);return null===t?0:t.size}),count_campaign_offers:(e,t,r)=>a(e,t,e=>{const t=r.getCampaignOffers(e.campaignID);return null===t?0:t.size})},u=(e,t,r)=>{if("CallExpression"===t.type){const i=t.callee.name;return o[i]?o[i](e,t.arguments,r):(n.default.warn(`_evalExpression: filter function ${i} doesn't exist`),!1)}return"LogicalExpression"===t.type&&"||"===t.operator?u(e,t.left,r)||u(e,t.right,r):"LogicalExpression"===t.type&&"&&"===t.operator&&(u(e,t.left,r)&&u(e,t.right,r))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40),i=u(r(25)),s=u(r(220)),a=u(r(11)),o=r(132);function u(e){return e&&e.__esModule?e:{default:e}}const c="cliqz-intent-offers-db",l=(e,t)=>{if(e.size!==t.size)return!1;const r=[...e.keys()];for(let e=0;e<r.length;e+=1)if(!t.has(r[e]))return!1;return!0};class d{constructor(e,t){this.data=e,this.expireTS=(0,n.timestampMS)()+1e3*t}expired(){return(0,n.timestampMS)()>this.expireTS}}t.default=class{constructor(e,t){this.intentOffers=(0,o.buildCachedMap)(c,!a.default.get("offersDevFlag",!1)),this.intentOffers.init(),this.backendConnector=e,this.intentHandler=t}thereIsNewData(){return!l(new Set(this._getLatestIntentsNames()),new Set(this._getCurrentIntentsNames()))}updateIntentOffers(){const e=this._getCurrentIntentsNames();return this.intentOffers.clear(),Promise.all(e.map(e=>this.fetchOffersForIntent(e))||[])}fetchOffersForIntent(e){const t=this.intentHandler.getActiveIntent(e);return t?(this._expireCache(),this.intentOffers.has(t.getName())?Promise.resolve(!0):this.backendConnector.sendApiRequest("offers",{intent_name:e},"GET").then(r=>{if(!r)return i.default.error("Invalid intent offers fetched for intent: ",e),Promise.reject();const s=r.filter(e=>e&&(void 0===e.user_group||(0,n.shouldKeepResource)(e.user_group)));return"debug"===i.default.LOG_LEVEL&&(i.default.debug("Following offers were fetched"),i.default.logObject(s.map(e=>e.offer_id))),this.setIntentOffers(t,s),Promise.resolve(!0)})):Promise.resolve(!1)}setIntentOffers(e,t){this.intentOffers.set(e.getName(),new d(t,e.getDurationSecs()))}getOffersForIntent(e){return this.intentOffers.has(e)?this.intentOffers.get(e).data.map(e=>new s.default(e)):[]}_expireCache(){this.intentOffers.keys().forEach(e=>{this.intentOffers.get(e).expired()&&this.intentOffers.delete(e)})}_getLatestIntentsNames(){return[...this.intentOffers.keys()]}_getCurrentIntentsNames(){return this.intentHandler.getActiveIntents().map(e=>e.getName())||[]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(47)),i=r(40),s=a(r(25));function a(e){return e&&e.__esModule?e:{default:e}}const o=e=>e.getOffers(),u=e=>{const t=e?e.offer.expirationMs:void 0;if(void 0!==t)return e.created+t-(0,i.timestampMS)()},c=e=>u(e)<=0,l=e=>{const t=(e=>e.filter(e=>c(e)))(o(e));s.default.debug("Removing the following expired offers: ",t),t.forEach(t=>{e.eraseOfferObject(t.offer_id)})},d=e=>{return(e=>{let t=432e8;return e.forEach(e=>{const r=u(e);void 0!==r&&(t=Math.min(t,r))}),432e8===t?null:t})((e=>e.filter(e=>!c(e)))(o(e)))};t.default=class{constructor(e){this.offersDB=e,this.expirationTimer=null,this._offersDBCallback=this._offersDBCallback.bind(this),this.offersDB.registerCallback(this._offersDBCallback)}unload(){this.expirationTimer&&(n.default.clearTimeout(this.expirationTimer),this.expirationTimer=null),this.offersDB.unregisterCallback(this._offersDBCallback)}observeExpirations(){this.expirationTimer&&(n.default.clearTimeout(this.expirationTimer),this.expirationTimer=null);const e=d(this.offersDB);null===e||e<0||(this.saveInterval=setTimeout(()=>{l(this.offersDB),this.observeExpirations()},e+10))}_offersDBCallback(e){"offer-added"===e.evt&&this.observeExpirations()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(25)),i=o(r(88)),s=r(40),a=r(132);function o(e){return e&&e.__esModule?e:{default:e}}const u="offers-db";t.default=class{constructor(e){this.tmpdb=e,this.offersIndexMap=(0,a.buildCachedMap)("offers-db-index",i.default.LOAD_OFFERS_STORAGE_DATA),this.displayIdIndexMap=(0,a.buildCachedMap)("offers-db-display-index",i.default.LOAD_OFFERS_STORAGE_DATA),this._dbLoaded=!1,this._loadPersistentData().then(()=>{this._dbLoaded=!0,this._pushCallbackEvent("offers-db-loaded",{})}),this.displayIDCounter={},this.campaignToOffersMap={},this.clientToOffersMap=new Map,this.typesToOffersMap=new Map,this.callbacks=new Map}registerCallback(e){this.callbacks.set(e,e)}unregisterCallback(e){this.callbacks.delete(e)}get dbLoaded(){return this._dbLoaded}getOfferMeta(e){if(!this.offersIndexMap.has(e))return null;const t=this.offersIndexMap.get(e);return{c_ts:t.c_ts,l_u_ts:t.l_u_ts}}addOfferObject(e,t){if(!this._isOfferValid(e,t))return n.default.warn(`addOfferObject: args invalid or data invalid: ${e} - ${t}`),!1;let r=this.offersIndexMap.get(e);if(r)return n.default.warn(`addOfferObject: The offer id: ${e} already exists, will not add it here`),!1;const i=JSON.parse(JSON.stringify(t));return(r=this._createOfferContainer()).offer_obj=i,this.offersIndexMap.set(e,r),this._updateIndexTablesForOffer(e),this._pushCallbackEvent("offer-added",r),!0}removeOfferObject(e){const t=this.offersIndexMap.get(e);return t?(t.removed=!0,t.l_u_ts=(0,s.timestampMS)(),this.offersIndexMap.set(e,t),this._pushCallbackEvent("offer-removed",t),!0):(n.default.warn(`removeOfferObject: The offer id: ${e} is not stored`),!1)}eraseOfferObject(e){const t=this.offersIndexMap.get(e);return t?(this._removeIndexTablesForOffer(e),this.offersIndexMap.delete(e),this._pushCallbackEvent("offer-removed",t,{erased:!0}),!0):(n.default.warn(`eraseOfferObject: The offer id: ${e} is not stored`),!1)}getOfferObject(e){const t=this.offersIndexMap.get(e);return t?t.offer_obj:null}hasOfferData(e){return this.offersIndexMap.has(e)}hasOfferObject(e){return!!this.getOfferObject(e)}isOfferPresent(e){const t=this.offersIndexMap.get(e);return!!t&&!t.removed}updateOfferObject(e,t){const r=this.offersIndexMap.get(e);if(!r)return n.default.warn(`updateOfferObject: the offer with ID: ${e} is not present`),!1;if(!this._isOfferValid(e,t))return n.default.warn(`updateOfferObject: offer ${e} is not valid`),!1;if(r.offer_obj){const e=r.offer_obj;if(t.offer_id!==e.offer_id||t.campaign_id!==e.campaign_id)return n.default.warn("updateOfferObject: the offer core data is not similar? not supported for now"),!1;t.display_id!==e.display_id&&this._migrateDisplayID(e.display_id,t.display_id)}return r.offer_obj=JSON.parse(JSON.stringify(t)),r.removed=!1,r.l_u_ts=(0,s.timestampMS)(),this.offersIndexMap.set(e,r),this._pushCallbackEvent("offer-updated",r),!0}hasOfferRemoved(e){const t=this.offersIndexMap.get(e);return!!t&&t.removed}incOfferAction(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e||!t)return n.default.warn("incOfferAction: invalid args"),!1;const a=this.offersIndexMap.get(e);if(!a)return n.default.warn(`incOfferAction: The offer id: ${e} is not stored - ${t}`),!1;const o=(0,s.timestampMS)(),u=a.offer_obj;let c=a.offer_actions[t];if(c||(c=this._createElementContainer(),a.offer_actions[t]=c,c.count=0),c.count+=i,c.l_u_ts=o,r){const e=this.displayIdIndexMap.get(u.display_id)||{};let r=e[t];r||(r=this._createElementContainer(),e[t]=r,r.count=0),r.count+=i,r.l_u_ts=o,this.displayIdIndexMap.set(u.display_id,e)}return a.l_u_ts=o,this.offersIndexMap.set(e,a),this._pushCallbackEvent("offer-action",a,{actionID:t}),!0}getOfferActionMeta(e,t){const r=this.offersIndexMap.get(e);return r?r.offer_actions[t]:null}addOfferAttribute(e,t,r){if(!e||!t)return n.default.warn("addOfferAttribute: invalid args"),!1;const i=this.offersIndexMap.get(e);if(!i)return n.default.warn(`addOfferAttribute: The offer id: ${e} is not stored`),!1;const a=i.offer_attrs;let o=a[t];o||(o=this._createElementContainer(),a[t]=o);const u=(0,s.timestampMS)();return o.attr=r,o.l_u_ts=u,i.l_u_ts=u,this.offersIndexMap.set(e,i),!0}getOfferAttribute(e,t){if(!e||!t)return n.default.warn("getOfferAttribute: invalid args"),null;const r=this.offersIndexMap.get(e);if(!r)return n.default.warn(`getOfferAttribute: The offer id: ${e} is not stored`),null;const i=r.offer_attrs[t];return i?i.attr:null}getOfferDisplayActionMeta(e,t){const r=this.displayIdIndexMap.get(e);return r&&t?r[t]:null}getCampaignID(e){const t=this.offersIndexMap.get(e);return t?t.offer_obj.campaign_id:null}getCampaignOffers(e){return e?this.campaignToOffersMap[e]:null}getLatestUpdatedOffer(e){if(!e)return null;const t=[],r=this;return e.forEach(e=>{const n=r.offersIndexMap.get(e);n&&!0!==n.removed&&n.offer_obj&&t.push({offer_id:n.offer_obj.offer_id,campaign_id:n.offer_obj.campaign_id,last_update:n.l_u_ts})}),t.sort((e,t)=>t.last_update-e.last_update),t}getOffers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];return this.offersIndexMap.keys().forEach(r=>{const n=this.offersIndexMap.get(r);if(n.offer_obj&&(!0===e||!n.removed)){const e={offer_id:n.offer_obj.offer_id,offer:n.offer_obj,last_update:n.l_u_ts,created:n.c_ts,removed:n.removed};n.offer_actions&&n.offer_actions.offer_ca_action?e.click=n.offer_actions.offer_ca_action.l_u_ts||0:e.click=0,n.offer_actions&&n.offer_actions.offer_shown?e.view=n.offer_actions.offer_shown.l_u_ts||0:e.view=0,t.push(e)}}),t}getOffersFromIDs(e){const t=[];return e.forEach(e=>{const r=this.offersIndexMap.get(e);r&&r.offer_obj&&t.push({offer_id:e,offer:r.offer_obj,removed:r.removed,last_update:r.l_u_ts})}),t}getClientOffers(e){return this.clientToOffersMap.has(e)?this.clientToOffersMap.get(e):null}getOffersByType(e){return this.typesToOffersMap.has(e)?this.typesToOffersMap.get(e):null}_createElementContainer(){const e=(0,s.timestampMS)();return{c_ts:e,l_u_ts:e}}_isOfferValid(e,t){return!!(e&&t&&t.offer_id&&t.offer_id===e&&t.display_id&&t.campaign_id)&&!function(e){try{return e.ui_info.template_data.validity<Date.now()/1e3}catch(t){return n.default.debug("Missing validity",e),!1}}(t)}_createOfferContainer(){const e=(0,s.timestampMS)();return{c_ts:e,l_u_ts:e,offer_obj:null,offer_attrs:{},offer_actions:{},removed:!1}}_removeOldEntries(){const e=(0,s.timestampMS)(),t=1e3*i.default.OFFERS_STORAGE_DEFAULT_TTS_SECS,r=new Set;this.offersIndexMap.keys().forEach(i=>{const s=this.offersIndexMap.get(i),a=e-s.l_u_ts;a>=t?(n.default.info(`_removeOldEntries: removing old offer ${i} with delta time: ${a}`),this._removeIndexTablesForOffer(i),this.offersIndexMap.delete(i)):r.add(s.offer_obj.display_id)}),this.displayIdIndexMap.keys().forEach(e=>{r.has(e)||this.displayIdIndexMap.delete(e)})}_updateIndexTablesForOffer(e){const t=this.offersIndexMap.get(e);if(!t)return n.default.warn(`_updateIndexTablesForOffer: The offer id: ${e} is not stored`),!1;const r=t.offer_obj.display_id;return this.displayIdIndexMap.has(r)||this.displayIdIndexMap.set(r,{}),this.displayIDCounter[r]?this.displayIDCounter[r]+=1:this.displayIDCounter[r]=1,this._addOfferInCampaignMap(t.offer_obj),this._addOfferInClientMap(t.offer_obj),this._addOfferInTypeMap(t.offer_obj),!0}_migrateDisplayID(e,t){n.default.debug(`Migrating display id db information from ${e} to ${t}`),this.displayIdIndexMap.has(e)?(this.displayIdIndexMap.set(t,this.displayIdIndexMap.get(e)),this.displayIDCounter[e]&&(this.displayIDCounter[t]=this.displayIDCounter[e])):n.default.debug("nothing to migrate")}_removeIndexTablesForOffer(e){const t=this.offersIndexMap.get(e);if(!t)return n.default.warn(`_removeIndexTablesForOffer: The offer id: ${e} is not stored`),!1;const r=t.offer_obj.display_id;return this.displayIDCounter[r]-=1,this.displayIDCounter[r]<=0&&this.displayIdIndexMap.delete(r),this._removeOfferInCampaignMap(t.offer_obj),this._removeOfferInClientMap(t.offer_obj),this._removeOfferInTypeMap(t.offer_obj),!0}_buildIndexTables(){this.offersIndexMap.keys().forEach(e=>this._updateIndexTablesForOffer(e))}_addOfferInCampaignMap(e){if(!e||!e.offer_id||!e.campaign_id)return;let t=this.campaignToOffersMap[e.campaign_id];t||(t=new Set,this.campaignToOffersMap[e.campaign_id]=t),t.add(e.offer_id)}_removeOfferInCampaignMap(e){const t=this.campaignToOffersMap[e.campaign_id];t&&t.delete(e.offer_id)}_addOfferInClientMap(e){e&&e.client_id&&(this.clientToOffersMap.has(e.client_id)||this.clientToOffersMap.set(e.client_id,new Set),this.clientToOffersMap.get(e.client_id).add(e.offer_id))}_removeOfferInClientMap(e){this.clientToOffersMap.has(e.client_id)&&this.clientToOffersMap.get(e.client_id).delete(e.offer_id)}_addOfferInTypeMap(e){e.types&&0!==e.types.length&&e.types.forEach(t=>{this.typesToOffersMap.has(t)||this.typesToOffersMap.set(t,new Set),this.typesToOffersMap.get(t).add(e.offer_id)})}_removeOfferInTypeMap(e){e.types&&0!==e.types.length&&e.types.forEach(t=>{this.typesToOffersMap.has(t)&&this.typesToOffersMap.get(t).delete(e.offer_id)})}_pushCallbackEvent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n={evt:e,offer:t.offer_obj,lastUpdateTS:t.l_u_ts};r&&(n.extraData=r),this.callbacks.forEach(e=>e(n))}_loadPersistentData(){return i.default.LOAD_OFFERS_STORAGE_DATA?Promise.all([this.offersIndexMap.init(),this.displayIdIndexMap.init()]).then(()=>this._portOldOffersIfAny().then(()=>(this._removeOldEntries(),this._buildIndexTables(),Promise.resolve(!0)))):Promise.resolve(!0)}_portOldOffersIfAny(){return this.tmpdb?((e,t)=>e.get(t).then(e=>e.doc_data).catch(()=>null))(this.tmpdb,u).then(e=>{if(!e||!e.data_index)return Promise.resolve(!0);const t=e.data_index;return Object.keys(t.offers_index).forEach(e=>{this.offersIndexMap.has(e)||this.offersIndexMap.set(e,t.offers_index[e])}),Object.keys(t.display_id_index).forEach(e=>{this.displayIdIndexMap.has(e)||this.displayIdIndexMap.set(e,t.display_id_index[e])}),((e,t)=>e.get(t).then(t=>e.remove(t)).catch(e=>{e&&e.status&&404!==e.status?n.default.error(`removing old offers-db ${t} - err:`,e):n.default.log(`missing DB entry for docID ${t}`)}))(this.tmpdb,u)}).catch(()=>Promise.resolve(!0)):Promise.resolve(!0)}}},function(e,t,r){!function(r){"use strict";var n=function(e,t){var r=new Error(e+" at character "+t);throw r.index=t,r.description=e,r},i={"-":!0,"!":!0,"~":!0,"+":!0},s={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},a=function(e){var t,r=0;for(var n in e)(t=n.length)>r&&e.hasOwnProperty(n)&&(r=t);return r},o=a(i),u=a(s),c={true:!0,false:!1,null:null},l=function(e){return s[e]||0},d=function(e,t,r){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:r}},h=function(e){return e>=48&&e<=57},f=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122},p=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57},m=function(e){for(var t,r,a=0,m=e.charAt,_=e.charCodeAt,g=function(t){return m.call(e,t)},y=function(t){return _.call(e,t)},v=e.length,b=function(){for(var e=y(a);32===e||9===e;)e=y(++a)},$=function(){var e,t,r=k();return b(),63!==y(a)?r:(a++,(e=$())||n("Expected expression",a),b(),58===y(a)?(a++,(t=$())||n("Expected expression",a),{type:"ConditionalExpression",test:r,consequent:e,alternate:t}):void n("Expected :",a))},w=function(){b();for(var t=e.substr(a,u),r=t.length;r>0;){if(s.hasOwnProperty(t))return a+=r,t;t=t.substr(0,--r)}return!1},k=function(){var e,t,r,i,s,o,u,c;if(o=M(),!(t=w()))return o;for(s={value:t,prec:l(t)},(u=M())||n("Expected expression after "+t,a),i=[o,s,u];(t=w())&&0!==(r=l(t));){for(s={value:t,prec:r};i.length>2&&r<=i[i.length-2].prec;)u=i.pop(),t=i.pop().value,o=i.pop(),e=d(t,o,u),i.push(e);(e=M())||n("Expected expression after "+t,a),i.push(s,e)}for(e=i[c=i.length-1];c>1;)e=d(i[c-1].value,i[c-2],e),c-=2;return e},M=function(){var t,r,n;if(b(),t=y(a),h(t)||46===t)return S();if(39===t||34===t)return O();if(f(t)||40===t)return E();if(91===t)return L();for(n=(r=e.substr(a,o)).length;n>0;){if(i.hasOwnProperty(r))return a+=n,{type:"UnaryExpression",operator:r,argument:M(),prefix:!0};r=r.substr(0,--n)}return!1},S=function(){for(var e,t,r="";h(y(a));)r+=g(a++);if(46===y(a))for(r+=g(a++);h(y(a));)r+=g(a++);if("e"===(e=g(a))||"E"===e){for(r+=g(a++),"+"!==(e=g(a))&&"-"!==e||(r+=g(a++));h(y(a));)r+=g(a++);h(y(a-1))||n("Expected exponent ("+r+g(a)+")",a)}return t=y(a),f(t)?n("Variable names cannot start with a number ("+r+g(a)+")",a):46===t&&n("Unexpected period",a),{type:"Literal",value:parseFloat(r),raw:r}},O=function(){for(var e,t="",r=g(a++),i=!1;a<v;){if((e=g(a++))===r){i=!0;break}if("\\"===e)switch(e=g(a++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v"}else t+=e}return i||n('Unclosed quote after "'+t+'"',a),{type:"Literal",value:t,raw:r+t+r}},x=function(){var t,r=y(a),i=a;for(f(r)?a++:n("Unexpected "+g(a),a);a<v&&(r=y(a),p(r));)a++;return t=e.slice(i,a),c.hasOwnProperty(t)?{type:"Literal",value:c[t],raw:t}:"this"===t?{type:"ThisExpression"}:{type:"Identifier",name:t}},T=function(e){for(var t,r,i=[];a<v;){if(b(),(t=y(a))===e){a++;break}44===t?a++:((r=$())&&"Compound"!==r.type||n("Expected comma",a),i.push(r))}return i},E=function(){var e,t;for(t=40===(e=y(a))?D():x(),b(),e=y(a);46===e||91===e||40===e;)a++,46===e?(b(),t={type:"MemberExpression",computed:!1,object:t,property:x()}):91===e?(t={type:"MemberExpression",computed:!0,object:t,property:$()},b(),93!==(e=y(a))&&n("Unclosed [",a),a++):40===e&&(t={type:"CallExpression",arguments:T(41),callee:t}),b(),e=y(a);return t},D=function(){a++;var e=$();if(b(),41===y(a))return a++,e;n("Unclosed (",a)},L=function(){return a++,{type:"ArrayExpression",elements:T(93)}},P=[];a<v;)59===(t=y(a))||44===t?a++:(r=$())?P.push(r):a<v&&n('Unexpected "'+g(a)+'"',a);return 1===P.length?P[0]:{type:"Compound",body:P}};m.version="0.3.0",m.toString=function(){return"JavaScript Expression Parser (JSEP) v"+m.version},m.addUnaryOp=function(e){return i[e]=!0,this},m.addBinaryOp=function(e,t){return u=Math.max(e.length,u),s[e]=t,this},m.removeUnaryOp=function(e){return delete i[e],e.length===o&&(o=a(i)),this},m.removeBinaryOp=function(e){return delete s[e],e.length===u&&(u=a(s)),this},void 0!==e&&e.exports?t=e.exports=m:t.parse=m}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(767));t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(25)),i=c(r(159)),s=c(r(32)),a=r(52),o=r(40),u=c(r(220));function c(e){return e&&e.__esModule?e:{default:e}}const l=36e5,d={MT_PUSH_OFFER:"push-offer",MT_REMOVE_OFFER:"remove-offer",MT_OFFERS_STATE_CHANGED:"offers-state-changed"},h="processor";t.default=class{constructor(e,t){this.offersDB=t,this.offerUpdateCache=new Map,this.uiActionsMap={"remove-offer":this._uiFunRemoveOffer.bind(this),"change-offer-state":this._uiFunOffersStateChanged.bind(this),"offer-action-signal":this._uiFunOfferActionSignal.bind(this),"action-signal":this._uiFunActionSignal.bind(this)},this.sigHandler=e}pushOffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;if(!e||!e.isValid())return n.default.warn("pushOffer: invalid offer or missing fields"),!1;if(!this._isOfferCached(e.uniqueID)){if(this.offersDB.hasOfferData(e.uniqueID)){const t=this.offersDB.getOfferObject(e.uniqueID);if(e.version!==t.version&&!this.offersDB.updateOfferObject(e.uniqueID,e.offerObj))return n.default.error(`pushOffer: Error updating the offer to the DB: ${e.uniqueID}`),!1}else if(!this.offersDB.addOfferObject(e.uniqueID,e.offerObj))return n.default.error(`pushOffer: Error adding the offer to the DB: ${e.uniqueID}`),!1;this._cacheOffer(e.uniqueID)}this.sigHandler.setCampaignSignal(e.campaignID,e.uniqueID,r,i.default.AID_OFFER_TRIGGERED),this.offersDB.incOfferAction(e.uniqueID,i.default.AID_OFFER_PUSHED),this.sigHandler.setCampaignSignal(e.campaignID,e.uniqueID,r,i.default.AID_OFFER_PUSHED);const s=t||e.ruleInfo,a={offer_id:e.uniqueID,display_rule:s,offer_data:e.offerObj},o=e.destinationRealEstates;return this._publishMessage(d.MT_PUSH_OFFER,o,a),!0}getStoredOffers(e){const t=this,r=this.offersDB.getOffers(),n=[],i=e?e.filters:null;return r.forEach(e=>{if(i){if(i.ensure_has_dest&&(!e.offer.rs_dest||0===e.offer.rs_dest.length))return;if(i.by_rs_dest&&e.offer.rs_dest){const t="string"==typeof i.by_rs_dest?new Set([i.by_rs_dest]):new Set(i.by_rs_dest);if(!e.offer.rs_dest.some(e=>t.has(e)))return}}n.push({offer_id:e.offer_id,offer_info:e.offer,created_ts:e.created,attrs:{state:t.offersDB.getOfferAttribute(e.offer_id,"state")}})}),n}createExternalOffer(e){return e&&e.origin&&e.data?!this.hasExternalOffer(e)&&this.pushOffer(new u.default(e.data),null,e.origin):(n.default.warn("createExternalOffer: invalid arguments"),!1)}hasExternalOffer(e){return!!(e&&e.data&&e.data.offer_id)&&this.offersDB.isOfferPresent(e.data.offer_id)}offerRemoved(e,t,r){this.offerUpdateCache.delete(e),r&&(this.sigHandler.setCampaignSignal(t,e,h,i.default.AID_OFFER_EXPIRED),this.sigHandler.sendCampaignSignalNow(t),this.sigHandler.removeCampaignSignals(t))}_isOfferCached(e){return!!this.offerUpdateCache.has(e)&&!((0,o.timestampMS)()-this.offerUpdateCache.get(e)>l&&(this.offerUpdateCache.delete(e),1))}_cacheOffer(e){e&&this.offerUpdateCache.set(e,(0,o.timestampMS)())}_removeOffer(e){if(!this.offersDB.getOfferObject(e))return n.default.warn(`removeOffer: the offer ${e} is not on our DB`),!1;if(!this.offersDB.removeOfferObject(e))return n.default.warn(`removeOffer: failed removing the offer object from the DB ${e}`),!1;const t=this.offersDB.getCampaignID(e);this.sigHandler.setCampaignSignal(t,e,h,i.default.AID_OFFER_DB_REMOVED);const r=this._getDestRealStatesForOffer(e),s={offer_id:e};return this._publishMessage(d.MT_REMOVE_OFFER,r,s),!0}processRealEstateMessage(e){if(!(e&&e.origin&&e.type&&e.data))return n.default.error("ProcessRealEstateMessage: invalid message format, discarding it"),!1;const t=this.uiActionsMap[e.type];return t?t(e):(n.default.warn(`ProcessRealEstateMessage: we cannot process the message type ${e.type}`),!1)}_publishMessage(e,t,r){try{const i={origin:"offers-core",type:e,dest:t,data:r};if(a.isChromium&&e===d.MT_PUSH_OFFER)return void s.default.pub("msg_center:show_message",i,"ghostery");s.default.pub("offers-send-ch",i)}catch(e){n.default.error(`_publishMessage: something failed publishing the message ${JSON.stringify(e)}`)}}_getDestRealStatesForOffer(e){const t=this.offersDB.getOfferObject(e);return t&&t.rs_dest?t.rs_dest:[]}_uiFunRemoveOffer(e){if(!e.data||!e.data.offer_id)return n.default.warn(`_uiFunRemoveOffer: invalid format of the message: ${JSON.stringify(e)}`),!1;const t=e.data.offer_id,r=this.offersDB.getCampaignID(t);return n.default.info(`_uiFunRemoveOffer: called for offer id: ${t}`),this.sigHandler.setCampaignSignal(r,t,e.origin,i.default.AID_OFFER_REMOVED),this.offersDB.incOfferAction(t,i.default.AID_OFFER_REMOVED),this._removeOffer(t)}_uiFunActionSignal(e){if(!e.data||!e.data.action_id)return n.default.warn(`_uiFunActionSignal: data: ${e.data} are invalid`),!1;const t=e.data.counter?e.data.counter:1;return this.sigHandler.setActionSignal(e.data.action_id,e.origin,t),!0}_uiFunOffersStateChanged(e){if(!e.data||!e.data.offers_ids||!e.data.new_state)return n.default.warn(`_uiFunOffersStateChanged: invalid arguments: ${JSON.stringify(e)}`),!1;let t=!1;const r=this;if(e.data.offers_ids.forEach(i=>{this.offersDB.getCampaignID(i)?(r.offersDB.addOfferAttribute(i,"state",e.data.new_state),t=!0):n.default.warn(`_uiFunOffersStateChanged: offer with ID ${i} is not present?`)}),t){const t=[],r={offer_ids:e.data.offers_ids};this._publishMessage(d.MT_OFFERS_STATE_CHANGED,t,r)}return!0}_uiFunOfferActionSignal(e){if(!e.data||!e.data.offer_id||!e.data.action_id||"string"!=typeof e.data.action_id)return n.default.warn(`_uiFunOfferActionSignal: invalid arguments: ${JSON.stringify(e)}`),!1;const t=e.data.offer_id,r=this.offersDB.getCampaignID(t);if(!r)return n.default.warn(`_uiFunOfferActionSignal: no campaign id for offer ${t}`),!1;const i=e.data.counter?e.data.counter:1;return this.sigHandler.setCampaignSignal(r,t,e.origin,e.data.action_id,i),this.offersDB.incOfferAction(t,e.data.action_id,i),!0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.statusMap=null,this.onStatusChangedCallback=null}setStatusChangedCallback(e){this.onStatusChangedCallback=e}loadStatusFromObject(e){if(this.statusMap=new Map,!e)return;const t=Object.keys(e);for(let r=0;r<t.length;r+=1){const n=t[r];this.statusMap.set(n,e[n])}this.onStatusChangedCallback&&this.onStatusChangedCallback()}getOfferStatus(e){return null===this.statusMap?"unknown":this.statusMap.has(e)?this.statusMap.get(e):"unknown"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40),i=function(e){return e&&e.__esModule?e:{default:e}}(r(159));const s=e=>Math.floor(e/864e5),a=()=>s((0,n.timestampMS)()),o=(e,t,r)=>{e.has(t)?e.get(t).add(r):e.set(t,new Set([r]))},u=e=>e&&e.rs_dest&&1===e.rs_dest.length&&"dropdown"===e.rs_dest[0];t.default=class{constructor(e){this.addedPerDayMap=new Map,this.offersDB=e}newOfferAction(e){let t=e.offer;this._checkOfferAdded(t.offer_id,t)}buildFromOffers(e){this._clear(),e.forEach(e=>{this.newOfferAction({offer:e.offer})})}offersAddedToday(){const e=a();return this.addedPerDayMap.has(e)?this.addedPerDayMap.get(e).size:0}_checkOfferAdded(e,t){const r=this.offersDB.getOfferActionMeta(e,i.default.AID_OFFER_DB_ADDED);if(r&&!u(t)){const t=s(r.l_u_ts);o(this.addedPerDayMap,t,e)}}_clear(){this.addedPerDayMap.clear()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=k(r(302)),i=k(r(771)),s=k(r(25)),a=k(r(770)),o=k(r(769)),u=k(r(766)),c=k(r(765)),l=k(r(764)),d=k(r(763)),h=k(r(762)),f=k(r(758)),p=k(r(757)),m=k(r(756)),_=k(r(755)),g=k(r(754)),y=k(r(11)),v=k(r(22)),b=r(40),$=k(r(159)),w=k(r(88));function k(e){return e&&e.__esModule?e:{default:e}}const M=function e(t,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!t||i>=t.length)return Promise.resolve(r);return t[i].process(r,n).then(r=>e(t,r,n,i+1))},S=e=>"99"===v.default.settings.channel||!(()=>{if(y.default.get("offersDevFlag",!1))return!1;return((0,b.timestampMS)()-(0,b.getLatestOfferInstallTs)())/1e3<2700})()&&e.offersAddedToday()<w.default.MAX_NUM_OFFERS_PER_DAY,O=(e,t)=>{let r=t.urlData;return!(e.hasBlacklistPatterns()&&e.blackListPatterns.match(r.getPatternRequest()))};t.default=class{constructor(e){let t=e.intentHandler,r=e.backendConnector,s=e.presentRealEstates,d=e.historyMatcher,y=e.featuresHandler,v=e.sigHandler,b=e.eventHandler,$=e.categoryHandler,w=e.db;this.intentHandler=t,this.offersDB=new u.default(w),this.offersDBObserver=new c.default(this.offersDB),this.offersGeneralStats=new i.default(this.offersDB),this.offersMonitorHandler=new h.default(v,this.offersDB,b),this.intentOffersHandler=new l.default(r,t),this.offersAPI=new o.default(v,this.offersDB),this.sigHandler=v,this.offerStatus=new a.default,this.offerStatus.setStatusChangedCallback(this._updateOffersStatusCallback.bind(this)),this.offersDB.dbLoaded&&(this.offersGeneralStats.buildFromOffers(this.offersDB.getOffers({includeRemoved:!0})),this.offersDBObserver.observeExpirations()),this._offersDBCallback=this._offersDBCallback.bind(this),this.offersDB.registerCallback(this._offersDBCallback);const k=y.isFeatureAvailable("geo")?y.getFeature("geo"):null;this.context={presentRealEstates:s,geoChecker:k,historyMatcher:d,offersDB:this.offersDB,categoryHandler:$,intentHandler:t,intentOffersHandler:this.intentOffersHandler},this._processEvent=this._processEvent.bind(this),this.evtQueue=new n.default("offers-handler-queue",this._processEvent),this.jobsPipeline=[new f.default,new p.default,new m.default,new _.default,new g.default]}destroy(){this.offersDB.unregisterCallback(this._offersDBCallback),this.offersDBObserver.unload()}urlChangedEvent(e){return this.evtQueue.push({urlData:e})}shouldActivateOfferForUrl(e){return this.offersMonitorHandler.shouldActivateOfferForUrl(e)}couponFormUsed(e){this.offersMonitorHandler.couponFormUsed(e)}_pushOffersToRealEstates(e,t){const r={type:"exact_match",url:[t.getRawUrl()],display_time_secs:e.ruleInfo.display_time_secs},n=this.offersAPI.pushOffer(e,r);return Promise.resolve(n)}_updateOffers(){return(this.intentOffersHandler.thereIsNewData()?this.intentOffersHandler.updateIntentOffers():Promise.resolve()).then(()=>M(this.jobsPipeline,[],this.context))}_processEvent(e){let t=e.urlData;return s.default.debug("Offers handler processing a new event",t.getRawUrl()),S(this.offersGeneralStats)?(this.context.urlData=t,this._updateOffers().then(e=>{s.default.debug(`We have ${e.length} on the queue`);let r=e.slice();r.reverse();const n=e=>O(e,{urlData:t});if(r.filter(e=>!n(e)).forEach(e=>s.default.debug(`Offer ${e.uniqueID} soft-filtered out!`,e)),0===(r=r.filter(n)).length)return Promise.resolve(!0);const i=r.find(e=>!(0,d.default)(e,this.offersDB));return i?(s.default.debug("Offer selected: ",i),this._pushOffersToRealEstates(i,t)):Promise.resolve(!0)})):(s.default.debug("we should not show any offer now"),Promise.resolve(!1))}_offersDBCallback(e){if("offer-action"===e.evt)this.offersGeneralStats.newOfferAction(e);else if("offers-db-loaded"===e.evt){const e=this.offersDB.getOffers({includeRemoved:!0});this.offersGeneralStats.buildFromOffers(e),this.offersDBObserver.observeExpirations()}else if("offer-added"===e.evt){const t=e.offer.offer_id;this.offersDB.incOfferAction(t,$.default.AID_OFFER_DB_ADDED)}else if("offer-removed"===e.evt){const t=e.offer.offer_id,r=e.offer.campaign_id,n=e.extraData&&!0===e.extraData.erased;this.offersAPI.offerRemoved(t,r,n)}}_updateOffersStatusCallback(){const e=e=>"obsolete"===this.offerStatus.getOfferStatus(e);this.offersDB.getOffers().forEach(t=>{e(t.offer_id)&&this.offersDB.removeOfferObject(t.offer_id)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(175));t.default=class{constructor(e){this.dbName=e,this.db=null}init(){return(0,n.default)().then(e=>(this.db=new e(this.dbName),this.db.version(1).stores({kv:"key"}),this.db.open()))}unload(){null!==this.db&&(this.db.close(),this.db=null)}destroy(){return null!==this.db?this.db.delete():(0,n.default)(e=>e.delete(this.dbName))}get(e){return this.db.kv.get(e).then(e=>e&&e.value)}set(e,t){return this.db.kv.put({key:e,value:t})}has(e){return this.db.kv.get(e).then(e=>void 0!==e)}delete(e){return this.db.kv.delete(e)}clear(){return this.db.kv.clear()}size(){return this.db.kv.count()}keys(){return this.db.kv.toCollection().primaryKeys()}values(){return this.db.kv.toArray().then(e=>e.map(e=>e.value))}entries(){return this.db.kv.toArray().then(e=>e.map(e=>[e.key,e.value]))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(r(298));t.default=class extends i.default{constructor(){super(...arguments),this.data=new Map}init(){return super.init().then(()=>super.entries()).then(e=>{e.forEach(e=>{var t=n(e,2);let r=t[0],i=t[1];this.data.set(r,i)})})}unload(){return this.data.clear(),super.unload()}get(e){return this.data.get(e)}set(e,t){return this.data.set(e,t),super.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.data.delete(e),super.delete(e)}clear(){return this.data.clear(),super.clear()}size(){return this.data.size}keys(){return[...this.data.keys()]}entries(){return[...this.data.entries()]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(301)),i=o(r(25)),s=o(r(11)),a=r(132);function o(e){return e&&e.__esModule?e:{default:e}}const u="cliqz-offers-intent-db";t.default=class{constructor(){this.activeIntents=(0,a.buildCachedMap)(u,!s.default.get("offersDevFlag",!1)),this.callbacks=new Map}init(){return this.activeIntents.init().then(()=>{i.default.debug("We have the following active intents",[...this.activeIntents.keys()])})}registerCallback(e){this.callbacks.set(e,e)}unregisterCallback(e){this.callbacks.delete(e)}activateIntent(e){this.isIntentActive(e)||(this.activeIntents.set(e.getName(),e.serialize()),this._notifyListeners("intent-active",e))}getActiveIntents(){return this._removeInactiveIntents(),this.activeIntents.keys().map(e=>n.default.deserialize(this.activeIntents.get(e)))||[]}isIntentActiveByName(e){return this.activeIntents.has(e)&&n.default.deserialize(this.activeIntents.get(e)).isActive()}isIntentActive(e){return this.isIntentActiveByName(e.getName())}getActiveIntent(e){return this.isIntentActiveByName(e)?n.default.deserialize(this.activeIntents.get(e)):null}_notifyListeners(e,t){this.callbacks.forEach(r=>r(e,t))}_removeInactiveIntents(){this.activeIntents.keys().forEach(e=>{n.default.deserialize(this.activeIntents.get(e)).isActive()||this.activeIntents.delete(e)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(31)),i=u(r(299)),s=u(r(87)),a=u(r(81)),o=u(r(223));function u(e){return e&&e.__esModule?e:{default:e}}const c="history-analyzer";t.default=class extends i.default{constructor(){super("history"),this.mod=null,this.ongoingQueries=new Map}init(){return this.mod=n.default.module(c),!0}unload(){return!0}isAvailable(){return this.mod.isEnabled()}performQuery(e){var t=this;return function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){const r=e.index,n=e.start_ms-1,i=e.end_ms+1,u=new a.default(function(){return 0}),c=yield t.mod.action("query",{after:n,before:i,urls:r.tokens});var l=!0,d=!1,h=void 0;try{for(var f,p,m=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")}(c);l=(f=yield m.next()).done,p=yield f.value,!l;l=!0){var _=p;const e=_.ts,t=_.url,n=new o.default(t);if(r.match(n.getPatternRequest())){const t=(0,s.default)(e).format("YYYYMMDD");u.update(t,function(e){return e+1})}}}catch(e){d=!0,h=e}finally{try{!l&&m.return&&(yield m.return())}finally{if(d)throw h}}const g={},y={num_days:0,m:0,c:0,last_checked_url_ts:i};return u.forEach(function(e,t){y.num_days+=1,y.m+=e,y.c+=e,g[t]={m:e,c:e}}),{pid:e.pid,d:{info:{},match_data:{total:y,per_day:g}}}})()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(32)),i=a(r(11)),s=a(r(299));function a(e){return e&&e.__esModule?e:{default:e}}const o="config_location",u="config_location.city",c="offers_location";t.default=class extends s.default{constructor(){super("geo"),this.loc=null,this.onPrefChange=void 0}init(){return this._updateLocFromPrefs(),this.onPrefChange=n.default.subscribe("prefchange",e=>{e!==u&&e!==o||this._updateLocFromPrefs()}),!0}unload(){return this.onPrefChange&&(this.onPrefChange.unsubscribe(),this.onPrefChange=void 0),!0}isAvailable(){return this.isLocAvailable()}isLocAvailable(){return 1===i.default.get(c,1)&&this._checkLoc(this.loc)&&"--"!==this.loc.country}updateLocation(e){1===i.default.get(c,1)?this.loc=e?e.loc:null:this.loc=null}isSameLocation(e){if(!this._checkLoc(e)||!this._checkLoc(this.loc))return!1;if(this.loc.country!==e.country)return!1;if(e.city){if(e.city!==this.loc.city)return!1;if(e.zip&&e.zip!==this.loc.zip)return!1}return!0}matches(e){if(!this.isLocAvailable()||!e.has(this.loc.country))return!1;const t=e.get(this.loc.country);if(0===t.size)return!0;if(!t.has(this.loc.city))return!1;const r=t.get(this.loc.city);return 0===r.size||r.has(this.loc.zip)}_checkLoc(e){return!(!e||!e.country)}_updateLocFromPrefs(){const e={loc:{country:i.default.get(o,"--"),city:i.default.get(u,"--")}};this.updateLocation(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return[new n.default,new i.default]};var n=s(r(777)),i=s(r(776));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(25)),i=s(r(778));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){this.features=new Map,(0,i.default)().forEach(e=>{e.init()?(n.default.info(`Feature ${e.getName()} initialized properly`),this.features.set(e.getName(),e)):n.default.error(`Problem initializing the feature ${e.getName()}`)})}unload(){this.features.forEach((e,t)=>{e.unload()?n.default.info(`Feature ${t} uninitialized properly`):n.default.error(`Error uninitializing the feature ${t}`)}),this.features.clear()}isFeatureAvailable(e){return!!this.features.has(e)&&this.features.get(e).isAvailable()}getFeature(e){return this.features.get(e)}dumpFeaturesData(){n.default.info("Features data: ",this.features)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40);t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.triggerIndex={},this.lastExpireRun=0,this.triggerDestroyCb=e}addTrigger(e){this.expireCache(),e._added_ts=(0,n.timestamp)(),e._subtriggers=null,this.triggerIndex[e.trigger_id]=e}getTrigger(e){return this.triggerIndex[e]}setSubtriggers(e,t){const r=this.triggerIndex[e];r&&(r._subtriggers=t)}getSubtriggers(e){const t=this;t.expireCache();const r=t.triggerIndex[e];return r&&r._subtriggers?r._subtriggers.filter(()=>t.triggerIndex[e]):[]}expireCache(){const e=(0,n.timestamp)();e-this.lastExpireRun<60||(Object.keys(this.triggerIndex).forEach(t=>{const r=this.triggerIndex[t];null!==r.ttl&&r._added_ts+r.ttl<e&&(this.triggerDestroyCb&&this.triggerDestroyCb(this.triggerIndex[t]),delete this.triggerIndex[t])}),this.lastExpireRun=e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40);t.default=class{constructor(){this.cache=new Map}destroy(){}addEntry(e,t,r){if(!e||!t)return;const i=(0,n.timestampMS)()+1e3*t;this.cache.set(e,{expirate_ts:i,data:r})}hasEntry(e){return this._expireCacheEntry(e)}getEntry(e){return this._expireCacheEntry(e)?this.cache.get(e).data:null}_expireCacheEntry(e){if(!this.cache.has(e))return!1;const t=this.cache.get(e),r=(0,n.timestampMS)();return!(t.expirate_ts<r&&(this.cache.delete(e),1))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(107)),i=s(r(25));function s(e){return e&&e.__esModule?e:{default:e}}const a={$set_offers_status:class extends n.default{constructor(e){super(e),this.statusObj=null,this.alreadySet=!1}isBuilt(){return null!==this.statusObj}build(){if(this.data&&this.data.raw_op.args){if(this.data.raw_op.args.length<1||"object"!=typeof this.data.raw_op.args[0])throw new Error("SetOffersStatusExpr invalid args");this.statusObj=this.data.raw_op.args[0]}}destroy(){}getExprValue(){return this.alreadySet||("debug"===i.default.LOG_LEVEL&&i.default.debug("Setting the new offers status: ",this.statusObj),this.data.offers_status_handler.loadStatusFromObject(this.statusObj),this.alreadySet=!0),Promise.resolve(!0)}}};t.default=a},function(e,t,r){(function(e){e.exports=function(){"use strict";var t,r;function n(){return t.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){return void 0===e}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var r,n=[];for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var r in t)l(t,r)&&(e[r]=t[r]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,r,n){return Et(e,t,r,n,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=f(e),n=r.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=h(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var _=n.momentProperties=[];function g(e,t){var r,n,i;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=f(t)),a(t._locale)||(e._locale=t._locale),_.length>0)for(r=0;r<_.length;r++)n=_[r],a(i=t[n])||(e[n]=i);return e}var y=!1;function v(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,n.updateOffset(this),y=!1)}function b(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function $(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=$(t)),r}function k(e,t,r){var n,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(n=0;n<i;n++)(r&&e[n]!==t[n]||!r&&w(e[n])!==w(t[n]))&&a++;return a+s}function M(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var r=!0;return d(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),r){for(var i,s=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var o in i+="\n["+a+"] ",arguments[0])i+=o+": "+arguments[0][o]+", ";i=i.slice(0,-2)}else i=arguments[a];s.push(i)}M(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)},t)}var O,x={};function T(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),x[e]||(M(t),x[e]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var r,n=d({},e);for(r in t)l(t,r)&&(s(e[r])&&s(t[r])?(n[r]={},d(n[r],e[r]),d(n[r],t[r])):null!=t[r]?n[r]=t[r]:delete n[r]);for(r in e)l(e,r)&&!l(t,r)&&s(e[r])&&(n[r]=d({},n[r]));return n}function L(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,O=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)l(e,t)&&r.push(t);return r};var P={};function A(e,t){var r=e.toLowerCase();P[r]=P[r+"s"]=P[t]=e}function j(e){return"string"==typeof e?P[e]||P[e.toLowerCase()]:void 0}function R(e){var t,r,n={};for(r in e)l(e,r)&&(t=j(r))&&(n[t]=e[r]);return n}var I={};function C(e,t){I[e]=t}function Y(e,t,r){var n=""+Math.abs(e),i=t-n.length,s=e>=0;return(s?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},q={};function H(e,t,r,n){var i=n;"string"==typeof n&&(i=function(){return this[n]()}),e&&(q[e]=i),t&&(q[t[0]]=function(){return Y(i.apply(this,arguments),t[1],t[2])}),r&&(q[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e,t){return e.isValid()?(t=W(t,e.localeData()),U[t]=U[t]||function(e){var t,r,n=e.match(F);for(t=0,r=n.length;t<r;t++)q[n[t]]?n[t]=q[n[t]]:n[t]=z(n[t]);return function(t){var i,s="";for(i=0;i<r;i++)s+=E(n[i])?n[i].call(t,e):n[i];return s}}(t),U[t](e)):e.localeData().invalidDate()}function W(e,t){var r=5;function n(e){return t.longDateFormat(e)||e}for(N.lastIndex=0;r>=0&&N.test(e);)e=e.replace(N,n),N.lastIndex=0,r-=1;return e}var V=/\d/,G=/\d\d/,K=/\d{3}/,J=/\d{4}/,Q=/[+-]?\d{6}/,Z=/\d\d?/,X=/\d\d\d\d?/,ee=/\d\d\d\d\d\d?/,te=/\d{1,3}/,re=/\d{1,4}/,ne=/[+-]?\d{1,6}/,ie=/\d+/,se=/[+-]?\d+/,ae=/Z|[+-]\d\d:?\d\d/gi,oe=/Z|[+-]\d\d(?::?\d\d)?/gi,ue=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ce={};function le(e,t,r){ce[e]=E(t)?t:function(e,n){return e&&r?r:t}}function de(e,t){return l(ce,e)?ce[e](t._strict,t._locale):new RegExp(function(e){return he(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,n,i){return t||r||n||i}))}(e))}function he(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var fe={};function pe(e,t){var r,n=t;for("string"==typeof e&&(e=[e]),o(t)&&(n=function(e,r){r[t]=w(e)}),r=0;r<e.length;r++)fe[e[r]]=n}function me(e,t){pe(e,function(e,r,n,i){n._w=n._w||{},t(e,n._w,n,i)})}function _e(e,t,r){null!=t&&l(fe,e)&&fe[e](t,r._a,r,e)}var ge=0,ye=1,ve=2,be=3,$e=4,we=5,ke=6,Me=7,Se=8;function Oe(e){return xe(e)?366:365}function xe(e){return e%4==0&&e%100!=0||e%400==0}H("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),A("year","y"),C("year",1),le("Y",se),le("YY",Z,G),le("YYYY",re,J),le("YYYYY",ne,Q),le("YYYYYY",ne,Q),pe(["YYYYY","YYYYYY"],ge),pe("YYYY",function(e,t){t[ge]=2===e.length?n.parseTwoDigitYear(e):w(e)}),pe("YY",function(e,t){t[ge]=n.parseTwoDigitYear(e)}),pe("Y",function(e,t){t[ge]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var Te,Ee=De("FullYear",!0);function De(e,t){return function(r){return null!=r?(Pe(this,e,r),n.updateOffset(this,t),this):Le(this,e)}}function Le(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Pe(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&xe(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Ae(r,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function Ae(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=function(e,t){return(e%t+t)%t}(t,12);return e+=(t-r)/12,1===r?xe(e)?29:28:31-r%7%2}Te=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),H("MMMM",0,0,function(e){return this.localeData().months(this,e)}),A("month","M"),C("month",8),le("M",Z),le("MM",Z,G),le("MMM",function(e,t){return t.monthsShortRegex(e)}),le("MMMM",function(e,t){return t.monthsRegex(e)}),pe(["M","MM"],function(e,t){t[ye]=w(e)-1}),pe(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);null!=i?t[ye]=i:f(r).invalidMonth=e});var je=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Re="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ie="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ce(e,t){var r;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(!o(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),Ae(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function Ye(e){return null!=e?(Ce(this,e),n.updateOffset(this,!0),this):Le(this,"Month")}var Fe=ue,Ne=ue;function Ue(){function e(e,t){return t.length-e.length}var t,r,n=[],i=[],s=[];for(t=0;t<12;t++)r=h([2e3,t]),n.push(this.monthsShort(r,"")),i.push(this.months(r,"")),s.push(this.months(r,"")),s.push(this.monthsShort(r,""));for(n.sort(e),i.sort(e),s.sort(e),t=0;t<12;t++)n[t]=he(n[t]),i[t]=he(i[t]);for(t=0;t<24;t++)s[t]=he(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function qe(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function He(e,t,r){var n=7+t-r,i=(7+qe(e,0,n).getUTCDay()-t)%7;return-i+n-1}function ze(e,t,r,n,i){var s,a,o=(7+r-n)%7,u=He(e,n,i),c=1+7*(t-1)+o+u;return c<=0?a=Oe(s=e-1)+c:c>Oe(e)?(s=e+1,a=c-Oe(e)):(s=e,a=c),{year:s,dayOfYear:a}}function Be(e,t,r){var n,i,s=He(e.year(),t,r),a=Math.floor((e.dayOfYear()-s-1)/7)+1;return a<1?(i=e.year()-1,n=a+We(i,t,r)):a>We(e.year(),t,r)?(n=a-We(e.year(),t,r),i=e.year()+1):(i=e.year(),n=a),{week:n,year:i}}function We(e,t,r){var n=He(e,t,r),i=He(e+1,t,r);return(Oe(e)-n+i)/7}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),C("week",5),C("isoWeek",5),le("w",Z),le("ww",Z,G),le("W",Z),le("WW",Z,G),me(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=w(e)}),H("d",0,"do","day"),H("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),H("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),H("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),C("day",11),C("weekday",11),C("isoWeekday",11),le("d",Z),le("e",Z),le("E",Z),le("dd",function(e,t){return t.weekdaysMinRegex(e)}),le("ddd",function(e,t){return t.weekdaysShortRegex(e)}),le("dddd",function(e,t){return t.weekdaysRegex(e)}),me(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);null!=i?t.d=i:f(r).invalidWeekday=e}),me(["d","e","E"],function(e,t,r,n){t[n]=w(e)});var Ve="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ge="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ke="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Je=ue,Qe=ue,Ze=ue;function Xe(){function e(e,t){return t.length-e.length}var t,r,n,i,s,a=[],o=[],u=[],c=[];for(t=0;t<7;t++)r=h([2e3,1]).day(t),n=this.weekdaysMin(r,""),i=this.weekdaysShort(r,""),s=this.weekdays(r,""),a.push(n),o.push(i),u.push(s),c.push(n),c.push(i),c.push(s);for(a.sort(e),o.sort(e),u.sort(e),c.sort(e),t=0;t<7;t++)o[t]=he(o[t]),u[t]=he(u[t]),c[t]=he(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function et(){return this.hours()%12||12}function tt(e,t){H(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function rt(e,t){return t._meridiemParse}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,et),H("k",["kk",2],0,function(){return this.hours()||24}),H("hmm",0,0,function(){return""+et.apply(this)+Y(this.minutes(),2)}),H("hmmss",0,0,function(){return""+et.apply(this)+Y(this.minutes(),2)+Y(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+Y(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+Y(this.minutes(),2)+Y(this.seconds(),2)}),tt("a",!0),tt("A",!1),A("hour","h"),C("hour",13),le("a",rt),le("A",rt),le("H",Z),le("h",Z),le("k",Z),le("HH",Z,G),le("hh",Z,G),le("kk",Z,G),le("hmm",X),le("hmmss",ee),le("Hmm",X),le("Hmmss",ee),pe(["H","HH"],be),pe(["k","kk"],function(e,t,r){var n=w(e);t[be]=24===n?0:n}),pe(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e}),pe(["h","hh"],function(e,t,r){t[be]=w(e),f(r).bigHour=!0}),pe("hmm",function(e,t,r){var n=e.length-2;t[be]=w(e.substr(0,n)),t[$e]=w(e.substr(n)),f(r).bigHour=!0}),pe("hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[be]=w(e.substr(0,n)),t[$e]=w(e.substr(n,2)),t[we]=w(e.substr(i)),f(r).bigHour=!0}),pe("Hmm",function(e,t,r){var n=e.length-2;t[be]=w(e.substr(0,n)),t[$e]=w(e.substr(n))}),pe("Hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[be]=w(e.substr(0,n)),t[$e]=w(e.substr(n,2)),t[we]=w(e.substr(i))});var nt,it=De("Hours",!0),st={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Re,monthsShort:Ie,week:{dow:0,doy:6},weekdays:Ve,weekdaysMin:Ke,weekdaysShort:Ge,meridiemParse:/[ap]\.?m?\.?/i},at={},ot={};function ut(e){return e?e.toLowerCase().replace("_","-"):e}function ct(t){var r=null;if(!at[t]&&void 0!==e&&e&&e.exports)try{r=nt._abbr,!function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),lt(r)}catch(e){}return at[t]}function lt(e,t){var r;return e&&(r=a(t)?ht(e):dt(e,t))&&(nt=r),nt._abbr}function dt(e,t){if(null!==t){var r=st;if(t.abbr=e,null!=at[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=at[e]._config;else if(null!=t.parentLocale){if(null==at[t.parentLocale])return ot[t.parentLocale]||(ot[t.parentLocale]=[]),ot[t.parentLocale].push({name:e,config:t}),null;r=at[t.parentLocale]._config}return at[e]=new L(D(r,t)),ot[e]&&ot[e].forEach(function(e){dt(e.name,e.config)}),lt(e),at[e]}return delete at[e],null}function ht(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return nt;if(!i(e)){if(t=ct(e))return t;e=[e]}return function(e){for(var t,r,n,i,s=0;s<e.length;){for(i=ut(e[s]).split("-"),t=i.length,r=(r=ut(e[s+1]))?r.split("-"):null;t>0;){if(n=ct(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&k(i,r,!0)>=t-1)break;t--}s++}return null}(e)}function ft(e){var t,r=e._a;return r&&-2===f(e).overflow&&(t=r[ye]<0||r[ye]>11?ye:r[ve]<1||r[ve]>Ae(r[ge],r[ye])?ve:r[be]<0||r[be]>24||24===r[be]&&(0!==r[$e]||0!==r[we]||0!==r[ke])?be:r[$e]<0||r[$e]>59?$e:r[we]<0||r[we]>59?we:r[ke]<0||r[ke]>999?ke:-1,f(e)._overflowDayOfYear&&(t<ge||t>ve)&&(t=ve),f(e)._overflowWeeks&&-1===t&&(t=Me),f(e)._overflowWeekday&&-1===t&&(t=Se),f(e).overflow=t),e}function pt(e,t,r){return null!=e?e:null!=t?t:r}function mt(e){var t,r,i,s,a=[];if(!e._d){for(i=function(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[ve]&&null==e._a[ye]&&function(e){var t,r,n,i,s,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)s=1,a=4,r=pt(t.GG,e._a[ge],Be(Dt(),1,4).year),n=pt(t.W,1),((i=pt(t.E,1))<1||i>7)&&(u=!0);else{s=e._locale._week.dow,a=e._locale._week.doy;var c=Be(Dt(),s,a);r=pt(t.gg,e._a[ge],c.year),n=pt(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+s,(t.e<0||t.e>6)&&(u=!0)):i=s}n<1||n>We(r,s,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(o=ze(r,n,i,s,a),e._a[ge]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(s=pt(e._a[ge],i[ge]),(e._dayOfYear>Oe(s)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),r=qe(s,0,e._dayOfYear),e._a[ye]=r.getUTCMonth(),e._a[ve]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[be]&&0===e._a[$e]&&0===e._a[we]&&0===e._a[ke]&&(e._nextDay=!0,e._a[be]=0),e._d=(e._useUTC?qe:function(e,t,r,n,i,s,a){var o=new Date(e,t,r,n,i,s,a);return e<100&&e>=0&&isFinite(o.getFullYear())&&o.setFullYear(e),o}).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[be]=24),e._w&&void 0!==e._w.d&&e._w.d!==e._d.getDay()&&(f(e).weekdayMismatch=!0)}}var _t=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/Z|[+-]\d\d(?::?\d\d)?/,vt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],bt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],$t=/^\/?Date\((\-?\d+)/i;function wt(e){var t,r,n,i,s,a,o=e._i,u=_t.exec(o)||gt.exec(o);if(u){for(f(e).iso=!0,t=0,r=vt.length;t<r;t++)if(vt[t][1].exec(u[1])){i=vt[t][0],n=!1!==vt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,r=bt.length;t<r;t++)if(bt[t][1].exec(u[3])){s=(u[2]||" ")+bt[t][0];break}if(null==s)return void(e._isValid=!1)}if(!n&&null!=s)return void(e._isValid=!1);if(u[4]){if(!yt.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(s||"")+(a||""),xt(e)}else e._isValid=!1}var kt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Mt(e,t,r,n,i,s){var a=[function(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}(e),Ie.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return s&&a.push(parseInt(s,10)),a}var St={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ot(e){var t=kt.exec(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e._i));if(t){var r=Mt(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function(e,t,r){if(e){var n=Ge.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(n!==i)return f(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}(t[1],r,e))return;e._a=r,e._tzm=function(e,t,r){if(e)return St[e];if(t)return 0;var n=parseInt(r,10),i=n%100,s=(n-i)/100;return 60*s+i}(t[8],t[9],t[10]),e._d=qe.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function xt(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],f(e).empty=!0;var t,r,i,s,a,o=""+e._i,u=o.length,c=0;for(i=W(e._f,e._locale).match(F)||[],t=0;t<i.length;t++)s=i[t],(r=(o.match(de(s,e))||[])[0])&&((a=o.substr(0,o.indexOf(r))).length>0&&f(e).unusedInput.push(a),o=o.slice(o.indexOf(r)+r.length),c+=r.length),q[s]?(r?f(e).empty=!1:f(e).unusedTokens.push(s),_e(s,r,e)):e._strict&&!r&&f(e).unusedTokens.push(s);f(e).charsLeftOver=u-c,o.length>0&&f(e).unusedInput.push(o),e._a[be]<=12&&!0===f(e).bigHour&&e._a[be]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[be]=function(e,t,r){var n;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):null!=e.isPM?((n=e.isPM(r))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}(e._locale,e._a[be],e._meridiem),mt(e),ft(e)}else Ot(e);else wt(e)}function Tt(e){var t=e._i,r=e._f;return e._locale=e._locale||ht(e._l),null===t||void 0===r&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new v(ft(t)):(u(t)?e._d=t:i(r)?function(e){var t,r,n,i,s;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)s=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],xt(t),p(t)&&(s+=f(t).charsLeftOver,s+=10*f(t).unusedTokens.length,f(t).score=s,(null==n||s<n)&&(n=s,r=t));d(e,r||t)}(e):r?xt(e):function(e){var t=e._i;a(t)?e._d=new Date(n.now()):u(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=$t.exec(e._i);null===t?(wt(e),!1===e._isValid&&(delete e._isValid,Ot(e),!1===e._isValid&&(delete e._isValid,n.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):i(t)?(e._a=c(t.slice(0),function(e){return parseInt(e,10)}),mt(e)):s(t)?function(e){if(!e._d){var t=R(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),mt(e)}}(e):o(t)?e._d=new Date(t):n.createFromInputFallback(e)}(e),p(e)||(e._d=null),e))}function Et(e,t,r,n,a){var o={};return!0!==r&&!1!==r||(n=r,r=void 0),(s(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||i(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=a,o._l=r,o._i=e,o._f=t,o._strict=n,function(e){var t=new v(ft(Tt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(o)}function Dt(e,t,r,n){return Et(e,t,r,n,!1)}n.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Lt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),Pt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()});function At(e,t){var r,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Dt();for(r=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r}var jt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Rt(e){var t=R(e),r=t.year||0,n=t.quarter||0,i=t.month||0,s=t.week||0,a=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Te.call(jt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,n=0;n<jt.length;++n)if(e[jt[n]]){if(r)return!1;parseFloat(e[jt[n]])!==w(e[jt[n]])&&(r=!0)}return!0}(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*o*60*60,this._days=+a+7*s,this._months=+i+3*n+12*r,this._data={},this._locale=ht(),this._bubble()}function It(e){return e instanceof Rt}function Ct(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Yt(e,t){H(e,0,0,function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+Y(~~(e/60),2)+t+Y(~~e%60,2)})}Yt("Z",":"),Yt("ZZ",""),le("Z",oe),le("ZZ",oe),pe(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=Nt(oe,e)});var Ft=/([\+\-]|\d\d)/gi;function Nt(e,t){var r=(t||"").match(e);if(null===r)return null;var n=r[r.length-1]||[],i=(n+"").match(Ft)||["-",0,0],s=60*i[1]+w(i[2]);return 0===s?0:"+"===i[0]?s:-s}function Ut(e,t){var r,i;return t._isUTC?(r=t.clone(),i=(b(e)||u(e)?e.valueOf():Dt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):Dt(e).local()}function qt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ht(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var zt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Bt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Wt(e,t){var r,n,i,s=e,a=null;return It(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(s={},t?s[t]=e:s.milliseconds=e):(a=zt.exec(e))?(r="-"===a[1]?-1:1,s={y:0,d:w(a[ve])*r,h:w(a[be])*r,m:w(a[$e])*r,s:w(a[we])*r,ms:w(Ct(1e3*a[ke]))*r}):(a=Bt.exec(e))?(r="-"===a[1]?-1:(a[1],1),s={y:Vt(a[2],r),M:Vt(a[3],r),w:Vt(a[4],r),d:Vt(a[5],r),h:Vt(a[6],r),m:Vt(a[7],r),s:Vt(a[8],r)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(i=function(e,t){var r;return e.isValid()&&t.isValid()?(t=Ut(t,e),e.isBefore(t)?r=Gt(e,t):((r=Gt(t,e)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}(Dt(s.from),Dt(s.to)),(s={}).ms=i.milliseconds,s.M=i.months),n=new Rt(s),It(e)&&l(e,"_locale")&&(n._locale=e._locale),n}function Vt(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Gt(e,t){var r={milliseconds:0,months:0};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Kt(e,t){return function(r,n){var i;return null===n||isNaN(+n)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),Jt(this,Wt(r="string"==typeof r?+r:r,n),e),this}}function Jt(e,t,r,i){var s=t._milliseconds,a=Ct(t._days),o=Ct(t._months);e.isValid()&&(i=null==i||i,o&&Ce(e,Le(e,"Month")+o*r),a&&Pe(e,"Date",Le(e,"Date")+a*r),s&&e._d.setTime(e._d.valueOf()+s*r),i&&n.updateOffset(e,a||o))}Wt.fn=Rt.prototype,Wt.invalid=function(){return Wt(NaN)};var Qt=Kt(1,"add"),Zt=Kt(-1,"subtract");function Xt(e,t){var r,n,i=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(i,"months");return t-s<0?(r=e.clone().add(i-1,"months"),n=(t-s)/(s-r)):(r=e.clone().add(i+1,"months"),n=(t-s)/(r-s)),-(i+n)||0}function er(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ht(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tr=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function rr(){return this._locale}function nr(e,t){H(0,[e,e.length],0,t)}function ir(e,t,r,n,i){var s;return null==e?Be(this,n,i).year:(s=We(e,n,i),t>s&&(t=s),function(e,t,r,n,i){var s=ze(e,t,r,n,i),a=qe(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,r,n,i))}H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),nr("gggg","weekYear"),nr("ggggg","weekYear"),nr("GGGG","isoWeekYear"),nr("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),C("weekYear",1),C("isoWeekYear",1),le("G",se),le("g",se),le("GG",Z,G),le("gg",Z,G),le("GGGG",re,J),le("gggg",re,J),le("GGGGG",ne,Q),le("ggggg",ne,Q),me(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=w(e)}),me(["gg","GG"],function(e,t,r,i){t[i]=n.parseTwoDigitYear(e)}),H("Q",0,"Qo","quarter"),A("quarter","Q"),C("quarter",7),le("Q",V),pe("Q",function(e,t){t[ye]=3*(w(e)-1)}),H("D",["DD",2],"Do","date"),A("date","D"),C("date",9),le("D",Z),le("DD",Z,G),le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),pe(["D","DD"],ve),pe("Do",function(e,t){t[ve]=w(e.match(Z)[0])});var sr=De("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),C("dayOfYear",4),le("DDD",te),le("DDDD",K),pe(["DDD","DDDD"],function(e,t,r){r._dayOfYear=w(e)}),H("m",["mm",2],0,"minute"),A("minute","m"),C("minute",14),le("m",Z),le("mm",Z,G),pe(["m","mm"],$e);var ar=De("Minutes",!1);H("s",["ss",2],0,"second"),A("second","s"),C("second",15),le("s",Z),le("ss",Z,G),pe(["s","ss"],we);var or,ur=De("Seconds",!1);for(H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),C("millisecond",16),le("S",te,V),le("SS",te,G),le("SSS",te,K),or="SSSS";or.length<=9;or+="S")le(or,ie);function cr(e,t){t[ke]=w(1e3*("0."+e))}for(or="S";or.length<=9;or+="S")pe(or,cr);var lr=De("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var dr=v.prototype;function hr(e){return e}dr.add=Qt,dr.calendar=function(e,t){var r=e||Dt(),i=Ut(r,this).startOf("day"),s=n.calendarFormat(this,i)||"sameElse",a=t&&(E(t[s])?t[s].call(this,r):t[s]);return this.format(a||this.localeData().calendar(s,this,Dt(r)))},dr.clone=function(){return new v(this)},dr.diff=function(e,t,r){var n,i,s;if(!this.isValid())return NaN;if(!(n=Ut(e,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),t=j(t)){case"year":s=Xt(this,n)/12;break;case"month":s=Xt(this,n);break;case"quarter":s=Xt(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-i)/864e5;break;case"week":s=(this-n-i)/6048e5;break;default:s=this-n}return r?s:$(s)},dr.endOf=function(e){return void 0===(e=j(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},dr.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=B(this,e);return this.localeData().postformat(t)},dr.from=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||Dt(e).isValid())?Wt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},dr.fromNow=function(e){return this.from(Dt(),e)},dr.to=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||Dt(e).isValid())?Wt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},dr.toNow=function(e){return this.to(Dt(),e)},dr.get=function(e){return E(this[e=j(e)])?this[e]():this},dr.invalidAt=function(){return f(this).overflow},dr.isAfter=function(e,t){var r=b(e)?e:Dt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=j(a(t)?"millisecond":t))?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())},dr.isBefore=function(e,t){var r=b(e)?e:Dt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=j(a(t)?"millisecond":t))?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())},dr.isBetween=function(e,t,r,n){return("("===(n=n||"()")[0]?this.isAfter(e,r):!this.isBefore(e,r))&&(")"===n[1]?this.isBefore(t,r):!this.isAfter(t,r))},dr.isSame=function(e,t){var r,n=b(e)?e:Dt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=j(t||"millisecond"))?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))},dr.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},dr.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},dr.isValid=function(){return p(this)},dr.lang=tr,dr.locale=er,dr.localeData=rr,dr.max=Pt,dr.min=Lt,dr.parsingFlags=function(){return d({},f(this))},dr.set=function(e,t){if("object"==typeof e)for(var r=function(e){var t=[];for(var r in e)t.push({unit:r,priority:I[r]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=R(e)),n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit]);else if(E(this[e=j(e)]))return this[e](t);return this},dr.startOf=function(e){switch(e=j(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},dr.subtract=Zt,dr.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},dr.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},dr.toDate=function(){return new Date(this.valueOf())},dr.toISOString=function(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?B(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):E(Date.prototype.toISOString)?this.toDate().toISOString():B(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},dr.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(r+n+"-MM-DD[T]HH:mm:ss.SSS"+i)},dr.toJSON=function(){return this.isValid()?this.toISOString():null},dr.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},dr.unix=function(){return Math.floor(this.valueOf()/1e3)},dr.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},dr.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},dr.year=Ee,dr.isLeapYear=function(){return xe(this.year())},dr.weekYear=function(e){return ir.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},dr.isoWeekYear=function(e){return ir.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},dr.quarter=dr.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},dr.month=Ye,dr.daysInMonth=function(){return Ae(this.year(),this.month())},dr.week=dr.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},dr.isoWeek=dr.isoWeeks=function(e){var t=Be(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},dr.weeksInYear=function(){var e=this.localeData()._week;return We(this.year(),e.dow,e.doy)},dr.isoWeeksInYear=function(){return We(this.year(),1,4)},dr.date=sr,dr.day=dr.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},dr.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},dr.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},dr.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},dr.hour=dr.hours=it,dr.minute=dr.minutes=ar,dr.second=dr.seconds=ur,dr.millisecond=dr.milliseconds=lr,dr.utcOffset=function(e,t,r){var i,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Nt(oe,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(i=qt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?Jt(this,Wt(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:qt(this)},dr.utc=function(e){return this.utcOffset(0,e)},dr.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(qt(this),"m")),this},dr.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Nt(ae,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},dr.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Dt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},dr.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},dr.isLocal=function(){return!!this.isValid()&&!this._isUTC},dr.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},dr.isUtc=Ht,dr.isUTC=Ht,dr.zoneAbbr=function(){return this._isUTC?"UTC":""},dr.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},dr.dates=S("dates accessor is deprecated. Use date instead.",sr),dr.months=S("months accessor is deprecated. Use month instead",Ye),dr.years=S("years accessor is deprecated. Use year instead",Ee),dr.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),dr.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=Tt(e))._a){var t=e._isUTC?h(e._a):Dt(e._a);this._isDSTShifted=this.isValid()&&k(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var fr=L.prototype;function pr(e,t,r,n){var i=ht(),s=h().set(n,t);return i[r](s,e)}function mr(e,t,r){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return pr(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=pr(e,n,r,"month");return i}function _r(e,t,r,n){"boolean"==typeof e?(o(t)&&(r=t,t=void 0),t=t||""):(r=t=e,e=!1,o(t)&&(r=t,t=void 0),t=t||"");var i,s=ht(),a=e?s._week.dow:0;if(null!=r)return pr(t,(r+a)%7,n,"day");var u=[];for(i=0;i<7;i++)u[i]=pr(t,(i+a)%7,n,"day");return u}fr.calendar=function(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return E(n)?n.call(t,r):n},fr.longDateFormat=function(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},fr.invalidDate=function(){return this._invalidDate},fr.ordinal=function(e){return this._ordinal.replace("%d",e)},fr.preparse=hr,fr.postformat=hr,fr.relativeTime=function(e,t,r,n){var i=this._relativeTime[r];return E(i)?i(e,t,r,n):i.replace(/%d/i,e)},fr.pastFuture=function(e,t){var r=this._relativeTime[e>0?"future":"past"];return E(r)?r(t):r.replace(/%s/i,t)},fr.set=function(e){var t,r;for(r in e)E(t=e[r])?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},fr.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||je).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},fr.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[je.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},fr.monthsParse=function(e,t,r){var n,i,s;if(this._monthsParseExact)return function(e,t,r){var n,i,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=h([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(i=Te.call(this._shortMonthsParse,a))?i:null:-1!==(i=Te.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Te.call(this._shortMonthsParse,a))?i:-1!==(i=Te.call(this._longMonthsParse,a))?i:null:-1!==(i=Te.call(this._longMonthsParse,a))?i:-1!==(i=Te.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=h([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}},fr.monthsRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Ue.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Ne),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},fr.monthsShortRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Ue.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Fe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},fr.week=function(e){return Be(e,this._week.dow,this._week.doy).week},fr.firstDayOfYear=function(){return this._week.doy},fr.firstDayOfWeek=function(){return this._week.dow},fr.weekdays=function(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone},fr.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},fr.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},fr.weekdaysParse=function(e,t,r){var n,i,s;if(this._weekdaysParseExact)return function(e,t,r){var n,i,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=h([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(i=Te.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Te.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Te.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Te.call(this._weekdaysParse,a))?i:-1!==(i=Te.call(this._shortWeekdaysParse,a))?i:-1!==(i=Te.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Te.call(this._shortWeekdaysParse,a))?i:-1!==(i=Te.call(this._weekdaysParse,a))?i:-1!==(i=Te.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Te.call(this._minWeekdaysParse,a))?i:-1!==(i=Te.call(this._weekdaysParse,a))?i:-1!==(i=Te.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=h([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}},fr.weekdaysRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Je),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},fr.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Qe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},fr.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},fr.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},fr.meridiem=function(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"},lt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+r}}),n.lang=S("moment.lang is deprecated. Use moment.locale instead.",lt),n.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ht);var gr=Math.abs;function yr(e,t,r,n){var i=Wt(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function vr(e){return e<0?Math.floor(e):Math.ceil(e)}function br(e){return 4800*e/146097}function $r(e){return 146097*e/4800}function wr(e){return function(){return this.as(e)}}var kr=wr("ms"),Mr=wr("s"),Sr=wr("m"),Or=wr("h"),xr=wr("d"),Tr=wr("w"),Er=wr("M"),Dr=wr("y");function Lr(e){return function(){return this.isValid()?this._data[e]:NaN}}var Pr=Lr("milliseconds"),Ar=Lr("seconds"),jr=Lr("minutes"),Rr=Lr("hours"),Ir=Lr("days"),Cr=Lr("months"),Yr=Lr("years"),Fr=Math.round,Nr={ss:44,s:45,m:45,h:22,d:26,M:11},Ur=Math.abs;function qr(e){return(e>0)-(e<0)||+e}function Hr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r=Ur(this._milliseconds)/1e3,n=Ur(this._days),i=Ur(this._months);e=$(r/60),t=$(e/60),r%=60,e%=60;var s=$(i/12),a=i%=12,o=n,u=t,c=e,l=r?r.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=d<0?"-":"",f=qr(this._months)!==qr(d)?"-":"",p=qr(this._days)!==qr(d)?"-":"",m=qr(this._milliseconds)!==qr(d)?"-":"";return h+"P"+(s?f+s+"Y":"")+(a?f+a+"M":"")+(o?p+o+"D":"")+(u||c||l?"T":"")+(u?m+u+"H":"")+(c?m+c+"M":"")+(l?m+l+"S":"")}var zr=Rt.prototype;return zr.isValid=function(){return this._isValid},zr.abs=function(){var e=this._data;return this._milliseconds=gr(this._milliseconds),this._days=gr(this._days),this._months=gr(this._months),e.milliseconds=gr(e.milliseconds),e.seconds=gr(e.seconds),e.minutes=gr(e.minutes),e.hours=gr(e.hours),e.months=gr(e.months),e.years=gr(e.years),this},zr.add=function(e,t){return yr(this,e,t,1)},zr.subtract=function(e,t){return yr(this,e,t,-1)},zr.as=function(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if("month"===(e=j(e))||"year"===e)return t=this._days+n/864e5,r=this._months+br(t),"month"===e?r:r/12;switch(t=this._days+Math.round($r(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},zr.asMilliseconds=kr,zr.asSeconds=Mr,zr.asMinutes=Sr,zr.asHours=Or,zr.asDays=xr,zr.asWeeks=Tr,zr.asMonths=Er,zr.asYears=Dr,zr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN},zr._bubble=function(){var e,t,r,n,i,s=this._milliseconds,a=this._days,o=this._months,u=this._data;return s>=0&&a>=0&&o>=0||s<=0&&a<=0&&o<=0||(s+=864e5*vr($r(o)+a),a=0,o=0),u.milliseconds=s%1e3,e=$(s/1e3),u.seconds=e%60,t=$(e/60),u.minutes=t%60,r=$(t/60),u.hours=r%24,a+=$(r/24),i=$(br(a)),o+=i,a-=vr($r(i)),n=$(o/12),o%=12,u.days=a,u.months=o,u.years=n,this},zr.clone=function(){return Wt(this)},zr.get=function(e){return e=j(e),this.isValid()?this[e+"s"]():NaN},zr.milliseconds=Pr,zr.seconds=Ar,zr.minutes=jr,zr.hours=Rr,zr.days=Ir,zr.weeks=function(){return $(this.days()/7)},zr.months=Cr,zr.years=Yr,zr.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),r=function(e,t,r){var n=Wt(e).abs(),i=Fr(n.as("s")),s=Fr(n.as("m")),a=Fr(n.as("h")),o=Fr(n.as("d")),u=Fr(n.as("M")),c=Fr(n.as("y")),l=i<=Nr.ss&&["s",i]||i<Nr.s&&["ss",i]||s<=1&&["m"]||s<Nr.m&&["mm",s]||a<=1&&["h"]||a<Nr.h&&["hh",a]||o<=1&&["d"]||o<Nr.d&&["dd",o]||u<=1&&["M"]||u<Nr.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=r,function(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}.apply(null,l)}(this,!e,t);return e&&(r=t.pastFuture(+this,r)),t.postformat(r)},zr.toISOString=Hr,zr.toString=Hr,zr.toJSON=Hr,zr.locale=er,zr.localeData=rr,zr.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Hr),zr.lang=tr,H("X",0,0,"unix"),H("x",0,0,"valueOf"),le("x",se),le("X",/[+-]?\d+(\.\d{1,3})?/),pe("X",function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))}),pe("x",function(e,t,r){r._d=new Date(w(e))}),n.version="2.19.3",function(e){t=e}(Dt),n.fn=dr,n.min=function(){return At("isBefore",[].slice.call(arguments,0))},n.max=function(){return At("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=h,n.unix=function(e){return Dt(1e3*e)},n.months=function(e,t){return mr(e,t,"months")},n.isDate=u,n.locale=lt,n.invalid=m,n.duration=Wt,n.isMoment=b,n.weekdays=function(e,t,r){return _r(e,t,r,"weekdays")},n.parseZone=function(){return Dt.apply(null,arguments).parseZone()},n.localeData=ht,n.isDuration=It,n.monthsShort=function(e,t){return mr(e,t,"monthsShort")},n.weekdaysMin=function(e,t,r){return _r(e,t,r,"weekdaysMin")},n.defineLocale=dt,n.updateLocale=function(e,t){if(null!=t){var r,n,i=st;null!=(n=ct(e))&&(i=n._config),t=D(i,t),(r=new L(t)).parentLocale=at[e],at[e]=r,lt(e)}else null!=at[e]&&(null!=at[e].parentLocale?at[e]=at[e].parentLocale:null!=at[e]&&delete at[e]);return at[e]},n.locales=function(){return O(at)},n.weekdaysShort=function(e,t,r){return _r(e,t,r,"weekdaysShort")},n.normalizeUnits=j,n.relativeTimeRounding=function(e){return void 0===e?Fr:"function"==typeof e&&(Fr=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==Nr[e]&&(void 0===t?Nr[e]:(Nr[e]=t,"s"===e&&(Nr.ss=t-1),!0))},n.calendarFormat=function(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},n.prototype=dr,n}()}).call(this,r(67)(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(107)),i=a(r(25)),s=a(r(221));function a(e){return e&&e.__esModule?e:{default:e}}const o={$is_category_active:class extends n.default{constructor(e){super(e),this.args=null}isBuilt(){return null!==this.args}build(){if(!this.data.raw_op.args||this.data.raw_op.args.length<1)throw new Error("IsCategoryActiveExpr invalid args");const e=this.data.raw_op.args[0];if(!e||!e.catName)throw new Error("IsCategoryActiveExpr invalid args, missing catName?");this.args=e}destroy(){}getExprValue(){try{return Promise.resolve(this.data.category_handler.isCategoryActive(this.args.catName))}catch(e){return i.default.error("IsCategoryActiveExpr Error:",e),Promise.reject(e)}}},$add_categories:class extends n.default{constructor(e){super(e),this.args=null,this.executed=!1}isBuilt(){return null!==this.args}build(){if(!this.data.raw_op.args||this.data.raw_op.args.length<1)throw new Error("AddCategoriesExpr invalid args");const e=this.data.raw_op.args[0];if(!e||!e.toUpdate)throw new Error("AddCategoriesExpr invalid args, missing catName?");this.args=e}destroy(){}getExprValue(){if(this.executed)return Promise.resolve(!0);try{return this.args.toUpdate.forEach(e=>{const t=this._buildCategoryFromObj(e);t&&this.data.category_handler.addCategory(t)}),this.data.category_handler.build(),this.executed=!0,Promise.resolve(!0)}catch(e){return i.default.error("IsCategoryActiveExpr Error:",e),Promise.reject(e)}}_buildCategoryFromObj(e){return e&&e.name&&e.patterns&&e.version&&e.timeRangeSecs&&e.activationData?new s.default(e.name,e.patterns,e.version,e.timeRangeSecs,e.activationData):(i.default.warn("invalid category object: ",e),null)}}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(107)),i=a(r(25)),s=r(40);function a(e){return e&&e.__esModule?e:{default:e}}const o={$activate_subtriggers:class extends n.default{constructor(e){super(e),this.parentTriggerId=null}isBuilt(){return this.parentTriggerId}build(){if(this.data&&this.data.raw_op.args){if(this.data.raw_op.args.length<1)throw new Error("ActivateSubtriggersExpr invalid args");this.parentTriggerId=this.data.raw_op.args[0]}}destroy(){}getExprValue(e){return new Promise((t,r)=>{if(e._currentTriggerLevel||(e._currentTriggerLevel=0),e._currentTriggerLevel+=1,e._currentTriggerLevel>25)return void r(new Error("trigger depth > 25"));let n=this.data.trigger_cache.getSubtriggers(this.parentTriggerId);if(n&&0!==n.length){const i=[];n.forEach(t=>{i.push(this.data.trigger_machine.run(t,e))}),Promise.all(i).then(()=>{t()}).catch(e=>{r(e)})}else this.data.be_connector.sendApiRequest("loadsubtriggers",{parent_id:this.parentTriggerId}).then(a=>{n=(n=a).filter(e=>e&&(void 0===e.user_group||(0,s.shouldKeepResource)(e.user_group))),i.default.info("ActivateSubtriggersExpr",`Loaded ${n.length} subtriggers`),"debug"===i.default.LOG_LEVEL&&i.default.logObject(n.map(e=>e.trigger_id)),this.data.trigger_cache.setSubtriggers(this.parentTriggerId,n);const o=[];n.forEach(t=>{this.data.trigger_cache.addTrigger(t),o.push(this.data.trigger_machine.run(t,e))}),Promise.all(o).then(()=>{t()}).catch(e=>{r(e)})}).catch(e=>{r(e)})})}}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(107)),i=s(r(301));function s(e){return e&&e.__esModule?e:{default:e}}const a={$activate_intent:class extends n.default{constructor(e){super(e),this.args=null}isBuilt(){return null!==this.args}build(){if(!this.data||!this.data.raw_op.args)return;if(this.data.raw_op.args.length<1)throw new Error("ActivateIntentExpr invalid args");const e=this.data.raw_op.args[0];if(!e.name||!e.durationSecs||e.durationSecs<=0)throw new Error("ActivateIntentExpr no name or durationSecs found?");this.args=e}destroy(){}getExprValue(){if(!this.data.intent_handler.isIntentActiveByName(this.args.name)){const e=new i.default(this.args.name,this.args.durationSecs);this.data.intent_handler.activateIntent(e)}return Promise.resolve()}}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(107)),i=c(r(110)),s=c(r(11)),a=c(r(25)),o=r(120),u=r(40);function c(e){return e&&e.__esModule?e:{default:e}}const l={$if_pref:class extends n.default{constructor(e){super(e),this.prefName=null,this.expectedVal=null}isBuilt(){return!(!this.prefName||!this.expectedVal)}build(){if(this.data&&this.data.raw_op.args){if(this.data.raw_op.args.length<2)throw new Error("IfPrefExpr invalid args");this.prefName=String(this.data.raw_op.args[0]),this.expectedVal=String(this.data.raw_op.args[1])}}destroy(){}getExprValue(){const e=s.default.get(this.prefName,void 0);return Promise.resolve(String(e)===this.expectedVal)}},$log:class extends n.default{isBuilt(){return!0}build(){}destroy(){}getExprValue(){return new Promise(e=>(this.data.raw_op.args&&this.data.raw_op.args.length>0&&a.default.info("log_expr",`[trigger_id: ${this.data.parent_trigger.trigger_id}]: ${this.data.raw_op.args[0]}`),e(!0)))}},$and:class extends n.default{constructor(e){super(e),this.ops=null}isBuilt(){return null!==this.ops}build(){if(!this.data.raw_op.args)throw new Error(`AndExpr invalid args: ${this.data.raw_op.args}`);if(0===this.data.raw_op.args.length)return void(this.ops=[]);const e=[];this.data.raw_op.args.forEach(t=>{e.push(this.data.exp_builder.createExp(t,this.data.parent_trigger))}),this.ops=e}destroy(){}getExprValue(e){return function e(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!r||n>=r.length?Promise.resolve(!1):r[n].evalExpr(t).then(i=>i?r.length===n+1?Promise.resolve(!0):e(t,r,n+1):Promise.resolve(!1))}(e,this.ops)}},$or:class extends n.default{constructor(e){super(e),this.ops=null}isBuilt(){return null!==this.ops}build(){if(!this.data.raw_op.args)throw new Error("OrExpr invalid args");if(0===this.data.raw_op.args.length)return void(this.ops=[]);const e=[];this.data.raw_op.args.forEach(t=>{e.push(this.data.exp_builder.createExp(t,this.data.parent_trigger))}),this.ops=e}destroy(){}getExprValue(e){return function e(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!r||n>=r.length?Promise.resolve(!1):r[n].evalExpr(t).then(i=>i?Promise.resolve(!0):r.length===n+1?Promise.resolve(!1):e(t,r,n+1))}(e,this.ops)}},$not:class extends n.default{constructor(e){super(e),this.exprToNegate=null}isBuilt(){return null!==this.exprToNegate}build(){if(!this.data.raw_op.args||0===this.data.raw_op.args.length)throw new Error("NotExpr invalid args");this.exprToNegate=this.data.exp_builder.createExp(this.data.raw_op.args[0],this.data.parent_trigger)}destroy(){}getExprValue(e){return this.exprToNegate.evalExpr(e).then(e=>Promise.resolve(!e))}},$eq:class extends n.default{constructor(e){super(e),this.lExpr=null,this.rExpr=null}isBuilt(){return this.lExpr&&this.rExpr}build(){if(!this.data.raw_op.args||this.data.raw_op.args.length<2)throw new Error("EqExpr invalid args");this.lExpr=this.data.exp_builder.createExp(this.data.raw_op.args[0],this.data.parent_trigger),this.rExpr=this.data.exp_builder.createExp(this.data.raw_op.args[1],this.data.parent_trigger)}destroy(){}getExprValue(e){return Promise.all([this.lExpr.evalExpr(e),this.rExpr.evalExpr(e)]).then(e=>Promise.resolve(e[0]===e[1]))}},$gt:class extends n.default{constructor(e){super(e),this.lExpr=null,this.rExpr=null}isBuilt(){return this.lExpr&&this.rExpr}build(){if(!this.data.raw_op.args||this.data.raw_op.args.length<2)throw new Error("GtExpr invalid args");this.lExpr=this.data.exp_builder.createExp(this.data.raw_op.args[0],this.data.parent_trigger),this.rExpr=this.data.exp_builder.createExp(this.data.raw_op.args[1],this.data.parent_trigger)}destroy(){}getExprValue(e){return Promise.all([this.lExpr.evalExpr(e),this.rExpr.evalExpr(e)]).then(e=>Promise.resolve(e[0]>e[1]))}},$lt:class extends n.default{constructor(e){super(e),this.lExpr=null,this.rExpr=null}isBuilt(){return this.lExpr&&this.rExpr}build(){if(!this.data.raw_op.args||this.data.raw_op.args.length<2)throw new Error("LtExpr invalid args");this.lExpr=this.data.exp_builder.createExp(this.data.raw_op.args[0],this.data.parent_trigger),this.rExpr=this.data.exp_builder.createExp(this.data.raw_op.args[1],this.data.parent_trigger)}destroy(){}getExprValue(e){return Promise.all([this.lExpr.evalExpr(e),this.rExpr.evalExpr(e)]).then(e=>Promise.resolve(e[0]<e[1]))}},$timestamp:class extends n.default{isBuilt(){return!0}build(){}destroy(){}getExprValue(){return Promise.resolve((0,u.timestampMS)())}},$day_hour:class extends n.default{isBuilt(){return!0}build(){}destroy(){}getExprValue(){return Promise.resolve((0,u.dayHour)())}},$week_day:class extends n.default{isBuilt(){return!0}build(){}destroy(){}getExprValue(){return Promise.resolve((0,u.weekDay)())}},$match_ga:class extends n.default{constructor(e){super(e),this.raw=null,this.ga_handler=null}isBuilt(){return null!==this.raw}build(){this.raw=this.data.raw_op.args[0],this.ga_handler=this.data.ga_handler}destroy(){}getExprValue(){return this.ga_handler.getCondition(this.raw).then(e=>this.ga_handler.getNewMatches(e.lastEventTs||0).then(t=>e.match(t)).catch(e=>a.default.error("exception in MatchGAExpr",e)))}},$geo_check:class extends n.default{constructor(e){super(e),this.args=null}isBuilt(){return null!==this.args}build(){if(!this.data.raw_op.args||this.data.raw_op.args.length<1)throw new Error("GeoCheckExpr invalid args");const e=this.data.raw_op.args[0];if(!e.main_check||"locs"!==e.main_check&&"coords"!==e.main_check)throw new Error("GeoCheckExpr invalid args for field main_check");if("locs"===e.main_check){if(!e.locs)throw new Error("GeoCheckExpr invalid args: locs is missing?")}else if(!e.coords)throw new Error("GeoCheckExpr invalid args: coords is missing?");this.args=e}destroy(){}getExprValue(){try{if(!this.data.feature_handler.isFeatureAvailable("geo"))return Promise.resolve(!1);const e=this.data.feature_handler.getFeature("geo");if("coords"===this.args.main_check)return a.default.error("We do not support coords yet"),Promise.resolve(!1);if(!e.isLocAvailable())return Promise.resolve(!1);const t=Object.keys(this.args.locs);for(let r=0;r<t.length;r+=1){const n=t[r],i=this.args.locs[n],s=Object.keys(i);for(let t=0;t<s.length;t+=1){const r=s[t],a=i[r];if(a&&0!==a.length)for(let t=0;t<a.length;t+=1){const i={country:n,city:r,zip:a[t]};if(e.isSameLocation(i))return Promise.resolve(!0)}else{const t={country:n,city:r};if(e.isSameLocation(t))return Promise.resolve(!0)}}}}catch(e){a.default.error(`GeoCheckExpr error: ${JSON.stringify(e)}`)}return Promise.resolve(!1)}},$is_feature_enabled:class extends n.default{constructor(e){super(e),this.args=null}isBuilt(){return this.args}build(){if(!this.data.raw_op.args||this.data.raw_op.args.length<1)throw new Error("IsFeatureEnabledExpr invalid args");const e=this.data.raw_op.args[0];if(!e.name)throw new Error("IsFeatureEnabledExpr invalid args: name should be present");this.args=e}destroy(){}getExprValue(){let e=!1;try{e=this.data.feature_handler.isFeatureAvailable(this.args.name)}catch(e){a.default.error("IsFeatureEnabledExpr exception: ",e)}return Promise.resolve(e)}},$pattern_match:class extends n.default{constructor(e){super(e),this.args=null,this.isHistory=null,this.expireCache=null,this.patternIndex=null}isBuilt(){return null!==this.args}build(){if(!this.data.raw_op.args||this.data.raw_op.args.length<1)throw new Error("PatternMatchExpr invalid args");const e=this.data.raw_op.args[0];if(!e.patterns||!e.patterns.pid||!e.patterns.p_list)throw new Error("PatternMatchExpr invalid args, missing patterns?");if(void 0===e.match_current)throw new Error("PatternMatchExpr invalid args, match_current argument missing?");if(this.isHistory=!1===e.match_current,!0===this.isHistory){if(!(e.min_matches_expected>0))throw new Error("PatternMatchExpr invalid args, min_matches_expected argument missing?");if(void 0===e.since_secs||void 0===e.till_secs||e.since_secs<e.till_secs)throw new Error("PatternMatchExpr invalid args, since_secs or till_secs are wrong?")}this.patternIndex=(0,o.buildSimplePatternIndex)(e.patterns.p_list),this.args=e}destroy(){}getExprValue(e){try{let t=!1;return!1===this.isHistory?t=this._matchCurrentUrl(e):!0===this.isHistory&&(t=this._matchHistory(e)),Promise.resolve(t)}catch(e){return a.default.error("PatternMatchExpr Error:",e),Promise.reject(e)}}_matchCurrentUrl(e){const t=e["#url_data"];return t?this.patternIndex.match(t.getPatternRequest()):(a.default.error("We do not have the #url_data object?"),!1)}_matchHistory(){const e={since_secs:this.args.since_secs,till_secs:this.args.till_secs};if(null!==this.expireCache&&this.args.cache_if_match_value_secs>0&&((0,u.timestampMS)()-this.expireCache)/1e3<this.args.cache_if_match_value_secs)return!0;const t=this.data.history_matcher.countMatchesWithPartialCheck(e,this.args.patterns,this.patternIndex).count>=this.args.min_matches_expected;return t&&this.args.cache_if_match_value_secs>0&&(this.expireCache=(0,u.timestampMS)()),t}},$lang_is:class extends n.default{constructor(e){super(e),this.allowedLangs=null}isBuilt(){return!!this.allowedLangs}build(){if(this.data&&this.data.raw_op.args){if(this.data.raw_op.args.length<1)throw new Error("LangExpr invalid args");this.allowedLangs=this.data.raw_op.args.map(String)}}destroy(){}getExprValue(){const e=i.default.PLATFORM_LANGUAGE;return this.allowedLangs.indexOf(e)<0?Promise.resolve(!1):Promise.resolve(!0)}}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(107));t.default=class extends n.default{constructor(e,t){super(e),this.val=t}isBuilt(){return!0}build(){}destroy(){}getExprValue(){return Promise.resolve(this.val)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(107));t.default=class extends n.default{constructor(e,t){super(e),this.ctxName=t}isBuilt(){return!0}build(){}destroy(){}getExprValue(e){return Promise.resolve(e[this.ctxName])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(25)),i=d(r(789)),s=d(r(788)),a=d(r(787)),o=d(r(786)),u=d(r(785)),c=d(r(784)),l=d(r(782));function d(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.buildMap={value:{},context:{},ops:{}},this.globObjs=e,[a.default,o.default,u.default,c.default,l.default].forEach(e=>{Object.keys(e).forEach(t=>{this.buildMap.ops[t]=e[t],this.registerOpsBuilder(t,e[t])})})}destroy(){}registerOpsBuilder(e,t){this.buildMap.ops[e]=t}createExp(e,t){if(void 0===e||null===e){const e={exp_builder:this,parent_trigger:t};return new s.default(e,!0)}let r=null;if("object"==typeof e)r=this._buildOpExpr(e,t);else{const n={exp_builder:this,parent_trigger:t};r="string"==typeof e&&e.length>0&&"#"===e[0]?new i.default(n,e):new s.default(n,e)}if(null===r||void 0===r)throw new Error(`createExp: we cannot build the operation ${e}`);return r}_buildOpExpr(e,t){if(!e||0===e.length)return null;const r=e.slice(),i=r.shift();if(!this.buildMap.ops[i])return n.default.warn(`_buildOpExpr: we don't have the operation with name ${i}`),null;let s=[];r.length>0&&(s=r.shift());let a=0;r.length>0&&(a=r.shift());const o={raw_op:{op_name:i,args:s,ttl:a},parent_trigger:t,exp_builder:this,regex_cache:this.globObjs.regex_cache,trigger_cache:this.globObjs.trigger_cache,trigger_machine:this.globObjs.trigger_machine,event_handler:this.globObjs.event_handler,trigger_machine_executor:this.globObjs.trigger_machine_executor,expression_cache:this.globObjs.expression_cache,feature_handler:this.globObjs.feature_handler,intent_handler:this.globObjs.intent_handler,be_connector:this.globObjs.be_connector,history_matcher:this.globObjs.history_matcher,category_handler:this.globObjs.category_handler,offers_status_handler:this.globObjs.offers_status_handler,ga_handler:this.globObjs.ga_handler};return new(0,this.buildMap.ops[i])(o)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(11)),i=c(r(22)),s=c(r(790)),a=c(r(25)),o=c(r(781)),u=c(r(780));function c(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.globObjs=e,this.globObjs.trigger_machine=this,this._onTriggerDestroy=this._onTriggerDestroy.bind(this),this.globObjs.trigger_cache=new u.default(this._onTriggerDestroy),this.globObjs.expression_cache=new o.default,this.expressionBuilder=new s.default(this.globObjs),this.triggersRoot=i.default.settings["triggers-root"]||"root",n.default.get("offersTriggerRootOverride")&&(this.triggersRoot=n.default.get("offersTriggerRootOverride")),this.rootTrigger={parent_trigger_ids:[],trigger_id:this.triggersRoot,ttl:3600,condition:null,actions:[["$activate_subtriggers",[this.triggersRoot]]]}}getTriggerByID(e){return this.globObjs.trigger_cache.getTrigger(e)}runRoot(e){return this.globObjs.trigger_cache.getTrigger(this.triggersRoot)||this.globObjs.trigger_cache.addTrigger(this.rootTrigger),this.run(this.rootTrigger,e)}run(e,t){if(!e||!t)return a.default.warn("run: Invalid trigger or context"),Promise.reject(!1);void 0===e.lastRunPass&&(e.lastRunPass=-1);const r=t["#currentPass"];return e.lastRunPass!==r?(e.lastRunPass=r,e.built_actions&&e.built_conds||this._buildTriggerData(e)?this._executeExpression(e.built_conds,t).then(r=>{if(r&&e.built_actions){const r=[];return e.built_actions.forEach(e=>{r.push(this._executeExpression(e,t))}),Promise.all(r).then(()=>Promise.resolve()).catch(e=>Promise.reject(e))}return Promise.resolve()}).catch(e=>Promise.reject(e)):(a.default.warn(`run: We couldnt build the trigger: ${JSON.stringify(e.trigger_id)}`),Promise.reject(!1))):Promise.resolve(!0)}_buildTriggerData(e){if(!e)return!1;if(e.built_conds||e.built_actions)return!0;try{e.built_conds=this.expressionBuilder.createExp(e.condition,e);const t=[];e.actions.forEach(r=>{t.push(this.expressionBuilder.createExp(r,e))}),e.built_actions=t}catch(e){return a.default.error(`_buildTriggerData: something happened building the trigger: ${e}`),!1}return!0}_executeExpression(e,t){return e.evalExpr(t)}_onTriggerDestroy(e){e&&(e.built_conds&&(e.built_conds.destroy(),e.built_conds=null),e.built_actions&&e.built_actions.length>0&&(e.built_actions.forEach(e=>{e&&e.destroy()}),e.built_actions=null))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(302)),i=a(r(25)),s=a(r(791));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.globObjs=e,this.globObjs.trigger_machine_executor=this,this._processEvent=this._processEvent.bind(this),this.evtQueue=new n.default("trigger-machine-queue",this._processEvent),this.triggerMachine=new s.default(this.globObjs),this.processWatchReqCallback=this.processWatchReqCallback.bind(this),this.runCount=0}destroy(){}processUrlChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"url";return this.evtQueue.push({evt_type:t,evt_data:e})}processWatchReqCallback(e,t){if(!(e&&e.url_data&&t&&t.trigger_id))return void i.default.warn("processWatchReqCallback: invalid args");if(!this.triggerMachine.getTriggerByID(t.trigger_id))return;const r={trigger_id:t.trigger_id,url_data:e.url_data};this.processUrlChange(r,"req")}_processEvent(e){if(!e||!e.evt_data)return Promise.resolve(!1);const t=e.evt_data;this.runCount+=1;try{const e={"#url":t.url_data.getRawUrl(),"#domain":t.url_data.getDomain(),"#url_data":t.url_data,"#referrer":t.url_data.getReferrerName(),"#currentPass":this.runCount};let r=null;return t.trigger_id&&(r=this.triggerMachine.getTriggerByID(t.trigger_id)),i.default.info(`processing new event for url: ${t.url_data.getNormalizedUrl()}`),r?this.triggerMachine.run(r,e):this.triggerMachine.runRoot(e)}catch(e){i.default.error(`_processEvents: something wrong happened: ${e}`)}return Promise.resolve(!1)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMinuteTimestamp=t.getHpnTimeStamp=t.getGID=t.isDeveloper=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11));t.isDeveloper=(()=>n.default.get("developer",!1)||n.default.get("offersDevFlag",!1)),t.getGID=(()=>n.default.getObject("anolysisGID")),t.getHpnTimeStamp=(()=>n.default.get("config_ts","19700101")),t.getMinuteTimestamp=(()=>Math.floor(Date.now()/1e3/60))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(r(25)),i=h(r(47)),s=r(55),a=h(r(88)),o=h(r(22)),u=h(r(222)),c=h(r(145)),l=r(40),d=r(793);function h(e){return e&&e.__esModule?e:{default:e}}const f="offers-signals";function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=e[t];e[t]=n?n+r:r}function m(e,t,r){return{action:a.default.SIGNALS_HPN_BE_ACTION,signal_id:e,timestamp:(0,d.getHpnTimeStamp)(),payload:{v:a.default.SIGNALS_VERSION,ex_v:o.default.EXTENSION_VERSION,is_developer:(0,d.isDeveloper)(),gid:(0,d.getGID)(),type:t,sent_ts:(0,d.getMinuteTimestamp)(),data:r}}}t.default=class{constructor(e,t){this.db=new u.default(e,n.default,"doc_data"),t||(t={httpPost:s.httpPost}),this.sender=t,this.sigMap={},this.sigBuilder={campaign:this._sigBuilderCampaign.bind(this),action:this._sigBuilderAction.bind(this)},this.sigsToSend={},this.signalSendingRetries={},this.dbDirty=!1,this._loadPersistenceData(),this.sendIntervalTimer=null,this._startSendSignalsLoop(a.default.SIGNALS_OFFERS_FREQ_SECS);const r=this;a.default.SIGNALS_LOAD_FROM_DB&&(this.saveInterval=(0,c.default)(()=>{r.dbDirty&&r._savePersistenceData()},1e3*a.default.SIGNALS_AUTOSAVE_FREQ_SECS))}_isMaximumNumRetriesReached(e,t){return e in this.signalSendingRetries&&t in this.signalSendingRetries[e]&&this.signalSendingRetries[e][t]>=a.default.MAX_RETRIES}_removeNumRetriesRecord(e,t){e in this.signalSendingRetries&&t in this.signalSendingRetries[e]&&delete this.signalSendingRetries[e][t]}_increaseNumRetriesRecord(e,t){e in this.signalSendingRetries?t in this.signalSendingRetries[e]?this.signalSendingRetries[e][t]+=1:this.signalSendingRetries[e][t]=1:this.signalSendingRetries[e]={[t]:1}}destroy(){this._savePersistenceData(),this.sendIntervalTimer&&(this.sendIntervalTimer.stop(),this.sendIntervalTimer=null),this.saveInterval&&(this.saveInterval.stop(),this.saveInterval=null)}savePersistenceData(){return this._savePersistenceData()}setCampaignSignal(e,t,r,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(!(e&&t&&r&&i))return n.default.warn(`setCampaignSignal: invalid arguments?: - cid: ${e} - oid: ${t}\n                  - origID: ${r} - sid: ${i}`),!1;const a=e,o=this._getOrCreateSignal("campaign",a);if(!o)return n.default.error(`setCampaignSignal: cannot create or get campaign signal: ${a}`),!1;const u=o.data;u.ucid||(u.ucid=(0,l.generateUUID)());let c=u.offers;c||(u.offers={},c=u.offers);let d=c[t];d||(c[t]={created_ts:Date.now(),origins:{}},d=c[t]);const h=d.origins;let f=h[r];return f||(h[r]={},f=h[r]),p(f,i,s),this._markSignalAsModified("campaign",a),n.default.info(`setCampaignSignal: new signal added: ${e} - ${t} - ${r} - ${i} - +${s}`),!0}removeCampaignSignals(e){e?this.sigMap.campaign&&this.sigMap.campaign[e]?(n.default.info("Removing signals for cid: ",e),delete this.sigMap.campaign[e],this.dbDirty=!0,this._removeFromSigsToSend("campaign",e)):n.default.info("no signal found for cid",e):n.default.error("invalid cid or oid",e)}sendCampaignSignalNow(e){this._forceSignalDelivery("campaign",e)}setActionSignal(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e||!t)return n.default.warn(`setActionSignal: invalid arguments?: ${e} - ${t}`),!1;const i=t,s=this._getOrCreateSignal("action",i);if(!s)return n.default.error(`setActionSignal: cannot create or get action signal: ${i}`),!1;const a=s.data;a.uuid||(a.uuid=(0,l.generateUUID)());let o=a.actions;return o||(a.actions={},o=a.actions),p(o,e,r),this._markSignalAsModified("action",i),n.default.info(`setActionSignal: new signal added: ${t} - ${e} - +${r}`),!0}flush(){return this._sendSignalsToBE()}_createSignal(e){return{created_ts:Date.now(),modified_ts:Date.now(),seq:0,be_sync:!1,data:e}}_markSignalAsModified(e,t){if(!e||!t)return void n.default.warn("_markSignalAsModified: invalid args");const r=this.sigMap[e];if(!r)return void n.default.warn("_markSignalAsModified: invalid signal? cannot be updated");const i=r[t];i?(i.modified_ts=Date.now(),i.be_sync=!1,this.dbDirty=!0,this._addSignalToBeSent(e,t)):n.default.warn("_markSignalAsModified: signal is null, cannot be updated")}_getOrCreateSignal(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return n.default.warn("_getOrCreateSignal: invalid args"),null;let i=this.sigMap[e];i||(this.sigMap[e]={},i=this.sigMap[e]);let s=i[t];return s||(n.default.info(`_setSignalData: creating new signal in ${e} - ${t}`),i[t]=this._createSignal(r),s=i[t]),s}_getSignalInfo(e,t){if(!e||!t)return n.default.warn("getSignalData: sigType or sigKey null?"),null;const r=this.sigMap[e];return r?r[t]:null}_addSignalToBeSent(e,t){let r=this.sigsToSend[e];r||(this.sigsToSend[e]=new Set,r=this.sigsToSend[e]),r.add(t)}_sendSignalsToBE(){n.default.info("SENDING SIGNALSS TO BE!!!");const e=this;try{const t=Object.keys(e.sigsToSend),r=t.length;t.forEach(t=>{const s=[...e.sigsToSend[t]];Object.keys(s).forEach(o=>{const u=s[o];if(!e._isMaximumNumRetriesReached(t,u))try{const s=e._getSignalInfo(t,u);if(!s||!s.data)return void n.default.error(`we have a signal on the queue but\n                            the signal was removed?: ${t} - ${u} -\n                            ${JSON.stringify(e.sigMap)}`);if(s.be_sync)return;const o=e.sigBuilder[t];if(!o)return void n.default.error(`we dont have a builder for the sigtype: ${t}`);const c=o(u,s);if(!c)return void n.default.error("something happened building the signal. ",JSON.stringify(s));const l=m(u,t,c),h=JSON.stringify(l);e.sender.httpPost(a.default.SIGNALS_HPN_BE_ADDR,function(){n.default.info("sendSignalsToBE: hpn signal sent");const t={type:"offers_monitor",is_developer:(0,d.isDeveloper)(),batch_total:r,msg_delivered:!0};i.default.telemetry(t),e._removeFromSigsToSend(this.bindedST,this.bindedSID),e._removeNumRetriesRecord(this.bindedST,this.bindedSID)}.bind({bindedST:t,bindedSID:u}),h,function(t){n.default.error("sendSignalsToBE: error sending signal to hpn: ",t);const s={type:"offers_monitor",is_developer:(0,d.isDeveloper)(),batch_total:r,msg_delivered:!1};i.default.telemetry(s),e._increaseNumRetriesRecord(this.bindedST,this.bindedSID)}.bind({bindedST:t,bindedSID:u})),n.default.info("sendSignalsToBE: hpn: ",h)}catch(r){n.default.error("send one signal: something bad happened: ",r),e._removeFromSigsToSend(t,u)}})})}catch(t){n.default.error("sendSignalsToBE: something bad happened: ",t),e.sigsToSend={}}return!0}_forceSignalDelivery(e,t){const r=this._getSignalInfo(e,t);if(!r||!r.data)return void n.default.error(`we have a signal on the queue but\n                    the signal was removed?: ${e} - ${t} -\n                    ${JSON.stringify(this.sigMap)}`);const s=this.sigBuilder[e];if(!s)return void n.default.error(`we dont have a builder for the sigtype: ${e}`);const o=s(t,r);if(!o)return void n.default.error("something happened building the signal. ",JSON.stringify(r));const u=(0,d.isDeveloper)(),c=m(t,e,o),l=JSON.stringify(c);n.default.debug("FORCE SIGNAL BEING SENT TO BE!!!"),this.sender.httpPost(a.default.SIGNALS_HPN_BE_ADDR,()=>{n.default.info("sendSignalsToBE: hpn signal sent");const e={type:"offers_monitor",is_developer:u,batch_total:1,msg_delivered:!0};i.default.telemetry(e)},l,e=>{n.default.error("sendSignalsToBE: error sending signal to hpn: ",e);const t={type:"offers_monitor",is_developer:u,batch_total:1,msg_delivered:!1};i.default.telemetry(t)}),n.default.info("force signal sent to BE (sendSignalsToBE): hpn: ",l)}_removeFromSigsToSend(e,t){const r=this._getSignalInfo(e,t);r&&(r.be_sync=!0),this.dbDirty=!0,e in this.sigsToSend&&(this.sigsToSend[e].delete(t),0===this.sigsToSend[e].size&&delete this.sigsToSend[e])}_startSendSignalsLoop(e){this.sendIntervalTimer=(0,c.default)(()=>{Object.keys(this.sigsToSend).length>0&&this._sendSignalsToBE()},1e3*e)}_savePersistenceData(){return a.default.SIGNALS_LOAD_FROM_DB?this.dbDirty?new Promise(e=>this.db.upsert(f,{sig_map:this.sigMap}).then(()=>{this.dbDirty=!1,e(!0)})):Promise.resolve(!0):(n.default.info("_savePersistenceData: skipping the saving"),Promise.resolve(!0))}_loadPersistenceData(){if(!a.default.SIGNALS_LOAD_FROM_DB)return n.default.info("skipping the loading"),Promise.resolve(!0);const e=this;return e.db.get(f).then(t=>{if(!t||!t.sig_map)return void n.default.error("something went wrong loading the data?");e.sigMap=t.sig_map,e.dbDirty=!1;const r=Date.now();Object.keys(e.sigMap).forEach(t=>{const i=e.sigMap[t];Object.keys(i).forEach(s=>{const o=e._getSignalInfo(t,s);if(o)return(r-o.modified_ts)/1e3>=a.default.SIGNALS_OFFERS_EXPIRATION_SECS?(n.default.info(`removing signal: ${s} - data: ${JSON.stringify(o)}`),void delete i[s]):void(o.be_sync||(e._addSignalToBeSent(t,s),n.default.info(`signal ${s} added to be sent to BE`)))})}),Promise.resolve(!0)}).catch(e=>{n.default.error("error loading the storage data...:",e),Promise.resolve(!1)})}_sigBuilderCampaign(e,t){if(!e||!t||!t.data)return n.default.warn("_sigBuilderCampaign: invalid args"),null;const r=t.data,i={c_id:e,c_data:{seq:t.seq,created_ts:t.created_ts,ucid:r.ucid,offers:[]}};t.seq+=1;const s=i.c_data.offers;return Object.keys(r.offers).forEach(e=>{const t=r.offers[e],n=t.origins,i={offer_id:e,created_ts:t.created_ts,offer_data:[]},a=i.offer_data;Object.keys(n).forEach(e=>{const t={origin:e,origin_data:n[e]};a.push(t)}),s.push(i)}),i}_sigBuilderAction(e,t){if(!e||!t||!t.data)return n.default.warn("_sigBuilderAction: invalid args"),null;const r=t.data,i={o_id:e,o_data:{seq:t.seq,created_ts:t.created_ts,uuid:r.uuid,actions:r.actions}};return t.seq+=1,i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPatternIndex=t.SimplePatternIndex=void 0;var n=r(160);class i{constructor(e){this.index=new n.ReverseIndex(e,e=>e.getTokens()),this.tokens=(0,n.compactTokens)(new Uint32Array([...this.index.index.keys()]))}match(){throw new Error("should be implemented by the inherited class ")}}t.SimplePatternIndex=class extends i{match(e){let t=!1;return this.index.iterMatchingFilters(e.tokens,r=>!(t=(0,n.matchNetworkFilter)(r,e))),t}};t.MultiPatternIndex=class extends i{match(e){const t=new Set;return this.index.iterMatchingFilters(e.tokens,r=>{const i=r.groupID;return!t.has(i)&&(0,n.matchNetworkFilter)(r,e)&&t.add(i),!0}),t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(25)),i=u(r(32)),s=r(82),a=u(r(223)),o=u(r(31));function u(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){this.urlChangeCbs=new Map,this.httpReqCbs=new Map,this.onTabLocChanged=this.onTabLocChanged.bind(this),i.default.sub("content:location-change",this.onTabLocChanged),this.webRequestPipeline=o.default.module("webrequest-pipeline"),this.webrequestPipelineCallback=this.webrequestPipelineCallback.bind(this),this.requestListenerAdded=!1,this.notAllowedUrls=RegExp("(admin|login|logout|^https?://localhost|^https?://(\\d+\\.){3}\\d+|\\.(dev|foo)\\b)")}destroy(){i.default.un_sub("content:location-change",this.onTabLocChanged),this._unsubscribeFromWebrequestPipeline()}subscribeUrlChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.urlChangeCbs.set(e,t)}unsubscribeUrlChange(e){this.urlChangeCbs.delete(e)}subscribeHttpReq(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.httpReqCbs.has(t)||this.httpReqCbs.set(t,new Map),this._subscribeToWebrequestPipeline(),!this.httpReqCbs.get(t).has(e)&&(this.httpReqCbs.get(t).set(e,r),!0)}unsubscribeHttpReq(e,t){this.httpReqCbs.has(t)&&(this.httpReqCbs.get(t).delete(e),0===this.httpReqCbs.get(t).size&&this.httpReqCbs.delete(t),0===this._countWebrequestSubscribers()&&this._unsubscribeFromWebrequestPipeline())}isHttpReqDomainSubscribed(e,t){return this.httpReqCbs.has(t)&&this.httpReqCbs.get(t).has(e)}onTabLocChanged(e){n.default.info("onTabLocChanged:",e.url),e.isPrivate?n.default.info("window is private skipping: onTabLocChanged"):e.isSameDocument&&e.url===e.triggeringUrl?n.default.info("document reload skipping: onTabLocChanged",e.url):e.url&&0!==e.url.length&&this.lastUrl!==e.url&&(this.lastUrl=e.url,this.onLocationChangeHandler(e.url,e.referrer))}onLocationChangeHandler(e,t){if(!e||!e.startsWith("http://")&&!e.startsWith("https://")||this.notAllowedUrls.test(e))return;let r=null;t&&(r=(0,s.getDetailsFromUrl)(t).name);const i=new a.default(e,r);try{this._publish(this.urlChangeCbs,i)}catch(e){n.default.error("Exception catched when processing a new event: ",e)}}webrequestPipelineCallback(e){const t=e.url;if(!t||!t.startsWith("http://")&&!t.startsWith("https://")||e.isPrivate||200!==e.statusCode)return;const r=new a.default(t),n=r.getDomain();this.httpReqCbs.has(n)&&this._publish(this.httpReqCbs.get(n),{reqObj:e,url_data:r})}_publish(e,t){e.forEach((e,r)=>{setTimeout(()=>{try{r(t,e)}catch(e){n.default.error("Error on publishing an event:",e)}},0)})}_subscribeToWebrequestPipeline(){this.requestListenerAdded||(this.requestListenerAdded=!0,this.webRequestPipeline.action("addPipelineStep","onCompleted",{name:"offers-evt-handler",spec:"collect",fn:this.webrequestPipelineCallback}))}_unsubscribeFromWebrequestPipeline(){this.requestListenerAdded&&(this.requestListenerAdded=!1,this.webRequestPipeline.action("removePipelineStep","onCompleted","offers-evt-handler"))}_countWebrequestSubscribers(){let e=0;return this.httpReqCbs.forEach(t=>{e+=t.size}),e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=M(r(25)),i=M(r(11)),s=M(r(32)),a=M(r(22)),o=M(r(78)),u=r(88),c=M(u),l=M(r(796)),d=M(r(794)),h=M(r(409)),f=M(r(792)),p=M(r(779)),m=M(r(775)),_=M(r(772)),g=M(r(753)),y=M(r(752)),v=M(r(751)),b=M(r(746)),$=M(r(745)),w=M(r(223)),k=M(r(159));function M(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.default)({requiresServices:["cliqz-config"],init(){if(!i.default.get("offers2FeatureEnabled",!0)||!i.default.get("offers2UserEnabled",!0))return this.initialized=!1,Promise.resolve();c.default.IS_DEV_MODE=i.default.get("offersDevFlag",!1),c.default.IS_DEV_MODE&&(c.default.LOAD_OFFERS_STORAGE_DATA=!1,c.default.SIGNALS_LOAD_FROM_DB=i.default.get("offersLoadSignalsFromDB",!1),c.default.LOAD_OFFERS_STORAGE_DATA=i.default.get("offersSaveStorage",!1),c.default.SEND_SIG_OP_SHOULD_LOAD=!1),i.default.get("offersTelemetryFreq")&&(c.default.SIGNALS_OFFERS_FREQ_SECS=i.default.get("offersTelemetryFreq")),i.default.get("offersOverrideTimeout")&&(c.default.OFFERS_OVERRIDE_TIMEOUT=i.default.get("offersOverrideTimeout")),n.default.info(`\n\n\n      ------------------------------------------------------------------------\n                                  NEW SESSION STARTED\n      Version: ${c.default.CURRENT_VERSION}\n      timestamp: ${Date.now()}\n      OffersConfigs.LOG_LEVEL: ${c.default.LOG_LEVEL}\n      dev_flag: ${i.default.get("offersDevFlag",!1)}\n      triggersBE: ${c.default.BACKEND_URL}\n      offersTelemetryFreq: ${c.default.SIGNALS_OFFERS_FREQ_SECS}\n      '------------------------------------------------------------------------\n`),this.db=new h.default("cliqz-offers"),this.backendConnector=new g.default,this.eventHandler=new l.default,this.onUrlChange=this.onUrlChange.bind(this),this.eventHandler.subscribeUrlChange(this.onUrlChange),this.signalsHandler=new d.default(this.db),this.featureHandler=new p.default;const e=this.featureHandler.getFeature("history");return this.historyMatcher=new y.default(e),this.registeredRealEstates=new Map,this.intentHandler=new m.default,this.intentHandler.init(),this.categoryHandler=new v.default(e,this.db),this.categoryFetcher=new b.default(this.backendConnector,this.categoryHandler,this.db),this.categoryHandler.loadPersistentData().then(()=>this.categoryFetcher.init()),this.offersHandler=new _.default({intentHandler:this.intentHandler,backendConnector:this.backendConnector,presentRealEstates:this.registeredRealEstates,historyMatcher:this.historyMatcher,featuresHandler:this.featureHandler,sigHandler:this.signalsHandler,eventHandler:this.eventHandler,categoryHandler:this.categoryHandler,db:this.db}),this.offersAPI=this.offersHandler.offersAPI,this.gaHandler=new $.default,this.globObjects={db:this.db,feature_handler:this.featureHandler,intent_handler:this.intentHandler,be_connector:this.backendConnector,history_matcher:this.historyMatcher,category_handler:this.categoryHandler,offers_status_handler:this.offersHandler.offerStatus,ga_handler:this.gaHandler},this.triggerMachineExecutor=new f.default(this.globObjects),this.initialized=!0,s.default.pub("offers-re-registration",{type:"broadcast"}),this.gaHandler.init()},unload(){this.softUnload()},softUnload(){!1!==this.initialized&&(this.triggerMachineExecutor&&(this.triggerMachineExecutor.destroy(),this.triggerMachineExecutor=null),this.globObjects&&(this.globObjects=null),this.signalsHandler&&(this.signalsHandler.destroy(),this.signalsHandler=null),this.eventHandler&&(this.eventHandler.destroy(),this.eventHandler=null),this.featureHandler&&(this.featureHandler.unload(),this.featureHandler=null),this.categoryFetcher&&(this.categoryFetcher.unload(),this.categoryFetcher=null),this.initialized=!1)},start(){},beforeBrowserShutdown(){!1!==this.initialized&&(n.default.info("unloading background"),this.triggerMachineExecutor&&(this.triggerMachineExecutor.destroy(),this.triggerMachineExecutor=null),this.signalsHandler&&this.signalsHandler.savePersistenceData(),n.default.info("background script unloaded"))},onUrlChange(e){if(!e||!this.triggerMachineExecutor)return;const t=this.categoryHandler.newUrlEvent(e.getPatternRequest());e.setActivatedCategoriesIDs(t);const r={url_data:e};this.triggerMachineExecutor.processUrlChange(r).then(()=>this.offersHandler.urlChangedEvent(e))},configureFlags(e){const t=new Set(["offers2UserEnabled","offers2FeatureEnabled","offersLogsEnabled","offersDevFlag","offersLoadSignalsFromDB","offersSaveStorage","triggersBE","offersTelemetryFreq","offersOverrideTimeout","showConsoleLogs","offersInstallInfo","developer","config_location"]);Object.keys(e).forEach(r=>{const s=e[r];if(t.has(r))switch(n.default.debug(`Setting offers pref ${r} with vaue: ${s}`),r){case"offersInstallInfo":i.default.set(r,`${a.default.EXTENSION_VERSION}|${s}`);break;default:i.default.set(r,s)}else n.default.debug(`The offers pref with name ${r} is not valid in offers`)})},events:{"offers-recv-ch":function(e){this.offersAPI&&this.offersAPI.processRealEstateMessage(e)},prefchange:function(e){if((0,u.confOnPrefChange)(e),"offers2UserEnabled"!==e)return;const t=i.default.get("offers2UserEnabled",!0);i.default.set("modules.offers-cc.enabled",t),i.default.set("modules.browser-panel.enabled",t),t?this.init():this.softUnload()}},actions:{getStoredOffers(e){return this.offersAPI?this.offersAPI.getStoredOffers(e):[]},createExternalOffer(e){return!!this.offersAPI&&this.offersAPI.createExternalOffer(e)},hasExternalOffer(e){return!!this.offersAPI&&this.offersAPI.hasExternalOffer(e)},processRealEstateMessage(e){this.offersAPI&&this.offersAPI.processRealEstateMessage(e)},registerRealEstate(e){let t=e.realEstateID;this.registeredRealEstates&&this.registeredRealEstates.set(t,!0)},unregisterRealEstate(e){let t=e.realEstateID;this.registeredRealEstates&&this.registeredRealEstates.delete(t)},activateCouponDetectionOnUrl(e){if(this.offersHandler){const t=new w.default(e),r=this.offersHandler.shouldActivateOfferForUrl(t)||{activate:!1};return r.url=e,r}return{url:e,activate:!1}},couponFormUsed(e){this.offersHandler&&(e.urlData=new w.default(e.url),this.offersHandler.couponFormUsed(e))},setConfiguration(e){this.configureFlags(e)},getActionID:()=>k.default,flushSignals(){this.signalsHandler&&this.signalsHandler.flush()}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(797)),i=s(r(738));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{init(){}unload(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={init(){},unload(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(800)),i=s(r(799));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{init(){}unload(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSensitiveOriginHeader=a,t.installFetchSanitizer=function(e){e("onBeforeSendHeaders",{name:"global.sanitizeFetchRequest",spec:"blocking",fn:(e,t)=>{const r=e.getRequestHeader("origin");r&&a(r)&&t.modifyHeader("origin","")}})};var n=r(52);const i=`moz-extension://${n.extensionUuid}`,s=`chrome-extension://${n.extensionUuid}`;function a(e){return e===i||e===s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(428)),i=o(r(427)),s=o(r(24)),a=r(61);function o(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){this.tabs={},this.windows={},this.onTabCreated=this.onTabCreated.bind(this),this.onTabUpdated=this.onTabUpdated.bind(this),this.onTabRemoved=this.onTabRemoved.bind(this),this.onWindowCreated=this.onWindowCreated.bind(this),this.onWindowRemoved=this.onWindowRemoved.bind(this)}init(){n.default.onCreated.addListener(this.onTabCreated),n.default.onUpdated.addListener(this.onTabUpdated),n.default.onRemoved.addListener(this.onTabRemoved),i.default&&(i.default.onCreated.addListener(this.onWindowCreated),i.default.onRemoved.addListener(this.onWindowRemoved))}unload(){n.default.onCreated.removeListener(this.onTabCreated),n.default.onUpdated.removeListener(this.onTabUpdated),n.default.onRemoved.removeListener(this.onTabRemoved),i.default&&(i.default.onCreated.removeListener(this.onWindowCreated),i.default.onRemoved.removeListener(this.onWindowRemoved))}onFullPage(e){let t=e.tabId,r=e.url,n=e.isPrivate,i=e.requestId;void 0===this.tabs[t]&&(this.tabs[t]={url:r,isPrivate:n}),this.tabs[t].lastRequestId=i}isRedirect(e){return!("main_frame"!==e.type||-1!==e.parentFrameId||!e.tabId||void 0===this.tabs[e.tabId]||e.requestId!==this.tabs[e.tabId].lastRequestId)}getWindowStatus(e){let t=null;return e&&(this.windows[e]?t=this.windows[e].isPrivate:a.chrome.windows.get(e,e=>{this.windows[e.id]={isPrivate:e.incognito}})),t}onTabCreated(e){s.default.log("add new tab",e.id),e.id>-1&&(this.tabs[e.id]={url:e.url,isPrivate:e.incognito})}onTabUpdated(e,t,r){s.default.log("update tab",e),e>-1&&r.url&&(this.tabs[e]?(this.tabs[e].url=r.url,this.tabs[e].isPrivate=r.incognito):this.tabs[e]={url:r.url,isPrivate:r.incognito},s.default.log("tab updated",e,r.url)),s.default.log(this.tabs)}onTabRemoved(e){e>-1&&delete this.tabs[e]}onWindowCreated(e){this.windows[e.id]={isPrivate:e.incognito}}onWindowRemoved(e){delete this.windows[e]}getSourceURL(e){if("main_frame"===e.type&&-1===e.parentFrameId)return e.url;const t=e.tabId;return t>-1&&t in this.tabs?this.tabs[t].url:(-1!==t&&s.default.log(t,this.tabs,"Cannot locate tabId"),null)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(91);const i={other:1,script:2,image:3,stylesheet:4,object:5,main_frame:6,sub_frame:7,xbl:9,ping:10,xmlhttprequest:11,object_subrequest:12,xml_dtd:13,font:14,media:15,websocket:16,csp_report:17,xslt:18,beacon:19,imageset:21,web_manifest:22},s=Object.keys(i).reduce((e,t)=>Object.assign(e,{[i[t]]:t}),{});function a(e){const t=new Map;for(let r=0;r<e.length;r+=1){const n=e[r];t.set(n.name.toLowerCase(),n.value)}return t}class o{constructor(e){this.requestId=e.requestId,this.timeStamp=e.timeStamp,this.method=e.method,this.ip=e.ip,this.error=e.error,this.proxyInfo=e.proxyInfo,this.frameId=e.frameId,this.parentFrameId=e.parentFrameId,this.tabId=e.tabId,this.url=e.url,this._urlParts=null,this.originUrl=e.originUrl,this._originUrlParts=null,this.sourceUrl=e.sourceUrl,this._sourceUrlParts=null,this.trigger=e.trigger||e.originUrl,this.type=e.type,"string"==typeof e.type?this.typeInt=i[e.type]:(this.typeInt=this.type,this.type=s[e.type]),this.requestHeaders=e.requestHeaders,this._requestHeadersMap=null,this.responseHeaders=e.responseHeaders,this._responseHeadersMap=null,this.isRedirect=e.isRedirect,this.statusCode=e.statusCode,this.fromCache=e.fromCache,this.isPrivate=e.isPrivate||!1}get urlParts(){return null===this._urlParts&&(this._urlParts=n.URLInfo.get(this.url)),this._urlParts}get originUrlParts(){return null===this._originUrlParts&&(this._originUrlParts=n.URLInfo.get(this.originUrl)),this._originUrlParts}get sourceUrlParts(){return null===this._sourceUrlParts&&(this._sourceUrlParts=n.URLInfo.get(this.sourceUrl)),this._sourceUrlParts}getRequestHeader(e){if(this.requestHeaders)return null===this._requestHeadersMap&&(this._requestHeadersMap=a(this.requestHeaders)),this._requestHeadersMap.get(e.toLowerCase())}getResponseHeader(e){if(this.responseHeaders)return null===this._responseHeadersMap&&(this._responseHeadersMap=a(this.responseHeaders)),this._responseHeadersMap.get(e.toLowerCase())}isFullPage(){return"main_frame"===this.type}getCookieData(){return this.getRequestHeader("Cookie")}getReferrer(){return this.getRequestHeader("Referer")}getWindowDepth(){let e=0;return this.frameId!==this.tabId&&(e=this.frameId===this.parentFrameId?1:2),e}}t.default=class extends o{get cpt(){return this.typeInt}get tabUrl(){return this.sourceUrl}get responseStatus(){return this.statusCode}get isCached(){return this.fromCache}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(r(78)),i=f(r(244)),s=r(415),a=f(s),o=f(r(243)),u=f(r(805)),c=f(r(804)),l=r(803),d=f(r(412)),h=r(52);function f(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)({initialized:!1,requiresServices:["telemetry"],enabled:()=>!0,init(){this.initialized||(this.whitelist=new i.default("webRequestPipeline-whitelist"),this.pipelines=new Map,this.pageStore=new c.default,this.pageStore.init(),this.initialized=!0,this.installGlobalHandlers())},unload(){this.initialized&&(this.pipelines.forEach((e,t)=>{this.unloadPipeline(t)}),this.pageStore.unload(),this.initialized=!1)},unloadPipeline(e){if(this.pipelines.has(e)){const t=this.pipelines.get(e);this[e]=void 0,a.default[e].removeListener(t.listener),t.pipeline.unload(),this.pipelines.delete(e)}},getPipeline(e){if(this.pipelines.has(e))return this.pipelines.get(e).pipeline;if(void 0===a.default[e])return null;const t=s.EXTRA_INFO_SPEC[e],r=new o.default(`webRequestPipeline.${e}`,[],!1),n=t=>{const n=function(e){return{redirectTo(e){this.redirectUrl=e},block(){this.cancel=!0},modifyHeader(t,r){this.requestHeaders||(this.requestHeaders=[...e.requestHeaders||[]]);const n=t.toLowerCase(),i=this.requestHeaders.findIndex(e=>e.name.toLowerCase()===n);h.isChromium&&!r?i>-1&&this.requestHeaders.splice(i,1):i>-1?this.requestHeaders[i]={name:t,value:r}:this.requestHeaders.push({name:t,value:r})}}}(t),i=function(e,t){const r=e;if(!r.url||""===r.url)return d.default.error("createWebRequestContext no url",e),null;if(null===r.isPrivate||void 0===r.isPrivate){const e=r.tabId;-1!==e&&t.tabs[e]&&(r.isPrivate=t.tabs[e].isPrivate)}return!r.sourceUrl&&r.documentUrl?r.sourceUrl=r.documentUrl:r.sourceUrl=t.getSourceURL(r),null!==r.isRedirect&&void 0!==r.isRedirect||(r.isRedirect=t.isRedirect(r)),r.tabId>-1&&"main_frame"===r.type&&t.onFullPage(r),new u.default(r)}(t,this.pageStore);return null===i?{}:(r.execute(i,n,!this.whitelist.isWhitelisted(i.url)),h.isChromium?function(e,t){if(!0===e.cancel)return{cancel:!0};const r=s.VALID_RESPONSE_PROPERTIES[t];if(0===r.length)return{};const n=Object.create(null);for(let t=0;t<r.length;t+=1){const i=r[t];void 0!==e[i]&&(n[i]=e[i])}return n}(n,e):n)};this.pipelines.set(e,{pipeline:r,listener:n}),this[e]=n;const i=["http://*/*","https://*/*"];return h.isEdge||h.isChromium||i.push("ws://*/*","wss://*/*"),void 0===t?a.default[e].addListener(n,{urls:i}):a.default[e].addListener(n,{urls:i},t),r},installGlobalHandlers(){(0,l.installFetchSanitizer)((e,t)=>{this.getPipeline(e).addPipelineStep(t)})},events:{},actions:{isWhitelisted(e){return this.whitelist.isWhitelisted(e)},changeWhitelistState(e,t,r){return this.whitelist.changeState(e,t,r)},getWhitelistState(e){return this.whitelist.getState(e)},addPipelineStep(e,t){if(this.initialized){const r=this.getPipeline(e);null===r?d.default.error("WebRequest pipeline (add) does not have stage",e):r.addPipelineStep(t)}},removePipelineStep(e,t){if(this.initialized){const r=this.getPipeline(e);null===r?d.default.error("WebRequest pipeline (remove) does not have stage",e):(r.removePipelineStep(t),0===r.length&&this.unloadPipeline(e))}}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(806)),i=s(r(802));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(413)),i=u(r(11)),s=u(r(32)),a=r(91),o=u(r(31));function u(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){let t=e.window,r=e.windowId;this.window=t,this.windowId=r,this.controlCenter=o.default.module("control-center"),this.onLocationChange=function(e){let t=e.url,r=e.windowId,n=e.tabId;if(this.windowId!==r)return;this.interval&&clearInterval(this.interval);let i=8;this.updateBadge({tabId:n,url:t}),this.interval=setInterval(function(){this.updateBadge({tabId:n,url:t}),(i-=1)<=0&&clearInterval(this.interval)}.bind(this),2e3)}.bind(this),this.enabled=!1}init(){this.controlCenter.isEnabled()&&(this.onLocationChangeSubscription=s.default.subscribe("content:location-change",e=>{let t=e.windowId,r=e.url,n=e.windowTreeInformation.tabId;return this.onLocationChange({windowId:t,url:r,tabId:n})}),this.onTabSelect=s.default.subscribe("core:tab_select",this.onLocationChange))}unload(){this.onLocationChangeSubscription&&this.onLocationChangeSubscription.unsubscribe(),this.onTabSelect&&this.onTabSelect.unsubscribe(),clearInterval(this.interval)}getBadgeData(e){return n.default.attrack.urlWhitelist.isWhitelisted(e.hostname)?0:e.cookies.blocked+e.requests.unsafe}updateBadge(e){let t=e.tabId,r=e.url;n.default.attrack&&n.default.attrack.getTabBlockingInfo(t,r).then(e=>{this.controlCenter.windowAction(this.window,"setBadge",this.getBadgeData(e))})}status(){return n.default.attrack.getCurrentTabBlockingInfo(this.window).then(e=>{const t=a.URLInfo.get(e.url),r=e.ps,s=t?t.hostname:"",o=n.default.attrack.urlWhitelist.isWhitelisted(s),u=i.default.get("modules.antitracking.enabled",!0)&&!o;let c;return c=u?"active":o?"inactive":"critical",{visible:!0,strict:i.default.get("attrackForceBlock",!1),hostname:s,cookiesCount:e.cookies.blocked,requestsCount:e.requests.unsafe,totalCount:e.cookies.blocked+e.requests.unsafe,badgeData:this.getBadgeData(e),enabled:u,isWhitelisted:o||u,reload:e.reload||!1,trackersList:e,ps:r,state:c}})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(146);t.default=class{constructor(e){this.buffer=new Uint8Array(e),this.pos=0}seek(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.pos=e}crop(){return this.buffer.subarray(0,this.pos)}set(e){this.buffer=new Uint8Array(e),this.seek(0)}pushBytes(e){this.checkShouldResize(e.byteLength),this.buffer.set(e,this.pos),this.pos+=e.byteLength}pushByte(e){this.pushUint8(e)}pushUint8(e){this.checkShouldResize(1),this.buffer[this.pos]=e,this.pos+=1}pushUint16(e){this.checkShouldResize(2),this.buffer[this.pos]=e>>>8,this.buffer[this.pos+1]=e,this.pos+=2}pushUint32(e){this.checkShouldResize(4),this.buffer[this.pos]=e>>>24,this.buffer[this.pos+1]=e>>>16,this.buffer[this.pos+2]=e>>>8,this.buffer[this.pos+3]=e,this.pos+=4}pushUTF8(e){const t=(0,n.toUTF8)(e);this.pushUint16(t.byteLength),this.pushBytes(t)}pushStr(e){const t=this.pos;let r=!1;this.checkShouldResize(2+e.length),this.pushUint16(e.length);const n=this.pos,i=this.buffer;for(let t=0;t<e.length&&!r;t+=1){const s=e.charCodeAt(t);i[n+t]=s,r=r||s>127}r?(this.pos=t,this.pushUTF8(e)):this.pos+=e.length}getBytes(e){const t=this.buffer.subarray(this.pos,this.pos+e);return this.pos+=e,t}getByte(){return this.getUint8()}getUint8(){const e=this.buffer[this.pos];return this.pos+=1,e}getUint16(){const e=(this.buffer[this.pos]<<8|this.buffer[this.pos+1])>>>0;return this.pos+=2,e}getUint32(){const e=(this.buffer[this.pos]<<24>>>0)+(this.buffer[this.pos+1]<<16|this.buffer[this.pos+2]<<8|this.buffer[this.pos+3])>>>0;return this.pos+=4,e}getUTF8(){return(0,n.fromUTF8)(this.getBytes(this.getUint16()))}getStr(){const e=this.pos,t=this.getUint16();let r=0;for(;r<t&&this.buffer[this.pos+r]<=127;r+=1);return r<t?(this.pos=e,this.getUTF8()):String.fromCharCode.apply(null,this.getBytes(t))}checkShouldResize(e){this.pos+e>=this.buffer.byteLength&&this.resize(e)}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=new Uint8Array(Math.floor(1.5*(this.pos+e)));t.set(this.buffer),this.buffer=t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exportPublicKeySimple=t.privateKeytoKeypair=t.importPrivateKey=t.importPublicKey=t.exportPublicKeySPKI=t.exportPublicKey=t.exportPrivateKey=t.exportPrivateKeyPKCS8=t.importPrivateKeyPKCS8=void 0;var n=r(146),i=function(e){return e&&e.__esModule?e:{default:e}}(r(809));function s(e){let t=e+1;if(e<128)t+=1;else if(e<256)t+=2;else if(e<65536)t+=3;else if(e<1<<24)t+=4;else{if(!(e<1))throw new Error(`value too big ${e}`);t+=5}return t}function a(e,t){if(t<128)e.pushByte(t);else if(t<256)e.pushByte(129),e.pushByte(t);else if(t<65536)e.pushByte(130),e.pushByte(t>>8),e.pushByte(255&t);else if(t<1<<24)e.pushByte(131),e.pushByte(t>>16),e.pushByte(t>>8&255),e.pushByte(255&t);else{if(!(t<1))throw new Error(`value too big ${t}`);e.pushByte(132),e.pushByte(t>>24),e.pushByte(t>>16&255),e.pushByte(t>>8&255),e.pushByte(255&t)}}function o(e){const t=(4-(e=e.replace(/-/g,"+").replace(/_/g,"/")).length%4)%4;if(3===t)throw new Error(`illegal base64 string: ${e}`);for(let r=0;r<t;r++)e+="=";return e}function u(e){e=e.replace(/\+/g,"-").replace(/\//g,"_");for(let t=0;t<2;++t)"="===e[e.length-1]&&(e=e.substring(0,e.length-1));return e}function c(e){if(128&e[0]){const t=new Uint8Array(e.length+1);return t[0]=0,t.set(e,1),t}return e}function l(e){const t=[e.n,e.e].map(e=>c((0,n.fromBase64)(o(e)))),r=t.reduce((e,t)=>e+s(t.length),0),u=new i.default(2e3);return u.pushByte(48),a(u,s(s(r)+1)+15),u.pushBytes(new Uint8Array([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0])),u.pushByte(3),a(u,s(r)+1),u.pushByte(0),u.pushByte(48),a(u,r),t.forEach(e=>{u.pushByte(2),a(u,e.length),u.pushBytes(e)}),(0,n.toBase64)(u.crop())}function d(e){return l(e)}function h(e){const t=["AA==",e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.qi].map(e=>c((0,n.fromBase64)(o(e)))),r=t.reduce((e,t)=>e+s(t.length),0),u=new i.default(2e3);return u.pushByte(48),a(u,18+s(s(r))),u.pushBytes(new Uint8Array([2,1,0])),u.pushBytes(new Uint8Array([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0])),u.pushByte(4),a(u,s(r)),u.pushByte(48),a(u,r),t.forEach(e=>{u.pushByte(2),a(u,e.length),u.pushBytes(e)}),(0,n.toBase64)(u.crop())}function f(e){const t=e.getByte();if(128&t){let r=127&t,n=0;for(;r--;)n=n<<8|e.getByte();return n}return t}function p(e){if(2!==e.getByte())throw new Error("invalid tag for integer value");const t=f(e);let r=e.getBytes(t);return 0===r[0]&&(r=r.subarray(1)),r}function m(e,t){const r={};if(48!==e.getByte())throw new Error("first value not correct");f(e);for(let i=0;i<t.length;++i){let s=p(e);s=u((0,n.toBase64)(s)),r[t[i]]=s}return r.alg="RS256",r.ext=!0,r.kty="RSA",r}function _(e){const t=function(e,t){const r=new i.default(0);return r.set((0,n.fromBase64)(e)),m(r,t)}(e,["version","n","e","d","p","q","dp","dq","qi"]);return delete t.version,t}t.importPrivateKeyPKCS8=function(e){const t=new i.default(0);t.set((0,n.fromBase64)(e)),t.getByte(),f(t),t.getBytes(3),t.getBytes(15),t.getByte(),f(t);const r=m(t,["version","n","e","d","p","q","dp","dq","qi"]);return delete r.version,r},t.exportPrivateKeyPKCS8=h,t.exportPrivateKey=function(e){const t=["AA==",e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.qi].map(e=>c((0,n.fromBase64)(o(e)))),r=new i.default(2e3);r.pushByte(48);const u=t.reduce((e,t)=>e+s(t.length),0);return a(r,u),t.forEach(e=>{r.pushByte(2),a(r,e.length),r.pushBytes(e)}),(0,n.toBase64)(r.crop())},t.exportPublicKey=l,t.exportPublicKeySPKI=d,t.importPublicKey=function(e){const t=new i.default(0);if(t.set((0,n.fromBase64)(e)),48!==t.getByte())throw new Error("format not correct");if(f(t),t.getBytes(15),3!==t.getByte())throw new Error("format not correct");if(f(t),0!==t.getByte())throw new Error("format not correct");return m(t,["n","e"])},t.importPrivateKey=_,t.privateKeytoKeypair=function(e){const t=_(e);return[d(t),h(t)]},t.exportPublicKeySimple=function(e){const t=[e.n,e.e].map(e=>c((0,n.fromBase64)(o(e)))),r=new i.default(2e3);r.pushByte(48);const u=t.reduce((e,t)=>e+s(t.length),0);return a(r,u),t.forEach(e=>{r.pushByte(2),a(r,e.length),r.pushBytes(e)}),(0,n.toBase64)(r.crop())}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signRSA=t.generateRSAKeypair=t.exportPublicKey=t.exportPrivateKey=t.sha1=t.deriveAESKey=t.randomBytes=t.decryptStringRSA=t.decryptRSA=t.encryptRSA=t.rawEncryptRSA=t.encryptStringRSA=t.unwrapAESKey=t.wrapAESKey=t.importRSAKey=t.importAESKey=t.exportAESKey=t.generateAESKey=t.decryptStringAES=t.decryptAES=t.encryptStringAES=t.encryptAES=t.toArrayBuffer=t.fromArrayBuffer=t.toByteArray=t.fromByteArray=t.sha256=t.hash=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();let i=(()=>{var e=E(function*(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return O.default.subtle.digest(e,"string"==typeof t?(0,x.toUTF8)(t):t).then(function(e){return P(e,r)})});return function(t,r){return e.apply(this,arguments)}})(),s=(()=>{var e=E(function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex";return i("SHA-256",e,t)});return function(t){return e.apply(this,arguments)}})(),a=(()=>{var e=E(function*(e){return O.default.subtle.importKey("raw",A(e,"hex"),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])});return function(t){return e.apply(this,arguments)}})(),o=(()=>{var e=E(function*(e,t,r){return Promise.all([r||O.default.getRandomValues(new Uint8Array(12)),"string"==typeof t?a(t):t]).then(function(t){var r=n(t,2);let i=r[0],s=r[1];return O.default.subtle.encrypt({name:"AES-GCM",iv:i},s,e).then(function(e){return[P(i,"b64"),P(e,"b64")]})})});return function(t,r,n){return e.apply(this,arguments)}})(),u=(()=>{var e=E(function*(e,t,r){return o((0,x.toUTF8)(e).buffer,t,r)});return function(t,r,n){return e.apply(this,arguments)}})(),c=(()=>{var e=E(function*(e,t){let r=e[0],n=e[1];return r=new Uint8Array(A(r,"b64")),n=A(n,"b64"),Promise.resolve().then(function(){return"string"==typeof t?a(t):t}).then(function(e){return O.default.subtle.decrypt({name:"AES-GCM",iv:r},e,n)})});return function(t,r){return e.apply(this,arguments)}})(),l=(()=>{var e=E(function*(e,t){return c(e,t).then(function(e){return(0,x.fromUTF8)(new Uint8Array(e))})});return function(t,r){return e.apply(this,arguments)}})(),d=(()=>{var e=E(function*(){return O.default.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])});return function(){return e.apply(this,arguments)}})(),h=(()=>{var e=E(function*(e){return O.default.subtle.exportKey("raw",e).then(function(e){return P(e,"hex")})});return function(t){return e.apply(this,arguments)}})(),f=(()=>{var e=E(function*(e){let t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"SHA-256",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"RSA-OAEP";return t=r?"RSA-OAEP"===i?["wrapKey","encrypt"]:["verify"]:"RSA-OAEP"===i?["unwrapKey","decrypt"]:["sign"],O.default.subtle.importKey(r?"spki":"pkcs8",(0,x.fromBase64)(e),{name:i,hash:{name:n}},!0,t)});return function(t){return e.apply(this,arguments)}})(),p=(()=>{var e=E(function*(e,t){return Promise.resolve("string"==typeof t?f(t,!0):t).then(function(t){return O.default.subtle.wrapKey("raw",e,t,{name:"RSA-OAEP",hash:{name:"SHA-256"}})}).then(function(e){return(0,x.toBase64)(e)})});return function(t,r){return e.apply(this,arguments)}})(),m=(()=>{var e=E(function*(e,t){return Promise.resolve("string"==typeof t?f(t,!1):t).then(function(t){return O.default.subtle.unwrapKey("raw",(0,x.fromBase64)(e),t,{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])})});return function(t,r){return e.apply(this,arguments)}})(),_=(()=>{var e=E(function*(e,t){return d().then(function(r){let n;return n=Array.isArray(t)?Promise.all(t.map(function(e){return p(r,e)})):p(r,t),Promise.all([u(e,r),n])})});return function(t,r){return e.apply(this,arguments)}})(),g=(()=>{var e=E(function*(e,t){return f(t,!0,"SHA-1").then(function(t){return O.default.subtle.encrypt({name:"RSA-OAEP"},t,e)}).then(function(e){return new Uint8Array(e)})});return function(t,r){return e.apply(this,arguments)}})(),y=(()=>{var e=E(function*(e,t,r){const n=Array.isArray(t)?Promise.all(t.map(function(e){return p(r,e)})):p(r,t);return Promise.all([o(e,r),n])});return function(t,r,n){return e.apply(this,arguments)}})(),v=(()=>{var e=E(function*(e,t,r){return r?y(e,t,r):d().then(function(r){return y(e,t,r)})});return function(t,r,n){return e.apply(this,arguments)}})(),b=(()=>{var e=E(function*(e,t){var r=n(e,2);const i=r[0],s=r[1];return m(s,t).then(function(e){return c(i,e)})});return function(t,r){return e.apply(this,arguments)}})(),$=(()=>{var e=E(function*(e,t){var r=n(e,2);const i=r[0],s=r[1];return m(s,t).then(function(e){return l(i,e)})});return function(t,r){return e.apply(this,arguments)}})(),w=(()=>{var e=E(function*(e){return s(e,"raw").then(function(e){return O.default.subtle.importKey("raw",e,{name:"AES-GCM"},!0,["encrypt","decrypt"])})});return function(t){return e.apply(this,arguments)}})(),k=(()=>{var e=E(function*(e){return i("SHA-1",e)});return function(t){return e.apply(this,arguments)}})(),M=(()=>{var e=E(function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048;return O.default.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return Promise.all([O.default.subtle.exportKey("spki",e.publicKey).then(x.toBase64),O.default.subtle.exportKey("pkcs8",e.privateKey).then(x.toBase64)])})});return function(){return e.apply(this,arguments)}})(),S=(()=>{var e=E(function*(e,t){const r="string"==typeof t?(0,x.toUTF8)(t):t;return O.default.subtle.sign({name:"RSASSA-PKCS1-v1_5"},e,r).then(x.toHex)});return function(t,r){return e.apply(this,arguments)}})();var O=function(e){return e&&e.__esModule?e:{default:e}}(r(425)),x=r(146),T=r(810);function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}function D(e,t){return"hex"===t?(0,x.toHex)(e):"b64"===t?(0,x.toBase64)(e):e}function L(e,t){return"hex"===t?(0,x.fromHex)(e):"b64"===t?(0,x.fromBase64)(e):e}function P(e,t){return D(new Uint8Array(e),t)}function A(e,t){return L(e,t).buffer}t.hash=i,t.sha256=s,t.fromByteArray=D,t.toByteArray=L,t.fromArrayBuffer=P,t.toArrayBuffer=A,t.encryptAES=o,t.encryptStringAES=u,t.decryptAES=c,t.decryptStringAES=l,t.generateAESKey=d,t.exportAESKey=h,t.importAESKey=a,t.importRSAKey=f,t.wrapAESKey=p,t.unwrapAESKey=m,t.encryptStringRSA=_,t.rawEncryptRSA=g,t.encryptRSA=v,t.decryptRSA=b,t.decryptStringRSA=$,t.randomBytes=function(e){return O.default.getRandomValues(new Uint8Array(e))},t.deriveAESKey=w,t.sha1=k,t.exportPrivateKey=T.exportPrivateKey,t.exportPublicKey=T.exportPublicKey,t.generateRSAKeypair=M,t.signRSA=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryTree=void 0,t.ipv4ToBinaryString=a,t.ipv6ToBinaryString=o;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(22)),i=r(811),s=r(80);function a(e){if(!e)throw new Error("ip cannot be falsy");const t=e.split(".").map(e=>parseInt(e,10));if(t.some(e=>isNaN(e)))throw new Error("ip must contain only numbers");return t.map(e=>e.toString(2)).map(e=>Array(9-e.length).join("0")+e).join("")}function o(e){if(!e)throw new Error("ip cannot be falsy");const t=e.split(":"),r=t.length;if(r<8){const e=t.findIndex(e=>""===e);t.splice(e,0,...Array(8-r).fill("0"))}return t.map(e=>parseInt(`0${e}`,16)).map(e=>e.toString(2)).map(e=>Array(16-e.length).fill("0").join("")+e).join("")}class u{constructor(e,t,r){this.leafValues=t,this.tree=e,this.frameWidth=r}static fromArray(e,t){const r=function e(t){return null===t||"number"==typeof t?1:e(t[0])+e(t[1])}(e),n=[2,3,4].find(e=>Math.pow(2,8*e-1)>r),i=new ArrayBuffer(r*n*2);let s=0;const a=e=>(e=>null===e||"number"==typeof e)(e)?(null!==e?e:255)+(1<<8*n-1):c(e),o=(e,t)=>{for(let r=0;r<n;r+=1)t.setUint8(r,e>>8*(n-r-1)&255)},c=e=>{const t=s;s+=1;const r=a(e[0]),u=a(e[1]);return o(r,new DataView(i,t*n*2,n)),o(u,new DataView(i,t*n*2+n,n)),t};return c(e),new u(i,t,n)}readState(e){const t=new DataView(this.tree,e*this.frameWidth*2,2*this.frameWidth);let r=0,n=0;for(let e=0;e<this.frameWidth;e+=1)r+=t.getUint8(e)<<8*(this.frameWidth-e-1);for(let e=0;e<this.frameWidth;e+=1)n+=t.getUint8(e+this.frameWidth)<<8*(this.frameWidth-e-1);return[r,n]}isLeaf(e){return e>=Math.pow(2,8*this.frameWidth-1)}lookup(e){let t=0,r=this.readState(t);for(let n=0;n<e.length;n+=1){if(t=r[e[n]],this.isLeaf(t)){const e=255&t;return 255===e?null:this.leafValues[e]}r=this.readState(t)}return null}}t.BinaryTree=u;t.default=class{constructor(){this._tree=[null,null],this._countries=[],this._loader=new s.Resource(["antitracking","ipv4_btree_packed.json"],{remoteURL:`${n.default.settings.CDN_BASEURL}/anti-tracking/geoip/ip_btree_packed_20180501.json.gz`,remoteOnly:!0})}load(){return this._loader.load().then(e=>{this.tree=new u((0,i.toArrayBuffer)(e.tree,"b64"),e.countries,e.width)})}lookup4(e){const t=a(e);return this.tree.lookup(`0${t}`)}lookup6(e){const t=o(e);return this.tree.lookup(`1${t}`)}lookup(e){if(e.indexOf(".")>0)return this.lookup4(e);if(e.indexOf(":")>-1)return this.lookup6(e);throw new Error("Not an ip address")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipInvalidSource=function(e){return null!==e.sourceUrlParts},t.skipInternalProtocols=function(e){if(!e.urlParts)return!1;if(e.sourceUrlParts&&n.has(e.sourceUrlParts.protocol))return!1;if(e.urlParts&&n.has(e.urlParts.protocol))return!1;return!0},t.checkSameGeneralDomain=function(e){const t=e.urlParts.generalDomain,r=e.sourceUrlParts.generalDomain;return void 0!==t&&null!==t&&void 0!==r&&null!==r&&t!==r&&t.split(".")[0]!==r.split(".")[0]};const n=new Set(["chrome","resource","moz-extension","chrome-extension"])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(404)),i=a(r(32)),s=r(91);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,i){return n.default.Observable.merge(function(e,t,r){return e.map(e=>n=>Object.assign({},n,{[t(e)]:r(e)}))}(e,t,r),function(e,t){return e.map(e=>r=>{const n=Object.assign({},r);return delete n[t(e)],n})}(function(e,t,r){return e.groupBy(t).flatMap(e=>e.debounceTime(r))}(e,t,i),t)).scan((e,t)=>t(e),{})}const u={CLICK_TIMEOUT:3e5,VISIT_TIMEOUT:24e4};t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;this.clickActivity={},this.siteActivitiy={},this.subjectMainFrames=new n.default.Subject,Object.assign(this,u,e)}init(){const e=n.default.Observable.fromEventPattern(e=>i.default.sub("core:mouse-down",e),e=>i.default.un_sub("core:mouse-down",e),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return{ev:t[0],contextHTML:t[1],href:t[2],sender:t[3]}}).map(e=>e.sender.tab);this.tabActivitySubscription=o(e,e=>e.id,e=>e.url,this.CLICK_TIMEOUT).subscribe(e=>{this.clickActivity=e});const t=this.subjectMainFrames.observeOn(n.default.Scheduler.async).map(e=>({tabId:e.tabId,hostname:e.urlParts.hostname}));this.pageOpenedSubscription=o(t,e=>e.hostname,e=>e.tabId,this.VISIT_TIMEOUT).subscribe(e=>{this.siteActivitiy=e})}unload(){this.tabActivitySubscription&&this.tabActivitySubscription.unsubscribe(),this.pageOpenedSubscription&&this.pageOpenedSubscription.unsubscribe()}checkMainFrames(e){e.isFullPage()&&this.subjectMainFrames.next(e)}checkIsOAuth(e){if(e.urlParts.path.indexOf("/oauth")>-1&&this.clickActivity[e.tabId]&&this.siteActivitiy[e.urlParts.hostname]){const t=s.URLInfo.get(this.clickActivity[e.tabId]);if(null!==t&&t.hostname===e.sourceUrlParts.hostname)return e.incrementStat("cookie_allow_oauth"),!1}return!0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(59)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(79)),s=r(143),a=u(r(109)),o=r(121);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){if(1!==t.length)throw new Error('"char" argument must only contain one character');return e.length>=r?e:t.repeat(r-e.length)+e}function l(e){let t=1;const r={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=c(t.toString().substr(0,16),"0",16);t+=1,r[i]=e[n]}return r}t.default=class{constructor(e,t,r){this.telemetry=e,this.qsWhitelist=t,this.config=r,this.tokens={},this._tokens=new i.AutoPersistentObject("tokens",e=>{this.tokens=e},6e4)}init(){this._pmsend=a.default.register(this.sendTokens.bind(this),3e5)}unload(){this._tokens.save(),a.default.deregister(this._pmsend)}extractKeyTokens(e){if(e.isPrivate)return!0;const t=e.urlParts.getKeyValuesMD5();if(t.length>0){const r=(0,s.truncateDomain)(e.urlParts.host,this.config.tpDomainDepth),i=(0,n.default)(r).substr(0,16),a=(0,n.default)(e.sourceUrlParts.hostname).substr(0,16),o=(0,n.default)(e.urlParts.generalDomain).substr(0,16);this._saveKeyTokens(i,t,a,o)}return!0}_touchToken(e,t){e in this.tokens||(this.tokens[e]={lastSent:Date.now()}),t in this.tokens[e]||(this.tokens[e][t]={c:0,kv:{}})}_saveKeyTokens(e,t,r,n){const i=e,s=`${e}_unsafe`,a=this.qsWhitelist.isTrackerDomain(n);this.config.telemetryMode===o.TELEMETRY.DISABLED||this.config.telemetryMode===o.TELEMETRY.TRACKERS_ONLY&&!a||(t.forEach(e=>{const t=e.v,o=e.k,u=e.v_len<this.config.shortTokenLength||!a||this.qsWhitelist.isSafeKey(n,o)||this.qsWhitelist.isSafeToken(n,t)?i:s;this._touchToken(u,r),null==this.tokens[u][r].kv[o]&&(this.tokens[u][r].kv[o]={}),null==this.tokens[u][r].kv[o][t]&&(this.tokens[u][r].kv[o][t]={c:0,k_len:e.k_len,v_len:e.v_len}),this.tokens[u][r].kv[o][t].c+=1}),this._tokens.setDirty())}sendTokens(){const e=e=>!e.endsWith("_unsafe");this._sendTokenBatch(e),this._sendTokenBatch(t=>!e(t))}_sendTokenBatch(e){const t={},r=Object.keys(this.tokens).filter(e),n=Math.floor(r.length/12)||1,i=Date.now(),a=r.sort((e,t)=>parseInt(this.tokens[e].lastSent||0,10)-parseInt(this.tokens[t].lastSent||0,10));for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e)){const r=a[e],s=this.tokens[r],o=r.substring(0,16);if(n>0&&Object.keys(t).length>n)break;if(!(o in t)&&(!s.lastSent||parseInt(s.lastSent,10)+36e5<=i)){delete s.lastSent;const e=l(s);delete this.tokens[r],Object.keys(e).length>0&&(t[o]=e)}}Object.keys(t).length>0&&(0,s.splitTelemetryData)(t,2e4).forEach(e=>{const t={type:this.telemetry.msgType,action:"attrack.tokens",payload:e};this.telemetry({message:t,compress:!0})}),this._tokens.setDirty()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(65)),s=u(r(59)),a=u(r(24)),o=r(241);function u(e){return e&&e.__esModule?e:{default:e}}class c{constructor(){this.items=new Map,this.dirty=!1}add(e,t){this.items.set(e,t),this.dirty=!0}size(){return this.items.size}toObject(){const e={};return this.items.forEach((t,r)=>{e[r]=t}),e}setDirty(e){this.dirty=e}}t.default=class{constructor(e,t,r){this.qsWhitelist=e,this.config=t,this.db=r,this.hashTokens=!0,this.requestKeyValue=new Map,this._syncTimer=null,this._lastPrune=null,this._currentDay=null,this.db.db.on("populate",()=>{(0,o.migrateRequestKeyValue)()})}init(){return this.loadAndPrune()}unload(){this._syncTimer&&clearTimeout(this._syncTimer)}clearCache(){return this.requestKeyValue.clear(),this.db.requestKeyValue.clear()}addRequestKeyValueEntry(e,t,r){this.requestKeyValue.has(e)||this.requestKeyValue.set(e,new Map);const n=this.requestKeyValue.get(e);n.has(t)||n.set(t,new c);const i=n.get(t);return Object.keys(r).forEach(e=>{i.add(e,r[e])}),i}removeRequestKeyValueEntry(e,t){const r=this.requestKeyValue.get(e);r&&r.delete(t),r&&0===r.size&&this.requestKeyValue.delete(e)}get currentDay(){if(!this._currentDay||Date.now()>this._nextDayCheck){const e=i.getTime().substr(0,8);e!==this._currentDay&&(this._nextDayCheck=Date.now()+36e5),this._currentDay=e}return this._currentDay}examineTokens(e){if(!e.isPrivate&&this.qsWhitelist.isTrackerDomain(e.urlParts.generalDomainHash)){const t=this.currentDay,r=e.urlParts.generalDomainHash,n=this.requestKeyValue.get(r)||new Map,i=new Set,o=e.urlParts.getKeyValues().reduce((n,o)=>{if(o.v.length<this.config.shortTokenLength||this.qsWhitelist.isSafeKey(r,(0,s.default)(o.k)))return n;const u=this.hashTokens?(0,s.default)(o.k):o.k,l=this.hashTokens?(0,s.default)(o.v):o.v;return n.has(u)||n.set(u,new c),n.get(u).add(l,t),!i.has(u)&&n.get(u).size()>this.config.safekeyValuesThreshold&&(i.add(u),this.config.debugMode&&a.default.log("Add safekey",e.urlParts.generalDomain,u,n.get(u)),this.qsWhitelist.addSafeKey(r,this.hashTokens?u:(0,s.default)(u),this.config.safekeyValuesThreshold)),n},n);return this.requestKeyValue.set(r,o),this._scheduleSync(t!==this._lastPrune),!0}return!0}getPruneCutoff(){const e=i.newUTCDate();return e.setDate(e.getDate()-this.config.safeKeyExpire),i.dateString(e)}pruneDb(){const e=this.getPruneCutoff();return this.db.requestKeyValue.where("day").below(e).delete().then(()=>{this._lastPrune=this.currentDay})}loadAndPrune(){return this.pruneDb()}_scheduleSync(e){this._syncTimer||(this._syncTimer=setTimeout(()=>{(e?this.pruneDb():Promise.resolve()).then(()=>this._syncDb()),this._syncTimer=null},1e4))}_syncDb(){const e=[],t=[];var r=!0,i=!1,o=void 0;try{for(var u,c=this.requestKeyValue.entries()[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){const r=u.value;var l=n(r,2);const i=l[0],s=l[1];var d=!0,h=!1,f=void 0;try{for(var p,m=s.entries()[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){const r=p.value;var _=n(r,2);const s=_[0],a=_[1];a.dirty&&(a.items.forEach((t,r)=>{e.push({tracker:i,key:s,value:r,day:t})}),t.push({tracker:i,key:s}),a.setDirty(!1))}}catch(e){h=!0,f=e}finally{try{!d&&m.return&&m.return()}finally{if(h)throw f}}}}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return this.db.requestKeyValue.bulkPut(e).catch(e=>{a.default.error("requestKeyValue","bulkPut errors",e)}).then(()=>t.map(e=>{let t=e.tracker,r=e.key;return this.db.requestKeyValue.where("[tracker+key]").equals([t,r]).count(e=>{e>this.config.safekeyValuesThreshold&&(this.config.debugMode&&a.default.log("Add safekey",t,r),this.qsWhitelist.addSafeKey(t,this.hashTokens?r:(0,s.default)(r),e)),this.removeRequestKeyValueEntry(t,r)}).catch(e=>a.default.error(e))}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(79)),i=o(r(59)),s=o(r(32)),a=u(r(65));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.default=class{constructor(e,t){this.telemetry=e,this.config=t,this.blocked=new n.LazyPersistentObject("blocked"),this.localBlocked=new n.LazyPersistentObject("localBlocked")}get blockReportList(){return this.config.reportList||{}}init(){this.blocked.load(),this.localBlocked.load(),this.onHourChanged=(()=>{const e=a.newUTCDate();e.setHours(e.getHours()-24);const t=a.hourString(e);this._cleanLocalBlocked(t),this.sendTelemetry()}),this._hourChangedListener=s.default.subscribe("attrack:hour_changed",this.onHourChanged)}unload(){this._hourChangedListener&&(this._hourChangedListener.unsubscribe(),this._hourChangedListener=null)}add(e,t,r,n,i){const s=a.getTime();this.offerToReporter(e,t,r,n,i),this._addLocalBlocked(e,t,r,n,s)}clear(){this.blocked.clear(),this.localBlocked.clear()}_addBlocked(e,t,r,n){const i=this.blocked.value;e in i||(i[e]={}),t in i[e]||(i[e][t]={}),r in i[e][t]||(i[e][t][r]={}),n in i[e][t][r]||(i[e][t][r][n]=0),i[e][t][r][n]+=1,this.blocked.setDirty()}_addLocalBlocked(e,t,r,n,i){const s=this.localBlocked.value;e in s||(s[e]={}),t in s[e]||(s[e][t]={}),r in s[e][t]||(s[e][t][r]={}),n in s[e][t][r]||(s[e][t][r][n]={}),i in s[e][t][r][n]||(s[e][t][r][n][i]=0),s[e][t][r][n][i]+=1,this.localBlocked.setDirty()}_cleanLocalBlocked(e){for(const t in this.localBlocked.value){for(const r in this.localBlocked.value[t]){for(const n in this.localBlocked.value[t][r]){for(const i in this.localBlocked.value[t][r][n]){for(const s in this.localBlocked.value[t][r][n][i])s<e&&delete this.localBlocked.value[t][r][n][i][s];0===Object.keys(this.localBlocked.value[t][r][n][i]).length&&delete this.localBlocked.value[t][r][n][i]}0===Object.keys(this.localBlocked.value[t][r][n]).length&&delete this.localBlocked.value[t][r][n]}0===Object.keys(this.localBlocked.value[t][r]).length&&delete this.localBlocked.value[t][r]}0===Object.keys(this.localBlocked.value[t]).length&&delete this.localBlocked.value[t]}this.localBlocked.setDirty(!0),this.localBlocked.save()}offerToReporter(e,t,r,n,s){this.isInBlockReportList(t,r,n)&&this._addBlocked(t,r,(0,i.default)(n),s)}isInBlockReportList(e,t,r){if(e in this.blockReportList){const n=this.blockReportList[e];if("*"===n)return!0;if(t in n||(0,i.default)(t)in n){const e=n[t]||n[(0,i.default)(t)];if("*"===e)return!0;if(r in e||(0,i.default)(r)in e)return!0}}return!1}sendTelemetry(){Object.keys(this.blocked.value).length>0&&(this.telemetry({message:{action:"attrack.blocked",payload:this.blocked.value}}),this.blocked.clear())}}},function(e,t,r){"use strict";var n=r(229);t.audit=n.audit;var i=r(361);t.auditTime=i.auditTime;var s=r(389);t.buffer=s.buffer;var a=r(388);t.bufferCount=a.bufferCount;var o=r(387);t.bufferTime=o.bufferTime;var u=r(386);t.bufferToggle=u.bufferToggle;var c=r(385);t.bufferWhen=c.bufferWhen;var l=r(384);t.catchError=l.catchError;var d=r(383);t.combineAll=d.combineAll;var h=r(169);t.combineLatest=h.combineLatest;var f=r(382);t.concat=f.concat;var p=r(237);t.concatAll=p.concatAll;var m=r(234);t.concatMap=m.concatMap;var _=r(381);t.concatMapTo=_.concatMapTo;var g=r(380);t.count=g.count;var y=r(378);t.debounce=y.debounce;var v=r(377);t.debounceTime=v.debounceTime;var b=r(233);t.defaultIfEmpty=b.defaultIfEmpty;var $=r(376);t.delay=$.delay;var w=r(375);t.delayWhen=w.delayWhen;var k=r(379);t.dematerialize=k.dematerialize;var M=r(374);t.distinct=M.distinct;var S=r(232);t.distinctUntilChanged=S.distinctUntilChanged;var O=r(373);t.distinctUntilKeyChanged=O.distinctUntilKeyChanged;var x=r(368);t.elementAt=x.elementAt;var T=r(359);t.every=T.every;var E=r(371);t.exhaust=E.exhaust;var D=r(370);t.exhaustMap=D.exhaustMap;var L=r(369);t.expand=L.expand;var P=r(231);t.filter=P.filter;var A=r(367);t.finalize=A.finalize;var j=r(230);t.find=j.find;var R=r(366);t.findIndex=R.findIndex;var I=r(365);t.first=I.first;var C=r(364);t.groupBy=C.groupBy;var Y=r(363);t.ignoreElements=Y.ignoreElements;var F=r(362);t.isEmpty=F.isEmpty;var N=r(360);t.last=N.last;var U=r(135);t.map=U.map;var q=r(358);t.mapTo=q.mapTo;var H=r(357);t.materialize=H.materialize;var z=r(356);t.max=z.max;var B=r(355);t.merge=B.merge;var W=r(167);t.mergeAll=W.mergeAll;var V=r(139);t.mergeMap=V.mergeMap;var G=r(139);t.flatMap=G.mergeMap;var K=r(354);t.mergeMapTo=K.mergeMapTo;var J=r(353);t.mergeScan=J.mergeScan;var Q=r(352);t.min=Q.min;var Z=r(108);t.multicast=Z.multicast;var X=r(168);t.observeOn=X.observeOn;var ee=r(235);t.onErrorResumeNext=ee.onErrorResumeNext;var te=r(350);t.pairwise=te.pairwise;var re=r(349);t.partition=re.partition;var ne=r(348);t.pluck=ne.pluck;var ie=r(347);t.publish=ie.publish;var se=r(346);t.publishBehavior=se.publishBehavior;var ae=r(343);t.publishLast=ae.publishLast;var oe=r(344);t.publishReplay=oe.publishReplay;var ue=r(342);t.race=ue.race;var ce=r(133);t.reduce=ce.reduce;var le=r(341);t.repeat=le.repeat;var de=r(340);t.repeatWhen=de.repeatWhen;var he=r(339);t.retry=he.retry;var fe=r(338);t.retryWhen=fe.retryWhen;var pe=r(226);t.refCount=pe.refCount;var me=r(337);t.sample=me.sample;var _e=r(336);t.sampleTime=_e.sampleTime;var ge=r(228);t.scan=ge.scan;var ye=r(335);t.sequenceEqual=ye.sequenceEqual;var ve=r(334);t.share=ve.share;var be=r(333);t.shareReplay=be.shareReplay;var $e=r(332);t.single=$e.single;var we=r(331);t.skip=we.skip;var ke=r(330);t.skipLast=ke.skipLast;var Me=r(329);t.skipUntil=Me.skipUntil;var Se=r(328);t.skipWhile=Se.skipWhile;var Oe=r(327);t.startWith=Oe.startWith;var xe=r(325);t.switchAll=xe.switchAll;var Te=r(225);t.switchMap=Te.switchMap;var Ee=r(324);t.switchMapTo=Ee.switchMapTo;var De=r(323);t.take=De.take;var Le=r(227);t.takeLast=Le.takeLast;var Pe=r(322);t.takeUntil=Pe.takeUntil;var Ae=r(321);t.takeWhile=Ae.takeWhile;var je=r(372);t.tap=je.tap;var Re=r(161);t.throttle=Re.throttle;var Ie=r(320);t.throttleTime=Ie.throttleTime;var Ce=r(318);t.timeInterval=Ce.timeInterval;var Ye=r(317);t.timeout=Ye.timeout;var Fe=r(315);t.timeoutWith=Fe.timeoutWith;var Ne=r(224);t.timestamp=Ne.timestamp;var Ue=r(314);t.toArray=Ue.toArray;var qe=r(313);t.window=qe.window;var He=r(312);t.windowCount=He.windowCount;var ze=r(311);t.windowTime=ze.windowTime;var Be=r(310);t.windowToggle=Be.windowToggle;var We=r(309);t.windowWhen=We.windowWhen;var Ve=r(308);t.withLatestFrom=Ve.withLatestFrom;var Ge=r(164);t.zip=Ge.zip;var Ke=r(307);t.zipAll=Ke.zipAll},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(r(136).AsyncScheduler);t.AnimationFrameScheduler=i},function(e,t,r){"use strict";var n=r(54),i=function(){return function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})}}();t.RequestAnimationFrameDefinition=i,t.AnimationFrame=new i(n.root)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(137),s=r(820),a=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=s.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(s.AnimationFrame.cancelAnimationFrame(r),t.scheduled=void 0)},t}(i.AsyncAction);t.AnimationFrameAction=a},function(e,t,r){"use strict";var n=r(821),i=r(819);t.animationFrame=new i.AnimationFrameScheduler(n.AnimationFrameAction)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(46),a=r(306),o=r(304),u=function(e){function t(t,r){e.call(this),this.messages=t,this.subscriptions=[],this.scheduler=r}return n(t,e),t.prototype._subscribe=function(t){var r=this,n=r.logSubscribedFrame();return t.add(new s.Subscription(function(){r.logUnsubscribedFrame(n)})),e.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,r=0;r<t;r++)!function(){var t=e.messages[r];e.scheduler.schedule(function(){t.notification.observe(e)},t.frame)}()},t}(i.Subject);t.HotObservable=u,o.applyMixins(u,[a.SubscriptionLoggable])},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(46),a=r(306),o=r(304),u=function(e){function t(t,r){e.call(this,function(e){var t=this,r=t.logSubscribedFrame();return e.add(new s.Subscription(function(){t.logUnsubscribedFrame(r)})),t.scheduleMessages(e),e}),this.messages=t,this.subscriptions=[],this.scheduler=r}return n(t,e),t.prototype.scheduleMessages=function(e){for(var t=this.messages.length,r=0;r<t;r++){var n=this.messages[r];e.add(this.scheduler.schedule(function(e){var t=e.message,r=e.subscriber;t.notification.observe(r)},n.frame,{message:n,subscriber:e}))}},t}(i.Observable);t.ColdObservable=u,o.applyMixins(u,[a.SubscriptionLoggable])},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(140),a=r(824),o=r(823),u=r(305),c=r(303),l=750,d=function(e){function t(t){e.call(this,c.VirtualAction,l),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return n(t,e),t.prototype.createTime=function(e){var r=e.indexOf("|");if(-1===r)throw new Error('marble diagram for time should have a completion marker "|"');return r*t.frameTimeFactor},t.prototype.createColdObservable=function(e,r,n){if(-1!==e.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==e.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var i=t.parseMarbles(e,r,n),s=new a.ColdObservable(i,this);return this.coldObservables.push(s),s},t.prototype.createHotObservable=function(e,r,n){if(-1!==e.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var i=t.parseMarbles(e,r,n),s=new o.HotObservable(i,this);return this.hotObservables.push(s),s},t.prototype.materializeInnerObservable=function(e,t){var r=this,n=[];return e.subscribe(function(e){n.push({frame:r.frame-t,notification:s.Notification.createNext(e)})},function(e){n.push({frame:r.frame-t,notification:s.Notification.createError(e)})},function(){n.push({frame:r.frame-t,notification:s.Notification.createComplete()})}),n},t.prototype.expectObservable=function(e,r){var n=this;void 0===r&&(r=null);var a,o=[],u={actual:o,ready:!1},c=t.parseMarblesAsSubscriptions(r).unsubscribedFrame;return this.schedule(function(){a=e.subscribe(function(e){var t=e;e instanceof i.Observable&&(t=n.materializeInnerObservable(t,n.frame)),o.push({frame:n.frame,notification:s.Notification.createNext(t)})},function(e){o.push({frame:n.frame,notification:s.Notification.createError(e)})},function(){o.push({frame:n.frame,notification:s.Notification.createComplete()})})},0),c!==Number.POSITIVE_INFINITY&&this.schedule(function(){return a.unsubscribe()},c),this.flushTests.push(u),{toBe:function(e,r,n){u.ready=!0,u.expected=t.parseMarbles(e,r,n,!0)}}},t.prototype.expectSubscriptions=function(e){var r={actual:e,ready:!1};return this.flushTests.push(r),{toBe:function(e){var n="string"==typeof e?[e]:e;r.ready=!0,r.expected=n.map(function(e){return t.parseMarblesAsSubscriptions(e)})}}},t.prototype.flush=function(){for(var t=this.hotObservables;t.length>0;)t.shift().setup();e.prototype.flush.call(this);for(var r=this.flushTests.filter(function(e){return e.ready});r.length>0;){var n=r.shift();this.assertDeepEqual(n.actual,n.expected)}},t.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new u.SubscriptionLog(Number.POSITIVE_INFINITY);for(var t=e.length,r=-1,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=0;s<t;s++){var a=s*this.frameTimeFactor,o=e[s];switch(o){case"-":case" ":break;case"(":r=a;break;case")":r=-1;break;case"^":if(n!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=r>-1?r:a;break;case"!":if(i!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=r>-1?r:a;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+o+"'.")}}return i<0?new u.SubscriptionLog(n):new u.SubscriptionLog(n,i)},t.parseMarbles=function(e,t,r,n){if(void 0===n&&(n=!1),-1!==e.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var i=e.length,o=[],u=e.indexOf("^"),c=-1===u?0:u*-this.frameTimeFactor,l="object"!=typeof t?function(e){return e}:function(e){return n&&t[e]instanceof a.ColdObservable?t[e].messages:t[e]},d=-1,h=0;h<i;h++){var f=h*this.frameTimeFactor+c,p=void 0,m=e[h];switch(m){case"-":case" ":break;case"(":d=f;break;case")":d=-1;break;case"|":p=s.Notification.createComplete();break;case"^":break;case"#":p=s.Notification.createError(r||"error");break;default:p=s.Notification.createNext(l(m))}p&&o.push({frame:d>-1?d:f,notification:p})}return o},t}(c.VirtualTimeScheduler);t.TestScheduler=d},function(e,t,r){"use strict";var n=r(307);t.zipAll=function(e){return n.zipAll(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(826);n.Observable.prototype.zipAll=i.zipAll},function(e,t,r){"use strict";var n=r(164);t.zipProto=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.zip.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(828);n.Observable.prototype.zip=i.zipProto},function(e,t,r){"use strict";var n=r(308);t.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.withLatestFrom.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(830);n.Observable.prototype.withLatestFrom=i.withLatestFrom},function(e,t,r){"use strict";var n=r(309);t.windowWhen=function(e){return n.windowWhen(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(832);n.Observable.prototype.windowWhen=i.windowWhen},function(e,t,r){"use strict";var n=r(310);t.windowToggle=function(e,t){return n.windowToggle(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(834);n.Observable.prototype.windowToggle=i.windowToggle},function(e,t,r){"use strict";var n=r(34),i=r(138),s=r(75),a=r(311);t.windowTime=function(e){var t=n.async,r=null,o=Number.POSITIVE_INFINITY;return s.isScheduler(arguments[3])&&(t=arguments[3]),s.isScheduler(arguments[2])?t=arguments[2]:i.isNumeric(arguments[2])&&(o=arguments[2]),s.isScheduler(arguments[1])?t=arguments[1]:i.isNumeric(arguments[1])&&(r=arguments[1]),a.windowTime(e,r,o,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(836);n.Observable.prototype.windowTime=i.windowTime},function(e,t,r){"use strict";var n=r(312);t.windowCount=function(e,t){return void 0===t&&(t=0),n.windowCount(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(838);n.Observable.prototype.windowCount=i.windowCount},function(e,t,r){"use strict";var n=r(313);t.window=function(e){return n.window(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(840);n.Observable.prototype.window=i.window},function(e,t){},function(e,t,r){"use strict";var n=r(314);t.toArray=function(){return n.toArray()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(843);n.Observable.prototype.toArray=i.toArray},function(e,t,r){"use strict";var n=r(34),i=r(224);t.timestamp=function(e){return void 0===e&&(e=n.async),i.timestamp(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(845);n.Observable.prototype.timestamp=i.timestamp},function(e,t,r){"use strict";var n=r(34),i=r(315);t.timeoutWith=function(e,t,r){return void 0===r&&(r=n.async),i.timeoutWith(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(847);n.Observable.prototype.timeoutWith=i.timeoutWith},function(e,t,r){"use strict";var n=r(34),i=r(317);t.timeout=function(e,t){return void 0===t&&(t=n.async),i.timeout(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(849);n.Observable.prototype.timeout=i.timeout},function(e,t,r){"use strict";var n=r(4),i=r(319);n.Observable.prototype.timeInterval=i.timeInterval},function(e,t,r){"use strict";var n=r(34),i=r(161),s=r(320);t.throttleTime=function(e,t,r){return void 0===t&&(t=n.async),void 0===r&&(r=i.defaultThrottleConfig),s.throttleTime(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(852);n.Observable.prototype.throttleTime=i.throttleTime},function(e,t,r){"use strict";var n=r(161);t.throttle=function(e,t){return void 0===t&&(t=n.defaultThrottleConfig),n.throttle(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(854);n.Observable.prototype.throttle=i.throttle},function(e,t,r){"use strict";var n=r(321);t.takeWhile=function(e){return n.takeWhile(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(856);n.Observable.prototype.takeWhile=i.takeWhile},function(e,t,r){"use strict";var n=r(322);t.takeUntil=function(e){return n.takeUntil(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(858);n.Observable.prototype.takeUntil=i.takeUntil},function(e,t,r){"use strict";var n=r(227);t.takeLast=function(e){return n.takeLast(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(860);n.Observable.prototype.takeLast=i.takeLast},function(e,t,r){"use strict";var n=r(323);t.take=function(e){return n.take(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(862);n.Observable.prototype.take=i.take},function(e,t,r){"use strict";var n=r(324);t.switchMapTo=function(e,t){return n.switchMapTo(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(864);n.Observable.prototype.switchMapTo=i.switchMapTo},function(e,t,r){"use strict";var n=r(225);t.switchMap=function(e,t){return n.switchMap(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(866);n.Observable.prototype.switchMap=i.switchMap},function(e,t,r){"use strict";var n=r(325);t._switch=function(){return n.switchAll()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(868);n.Observable.prototype.switch=i._switch,n.Observable.prototype._switch=i._switch},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(r(136).AsyncScheduler);t.AsapScheduler=i},function(e,t,r){"use strict";(function(e,n){var i=r(54),s=function(){function e(e){if(this.root=e,e.setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var t=function e(t){delete e.instance.tasksByHandle[t]};t.instance=this,this.clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return Boolean(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}return!1},e.prototype.partiallyApplied=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=function e(){var t=e.handler,r=e.args;"function"==typeof t?t.apply(void 0,r):new Function(""+t)()};return n.handler=e,n.args=t,n},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,r)),r};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var e=this.root,t="setImmediate$"+e.Math.random()+"$",r=function r(n){var i=r.instance;n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i.runIfPresent(+n.data.slice(t.length))};r.instance=this,e.addEventListener("message",r,!1);var n=function e(){var t=e.messagePrefix,r=e.instance,n=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(t+n,"*"),n};return n.instance=this,n.messagePrefix=t,n},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var e=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){var r=t.data;e.runIfPresent(r)};var r=function e(){var t=e.channel,r=e.instance.addFromSetImmediateArguments(arguments);return t.port2.postMessage(r),r};return r.channel=t,r.instance=this,r},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function e(){var t=e.instance,r=t.root.document,n=r.documentElement,i=t.addFromSetImmediateArguments(arguments),s=r.createElement("script");return s.onreadystatechange=function(){t.runIfPresent(i),s.onreadystatechange=null,n.removeChild(s),s=null},n.appendChild(s),i};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,r),0),r};return e.instance=this,e},e}();t.ImmediateDefinition=s,t.Immediate=new s(i.root)}).call(this,r(124).clearImmediate,r(124).setImmediate)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(871),s=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=i.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(i.Immediate.clearImmediate(r),t.scheduled=void 0)},t}(r(137).AsyncAction);t.AsapAction=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(326),a=r(138),o=function(e){function t(t,r,n){void 0===r&&(r=0),void 0===n&&(n=s.asap),e.call(this),this.source=t,this.delayTime=r,this.scheduler=n,(!a.isNumeric(r)||r<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=s.asap)}return n(t,e),t.create=function(e,r,n){return void 0===r&&(r=0),void 0===n&&(n=s.asap),new t(e,r,n)},t.dispatch=function(e){var t=e.source,r=e.subscriber;return this.add(t.subscribe(r))},t.prototype._subscribe=function(e){var r=this.delayTime,n=this.source;return this.scheduler.schedule(t.dispatch,r,{source:n,subscriber:e})},t}(i.Observable);t.SubscribeOnObservable=o},function(e,t,r){"use strict";var n=r(873);t.subscribeOn=function(e,t){return void 0===t&&(t=0),function(r){return r.lift(new i(e,t))}};var i=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new n.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}()},function(e,t,r){"use strict";var n=r(874);t.subscribeOn=function(e,t){return void 0===t&&(t=0),n.subscribeOn(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(875);n.Observable.prototype.subscribeOn=i.subscribeOn},function(e,t,r){"use strict";var n=r(327);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.startWith.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(877);n.Observable.prototype.startWith=i.startWith},function(e,t,r){"use strict";var n=r(328);t.skipWhile=function(e){return n.skipWhile(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(879);n.Observable.prototype.skipWhile=i.skipWhile},function(e,t,r){"use strict";var n=r(329);t.skipUntil=function(e){return n.skipUntil(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(881);n.Observable.prototype.skipUntil=i.skipUntil},function(e,t,r){"use strict";var n=r(330);t.skipLast=function(e){return n.skipLast(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(883);n.Observable.prototype.skipLast=i.skipLast},function(e,t,r){"use strict";var n=r(331);t.skip=function(e){return n.skip(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(885);n.Observable.prototype.skip=i.skip},function(e,t,r){"use strict";var n=r(332);t.single=function(e){return n.single(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(887);n.Observable.prototype.single=i.single},function(e,t,r){"use strict";var n=r(333);t.shareReplay=function(e,t,r){return n.shareReplay(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(889);n.Observable.prototype.shareReplay=i.shareReplay},function(e,t,r){"use strict";var n=r(334);t.share=function(){return n.share()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(891);n.Observable.prototype.share=i.share},function(e,t,r){"use strict";var n=r(335);t.sequenceEqual=function(e,t){return n.sequenceEqual(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(893);n.Observable.prototype.sequenceEqual=i.sequenceEqual},function(e,t,r){"use strict";var n=r(228);t.scan=function(e,t){return arguments.length>=2?n.scan(e,t)(this):n.scan(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(895);n.Observable.prototype.scan=i.scan},function(e,t,r){"use strict";var n=r(34),i=r(336);t.sampleTime=function(e,t){return void 0===t&&(t=n.async),i.sampleTime(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(897);n.Observable.prototype.sampleTime=i.sampleTime},function(e,t,r){"use strict";var n=r(337);t.sample=function(e){return n.sample(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(899);n.Observable.prototype.sample=i.sample},function(e,t,r){"use strict";var n=r(338);t.retryWhen=function(e){return n.retryWhen(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(901);n.Observable.prototype.retryWhen=i.retryWhen},function(e,t,r){"use strict";var n=r(339);t.retry=function(e){return void 0===e&&(e=-1),n.retry(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(903);n.Observable.prototype.retry=i.retry},function(e,t,r){"use strict";var n=r(340);t.repeatWhen=function(e){return n.repeatWhen(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(905);n.Observable.prototype.repeatWhen=i.repeatWhen},function(e,t,r){"use strict";var n=r(341);t.repeat=function(e){return void 0===e&&(e=-1),n.repeat(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(907);n.Observable.prototype.repeat=i.repeat},function(e,t,r){"use strict";var n=r(133);t.reduce=function(e,t){return arguments.length>=2?n.reduce(e,t)(this):n.reduce(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(909);n.Observable.prototype.reduce=i.reduce},function(e,t,r){"use strict";var n=r(342),i=r(236);t.raceStatic=i.race,t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.race.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(911);n.Observable.prototype.race=i.race},function(e,t,r){"use strict";var n=r(343);t.publishLast=function(){return n.publishLast()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(913);n.Observable.prototype.publishLast=i.publishLast},function(e,t,r){"use strict";var n=r(344);t.publishReplay=function(e,t,r,i){return n.publishReplay(e,t,r,i)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(915);n.Observable.prototype.publishReplay=i.publishReplay},function(e,t,r){"use strict";var n=r(346);t.publishBehavior=function(e){return n.publishBehavior(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(917);n.Observable.prototype.publishBehavior=i.publishBehavior},function(e,t,r){"use strict";var n=r(347);t.publish=function(e){return n.publish(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(919);n.Observable.prototype.publish=i.publish},function(e,t,r){"use strict";var n=r(348);t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.pluck.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(921);n.Observable.prototype.pluck=i.pluck},function(e,t,r){"use strict";t.not=function(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}},function(e,t,r){"use strict";var n=r(349);t.partition=function(e,t){return n.partition(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(924);n.Observable.prototype.partition=i.partition},function(e,t,r){"use strict";var n=r(350);t.pairwise=function(){return n.pairwise()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(926);n.Observable.prototype.pairwise=i.pairwise},function(e,t,r){"use strict";var n=r(235);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.onErrorResumeNext.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(928);n.Observable.prototype.onErrorResumeNext=i.onErrorResumeNext},function(e,t,r){"use strict";var n=r(168);t.observeOn=function(e,t){return void 0===t&&(t=0),n.observeOn(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(930);n.Observable.prototype.observeOn=i.observeOn},function(e,t,r){"use strict";var n=r(108);t.multicast=function(e,t){return n.multicast(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(932);n.Observable.prototype.multicast=i.multicast},function(e,t,r){"use strict";var n=r(352);t.min=function(e){return n.min(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(934);n.Observable.prototype.min=i.min},function(e,t,r){"use strict";var n=r(353);t.mergeScan=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeScan(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(936);n.Observable.prototype.mergeScan=i.mergeScan},function(e,t,r){"use strict";var n=r(354);t.mergeMapTo=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMapTo(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(938);n.Observable.prototype.flatMapTo=i.mergeMapTo,n.Observable.prototype.mergeMapTo=i.mergeMapTo},function(e,t,r){"use strict";var n=r(139);t.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMap(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(940);n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},function(e,t,r){"use strict";var n=r(167);t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),n.mergeAll(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(942);n.Observable.prototype.mergeAll=i.mergeAll},function(e,t,r){"use strict";var n=r(355),i=r(166);t.mergeStatic=i.merge,t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.merge.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(944);n.Observable.prototype.merge=i.merge},function(e,t,r){"use strict";var n=r(356);t.max=function(e){return n.max(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(946);n.Observable.prototype.max=i.max},function(e,t,r){"use strict";var n=r(357);t.materialize=function(){return n.materialize()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(948);n.Observable.prototype.materialize=i.materialize},function(e,t,r){"use strict";var n=r(358);t.mapTo=function(e){return n.mapTo(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(950);n.Observable.prototype.mapTo=i.mapTo},function(e,t,r){"use strict";var n=r(135);t.map=function(e,t){return n.map(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(952);n.Observable.prototype.map=i.map},function(e,t,r){"use strict";var n=r(359);t.every=function(e,t){return n.every(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(954);n.Observable.prototype.every=i.every},function(e,t,r){"use strict";t.letProto=function(e){return e(this)}},function(e,t,r){"use strict";var n=r(4),i=r(956);n.Observable.prototype.let=i.letProto,n.Observable.prototype.letBind=i.letProto},function(e,t,r){"use strict";var n=r(360);t.last=function(e,t,r){return n.last(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(958);n.Observable.prototype.last=i.last},function(e,t,r){"use strict";var n=r(34),i=r(361);t.auditTime=function(e,t){return void 0===t&&(t=n.async),i.auditTime(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(960);n.Observable.prototype.auditTime=i.auditTime},function(e,t,r){"use strict";var n=r(229);t.audit=function(e){return n.audit(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(962);n.Observable.prototype.audit=i.audit},function(e,t,r){"use strict";var n=r(362);t.isEmpty=function(){return n.isEmpty()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(964);n.Observable.prototype.isEmpty=i.isEmpty},function(e,t,r){"use strict";var n=r(363);t.ignoreElements=function(){return n.ignoreElements()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(966);n.Observable.prototype.ignoreElements=i.ignoreElements},function(e,t,r){"use strict";var n=function(){function e(){this.values={}}return e.prototype.delete=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var r=this.values;for(var n in r)r.hasOwnProperty(n)&&null!==r[n]&&e.call(t,r[n],n)},e.prototype.clear=function(){this.values={}},e}();t.FastMap=n},function(e,t,r){"use strict";var n=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var r=this._keys.indexOf(e);return-1===r?(this._keys.push(e),this._values.push(t),this.size++):this._values[r]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return-1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var r=0;r<this.size;r++)e.call(t,this._values[r],this._keys[r])},e}();t.MapPolyfill=n},function(e,t,r){"use strict";var n=r(54),i=r(969);t.Map=n.root.Map||i.MapPolyfill},function(e,t,r){"use strict";var n=r(364);t.GroupedObservable=n.GroupedObservable,t.groupBy=function(e,t,r,i){return n.groupBy(e,t,r,i)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(971);n.Observable.prototype.groupBy=i.groupBy},function(e,t,r){"use strict";var n=r(365);t.first=function(e,t,r){return n.first(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(973);n.Observable.prototype.first=i.first},function(e,t,r){"use strict";var n=r(366);t.findIndex=function(e,t){return n.findIndex(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(975);n.Observable.prototype.findIndex=i.findIndex},function(e,t,r){"use strict";var n=r(230);t.find=function(e,t){return n.find(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(977);n.Observable.prototype.find=i.find},function(e,t,r){"use strict";var n=r(367);t._finally=function(e){return n.finalize(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(979);n.Observable.prototype.finally=i._finally,n.Observable.prototype._finally=i._finally},function(e,t,r){"use strict";var n=r(231);t.filter=function(e,t){return n.filter(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(981);n.Observable.prototype.filter=i.filter},function(e,t,r){"use strict";var n=r(368);t.elementAt=function(e,t){return n.elementAt(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(983);n.Observable.prototype.elementAt=i.elementAt},function(e,t,r){"use strict";var n=r(369);t.expand=function(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,n.expand(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(985);n.Observable.prototype.expand=i.expand},function(e,t,r){"use strict";var n=r(370);t.exhaustMap=function(e,t){return n.exhaustMap(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(987);n.Observable.prototype.exhaustMap=i.exhaustMap},function(e,t,r){"use strict";var n=r(371);t.exhaust=function(){return n.exhaust()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(989);n.Observable.prototype.exhaust=i.exhaust},function(e,t,r){"use strict";var n=r(372);t._do=function(e,t,r){return n.tap(e,t,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(991);n.Observable.prototype.do=i._do,n.Observable.prototype._do=i._do},function(e,t,r){"use strict";var n=r(373);t.distinctUntilKeyChanged=function(e,t){return n.distinctUntilKeyChanged(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(993);n.Observable.prototype.distinctUntilKeyChanged=i.distinctUntilKeyChanged},function(e,t,r){"use strict";var n=r(232);t.distinctUntilChanged=function(e,t){return n.distinctUntilChanged(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(995);n.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},function(e,t,r){"use strict";var n=r(54);function i(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}t.minimalSetImpl=i,t.Set=n.root.Set||i()},function(e,t,r){"use strict";var n=r(374);t.distinct=function(e,t){return n.distinct(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(998);n.Observable.prototype.distinct=i.distinct},function(e,t,r){"use strict";var n=r(375);t.delayWhen=function(e,t){return n.delayWhen(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1e3);n.Observable.prototype.delayWhen=i.delayWhen},function(e,t,r){"use strict";var n=r(34),i=r(376);t.delay=function(e,t){return void 0===t&&(t=n.async),i.delay(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1002);n.Observable.prototype.delay=i.delay},function(e,t,r){"use strict";var n=r(233);t.defaultIfEmpty=function(e){return void 0===e&&(e=null),n.defaultIfEmpty(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1004);n.Observable.prototype.defaultIfEmpty=i.defaultIfEmpty},function(e,t,r){"use strict";var n=r(34),i=r(377);t.debounceTime=function(e,t){return void 0===t&&(t=n.async),i.debounceTime(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1006);n.Observable.prototype.debounceTime=i.debounceTime},function(e,t,r){"use strict";var n=r(378);t.debounce=function(e){return n.debounce(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1008);n.Observable.prototype.debounce=i.debounce},function(e,t,r){"use strict";var n=r(379);t.dematerialize=function(){return n.dematerialize()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1010);n.Observable.prototype.dematerialize=i.dematerialize},function(e,t,r){"use strict";var n=r(380);t.count=function(e){return n.count(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1012);n.Observable.prototype.count=i.count},function(e,t,r){"use strict";var n=r(381);t.concatMapTo=function(e,t){return n.concatMapTo(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1014);n.Observable.prototype.concatMapTo=i.concatMapTo},function(e,t,r){"use strict";var n=r(234);t.concatMap=function(e,t){return n.concatMap(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1016);n.Observable.prototype.concatMap=i.concatMap},function(e,t,r){"use strict";var n=r(237);t.concatAll=function(){return n.concatAll()(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1018);n.Observable.prototype.concatAll=i.concatAll},function(e,t,r){"use strict";var n=r(382),i=r(141);t.concatStatic=i.concat,t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.concat.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1020);n.Observable.prototype.concat=i.concat},function(e,t,r){"use strict";var n=r(169);t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.combineLatest.apply(void 0,e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1022);n.Observable.prototype.combineLatest=i.combineLatest},function(e,t,r){"use strict";var n=r(383);t.combineAll=function(e){return n.combineAll(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1024);n.Observable.prototype.combineAll=i.combineAll},function(e,t,r){"use strict";var n=r(384);t._catch=function(e){return n.catchError(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1026);n.Observable.prototype.catch=i._catch,n.Observable.prototype._catch=i._catch},function(e,t,r){"use strict";var n=r(385);t.bufferWhen=function(e){return n.bufferWhen(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1028);n.Observable.prototype.bufferWhen=i.bufferWhen},function(e,t,r){"use strict";var n=r(386);t.bufferToggle=function(e,t){return n.bufferToggle(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1030);n.Observable.prototype.bufferToggle=i.bufferToggle},function(e,t,r){"use strict";var n=r(34),i=r(75),s=r(387);t.bufferTime=function(e){var t=arguments.length,r=n.async;i.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var a=null;t>=2&&(a=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),s.bufferTime(e,a,o,r)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1032);n.Observable.prototype.bufferTime=i.bufferTime},function(e,t,r){"use strict";var n=r(388);t.bufferCount=function(e,t){return void 0===t&&(t=null),n.bufferCount(e,t)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1034);n.Observable.prototype.bufferCount=i.bufferCount},function(e,t,r){"use strict";var n=r(389);t.buffer=function(e){return n.buffer(e)(this)}},function(e,t,r){"use strict";var n=r(4),i=r(1036);n.Observable.prototype.buffer=i.buffer},function(e,t,r){"use strict";var n=r(54);function i(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=t.length,i=0;i<n;i++){var s=t[i];for(var a in s)s.hasOwnProperty(a)&&(e[a]=s[a])}return e}function s(e){return e.Object.assign||i}t.assignImpl=i,t.getAssign=s,t.assign=s(n.root)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(r(136).AsyncScheduler);t.QueueScheduler=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(r(137).AsyncAction);t.QueueAction=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(50),s=r(14),a=r(4),o=r(46),u=r(54),c=r(163),l=r(51),d=r(49),h=r(1038),f=function(e){function t(t,r){if(t instanceof a.Observable)e.call(this,r,t);else{if(e.call(this),this.WebSocketCtor=u.root.WebSocket,this._output=new i.Subject,"string"==typeof t?this.url=t:h.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new c.ReplaySubject}}return n(t,e),t.prototype.resultSelector=function(e){return JSON.parse(e.data)},t.create=function(e){return new t(e)},t.prototype.lift=function(e){var r=new t(this,this.destination);return r.operator=e,r},t.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new c.ReplaySubject),this._output=new i.Subject},t.prototype.multiplex=function(e,t,r){var n=this;return new a.Observable(function(i){var s=l.tryCatch(e)();s===d.errorObject?i.error(d.errorObject.e):n.next(s);var a=n.subscribe(function(e){var t=l.tryCatch(r)(e);t===d.errorObject?i.error(d.errorObject.e):t&&i.next(e)},function(e){return i.error(e)},function(){return i.complete()});return function(){var e=l.tryCatch(t)();e===d.errorObject?i.error(d.errorObject.e):n.next(e),a.unsubscribe()}})},t.prototype._connectSocket=function(){var e=this,t=this.WebSocketCtor,r=this._output,n=null;try{n=this.protocol?new t(this.url,this.protocol):new t(this.url),this.socket=n,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(e){return void r.error(e)}var i=new o.Subscription(function(){e.socket=null,n&&1===n.readyState&&n.close()});n.onopen=function(t){var a=e.openObserver;a&&a.next(t);var o=e.destination;e.destination=s.Subscriber.create(function(e){return 1===n.readyState&&n.send(e)},function(t){var i=e.closingObserver;i&&i.next(void 0),t&&t.code?n.close(t.code,t.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()},function(){var t=e.closingObserver;t&&t.next(void 0),n.close(),e._resetState()}),o&&o instanceof c.ReplaySubject&&i.add(o.subscribe(e.destination))},n.onerror=function(t){e._resetState(),r.error(t)},n.onclose=function(t){e._resetState();var n=e.closeObserver;n&&n.next(t),t.wasClean?r.complete():r.error(t)},n.onmessage=function(t){var n=l.tryCatch(e.resultSelector)(t);n===d.errorObject?r.error(d.errorObject.e):r.next(n)}},t.prototype._subscribe=function(e){var t=this,r=this.source;if(r)return r.subscribe(e);this.socket||this._connectSocket();var n=new o.Subscription;return n.add(this._output.subscribe(e)),n.add(function(){var e=t.socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())}),n},t.prototype.unsubscribe=function(){var t=this.source,r=this.socket;r&&1===r.readyState&&(r.close(),this._resetState()),e.prototype.unsubscribe.call(this),t||(this.destination=new c.ReplaySubject)},t}(i.AnonymousSubject);t.WebSocketSubject=f},function(e,t,r){"use strict";var n=r(1041);t.webSocket=n.WebSocketSubject.create},function(e,t,r){"use strict";var n=r(4),i=r(1042);n.Observable.webSocket=i.webSocket},function(e,t,r){"use strict";var n=r(391);t.ajax=n.AjaxObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1044);n.Observable.ajax=i.ajax},function(e,t,r){"use strict";var n=r(164);t.zip=n.zipStatic},function(e,t,r){"use strict";var n=r(4),i=r(1046);n.Observable.zip=i.zip},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(138),s=r(4),a=r(34),o=r(75),u=r(165),c=function(e){function t(t,r,n){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,i.isNumeric(r)?this.period=Number(r)<1?1:Number(r):o.isScheduler(r)&&(n=r),o.isScheduler(n)||(n=a.async),this.scheduler=n,this.dueTime=u.isDate(t)?+t-this.scheduler.now():t}return n(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),new t(e,r,n)},t.dispatch=function(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}},t.prototype._subscribe=function(e){var r=this.period,n=this.dueTime;return this.scheduler.schedule(t.dispatch,n,{index:0,period:r,subscriber:e})},t}(s.Observable);t.TimerObservable=c},function(e,t,r){"use strict";var n=r(4),i=r(392);n.Observable.timer=i.timer},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.error=t,this.scheduler=r}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.error;e.subscriber.error(t)},t.prototype._subscribe=function(e){var r=this.error,n=this.scheduler;if(e.syncErrorThrowable=!0,n)return n.schedule(t.dispatch,0,{error:r,subscriber:e});e.error(r)},t}(r(4).Observable);t.ErrorObservable=i},function(e,t,r){"use strict";var n=r(1050);t._throw=n.ErrorObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1051);n.Observable.throw=i._throw},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(20),a=r(21),o=function(e){function t(t,r){e.call(this),this.resourceFactory=t,this.observableFactory=r}return n(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t,r=this.resourceFactory,n=this.observableFactory;try{return t=r(),new u(e,t,n)}catch(t){e.error(t)}},t}(i.Observable);t.UsingObservable=o;var u=function(e){function t(t,r,n){e.call(this,t),this.resource=r,this.observableFactory=n,t.add(r),this.tryUse()}return n(t,e),t.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(s.subscribeToResult(this,e))}catch(e){this._error(e)}},t}(a.OuterSubscriber)},function(e,t,r){"use strict";var n=r(1053);t.using=n.UsingObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1054);n.Observable.using=i.using},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r,n){e.call(this),this.start=t,this._count=r,this.scheduler=n}return n(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),void 0===r&&(r=0),new t(e,r,n)},t.dispatch=function(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=0,n=this.start,i=this._count,s=this.scheduler;if(s)return s.schedule(t.dispatch,0,{index:r,count:i,start:n,subscriber:e});for(;;){if(r++>=i){e.complete();break}if(e.next(n++),e.closed)break}},t}(r(4).Observable);t.RangeObservable=i},function(e,t,r){"use strict";var n=r(1056);t.range=n.RangeObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1057);n.Observable.range=i.range},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function i(e){var t=e.obj,r=e.keys,n=e.length,i=e.index,s=e.subscriber;if(i!==n){var a=r[i];s.next([a,t[a]]),e.index=i+1,this.schedule(e)}else s.complete()}var s=function(e){function t(t,r){e.call(this),this.obj=t,this.scheduler=r,this.keys=Object.keys(t)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this.keys,r=this.scheduler,n=t.length;if(r)return r.schedule(i,0,{obj:this.obj,keys:t,length:n,index:0,subscriber:e});for(var s=0;s<n;s++){var a=t[s];e.next([a,this.obj[a]])}e.complete()},t}(r(4).Observable);t.PairsObservable=s},function(e,t,r){"use strict";var n=r(1059);t.pairs=n.PairsObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1060);n.Observable.pairs=i.pairs},function(e,t,r){"use strict";var n=r(235);t.onErrorResumeNext=n.onErrorResumeNextStatic},function(e,t,r){"use strict";var n=r(4),i=r(1062);n.Observable.onErrorResumeNext=i.onErrorResumeNext},function(e,t,r){"use strict";var n=r(4),i=r(397);n.Observable.of=i.of},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(239),a=function(e){function t(){e.call(this)}return n(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){s.noop()},t}(i.Observable);t.NeverObservable=a},function(e,t,r){"use strict";var n=r(1065);t.never=n.NeverObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1066);n.Observable.never=i.never},function(e,t,r){"use strict";var n=r(4),i=r(236);n.Observable.race=i.race},function(e,t,r){"use strict";var n=r(4),i=r(166);n.Observable.merge=i.merge},function(e,t,r){"use strict";var n=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this)}return n(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(46).Subscription);t.Action=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(138),s=r(4),a=r(34),o=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=a.async),e.call(this),this.period=t,this.scheduler=r,(!i.isNumeric(t)||t<0)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=a.async)}return n(t,e),t.create=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=a.async),new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.subscriber,n=e.period;r.next(t),r.closed||(e.index+=1,this.schedule(e,n))},t.prototype._subscribe=function(e){var r=this.period,n=this.scheduler;e.add(n.schedule(t.dispatch,r,{index:0,subscriber:e,period:r}))},t}(s.Observable);t.IntervalObservable=o},function(e,t,r){"use strict";var n=r(1072);t.interval=n.IntervalObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1073);n.Observable.interval=i.interval},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(20),a=r(21),o=function(e){function t(t,r,n){e.call(this),this.condition=t,this.thenSource=r,this.elseSource=n}return n(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this.condition,r=this.thenSource,n=this.elseSource;return new u(e,t,r,n)},t}(i.Observable);t.IfObservable=o;var u=function(e){function t(t,r,n,i){e.call(this,t),this.condition=r,this.thenSource=n,this.elseSource=i,this.tryIf()}return n(t,e),t.prototype.tryIf=function(){var e=this.condition,t=this.thenSource,r=this.elseSource;try{var n=e()?t:r;n?this.add(s.subscribeToResult(this,n)):this._complete()}catch(e){this._error(e)}},t}(a.OuterSubscriber)},function(e,t,r){"use strict";var n=r(1075);t._if=n.IfObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1076);n.Observable.if=i._if},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(75),a=function(e){return e},o=function(e){function t(t,r,n,i,s){e.call(this),this.initialState=t,this.condition=r,this.iterate=n,this.resultSelector=i,this.scheduler=s}return n(t,e),t.create=function(e,r,n,i,o){return 1==arguments.length?new t(e.initialState,e.condition,e.iterate,e.resultSelector||a,e.scheduler):void 0===i||s.isScheduler(i)?new t(e,r,n,a,i):new t(e,r,n,i,o)},t.prototype._subscribe=function(e){var r=this.initialState;if(this.scheduler)return this.scheduler.schedule(t.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:r});for(var n=this.condition,i=this.resultSelector,s=this.iterate;;){if(n){var a=void 0;try{a=n(r)}catch(t){return void e.error(t)}if(!a){e.complete();break}}var o=void 0;try{o=i(r)}catch(t){return void e.error(t)}if(e.next(o),e.closed)break;try{r=s(r)}catch(t){return void e.error(t)}}},t.dispatch=function(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}},t}(i.Observable);t.GenerateObservable=o},function(e,t,r){"use strict";var n=r(1078);t.generate=n.GenerateObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1079);n.Observable.generate=i.generate},function(e,t,r){"use strict";var n=r(394);t.fromPromise=n.PromiseObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1081);n.Observable.fromPromise=i.fromPromise},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(174),s=r(4),a=r(46),o=function(e){function t(t,r,n){e.call(this),this.addHandler=t,this.removeHandler=r,this.selector=n}return n(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this,r=this.removeHandler,n=this.selector?function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];t._callSelector(e,r)}:function(t){e.next(t)},s=this._callAddHandler(n,e);i.isFunction(r)&&e.add(new a.Subscription(function(){r(n,s)}))},t.prototype._callSelector=function(e,t){try{var r=this.selector.apply(this,t);e.next(r)}catch(t){e.error(t)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(e){t.error(e)}},t}(s.Observable);t.FromEventPatternObservable=o},function(e,t,r){"use strict";var n=r(1083);t.fromEventPattern=n.FromEventPatternObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1084);n.Observable.fromEventPattern=i.fromEventPattern},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(51),a=r(174),o=r(49),u=r(46),c=Object.prototype.toString;var l=function(e){function t(t,r,n,i){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return n(t,e),t.create=function(e,r,n,i){return a.isFunction(n)&&(i=n,n=void 0),new t(e,r,i,n)},t.setupSubscription=function(e,r,n,i,s){var a;if(function(e){return!!e&&"[object NodeList]"===c.call(e)}(e)||function(e){return!!e&&"[object HTMLCollection]"===c.call(e)}(e))for(var o=0,l=e.length;o<l;o++)t.setupSubscription(e[o],r,n,i,s);else if(function(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var d=e;e.addEventListener(r,n,s),a=function(){return d.removeEventListener(r,n)}}else if(function(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var h=e;e.on(r,n),a=function(){return h.off(r,n)}}else{if(!function(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e))throw new TypeError("Invalid event target");var f=e;e.addListener(r,n),a=function(){return f.removeListener(r,n)}}i.add(new u.Subscription(a))},t.prototype._subscribe=function(e){var r=this.sourceObj,n=this.eventName,i=this.options,a=this.selector,u=a?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=s.tryCatch(a).apply(void 0,t);n===o.errorObject?e.error(o.errorObject.e):e.next(n)}:function(t){return e.next(t)};t.setupSubscription(r,n,u,e,i)},t}(i.Observable);t.FromEventObservable=l},function(e,t,r){"use strict";var n=r(1086);t.fromEvent=n.FromEventObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1087);n.Observable.fromEvent=i.fromEvent},function(e,t,r){"use strict";var n=r(4),i=r(396);n.Observable.from=i.from},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(89),a=r(77),o=r(20),u=r(21),c=function(e){function t(t,r){e.call(this),this.sources=t,this.resultSelector=r}return n(t,e),t.create=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];if(null===e||0===arguments.length)return new s.EmptyObservable;var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0]),0===e.length?new s.EmptyObservable:new t(e,n)},t.prototype._subscribe=function(e){return new l(e,this.sources,this.resultSelector)},t}(i.Observable);t.ForkJoinObservable=c;var l=function(e){function t(t,r,n){e.call(this,t),this.sources=r,this.resultSelector=n,this.completed=0,this.haveValues=0;var i=r.length;this.total=i,this.values=new Array(i);for(var s=0;s<i;s++){var a=r[s],u=o.subscribeToResult(this,a,null,s);u&&(u.outerIndex=s,this.add(u))}}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,r=this.haveValues,n=this.resultSelector,i=this.values,s=i.length;if(e._hasValue){if(this.completed++,this.completed===s){if(r===s){var a=n?n.apply(this,i):i;t.next(a)}t.complete()}}else t.complete()},t}(u.OuterSubscriber)},function(e,t,r){"use strict";var n=r(1090);t.forkJoin=n.ForkJoinObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1091);n.Observable.forkJoin=i.forkJoin},function(e,t,r){"use strict";var n=r(89);t.empty=n.EmptyObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1093);n.Observable.empty=i.empty},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(20),a=r(21),o=function(e){function t(t){e.call(this),this.observableFactory=t}return n(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new u(e,this.observableFactory)},t}(i.Observable);t.DeferObservable=o;var u=function(e){function t(t,r){e.call(this,t),this.factory=r,this.tryDefer()}return n(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(s.subscribeToResult(this,e))},t}(a.OuterSubscriber)},function(e,t,r){"use strict";var n=r(1095);t.defer=n.DeferObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1096);n.Observable.defer=i.defer},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(238),a=r(89),o=function(e){function t(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){var n=e.length;return 0===n?new a.EmptyObservable:1===n?new s.ScalarObservable(e[0],r):new t(e,r)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,n=e.length,i=e.subscriber;i.closed||(r>=n?i.complete():(i.next(t[r]),e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.arrayLike,n=this.scheduler,i=r.length;if(n)return n.schedule(t.dispatch,0,{arrayLike:r,index:0,length:i,subscriber:e});for(var s=0;s<i&&!e.closed;s++)e.next(r[s]);e.complete()},t}(i.Observable);t.ArrayLikeObservable=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(54),s=r(4),a=r(142),o=function(e){function t(t,r){if(e.call(this),this.scheduler=r,null==t)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[a.iterator];if(!t&&"string"==typeof e)return new u(e);if(!t&&void 0!==e.length)return new c(e);if(!t)throw new TypeError("object is not iterable");return e[a.iterator]()}(t)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.hasError,n=e.iterator,i=e.subscriber;if(r)i.error(e.error);else{var s=n.next();s.done?i.complete():(i.next(s.value),e.index=t+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(e))}},t.prototype._subscribe=function(e){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});for(;;){var i=r.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed){"function"==typeof r.return&&r.return();break}}},t}(s.Observable);t.IteratorObservable=o;var u=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[a.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),c=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=function(e){var t=+e.length;if(isNaN(t))return 0;if(0===t||!function(e){return"number"==typeof e&&i.root.isFinite(e)}(t))return t;if((t=function(e){var t=+e;return 0===t?t:isNaN(t)?t:t<0?-1:1}(t)*Math.floor(Math.abs(t)))<=0)return 0;if(t>l)return l;return t}(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[a.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}();var l=Math.pow(2,53)-1},function(e,t,r){"use strict";var n=r(4),i=r(141);n.Observable.concat=i.concat},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r,n){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=n,this.index=0}return n(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(r(14).Subscriber);t.InnerSubscriber=i},function(e,t,r){"use strict";var n=r(75),i=r(77),s=r(90),a=r(169);t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,o=null;return n.isScheduler(e[e.length-1])&&(o=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&i.isArray(e[0])&&(e=e[0]),new s.ArrayObservable(e,o).lift(new a.CombineLatestOperator(r))}},function(e,t,r){"use strict";var n=r(4),i=r(1102);n.Observable.combineLatest=i.combineLatest},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(51),a=r(49),o=r(170),u=function(e){function t(t,r,n,i,s){e.call(this),this.callbackFunc=t,this.selector=r,this.args=n,this.context=i,this.scheduler=s}return n(t,e),t.create=function(e,r,n){return void 0===r&&(r=void 0),function(){for(var i=[],s=0;s<arguments.length;s++)i[s-0]=arguments[s];return new t(e,r,i,this,n)}},t.prototype._subscribe=function(e){var t=this.callbackFunc,r=this.args,n=this.scheduler,i=this.subject;if(n)return n.schedule(c,0,{source:this,subscriber:e,context:this.context});if(!i){i=this.subject=new o.AsyncSubject;var u=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,o=n.subject,u=t.shift();if(u)o.error(u);else if(i){var c=s.tryCatch(i).apply(this,t);c===a.errorObject?o.error(a.errorObject.e):(o.next(c),o.complete())}else o.next(t.length<=1?t[0]:t),o.complete()};u.source=this,s.tryCatch(t).apply(this.context,r.concat(u))===a.errorObject&&i.error(a.errorObject.e)}return i.subscribe(e)},t}(i.Observable);function c(e){var t=this,r=e.source,n=e.subscriber,i=e.context,u=r,c=u.callbackFunc,h=u.args,f=u.scheduler,p=r.subject;if(!p){p=r.subject=new o.AsyncSubject;var m=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var i=e.source,o=i.selector,u=i.subject,c=r.shift();if(c)t.add(f.schedule(d,0,{err:c,subject:u}));else if(o){var h=s.tryCatch(o).apply(this,r);h===a.errorObject?t.add(f.schedule(d,0,{err:a.errorObject.e,subject:u})):t.add(f.schedule(l,0,{value:h,subject:u}))}else{var p=r.length<=1?r[0]:r;t.add(f.schedule(l,0,{value:p,subject:u}))}};m.source=r,s.tryCatch(c).apply(i,h.concat(m))===a.errorObject&&t.add(f.schedule(d,0,{err:a.errorObject.e,subject:p}))}t.add(p.subscribe(n))}function l(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function d(e){var t=e.err;e.subject.error(t)}t.BoundNodeCallbackObservable=u},function(e,t,r){"use strict";var n=r(1104);t.bindNodeCallback=n.BoundNodeCallbackObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1105);n.Observable.bindNodeCallback=i.bindNodeCallback},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4),s=r(51),a=r(49),o=r(170),u=function(e){function t(t,r,n,i,s){e.call(this),this.callbackFunc=t,this.selector=r,this.args=n,this.context=i,this.scheduler=s}return n(t,e),t.create=function(e,r,n){return void 0===r&&(r=void 0),function(){for(var i=[],s=0;s<arguments.length;s++)i[s-0]=arguments[s];return new t(e,r,i,this,n)}},t.prototype._subscribe=function(e){var r=this.callbackFunc,n=this.args,i=this.scheduler,u=this.subject;if(i)return i.schedule(t.dispatch,0,{source:this,subscriber:e,context:this.context});if(!u){u=this.subject=new o.AsyncSubject;var c=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,o=n.subject;if(i){var u=s.tryCatch(i).apply(this,t);u===a.errorObject?o.error(a.errorObject.e):(o.next(u),o.complete())}else o.next(t.length<=1?t[0]:t),o.complete()};c.source=this,s.tryCatch(r).apply(this.context,n.concat(c))===a.errorObject&&u.error(a.errorObject.e)}return u.subscribe(e)},t.dispatch=function(e){var t=this,r=e.source,n=e.subscriber,i=e.context,u=r.callbackFunc,d=r.args,h=r.scheduler,f=r.subject;if(!f){f=r.subject=new o.AsyncSubject;var p=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var i=e.source,o=i.selector,u=i.subject;if(o){var d=s.tryCatch(o).apply(this,r);d===a.errorObject?t.add(h.schedule(l,0,{err:a.errorObject.e,subject:u})):t.add(h.schedule(c,0,{value:d,subject:u}))}else{var f=r.length<=1?r[0]:r;t.add(h.schedule(c,0,{value:f,subject:u}))}};p.source=r,s.tryCatch(u).apply(i,d.concat(p))===a.errorObject&&f.error(a.errorObject.e)}t.add(f.subscribe(n))},t}(i.Observable);function c(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function l(e){var t=e.err;e.subject.error(t)}t.BoundCallbackObservable=u},function(e,t,r){"use strict";var n=r(1107);t.bindCallback=n.BoundCallbackObservable.create},function(e,t,r){"use strict";var n=r(4),i=r(1108);n.Observable.bindCallback=i.bindCallback},function(e,t,r){"use strict";var n=r(14),i=r(173),s=r(401);t.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(s.empty)}},function(e,t,r){"use strict";var n=r(50);t.Subject=n.Subject,t.AnonymousSubject=n.AnonymousSubject;var i=r(4);t.Observable=i.Observable,r(1109),r(1106),r(1103),r(1100),r(1097),r(1094),r(1092),r(1089),r(1088),r(1085),r(1082),r(1080),r(1077),r(1074),r(1069),r(1068),r(1067),r(1064),r(1063),r(1061),r(1058),r(1055),r(1052),r(1049),r(1047),r(1045),r(1043),r(1037),r(1035),r(1033),r(1031),r(1029),r(1027),r(1025),r(1023),r(1021),r(1019),r(1017),r(1015),r(1013),r(1011),r(1009),r(1007),r(1005),r(1003),r(1001),r(999),r(996),r(994),r(992),r(990),r(988),r(986),r(984),r(982),r(980),r(978),r(976),r(974),r(972),r(967),r(965),r(963),r(961),r(959),r(957),r(955),r(953),r(951),r(949),r(947),r(945),r(943),r(941),r(939),r(937),r(935),r(933),r(931),r(929),r(927),r(925),r(922),r(920),r(918),r(916),r(914),r(912),r(910),r(908),r(906),r(904),r(902),r(900),r(898),r(896),r(894),r(892),r(890),r(888),r(886),r(884),r(882),r(880),r(878),r(876),r(869),r(867),r(865),r(863),r(861),r(859),r(857),r(855),r(853),r(851),r(850),r(848),r(846),r(844),r(842),r(841),r(839),r(837),r(835),r(833),r(831),r(829),r(827);var s=r(46);t.Subscription=s.Subscription;var a=r(14);t.Subscriber=a.Subscriber;var o=r(170);t.AsyncSubject=o.AsyncSubject;var u=r(163);t.ReplaySubject=u.ReplaySubject;var c=r(345);t.BehaviorSubject=c.BehaviorSubject;var l=r(351);t.ConnectableObservable=l.ConnectableObservable;var d=r(140);t.Notification=d.Notification;var h=r(162);t.EmptyError=h.EmptyError;var f=r(134);t.ArgumentOutOfRangeError=f.ArgumentOutOfRangeError;var p=r(171);t.ObjectUnsubscribedError=p.ObjectUnsubscribedError;var m=r(316);t.TimeoutError=m.TimeoutError;var _=r(402);t.UnsubscriptionError=_.UnsubscriptionError;var g=r(319);t.TimeInterval=g.TimeInterval;var y=r(224);t.Timestamp=y.Timestamp;var v=r(825);t.TestScheduler=v.TestScheduler;var b=r(303);t.VirtualTimeScheduler=b.VirtualTimeScheduler;var $=r(391);t.AjaxResponse=$.AjaxResponse,t.AjaxError=$.AjaxError,t.AjaxTimeoutError=$.AjaxTimeoutError;var w=r(240);t.pipe=w.pipe;var k=r(326),M=r(34),S=r(390),O=r(822),x=r(173),T=r(142),E=r(172),D=r(818);t.operators=D;var L={asap:k.asap,queue:S.queue,animationFrame:O.animationFrame,async:M.async};t.Scheduler=L;var P={rxSubscriber:x.rxSubscriber,observable:E.observable,iterator:T.iterator};t.Symbol=P},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(65)),i=o(r(24)),s=o(r(404)),a=r(241);function o(e){return e&&e.__esModule?e:{default:e}}const u=7;t.default=class{constructor(e,t){this.config=e,this.db=t,this.blockedTokens=new Set,this.stagedTokenDomain=new Map,this._currentDay=null,this.subjectTokens=new s.default.Subject,this.db.db.on("populate",()=>{(0,a.migrateTokenDomain)(this,this.config.tokenDomainCountThreshold)})}init(){const e=this.db.ready.then(()=>this.loadBlockedTokens());this._tokenSubscription=this.subjectTokens.subscribe(e=>{this._addTokenOnFirstParty(e)});const t=this.subjectTokens.observeOn(s.default.Scheduler.async).auditTime(6e4);return this._persistSubscription=t.subscribe(()=>{this._persist()}),this._cleanupSubscription=s.default.Observable.merge(s.default.Observable.fromPromise(e).map(()=>this.currentDay),this.subjectTokens.observeOn(s.default.Scheduler.async).pluck("day")).distinctUntilChanged().delay(5e3).subscribe(()=>{this.clean()}),e}unload(){[this._persistSubscription,this._cleanupSubscription,this._tokenSubscription].forEach(e=>{e&&e.unsubscribe()})}get currentDay(){if(!this._currentDay||Date.now()>this._nextDayCheck){const e=n.getTime().substr(0,8);e!==this._currentDay&&(this._nextDayCheck=Date.now()+36e5),this._currentDay=e}return this._currentDay}loadBlockedTokens(){return this.db.tokenBlocked.toCollection().uniqueKeys().then(e=>{this.blockedTokens.clear(),e.forEach(e=>this.blockedTokens.add(e))})}addTokenOnFirstParty(e,t,r){const n=r||this.currentDay;this.subjectTokens.next({token:e,firstParty:t,day:n})}_addTokenOnFirstParty(e){let t=e.token,r=e.firstParty,n=e.day;this.stagedTokenDomain.has(t)||this.stagedTokenDomain.set(t,new Map);const i=this.stagedTokenDomain.get(t);return i.set(r,n),this._checkThresholdReached(t,i)}_checkThresholdReached(e,t){return t.size>=this.config.tokenDomainCountThreshold&&this.addBlockedToken(e),this.blockedTokens.has(e)}addBlockedToken(e){this.config.debugMode&&i.default.log("tokenDomain","will be blocked:",e);const t=n.newUTCDate();t.setDate(t.getDate()+u);const r=n.dateString(t);return this.blockedTokens.add(e),this.db.tokenBlocked.put({token:e,expires:r})}isTokenDomainThresholdReached(e){return this.config.tokenDomainCountThreshold<2||this.blockedTokens.has(e)}_persist(){const e=[],t=[];return this.stagedTokenDomain.forEach((r,n)=>{t.push(n),r.forEach((t,r)=>{e.push({token:n,fp:r,mtime:t})})}),this.db.tokenDomain.bulkPut(e).catch(e=>{i.default.error("tokendomain","bulkPut errors",e)}).then(()=>Promise.all(t.map(e=>this.db.tokenDomain.where("token").equals(e).count(t=>t>=this.config.tokenDomainCountThreshold?(this.stagedTokenDomain.delete(e),this.addBlockedToken(e)):Promise.resolve())))).catch(e=>{i.default.error("tokendomain","count error",e)})}clean(){const e=n.newUTCDate();e.setDate(e.getDate()-u);const t=n.dateString(e),r=this.db.tokenBlocked.where("expires").below(this.currentDay).delete().then(()=>this.loadBlockedTokens()),i=this.db.tokenDomain.where("mtime").below(t).delete();return Promise.all([r,i])}clear(){return this.blockedTokens.clear(),this.stagedTokenDomain.clear(),Promise.all([this.db.tokenBlocked.clear(),this.db.tokenDomain.clear()])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(59)),i=r(91),s=c(r(24)),a=r(406),o=c(r(1112)),u=c(r(817));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){let t=null;try{t=atob(e)}catch(e){}return t}t.default=class{constructor(e,t,r,n,i,s){this.qsWhitelist=e,this.config=n,this.debug=!1,this.privateValues=t,this.hashProb=r,this.tokenDomain=new o.default(n,s),this.blockLog=new u.default(i,n)}init(){return Promise.all([this.tokenDomain.init(),this.blockLog.init()])}unload(){this.tokenDomain.unload(),this.blockLog.unload()}findBadTokens(e){const t={};return e.isTracker=this.qsWhitelist.isTrackerDomain(e.urlParts.generalDomainHash),e.badTokens=this.checkTokens(e.urlParts,e.sourceUrl,e.cookieValues,t,e.sourceUrlParts,e.isTracker,e.isPrivate),e.incrementStat&&(Object.keys(t).forEach(r=>{t[r]>0&&(e.incrementStat(`token.has_${r}`),e.incrementStat(`token.${r}`,t[r]))}),e.badTokens.length>0&&(e.incrementStat("bad_qs"),e.incrementStat("bad_tokens",e.badTokens.length))),!0}checkTokens(e,t,r,o,u,c,d){if(!c)return[];if(0===e.query.length&&0===e.parameters.length)return[];const h=e.generalDomainHash,f=u.generalDomainHash,p=[],m=Object.keys(r).filter(e=>e.length>=this.config.shortTokenLength),_=Object.keys(this.privateValues),g=e.getKeyValues().map(r=>{const s=r.k,o=""+r.v;if(o.length<this.config.shortTokenLength)return"short";if(t.indexOf(o)>-1)return"sourceUrl";const c=function(e){let t=(0,i.dURIC)(e),r=(0,i.dURIC)(t);for(;t!==r;)t=r,r=(0,i.dURIC)(t);return t}(o),g=[o,c,l(o),l(c)].filter(e=>e&&e.length>0);function y(e){return g.some(t=>t.indexOf(e)>-1||e.indexOf(t)>-1)}const v=m.some(y),b=_.some(y),$=b;if(!$){if(this.qsWhitelist.isSafeKey(h,(0,n.default)(s)))return"safekey";if(this.qsWhitelist.isSafeToken(h,(0,n.default)(o)))return"whitelisted";if(c.length<12&&!(0,a.isMostlyNumeric)(c)&&!this.hashProb.isHash(c))return"short_no_hash"}let w;return w=v?"cookie":b?"private":"qs",$||(d||this.tokenDomain.addTokenOnFirstParty((0,n.default)(o),f),this.tokenDomain.isTokenDomainThresholdReached((0,n.default)(o)))?(this.blockLog.add(u.generalDomain,e.hostname,s,o,w),p.push(o),`${w}_countThreshold`):(v&&this.config.blockCookieNewToken&&(this.blockLog.add(u.generalDomain,e.hostname,s,o,w),p.push(o)),`${w}_newToken`)});if(this.debug){const t=e.getKeyValues().map((e,t)=>Object.assign(e,{class:g[t]}));s.default.log("tokens",e.hostname,t)}return g.forEach(e=>{o[e]||(o[e]=0),o[e]+=1}),p}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.config=e}checkBadSubdomain(e,t){const r=this.config.subdomainRewriteRules||{},n=e.urlParts.hostname,i=Object.keys(r);for(let s=0;s<i.length;s+=1){const a=i[s];if(n.endsWith(a)){const i=e.url.replace(n,r[a]);return t.redirectTo(i),!1}}return!0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(410)),i=s(r(24));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){this.redirectCache=new n.default,this.cacheTimeout=1e4,this.redirectTaggerCache=new n.default}isFromRedirect(e){return this.redirectCache.has(e)}checkRedirectStatus(e){if(302===e.responseStatus){const t=e.getResponseHeader("Location");if(!t)return i.default.log(e,'302 without "Location" in header?'),!0;if(t.startsWith("/")){const r=`${e.urlParts.protocol}://${e.urlParts.hostname}${t}`;this.redirectCache.add(r,this.cacheTimeout)}else(t.startsWith("http://")||t.startsWith("https://"))&&this.redirectCache.add(t,this.cacheTimeout)}return!0}checkRedirect(e){return!e.isRedirect||void 0===e.requestId||(this.redirectTaggerCache.add(e.requestId,this.cacheTimeout),!1)}confirmRedirect(e){return!(void 0!==e.requestId&&this.redirectTaggerCache.has(e.requestId)||e.isFullPage()&&e.isRedirect)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.tpEvents=e,this._requestCounters=new Map}logMainDocument(e){return!e.isFullPage()||(this.tpEvents.onFullPage(e.urlParts,e.tabId,e.isPrivate),!1)}attachStatCounter(e){const t=e.urlParts,r=this.tpEvents.get(e.url,t,e.sourceUrl,e.sourceUrlParts,e.tabId);e.reqLog=r;const n=(e,t)=>{this.tpEvents.incrementStat(r,e,t||1)};e.incrementStat=n,e.getPageAnnotations=this.tpEvents.getAnnotations.bind(this.tpEvents,e.tabId);const i=this.tpEvents._active[e.tabId];return i&&e.trigger&&i.addTrigger(t.hostname,e.trigger),e.requestId&&this._requestCounters.set(e.requestId,n),!0}reattachStatCounter(e){const t=e.requestId;return!(!t||!this._requestCounters.has(t)||(e.incrementStat=this._requestCounters.get(t),this._requestCounters.delete(t),0))}logRequestMetadata(e){const t=e.urlParts,r=e.incrementStat;return e.url.indexOf(this.tpEvents.config.placeHolder)>-1&&r("hasPlaceHolder"),r("c"),t.query.length>0&&r("has_qs"),t.parameters.length>0&&r("has_ps"),t.fragment.length>0&&r("has_fragment"),"POST"===e.method&&r("has_post"),r(`type_${(e=>e?""+e:"unknown")(e.cpt)}`),r(`scheme_${(e=>"http"===e||"https"===e)(t.protocol)?t.protocol:"other"}`),r(`window_depth_${e.getWindowDepth()}`),!0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66),i=o(r(109)),s=o(r(441)),a=r(91);function o(e){return e&&e.__esModule?e:{default:e}}const u=1e3;function c(e,t){if(null===e)return{};let r=0;const n={};e.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(e=RegExp.$1,r=1),0===r?e.split(/[,;]/).forEach(e=>{const t=e.split(/=/);t.length>1&&(t[1]=t.slice(1).join("="));const r=(0,a.dURIC)(t[0].trimLeft()),i=t.length>1?(0,a.dURIC)(t[1].trimRight()):null;n[r]=i}):e.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).forEach((e,t)=>{const r=e,i='"'===t.charAt(0)?t.substr(1,-1).replace(/\\(.)/g,"$1"):t;n[r]=i});const i={};for(const e in n)-1===t.indexOf(n[e])&&(i[n[e]]=!0);return i}t.default=class{constructor(){this.loadedTabs={},this.linksRecorded={},this.linksFromDom={},this.cookiesFromDom={}}init(){this._pmTask=i.default.register(function(e){const t=this.linksRecorded;Object.keys(t).forEach(r=>{e-t[r]&&delete t[r]})}.bind(this),12e4)}unload(){i.default.deregister(this._pmTask)}checkDomLinks(e){this.recordLinksForURL(e.sourceUrl);const t=this.linksFromDom[e.sourceUrl]||{};return e.incrementStat&&e.url in t&&e.incrementStat("url_in_reflinks"),!0}parseCookies(e){const t=e.sourceUrl;let r={};this.cookiesFromDom[t]&&(r=c(this.cookiesFromDom[t],e.url));try{const t=c(e.getRequestHeader("Cookie"),e.url);for(const e in t)Object.prototype.hasOwnPrototype.call(t,e)&&(r[e]=!0)}catch(e){}return e.cookieValues=r,!0}recordLinksForURL(e){const t=this;if(this.loadedTabs[e])return;const r=Date.now();r-(this.linksRecorded[e]||0)<u||(this.linksRecorded[e]=r,Promise.all([s.default.actions.getCookie(e).then(r=>{t.cookiesFromDom[e]=r}),Promise.all([s.default.actions.queryHTML(e,"a[href]","href"),s.default.actions.queryHTML(e,"link[href]","href"),s.default.actions.queryHTML(e,"script[src]","src").then(e=>e.filter(e=>0===e.indexOf("http")))]).then(r=>{const n=r.reduce((e,t)=>(t.forEach(t=>{e[t]=!0}),e),{});t.linksFromDom[e]=n})]).catch(()=>{}))}clearDomLinks(){for(const e in this.linksFromDom)(0,n.isTabURL)(e)||(delete this.linksFromDom[e],delete this.cookiesFromDom[e],delete this.loadedTabs[e])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(59)),i=u(r(109)),s=r(91),a=r(60),o=r(143);function u(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e,t,r){this.config=e,this.pageMeta=t,this.qsWhitelist=r,this.visitCache={},this.contextFromEvent=null,this.timeAfterLink=5e3,this.timeCleaningCache=18e4,this.timeActive=2e4,this.trustedThirdParties=new Map,this.UNUSED_TRUST_TIMEOUT=12e4,this.USED_TRUST_TIMEOUT=9e5}init(){this._pmclean=i.default.register(this.cleanCookieCache.bind(this),12e4)}unload(){i.default.deregister(this._pmclean)}cleanCookieCache(e){(0,o.cleanTimestampCache)(this.visitCache,this.timeCleaningCache,e);const t=Date.now();this.trustedThirdParties.forEach((e,r)=>{const n=e.ts+(e.c>0?this.USED_TRUST_TIMEOUT:this.UNUSED_TRUST_TIMEOUT);t>n&&this.trustedThirdParties.delete(r)})}_addTrustLink(e,t){if((0,a.sameGeneralDomain)(e,t))return;if(this.qsWhitelist.isTrackerDomain((0,n.default)((0,a.getGeneralDomain)(t)).substring(0,16)))return;const r=`${e}:${t}`;this.trustedThirdParties.has(r)||this.trustedThirdParties.set(r,{c:0}),this.trustedThirdParties.get(r).ts=Date.now()}assignCookieTrust(e){if(e.isFullPage()&&e.getReferrer()){const t=s.URLInfo.get(e.getReferrer()),r=e.urlParts.hostname,n=t.hostname;this._addTrustLink(n,r),this.pageMeta._active[e.tabId]&&this.pageMeta._active[e.tabId].redirects.forEach(e=>{this._addTrustLink(e,r)})}return!0}checkCookieTrust(e){const t=void 0!==e.responseStatus?"set_cookie":"cookie",r=`${e.sourceUrlParts.hostname}:${e.urlParts.hostname}`;if(this.config.cookieTrustReferers&&this.trustedThirdParties.has(r)){const n=this.trustedThirdParties.get(r);return n.c+=1,n.ts=Date.now(),e.incrementStat(`${t}_allow_trust`),!1}return!0}checkVisitCache(e){const t=void 0!==e.responseStatus?"set_cookie":"cookie",r=e.tabId;return!(Date.now()-(this.visitCache[`${r}:${e.hostGD}`]||0)<this.timeActive&&this.visitCache[`${r}:${e.sourceGD}`]&&(e.incrementStat(`${t}_allow_visitcache`),1))}checkContextFromEvent(e){if(this.contextFromEvent){const t=void 0!==e.responseStatus?"set_cookie":"cookie",r=Date.now(),n=e.url,i=e.tabId,s=e.urlParts,a=e.sourceUrlParts.generalDomain,o=e.urlParts.generalDomain;if(r-(this.contextFromEvent.ts||0)<this.timeAfterLink){if(o===this.contextFromEvent.cGD&&a===this.contextFromEvent.pageGD)return this.visitCache[`${i}:${o}`]=r,e.incrementStat(`${t}_allow_userinit_same_context_gd`),!1;const u=n.split(/[?&;]/)[0];if(-1!==this.contextFromEvent.html.indexOf(u)&&s&&s.hostname&&""!==s.hostname)return this.visitCache[`${i}:${o}`]=r,e.incrementStat(`${t}_allow_userinit_same_gd_link`),!1;if(!this.contextFromEvent.cGD&&this.contextFromEvent.possibleCGD.has(o))return this.visitCache[`${i}:${o}`]=r,e.incrementStat(`${t}_allow_userinit_same_script_gd`),!1}}return!0}extractPossilbeContextGD(e){return new Set(e.map(e=>s.URLInfo.get(e).generalDomain))}setContextFromEvent(e,t,r,n){let i=null,a=null;const o=t||"";try{a=s.URLInfo.get(n.tab.url).generalDomain,i=s.URLInfo.get(e.target.baseURI).generalDomain}catch(e){}if(!a||i===a)return;const u=this.extractPossilbeContextGD(e.target.linksSrc);this.contextFromEvent={html:o,ts:Date.now(),cGD:i,pageGD:a,possibleCGD:u}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.config=e}get qsBlockRule(){return this.config.blockRules||[]}shouldBlock(e,t){for(let r=0;r<this.qsBlockRule.length;r+=1){const n=this.qsBlockRule[r][0],i=this.qsBlockRule[r][1];if(t.endsWith(n)&&e.endsWith(i))return!0}return!1}applyBlockRules(e,t){return!this.shouldBlock(e.urlParts.hostname,e.sourceUrlParts.hostname)||(e.incrementStat("req_rule_aborted"),t.cancel=!0,!1)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e){const t=e.getResponseHeader("tk");if(t){var r=t.split(";"),i=n(r,2);const e=i[0],s=i[1];return{value:e,statusId:s}}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(175));t.default=class{constructor(){this.db=null,this._ready=null}init(){return null!==this.db?Promise.resolve():(this._ready=(0,n.default)().then(e=>(this.db=new e("antitracking"),this.db.version(1).stores({tokenDomain:"[token+fp], token, mtime",tokenBlocked:"token, expires",requestKeyValue:"[tracker+key+value], [tracker+key], day"}),this.db)),this._ready)}unload(){null!==this.db&&(this.db.close(),this.db=null)}get ready(){return null===this._ready?Promise.reject("init not called"):this._ready}get tokenDomain(){return this.db.tokenDomain}get tokenBlocked(){return this.db.tokenBlocked}get requestKeyValue(){return this.db.requestKeyValue}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkInstalledPrivacyAddons=function(){return Promise.reject("not supported on this platform")},t.auditInstalledAddons=function(){return Promise.reject("not supported on this platform")}},function(e,t,r){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.i=0}inc(){this.i+=1}getPos(){return this.i}decr(){this.i-=1}}const s=new Set(["{","}","[","]",":",","]);function a(e,t){for(;" "===e.charAt(t.getPos());)t.inc()}function o(e){let t="start";const r={};let s="";for(let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i;a.getPos()<e.length;a.inc()){const i=e.charAt(a.getPos());if("{"===i)switch(t){case"start":t="key";break;default:throw new Error(`unexpected ${i} when in ${t} at position ${a.i}`)}else{if("}"===i)return s&&(r[s]=!0,s=""),r;if(":"===i)switch(t){case"key":a.inc(),r[s=s.trim()]=n(e,a),t="key",s="";break;default:throw new Error(`unexpected ${i} when in ${t} at position ${a.i}`)}else if(","===i)switch(t){case"key":s="",t="key";break;default:throw new Error(`unexpected ${i} when in ${t} at position ${a.i}`)}else switch(t){case"key":s+=i;break;default:throw new Error(`unexpected ${i} when in ${t} at position ${a.i}`)}}}return r}n=function(e,t){a(e,t);const r=e.charAt(t.getPos());if("{"===r)return o(e,t);if("["===r)return function(e,t){a(e,t);const r=[];for(let i=t;i.getPos()<e.length;i.inc()){const s=e.charAt(i.getPos());if("["===s||","===s)i.inc();else if("]"===s)break;r.push(n(e,t))}return r}(e,t);let i="";for(let r=t;r.getPos()<e.length;r.inc()){const t=e.charAt(r.getPos());if(s.has(t))break;i+=t}return t.decr(),i.trim()},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttrackBloomFilter=void 0,t.BloomFilter=h;var n=d(r(59)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(65)),s=d(r(109)),a=d(r(411)),o=d(r(11)),u=r(80),c=d(r(24)),l=d(r(22));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){let r=32*e.length;const n=e.length;let i=-1;r=32*n,this.m=r,this.k=t;const s=1<<Math.ceil(Math.log(Math.ceil(Math.log(r)/Math.LN2/8))/Math.LN2);let a;a=1===s?Uint8Array:2===s?Uint16Array:Uint32Array;const o=new ArrayBuffer(s*t);this.buckets=new Int32Array(n);const u=this.buckets;for(;i<n-1;)u[i+=1]=e[i];this._locations=new a(o)}h.prototype.locations=function(e,t){const r=this.k,n=this.m,i=this._locations;e=parseInt(e,16),t=parseInt(t,16);let s=e%n;for(let e=0;e<r;e+=1)i[e]=s<0?s+n:s,s=(s+t)%n;return i},h.prototype.test=function(e,t){const r=this.locations(e,t),n=this.k,i=this.buckets;for(let e=0;e<n;e+=1){const t=r[e];if(0==(i[Math.floor(t/32)]&1<<t%32))return!1}return!0},h.prototype.testSingle=function(e){const t=(0,n.default)(e),r=t.substring(0,8),i=t.substring(8,16);return this.test(r,i)},h.prototype.add=function(e,t){const r=this.locations(e,t),n=this.k,i=this.buckets;for(let e=0;e<n;e+=1)i[Math.floor(r[e]/32)]|=1<<r[e]%32},h.prototype.addSingle=function(e){const t=(0,n.default)(e),r=t.substring(0,8),i=t.substring(8,16);return this.add(r,i)},h.prototype.update=function(e){let t=32*e.length;const r=e.length;let n=-1;if(t=32*r,this.m!==t)throw new Error("Bloom filter can only be updated with same length");for(;n<r-1;)n+=1,this.buckets[n]|=e[n]};const f=`${l.default.settings.CDN_BASEURL}/anti-tracking/bloom_filter/`,p=`${l.default.settings.CDN_BASEURL}/anti-tracking/bloom_filter/config`,m="antitracking.bloomfilter.version",_=48;t.AttrackBloomFilter=class extends a.default{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;super(e),this.bloomFilter=null,this.version={major:"0000-00-00",minor:0},this.configURL=t,this.baseURL=r,this._config=new u.Resource(["antitracking","bloom_config.json"],{remoteURL:t})}init(){this._updateTask=s.default.register(this.update.bind(this),36e5);const e=[];if(e.push(super.init()),!this.bloomFilter){const t=this.loadFromFile();e.push(t),t.then(()=>{this.isUpToDate()||this.update()})}return Promise.all(e)}destroy(){super.destroy(),this._updateTask&&s.default.deregister(this._updateTask)}loadFromFile(){return new u.Resource(["antitracking","bloom_filter.json"],{remoteOnly:!0}).load().then(e=>({bf:e,major:o.default.get(m,"0000-00-00"),minor:0})).then(e=>{let t=e.bf,r=e.major,n=e.minor;return this.updateFilter(t,r,n)}).catch(()=>c.default.log("bloom filter","load from file failed"))}update(){const e=function(e){const t=e||i.getTime();return`${t.substr(0,4)}-${t.substr(4,2)}-${t.substr(6,2)}`}();return this.version.major<e?this._getFilterForDay(e).catch(()=>this._config.updateFromRemote().then(e=>this._getFilterForDay(e.major))).then(e=>{let t=e.bf,r=e.major,n=e.minor;return this.updateFilter(t,r,n)}).catch(e=>c.default.log("bloom filter","update failed",e)):Promise.resolve()}_getFilterForDay(e){return new u.Resource(["antitracking","bloom_filter.json"],{remoteOnly:!0,remoteURL:`${this.baseURL}${e}/0.gz`}).updateFromRemote().then(t=>({bf:t,major:e,minor:0}))}updateFilter(e,t,r){return 0!==r?this.bloomFilter.update(e.bkt):this.bloomFilter=new h(e.bkt,e.k),this.version={major:t,minor:r},o.default.set(m,this.version.major),Promise.resolve()}isUpToDate(){const e=_,t=i.newUTCDate();t.setHours(t.getHours()-e);const r=t.toISOString().substring(0,10);return this.version.major>r}isReady(){return null!==this.bloomFilter}isTrackerDomain(e){return!!this.isReady()&&this.bloomFilter.testSingle(`d${e}`)}isSafeKey(e,t){return!this.isReady()||!this.isUnsafeKey(e,t)&&(this.bloomFilter.testSingle(`k${e}${t}`)||super.isSafeKey(e,t))}isSafeToken(e,t){return!this.isReady()||this.bloomFilter.testSingle(`t${e}${t}`)}isUnsafeKey(e,t){return!!this.isReady()&&this.bloomFilter.testSingle(`u${e}${t}`)}addDomain(e){this.isReady()&&this.bloomFilter.addSingle(`d${e}`)}addSafeKey(e,t,r){this.isReady()&&(this.isUnsafeKey(e,t)||(this.bloomFilter.addSingle(`k${e}${t}`),super.addSafeKey(e,t,r)))}addUnsafeKey(e,t){this.isReady()&&this.bloomFilter.addSingle(`u${e}${t}`)}addSafeToken(e,t){this.isReady()&&(""===t?this.addDomain(e):this.bloomFilter.addSingle(`t${e}${t}`))}getVersion(){let e=null;return this.bloomFilter&&null!==this.bloomFilter.version&&void 0!==this.bloomFilter.version&&(e=this.bloomFilter.version),{bloomFilterversion:e}}}},function(e,t){var r=1e3,n=60*r,i=60*n,s=24*i,a=365.25*s;function o(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>1e4)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return o*a;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?function(e){return o(e,s,"day")||o(e,i,"hour")||o(e,n,"minute")||o(e,r,"second")||e+" ms"}(e):function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){var n;function i(e){function r(){if(r.enabled){var e=r,i=+new Date,s=i-(n||i);e.diff=s,e.prev=n,e.curr=i,n=i;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var i=t.formatters[n];if("function"==typeof i){var s=a[u];r=i.call(e,s),a.splice(u,1),u--}return r}),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(1125),t.names=[],t.skips=[],t.formatters={}},function(e,t,r){var n=r(408),i=r(407);e.exports=function(e,t,r){var s=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var o=0;o<16;++o)t[s+o]=a[o];return t||i(a)}},function(e,t,r){var n,i,s=r(408),a=r(407),o=0,u=0;e.exports=function(e,t,r){var c=t&&r||0,l=t||[],d=(e=e||{}).node||n,h=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==h){var f=s();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:u+1,_=p-o+(m-u)/1e4;if(_<0&&void 0===e.clockseq&&(h=h+1&16383),(_<0||p>o)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=p,u=m,i=h;var g=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[c++]=g>>>24&255,l[c++]=g>>>16&255,l[c++]=g>>>8&255,l[c++]=255&g;var y=p/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=h>>>8|128,l[c++]=255&h;for(var v=0;v<6;++v)l[c+v]=d[v];return t||a(l)}},function(e,t,r){"use strict";r.r(t),function(e){var n=r(259),i=r.n(n),s=r(451),a=r.n(s),o=r(194),u=r.n(o),c=r(184),l=r(185),d=r.n(l),h=r(186),f=r.n(h),p=r(258),m=r.n(p),_=r(205),g=r.n(_),y=r(257),v=r.n(y),b="function"==typeof Promise?Promise:a.a;function $(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}var w,k,M=Function.prototype.toString,S=M.call(Object);function O(e){var t,r,n;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,n=e.length;r<n;r++)t[r]=O(e[r]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return $(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&M.call(r)==S}(e))return e;for(r in t={},e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=O(e[r]);void 0!==i&&(t[r]=i)}return t}function x(e){var t=!1;return u()(function(r){if(t)throw new Error("once called more than once");t=!0,e.apply(this,r)})}function T(e){return u()(function(t){var r=this,n="function"==typeof(t=O(t))[t.length-1]&&t.pop(),i=new b(function(n,i){var s;try{var a=x(function(e,t){e?i(e):n(t)});t.push(a),(s=e.apply(r,t))&&"function"==typeof s.then&&n(s)}catch(e){i(e)}});return n&&i.then(function(e){n(null,e)},n),i})}function E(e,t){return T(u()(function(r){if(this._closed)return b.reject(new Error("database is closed"));if(this._destroyed)return b.reject(new Error("database is destroyed"));var n=this;return function(e,t,r){if(e.constructor.listeners("debug").length){for(var n=["api",e.name,t],i=0;i<r.length-1;i++)n.push(r[i]);e.constructor.emit("debug",n);var s=r[r.length-1];r[r.length-1]=function(r,n){var i=["api",e.name,t];i=i.concat(r?["error",r]:["success",n]),e.constructor.emit("debug",i),s(r,n)}}}(n,e,r),this.taskqueue.isReady?t.apply(this,r):new b(function(t,i){n.taskqueue.addTask(function(s){s?i(s):t(n[e].apply(n,r))})})}))}function D(e){return"$"+e}function L(e){return e.substring(1)}function P(){this._store={}}function A(e){if(this._store=new P,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}function j(e,t){for(var r={},n=0,i=t.length;n<i;n++){var s=t[n];s in e&&(r[s]=e[s])}return r}P.prototype.get=function(e){var t=D(e);return this._store[t]},P.prototype.set=function(e,t){var r=D(e);return this._store[r]=t,!0},P.prototype.has=function(e){return D(e)in this._store},P.prototype.delete=function(e){var t=D(e),r=t in this._store;return delete this._store[t],r},P.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var i=t[r];e(this._store[i],i=L(i))}},Object.defineProperty(P.prototype,"size",{get:function(){return Object.keys(this._store).length}}),A.prototype.add=function(e){return this._store.set(e,!0)},A.prototype.has=function(e){return this._store.has(e)},A.prototype.forEach=function(e){this._store.forEach(function(t,r){e(r)})},Object.defineProperty(A.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(w=A,k=P):(w=Set,k=Map);var R,I=6;function C(e){return e}function Y(e){return[{ok:e}]}function F(e,t,r){var n=t.docs,i=new k;n.forEach(function(e){i.has(e.id)?i.get(e.id).push(e):i.set(e.id,[e])});var s=i.size,a=0,o=new Array(s);function u(){++a===s&&function(){var e=[];o.forEach(function(t){t.docs.forEach(function(r){e.push({id:t.id,docs:[r]})})}),r(null,{results:e})}()}var c=[];i.forEach(function(e,t){c.push(t)});var l=0;function d(){if(!(l>=c.length)){var r=Math.min(l+I,c.length),n=c.slice(l,r);!function(r,n){r.forEach(function(r,s){var a=n+s,c=i.get(r),l=j(c[0],["atts_since","attachments"]);l.open_revs=c.map(function(e){return e.rev}),l.open_revs=l.open_revs.filter(C);var h=C;0===l.open_revs.length&&(delete l.open_revs,h=Y),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in t&&(l[e]=t[e])}),e.get(r,l,function(e,t){var n;n=e?[{error:e}]:h(t),function(e,t,r){o[e]={id:t,docs:r},u()}(a,r,n),d()})})}(n,l),l+=n.length}}d()}function N(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}if(N())R=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),R=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){R=!1}function U(){return R}function q(){c.EventEmitter.call(this),this._listeners={},function(e){N()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):U()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}(this)}function H(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function z(e){var t=0;return e||(t=2e3),function(e,t){return e=parseInt(e,10)||0,(t=parseInt(t,10))!=t||t<=e?t=(e||1)<<1:t+=1,t>6e5&&(e=3e5,t=6e5),~~((t-e)*Math.random()+e)}(e,t)}function B(e,t){H("info","The above "+e+" is totally normal. "+t)}d()(q,c.EventEmitter),q.prototype.addListener=function(e,t,r,n){if(!this._listeners[t]){var i=this,s=!1;this._listeners[t]=a,this.on(e,a)}function a(){if(i._listeners[t])if(s)s="waiting";else{s=!0;var e=j(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);r.changes(e).on("change",function(e){e.seq>n.since&&!n.cancelled&&(n.since=e.seq,n.onChange(e))}).on("complete",function(){"waiting"===s&&f()(a),s=!1}).on("error",function(){s=!1})}}},q.prototype.removeListener=function(e,t){t in this._listeners&&(c.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},q.prototype.notifyLocalWindows=function(e){N()?chrome.storage.local.set({dbName:e}):U()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},q.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var W="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function V(e,t,r){Error.call(this,r),this.status=e,this.name=t,this.message=r,this.error=!0}d()(V,Error),V.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new V(401,"unauthorized","Name or password is incorrect.");var G=new V(400,"bad_request","Missing JSON list of 'docs'"),K=new V(404,"not_found","missing"),J=new V(409,"conflict","Document update conflict"),Q=new V(400,"bad_request","_id field must contain a string"),Z=new V(412,"missing_id","_id is required for puts"),X=new V(400,"bad_request","Only reserved document ids may start with underscore."),ee=(new V(412,"precondition_failed","Database not open"),new V(500,"unknown_error","Database encountered an unknown error")),te=new V(500,"badarg","Some query argument is invalid"),re=(new V(400,"invalid_request","Request was invalid"),new V(400,"query_parse_error","Some query parameter is invalid")),ne=new V(500,"doc_validation","Bad special document member"),ie=new V(400,"bad_request","Something wrong with the request"),se=new V(400,"bad_request","Document must be a JSON object"),ae=(new V(404,"not_found","Database not found"),new V(500,"indexed_db_went_bad","unknown")),oe=new V(500,"web_sql_went_bad","unknown"),ue=(new V(500,"levelDB_went_went_bad","unknown"),new V(403,"forbidden","Forbidden by design doc validate_doc_update function"),new V(400,"bad_request","Invalid rev format")),ce=(new V(412,"file_exists","The database could not be created, the file already exists."),new V(412,"missing_stub","A pre-existing attachment stub wasn't found"));new V(413,"invalid_url","Provided URL is invalid");function le(e,t){function r(t){for(var r in e)"function"!=typeof e[r]&&(this[r]=e[r]);void 0!==t&&(this.reason=t)}return r.prototype=V.prototype,new r(t)}function de(e){if("object"!=typeof e){var t=e;(e=ee).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}function he(e){var t={},r=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(n){n.doc||(n.doc={});var i=r&&function(e,t,r){try{return!e(t,r)}catch(e){var n="Filter function threw: "+e.toString();return le(ie,n)}}(e.filter,n.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var s in n.doc._attachments)n.doc._attachments.hasOwnProperty(s)&&(n.doc._attachments[s].stub=!0)}else delete n.doc;return!0}}function fe(e){for(var t=[],r=0,n=e.length;r<n;r++)t=t.concat(e[r]);return t}function pe(e){var t;if(e?"string"!=typeof e?t=le(Q):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=le(X)):t=le(Z),t)throw t}function me(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(H("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function _e(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function ge(e){var t=_e(e);return t?t.join("/"):null}var ye=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ve="queryKey",be=/(?:^|&)([^&=]*)=?([^&]*)/g,$e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function we(e){for(var t=$e.exec(e),r={},n=14;n--;){var i=ye[n],s=t[n]||"",a=-1!==["user","password"].indexOf(i);r[i]=a?decodeURIComponent(s):s}return r[ve]={},r[ye[12]].replace(be,function(e,t,n){t&&(r[ve][t]=n)}),r}function ke(e,t){var r=[],n=[];for(var i in t)t.hasOwnProperty(i)&&(r.push(i),n.push(t[i]));return r.push(e),Function.apply(null,r).apply(null,n)}function Me(e,t,r){return new b(function(n,i){e.get(t,function(s,a){if(s){if(404!==s.status)return i(s);a={}}var o=a._rev,u=r(a);if(!u)return n({updated:!1,rev:o});u._id=t,u._rev=o,n(function(e,t,r){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(n){if(409!==n.status)throw n;return Me(e,t._id,r)})}(e,u,r))})})}function Se(){return i.a.v4().replace(/-/g,"").toLowerCase()}var Oe=i.a.v4;function xe(e){for(var t,r,n,i,s=e.rev_tree.slice();i=s.pop();){var a=i.ids,o=a[2],u=i.pos;if(o.length)for(var c=0,l=o.length;c<l;c++)s.push({pos:u+1,ids:o[c]});else{var d=!!a[1].deleted,h=a[0];t&&!(n!==d?n:r!==u?r<u:t<h)||(t=h,r=u,n=d)}}return r+"-"+t}function Te(e,t){for(var r,n=e.slice();r=n.pop();)for(var i=r.pos,s=r.ids,a=s[2],o=t(0===a.length,i,s[0],r.ctx,s[1]),u=0,c=a.length;u<c;u++)n.push({pos:i+1,ids:a[u],ctx:o})}function Ee(e,t){return e.pos-t.pos}function De(e){var t=[];Te(e,function(e,r,n,i,s){e&&t.push({rev:r+"-"+n,pos:r,opts:s})}),t.sort(Ee).reverse();for(var r=0,n=t.length;r<n;r++)delete t[r].pos;return t}function Le(e){for(var t=xe(e),r=De(e.rev_tree),n=[],i=0,s=r.length;i<s;i++){var a=r[i];a.rev===t||a.opts.deleted||n.push(a.rev)}return n}function Pe(e){var t=[];return Te(e.rev_tree,function(e,r,n,i,s){"available"!==s.status||e||(t.push(r+"-"+n),s.status="missing")}),t}function Ae(e){for(var t,r=[],n=e.slice();t=n.pop();){var i=t.pos,s=t.ids,a=s[0],o=s[1],u=s[2],c=0===u.length,l=t.history?t.history.slice():[];l.push({id:a,opts:o}),c&&r.push({pos:i+1-l.length,ids:l});for(var d=0,h=u.length;d<h;d++)n.push({pos:i+1,ids:u[d],history:l})}return r.reverse()}function je(e,t){return e.pos-t.pos}function Re(e,t,r){var n=function(e,t,r){for(var n,i=0,s=e.length;i<s;)r(e[n=i+s>>>1],t)<0?i=n+1:s=n;return i}(e,t,r);e.splice(n,0,t)}function Ie(e,t){for(var r,n,i=t,s=e.length;i<s;i++){var a=e[i],o=[a.id,a.opts,[]];n?(n[2].push(o),n=o):r=n=o}return r}function Ce(e,t){return e[0]<t[0]?-1:1}function Ye(e,t){for(var r=[{tree1:e,tree2:t}],n=!1;r.length>0;){var i=r.pop(),s=i.tree1,a=i.tree2;(s[1].status||a[1].status)&&(s[1].status="available"===s[1].status||"available"===a[1].status?"available":"missing");for(var o=0;o<a[2].length;o++)if(s[2][0]){for(var u=!1,c=0;c<s[2].length;c++)s[2][c][0]===a[2][o][0]&&(r.push({tree1:s[2][c],tree2:a[2][o]}),u=!0);u||(n="new_branch",Re(s[2],a[2][o],Ce))}else n="new_leaf",s[2][0]=a[2][o]}return{conflicts:n,tree:e}}function Fe(e,t,r){var n,i=[],s=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var o=0,u=e.length;o<u;o++){var c=e[o];if(c.pos===t.pos&&c.ids[0]===t.ids[0])n=Ye(c.ids,t.ids),i.push({pos:c.pos,ids:n.tree}),s=s||n.conflicts,a=!0;else if(!0!==r){var l=c.pos<t.pos?c:t,d=c.pos<t.pos?t:c,h=d.pos-l.pos,f=[],p=[];for(p.push({ids:l.ids,diff:h,parent:null,parentIdx:null});p.length>0;){var m=p.pop();if(0!==m.diff)for(var _=m.ids[2],g=0,y=_.length;g<y;g++)p.push({ids:_[g],diff:m.diff-1,parent:m.ids,parentIdx:g});else m.ids[0]===d.ids[0]&&f.push(m)}var v=f[0];v?(n=Ye(v.ids,d.ids),v.parent[2][v.parentIdx]=n.tree,i.push({pos:l.pos,ids:l.ids}),s=s||n.conflicts,a=!0):i.push(c)}else i.push(c)}return a||i.push(t),i.sort(je),{tree:i,conflicts:s||"internal_node"}}function Ne(e,t,r){var n=Fe(e,t),i=function(e,t){for(var r,n,i=Ae(e),s=0,a=i.length;s<a;s++){var o,u=i[s],c=u.ids;if(c.length>t){r||(r={});var l=c.length-t;o={pos:u.pos+l,ids:Ie(c,l)};for(var d=0;d<l;d++){var h=u.pos+d+"-"+c[d].id;r[h]=!0}}else o={pos:u.pos,ids:Ie(c,0)};n=n?Fe(n,o,!0).tree:[o]}return r&&Te(n,function(e,t,n){delete r[t+"-"+n]}),{tree:n,revs:r?Object.keys(r):[]}}(n.tree,r);return{tree:i.tree,stemmedRevs:i.revs,conflicts:n.conflicts}}function Ue(e){return e.ids}function qe(e,t){t||(t=xe(e));for(var r,n=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(Ue);r=i.pop();){if(r[0]===n)return!!r[1].deleted;i=i.concat(r[2])}}function He(e){return/^_local/.test(e)}function ze(e,t){for(var r,n=t.rev_tree.slice();r=n.pop();){var i=r.pos,s=r.ids,a=s[0],o=s[1],u=s[2],c=0===u.length,l=r.history?r.history.slice():[];if(l.push({id:a,pos:i,opts:o}),c)for(var d=0,h=l.length;d<h;d++){var f=l[d];if(f.pos+"-"+f.id===e)return i+"-"+a}for(var p=0,m=u.length;p<m;p++)n.push({pos:i+1,ids:u[p],history:l})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}function Be(e,t,r){c.EventEmitter.call(this);var n=this;this.db=e;var i=(t=t?O(t):{}).complete=x(function(t,r){t?function(e,t){return"listenerCount"in e?e.listenerCount(t):c.EventEmitter.listenerCount(e,t)}(n,"error")>0&&n.emit("error",t):n.emit("complete",r),n.removeAllListeners(),e.removeListener("destroyed",s)});function s(){n.cancel()}r&&(n.on("complete",function(e){r(null,e)}),n.on("error",r)),e.once("destroyed",s),t.onChange=function(e){n.isCancelled||function(e,t){try{e.emit("change",t)}catch(e){H("error",'Error in .on("change", function):',e)}}(n,e)};var a=new b(function(e,r){t.complete=function(t,n){t?r(t):e(n)}});n.once("cancel",function(){e.removeListener("destroyed",s),t.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this.catch=a.catch.bind(a),this.then(function(e){i(null,e)},i),e.taskqueue.isReady?n.validateChanges(t):e.taskqueue.addTask(function(e){e?t.complete(e):n.isCancelled?n.emit("cancel"):n.validateChanges(t)})}function We(e,t,r){var n=[{rev:e._rev}];"all_docs"===r.style&&(n=De(t.rev_tree).map(function(e){return{rev:e.rev}}));var i={id:t.id,changes:n,doc:e};return qe(t,e._rev)&&(i.deleted=!0),r.conflicts&&(i.doc._conflicts=Le(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function Ve(e,t){return e<t?-1:e>t?1:0}function Ge(e,t){return function(r,n){r||n[0]&&n[0].error?((r=r||n[0]).docId=t,e(r)):e(null,n.length?n[0]:n)}}function Ke(e,t){var r=Ve(e._id,t._id);return 0!==r?r:Ve(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function Je(){c.EventEmitter.call(this)}function Qe(){this.isReady=!1,this.failed=!1,this.queue=[]}function Ze(e,t){if(!(this instanceof Ze))return new Ze(e,t);var r=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),this.__opts=t=O(t),r.auto_compaction=t.auto_compaction,r.prefix=Ze.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var n=function(e,t){var r=e.match(/([a-z-]*):\/\/(.*)/);if(r)return{name:/https?/.test(r[1])?r[1]+"://"+r[2]:r[2],adapter:r[1]};var n=Ze.adapters,i=Ze.preferredAdapters,s=Ze.prefix,a=t.adapter;if(!a)for(var o=0;o<i.length&&"idb"===(a=i[o])&&"websql"in n&&U()&&localStorage["_pouch__websqldb_"+s+e];++o)H("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var u=n[a];return{name:u&&"use_prefix"in u&&!u.use_prefix?e:s+e,adapter:a}}((t.prefix||"")+e,t);if(t.name=n.name,t.adapter=t.adapter||n.adapter,r.name=e,r._adapter=t.adapter,Ze.emit("debug",["adapter","Picked adapter: ",t.adapter]),!Ze.adapters[t.adapter]||!Ze.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);Je.call(r),r.taskqueue=new Qe,r.adapter=t.adapter,Ze.adapters[t.adapter].call(r,t,function(e){if(e)return r.taskqueue.fail(e);!function(e){function t(t){e.removeListener("closed",r),t||e.constructor.emit("destroyed",e.name)}function r(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",r),e.constructor.emit("ref",e)}(r),r.emit("created",r),Ze.emit("created",r.name),r.taskqueue.ready(r)})}d()(Be,c.EventEmitter),Be.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Be.prototype.validateChanges=function(e){var t=e.complete,r=this;Ze._changesFilterPlugin?Ze._changesFilterPlugin.validate(e,function(n){if(n)return t(n);r.doChanges(e)}):r.doChanges(e)},Be.prototype.doChanges=function(e){var t=this,r=e.complete;if("live"in(e=O(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=We,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(Ze._changesFilterPlugin){if(Ze._changesFilterPlugin.normalize(e),Ze._changesFilterPlugin.shouldFilter(this,e))return Ze._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(t){t in e&&H("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){var i=t.cancel;t.cancel=u()(function(e){n.cancel(),i.apply(this,e)})}}else this.db.info().then(function(n){t.isCancelled?r(null,{status:"cancelled"}):(e.since=n.update_seq,t.doChanges(e))},r)},d()(Je,c.EventEmitter),Je.prototype.post=E("post",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r(le(se));this.bulkDocs({docs:[e]},t,Ge(r,e._id))}),Je.prototype.put=E("put",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r(le(se));if(pe(e._id),He(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,r):this._putLocal(e,r);var n=this;function i(r){"function"==typeof n._put&&!1!==t.new_edits?n._put(e,t,r):n.bulkDocs({docs:[e]},t,Ge(r,e._id))}t.force&&e._rev?(!function(){var r=e._rev.split("-"),n=r[1],i=parseInt(r[0],10)+1,s=Se();e._revisions={start:i,ids:[s,n]},e._rev=i+"-"+s,t.new_edits=!1}(),i(function(t){var n=t?null:{ok:!0,id:e._id,rev:e._rev};r(t,n)})):i(r)}),Je.prototype.putAttachment=E("putAttachment",function(e,t,r,n,i){var s=this;function a(e){var r="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:n,revpos:++r},s.put(e)}return"function"==typeof i&&(i=n,n=r,r=null),void 0===i&&(i=n,n=r,r=null),i||H("warn","Attachment",t,"on document",e,"is missing content_type"),s.get(e).then(function(e){if(e._rev!==r)throw le(J);return a(e)},function(t){if(t.reason===K.message)return a({_id:e});throw t})}),Je.prototype.removeAttachment=E("removeAttachment",function(e,t,r,n){var i=this;i.get(e,function(e,s){if(e)n(e);else if(s._rev===r){if(!s._attachments)return n();delete s._attachments[t],0===Object.keys(s._attachments).length&&delete s._attachments,i.put(s,n)}else n(le(J))})}),Je.prototype.remove=E("remove",function(e,t,r,n){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(i=e,"function"==typeof t?(n=t,r={}):(n=r,r=t)),(r=r||{}).was_delete=!0;var s={_id:i._id,_rev:i._rev||r.rev,_deleted:!0};if(He(s._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,n);this.bulkDocs({docs:[s]},r,Ge(n,s._id))}),Je.prototype.revsDiff=E("revsDiff",function(e,t,r){"function"==typeof t&&(r=t,t={});var n=Object.keys(e);if(!n.length)return r(null,{});var i=0,s=new k;function a(e,t){s.has(e)||s.set(e,{missing:[]}),s.get(e).missing.push(t)}n.map(function(t){this._getRevisionTree(t,function(o,u){if(o&&404===o.status&&"missing"===o.message)s.set(t,{missing:e[t]});else{if(o)return r(o);!function(t,r){var n=e[t].slice(0);Te(r,function(e,r,i,s,o){var u=r+"-"+i,c=n.indexOf(u);-1!==c&&(n.splice(c,1),"available"!==o.status&&a(t,u))}),n.forEach(function(e){a(t,e)})}(t,u)}if(++i===n.length){var c={};return s.forEach(function(e,t){c[t]=e}),r(null,c)}})},this)}),Je.prototype.bulkGet=E("bulkGet",function(e,t){F(this,e,t)}),Je.prototype.compactDocument=E("compactDocument",function(e,t,r){var n=this;this._getRevisionTree(e,function(i,s){if(i)return r(i);var a=function(e){var t={},r=[];return Te(e,function(e,n,i,s){var a=n+"-"+i;return e&&(t[a]=0),void 0!==s&&r.push({from:s,to:a}),a}),r.reverse(),r.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}(s),o=[],u=[];Object.keys(a).forEach(function(e){a[e]>t&&o.push(e)}),Te(s,function(e,t,r,n,i){var s=t+"-"+r;"available"===i.status&&-1!==o.indexOf(s)&&u.push(s)}),n._doCompaction(e,u,r)})}),Je.prototype.compact=E("compact",function(e,t){"function"==typeof e&&(t=e,e={});e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&function e(t){var r=t._compactionQueue[0],n=r.opts,i=r.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(r){r&&r.last_seq&&(n.last_seq=r.last_seq),t._compact(n,function(r,n){r?i(r):i(null,n),f()(function(){t._compactionQueue.shift(),t._compactionQueue.length&&e(t)})})})}(this)}),Je.prototype._compact=function(e,t){var r=this,n={return_docs:!1,last_seq:e.last_seq||0},i=[];r.changes(n).on("change",function(e){i.push(r.compactDocument(e.id,0))}).on("complete",function(e){var n=e.last_seq;b.all(i).then(function(){return Me(r,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<n)&&(e.last_seq=n,e)})}).then(function(){t(null,{ok:!0})}).catch(t)}).on("error",t)},Je.prototype.get=E("get",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(le(Q));if(He(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var n=[],i=this;function s(){var s=[],a=n.length;if(!a)return r(null,s);n.forEach(function(n){i.get(e,{rev:n,revs:t.revs,latest:t.latest,attachments:t.attachments},function(e,t){if(e)s.push({missing:n});else{for(var i,o=0,u=s.length;o<u;o++)if(s[o].ok&&s[o].ok._rev===t._rev){i=!0;break}i||s.push({ok:t})}--a||r(null,s)})})}if(!t.open_revs)return this._get(e,t,function(n,s){if(n)return n.docId=e,r(n);var a=s.doc,o=s.metadata,u=s.ctx;if(t.conflicts){var c=Le(o);c.length&&(a._conflicts=c)}if(qe(o,a._rev)&&(a._deleted=!0),t.revs||t.revs_info){for(var l=a._rev.split("-"),d=parseInt(l[0],10),h=l[1],f=Ae(o.rev_tree),p=null,m=0;m<f.length;m++){var _=f[m],g=_.ids.map(function(e){return e.id}).indexOf(h);(g===d-1||!p&&-1!==g)&&(p=_)}var y=p.ids.map(function(e){return e.id}).indexOf(a._rev.split("-")[1])+1,v=p.ids.length-y;if(p.ids.splice(y,v),p.ids.reverse(),t.revs&&(a._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map(function(e){return e.id})}),t.revs_info){var b=p.pos+p.ids.length;a._revs_info=p.ids.map(function(e){return{rev:--b+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&a._attachments){var $=a._attachments,w=Object.keys($).length;if(0===w)return r(null,a);Object.keys($).forEach(function(e){this._getAttachment(a._id,e,$[e],{rev:a._rev,binary:t.binary,ctx:u},function(t,n){var i=a._attachments[e];i.data=n,delete i.stub,delete i.length,--w||r(null,a)})},i)}else{if(a._attachments)for(var k in a._attachments)a._attachments.hasOwnProperty(k)&&(a._attachments[k].stub=!0);r(null,a)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){if(e)return r(e);n=De(t).map(function(e){return e.rev}),s()});else{if(!Array.isArray(t.open_revs))return r(le(ee,"function_clause"));n=t.open_revs;for(var a=0;a<n.length;a++){var o=n[a];if("string"!=typeof o||!/^\d+-/.test(o))return r(le(ue))}s()}}),Je.prototype.getAttachment=E("getAttachment",function(e,t,r,n){var i=this;r instanceof Function&&(n=r,r={}),this._get(e,r,function(s,a){return s?n(s):a.doc._attachments&&a.doc._attachments[t]?(r.ctx=a.ctx,r.binary=!0,void i._getAttachment(e,t,a.doc._attachments[t],r,n)):n(le(K))})}),Je.prototype.allDocs=E("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(r)return void t(le(re,"Query parameter `"+r+"` is not compatible with multi-get"));if(!me(this))return function(e,t,r){var n="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&n.reverse(),!n.length)return e._allDocs({limit:0},r);var i={offset:t.skip};return b.all(n.map(function(r){var n=W({key:r,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete n[e]}),new b(function(t,s){e._allDocs(n,function(e,n){if(e)return s(e);i.total_rows=n.total_rows,t(n.rows[0]||{key:r,error:"not_found"})})})})).then(function(e){return i.rows=e,i})}(this,e,t)}return this._allDocs(e,t)}),Je.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new Be(this,e,t)},Je.prototype.close=E("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),Je.prototype.info=E("info",function(e){var t=this;this._info(function(r,n){if(r)return e(r);n.db_name=n.db_name||t.name,n.auto_compaction=!(!t.auto_compaction||me(t)),n.adapter=t.adapter,e(null,n)})}),Je.prototype.id=E("id",function(e){return this._id(e)}),Je.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Je.prototype.bulkDocs=E("bulkDocs",function(e,t,r){if("function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(le(G));for(var n=0;n<e.docs.length;++n)if("object"!=typeof e.docs[n]||Array.isArray(e.docs[n]))return r(le(se));var i;if(e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(t){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(t),e._attachments[t].content_type||H("warn","Attachment",t,"on document",e._id,"is missing content_type")})}),i)return r(le(ie,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var s=this;t.new_edits||me(s)||e.docs.sort(Ke),function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),i=0;i<n.length;i++){var s=n[i];r._attachments[s]=j(r._attachments[s],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var a=e.docs.map(function(e){return e._id});return this._bulkDocs(e,t,function(e,n){if(e)return r(e);if(t.new_edits||(n=n.filter(function(e){return e.error})),!me(s))for(var i=0,o=n.length;i<o;i++)n[i].id=n[i].id||a[i];r(null,n)})}),Je.prototype.registerDependentDatabase=E("registerDependentDatabase",function(e,t){var r=new this.constructor(e,this.__opts);Me(this,"_local/_pouch_dependentDbs",function(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)}).then(function(){t(null,{db:r})}).catch(t)}),Je.prototype.destroy=E("destroy",function(e,t){"function"==typeof e&&(t=e,e={});var r=this,n=!("use_prefix"in r)||r.use_prefix;function i(){r._destroy(e,function(e,n){if(e)return t(e);r._destroyed=!0,r.emit("destroyed"),t(null,n||{ok:!0})})}if(me(r))return i();r.get("_local/_pouch_dependentDbs",function(e,s){if(e)return 404!==e.status?t(e):i();var a=s.dependentDbs,o=r.constructor,u=Object.keys(a).map(function(e){var t=n?e.replace(new RegExp("^"+o.prefix),""):e;return new o(t,r.__opts).destroy()});b.all(u).then(i,t)})}),Qe.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},Qe.prototype.fail=function(e){this.failed=e,this.execute()},Qe.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},Qe.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},d()(Ze,Je),Ze.adapters={},Ze.preferredAdapters=[],Ze.prefix="_pouch_";var Xe=new c.EventEmitter;!function(e){Object.keys(c.EventEmitter.prototype).forEach(function(t){"function"==typeof c.EventEmitter.prototype[t]&&(e[t]=Xe[t].bind(Xe))});var t=e._destructionListeners=new k;e.on("ref",function(e){t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)}),e.on("unref",function(e){if(t.has(e.name)){var r=t.get(e.name),n=r.indexOf(e);n<0||(r.splice(n,1),r.length>1?t.set(e.name,r):t.delete(e.name))}}),e.on("destroyed",function(e){if(t.has(e)){var r=t.get(e);t.delete(e),r.forEach(function(e){e.emit("destroyed",!0)})}})}(Ze),Ze.adapter=function(e,t,r){t.valid()&&(Ze.adapters[e]=t,r&&Ze.preferredAdapters.push(e))},Ze.plugin=function(e){if("function"==typeof e)e(Ze);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){Ze.prototype[t]=e[t]})}return this.__defaults&&(Ze.__defaults=W({},this.__defaults)),Ze},Ze.defaults=function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);r=r||{},e&&"object"==typeof e&&(e=(r=e).name,delete r.name),r=W({},t.__defaults,r),Ze.call(this,e,r)}return d()(t,Ze),t.preferredAdapters=Ze.preferredAdapters.slice(),Object.keys(Ze).forEach(function(e){e in t||(t[e]=Ze[e])}),t.__defaults=W({},this.__defaults,e),t};function et(e,t){for(var r=e,n=0,i=t.length;n<i;n++){if(!(r=r[t[n]]))break}return r}function tt(e){for(var t=[],r="",n=0,i=e.length;n<i;n++){var s=e[n];"."===s?n>0&&"\\"===e[n-1]?r=r.substring(0,r.length-1)+".":(t.push(r),r=""):r+=s}return t.push(r),t}var rt=["$or","$nor","$not"];function nt(e){return rt.indexOf(e)>-1}function it(e){return Object.keys(e)[0]}function st(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(r){var n=e[r];if("object"!=typeof n&&(n={$eq:n}),nt(r))n instanceof Array?t[r]=n.map(function(e){return st([e])}):t[r]=st([n]);else{var i=t[r]=t[r]||{};Object.keys(n).forEach(function(e){var t=n[e];return"$gt"===e||"$gte"===e?function(e,t,r){if(void 0!==r.$eq)return;void 0!==r.$gte?"$gte"===e?t>r.$gte&&(r.$gte=t):t>=r.$gte&&(delete r.$gte,r.$gt=t):void 0!==r.$gt?"$gte"===e?t>r.$gt&&(delete r.$gt,r.$gte=t):t>r.$gt&&(r.$gt=t):r[e]=t}(e,t,i):"$lt"===e||"$lte"===e?function(e,t,r){if(void 0!==r.$eq)return;void 0!==r.$lte?"$lte"===e?t<r.$lte&&(r.$lte=t):t<=r.$lte&&(delete r.$lte,r.$lt=t):void 0!==r.$lt?"$lte"===e?t<r.$lt&&(delete r.$lt,r.$lte=t):t<r.$lt&&(r.$lt=t):r[e]=t}(e,t,i):"$ne"===e?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(t,i):"$eq"===e?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(t,i):void(i[e]=t)})}})}),t}var at=-324,ot=3,ut="";function ct(e,t){if(e===t)return 0;e=lt(e),t=lt(t);var r=mt(e),n=mt(t);if(r-n!=0)return r-n;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var i=ct(e[n],t[n]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var r=Object.keys(e),n=Object.keys(t),i=Math.min(r.length,n.length),s=0;s<i;s++){var a=ct(r[s],n[s]);if(0!==a)return a;if(0!==(a=ct(e[r[s]],t[n[s]])))return a}return r.length===n.length?0:r.length>n.length?1:-1}(e,t)}function lt(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var n=0;n<r;n++)e[n]=lt(t[n])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var s=t[i];void 0!==s&&(e[i]=lt(s))}}}return e}function dt(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=e<0,i=n?"0":"2",s=function(e,t,r){return function(e,t,r){for(var n="",i=r-e.length;n.length<i;)n+=t;return n}(e,t,r)+e}(((n?-r:r)-at).toString(),"0",ot);i+=ut+s;var a=Math.abs(parseFloat(t[0]));n&&(a=10-a);var o=a.toFixed(20);return o=o.replace(/\.?0+$/,""),i+=ut+o}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),n=-1,i=r.length,s="";if(t)for(;++n<i;)s+=ht(r[n]);else for(;++n<i;){var a=r[n];s+=ht(a)+ht(e[a])}return s}return""}function ht(e){return mt(e=lt(e))+ut+dt(e)+"\0"}function ft(e,t){var r,n=t;if("1"===e[t])r=0,t++;else{var i="0"===e[t];t++;var s="",a=e.substring(t,t+ot),o=parseInt(a,10)+at;for(i&&(o=-o),t+=ot;;){var u=e[t];if("\0"===u)break;s+=u,t++}r=1===(s=s.split(".")).length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),i&&(r-=10),0!==o&&(r=parseFloat(r+"e"+o))}return{num:r,length:t-n}}function pt(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var i=n.element,s=n.index;if(Array.isArray(i))i.push(r);else if(s===e.length-2){i[e.pop()]=r}else e.push(r)}}function mt(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}function _t(e,t,r){if(e=e.filter(function(e){return gt(e.doc,t.selector,r)}),t.sort){var n=function(e){function t(t){return e.map(function(e){var r=tt(it(e));return et(t,r)})}return function(e,r){var n=ct(t(e.doc),t(r.doc));return 0!==n?n:function(e,t){return e<t?-1:e>t?1:0}(e.doc._id,r.doc._id)}}(t.sort);e=e.sort(n),"string"!=typeof t.sort[0]&&"desc"===function(e){return e[it(e)]}(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,s=("limit"in t?t.limit:e.length)+i;e=e.slice(i,s)}return e}function gt(e,t,r){return r.every(function(r){var n=t[r],i=tt(r),s=et(e,i);return nt(r)?function(e,t,r){if("$or"===e)return t.some(function(e){return gt(r,e,Object.keys(e))});if("$not"===e)return!gt(r,t,Object.keys(t));return!t.find(function(e){return gt(r,e,Object.keys(e))})}(r,n,e):yt(n,e,i,s)})}function yt(e,t,r,n){return!e||Object.keys(e).every(function(i){var s=e[i];return function(e,t,r,n,i){if(!wt[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return wt[e](t,r,n,i)}(i,t,s,r,n)})}function vt(e){return void 0!==e&&null!==e}function bt(e){return void 0!==e}function $t(e,t){return t.some(function(t){return e instanceof Array?e.indexOf(t)>-1:e===t})}var wt={$elemMatch:function(e,t,r,n){return!!Array.isArray(n)&&(0!==n.length&&("object"==typeof n[0]?n.some(function(e){return gt(e,t,Object.keys(t))}):n.some(function(n){return yt(t,e,r,n)})))},$allMatch:function(e,t,r,n){return!!Array.isArray(n)&&(0!==n.length&&("object"==typeof n[0]?n.every(function(e){return gt(e,t,Object.keys(t))}):n.every(function(n){return yt(t,e,r,n)})))},$eq:function(e,t,r,n){return bt(n)&&0===ct(n,t)},$gte:function(e,t,r,n){return bt(n)&&ct(n,t)>=0},$gt:function(e,t,r,n){return bt(n)&&ct(n,t)>0},$lte:function(e,t,r,n){return bt(n)&&ct(n,t)<=0},$lt:function(e,t,r,n){return bt(n)&&ct(n,t)<0},$exists:function(e,t,r,n){return t?bt(n):!bt(n)},$mod:function(e,t,r,n){return vt(n)&&function(e,t){var r=t[0],n=t[1];if(0===r)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(r,10)!==r)throw new Error("Divisor is not an integer");if(parseInt(n,10)!==n)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%r===n}(n,t)},$ne:function(e,t,r,n){return t.every(function(e){return 0!==ct(n,e)})},$in:function(e,t,r,n){return vt(n)&&$t(n,t)},$nin:function(e,t,r,n){return vt(n)&&!$t(n,t)},$size:function(e,t,r,n){return vt(n)&&function(e,t){return e.length===t}(n,t)},$all:function(e,t,r,n){return Array.isArray(n)&&function(e,t){return t.every(function(t){return e.indexOf(t)>-1})}(n,t)},$regex:function(e,t,r,n){return vt(n)&&function(e,t){return new RegExp(t).test(e)}(n,t)},$type:function(e,t,r,n){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(n,t)}};function kt(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var r=_t([{doc:e}],{selector:t=function(e){var t=O(e),r=!1;"$and"in t&&(t=st(t.$and),r=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var n=t[r],i=e[n];"object"==typeof i&&null!==i||(e[n]={$eq:i})}})}),"$not"in t&&(t.$not=st([t.$not]));for(var n=Object.keys(t),i=0;i<n.length;i++){var s=n[i],a=t[s];"object"!=typeof a||null===a?a={$eq:a}:"$ne"in a&&!r&&(a.$ne=[a.$ne]),t[s]=a}return t}(t)},Object.keys(t));return r&&1===r.length}function Mt(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var r="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+r+'"'))}t()}function St(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=ge(e.view):e.filter=ge(e.filter))}function Ot(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!me(e.db)}function xt(e,t){var r=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var n=le(ie,"`view` filter parameter not found or invalid.");return r(n)}var i=_e(t.view);e.db.get("_design/"+i[0],function(n,s){if(e.isCancelled)return r(null,{status:"cancelled"});if(n)return r(de(n));var a=s&&s.views&&s.views[i[1]]&&s.views[i[1]].map;if(!a)return r(le(K,s.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=function(e){return ke(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}(a),e.doChanges(t)})}else if(t.selector)t.filter=function(e){return kt(e,t.selector)},e.doChanges(t);else{var s=_e(t.filter);e.db.get("_design/"+s[0],function(n,i){if(e.isCancelled)return r(null,{status:"cancelled"});if(n)return r(de(n));var a=i&&i.filters&&i.filters[s[1]];if(!a)return r(le(K,i&&i.filters?"missing json key: "+s[1]:"missing json key: filters"));t.filter=function(e){return ke('"use strict";\nreturn '+e+";",{})}(a),e.doChanges(t)})}}function Tt(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}Ze.plugin(function(e){e.debug=m.a;var t={};e.on("debug",function(e){var r=e[0],n=e.slice(1);t[r]||(t[r]=m()("pouchdb:"+r)),t[r].apply(null,n)})}),Ze.plugin(function(e){e._changesFilterPlugin={validate:Mt,normalize:St,shouldFilter:Ot,filter:xt}}),Ze.version="6.2.1-prerelease";var Et=Tt(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Dt=Tt(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Lt(e){if(!/^\d+-./.test(e))return le(ue);var t=e.indexOf("-"),r=e.substring(0,t),n=e.substring(t+1);return{prefix:parseInt(r,10),id:n}}function Pt(e,t){var r,n,i,s={status:"available"};if(e._deleted&&(s.deleted=!0),t)if(e._id||(e._id=Oe()),n=Se(),e._rev){if((i=Lt(e._rev)).error)return i;e._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[n,s,[]]]]}],r=i.prefix+1}else e._rev_tree=[{pos:1,ids:[n,s,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var r=e.start-e.ids.length+1,n=e.ids,i=[n[0],t,[]],s=1,a=n.length;s<a;s++)i=[n[s],{status:"missing"},[i]];return[{pos:r,ids:i}]}(e._revisions,s),r=e._revisions.start,n=e._revisions.ids[0]),!e._rev_tree){if((i=Lt(e._rev)).error)return i;r=i.prefix,n=i.id,e._rev_tree=[{pos:r,ids:[n,s,[]]}]}pe(e._id),e._rev=r+"-"+n;var a={metadata:{},data:{}};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u="_"===o[0];if(u&&!Et[o]){var c=le(ne,o);throw c.message=ne.message+": "+o,c}u&&!Dt[o]?a.metadata[o.slice(1)]=e[o]:a.data[o]=e[o]}return a}var At=function(e){return atob(e)},jt=function(e){return btoa(e)};function Rt(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}function It(e,t){return Rt([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}(e)],{type:t})}function Ct(e,t){return It(At(e),t)}function Yt(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return t}function Ft(e,t){if("undefined"==typeof FileReader)return t(Yt((new FileReaderSync).readAsArrayBuffer(e)));var r=new FileReader,n="function"==typeof r.readAsBinaryString;r.onloadend=function(e){var r=e.target.result||"";if(n)return t(r);t(Yt(r))},n?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}function Nt(e,t){Ft(e,function(e){t(e)})}function Ut(e,t){Nt(e,function(e){t(jt(e))})}function qt(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var r=new FileReader;r.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);t(r)},r.readAsArrayBuffer(e)}var Ht=e.setImmediate||e.setTimeout,zt=32768;function Bt(e,t,r,n,i){(r>0||n<t.size)&&(t=function(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.slice(t,r)}(t,r,n)),qt(t,function(t){e.append(t),i()})}function Wt(e,t,r,n,i){(r>0||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t),i()}function Vt(e,t){var r="string"==typeof e,n=r?e.length:e.size,i=Math.min(zt,n),s=Math.ceil(n/i),a=0,o=r?new g.a:new g.a.ArrayBuffer,u=r?Wt:Bt;function c(){Ht(d)}function l(){var e=function(e){return jt(e)}(o.end(!0));t(e),o.destroy()}function d(){var t=a*i,r=t+i;u(o,e,t,r,++a<s?c:l)}d()}function Gt(e,t,r){var n=function(e){try{return At(e)}catch(e){return{error:le(te,"Attachment is not a valid base64 string")}}}(e.data);if(n.error)return r(n.error);e.length=n.length,e.data="blob"===t?It(n,e.content_type):"base64"===t?jt(n):n,Vt(n,function(t){e.digest="md5-"+t,r()})}function Kt(e,t,r){if(e.stub)return r();"string"==typeof e.data?Gt(e,t,r):function(e,t,r){Vt(e.data,function(n){e.digest="md5-"+n,e.length=e.data.size||e.data.length||0,"binary"===t?Nt(e.data,function(t){e.data=t,r()}):"base64"===t?Ut(e.data,function(t){e.data=t,r()}):r()})}(e,t,r)}function Jt(e,t,r){if(!e.length)return r();var n,i=0;function s(){i++,e.length===i&&(n?r(n):r())}e.forEach(function(e){var r=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],i=0;if(!r.length)return s();function a(e){n=e,++i===r.length&&s()}for(var o in e.data._attachments)e.data._attachments.hasOwnProperty(o)&&Kt(e.data._attachments[o],t,a)})}function Qt(e,t,r,n,i,s,a,o){if(function(e,t){for(var r,n=e.slice(),i=t.split("-"),s=parseInt(i[0],10),a=i[1];r=n.pop();){if(r.pos===s&&r.ids[0]===a)return!0;for(var o=r.ids[2],u=0,c=o.length;u<c;u++)n.push({pos:r.pos+1,ids:o[u]})}return!1}(t.rev_tree,r.metadata.rev))return n[i]=r,s();var u=t.winningRev||xe(t),c="deleted"in t?t.deleted:qe(t,u),l="deleted"in r.metadata?r.metadata.deleted:qe(r.metadata),d=/^1-/.test(r.metadata.rev);if(c&&!l&&o&&d){var h=r.data;h._rev=u,h._id=r.metadata.id,r=Pt(h,o)}var f=Ne(t.rev_tree,r.metadata.rev_tree[0],e);if(o&&(c&&l&&"new_leaf"!==f.conflicts||!c&&"new_leaf"!==f.conflicts||c&&!l&&"new_branch"===f.conflicts)){var p=le(J);return n[i]=p,s()}var m=r.metadata.rev;r.metadata.rev_tree=f.tree,r.stemmedRevs=f.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var _=xe(r.metadata),g=qe(r.metadata,_),y=c===g?0:c<g?-1:1;a(r,_,g,m===_?g:qe(r.metadata,m),!0,y,i,s)}function Zt(e,t,r,n,i,s,a,o,u){e=e||1e3;var c=o.new_edits,l=new k,d=0,h=t.length;function f(){++d===h&&u&&u()}t.forEach(function(e,t){if(e._id&&He(e._id)){var n=e._deleted?"_removeLocal":"_putLocal";r[n](e,{ctx:i},function(e,r){s[t]=e||r,f()})}else{var a=e.metadata.id;l.has(a)?(h--,l.get(a).push([e,t])):l.set(a,[[e,t]])}}),l.forEach(function(t,r){var i=0;function u(){++i<t.length?l():f()}function l(){var l=t[i],d=l[0],h=l[1];if(n.has(r))Qt(e,n.get(r),d,s,h,u,a,c);else{var f=Ne([],d.metadata.rev_tree[0],e);d.metadata.rev_tree=f.tree,d.stemmedRevs=f.stemmedRevs||[],function(e,t,r){var n=xe(e.metadata),i=qe(e.metadata,n);if("was_delete"in o&&i)return s[t]=le(K,"deleted"),r();if(c&&function(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}(e)){var u=le(J);return s[t]=u,r()}a(e,n,i,i,!1,i?0:1,t,r)}(d,h,u)}}l()})}var Xt=5,er="document-store",tr="by-sequence",rr="attach-store",nr="attach-seq-store",ir="meta-store",sr="local-store",ar="detect-blob-support";function or(e){try{return JSON.parse(e)}catch(t){return v.a.parse(e)}}function ur(e){try{return JSON.stringify(e)}catch(t){return v.a.stringify(e)}}function cr(e){return function(t){var r="unknown_error";t.target&&t.target.error&&(r=t.target.error.name||t.target.error.message),e(le(ae,r,t.type))}}function lr(e,t,r){return{data:ur(e),winningRev:t,deletedOrLocal:r?"1":"0",seq:e.seq,id:e.id}}function dr(e){if(!e)return null;var t=or(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function hr(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function fr(e,t,r,n){r?n(e?"string"!=typeof e?e:Ct(e,t):Rt([""],{type:t})):e?"string"!=typeof e?Ft(e,function(e){n(jt(e))}):n(e):n("")}function pr(e,t,r,n){var i=Object.keys(e._attachments||{});if(!i.length)return n&&n();var s=0;function a(){++s===i.length&&n&&n()}i.forEach(function(n){t.attachments&&t.include_docs?function(e,t){var n=e._attachments[t],i=n.digest;r.objectStore(rr).get(i).onsuccess=function(e){n.body=e.target.result.body,a()}}(e,n):(e._attachments[n].stub=!0,a())})}function mr(e,t){return b.all(e.map(function(e){if(e.doc&&e.doc._attachments){var r=Object.keys(e.doc._attachments);return b.all(r.map(function(r){var n=e.doc._attachments[r];if("body"in n){var i=n.body,s=n.content_type;return new b(function(a){fr(i,s,t,function(t){e.doc._attachments[r]=W(j(n,["digest","content_type"]),{data:t}),a()})})}}))}}))}function _r(e,t,r){var n=[],i=r.objectStore(tr),s=r.objectStore(rr),a=r.objectStore(nr),o=e.length;function u(){--o||function(){if(!n.length)return;n.forEach(function(e){var t=a.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1));t.onsuccess=function(t){var r=t.target.result;r||s.delete(e)}})}()}e.forEach(function(e){var r=i.index("_doc_id_rev"),s=t+"::"+e;r.getKey(s).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return u();i.delete(t),a.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var r=t.value.digestSeq.split("::")[0];n.push(r),a.delete(t.primaryKey),t.continue()}else u()}}})}function gr(e,t,r){try{return{txn:e.transaction(t,r)}}catch(e){return{error:e}}}var yr=new q;function vr(e,t,r,n,i,s){for(var a,o,u,c,l,d,h,f,p=t.docs,m=0,_=p.length;m<_;m++){var g=p[m];g._id&&He(g._id)||(g=p[m]=Pt(g,r.new_edits)).error&&!h&&(h=g)}if(h)return s(h);var y=!1,v=0,b=new Array(p.length),$=new k,w=!1,M=n._meta.blobSupport?"blob":"base64";function S(){y=!0,O()}function O(){f&&y&&(f.docCount+=v,d.put(f))}function x(){w||(yr.notify(n._meta.name),s(null,b))}function T(e,t,r,n,i,s,a,o){e.metadata.winningRev=t,e.metadata.deleted=r;var u=e.data;if(u._id=e.metadata.id,u._rev=e.metadata.rev,n&&(u._deleted=!0),u._attachments&&Object.keys(u._attachments).length)return function(e,t,r,n,i,s){var a=e.data,o=0,u=Object.keys(a._attachments);function l(){o===u.length&&E(e,t,r,n,i,s)}function d(){o++,l()}u.forEach(function(r){var n=e.data._attachments[r];if(n.stub)o++,l();else{var i=n.data;delete n.data,n.revpos=parseInt(t,10);var s=n.digest;!function(e,t,r){c.count(e).onsuccess=function(n){var i=n.target.result;if(i)return r();var s={digest:e,body:t},a=c.put(s);a.onsuccess=r}}(s,i,d)}})}(e,t,r,i,a,o);v+=s,O(),E(e,t,r,i,a,o)}function E(e,t,r,i,s,c){var d=e.data,h=e.metadata;function f(s){var u=e.stemmedRevs||[];i&&n.auto_compaction&&(u=u.concat(Pe(e.metadata))),u&&u.length&&_r(u,e.metadata.id,a),h.seq=s.target.result;var c=lr(h,t,r);o.put(c).onsuccess=p}function p(){b[s]={ok:!0,id:h.id,rev:h.rev},$.set(e.metadata.id,e.metadata),function(e,t,r){var n=0,i=Object.keys(e.data._attachments||{});if(!i.length)return r();function s(){++n===i.length&&r()}function a(r){var n=e.data._attachments[r].digest,i=l.put({seq:t,digestSeq:n+"::"+t});i.onsuccess=s,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),s()}}for(var o=0;o<i.length;o++)a(i[o])}(e,h.seq,c)}d._doc_id_rev=h.id+"::"+h.rev,delete d._id,delete d._rev;var m=u.put(d);m.onsuccess=f,m.onerror=function(e){e.preventDefault(),e.stopPropagation(),u.index("_doc_id_rev").getKey(d._doc_id_rev).onsuccess=function(e){u.put(d,e.target.result).onsuccess=f}}}Jt(p,M,function(t){if(t)return s(t);!function(){var t=gr(i,[er,tr,rr,sr,nr,ir],"readwrite");if(t.error)return s(t.error);(a=t.txn).onabort=cr(s),a.ontimeout=cr(s),a.oncomplete=x,o=a.objectStore(er),u=a.objectStore(tr),c=a.objectStore(rr),l=a.objectStore(nr),(d=a.objectStore(ir)).get(ir).onsuccess=function(e){f=e.target.result,O()},function(e){var t=[];if(p.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(r){var n=e.data._attachments[r];n.stub&&t.push(n.digest)})}),!t.length)return e();var r,n=0;t.forEach(function(i){!function(e,t){c.get(e).onsuccess=function(r){if(r.target.result)t();else{var n=le(ce,"unknown stub attachment with digest "+e);n.status=412,t(n)}}}(i,function(i){i&&!r&&(r=i),++n===t.length&&e(r)})})}(function(t){if(t)return w=!0,s(t);!function(){if(!p.length)return;var t=0;function i(){++t===p.length&&Zt(e.revs_limit,p,n,$,a,b,T,r,S)}function s(e){var t=dr(e.target.result);t&&$.set(t.id,t),i()}for(var u=0,c=p.length;u<c;u++){var l=p[u];if(l._id&&He(l._id))i();else{var d=o.get(l.metadata.id);d.onsuccess=s}}}()})}()})}function br(e,t,r,n,i){var s,a,o;function u(e){a=e.target.result,s&&i(s,a,o)}function c(e){s=e.target.result,a&&i(s,a,o)}function l(e){var t=e.target.result;if(!t)return i();i([t.key],[t.value],t)}"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&n>1&&!r?(o={continue:function(){if(!s.length)return i();var r,o=s[s.length-1];if(t&&t.upper)try{r=IDBKeyRange.bound(o,t.upper,!0,t.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return i()}else r=IDBKeyRange.lowerBound(o,!0);t=r,s=null,a=null,e.getAll(t,n).onsuccess=u,e.getAllKeys(t,n).onsuccess=c}},e.getAll(t,n).onsuccess=u,e.getAllKeys(t,n).onsuccess=c):r?e.openCursor(t,"prev").onsuccess=l:e.openCursor(t).onsuccess=l}function $r(e,t,r){var n="startkey"in e&&e.startkey,i="endkey"in e&&e.endkey,s="key"in e&&e.key,a=e.skip||0,o="number"==typeof e.limit?e.limit:-1,u=function(e,t,r,n,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!r,!1):IDBKeyRange.bound(e,t,!1,!r);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!r):IDBKeyRange.upperBound(t,!r);if(n)return IDBKeyRange.only(n)}catch(e){return{error:e}}return null}(n,i,!1!==e.inclusive_end,s,e.descending),c=u&&u.error;if(c&&("DataError"!==c.name||0!==c.code))return r(le(ae,c.name,c.message));var l=[er,tr,ir];e.attachments&&l.push(rr);var d=gr(t,l,"readonly");if(d.error)return r(d.error);var h=d.txn;h.oncomplete=function(){e.attachments?mr(y,e.binary).then(w):w()},h.onabort=cr(r);var f,p=h.objectStore(er),m=h.objectStore(tr),_=h.objectStore(ir),g=m.index("_doc_id_rev"),y=[];function v(t,r,n){var i=t.id+"::"+n;g.get(i).onsuccess=function(n){if(r.doc=hr(n.target.result),e.conflicts){var i=Le(t);i.length&&(r.doc._conflicts=i)}pr(r.doc,e,h)}}function b(t,r){var n={id:r.id,key:r.id,value:{rev:t}},i=r.deleted;"ok"===e.deleted?(y.push(n),i?(n.value.deleted=!0,n.doc=null):e.include_docs&&v(r,n,t)):!i&&a--<=0&&(y.push(n),e.include_docs&&v(r,n,t))}function $(e){for(var t=0,r=e.length;t<r&&y.length!==o;t++){var n=dr(e[t]);b(n.winningRev,n)}}function w(){r(null,{total_rows:f,offset:e.skip,rows:y})}return _.get(ir).onsuccess=function(e){f=e.target.result.docCount},c||0===o?void 0:-1===o?function(e,t,r){if("function"!=typeof e.getAll){var n=[];e.openCursor(t).onsuccess=function(e){var t=e.target.result;t?(n.push(t.value),t.continue()):r({target:{result:n}})}}else e.getAll(t).onsuccess=r}(p,u,function(t){var r=t.target.result;e.descending&&(r=r.reverse()),$(r)}):void br(p,u,e.descending,o+a,function(e,t,r){r&&($(t),y.length<o&&r.continue())})}var wr=!1,kr=[];function Mr(){!wr&&kr.length&&(wr=!0,kr.shift()())}function Sr(e,t,r,n){if((e=O(e)).continuous){var i=r+":"+Oe();return yr.addListener(r,i,t,e),yr.notify(r),{cancel:function(){yr.removeListener(r,i)}}}var s=e.doc_ids&&new w(e.doc_ids);e.since=e.since||0;var a,o=e.since,u="limit"in e?e.limit:-1;0===u&&(u=1),a="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var c,l,d,h,f=[],p=0,m=he(e),_=new k;function g(e,t,r,n){if(r.seq!==t)return n();if(r.winningRev===e._rev)return n(r,e);var i=e._id+"::"+r.winningRev;h.get(i).onsuccess=function(e){n(r,hr(e.target.result))}}function y(){e.complete(null,{results:f,last_seq:o})}var v=[er,tr];e.attachments&&v.push(rr);var b=gr(n,v,"readonly");if(b.error)return e.complete(b.error);(c=b.txn).onabort=cr(e.complete),c.oncomplete=function(){!e.continuous&&e.attachments?mr(f).then(y):y()},l=c.objectStore(tr),d=c.objectStore(er),h=l.index("_doc_id_rev"),br(l,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,u,function(t,r,n){if(n&&t.length){var i=new Array(t.length),l=new Array(t.length),h=0;r.forEach(function(e,r){!function(e,t,r){if(s&&!s.has(e._id))return r();var n=_.get(e._id);if(n)return g(e,t,n,r);d.get(e._id).onsuccess=function(i){n=dr(i.target.result),_.set(e._id,n),g(e,t,n,r)}}(hr(e),t[r],function(e,s){l[r]=e,i[r]=s,++h===t.length&&function(){for(var e=0,t=i.length;e<t&&p!==u;e++){var r=i[e];r&&y(l[e],r)}p!==u&&n.continue()}()})})}function y(t,r){var n=e.processChange(r,t,e);o=n.seq=t.seq;var i=m(n);if("object"==typeof i)return e.complete(i);i&&(p++,a&&f.push(n),e.attachments&&e.include_docs?pr(r,e,c,function(){mr([n],e.binary).then(function(){e.onChange(n)})}):e.onChange(n))}})}var Or,xr=new k,Tr=new k;function Er(e,t){var r=this;!function(e,t,r){kr.push(function(){e(function(e,n){!function(e,t,r,n){try{e(t,r)}catch(t){n.emit("error",t)}}(t,e,n,r),wr=!1,f()(function(){Mr()})})}),Mr()}(function(t){!function(e,t,r){var n=t.name,i=null;function s(e,t){var r=e.objectStore(er);r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),r.openCursor().onsuccess=function(e){var n=e.target.result;if(n){var i=n.value,s=qe(i);i.deletedOrLocal=s?"1":"0",r.put(i),n.continue()}else t()}}function a(e,t){var r=e.objectStore(sr),n=e.objectStore(er),i=e.objectStore(tr),s=n.openCursor();s.onsuccess=function(e){var s=e.target.result;if(s){var a=s.value,o=a.id,u=He(o),c=xe(a);if(u){var l=o+"::"+c,d=o+"::",h=o+"::~",f=i.index("_doc_id_rev"),p=IDBKeyRange.bound(d,h,!1,!1),m=f.openCursor(p);m.onsuccess=function(e){if(m=e.target.result){var t=m.value;t._doc_id_rev===l&&r.put(t),i.delete(m.primaryKey),m.continue()}else n.delete(s.primaryKey),s.continue()}}else s.continue()}else t&&t()}}function o(e,t){var r=e.objectStore(tr),n=e.objectStore(rr),i=e.objectStore(nr),s=n.count();s.onsuccess=function(e){var n=e.target.result;if(!n)return t();r.openCursor().onsuccess=function(e){var r=e.target.result;if(!r)return t();for(var n=r.value,s=r.primaryKey,a=Object.keys(n._attachments||{}),o={},u=0;u<a.length;u++){var c=n._attachments[a[u]];o[c.digest]=!0}var l=Object.keys(o);for(u=0;u<l.length;u++){var d=l[u];i.put({seq:s,digestSeq:d+"::"+s})}r.continue()}}}function u(e){var t=e.objectStore(tr),r=e.objectStore(er),n=r.openCursor();n.onsuccess=function(e){var n=e.target.result;if(n){var i=function(e){if(!e.data)return e.deleted="1"===e.deletedOrLocal,e;return dr(e)}(n.value);if(i.winningRev=i.winningRev||xe(i),i.seq)return s();!function(){var e=i.id+"::",r=i.id+"::￿",n=0;t.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,r)).onsuccess=function(e){var t=e.target.result;if(!t)return i.seq=n,s();var r=t.primaryKey;r>n&&(n=r),t.continue()}}()}function s(){var e=lr(i,i.winningRev,i.deleted),t=r.put(e);t.onsuccess=function(){n.continue()}}}}e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=T(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(r,n,s){vr(t,r,n,e,i,s)},e._get=function(e,t,r){var n,s,a,o=t.ctx;if(!o){var u=gr(i,[er,tr,rr],"readonly");if(u.error)return r(u.error);o=u.txn}function c(){r(a,{doc:n,metadata:s,ctx:o})}o.objectStore(er).get(e).onsuccess=function(e){if(!(s=dr(e.target.result)))return a=le(K,"missing"),c();var r;if(t.rev)r=t.latest?ze(t.rev,s):t.rev;else{r=s.winningRev;var i=qe(s);if(i)return a=le(K,"deleted"),c()}var u=o.objectStore(tr),l=s.id+"::"+r;u.index("_doc_id_rev").get(l).onsuccess=function(e){if((n=e.target.result)&&(n=hr(n)),!n)return a=le(K,"missing"),c();c()}}},e._getAttachment=function(e,t,r,n,s){var a;if(n.ctx)a=n.ctx;else{var o=gr(i,[er,tr,rr],"readonly");if(o.error)return s(o.error);a=o.txn}var u=r.digest,c=r.content_type;a.objectStore(rr).get(u).onsuccess=function(e){var t=e.target.result.body;fr(t,c,n.binary,function(e){s(null,e)})}},e._info=function(t){var r,n,s=gr(i,[ir,tr],"readonly");if(s.error)return t(s.error);var a=s.txn;a.objectStore(ir).get(ir).onsuccess=function(e){n=e.target.result.docCount},a.objectStore(tr).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;r=t?t.key:0},a.oncomplete=function(){t(null,{doc_count:n,update_seq:r,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(e,t){$r(e,i,t)},e._changes=function(t){return Sr(t,e,n,i)},e._close=function(e){i.close(),xr.delete(n),e()},e._getRevisionTree=function(e,t){var r=gr(i,[er],"readonly");if(r.error)return t(r.error);var n=r.txn,s=n.objectStore(er).get(e);s.onsuccess=function(e){var r=dr(e.target.result);r?t(null,r.rev_tree):t(le(K))}},e._doCompaction=function(e,t,r){var n=[er,tr,rr,nr],s=gr(i,n,"readwrite");if(s.error)return r(s.error);var a=s.txn,o=a.objectStore(er);o.get(e).onsuccess=function(r){var n=dr(r.target.result);Te(n.rev_tree,function(e,r,n,i,s){var a=r+"-"+n;-1!==t.indexOf(a)&&(s.status="missing")}),_r(t,e,a);var i=n.winningRev,s=n.deleted;a.objectStore(er).put(lr(n,i,s))},a.onabort=cr(r),a.oncomplete=function(){r()}},e._getLocal=function(e,t){var r=gr(i,[sr],"readonly");if(r.error)return t(r.error);var n=r.txn,s=n.objectStore(sr).get(e);s.onerror=cr(t),s.onsuccess=function(e){var r=e.target.result;r?(delete r._doc_id_rev,t(null,r)):t(le(K))}},e._putLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),delete e._revisions;var n=e._rev,s=e._id;e._rev=n?"0-"+(parseInt(n.split("-")[1],10)+1):"0-1";var a,o=t.ctx;if(!o){var u=gr(i,[sr],"readwrite");if(u.error)return r(u.error);(o=u.txn).onerror=cr(r),o.oncomplete=function(){a&&r(null,a)}}var c,l=o.objectStore(sr);n?(c=l.get(s)).onsuccess=function(i){var s=i.target.result;if(s&&s._rev===n){var o=l.put(e);o.onsuccess=function(){a={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,a)}}else r(le(J))}:((c=l.add(e)).onerror=function(e){r(le(J)),e.preventDefault(),e.stopPropagation()},c.onsuccess=function(){a={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,a)})},e._removeLocal=function(e,t,r){"function"==typeof t&&(r=t,t={});var n,s=t.ctx;if(!s){var a=gr(i,[sr],"readwrite");if(a.error)return r(a.error);(s=a.txn).oncomplete=function(){n&&r(null,n)}}var o=e._id,u=s.objectStore(sr),c=u.get(o);c.onerror=cr(r),c.onsuccess=function(i){var s=i.target.result;s&&s._rev===e._rev?(u.delete(o),n={ok:!0,id:o,rev:"0-0"},t.ctx&&r(null,n)):r(le(K))}},e._destroy=function(e,t){yr.removeAllListeners(n);var r=Tr.get(n);r&&r.result&&(r.result.close(),xr.delete(n));var i=indexedDB.deleteDatabase(n);i.onsuccess=function(){Tr.delete(n),U()&&n in localStorage&&delete localStorage[n],t(null,{ok:!0})},i.onerror=cr(t)};var c,l=xr.get(n);if(l)return i=l.idb,e._meta=l.global,f()(function(){r(null,e)});c=t.storage?function(e,t){try{return indexedDB.open(e,{version:Xt,storage:t})}catch(t){return indexedDB.open(e,Xt)}}(n,t.storage):indexedDB.open(n,Xt);Tr.set(n,c),c.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1)return function(e){var t=e.createObjectStore(er,{keyPath:"id"});e.createObjectStore(tr,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(rr,{keyPath:"digest"}),e.createObjectStore(ir,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(ar),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(sr,{keyPath:"_id"});var r=e.createObjectStore(nr,{autoIncrement:!0});r.createIndex("seq","seq"),r.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var r=e.currentTarget.transaction;e.oldVersion<3&&function(e){e.createObjectStore(sr,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(t),e.oldVersion<4&&function(e){var t=e.createObjectStore(nr,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var n=[s,a,o,u],i=e.oldVersion;!function e(){var t=n[i-1];i++;t&&t(r,e)}()},c.onsuccess=function(t){(i=t.target.result).onversionchange=function(){i.close(),xr.delete(n)},i.onabort=function(e){H("error","Database has a global failure",e.target.error),i.close(),xr.delete(n)};var s,a,o,u,c=i.transaction([ir,ar,er],"readwrite"),l=!1;function d(){void 0!==o&&l&&(e._meta={name:n,instanceId:u,blobSupport:o},xr.set(n,{idb:i,global:e._meta}),r(null,e))}function h(){if(void 0!==a&&void 0!==s){var e=n+"_id";e in s?u=s[e]:s[e]=u=Oe(),s.docCount=a,c.objectStore(ir).put(s)}}c.objectStore(ir).get(ir).onsuccess=function(e){s=e.target.result||{id:ir},h()},function(e,t){e.objectStore(er).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){t(e.target.result)}}(c,function(e){a=e,h()}),Or||(Or=function(e){return new b(function(t){var r=Rt([""]);e.objectStore(ar).put(r,"key").onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)},e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)}}).catch(function(){return!1})}(c)),Or.then(function(e){o=e,d()}),c.oncomplete=function(){l=!0,d()}},c.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";H("error",e),r(le(ae,e))}}(r,e,t)},t,r.constructor)}Er.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);try{return!e&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}};function Dr(e){return e<65?e-48:e-55}function Lr(e,t){return"UTF-8"===t?function(e){return decodeURIComponent(escape(e))}(function(e,t,r){for(var n="";t<r;)n+=String.fromCharCode(Dr(e.charCodeAt(t++))<<4|Dr(e.charCodeAt(t++)));return n}(e,0,e.length)):function(e,t,r){for(var n="";t<r;)n+=String.fromCharCode(Dr(e.charCodeAt(t+2))<<12|Dr(e.charCodeAt(t+3))<<8|Dr(e.charCodeAt(t))<<4|Dr(e.charCodeAt(t+1))),t+=4;return n}(e,0,e.length)}function Pr(e){return"'"+e+"'"}var Ar=7,jr=Pr("document-store"),Rr=Pr("by-sequence"),Ir=Pr("attach-store"),Cr=Pr("local-store"),Yr=Pr("metadata-store"),Fr=Pr("attach-seq-store");function Nr(e){return delete e._id,delete e._rev,JSON.stringify(e)}function Ur(e,t,r){return(e=JSON.parse(e))._id=t,e._rev=r,e}function qr(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function Hr(e,t,r,n,i){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(r?" ON "+r:"")+(n?" WHERE "+("string"==typeof n?n:n.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function zr(e,t,r){if(e.length){var n=0,i=[];e.forEach(function(e){var n="SELECT seq FROM "+Rr+" WHERE doc_id=? AND rev=?";r.executeSql(n,[t,e],function(e,t){if(!t.rows.length)return s();var r=t.rows.item(0).seq;i.push(r),e.executeSql("DELETE FROM "+Rr+" WHERE seq=?",[r],s)})})}function s(){++n===e.length&&function(){if(!i.length)return;var e="SELECT DISTINCT digest AS digest FROM "+Fr+" WHERE seq IN "+qr(i.length);r.executeSql(e,i,function(e,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).digest);if(r.length){var s="DELETE FROM "+Fr+" WHERE seq IN ("+i.map(function(){return"?"}).join(",")+")";e.executeSql(s,i,function(e){var t="SELECT digest FROM "+Fr+" WHERE digest IN ("+r.map(function(){return"?"}).join(",")+")";e.executeSql(t,r,function(e,t){for(var n=new w,i=0;i<t.rows.length;i++)n.add(t.rows.item(i).digest);r.forEach(function(t){n.has(t)||(e.executeSql("DELETE FROM "+Fr+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+Ir+" WHERE digest=?",[t]))})})})}})}()}}function Br(e){return function(t){H("error","WebSQL threw an error",t);var r=t&&t.constructor.toString().match(/function ([^(]+)/),n=(r&&r[1]||t.type,t.target||t.message);e(le(oe,n))}}function Wr(e,t,r,n,i,s,a){var o,u=r.new_edits,c=t.docs.map(function(e){return e._id&&He(e._id)?e:Pt(e,u)}),l=c.filter(function(e){return e.error});if(l.length)return a(l[0]);var d,h=new Array(c.length),f=new k;function p(){if(d)return a(d);s.notify(n._name),a(null,h)}function m(e){var t=[];if(c.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(r){var n=e.data._attachments[r];n.stub&&t.push(n.digest)})}),!t.length)return e();var r,n=0;t.forEach(function(i){!function(e,t){var r="SELECT count(*) as cnt FROM "+Ir+" WHERE digest=?";o.executeSql(r,[e],function(r,n){if(0===n.rows.item(0).cnt){var i=le(ce,"unknown stub attachment with digest "+e);t(i)}else t()})}(i,function(i){i&&!r&&(r=i),++n===t.length&&e(r)})})}function _(e,t,r,i,s,a,u,c){function l(){var t=e.data,r=i?1:0,n=t._id,s=t._rev,a=Nr(t),u="INSERT INTO "+Rr+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",c=[n,s,a,r];function l(e,r){var n=0,i=Object.keys(t._attachments||{});if(!i.length)return r();function s(){return++n===i.length&&r(),!1}function a(r){var n="INSERT INTO "+Fr+" (digest, seq) VALUES (?,?)",i=[t._attachments[r].digest,e];o.executeSql(n,i,s,s)}for(var u=0;u<i.length;u++)a(i[u])}o.executeSql(u,c,function(e,t){var r=t.insertId;l(r,function(){y(e,r)})},function(){var e=Hr("seq",Rr,null,"doc_id=? AND rev=?");return o.executeSql(e,[n,s],function(e,t){var i=t.rows.item(0).seq,o="UPDATE "+Rr+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",u=[a,r,n,s];e.executeSql(o,u,function(e){l(i,function(){y(e,i)})})}),!1})}function d(e){p||(e?c(p=e):m===_.length&&l())}var p=null,m=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var _=Object.keys(e.data._attachments||{});function g(e){m++,d(e)}function y(r,i){var a=e.metadata.id,o=e.stemmedRevs||[];s&&n.auto_compaction&&(o=Pe(e.metadata).concat(o)),o.length&&zr(o,a,r),e.metadata.seq=i;var l=e.metadata.rev;delete e.metadata.rev;var d=s?"UPDATE "+jr+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+Rr+" WHERE doc_id="+jr+".id AND rev=?) WHERE id=?":"INSERT INTO "+jr+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",p=ur(e.metadata),m=s?[p,i,t,a]:[a,i,i,p];r.executeSql(d,m,function(){h[u]={ok:!0,id:e.metadata.id,rev:l},f.set(a,e.metadata),c()})}i&&(e.data._deleted=!0),_.forEach(function(r){var n=e.data._attachments[r];if(n.stub)m++,d();else{var i=n.data;delete n.data,n.revpos=parseInt(t,10),function(e,t,r){var n="SELECT digest FROM "+Ir+" WHERE digest=?";o.executeSql(n,[e],function(i,s){if(s.rows.length)return r();n="INSERT INTO "+Ir+" (digest, body, escaped) VALUES (?,?,1)",i.executeSql(n,[e,function(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}(t)],function(){r()},function(){return r(),!1})})}(n.digest,i,g)}}),_.length||l()}function g(){Zt(e.revs_limit,c,n,f,o,h,_,r)}Jt(c,"binary",function(e){if(e)return a(e);i.transaction(function(e){o=e,m(function(e){e?d=e:function(e){if(!c.length)return e();var t=0;function r(){++t===c.length&&e()}c.forEach(function(e){if(e._id&&He(e._id))return r();var t=e.metadata.id;o.executeSql("SELECT json FROM "+jr+" WHERE id = ?",[t],function(e,n){if(n.rows.length){var i=or(n.rows.item(0).json);f.set(t,i)}r()})})}(g)})},Br(a),p)})}var Vr=new k;var Gr=new q;function Kr(e,t,r,n,i){var s=Object.keys(e._attachments||{});if(!s.length)return i&&i();var a=0;function o(){++a===s.length&&i&&i()}s.forEach(function(i){t.attachments&&t.include_docs?function(e,i){var s=e._attachments[i],a={binary:t.binary,ctx:n};r._getAttachment(e._id,i,s,a,function(t,r){e._attachments[i]=W(j(s,["digest","content_type"]),{data:r}),o()})}(e,i):(e._attachments[i].stub=!0,o())})}var Jr=1,Qr="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+Rr+" (seq, deleted)",Zr="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+Rr+" (doc_id, rev)",Xr="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+jr+" (winningseq)",en="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+Fr+" (seq)",tn="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+Fr+" (digest, seq)",rn=Rr+".seq = "+jr+".winningseq",nn=Rr+".seq AS seq, "+Rr+".deleted AS deleted, "+Rr+".json AS data, "+Rr+".rev AS rev, "+jr+".json AS metadata";function sn(e,t){var r,n=this,i=null,s=function(e){return"size"in e?1e6*e.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}(e),a=[];n._name=e.name;var o=function(e){var t=Vr.get(e.name);return t||(t=function(e){try{return{db:function(e){return e.websql(e.name,e.version,e.description,e.size)}(e)}}catch(e){return{error:e}}}(e),Vr.set(e.name,t)),t}(W({},e,{version:Jr,description:e.name,size:s}));if(o.error)return Br(t)(o.error);var u=o.db;function c(){U()&&(window.localStorage["_pouch__websqldb_"+n._name]=!0),t(null,n)}function l(e,t){e.executeSql(Xr),e.executeSql("ALTER TABLE "+Rr+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(Qr),e.executeSql("ALTER TABLE "+jr+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+jr+" (local, id)");var r="SELECT "+jr+".winningseq AS seq, "+jr+".json AS metadata FROM "+Rr+" JOIN "+jr+" ON "+Rr+".seq = "+jr+".winningseq";e.executeSql(r,[],function(e,r){for(var n=[],i=[],s=0;s<r.rows.length;s++){var a=r.rows.item(s),o=a.seq,u=JSON.parse(a.metadata);qe(u)&&n.push(o),He(u.id)&&i.push(u.id)}e.executeSql("UPDATE "+jr+"SET local = 1 WHERE id IN "+qr(i.length),i,function(){e.executeSql("UPDATE "+Rr+" SET deleted = 1 WHERE seq IN "+qr(n.length),n,t)})})})})}function d(e,t){var r="CREATE TABLE IF NOT EXISTS "+Cr+" (id UNIQUE, rev, json)";e.executeSql(r,[],function(){var r="SELECT "+jr+".id AS id, "+Rr+".json AS data FROM "+Rr+" JOIN "+jr+" ON "+Rr+".seq = "+jr+".winningseq WHERE local = 1";e.executeSql(r,[],function(e,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i));!function r(){if(!n.length)return t(e);var i=n.shift(),s=JSON.parse(i.data)._rev;e.executeSql("INSERT INTO "+Cr+" (id, rev, json) VALUES (?,?,?)",[i.id,s,i.data],function(e){e.executeSql("DELETE FROM "+jr+" WHERE id=?",[i.id],function(e){e.executeSql("DELETE FROM "+Rr+" WHERE seq=?",[i.seq],function(){r()})})})}()})})}function h(e,t){function n(n){!function i(){if(!n.length)return t(e);var s=Lr(n.shift().hex,r),a=s.lastIndexOf("::"),o=s.substring(0,a),u=s.substring(a+2),c="UPDATE "+Rr+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(c,[o,u,s],function(){i()})}()}var i="ALTER TABLE "+Rr+" ADD COLUMN doc_id";e.executeSql(i,[],function(e){var t="ALTER TABLE "+Rr+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(Zr,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+Rr;e.executeSql(t,[],function(e,t){for(var r=[],i=0;i<t.rows.length;i++)r.push(t.rows.item(i));n(r)})})})})}function f(e,t){function r(e){var r="SELECT COUNT(*) AS cnt FROM "+Ir;e.executeSql(r,[],function(e,r){if(!r.rows.item(0).cnt)return t(e);var n=0,i=10;!function r(){var s=Hr(nn+", "+jr+".id AS id",[jr,Rr],rn,null,jr+".id ");s+=" LIMIT "+i+" OFFSET "+n,n+=i,e.executeSql(s,[],function(e,n){if(!n.rows.length)return t(e);var i={};function s(e,t){var r=i[e]=i[e]||[];-1===r.indexOf(t)&&r.push(t)}for(var a=0;a<n.rows.length;a++)for(var o=n.rows.item(a),u=Ur(o.data,o.id,o.rev),c=Object.keys(u._attachments||{}),l=0;l<c.length;l++)s(u._attachments[c[l]].digest,o.seq);var d=[];if(Object.keys(i).forEach(function(e){i[e].forEach(function(t){d.push([e,t])})}),!d.length)return r();var h=0;d.forEach(function(t){var n="INSERT INTO "+Fr+" (digest, seq) VALUES (?,?)";e.executeSql(n,t,function(){++h===d.length&&r()})})})}()})}var n="CREATE TABLE IF NOT EXISTS "+Fr+" (digest, seq INTEGER)";e.executeSql(n,[],function(e){e.executeSql(tn,[],function(e){e.executeSql(en,[],r)})})}function p(e,t){var r="ALTER TABLE "+Ir+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(r,[],t)}function m(e,t){var r="ALTER TABLE "+jr+" ADD COLUMN max_seq INTEGER";e.executeSql(r,[],function(e){var r="UPDATE "+jr+" SET max_seq=(SELECT MAX(seq) FROM "+Rr+" WHERE doc_id=id)";e.executeSql(r,[],function(e){var r="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+jr+" (max_seq)";e.executeSql(r,[],t)})})}function _(){for(;a.length>0;){a.pop()(null,i)}}function g(e,t){if(0===t){var r="CREATE TABLE IF NOT EXISTS "+Yr+" (dbid, db_version INTEGER)",n="CREATE TABLE IF NOT EXISTS "+Ir+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",s="CREATE TABLE IF NOT EXISTS "+Fr+" (digest, seq INTEGER)",a="CREATE TABLE IF NOT EXISTS "+jr+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",o="CREATE TABLE IF NOT EXISTS "+Rr+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",u="CREATE TABLE IF NOT EXISTS "+Cr+" (id UNIQUE, rev, json)";e.executeSql(n),e.executeSql(u),e.executeSql(s,[],function(){e.executeSql(en),e.executeSql(tn)}),e.executeSql(a,[],function(){e.executeSql(Xr),e.executeSql(o,[],function(){e.executeSql(Qr),e.executeSql(Zr),e.executeSql(r,[],function(){var t="INSERT INTO "+Yr+" (db_version, dbid) VALUES (?,?)";i=Oe();var r=[Ar,i];e.executeSql(t,r,function(){_()})})})})}else{var c=[l,d,h,f,p,m,function(){t<Ar&&e.executeSql("UPDATE "+Yr+" SET db_version = "+Ar);var r="SELECT dbid FROM "+Yr;e.executeSql(r,[],function(e,t){i=t.rows.item(0).dbid,_()})}],g=t,y=function(e){c[g-1](e,y),g++};y(e)}}function y(e,t){var r=Hr("COUNT("+jr+".id) AS 'num'",[jr,Rr],rn,Rr+".deleted=0");e.executeSql(r,[],function(e,r){t(r.rows.item(0).num)})}"function"!=typeof u.readTransaction&&(u.readTransaction=u.transaction),u.transaction(function(e){!function(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,n){var i=n.rows.item(0).hex;r=2===i.length?"UTF-8":"UTF-16",t()})}(e,function(){!function(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+Yr;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+Yr,[],function(e,t){var r=t.rows.item(0).db_version;g(e,r)}):e.executeSql("ALTER TABLE "+Yr+" ADD COLUMN db_version INTEGER",[],function(){g(e,1)}):g(e,0)})}(e)})},Br(t),c),n._remote=!1,n.type=function(){return"websql"},n._id=T(function(e){e(null,i)}),n._info=function(e){var t,n;u.readTransaction(function(e){!function(e,t){var r="SELECT MAX(seq) AS seq FROM "+Rr;e.executeSql(r,[],function(e,r){var n=r.rows.item(0).seq||0;t(n)})}(e,function(e){t=e}),y(e,function(e){n=e})},Br(e),function(){e(null,{doc_count:n,update_seq:t,websql_encoding:r})})},n._bulkDocs=function(t,r,i){Wr(e,t,r,n,u,Gr,i)},n._get=function(e,t,r){var i,s,a,o,c=t.ctx;if(!c)return u.readTransaction(function(i){n._get(e,W({ctx:i},t),r)});function l(e){r(e,{doc:i,metadata:s,ctx:c})}if(t.rev){if(t.latest)return void function(e,t,r,n,i){var s=Hr(nn,[jr,Rr],rn,jr+".id=?"),a=[t];e.executeSql(s,a,function(e,t){if(!t.rows.length){var s=le(K,"missing");return i(s)}var a=or(t.rows.item(0).metadata);n(ze(r,a))})}(c,e,t.rev,function(i){t.latest=!1,t.rev=i,n._get(e,t,r)},l);a=Hr(nn,[jr,Rr],jr+".id="+Rr+".doc_id",[Rr+".doc_id=?",Rr+".rev=?"]),o=[e,t.rev]}else a=Hr(nn,[jr,Rr],rn,jr+".id=?"),o=[e];c.executeSql(a,o,function(e,r){if(!r.rows.length)return l(le(K,"missing"));var n=r.rows.item(0);if(s=or(n.metadata),n.deleted&&!t.rev)return l(le(K,"deleted"));i=Ur(n.data,s.id,n.rev),l()})},n._allDocs=function(e,t){var r,i=[],s="startkey"in e&&e.startkey,a="endkey"in e&&e.endkey,o="key"in e&&e.key,c="descending"in e&&e.descending,l="limit"in e?e.limit:-1,d="skip"in e?e.skip:0,h=!1!==e.inclusive_end,f=[],p=[];if(!1!==o)p.push(jr+".id = ?"),f.push(o);else if(!1!==s||!1!==a){if(!1!==s&&(p.push(jr+".id "+(c?"<=":">=")+" ?"),f.push(s)),!1!==a){var m=c?">":"<";h&&(m+="="),p.push(jr+".id "+m+" ?"),f.push(a)}!1!==o&&(p.push(jr+".id = ?"),f.push(o))}"ok"!==e.deleted&&p.push(Rr+".deleted = 0"),u.readTransaction(function(t){if(y(t,function(e){r=e}),0!==l){var s=Hr(nn,[jr,Rr],rn,p,jr+".id "+(c?"DESC":"ASC"));s+=" LIMIT "+l+" OFFSET "+d,t.executeSql(s,f,function(t,r){for(var s=0,a=r.rows.length;s<a;s++){var o=r.rows.item(s),u=or(o.metadata),c=u.id,l=Ur(o.data,c,o.rev),d=l._rev,h={id:c,key:c,value:{rev:d}};if(e.include_docs){if(h.doc=l,h.doc._rev=d,e.conflicts){var f=Le(u);f.length&&(h.doc._conflicts=f)}Kr(h.doc,e,n,t)}if(o.deleted){if("ok"!==e.deleted)continue;h.value.deleted=!0,h.doc=null}i.push(h)}})}},Br(t),function(){t(null,{total_rows:r,offset:e.skip,rows:i})})},n._changes=function(e){if((e=O(e)).continuous){var t=n._name+":"+Oe();return Gr.addListener(n._name,t,n,e),Gr.notify(n._name),{cancel:function(){Gr.removeListener(n._name,t)}}}var r=e.descending;e.since=e.since&&!r?e.since:0;var i,s="limit"in e?e.limit:-1;0===s&&(s=1),i="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var a=[],o=0;!function(){var t=jr+".json AS metadata, "+jr+".max_seq AS maxSeq, "+Rr+".json AS winningDoc, "+Rr+".rev AS winningRev ",c=jr+" JOIN "+Rr,l=jr+".id="+Rr+".doc_id AND "+jr+".winningseq="+Rr+".seq",d=["maxSeq > ?"],h=[e.since];e.doc_ids&&(d.push(jr+".id IN "+qr(e.doc_ids.length)),h=h.concat(e.doc_ids));var f=Hr(t,c,l,d,"maxSeq "+(r?"DESC":"ASC")),p=he(e);e.view||e.filter||(f+=" LIMIT "+s);var m=e.since||0;u.readTransaction(function(t){t.executeSql(f,h,function(t,r){function u(t){return function(){e.onChange(t)}}for(var c=0,l=r.rows.length;c<l;c++){var d=r.rows.item(c),h=or(d.metadata);m=d.maxSeq;var f=Ur(d.winningDoc,h.id,d.winningRev),_=e.processChange(f,h,e);_.seq=d.maxSeq;var g=p(_);if("object"==typeof g)return e.complete(g);if(g&&(o++,i&&a.push(_),e.attachments&&e.include_docs?Kr(f,e,n,t,u(_)):u(_)()),o===s)break}})},Br(e.complete),function(){e.continuous||e.complete(null,{results:a,last_seq:m})})}()},n._close=function(e){e()},n._getAttachment=function(e,t,n,i,s){var a,o=i.ctx,u=n.digest,c=n.content_type,l="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+Ir+" WHERE digest=?";o.executeSql(l,[u],function(e,t){var n=t.rows.item(0),o=n.escaped?function(e){return e.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}(n.body):Lr(n.body,r);a=i.binary?It(o,c):jt(o),s(null,a)})},n._getRevisionTree=function(e,t){u.readTransaction(function(r){var n="SELECT json AS metadata FROM "+jr+" WHERE id = ?";r.executeSql(n,[e],function(e,r){if(r.rows.length){var n=or(r.rows.item(0).metadata);t(null,n.rev_tree)}else t(le(K))})})},n._doCompaction=function(e,t,r){if(!t.length)return r();u.transaction(function(r){var n="SELECT json AS metadata FROM "+jr+" WHERE id = ?";r.executeSql(n,[e],function(r,n){var i=or(n.rows.item(0).metadata);Te(i.rev_tree,function(e,r,n,i,s){var a=r+"-"+n;-1!==t.indexOf(a)&&(s.status="missing")});var s="UPDATE "+jr+" SET json = ? WHERE id = ?";r.executeSql(s,[ur(i),e])}),zr(t,e,r)},Br(r),function(){r()})},n._getLocal=function(e,t){u.readTransaction(function(r){var n="SELECT json, rev FROM "+Cr+" WHERE id=?";r.executeSql(n,[e],function(r,n){if(n.rows.length){var i=n.rows.item(0),s=Ur(i.json,e,i.rev);t(null,s)}else t(le(K))})})},n._putLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),delete e._revisions;var n,i=e._rev,s=e._id;n=e._rev=i?"0-"+(parseInt(i.split("-")[1],10)+1):"0-1";var a,o=Nr(e);function c(e){var u,c;i?(u="UPDATE "+Cr+" SET rev=?, json=? WHERE id=? AND rev=?",c=[n,o,s,i]):(u="INSERT INTO "+Cr+" (id, rev, json) VALUES (?,?,?)",c=[s,n,o]),e.executeSql(u,c,function(e,i){i.rowsAffected?(a={ok:!0,id:s,rev:n},t.ctx&&r(null,a)):r(le(J))},function(){return r(le(J)),!1})}t.ctx?c(t.ctx):u.transaction(c,Br(r),function(){a&&r(null,a)})},n._removeLocal=function(e,t,r){var n;function i(i){var s="DELETE FROM "+Cr+" WHERE id=? AND rev=?",a=[e._id,e._rev];i.executeSql(s,a,function(i,s){if(!s.rowsAffected)return r(le(K));n={ok:!0,id:e._id,rev:"0-0"},t.ctx&&r(null,n)})}"function"==typeof t&&(r=t,t={}),t.ctx?i(t.ctx):u.transaction(i,Br(r),function(){n&&r(null,n)})},n._destroy=function(e,t){Gr.removeAllListeners(n._name),u.transaction(function(e){[jr,Rr,Ir,Yr,Cr,Fr].forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},Br(t),function(){U()&&(delete window.localStorage["_pouch__websqldb_"+n._name],delete window.localStorage[n._name]),t(null,{ok:!0})})}}function an(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=U(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var r=function(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}();return e&&(localStorage[t]=r?"1":"0"),r}function on(e,t,r,n){return openDatabase(e,t,r,n)}function un(e,t){var r=W({websql:on},e);sn.call(this,r,t)}un.valid=function(){return"function"==typeof openDatabase&&an()},un.use_prefix=!0;function cn(e,t){var r,n,i,s=new Headers,a={method:e.method,credentials:"include",headers:s};return e.json&&(s.set("Accept","application/json"),s.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.processData&&"string"!=typeof e.body?a.body=JSON.stringify(e.body):a.body="body"in e?e.body:null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&s.set(t,e.headers[t])}),r=function(){for(var e={},t=new b(function(t,r){e.resolve=t,e.reject=r}),r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.promise=t,b.resolve().then(function(){return fetch.apply(null,r)}).then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e}(e.url,a),e.timeout>0&&(n=setTimeout(function(){r.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),r.promise.then(function(t){return i={statusCode:t.status},e.timeout>0&&clearTimeout(n),i.statusCode>=200&&i.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){i.statusCode>=200&&i.statusCode<300?t(null,i,e):(e.status=i.statusCode,t(e))}).catch(function(e){e||(e=new Error("canceled")),t(e)}),{abort:r.reject}}var ln=function(){try{return new XMLHttpRequest,!0}catch(e){return!1}}();function dn(e,t){return ln||e.xhr?function(e,t){var r,n,i=!1,s=function(){i=!0,r.abort(),o()},a={abort:function(){r.abort(),o()}},o=function(){clearTimeout(n),a.abort=function(){},r&&(r.onprogress=void 0,r.upload&&(r.upload.onprogress=void 0),r.onreadystatechange=void 0,r=void 0)};r=e.xhr?new e.xhr:new XMLHttpRequest;try{r.open(e.method,e.url)}catch(e){return t(new Error(e.name||"Url is invalid"))}for(var u in r.withCredentials=!("withCredentials"in e)||e.withCredentials,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(r.responseType="arraybuffer"),"body"in e||(e.body=null),e.headers)e.headers.hasOwnProperty(u)&&r.setRequestHeader(u,e.headers[u]);return e.timeout>0&&(n=setTimeout(s,e.timeout),r.onprogress=function(){clearTimeout(n),4!==r.readyState&&(n=setTimeout(s,e.timeout))},void 0!==r.upload&&(r.upload.onprogress=r.onprogress)),r.onreadystatechange=function(){if(4===r.readyState){var n={statusCode:r.status};if(r.status>=200&&r.status<300){var s;s=e.binary?Rt([r.response||""],{type:r.getResponseHeader("Content-Type")}):r.responseText,t(null,n,s)}else{var a={};if(i)(a=new Error("ETIMEDOUT")).code="ETIMEDOUT";else if("string"==typeof r.response)try{a=JSON.parse(r.response)}catch(e){}a.status=r.status,t(a)}o()}},e.body&&e.body instanceof Blob?qt(e.body,function(e){r.send(e)}):r.send(e.body),a}(e,t):cn(e,t)}var hn=function(){};function fn(e,t){e=O(e);return(e=W({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},e)).json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),dn(e,function(r,n,i){if(r)return t(de(r));var s,a=n.headers&&n.headers["content-type"],o=i||"";if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof o&&(/json/.test(a)||/^[\s]*\{/.test(o)&&/\}[\s]*$/.test(o)))try{o=JSON.parse(o.toString())}catch(e){}n.statusCode>=200&&n.statusCode<300?function(t,r,n){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){return n(e)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?de(e):e})),e.binary&&hn(t,r),n(null,t,r)}(o,n,t):((s=de(o)).status=n.statusCode,t(s))})}function pn(e,t){var r=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==r.indexOf("safari")&&-1===r.indexOf("chrome"),i=-1!==r.indexOf("msie"),s=-1!==r.indexOf("edge"),a=n||(i||s)&&"GET"===e.method,o=!("cache"in e)||e.cache;if(!/^blob:/.test(e.url)&&(a||!o)){var u=-1!==e.url.indexOf("?");e.url+=(u?"&":"?")+"_nonce="+Date.now()}return fn(e,t)}var mn=25,_n=50,gn=5e3,yn=1e4,vn={};function bn(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];r.data=Ct(r.data,r.content_type)})}function $n(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function wn(e){return e._attachments&&Object.keys(e._attachments)?b.all(Object.keys(e._attachments).map(function(t){var r=e._attachments[t];if(r.data&&"string"!=typeof r.data)return new b(function(e){Ut(r.data,e)}).then(function(e){r.data=e})})):b.resolve()}function kn(e,t){if(function(e){if(!e.prefix)return!1;var t=we(e.prefix).protocol;return"http"===t||"https"===t}(t)){var r=t.name.substr(t.prefix.length);e=t.prefix+encodeURIComponent(r)}var n=we(e);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});var i=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=i.pop(),-1===n.db.indexOf("%")&&(n.db=encodeURIComponent(n.db)),n.path=i.join("/"),n}function Mn(e,t){return Sn(e,e.db+"/"+t)}function Sn(e,t){var r=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+r+t}function On(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function xn(e,t){var r,n=this,i=kn(e.name,e),s=Mn(i,""),a=(e=O(e)).ajax||{};if(e.auth||i.auth){var o=e.auth||i.auth,c=o.username+":"+o.password,l=jt(unescape(encodeURIComponent(c)));a.headers=a.headers||{},a.headers.Authorization="Basic "+l}function d(e,t,r){var i=e.ajax||{},s=W(O(a),i,t),o=O(a.headers||{});return s.headers=W(o,i.headers,t.headers||{}),n.constructor.listeners("debug").length&&n.constructor.emit("debug",["http",s.method,s.url]),n._ajax(s,r)}function h(e,t){return new b(function(r,n){d(e,t,function(e,t){if(e)return n(e);r(t)})})}function p(e,t){return E(e,u()(function(e){m().then(function(){return t.apply(this,e)}).catch(function(t){e.pop()(t)})}))}function m(){return e.skipSetup||e.skip_setup?b.resolve():r||((r=h({},{method:"GET",url:s}).catch(function(e){return e&&e.status&&404===e.status?(B(404,"PouchDB is just detecting if the remote exists."),h({},{method:"PUT",url:s})):b.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||b.reject(e)})).catch(function(){r=null}),r)}function _(e){return e.split("/").map(encodeURIComponent).join("/")}n._ajax=pn,f()(function(){t(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=p("id",function(e){d({},{method:"GET",url:Sn(i,"")},function(t,r){var n=r&&r.uuid?r.uuid+i.db:Mn(i,"");e(null,n)})}),n.request=p("request",function(e,t){e.url=Mn(i,e.url),d({},e,t)}),n.compact=p("compact",function(e,t){"function"==typeof e&&(t=e,e={}),d(e=O(e),{url:Mn(i,"_compact"),method:"POST"},function(){!function r(){n.info(function(n,i){i&&!i.compact_running?t(null,{ok:!0}):setTimeout(r,e.interval||200)})}()})}),n.bulkGet=E("bulkGet",function(e,t){var r=this;function n(t){var r={};e.revs&&(r.revs=!0),e.attachments&&(r.attachments=!0),e.latest&&(r.latest=!0),d(e,{url:Mn(i,"_bulk_get"+On(r)),method:"POST",body:{docs:e.docs}},t)}function s(){var n=_n,i=Math.ceil(e.docs.length/n),s=0,o=new Array(i);function u(e){return function(r,n){o[e]=n.results,++s===i&&t(null,{results:fe(o)})}}for(var c=0;c<i;c++){var l=j(e,["revs","attachments","latest"]);l.ajax=a,l.docs=e.docs.slice(c*n,Math.min(e.docs.length,(c+1)*n)),F(r,l,u(c))}}var o=Sn(i,""),u=vn[o];"boolean"!=typeof u?n(function(e,r){e?(vn[o]=!1,B(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),s()):(vn[o]=!0,t(null,r))}):u?n(t):s()}),n._info=function(e){m().then(function(){d({},{method:"GET",url:Mn(i,"")},function(t,r){if(t)return e(t);r.host=Mn(i,""),e(null,r)})}).catch(e)},n.get=p("get",function(e,t,r){"function"==typeof t&&(r=t,t={});var n={};(t=O(t)).revs&&(n.revs=!0),t.revs_info&&(n.revs_info=!0),t.latest&&(n.latest=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),n.open_revs=t.open_revs),t.rev&&(n.rev=t.rev),t.conflicts&&(n.conflicts=t.conflicts),e=$n(e);var s={method:"GET",url:Mn(i,e+On(n))};function a(e){var r=e._attachments,n=r&&Object.keys(r);if(r&&n.length)return function(e,t){return new b(function(r,n){var i,s=0,a=0,o=0,u=e.length;function c(){++o===u?i?n(i):r():h()}function l(){s--,c()}function d(e){s--,i=i||e,c()}function h(){for(;s<t&&a<u;)s++,e[a++]().then(l,d)}h()})}(n.map(function(n){return function(){return function(n){var s=r[n],a=$n(e._id)+"/"+_(n)+"?rev="+e._rev;return h(t,{method:"GET",url:Mn(i,a),binary:!0}).then(function(e){return t.binary?e:new b(function(t){Ut(e,t)})}).then(function(e){delete s.stub,delete s.length,s.data=e})}(n)}}),5)}h(t,s).then(function(e){return b.resolve().then(function(){if(t.attachments)return function(e){return Array.isArray(e)?b.all(e.map(function(e){if(e.ok)return a(e.ok)})):a(e)}(e)}).then(function(){r(null,e)})}).catch(function(t){t.docId=e,r(t)})}),n.remove=p("remove",function(e,t,r,n){var s;"string"==typeof t?(s={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(s=e,"function"==typeof t?(n=t,r={}):(n=r,r=t));var a=s._rev||r.rev;d(r,{method:"DELETE",url:Mn(i,$n(s._id))+"?rev="+a},n)}),n.getAttachment=p("getAttachment",function(e,t,r,n){"function"==typeof r&&(n=r,r={});var s=r.rev?"?rev="+r.rev:"";d(r,{method:"GET",url:Mn(i,$n(e))+"/"+_(t)+s,binary:!0},n)}),n.removeAttachment=p("removeAttachment",function(e,t,r,n){d({},{method:"DELETE",url:Mn(i,$n(e)+"/"+_(t))+"?rev="+r},n)}),n.putAttachment=p("putAttachment",function(e,t,r,n,s,o){"function"==typeof s&&(o=s,s=n,n=r,r=null);var u=$n(e)+"/"+_(t),c=Mn(i,u);if(r&&(c+="?rev="+r),"string"==typeof n){var l;try{l=At(n)}catch(e){return o(le(te,"Attachment is not a valid base64 string"))}n=l?It(l,s):""}d({},{headers:{"Content-Type":s},method:"PUT",url:c,processData:!1,body:n,timeout:a.timeout||6e4},o)}),n._bulkDocs=function(e,t,r){e.new_edits=t.new_edits,m().then(function(){return b.all(e.docs.map(wn))}).then(function(){d(t,{method:"POST",url:Mn(i,"_bulk_docs"),timeout:t.timeout,body:e},function(e,t){if(e)return r(e);t.forEach(function(e){e.ok=!0}),r(null,t)})}).catch(r)},n._put=function(e,t,r){m().then(function(){return wn(e)}).then(function(){d(t,{method:"PUT",url:Mn(i,$n(e._id)),body:e},function(t,n){if(t)return t.docId=e&&e._id,r(t);r(null,n)})}).catch(r)},n.allDocs=p("allDocs",function(e,t){"function"==typeof e&&(t=e,e={});var r,n={},s="GET";(e=O(e)).conflicts&&(n.conflicts=!0),e.descending&&(n.descending=!0),e.include_docs&&(n.include_docs=!0),e.attachments&&(n.attachments=!0),e.key&&(n.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(n.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(n.endkey=JSON.stringify(e.endkey)),void 0!==e.inclusive_end&&(n.inclusive_end=!!e.inclusive_end),void 0!==e.limit&&(n.limit=e.limit),void 0!==e.skip&&(n.skip=e.skip);var a=On(n);void 0!==e.keys&&(s="POST",r={keys:e.keys}),h(e,{method:s,url:Mn(i,"_all_docs"+a),body:r}).then(function(r){e.include_docs&&e.attachments&&e.binary&&r.rows.forEach(bn),t(null,r)}).catch(t)}),n._changes=function(e){var t="batch_size"in e?e.batch_size:mn;!(e=O(e)).continuous||"heartbeat"in e||(e.heartbeat=yn);var r="timeout"in e?e.timeout:"timeout"in a?a.timeout:3e4;"timeout"in e&&e.timeout&&r-e.timeout<gn&&(r=e.timeout+gn),"heartbeat"in e&&e.heartbeat&&r-e.heartbeat<gn&&(r=e.heartbeat+gn);var n={};"timeout"in e&&e.timeout&&(n.timeout=e.timeout);var s,o=void 0!==e.limit&&e.limit;s="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var u=o;if(e.style&&(n.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(n.include_docs=!0),e.attachments&&(n.attachments=!0),e.continuous&&(n.feed="longpoll"),e.conflicts&&(n.conflicts=!0),e.descending&&(n.descending=!0),"heartbeat"in e&&e.heartbeat&&(n.heartbeat=e.heartbeat),e.filter&&"string"==typeof e.filter&&(n.filter=e.filter),e.view&&"string"==typeof e.view&&(n.filter="_view",n.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var c in e.query_params)e.query_params.hasOwnProperty(c)&&(n[c]=e.query_params[c]);var l,h,p,_="GET";e.doc_ids?(n.filter="_doc_ids",_="POST",l={doc_ids:e.doc_ids}):e.selector&&(n.filter="_selector",_="POST",l={selector:e.selector});var g=function(s,a){if(!e.aborted){n.since=s,"object"==typeof n.since&&(n.since=JSON.stringify(n.since)),e.descending?o&&(n.limit=u):n.limit=!o||u>t?t:u;var c={method:_,url:Mn(i,"_changes"+On(n)),timeout:r,body:l};p=s,e.aborted||m().then(function(){h=d(e,c,a)}).catch(a)}},y={results:[]},v=function(r,n){if(!e.aborted){var i=0;if(n&&n.results){i=n.results.length,y.last_seq=n.last_seq;e.query_params,n.results=n.results.filter(function(t){u--;var r=he(e)(t);return r&&(e.include_docs&&e.attachments&&e.binary&&bn(t),s&&y.results.push(t),e.onChange(t)),r})}else if(r)return e.aborted=!0,void e.complete(r);n&&n.last_seq&&(p=n.last_seq);var a=o&&u<=0||n&&i<t||e.descending;(!e.continuous||o&&u<=0)&&a?e.complete(null,y):f()(function(){g(p,v)})}};return g(e.since||0,v),{cancel:function(){e.aborted=!0,h&&h.abort()}}},n.revsDiff=p("revsDiff",function(e,t,r){"function"==typeof t&&(r=t,t={}),d(t,{method:"POST",url:Mn(i,"_revs_diff"),body:e},r)}),n._close=function(e){e()},n._destroy=function(e,t){d(e,{url:Mn(i,""),method:"DELETE"},function(e,r){if(e&&e.status&&404!==e.status)return t(e);t(null,r)})}}xn.valid=function(){return!0};function Tn(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Tn)}catch(e){}}function En(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,En)}catch(e){}}function Dn(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Dn)}catch(e){}}function Ln(e,t){return t&&e.then(function(e){f()(function(){t(null,e)})},function(e){f()(function(){t(e)})}),e}function Pn(e,t){return function(){var r=arguments,n=this;return e.add(function(){return t.apply(n,r)})}}function An(e){var t=new w(e),r=new Array(t.size),n=-1;return t.forEach(function(e){r[++n]=e}),r}function jn(e){var t=new Array(e.size),r=-1;return e.forEach(function(e,n){t[++r]=n}),t}function Rn(e){return new Dn("builtin "+e+" function requires map values to be numbers or number arrays")}function In(e){for(var t=0,r=0,n=e.length;r<n;r++){var i=e[r];if("number"!=typeof i){if(!Array.isArray(i))throw Rn("_sum");t="number"==typeof t?[t]:t;for(var s=0,a=i.length;s<a;s++){var o=i[s];if("number"!=typeof o)throw Rn("_sum");void 0===t[s]?t.push(o):t[s]+=o}}else"number"==typeof t?t+=i:t[0]+=i}return t}d()(Tn,Error),d()(En,Error),d()(Dn,Error);var Cn=H.bind(null,"log"),Yn=Array.isArray,Fn=JSON.parse;function Nn(e,t){return ke("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:In,log:Cn,isArray:Yn,toJSON:Fn})}function Un(){this.promise=new b(function(e){e()})}function qn(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function Hn(e,t,r,n,i,s){var a,o=function(e,t){return qn(e)+qn(t)+"undefined"}(r,n);if(!i&&(a=e._cachedViews=e._cachedViews||{})[o])return a[o];var u=e.info().then(function(u){var c=u.db_name+"-mrview-"+(i?"temp":function(e){return g.a.hash(e)}(o));return Me(e,"_local/"+s,function(e){e.views=e.views||{};var r=t;-1===r.indexOf("/")&&(r=t+"/"+t);var n=e.views[r]=e.views[r]||{};if(!n[c])return n[c]=!0,e}).then(function(){return e.registerDependentDatabase(c).then(function(t){var i=t.db;i.auto_compaction=!0;var s={name:c,db:i,sourceDB:e,adapter:e.adapter,mapFun:r,reduceFun:n};return s.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return s.seq=e?e.seq:0,a&&s.db.once("destroyed",function(){delete a[o]}),s})})})});return a&&(a[o]=u),u}Un.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},Un.prototype.finish=function(){return this.promise};var zn={},Bn=new Un,Wn=50;function Vn(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function Gn(e,t){try{e.emit("error",t)}catch(e){H("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),H("error",t)}}var Kn={_sum:function(e,t){return In(t)},_count:function(e,t){return t.length},_stats:function(e,t){return{sum:In(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:function(e){for(var t=0,r=0,n=e.length;r<n;r++){var i=e[r];t+=i*i}return t}(t)}}};var Jn=function(e,t,r,n){function i(e,t,r){try{t(r)}catch(t){Gn(e,t)}}function s(e,t,r,n,i){try{return{output:t(r,n,i)}}catch(t){return Gn(e,t),{error:t}}}function a(e,t){var r=ct(e.key,t.key);return 0!==r?r:ct(e.value,t.value)}function o(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function c(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&function(e){e.rows.forEach(function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];t[e].data=Ct(r.data,r.content_type)})})}(t),t}}function l(e,t,r,n){var i=t[e];void 0!==i&&(n&&(i=encodeURIComponent(JSON.stringify(i))),r.push(e+"="+i))}function d(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function h(e,t){var r=e.descending?"endkey":"startkey",n=e.descending?"startkey":"endkey";if(void 0!==e[r]&&void 0!==e[n]&&ct(e[r],e[n])>0)throw new Tn("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new Tn("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new Tn("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){var r=function(e){if(e){if("number"!=typeof e)return new Tn('Invalid value for integer: "'+e+'"');if(e<0)return new Tn('Invalid value for positive integer: "'+e+'"')}}(e[t]);if(r)throw r})}function p(e){return function(t){if(404===t.status)return e;throw t}}function m(e,t,r){var n="_local/doc_"+e,i={_id:n,keys:[]},s=r.get(e),a=s[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(s[1])?b.resolve(i):t.db.get(n).catch(p(i))).then(function(e){return function(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):b.resolve({rows:[]})}(e).then(function(t){return function(e,t){for(var r=[],n=new w,i=0,s=t.rows.length;i<s;i++){var o=t.rows[i].doc;if(o&&(r.push(o),n.add(o._id),o._deleted=!a.has(o._id),!o._deleted)){var u=a.get(o._id);"value"in u&&(o.value=u.value)}}var c=jn(a);return c.forEach(function(e){if(!n.has(e)){var t={_id:e},i=a.get(e);"value"in i&&(t.value=i.value),r.push(t)}}),e.keys=An(c.concat(e.keys)),r.push(e),r}(e,t)})})}function _(e){var t="string"==typeof e?e:e.name,r=zn[t];return r||(r=zn[t]=new Un),r}function g(e){return Pn(_(e),function(){return function(e){var r,n,s=t(e.mapFun,function(e,t){var i={id:n._id,key:lt(e)};void 0!==t&&null!==t&&(i.value=lt(t)),r.push(i)}),o=e.seq||0;function u(t,r){return function(){return function(e,t,r){return e.db.get("_local/lastSeq").catch(p({_id:"_local/lastSeq",seq:0})).then(function(n){var i=jn(t);return b.all(i.map(function(r){return m(r,e,t)})).then(function(t){var i=fe(t);return n.seq=r,i.push(n),e.db.bulkDocs({docs:i})})})}(e,t,r)}}var c=new Un;function l(){return e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:o,limit:Wn}).then(d)}function d(t){var d=t.results;if(d.length){var f=function(t){for(var u=new k,c=0,l=t.length;c<l;c++){var d=t[c];if("_"!==d.doc._id[0]){r=[],(n=d.doc)._deleted||i(e.sourceDB,s,n),r.sort(a);var f=h(r);u.set(d.doc._id,[f,d.changes])}o=d.seq}return u}(d);if(c.add(u(f,o)),!(d.length<Wn))return l()}}function h(e){for(var t,r=new k,n=0,i=e.length;n<i;n++){var s=e[n],a=[s.key,s.id];n>0&&0===ct(s.key,t)&&a.push(n),r.set(ht(a),s),t=s.key}return r}return l().then(function(){return c.finish()}).then(function(){e.seq=o})}(e)})()}function y(e,t){return Pn(_(e),function(){return function(e,t){var n,i=e.reduceFun&&!1!==t.reduce,a=t.skip||0;function u(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return n=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),r=["id","key","value"];if(!(t<r||t>r))return e.doc.value}var n=function(e){for(var t=[],r=[],n=0;;){var i=e[n++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var s=ft(e,n);t.push(s.num),n+=s.length;break;case"4":for(var a="";;){var o=e[n];if("\0"===o)break;a+=o,n++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var u={element:[],index:t.length};t.push(u.element),r.push(u);break;case"6":var c={element:{},index:t.length};t.push(c.element),r.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();pt(t,r)}}}(e.doc._id);return{key:n[0],id:n[1],value:"value"in e.doc?e.doc.value:null}})})}function c(u){var c;if(c=i?function(e,t,n){0===n.group_level&&delete n.group_level;var i=n.group||n.group_level,a=r(e.reduceFun),o=[],u=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;t.forEach(function(e){var t=o[o.length-1],r=i?e.key:null;if(i&&Array.isArray(r)&&(r=r.slice(0,u)),t&&0===ct(t.groupKey,r))return t.keys.push([e.key,e.id]),void t.values.push(e.value);o.push({keys:[[e.key,e.id]],values:[e.value],groupKey:r})}),t=[];for(var c=0,l=o.length;c<l;c++){var d=o[c],h=s(e.sourceDB,a,d.keys,d.values,!1);if(h.error&&h.error instanceof Dn)throw h.error;t.push({value:h.error?null:h.output,key:d.groupKey})}return{rows:function(e,t,r){return r=r||0,"number"==typeof t?e.slice(r,t+r):r>0?e.slice(r):e}(t,n.limit,n.skip)}}(e,u,t):{total_rows:n,offset:a,rows:u},t.include_docs){var l=An(u.map(o));return e.sourceDB.allDocs({keys:l,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t=new k;return e.rows.forEach(function(e){t.set(e.id,e.doc)}),u.forEach(function(e){var r=o(e),n=t.get(r);n&&(e.doc=n)}),c})}return c}if(void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys),void 0!==t.keys){var l=t.keys,d=l.map(function(e){var t={startkey:ht([e]),endkey:ht([e,{}])};return u(t)});return b.all(d).then(fe).then(c)}var h,f,p={descending:t.descending};if("start_key"in t&&(h=t.start_key),"startkey"in t&&(h=t.startkey),"end_key"in t&&(f=t.end_key),"endkey"in t&&(f=t.endkey),void 0!==h&&(p.startkey=t.descending?ht([h,{}]):ht([h])),void 0!==f){var m=!1!==t.inclusive_end;t.descending&&(m=!m),p.endkey=ht(m?[f,{}]:[f])}if(void 0!==t.key){var _=ht([t.key]),g=ht([t.key,{}]);p.descending?(p.endkey=_,p.startkey=g):(p.startkey=_,p.endkey=g)}return i||("number"==typeof t.limit&&(p.limit=t.limit),p.skip=a),u(p).then(c)}(e,t)})()}function v(t,r,i){if("function"==typeof t._query)return function(e,t,r){return new b(function(n,i){e._query(t,r,function(e,t){if(e)return i(e);n(t)})})}(t,r,i);if(me(t))return function(e,t,r){var n,i=[],s="GET";if(l("reduce",r,i),l("include_docs",r,i),l("attachments",r,i),l("limit",r,i),l("descending",r,i),l("group",r,i),l("group_level",r,i),l("skip",r,i),l("stale",r,i),l("conflicts",r,i),l("startkey",r,i,!0),l("start_key",r,i,!0),l("endkey",r,i,!0),l("end_key",r,i,!0),l("inclusive_end",r,i),l("key",r,i,!0),i=""===(i=i.join("&"))?"":"?"+i,void 0!==r.keys){var a="keys="+encodeURIComponent(JSON.stringify(r.keys));a.length+i.length+1<=2e3?i+=("?"===i[0]?"&":"?")+a:(s="POST","string"==typeof t?n={keys:r.keys}:t.keys=r.keys)}if("string"==typeof t){var o=Vn(t);return e.request({method:s,url:"_design/"+o[0]+"/_view/"+o[1]+i,body:n}).then(function(e){return e.rows.forEach(function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)}),e}).then(c(r))}return n=n||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?n[e]=t[e]:n[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+i,body:n}).then(c(r))}(t,r,i);if("string"!=typeof r)return h(i,r),Bn.add(function(){return Hn(t,"temp_view/temp_view",r.map,r.reduce,!0,e).then(function(e){return function(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})}(g(e).then(function(){return y(e,i)}),function(){return e.db.destroy()})})}),Bn.finish();var s=r,a=Vn(s),o=a[0],u=a[1];return t.get("_design/"+o).then(function(r){var a=r.views&&r.views[u];if(!a)throw new En("ddoc "+r._id+" has no view named "+u);return n(r,u),h(i,a),Hn(t,s,a.map,a.reduce,!1,e).then(function(e){return"ok"===i.stale||"update_after"===i.stale?("update_after"===i.stale&&f()(function(){g(e)}),y(e,i)):g(e).then(function(){return y(e,i)})})})}return{query:function(e,t,r){var n=this;"function"==typeof t&&(r=t,t={}),t=t?function(e){return e.group_level=d(e.group_level),e.limit=d(e.limit),e.skip=d(e.skip),e}(t):{},"function"==typeof e&&(e={map:e});var i=b.resolve().then(function(){return v(n,e,t)});return Ln(i,r),i},viewCleanup:function(e){return u()(function(t){var r=t.pop(),n=e.apply(this,t);return"function"==typeof r&&Ln(n,r),n})}(function(){var t=this;return"function"==typeof t._viewCleanup?function(e){return new b(function(t,r){e._viewCleanup(function(e,n){if(e)return r(e);t(n)})})}(t):me(t)?function(e){return e.request({method:"POST",url:"_view_cleanup"})}(t):function(t){return t.get("_local/"+e).then(function(e){var r=new k;Object.keys(e.views).forEach(function(e){var t=Vn(e),n="_design/"+t[0],i=t[1],s=r.get(n);s||(s=new w,r.set(n,s)),s.add(i)});var n={keys:jn(r),include_docs:!0};return t.allDocs(n).then(function(n){var i={};n.rows.forEach(function(t){var n=t.key.substring(8);r.get(t.key).forEach(function(r){var s=n+"/"+r;e.views[s]||(s=r);var a=Object.keys(e.views[s]),o=t.doc&&t.doc.views&&t.doc.views[r];a.forEach(function(e){i[e]=i[e]||o})})});var s=Object.keys(i).filter(function(e){return!i[e]}).map(function(e){return Pn(_(e),function(){return new t.constructor(e,t.__opts).destroy()})()});return b.all(s).then(function(){return{ok:!0}})})},p({ok:!0}))}(t)})}}("mrviews",function(e,t){if("function"==typeof e&&2===e.length){var r=e;return function(e){return r(e,t)}}return Nn(e.toString(),t)},function(e){var t=e.toString(),r=function(e){if(/^_sum/.test(e))return Kn._sum;if(/^_count/.test(e))return Kn._count;if(/^_stats/.test(e))return Kn._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}(t);return r||Nn(t)},function(e,t){var r=e.views&&e.views[t];if("string"!=typeof r.map)throw new En("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof r.map)});var Qn={query:function(e,t,r){return Jn.query.call(this,e,t,r)},viewCleanup:function(e){return Jn.viewCleanup.call(this,e)}};function Zn(e){return/^1-/.test(e)}function Xn(e,t){var r=Object.keys(t._attachments);return b.all(r.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function ei(e,t,r,n){r=O(r);var i=[],s=!0;function a(t){return e.allDocs({keys:t,include_docs:!0,conflicts:!0}).then(function(e){if(n.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){e.deleted||!e.doc||!Zn(e.value.rev)||function(e){return e._attachments&&Object.keys(e._attachments).length>0}(e.doc)||function(e){return e._conflicts&&e._conflicts.length>0}(e.doc)||(e.doc._conflicts&&delete e.doc._conflicts,i.push(e.doc),delete r[e.id])})})}return b.resolve().then(function(){var e=Object.keys(r).filter(function(e){var t=r[e].missing;return 1===t.length&&Zn(t[0])});if(e.length>0)return a(e)}).then(function(){var a=function(e){var t=[];return Object.keys(e).forEach(function(r){e[r].missing.forEach(function(e){t.push({id:r,rev:e})})}),{docs:t,revs:!0,latest:!0}}(r);if(a.docs.length)return e.bulkGet(a).then(function(r){if(n.cancelled)throw new Error("cancelled");return b.all(r.results.map(function(r){return b.all(r.docs.map(function(r){var n=r.ok;return r.error&&(s=!1),n&&n._attachments?function(e,t,r){var n=me(t)&&!me(e),i=Object.keys(r._attachments);return n?e.get(r._id).then(function(n){return b.all(i.map(function(i){return function(e,t,r){return!e._attachments||!e._attachments[r]||e._attachments[r].digest!==t._attachments[r].digest}(n,r,i)?t.getAttachment(r._id,i):e.getAttachment(n._id,i)}))}).catch(function(e){if(404!==e.status)throw e;return Xn(t,r)}):Xn(t,r)}(t,e,n).then(function(e){var t=Object.keys(n._attachments);return e.forEach(function(e,r){var i=n._attachments[t[r]];delete i.stub,delete i.length,i.data=e}),n}):n}))})).then(function(e){i=i.concat(fe(e).filter(Boolean))})})}).then(function(){return{ok:s,docs:i}})}var ti=1,ri="pouchdb",ni=5,ii=0;function si(e,t,r,n,i){return e.get(t).catch(function(r){if(404===r.status)return"http"!==e.adapter&&"https"!==e.adapter||B(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:n,_id:t,history:[],replicator:ri,version:ti};throw r}).then(function(s){if(!i.cancelled&&s.last_seq!==r)return s.history=(s.history||[]).filter(function(e){return e.session_id!==n}),s.history.unshift({last_seq:r,session_id:n}),s.history=s.history.slice(0,ni),s.version=ti,s.replicator=ri,s.session_id=n,s.last_seq=r,e.put(s).catch(function(s){if(409===s.status)return si(e,t,r,n,i);throw s})})}function ai(e,t,r,n,i){this.src=e,this.target=t,this.id=r,this.returnValue=n,this.opts=i}ai.prototype.writeCheckpoint=function(e,t){var r=this;return this.updateTarget(e,t).then(function(){return r.updateSource(e,t)})},ai.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?si(this.target,this.id,e,t,this.returnValue):b.resolve(!0)},ai.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var r=this;return this.readOnlySource?b.resolve(!0):si(this.src,this.id,e,t,this.returnValue).catch(function(e){if(ci(e))return r.readOnlySource=!0,!0;throw e})}return b.resolve(!0)};var oi={undefined:function(e,t){return 0===ct(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return function(e,t){if(e.session_id===t.session_id)return{last_seq:e.last_seq,history:e.history};return function e(t,r){var n=t[0];var i=t.slice(1);var s=r[0];var a=r.slice(1);if(!n||0===r.length)return{last_seq:ii,history:[]};var o=n.session_id;if(ui(o,r))return{last_seq:n.last_seq,history:t};var u=s.session_id;if(ui(u,i))return{last_seq:s.last_seq,history:a};return e(i,a)}(e.history,t.history)}(t,e).last_seq}};function ui(e,t){var r=t[0],n=t.slice(1);return!(!e||0===t.length)&&(e===r.session_id||ui(e,n))}function ci(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}ai.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.readOnlySource?b.resolve(t.last_seq):e.src.get(e.id).then(function(e){return t.version!==e.version?ii:(r=t.version?t.version.toString():"undefined")in oi?oi[r](t,e):ii;var r},function(r){if(404===r.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:ii}).then(function(){return ii},function(r){return ci(r)?(e.readOnlySource=!0,t.last_seq):ii});throw r})}).catch(function(e){if(404!==e.status)throw e;return ii})};var li=0;function di(e,t,r){var n=r.doc_ids?r.doc_ids.sort(ct):"",i=r.filter?r.filter.toString():"",s="",a="",o="";return r.selector&&(o=JSON.stringify(r.selector)),r.filter&&r.query_params&&(s=JSON.stringify(function(e){return Object.keys(e).sort(ct).reduce(function(t,r){return t[r]=e[r],t},{})}(r.query_params))),r.filter&&"_view"===r.filter&&(a=r.view.toString()),b.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+i+a+s+n+o;return new b(function(e){Vt(t,e)})}).then(function(e){return"_local/"+(e=e.replace(/\//g,".").replace(/\+/g,"_"))})}function hi(e,t,r,n,i){var s,a,o,u=[],c={seq:0,changes:[],docs:[]},l=!1,d=!1,h=!1,f=0,p=r.continuous||r.live||!1,m=r.batch_size||100,_=r.batches_limit||10,g=!1,y=r.doc_ids,v=r.selector,$=[],w=Oe();i=i||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var k={};function M(){return o?b.resolve():di(e,t,r).then(function(i){a=i;var s={};s=!1===r.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===r.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===r.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},o=new ai(e,t,a,n,s)})}function S(){if($=[],0!==s.docs.length){var e=s.docs,a={timeout:r.timeout};return t.bulkDocs({docs:e,new_edits:!1},a).then(function(t){if(n.cancelled)throw P(),new Error("cancelled");var r=Object.create(null);t.forEach(function(e){e.error&&(r[e.id]=e)});var s=Object.keys(r).length;i.doc_write_failures+=s,i.docs_written+=e.length-s,e.forEach(function(e){var t=r[e._id];if(t){if(i.errors.push(t),"unauthorized"!==t.name&&"forbidden"!==t.name)throw t;n.emit("denied",O(t))}else $.push(e)})},function(t){throw i.doc_write_failures+=e.length,t})}}function x(){if(s.error)throw new Error("There was a problem getting docs.");i.last_seq=f=s.seq;var e=O(i);return $.length&&(e.docs=$,n.emit("change",e)),l=!0,o.writeCheckpoint(s.seq,w).then(function(){if(l=!1,n.cancelled)throw P(),new Error("cancelled");s=void 0,I()}).catch(function(e){throw Y(e),e})}function T(){return ei(e,t,s.diffs,n).then(function(e){s.error=!e.ok,e.docs.forEach(function(e){delete s.diffs[e._id],i.docs_read++,s.docs.push(e)})})}function E(){n.cancelled||s||(0!==u.length?(s=u.shift(),function(){var e={};return s.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(n.cancelled)throw P(),new Error("cancelled");s.diffs=e})}().then(T).then(S).then(x).then(E).catch(function(e){L("batch processing terminated with error",e)})):D(!0))}function D(e){0!==c.changes.length?(e||d||c.changes.length>=m)&&(u.push(c),c={seq:0,changes:[],docs:[]},"pending"!==n.state&&"stopped"!==n.state||(n.state="active",n.emit("active")),E()):0!==u.length||s||((p&&k.live||d)&&(n.state="pending",n.emit("paused")),d&&P())}function L(e,t){h||(t.message||(t.message=e),i.ok=!1,i.status="aborting",u=[],c={seq:0,changes:[],docs:[]},P(t))}function P(s){h||n.cancelled&&(i.status="cancelled",l)||(i.status=i.status||"complete",i.end_time=new Date,i.last_seq=f,h=!0,s?((s=le(s)).result=i,"unauthorized"===s.name||"forbidden"===s.name?(n.emit("error",s),n.removeAllListeners()):function(e,t,r,n){if(!1===e.retry)return t.emit("error",r),void t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=z),t.emit("requestError",r),"active"===t.state||"pending"===t.state){t.emit("paused",r),t.state="stopped";var i=function(){e.current_back_off=li};t.once("paused",function(){t.removeListener("active",i)}),t.once("active",i)}e.current_back_off=e.current_back_off||li,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(n,e.current_back_off)}(r,n,s,function(){hi(e,t,r,n)})):(n.emit("complete",i),n.removeAllListeners()))}function A(e){if(n.cancelled)return P();he(r)(e)&&(c.seq=e.seq,c.changes.push(e),D(0===u.length&&k.live))}function j(e){if(g=!1,n.cancelled)return P();if(e.results.length>0)k.since=e.last_seq,I(),D(!0);else{var t=function(){p?(k.live=!0,I()):d=!0,D(!0)};s||0!==e.results.length?t():(l=!0,o.writeCheckpoint(e.last_seq,w).then(function(){l=!1,i.last_seq=f=e.last_seq,t()}).catch(Y))}}function R(e){if(g=!1,n.cancelled)return P();L("changes rejected",e)}function I(){if(!g&&!d&&u.length<_){g=!0,n._changes&&(n.removeListener("cancel",n._abortChanges),n._changes.cancel()),n.once("cancel",i);var t=e.changes(k).on("change",A);t.then(s,s),t.then(j).catch(R),r.retry&&(n._changes=t,n._abortChanges=i)}function i(){t.cancel()}function s(){n.removeListener("cancel",i)}}function C(){M().then(function(){if(!n.cancelled)return o.getCheckpoint().then(function(e){k={since:f=e,limit:m,batch_size:m,style:"all_docs",doc_ids:y,selector:v,return_docs:!0},r.filter&&("string"!=typeof r.filter?k.include_docs=!0:k.filter=r.filter),"heartbeat"in r&&(k.heartbeat=r.heartbeat),"timeout"in r&&(k.timeout=r.timeout),r.query_params&&(k.query_params=r.query_params),r.view&&(k.view=r.view),I()});P()}).catch(function(e){L("getCheckpoint rejected with ",e)})}function Y(e){l=!1,L("writeCheckpoint completed with error",e)}n.ready(e,t),n.cancelled?P():(n._addedListeners||(n.once("cancel",P),"function"==typeof r.complete&&(n.once("error",r.complete),n.once("complete",function(e){r.complete(null,e)})),n._addedListeners=!0),void 0===r.since?C():M().then(function(){return l=!0,o.writeCheckpoint(r.since,w)}).then(function(){l=!1,n.cancelled?P():(f=r.since,C())}).catch(Y))}function fi(){c.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new b(function(t,r){e.once("complete",t),e.once("error",r)});e.then=function(e,r){return t.then(e,r)},e.catch=function(e){return t.catch(e)},e.catch(function(){})}function pi(e,t){var r=t.PouchConstructor;return"string"==typeof e?new r(e,t):e}function mi(e,t,r,n){if("function"==typeof r&&(n=r,r={}),void 0===r&&(r={}),r.doc_ids&&!Array.isArray(r.doc_ids))throw le(ie,"`doc_ids` filter parameter is not a list.");r.complete=n,(r=O(r)).continuous=r.continuous||r.live,r.retry="retry"in r&&r.retry,r.PouchConstructor=r.PouchConstructor||this;var i=new fi(r);return hi(pi(e,r),pi(t,r),r,i),i}function _i(e,t,r,n){return"function"==typeof r&&(n=r,r={}),void 0===r&&(r={}),(r=O(r)).PouchConstructor=r.PouchConstructor||this,new gi(e=pi(e,r),t=pi(t,r),r,n)}function gi(e,t,r,n){var i=this;this.canceled=!1;var s=r.push?W({},r,r.push):r,a=r.pull?W({},r,r.pull):r;function o(e){i.emit("change",{direction:"pull",change:e})}function u(e){i.emit("change",{direction:"push",change:e})}function c(e){i.emit("denied",{direction:"push",doc:e})}function l(e){i.emit("denied",{direction:"pull",doc:e})}function d(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function h(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function f(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function p(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}this.push=mi(e,t,s),this.pull=mi(t,e,a),this.pushPaused=!0,this.pullPaused=!0;var m={};function _(e){return function(t,r){("change"===t&&(r===o||r===u)||"denied"===t&&(r===l||r===c)||"paused"===t&&(r===h||r===d)||"active"===t&&(r===p||r===f))&&(t in m||(m[t]={}),m[t][e]=!0,2===Object.keys(m[t]).length&&i.removeAllListeners(t))}}function g(e,t,r){-1==e.listeners(t).indexOf(r)&&e.on(t,r)}r.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push))),this.on("newListener",function(e){"change"===e?(g(i.pull,"change",o),g(i.push,"change",u)):"denied"===e?(g(i.pull,"denied",l),g(i.push,"denied",c)):"active"===e?(g(i.pull,"active",p),g(i.push,"active",f)):"paused"===e&&(g(i.pull,"paused",h),g(i.push,"paused",d))}),this.on("removeListener",function(e){"change"===e?(i.pull.removeListener("change",o),i.push.removeListener("change",u)):"denied"===e?(i.pull.removeListener("denied",l),i.push.removeListener("denied",c)):"active"===e?(i.pull.removeListener("active",p),i.push.removeListener("active",f)):"paused"===e&&(i.pull.removeListener("paused",h),i.push.removeListener("paused",d))}),this.pull.on("removeListener",_("pull")),this.push.on("removeListener",_("push"));var y=b.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return i.emit("complete",t),n&&n(null,t),i.removeAllListeners(),t},function(e){if(i.cancel(),n?n(e):i.emit("error",e),i.removeAllListeners(),n)throw e});this.then=function(e,t){return y.then(e,t)},this.catch=function(e){return y.catch(e)}}d()(fi,c.EventEmitter),fi.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},fi.prototype.ready=function(e,t){var r=this;function n(){r.cancel()}r._readyCalled||(r._readyCalled=!0,e.once("destroyed",n),t.once("destroyed",n),r.once("complete",function(){e.removeListener("destroyed",n),t.removeListener("destroyed",n)}))},d()(gi,c.EventEmitter),gi.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Ze.plugin(function(e){e.adapter("idb",Er,!0)}).plugin(function(e){e.adapter("websql",un,!0)}).plugin(function(e){e.adapter("http",xn,!1),e.adapter("https",xn,!1)}).plugin(Qn).plugin(function(e){e.replicate=mi,e.sync=_i,Object.defineProperty(e.prototype,"replicate",{get:function(){var e=this;return{from:function(t,r,n){return e.constructor.replicate(t,e,r,n)},to:function(t,r,n){return e.constructor.replicate(e,t,r,n)}}}}),e.prototype.sync=function(e,t,r){return this.constructor.sync(this,e,t,r)}}),t.default=Ze}.call(this,r(17))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1129));t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(r(79)),i=h(r(65)),s=r(55),a=d(r(32)),o=d(r(59)),u=d(r(411)),c=d(r(22)),l=d(r(24));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}const f=48;t.default=class extends u.default{constructor(e){super(e),this.safeTokens=new n.LazyPersistentObject("tokenExtWhitelist"),this.trackerDomains=new n.LazyPersistentObject("trackerDomains"),this.unsafeKeys=new n.LazyPersistentObject("unsafeKey"),this.lastUpdate=["0","0","0","0"],this.TOKEN_WHITELIST_URL=`${c.default.settings.CDN_BASEURL}/anti-tracking/whitelist/whitelist_tokens.json`,this.TRACKER_DM_URL=`${c.default.settings.CDN_BASEURL}/anti-tracking/whitelist/tracker_domains.json`,this.SAFE_KEY_URL=`${c.default.settings.CDN_BASEURL}/anti-tracking/whitelist/domain_safe_key.json`,this.UNSAFE_KEY_URL=`${c.default.settings.CDN_BASEURL}/anti-tracking/whitelist/domain_unsafe_key.json`}init(){try{if(this.lastUpdate=JSON.parse(n.getValue("lastUpdate")),4!==this.lastUpdate.length)throw new Error("invalid lastUpdate value")}catch(e){this.lastUpdate=["0","0","0","0"]}return this.onConfigUpdate=(e=>{const t=n.getValue("safeKeyExtVersion",""),r=n.getValue("tokenWhitelistVersion",""),i=n.getValue("unsafeKeyExtVersion",""),s=n.getValue("trackerDomainsversion","");l.default.log(`Safe keys: ${e.safekey_version} vs ${t}`,"attrack"),e.safekey_version&&t!==e.safekey_version&&this._loadRemoteSafeKey(!0===e.force_clean),l.default.log(`Token whitelist: ${e.whitelist_token_version} vs ${r}`,"attrack"),e.token_whitelist_version&&r!==e.whitelist_token_version&&this._loadRemoteTokenWhitelist(),l.default.log(`Tracker Domain: ${e.tracker_domain_version} vs ${s}`,"attrack"),e.tracker_domain_version&&s!==e.tracker_domain_version&&this._loadRemoteTrackerDomainList(),l.default.log(`Unsafe keys: ${e.unsafekey_version} vs ${i}`,"attrack"),e.token_whitelist_version&&r!==e.token_whitelist_version&&this._loadRemoteUnsafeKey()}),Promise.all([super.init(),this.safeTokens.load(),this.unsafeKeys.load(),this.trackerDomains.load()]).then(()=>{this._configEventListener=a.default.subscribe("attrack:updated_config",this.onConfigUpdate)})}destroy(){super.destroy(),this._configEventListener&&(this._configEventListener.unsubscribe(),this._configEventListener=null)}isUpToDate(){const e=f,t=i.newUTCDate();t.setHours(t.getHours()-e);const r=i.hourString(t);return this.lastUpdate.every(e=>e>r)}isReady(){return this.safeTokens.value&&this.safeKeys.value&&this.unsafeKeys.value&&this.trackerDomains.value}isSafeKey(e,t){return!this.isReady()||!this.isUnsafeKey(e,t)&&e in this.safeKeys.value&&t in this.safeKeys.value[e]}isUnsafeKey(e,t){return!!this.isReady()&&this.isTrackerDomain(e)&&e in this.unsafeKeys.value&&t in this.unsafeKeys.value[e]}addSafeKey(e,t,r){if(!this.isReady())return;if(this.isUnsafeKey(e,t))return;const n=i.dateString(i.newUTCDate());e in this.safeKeys.value||(this.safeKeys.value[e]={}),this.safeKeys.value[e][t]=[n,"l",r],this.safeKeys.setDirty()}isTrackerDomain(e){return!!this.isReady()&&e in this.trackerDomains.value}isSafeToken(e,t){return!this.isReady()||this.isTrackerDomain(e)&&t in this.safeTokens.value}addSafeToken(e,t){this.isReady()&&(this.trackerDomains.value[e]=!0,t&&""!==t&&(this.safeTokens.value[t]=!0))}addUnsafeKey(e,t){this.isReady()&&(e in this.unsafeKeys.value||(this.unsafeKeys.value[e]={}),this.unsafeKeys.value[e][t]=!0)}getVersion(){return{whitelist:n.getValue("tokenWhitelistVersion",""),safeKey:n.getValue("safeKeyExtVersion",""),unsafeKey:n.getValue("unsafeKeyExtVersion",""),trackerDomains:n.getValue("trackerDomainsVersion","")}}_loadRemoteTokenWhitelist(){const e=i.getTime().substring(0,10);(0,s.httpGet)(`${this.TOKEN_WHITELIST_URL}?${e}`,function(e){const t=JSON.parse(e.response),r=(0,o.default)(e.response);this.safeTokens.setValue(t),n.setValue("tokenWhitelistVersion",r),this.lastUpdate[1]=i.getTime(),n.setValue("lastUpdate",JSON.stringify(this.lastUpdate)),a.default.pub("attrack:token_whitelist_updated",r)}.bind(this),()=>{},1e5)}_loadRemoteTrackerDomainList(){const e=i.getTime().substring(0,10);(0,s.httpGet)(`${this.TRACKER_DM_URL}?${e}`,function(e){const t=JSON.parse(e.response),r=(0,o.default)(e.response);this.trackerDomains.setValue(t),n.setValue("trackerDomainsversion",r),this.lastUpdate[3]=i.getTime(),n.setValue("lastUpdate",JSON.stringify(this.lastUpdate))}.bind(this),()=>{},1e5)}_loadRemoteSafeKey(e){const t=i.getTime().substring(0,10);e&&this.safeKeys.clear(),(0,s.httpGet)(`${this.SAFE_KEY_URL}?${t}`,function(t){const r=JSON.parse(t.response);let s,u;const c=(0,o.default)(t.response);for(s in r)if(Object.prototype.hasOwnProperty.call(r,s))for(u in r[s])Object.prototype.hasOwnProperty.call(r[s],u)&&(r[s][u]=[r[s][u],"r"]);for(s in r)if(s in this.safeKeys.value)for(const e in r[s])(null==this.safeKeys.value[s][e]||this.safeKeys.value[s][e][0]<r[s][e][0])&&(this.safeKeys.value[s][e]=r[s][e]);else this.safeKeys.value[s]=r[s];this._pruneSafeKeys(),this.lastUpdate[0]=i.getTime(),n.setValue("lastUpdate",JSON.stringify(this.lastUpdate)),this.safeKeys.setDirty(),this.safeKeys.save(),n.setValue("safeKeyExtVersion",c),a.default.pub("attrack:safekeys_updated",c,e)}.bind(this),()=>{},6e4)}_loadRemoteUnsafeKey(){const e=i.getTime().substring(0,10);l.default.log(this.UNSAFE_KEY_URL),(0,s.httpGet)(`${this.UNSAFE_KEY_URL}?${e}`,function(e){const t=JSON.parse(e.response),r=(0,o.default)(e.response);this.unsafeKeys.setValue(t),this.lastUpdate[2]=i.getTime(),n.setValue("lastUpdate",JSON.stringify(this.lastUpdate)),n.setValue("unsafeKeyExtVesion",r),this.unsafeKeys.setDirty(),this.unsafeKeys.save()}.bind(this),()=>{},1e5)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(177)),i=s(r(145));function s(e){return e&&e.__esModule?e:{default:e}}const a=["0","1","2","3","4","5-9","5-9","5-9","5-9","5-9","10-14","10-14","10-14","10-14","10-14","15-19","15-19","15-19","15-19","15-19","20-24","20-24","20-24","20-24","20-24","25-29","25-29","25-29","25-29","25-29","30-39","30-39","30-39","30-39","30-39","30-39","30-39","30-39","30-39","30-39","40-49","40-49","40-49","40-49","40-49","40-49","40-49","40-49","40-49","40-49","50-59","50-59","50-59","50-59","50-59","50-59","50-59","50-59","50-59","50-59","60-69","60-69","60-69","60-69","60-69","60-69","60-69","60-69","60-69","60-69"];t.default=class{constructor(e){this.name=e,this.flushInterval=null,this.total=0,this.histograms=null,this.resetTimings()}resetTimings(){this.total=0,this.histograms=Object.create(null)}init(){this.flushInterval=(0,i.default)(()=>this.flush(),6e5)}unload(){this.flushInterval&&(this.flushInterval.stop(),this.flushInterval=null)}addTiming(e,t){let r=this.histograms[e];void 0===r&&(r=Object.create(null),this.histograms[e]=r);const n=t<70?a[t]:"70+";r[n]=(r[n]||0)+1,this.total+=1,this.total>=5e3&&this.flush()}flush(){var e=this;return function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){if(0===e.total)return;const t=Object.keys(e.histograms).map(function(t){return{step:`${e.name}.${t}`,histogram:e.histograms[t]}});e.resetTimings(),yield n.default.push(t,"metrics.performance.webrequest-pipeline.timings")})()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=l(r(24)),s=r(60),a=l(r(59)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(66)),u=r(121),c=r(143);function l(e){return e&&e.__esModule?e:{default:e}}const d=["c"];function h(){const e={},t=d;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[t[r]]=0);return e}class f{constructor(e,t,r,i){this.url=e.toString(),this.hostname=e.hostname,this.path=this._shortHash(function(e){var t=e.substring(1).split("/");return`/${n(t,1)[0]}`}(e.path)),this.scheme=e.protocol,this.private=t,this.c=1,this.s=Date.now(),this.e=this.s,this.tps={},this.redirects=[],this.redirectsPlaceHolder=[],this.placeHolder=i||!1,this.ra=r,this.annotations={},this.tsv="",this.tsvId=void 0,this.triggeringTree={},this._plainObject=null,this._tpStatCounter=h}_shortHash(e){return e?(0,a.default)(e).substring(0,16):""}getTpUrl(e,t){this._plainObject=null;const r=t;return e in this.tps||(this.tps[e]={}),r in this.tps[e]||(this.tps[e][r]=this._tpStatCounter()),this.tps[e][r]}isReferredFrom(e){return!!e&&(!!(0,s.sameGeneralDomain)(e.hostname,this.hostname)||e.hostname in this.tps)}asPlainObject(){return this._plainObject||this._buildPlainObject()}addTrigger(e,t){if(t.indexOf("://")>0){let r=t.split("://")[1];if((0,s.sameGeneralDomain)(r,this.hostname)&&(r="first party"),(0,s.sameGeneralDomain)(r,e))return;this.triggeringTree[r]||(this.triggeringTree[r]=new Set),this.triggeringTree[r].add(e)}this._plainObject=null}setAsStaged(){this.e=Date.now(),this._plainObject=null}setTrackingStatus(e){this.tsv=e.value,this.tsvId=e.statusId}_buildPlainObject(){const e=this,t={hostname:this._shortHash(this.hostname),path:this.path,scheme:this.scheme,c:this.c,t:this.e-this.s,ra:this.ra||0,tps:{},placeHolder:this.placeHolder,redirects:this.redirects.filter(t=>!(0,s.sameGeneralDomain)(t,e.hostname)),redirectsPlaceHolder:this.redirectsPlaceHolder.filter((t,r)=>!(0,s.sameGeneralDomain)(this.redirects[r],e.hostname)),triggeringTree:{},tsv:this.tsv,tsv_id:void 0!==this.tsvId};if(!t.hostname)return t;for(const r in this.tps)if(Object.prototype.hasOwnProperty.call(this.tps,r)){const n=this.tps[r],i=Object.keys(n);if(!(0,s.sameGeneralDomain)(e.hostname,r)&&i.length>0){const e=i.map(e=>n[e]);t.tps[r]=e.reduce(this._sumStats),d.forEach(e=>{t.tps[r]&&0===t.tps[r][e]&&delete t.tps[r][e]})}}return this._plainObject=t,t}_sumStats(e,t){const r={};return new Set(Object.keys(e).concat(Object.keys(t))).forEach(n=>{r[n]=(e[n]||0)+(t[n]||0)}),r}}t.default=class{constructor(e,t){this.debug=!1,this._active={},this._old_tab_idx={},this._staged=[],this._last_clean=0,this._clean_interval=1e4,this._push_interval=12e5,this._last_push=0,this.ignore=new Set(["self-repair.mozilla.org"]),this.pushTelemetry=e,this.config=t,this.listeners=new Map}onFullPage(e,t,r){const n=this.stage(t);if(e&&e.hostname&&Number(t)>0&&!this.ignore.has(e.hostname)){const i=n&&e.toString()===n.url&&Date.now()-n.s<3e4||!1;return this._active[t]=new f(e,r||!1,i||!1,this.containsPlaceHolder(e)),this._active[t]}return null}onRedirect(e,t,r){if(t in this._active){const n=this._active[t];this._active[t]=new f(e,r||!1,n.ra||!1,this.containsPlaceHolder(e)),this._active[t].redirects=n.redirects,this._active[t].redirects.push(n.hostname),this._active[t].redirectsPlaceHolder=n.redirectsPlaceHolder,this._active[t].redirectsPlaceHolder.push(n.placeHolder)}else this.onFullPage(e,t,r)}get(e,t,r,n,s){if(s<=0||null===s||void 0===s)return this.debug&&i.default.log("No source for request, not logging!","tp_events"),null;if(!(s in this._active))return r&&n&&n.hostname?(this.debug&&i.default.log(`No fullpage request for referrer: ${r} -> ${e}`,"tp_events"),null):null;const a=(0,c.truncateDomain)(t.host,this.config.tpDomainDepth),o=this._active[s];if(!o.isReferredFrom(n)){if(!r||!n||!n.hostname)return null;if(s in this._old_tab_idx){const e=this._staged[this._old_tab_idx[s]];if(e&&e.isReferredFrom(n))return this.debug&&i.default.log(`Request for expired tab ${n.hostname} -> ${a} (${e.hostname})`,"tp_events"),e.getTpUrl(a,t.path)}return this.debug&&i.default.log(`tab/referrer mismatch ${n.hostname} -> ${a} (${o.hostname})`,"tp_events"),null}return o.getTpUrl(a,t.path)}stage(e){if(e in this._active){this._active[e].setAsStaged(),this._old_tab_idx[e]=this._staged.push(this._active[e])-1,delete this._active[e];const t=this._staged[this._old_tab_idx[e]];return(this.listeners.get("stage")||[]).forEach(r=>r(e,t)),t}}commit(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=(new Date).getTime();return r-this._last_clean>this._clean_interval||!0===e?(this._last_clean=r,Promise.all(Object.keys(this._active).map(e=>o.checkIsWindowActive(e).then(r=>{r&&!0!==t||(this.debug&&i.default.log(`Stage tab ${e}`,"tp_events"),this.stage(e))})))):Promise.resolve()}push(e){const t=(new Date).getTime();if(this._staged.length>0&&(t-this._last_push>this._push_interval||!0===e)){const e=this._staged.filter(e=>!e.private).map(e=>e.asPlainObject()).filter(e=>e.hostname.length>0&&Object.keys(e.tps).length>0);e.length>0&&this.config.telemetryMode!==u.TELEMETRY.DISABLED&&(this.debug&&i.default.log(`Pushing data for ${e.length} requests`,"tp_events"),this.pushTelemetry(e)),this._staged=[],this._old_tab_idx={},this._last_push=t}}incrementStat(e,t,r){null!==e&&(t in e||(e[t]=0),Number.isInteger(r)||(r=1),e[t]+=r)}getPageForTab(e){return this._active[e]}addEventListener(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}removeEventListener(e,t){const r=this.listeners.get(e).indexOf(t);-1!==r&&this.listeners.get(e).splice(r,1)}getOpenPages(){return Object.keys(this._active).map(e=>this._active[e])}getAnnotations(e){return this._active[e]?this._active[e].annotations:{}}containsPlaceHolder(e){return e.toString().indexOf(this.config.placeHolder>-1)&&e.hostname!==this.config.placeHolder.split("/")[0]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(421));t.default={getItem:e=>n.default.get(e).catch(()=>null),setItem:(e,t)=>n.default.set(e,t),removeItem:e=>n.default.remove(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=z(r(79)),i=H(r(244)),s=H(r(24)),a=H(r(176)),o=r(31),u=H(o),c=H(r(109)),l=r(60),d=H(r(11)),h=H(r(32)),f=z(r(66)),p=z(r(65)),m=H(r(1134)),_=H(r(243)),g=H(r(1132)),y=H(r(410)),v=H(r(241)),b=H(r(59)),$=H(r(242)),w=r(1124),k=r(406),M=r(405),S=r(91),O=r(121),x=r(1122),T=r(143),E=H(r(1121)),D=H(r(1120)),L=H(r(1119)),P=H(r(1118)),A=H(r(1117)),j=H(r(1116)),R=H(r(1115)),I=H(r(1114)),C=H(r(1113)),Y=H(r(816)),F=H(r(815)),N=H(r(814)),U=r(813),q=H(r(812));function H(e){return e&&e.__esModule?e:{default:e}}function z(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.default=class{constructor(){this.VERSION=O.VERSION,this.MIN_BROWSER_VERSION=O.MIN_BROWSER_VERSION,this.LOG_KEY="attrack",this.debug=!1,this.msgType="attrack",this.similarAddon=!1,this.tp_events=null,this.recentlyModified=new y.default,this.urlWhitelist=new i.default("attrack-url-whitelist"),this.webRequestPipeline=u.default.module("webrequest-pipeline"),this.pipelineSteps={},this.pipelines={},this.geoip=new q.default,this.db=new E.default}obfuscate(e,t){switch(t){case"empty":return"";case"replace":return(0,S.shuffle)(e);case"same":return e;case"placeholder":default:return this.config.placeHolder}}getPrivateValues(e){const t={},r=e.navigator;for(let e=0;e<r.plugins.length;e+=1){const n=r.plugins[e].name;n.length>=8&&(t[n]=!0)}this.privateValues=t}getDefaultRule(){return this.isForceBlockEnabled()?"block":(0,M.getDefaultTrackerTxtRule)()}isEnabled(){return this.config.enabled}isCookieEnabled(e){return(void 0===e||!this.urlWhitelist.isWhitelisted(e))&&this.config.cookieEnabled}isQSEnabled(){return this.config.qsEnabled}isFingerprintingEnabled(){return this.config.fingerprintEnabled}isReferrerEnabled(){return this.config.referrerEnabled}isTrackerTxtEnabled(){return this.config.trackerTxtEnabled}isBloomFilterEnabled(){return this.config.bloomFilterEnabled}isForceBlockEnabled(){return this.config.forceBlockEnabled}initPacemaker(){c.default.register(this.hourChanged.bind(this),12e4,((e,t)=>("day"===t?t=8:"hour"===t&&(t=10),()=>{const r=p.getTime().slice(0,t),i=n.getValue(`${e}lastRun`)||r;return n.setValue(`${e}lastRun`,r),r!==i}))("hourChanged","hour")),c.default.register(()=>{this.tp_events.commit().then(()=>{this.tp_events.push()})},12e4)}telemetry(e){let t=e.message;var r=e.raw;let n=void 0!==r&&r;var i=e.compress;let s=void 0!==i&&i;var a=e.ts;let o=void 0===a?void 0:a;t.type||(t.type=$.default.msgType),!0!==n&&(t.payload=(0,T.generateAttrackPayload)(t.payload,o,this.qs_whitelist.getVersion())),!0===s&&(0,T.compressionAvailable)()&&(t.compressed=!0,t.payload=(0,T.compressJSONToBase64)(t.payload)),$.default.telemetry(t)}init(e){const t=[];return this.config=e,f.getBrowserMajorVersion()<this.MIN_BROWSER_VERSION?Promise.resolve():(this.debug&&s.default.log("Init function called:",this.LOG_KEY),this.hashProb||(this.hashProb=new k.HashProb,t.push(this.hashProb.init())),this.qs_whitelist=this.isBloomFilterEnabled()?new w.AttrackBloomFilter(this.config):new g.default(this.config),t.push(this.qs_whitelist.init()),t.push(this.urlWhitelist.init()),t.push(this.db.init()),this.onSafekeysUpdated=h.default.subscribe("attrack:safekeys_updated",(e,t)=>{t&&this.pipelineSteps.tokenExaminer&&this.pipelineSteps.tokenExaminer.clearCache()}),this.checkInstalledAddons(),this.initPacemaker(),c.default.start(),this.tp_events=new m.default(e=>{const t={qs:this.isQSEnabled(),cookie:this.isCookieEnabled(),bloomFilter:this.isBloomFilterEnabled(),trackTxt:this.isTrackerTxtEnabled(),forceBlock:this.isForceBlockEnabled()},r=this.qs_whitelist.isUpToDate();e.forEach(e=>{const n=(0,T.generateAttrackPayload)([e],void 0,{conf:t,addons:this.similarAddon,updateInTime:r});this.telemetry({message:{type:$.default.msgType,action:"attrack.tp_events",payload:n},raw:!0})})},this.config),t.push(this.initPipeline()),t.push(this.geoip.load()),(0,v.default)(),Promise.all(t))}initPipeline(){var e=this;return this.unloadPipeline().then(()=>{const t={pageLogger:new j.default(this.tp_events),tokenExaminer:new Y.default(this.qs_whitelist,this.config,this.db),tokenTelemetry:new F.default(this.telemetry.bind(this),this.qs_whitelist,this.config),domChecker:new A.default,tokenChecker:new C.default(this.qs_whitelist,{},this.hashProb,this.config,this.telemetry,this.db),blockRules:new L.default(this.config),cookieContext:new P.default(this.config,this.tp_events,this.qs_whitelist),redirectTagger:new R.default,subdomainChecker:new I.default(this.config),oauthDetector:new N.default};return this.pipelineSteps=t,Object.keys(t).forEach(e=>{const r=t[e];r.init&&r.init()}),this.pipelines.onBeforeRequest=new _.default("antitracking.onBeforeRequest",[{name:"redirectTagger.checkRedirect",spec:"break",fn:e=>t.redirectTagger.checkRedirect(e)},{name:"oauthDetector.checkMainFrames",spec:"break",fn:e=>t.oauthDetector.checkMainFrames(e)},{name:"pageLogger.logMainDocument",spec:"break",fn:e=>t.pageLogger.logMainDocument(e)},{name:"skipInvalidSource",spec:"break",fn:U.skipInvalidSource},{name:"skipInternalProtocols",spec:"break",fn:U.skipInternalProtocols},{name:"checkSameGeneralDomain",spec:"break",fn:U.checkSameGeneralDomain},{name:"cancelRecentlyModified",spec:"blocking",fn:(e,t)=>this.cancelRecentlyModified(e,t)},{name:"subdomainChecker.checkBadSubdomain",spec:"blocking",fn:(e,r)=>t.subdomainChecker.checkBadSubdomain(e,r)},{name:"pageLogger.attachStatCounter",spec:"annotate",fn:e=>t.pageLogger.attachStatCounter(e)},{name:"pageLogger.logRequestMetadata",spec:"collect",fn:e=>t.pageLogger.logRequestMetadata(e)},{name:"checkExternalBlocking",spec:"blocking",fn:(e,t)=>!0!==t.cancel&&!t.redirectUrl||(e.incrementStat("blocked_external"),t.shouldIncrementCounter=!0,!1)},{name:"tokenExaminer.examineTokens",spec:"collect",fn:e=>t.tokenExaminer.examineTokens(e)},{name:"tokenTelemetry.extractKeyTokens",spec:"collect",fn:e=>t.tokenTelemetry.extractKeyTokens(e)},{name:"domChecker.checkDomLinks",spec:"collect",fn:e=>t.domChecker.checkDomLinks(e)},{name:"domChecker.parseCookies",spec:"annotate",fn:e=>t.domChecker.parseCookies(e)},{name:"tokenChecker.findBadTokens",spec:"annotate",fn:e=>t.tokenChecker.findBadTokens(e)},{name:"checkSourceWhitelisted",spec:"break",fn:e=>!this.urlWhitelist.isWhitelisted(e.sourceUrlParts.hostname)||(e.incrementStat("source_whitelisted"),!1)},{name:"checkShouldBlock",spec:"break",fn:e=>e.badTokens.length>0&&this.qs_whitelist.isUpToDate()&&!this.config.paused},{name:"isQSEnabled",spec:"break",fn:()=>this.isQSEnabled()},{name:"blockRules.applyBlockRules",spec:"blocking",fn:(e,r)=>t.blockRules.applyBlockRules(e,r)},{name:"applyBlock",spec:"blocking",fn:(e,t)=>this.applyBlock(e,t)}]),this.pipelines.onBeforeSendHeaders=new _.default("antitracking.onBeforeSendHeaders",[{name:"cookieContext.assignCookieTrust",spec:"collect",fn:e=>t.cookieContext.assignCookieTrust(e)},{name:"redirectTagger.confirmRedirect",spec:"break",fn:e=>t.redirectTagger.confirmRedirect(e)},{name:"checkIsMainDocument",spec:"break",fn:e=>!e.isFullPage()},{name:"skipInvalidSource",spec:"break",fn:U.skipInvalidSource},{name:"skipInternalProtocols",spec:"break",fn:U.skipInternalProtocols},{name:"checkSameGeneralDomain",spec:"break",fn:U.checkSameGeneralDomain},{name:"subdomainChecker.checkBadSubdomain",spec:"blocking",fn:(e,r)=>t.subdomainChecker.checkBadSubdomain(e,r)},{name:"pageLogger.attachStatCounter",spec:"annotate",fn:e=>t.pageLogger.attachStatCounter(e)},{name:"catchMissedOpenListener",spec:"blocking",fn:(e,r)=>{(e.reqLog&&0===e.reqLog.c||t.redirectTagger.isFromRedirect(e.url))&&this.pipelines.onBeforeRequest.execute(e,r)}},{name:"overrideUserAgent",spec:"blocking",fn:(e,t)=>{if(!0===this.config.overrideUserAgent){const r=e.urlParts.generalDomainHash;this.qs_whitelist.isTrackerDomain(r)&&(t.modifyHeader("User-Agent","CLIQZ"),e.incrementStat("override_user_agent"))}}},{name:"checkLeakedReferrer",spec:"collect",fn:e=>{const t=e.getRequestHeader("Referer");t&&t.indexOf(e.sourceUrl)>-1&&e.incrementStat("referer_leak_header"),(e.url.indexOf(e.sourceUrlParts.hostname)>-1||e.url.indexOf(encodeURIComponent(e.sourceUrlParts.hostname))>-1)&&(e.incrementStat("referer_leak_site"),(e.url.indexOf(e.sourceUrlParts.path)>-1||e.url.indexOf(encodeURIComponent(e.sourceUrlParts.path))>-1)&&e.incrementStat("referer_leak_path"))}},{name:"checkHasCookie",spec:"break",fn:e=>{e.cookieData=e.getCookieData();const t=e.cookieData&&e.cookieData.length>5;return t&&e.incrementStat("cookie_set"),!0===t}},{name:"checkIsCookieWhitelisted",spec:"break",fn:e=>this.checkIsCookieWhitelisted(e)},{name:"checkCompatibilityList",spec:"break",fn:e=>this.checkCompatibilityList(e)},{name:"cookieContext.checkCookieTrust",spec:"break",fn:e=>t.cookieContext.checkCookieTrust(e)},{name:"cookieContext.checkVisitCache",spec:"break",fn:e=>t.cookieContext.checkVisitCache(e)},{name:"cookieContext.checkContextFromEvent",spec:"break",fn:e=>t.cookieContext.checkContextFromEvent(e)},{name:"oauthDetector.checkIsOAuth",spec:"break",fn:e=>t.oauthDetector.checkIsOAuth(e)},{name:"shouldBlockCookie",spec:"break",fn:e=>{const t=this.isCookieEnabled(e.sourceUrlParts.hostname)&&!this.config.paused;return t||e.incrementStat("bad_cookie_sent"),t}},{name:"blockCookie",spec:"blocking",fn:(e,t)=>{e.incrementStat("cookie_blocked"),e.incrementStat("cookie_block_tp1"),t.modifyHeader("Cookie",""),this.config.sendAntiTrackingHeader&&t.modifyHeader(this.config.cliqzHeader," ")}}]),this.pipelines.onHeadersReceived=new _.default("antitracking.onHeadersReceived",[{name:"checkMainDocumentRedirects",spec:"break",fn:e=>{if(e.isFullPage()){if(-1!==[300,301,302,303,307].indexOf(e.responseStatus)){const t=e.getResponseHeader("Location");let r=S.URLInfo.get(t)||{};r.hostname||(r=S.URLInfo.get(`${e.urlParts.toString()}${t}`)),this.tp_events.onRedirect(r,e.tabId,e.isPrivate)}const t=(0,D.default)(e);if(t){const r=this.tp_events.getPageForTab(e.tabId);r&&r.setTrackingStatus(t)}return!1}return!0}},{name:"skipInvalidSource",spec:"break",fn:U.skipInvalidSource},{name:"skipInternalProtocols",spec:"break",fn:U.skipInternalProtocols},{name:"skipBadSource",spec:"break",fn:e=>e.sourceUrl&&""!==e.sourceUrl&&-1===e.sourceUrl.indexOf("about:")},{name:"checkSameGeneralDomain",spec:"break",fn:U.checkSameGeneralDomain},{name:"redirectTagger.checkRedirectStatus",spec:"break",fn:e=>t.redirectTagger.checkRedirectStatus(e)},{name:"pageLogger.attachStatCounter",spec:"annotate",fn:e=>t.pageLogger.attachStatCounter(e)},{name:"logResponseStats",spec:"collect",fn:e=>{if(e.incrementStat&&(e.incrementStat("resp_ob"),e.incrementStat("content_length",parseInt(e.getResponseHeader("Content-Length"),10)||0),e.incrementStat(`status_${e.responseStatus}`)),this.qs_whitelist.isTrackerDomain(e.urlParts.generalDomainHash)&&e.ip){try{const t=this.geoip.lookup(e.ip);t&&e.incrementStat(`iploc_${t}`)}catch(e){}const t=(0,D.default)(e);t&&(e.incrementStat(`tsv_${t.value}`),t.statusId&&e.incrementStat("tsv_status"))}}},{name:"checkSetCookie",spec:"break",fn:e=>!!e.getResponseHeader("Set-Cookie")&&(e.incrementStat("set_cookie_set"),!0)},{name:"shouldBlockCookie",spec:"break",fn:e=>this.isCookieEnabled(e.sourceUrlParts.hostname)},{name:"checkIsCookieWhitelisted",spec:"break",fn:e=>this.checkIsCookieWhitelisted(e)},{name:"checkCompatibilityList",spec:"break",fn:e=>this.checkCompatibilityList(e)},{name:"cookieContext.checkCookieTrust",spec:"break",fn:e=>t.cookieContext.checkCookieTrust(e)},{name:"cookieContext.checkVisitCache",spec:"break",fn:e=>t.cookieContext.checkVisitCache(e)},{name:"cookieContext.checkContextFromEvent",spec:"break",fn:e=>t.cookieContext.checkContextFromEvent(e)},{name:"blockSetCookie",spec:"blocking",fn:(e,t)=>{t.modifyHeader("Set-Cookie",""),e.incrementStat("set_cookie_blocked")}}]),this.pipelines.onCompleted=new _.default("antitracking.onCompleted",[{name:"pageLogger.reattachStatCounter",spec:"annotate",fn:e=>t.pageLogger.reattachStatCounter(e)},{name:"logIsCached",spec:"collect",fn:e=>{e.incrementStat(e.fromCache?"cached":"not_cached")}}]),this.pipelines.onErrorOccurred=new _.default("antitracking.onError",[{name:"pageLogger.reattachStatCounter",spec:"annotate",fn:e=>t.pageLogger.reattachStatCounter(e)},{name:"logError",spec:"collect",fn:e=>{e.error&&e.error.indexOf("ABORT")&&e.incrementStat("error_abort")}}]),Promise.all(Object.keys(this.pipelines).map(t=>this.webRequestPipeline.action("addPipelineStep",t,{name:`antitracking.${t}`,spec:"blocking",fn:function(){return e.pipelines[t].execute(...arguments)}})))})}unloadPipeline(){return Object.keys(this.pipelineSteps||{}).forEach(e=>{const t=this.pipelineSteps[e];t.unload&&t.unload()}),Object.keys(this.pipelines).forEach(e=>{this.pipelines[e].unload()}),Promise.all(Object.keys(this.pipelines).map(e=>(0,o.ifModuleEnabled)(this.webRequestPipeline.action("removePipelineStep",e,`antitracking.${e}`)))).then(()=>{this.pipelines={}})}initWindow(e){f.getBrowserMajorVersion()<this.MIN_BROWSER_VERSION||this.getPrivateValues(e)}unload(){f.getBrowserMajorVersion()>=this.MIN_BROWSER_VERSION&&(this.hashProb.unload(),this.qs_whitelist.destroy(),this.tp_events.commit(!0,!0),this.tp_events.push(!0),c.default.stop(),this.unloadPipeline(),this.db.unload(),this.onSafekeysUpdated.unsubscribe())}checkInstalledAddons(){(0,x.checkInstalledPrivacyAddons)().then(e=>{this.similarAddon=e}).catch(()=>{})}hourChanged(){h.default.pub("attrack:hour_changed")}isInWhitelist(e){if(!this.config.cookieWhitelist)return!1;const t=this.config.cookieWhitelist;for(let r=0;r<t.length;r+=1){const n=e.indexOf(t[r]);if(n>=0&&n+t[r].length===e.length)return!0}return!1}cancelRecentlyModified(e,t){const r=e.tabId,n=e.url;return!this.recentlyModified.contains(r+n)||(this.recentlyModified.delete(r+n),t.block(),!1)}applyBlock(e,t){const r=t,n=e.badTokens;let i=this.getDefaultRule();const a=M.TrackerTXT.get(e.sourceUrlParts);if(!this.isForceBlockEnabled()&&this.isTrackerTxtEnabled()){if(null===a.last_update)return e.incrementStat(`tracker.txt_not_ready${i}`),!1;i=a.getRule(e.urlParts.hostname)}if(this.debug&&s.default.log("ATTRACK",i,"URL:",e.urlParts.hostname,e.urlParts.path,"TOKENS:",n),"block"===i)return e.incrementStat(`token_blocked_${i}`),r.block(),r.shouldIncrementCounter=!0,!1;let o=e.url;for(let e=0;e<n.length;e+=1)-1===o.indexOf(n[e])&&(n[e]=encodeURIComponent(n[e])),o=o.replace(n[e],this.obfuscate(n[e],i));return o.startsWith(`${e.urlParts.protocol}://${e.urlParts.hostname}`)?(e.incrementStat(`token_blocked_${i}`),this.recentlyModified.add(e.tabId+e.url,3e4),r.redirectTo(o),r.modifyHeader(this.config.cliqzHeader," "),!0):(r.block(),!1)}checkIsCookieWhitelisted(e){if(this.isInWhitelist(e.urlParts.hostname)){const t=void 0!==e.responseStatus?"set_cookie":"cookie";return e.incrementStat(`${t}_allow_whitelisted`),!1}return!0}checkCompatibilityList(e){const t=e.urlParts.generalDomain,r=e.sourceUrlParts.generalDomain;return!this.config.compabilityList||!this.config.compatibilityList[t]||-1===this.config.compatibilityList[t].indexOf(r)}getTabBlockingInfo(e,t){const r={url:t,tab:e,hostname:"",path:"",cookies:{allowed:0,blocked:0},requests:{safe:0,unsafe:0},trackers:{},companies:{},companyInfo:{},ps:null};if(t&&(t.startsWith("about")||t.startsWith("chrome")||t.startsWith("resource")))return r.error="Special tab",Promise.resolve(r);if(!(e in this.tp_events._active))return f.checkIsWindowActive(e).then(e=>(e&&(r.reload=!0),r.error="No Data",r));const n=this.tp_events._active[e],i=n.asPlainObject(),s=Object.keys(i.tps).filter(e=>Promise.resolve(this.qs_whitelist.isTrackerDomain((0,b.default)((0,l.getGeneralDomain)(e)).substring(0,16))||i.tps[e].blocked_blocklist>0));return r.hostname=n.hostname,r.path=n.path,s.forEach(e=>{r.trackers[e]={},["c","cookie_set","cookie_blocked","bad_cookie_sent","bad_qs","set_cookie_blocked","blocked_blocklist"].forEach(t=>{r.trackers[e][t]=i.tps[e][t]||0}),r.trackers[e].tokens_removed=["empty","replace","placeholder","block"].reduce((t,r)=>t+(i.tps[e][`token_blocked_${r}`]||0),0),r.trackers[e].tokens_removed+=i.tps[e].blocked_blocklist||0+i.tps[e].blocked_external||0,r.cookies.allowed+=r.trackers[e].cookie_set-r.trackers[e].cookie_blocked,r.cookies.blocked+=r.trackers[e].cookie_blocked+r.trackers[e].set_cookie_blocked,r.requests.safe+=r.trackers[e].c-r.trackers[e].tokens_removed,r.requests.unsafe+=r.trackers[e].tokens_removed,r.trackers[e].cookie_blocked+=r.trackers[e].set_cookie_blocked;const t=a.default.getDomainOwner(e);r.companyInfo[t.name]=t,t.name in r.companies||(r.companies[t.name]=[]),r.companies[t.name].push(e)}),Promise.resolve(r)}getCurrentTabBlockingInfo(e){return f.getActiveTab(e).then(e=>{let t=e.id,r=e.url;return this.getTabBlockingInfo(t,r)})}getTrackerListForTab(e){return this.getTabBlockingInfo(e).then(e=>{const t={};return Object.keys(e.companies).forEach(r=>{e.companies[r].forEach(e=>{t[e]=r})}),Object.keys(e.trackers).map(r=>({name:t[r]||(0,l.getGeneralDomain)(r),count:e.trackers[r].tokens_removed||0})).reduce((e,t)=>(e[t.name]=(e[t.name]||0)+t.count,e),{})})}getAppsForTab(e){const t=this.tp_events._active[e];if(!t)return Promise.reject();const r={known:{},unknown:{}};function n(e,t){return e?"blocked":t?"unsafe":"safe"}return t.annotations.apps&&t.annotations.apps.forEach((e,t)=>{r.known[a.default.getBugOwner(t)]=n("BLOCK"===e,"ALLOW_UNSAFE"===e)}),this.getTabBlockingInfo(e).then(e=>(Object.keys(e.trackers).forEach(t=>{const i=(0,l.getGeneralDomain)(t),s=a.default.domains[i],o=e.trackers[t].tokens_removed>0||e.trackers[t].blocked_blocklist>0,u=e.trackers[t].bad_qs>0||e.trackers[t].cookie_blocked>0||e.trackers[t].set_cookie_blocked>0;s?r.known[s]=n(o||!0===r.known[s],u):r.unknown[i]=n(o,u)}),r))}enableModule(e){this.isEnabled()||(this.config.setPref("enabled",!0),e||(this.config.setPref("cookieEnabled",!0),this.config.setPref("qsEnabled",!0)))}disableModule(){d.default.set(this.config.PREFS.enabled,!1)}logWhitelist(e){this.telemetry({message:{type:$.default.msgType,action:"attrack.whitelistDomain",payload:e},raw:!0})}clearCache(){this.pipelineSteps.tokenExaminer&&this.pipelineSteps.tokenExaminer.clearCache(),this.pipelineSteps.tokenChecker&&this.pipelineSteps.tokenChecker.tokenDomain.clear()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(413)),i=s(r(808));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11));t.default=class{constructor(e){let t=e.window,r=e.background;this.background=r,this.window=t}init(){this.background.CliqzSecureMessage&&(this.background.CliqzSecureMessage.initAtWindow(this.window),this.window.CliqzSecureMessage=this.background.CliqzSecureMessage,Object.assign(this.window.CliqzSecureMessage,this.background.actions))}unload(){delete this.window.CliqzSecureMessage}status(){if(this.background.CliqzSecureMessage)return{visible:!0,state:n.default.get("hpn-query")}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProxyList=function(e){const t=[],r=new Set;var n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){const e=a.value,n=[e.dns,e.ip];r[n]||(r[n]=e,t.push(e))}}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return t},t.getProxyVerifyUrl=function(e){const t=e.supportsHttps?"https":"http",r=e.host||e.ip;if(!r)throw new Error("Missing host");return`${t}://${r}/v2/verify`}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{init(){}unload(){}newProxy(){}applyFilter(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(47)),i=c(r(11)),s=c(r(1140)),a=r(414),o=c(r(144)),u=c(r(24));function c(e){return e&&e.__esModule?e:{default:e}}t.default=class extends s.default{constructor(){super(),this.method="socks",this.port=9004}shouldProxy(e){const t=n.default.getWindow();return"https"===e.scheme&&o.default.servicesToProxy.indexOf(e.host)>-1&&(i.default.get("hpn-query",!1)||n.default.isPrivateMode(t))}proxy(){if(!o.default.proxyList)return;const e=(0,a.getRandomIntInclusive)(0,o.default.proxyList.length-1),t=o.default.proxyList[e].dns;if(o.default.debug&&u.default.log(`Proxying Query: ${t}`,o.default.LOG_KEY),o.default.proxyInfoObj[t])return o.default.proxyInfoObj[t];const r=this.newProxy({type:this.method,host:t,port:this.port,failoverTimeout:1e3,failoverProxy:null});return o.default.proxyInfoObj[t]=r,r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overRideCliqzResults=function(){if(!1===n.default.get("proxyNetwork",!0))return;l||(l=i.defaultHttpHandler);i.overrideHttpHandler(function(e,t,r,i,o,d){if(t.startsWith(a.default.settings.RESULTS_PROVIDER)&&n.default.get("hpn-queryv2",!1)){const e=c(),n=t.replace(a.default.settings.RESULTS_PROVIDER,""),i=Math.floor(1e7*Math.random());return s.default.queriesID[i]=r,s.default.wCrypto.postMessage({msg:{action:"instant",type:"cliqz",ts:"",ver:"1.5",payload:n,rp:a.default.settings.RESULTS_PROVIDER},uid:i,type:"instant",sourcemap:s.default.sourceMap,upk:s.default.uPK,dspk:s.default.dsPK,sspk:s.default.secureLogger,queryProxyUrl:e}),null}if(t.startsWith(a.default.settings.RESULTS_PROVIDER_LOG)){const e=c(),n=t.replace(a.default.settings.RESULTS_PROVIDER_LOG,""),i=Math.floor(1e7*Math.random());return s.default.queriesID[i]=r,s.default.wCrypto.postMessage({msg:{action:"extension-result-telemetry",type:"cliqz",ts:"",ver:"1.5",payload:n},uid:i,type:"instant",sourcemap:s.default.sourceMap,upk:s.default.uPK,dspk:s.default.dsPK,sspk:s.default.secureLogger,queryProxyUrl:e}),null}if(t!==a.default.settings.SAFE_BROWSING){if(t.startsWith(u)){const e=c(),n=t.replace(u,""),i=Math.floor(1e7*Math.random());s.default.queriesID[i]=r;const a={msg:{action:"offers-api",type:"cliqz",ts:"",ver:"1.5",payload:n,rp:u,body:d},uid:i,type:"instant",sourcemap:s.default.sourceMap,upk:s.default.uPK,dspk:s.default.dsPK,sspk:s.default.secureLogger,queryProxyUrl:e};return s.default.wCrypto.postMessage(a),null}for(var h=arguments.length,f=Array(h>6?h-6:0),p=6;p<h;p++)f[p-6]=arguments[p];return l(e,t,r,i,o,d,...f)}{const e=JSON.parse(d);e.length>0&&e.forEach(e=>s.default.telemetry(e)),r&&r({response:'{"success":true}'})}return null}),i.addCompressionExclusion(a.default.settings.SAFE_BROWSING)};var n=o(r(11)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(55)),s=o(r(144)),a=o(r(22));function o(e){return e&&e.__esModule?e:{default:e}}const u=a.default.settings.OFFERS_BE_BASE_URL;function c(){const e=s.default.proxyIP();if(!e)throw new Error("Failed to send message, as the list of proxies is empty");return e}let l=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=Worker},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(144)),i=o(r(245)),s=o(r(31)),a=o(r(24));function o(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hpnv2=s.default.module("hpnv2");const t=e.CryptoWorker||i.default;this._CliqzSecureMessage=e._CliqzSecureMessage||n.default,this.log("MessageSender: starting crypto worker"),this.cryptoWorker=new t("message-sender"),this.pendingCommunications=Promise.resolve()}stop(){const e=()=>{const e=this.cryptoWorker;e&&(this.log("MessageSender: stopping crypto worker"),delete this.cryptoWorker,e.terminate())};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{quick:!1}).quick?(e(),Promise.resolve()):this.pendingCommunications.then(e,e)}send(e){return e.forEach(e=>{const t=e;this.hpnv2.isEnabled()?this.hpnv2.action("send",t).catch(()=>{}):this._sendSingleMessage(t)}),this.pendingCommunications.then(()=>{},()=>{})}_sendSingleMessage(e){const t=this.pendingCommunications;return this.pendingCommunications=new Promise((r,n)=>{const i=this._CliqzSecureMessage,s=()=>{if(!this.cryptoWorker)return this.log("Discarding message, as the web worker is already stopped."),void n();this.cryptoWorker.onmessage=(e=>{"telemetry"===e.data.type&&(i.localTemporalUniq=e.data.localTemporalUniq,i.storage.saveLocalCheckTable()),r()});try{this.cryptoWorker.postMessage({msg:e,type:"telemetry",sourcemap:i.sourceMap,upk:i.uPK,dspk:i.dsPK,sspk:i.secureLogger,routetable:i.routeTable,localTemporalUniq:i.localTemporalUniq})}catch(e){this.log("Failed to send message",e),n(e)}};return t.then(s).catch(s)}),this.pendingCommunications}log(){this._CliqzSecureMessage.debug&&a.default.log(...arguments)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(24));const i={VERSION:"0.1",set(e,t,r,n){const i={};i[`${e}:${t}`]=r,chrome.storage.local.set(i,n)},get(e,t,r){if("function"==typeof t)chrome.storage.local.get(null,n=>{const i=[];Object.keys(n).forEach(r=>{r.startsWith(e)&&t(n[r])&&i.push(n[r])}),r(i)});else{const n=`${e}:${t}`;chrome.storage.local.get(n,e=>{r(e[n])})}},remove(e,t,r){if("function"==typeof t)chrome.storage.local.get(null,n=>{const i=[];Object.keys(n).forEach(r=>{if(r.startsWith(e)&&t(n[r])){const t=`${e}:${r}`;i.push(t)}}),chrome.storage.local.remove(i,r)});else{const n=`${e}:${t}`;chrome.storage.local.remove(n,r)}},size(e){chrome.storage.local.getBytesInUse(null,t=>{const r=[t,t/chrome.storage.local.QUOTA_BYTES];n.default.log("Current size: ",r[0],r[1]),e&&e(r)})},removeEverything(){chrome.storage.local.clear(),i.size()}};t.default=class{constructor(e){this.CliqzSecureMessage=e}close(){}saveRecord(e,t){i.set("hpn",e,t)}loadRecord(e){return new Promise(t=>{i.get("hpn",e,e=>{const r=[];e&&r.push(e),t(r)})})}saveKeys(e){return new Promise(t=>{i.set("hpn","userKey",JSON.stringify(e)),t({status:!0,data:e})})}loadKeys(){return new Promise(e=>{this.loadRecord("userKey").then(t=>{if(0===t.length)e(null);else try{e(JSON.parse(t))}catch(t){e(null)}})})}saveLocalCheckTable(){Object.keys(this.CliqzSecureMessage.localTemporalUniq).length>0&&this.saveRecord("localTemporalUniq",JSON.stringify(this.CliqzSecureMessage.localTemporalUniq))}loadLocalCheckTable(){this.loadRecord("localTemporalUniq").then(e=>{e.length>0?this.CliqzSecureMessage.localTemporalUniq=JSON.parse(e[0]):this.CliqzSecureMessage.localTemporalUniq={}})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(78)),i=r(52),s=o(r(144)),a=o(r(245));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)({init(){(0,i.isPlatformAtLeastInVersion)("48.0")&&(this.enabled=!0,this.CliqzSecureMessage=s.default,s.default.init(),s.default.wCrypto=new a.default("httpHandler"),s.default.wCrypto.onmessage=(e=>{if("instant"===e.data.type){const t=s.default.queriesID[e.data.uid];delete s.default.queriesID[e.data.uid],t&&t({response:e.data.res})}}))},unload(){this.enabled&&(s.default.wCrypto.terminate(),s.default.unload())},actions:{sha1:e=>new Promise(t=>{const r=new a.default;r.onmessage=(e=>{const n=e.data.result;r.terminate(),t(n)}),r.postMessage({msg:e,type:"hw-sha1"})}),sendTelemetry:e=>s.default.telemetry(e),sendInstantMessage(e,t){const r=s.default.proxyIP();if(!r)throw new Error("Cannot send message (list of proxies is empty)");return new Promise((n,i)=>{const o=new a.default;o.onmessage=(e=>{try{const t=JSON.parse(e.data.res).result;o.terminate(),n(t)}catch(e){o.terminate(),i()}}),o.postMessage({msg:{action:"instant",type:"cliqz",ts:"",ver:"1.5",payload:t,rp:e},uid:"",type:"instant",sourcemap:s.default.sourceMap,upk:s.default.uPK,dspk:s.default.dsPK,sspk:s.default.secureLogger,queryProxyUrl:r})})},sendPostMessage(e,t,r,n,i){const a=s.default.proxyIP();if(!a)throw new Error("Cannot send message (list of proxies is empty)");const o=Math.floor(1e7*Math.random());s.default.queriesID[o]=i,s.default.wCrypto.postMessage({msg:{action:r,type:"cliqz",ts:"",ver:"1.5",payload:t,rp:e,body:n},uid:"",type:"instant",sourcemap:s.default.sourceMap,upk:s.default.uPK,dspk:s.default.dsPK,sspk:s.default.secureLogger,queryProxyUrl:a})}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(1146)),i=s(r(1138));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(47)),i=u(r(11)),s=u(r(417)),a=u(r(418)),o=r(110);function u(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.window=e.window,this.settings=e.settings,this.window.CliqzHumanWeb=s.default}enabled(){return i.default.get("humanWeb",!1)&&!i.default.get("humanWebOptOut",!1)&&!n.default.isPrivateMode(this.window)}init(){this.enabled()&&a.default.active&&(this._dataCollectionTimer=setTimeout(this.showDataCollectionMessage.bind(this),1e3))}unload(){this._dataCollectionTimer&&(clearTimeout(this._dataCollectionTimer),this._dataCollectionTimer=void 0),this.removeNotification(),delete this.window.CliqzHumanWeb}status(){if(a.default.active)return{visible:!0,state:!i.default.get("humanWebOptOut",!1)}}removeNotification(){this.notification&&(this.notification.close(),this.window.document.getElementById("global-notificationbox").removeNotification(this.notification),this.notification=null)}showDataCollectionMessage(){if(!this.settings.showDataCollectionMessage||0!==i.default.get("dataCollectionMessageState",0))return;function e(e){n.default.telemetry({type:"dataCollectionMessage",state:e}),i.default.set("dataCollectionMessageState",e)}const t=this.window.document.getElementById("global-notificationbox"),r=[];r.push({label:(0,o.getMessage)("learnMore"),callback:()=>{this.window.gBrowser.selectedTab=this.window.gBrowser.addTab("chrome://cliqz/content/human-web/humanweb.html"),e(3),this.removeNotification()}}),this.notification=t.appendNotification((0,o.getMessage)("dataCollection"),null,null,t.PRIORITY_INFO_HIGH,r,()=>{i.default.get("dataCollectionMessageState",0)<2&&(e(2),this.removeNotification())}),e(1)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALID_RESPONSE_PROPERTIES=void 0;var n=r(61);t.VALID_RESPONSE_PROPERTIES={onBeforeRequest:["cancel","redirectUrl"],onBeforeSendHeaders:["cancel","requestHeaders"],onSendHeaders:[],onHeadersReceived:["cancel","redirectUrl","responseHeaders"],onAuthRequired:["cancel"],onResponseStarted:[],onBeforeRedirect:[],onCompleted:[],onErrorOccurred:[]};t.default=n.chrome.webRequest},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(61);t.default=n.chrome.history},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1150));t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Promise.resolve(n.window)};var n=r(61)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1152));t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHtml=o,t.getContentDocument=function(e){return function(e){return a.action("getHTML",e).then(t=>{const r=t[0];if(r)return r;throw new Error(`Failed to get content for tab with url=${e}`)})}(e).then(o)};var n=s(r(31)),i=s(r(1153));function s(e){return e&&e.__esModule?e:{default:e}}const a=n.default.module("core");function o(e){return o.domParser||(o.domParser=(0,i.default)().then(e=>new e.DOMParser)),o.domParser.then(t=>t.parseFromString(e,"text/html"))}},function(e,t,r){"use strict";function n(e,t){return new Promise((r,n)=>{try{chrome.tabs.get(e,i=>{if(chrome.runtime.lastError||!i)n(`Could not find tabId=${e}, type=${t}. `+"Either the id is wrong or the tab was closed. "+`(lastError: ${chrome.runtime.lastError})`);else{const e={type:t,isWebExtension:!0,isPrivate:i.incognito};r(e)}})}catch(e){n(e)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.getTabInfo=n,t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentExtractor=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.parseQueryString=a,t._mergeArr=c;var i=function(e){return e&&e.__esModule?e:{default:e}}(r(122)),s=r(246);function a(e){if(0===e.length)return{};const t=e.replace(/;/g,"&").split("&"),r={};var i=!0,s=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var c=o.value.split("=",2),l=n(c,2);const e=l[0],t=l[1],i=unescape(e);r[i]||(r[i]=[]),t?r[i].push(unescape(t)):r[i].push(!0)}}catch(e){s=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw a}}return r}function o(e,t,r){const n=e.split(t)[r];return n?decodeURIComponent(n):decodeURIComponent(e)}function u(e,t,r){const n=(0,s.parseURL)(e);if(n&&n.query_string){const i=a(n.query_string);return"qs"===t?i[r]?decodeURIComponent(i[r][0]):e:void 0}return e}function c(e){const t=[],r=Object.keys(e),n=e[r[0]].length;for(let c=0;c<n;c+=1){const n={};var i=!0,s=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){const t=o.value;n[t]=e[t][c]}}catch(e){s=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw a}}t.push(n)}return t}t.ContentExtractor=class{constructor(e){this._CliqzHumanWeb=e,this.msgType=e.msgType,this.patterns={normal:{searchEngines:[],rArray:[],extractRules:{},payloads:{},queryTemplate:{}},strict:{searchEngines:[],rArray:[],extractRules:{},payloads:{},queryTemplate:{}}},this.refineFuncMappings={splitF:o,parseU:u,maskU:e=>this._CliqzHumanWeb.maskURL(e)},this._messageTemplate={}}updatePatterns(e,t){this.patterns[t]={searchEngines:e.searchEngines,extractRules:e.scrape,payloads:e.payloads,idMappings:e.idMapping,rArray:e.urlPatterns.map(e=>new RegExp(e)),queryTemplate:e.queryTemplate||{}},this._patternsLastUpdated=new Date,i.default.debug(`Successfully updated "${t}" patterns at ${this._patternsLastUpdated}`)}checkURL(e,t,r){const n=this.patterns[r],s=n.rArray,a=n.searchEngines;for(let n=0;n<s.length;n+=1)if(s[n].test(t)){if(this._extractContent(n,e,t,r),-1!==a.indexOf(String(n)))return;this._CliqzHumanWeb.debug&&i.default.debug("Continue further after search engines ")}}isSearchEngineUrl(e){return-1!==this._checkSearchURL(e,"normal")}_createAnonSearchQuery(e,t,r){let n=(this.patterns.strict.queryTemplate[String(r)]||{}).prefix;return void 0===n&&(n="search?q="),`https://${e}/${n}${t}`}checkAnonSearchURL(e,t){const r=this._checkSearchURL(e,"strict");if(-1===r)return{isSearchEngineUrl:!1};const n=(0,s.parseURL)(e).hostname,i=this._createAnonSearchQuery(n,t,r);if((0,s.parseURL)(i).hostname!==n)throw new Error("refusing to make a request to another host");return{isSearchEngineUrl:!0,queryUrl:i}}_checkSearchURL(e,t){const r=this.patterns[t],n=r.searchEngines,s=r.rArray;for(let r=0;r<s.length;r+=1)if(s[r].test(e))return-1!==n.indexOf(String(r))?r:(this._CliqzHumanWeb.debug&&i.default.debug(`Not search engine >>> url=${e}, i=${r}, searchEngines=${n}, ruleset=${t}`),-1);return-1}_extractContent(e,t,r,n){const s={},a=this.patterns[n],o=a.extractRules[e],u=a.payloads[e],l=a.idMappings[e];let d=[];var h=!0,f=!1,p=void 0;try{for(var m,_=Object.keys(o)[Symbol.iterator]();!(h=(m=_.next()).done);h=!0){const a=m.value,u={};var g=!0,y=!1,v=void 0;try{for(var b,$=Object.keys(o[a])[Symbol.iterator]();!(g=(b=$.next()).done);g=!0){const e=b.value;if("standard"===o[a][e].type){if("url"===o[a][e].etype){let t=r;const n=o[a][e].functionsApplied||null;n&&(t=n.reduce((e,t)=>Object.prototype.hasOwnProperty.call(this.refineFuncMappings,t[0])?this.refineFuncMappings[t[0]](e,t[1],t[2]):e,t)),u[e]=[t]}"ctry"===o[a][e].etype&&(u[e]=[this._CliqzHumanWeb.getCountryCode()])}else"searchQuery"===o[a][e].type?(d=this._getAttribute(t,a,o[a][e].item,o[a][e].etype,o[a][e].keyName,o[a][e].functionsApplied||null),u[e]=d,"normal"===n?(i.default.debug("Populating query Cache <<<< ",r," >>>> ",d[0]),this._CliqzHumanWeb.addStrictQueries(r,d[0]),this._CliqzHumanWeb.queryCache[r]={d:0,q:d[0],t:l}):(d=this._getAttribute(t,a,o[a][e].item,o[a][e].etype,o[a][e].keyName,o[a][e].functionsApplied||null),u[e]=d)):(d=this._getAttribute(t,a,o[a][e].item,o[a][e].etype,o[a][e].keyName,o[a][e].functionsApplied||null),u[e]=d)}}catch(e){y=!0,v=e}finally{try{!g&&$.return&&$.return()}finally{if(y)throw v}}this._messageTemplate[e]?this._messageTemplate[e][a]=u:(this._messageTemplate[e]={},this._messageTemplate[e][a]=u);const h=c(this._messageTemplate[e][a]);h.length>0&&(s[a]=h)}}catch(e){f=!0,p=e}finally{try{!h&&_.return&&_.return()}finally{if(f)throw p}}var w=!0,k=!1,M=void 0;try{for(var S,O=Object.keys(u||{})[Symbol.iterator]();!(w=(S=O.next()).done);w=!0){const t=S.value;this._createPayload(s,e,t,n)}}catch(e){k=!0,M=e}finally{try{!w&&O.return&&O.return()}finally{if(k)throw M}}}_getAttribute(e,t,r,n,i,s){const a=[],o=Array.prototype.slice.call(e.querySelectorAll(t));for(let e=0;e<o.length;e+=1){const t=o[e].querySelector(r);if(t){let e=t[n]||t.getAttribute(n);s&&(e=s.reduce((e,t)=>Object.prototype.hasOwnProperty.call(this.refineFuncMappings,t[0])?this.refineFuncMappings[t[0]](e,t[1],t[2]):e,e)),a.push(e)}else a.push(t)}return a}_createPayload(e,t,r,n){let s;try{const a=this.patterns[n];if("single"===(s=a.payloads[t][r]).type&&"single"===s.results)e[r].forEach(e=>{e.ctry=this._CliqzHumanWeb.getCountryCode(),this._sendMessage(s,e)});else if("single"===s.type&&"custom"===s.results){const t={};s.fields.forEach(r=>{try{t[r[1]]=e[r[0]][0][r[1]]}catch(e){}this._sendMessage(s,t)})}else if("query"===s.type&&"clustered"===s.results){const t={};s.fields.forEach(r=>{if(r.length>2){const n={};for(let t=0;t<e[r[0]].length;t+=1)n[String(t)]=e[r[0]][t];t[r[1]]=n}else t[r[1]]=e[r[0]][0][r[1]]}),this._sendMessage(s,t)}else if("query"===s.type&&"scattered"===s.results){const t={};s.fields.forEach(r=>{if(r.length>2){const n={};let i=0;r[0].forEach(t=>{for(let r=0;r<e[t].length;r+=1)n[String(i)]=e[t][r],i+=1}),Object.keys(n).length>0&&(t[r[1]]=n)}else t[r[1]]=e[r[0]][0][r[1]]}),this._sendMessage(s,t)}}catch(t){this._CliqzHumanWeb.debug?i.default.warn("_createPayload failed (scrapeResults:",e,", key:",r,", ruleset:",n,", payloadRules:",s,", error:",t,")"):i.default.warn(`_createPayload failed: ${t}`)}}_sendMessage(e,t){(function(){const r=Object.keys(t);var n=!0,i=!1,s=void 0;try{for(var a,o=Object.keys(e.fields)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){const n=a.value;if(-1===r.indexOf(e.fields[n][1]))return!1;var u=!0,c=!1,l=void 0;try{for(var d,h=r[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){const e=d.value;if(!t[e])return!1}}catch(e){c=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return!0})()&&this._CliqzHumanWeb.telemetry({type:this.msgType,action:e.action,payload:t}),this._messageTemplate={}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(22)),i=a(r(122)),s=a(r(80));function a(e){return e&&e.__esModule?e:{default:e}}const o=36e5,u=6e4,c=3e3;t.default=class{constructor(e){this.updatePatternsDefaultIntervalInMs=o,this.updatePatternsRetryIntervalInMs=u,this.initTimeoutInMs=c,this.config={normal:{name:"patterns",chromeURL:`${n.default.baseURL}human-web/patterns.json`,remoteURL:n.default.settings.ENDPOINT_PATTERNSURL},strict:{name:"patterns-anon",chromeURL:`${n.default.baseURL}human-web/anonpatterns.json`,remoteURL:n.default.settings.ENDPOINT_ANONPATTERNSURL}},this.onUpdateCallback=e,this.resourceLoaders={},this._activeTimers=new Set}isLoaded(){return Object.keys(this.resourceLoaders).length>0}init(){if(this.isLoaded())return Promise.resolve();const e=Object.keys(this.config).map(e=>{const t=this.config[e],r=new s.default(["human-web",t.name],{chromeURL:t.chromeURL,remoteURL:t.remoteURL,cron:this.updatePatternsDefaultIntervalInMs,remoteOnly:!0});this.resourceLoaders[e]=r,r.onUpdate(t=>{i.default.debug(`Updating "${e}" content extraction patterns`),this.onUpdateCallback(t,e)});const n=r.load().then(t=>{this.onUpdateCallback(t,e)}).catch(t=>{i.default.error(`Failed to initialize "${e}" content extraction patterns: ${t}`);const n=setTimeout(()=>{i.default.debug(`Retry to update "${e}" content extraction patterns`),r.updateFromRemote({force:!0}).catch(()=>{}),this._activeTimers.delete(n)},this.updatePatternsRetryIntervalInMs);this._activeTimers.add(n)}),a=new Promise((e,t)=>{setTimeout(t,this.initTimeoutInMs)});return Promise.race([n,a]).catch(()=>{i.default.log(`WARNING: Timeout of ${this.initTimeoutInMs} ms exceeded `+`while initializing the "${e}" content extraction patterns`)})});return Promise.all(e)}unload(){return Object.keys(this.resourceLoaders).forEach(e=>this.resourceLoaders[e].stop()),this.resourceLoaders={},this._activeTimers.forEach(e=>clearTimeout(e)),this._activeTimers=new Set,Promise.resolve()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=class{constructor(){this._domain2IP=new Map,this.ttlInMs=3e5}resolveHost(e){const t=this._domain2IP.get(e);return t?Promise.resolve(t.ip):Promise.reject()}cacheDnsResolution(e,t){const r=new Date,n=new Date(+r+this.ttlInMs);this._domain2IP.set(e,{ip:t,ttl:n})}flushExpiredCacheEntries(){const e=new Date;var t=!0,r=!1,i=void 0;try{for(var s,a=this._domain2IP[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){const t=s.value;var o=n(t,2);const r=o[0];o[1].ttl<=e&&this._domain2IP.delete(r)}}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}}}},function(e,t,r){"use strict"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRequest=i;var n=r(82);function i(e){return new Promise((t,r)=>{const i=fetch(e,{credentials:"omit",cache:"no-cache"}),s=new Promise((e,t)=>setTimeout(t,1e4,"timeout"));return Promise.race([s,i]).then(i=>{200!==i.status&&0!==i.status&&r(`status not valid: ${i.status}`),(0,n.equals)(i.url,e)||(0,n.equals)(decodeURI(decodeURI(i.url)),decodeURI(decodeURI(e)))||r(`DANGER: ${e} != ${i.url}`),i.text().then(e=>{t(e)})}).catch(e=>{r(e)})})}t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1160),i=r(82),s=r(31),a=c(s),o=c(r(122)),u=r(246);function c(e){return e&&e.__esModule?e:{default:e}}const l={DISABLED:"DISABLED",INITIALIZING:"INITIALIZING",READY:"READY"};t.default=class{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onHostnameResolved;let t=void 0===e?()=>{}:e;this._onHostnameResolved=t,this.maxDoubleFetchSize=2097152,this.zombieRequestTimelimitMs=6e5,this._pendingRequests=[],this._pendingInit=Promise.resolve(),this._setState(l.DISABLED),this._webRequestPipeline=a.default.module("webrequest-pipeline"),this._stats={callsToAnonymousHttpGet:0,httpRequests:{started:0,finished:0},rejected:{doubleFetchDisabled:0,exceededSizeLimit:0},allowDoublefetch:0,redirectsFollowed:0,errors:{inconsistentStateDetected:0,danglingEntryFound:0},matchDetails:{noMatch:0,perfectMatch:0,relaxedMatch:0},strippedHeaders:0,populatedDnsMappings:0}}anonymousHttpGet(e){return this._stats.callsToAnonymousHttpGet+=1,this._pendingInit.catch(o.default.debug).then(()=>{const t=new Date;if(this._purgeObsoleteRequests(t),this._state===l.DISABLED)return this._stats.rejected.doubleFetchDisabled+=1,Promise.reject(`doublefetch disabled: skipping request to fetch ${e}`);const r={ts:t,url:e,originalUrl:e};this._pendingRequests.push(r),o.default.debug("doublefetch: pending requests",this._pendingRequests.length),this._stats.httpRequests.started+=1;const i=(0,n.getRequest)(e);return r.requestPromise=i,i.catch(o.default.debug).then(()=>{const e=new Date-t;o.default.debug(`doublefetch for ${r.url} completed after ${e/1e3} seconds.`),this._stats.httpRequests.finished+=1;const n=this._pendingRequests.indexOf(r);-1!==n?this._pendingRequests.splice(n,1):e<this.zombieRequestTimelimitMs&&(o.default.error(`_pendingRequests is in an inconsistent state (url=${r.url}).`),this._stats.errors.inconsistentStateDetected+=1)}),i})}_correlatePendingDoublefetchRequest(e){const t=this._findPendingDoublefetchRequest(e);return t&&!t.requestId&&(t.requestId=e.requestId),t}_findPendingDoublefetchRequest(e){const t=[];var r=!0,n=!1,s=void 0;try{for(var a,o=this._pendingRequests[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){const r=a.value;if(r.requestId){if(r.requestId===e.requestId)return r}else t.push(r)}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}if(!e.tabId||-1!==e.tabId)return null;const u=t.filter(t=>(0,i.equals)(e.url,t.url));if(u.length>0)return this._stats.matchDetails.perfectMatch+=1,u[0];const c=e=>e.replace(/^https:\/\//,"http://"),l=t.filter(t=>(0,i.equals)(c(e.url),c(t.url)));return l.length>0?(this._stats.matchDetails.relaxedMatch+=1,l[0]):(this._stats.matchDetails.noMatch+=1,null)}_purgeObsoleteRequests(e){for(;this._pendingRequests.length>0&&e-this._pendingRequests[0].ts>this.zombieRequestTimelimitMs;)o.default.error(`doublefetch for url ${this._pendingRequests[0].url} was not cleaned up after ${this.zombieRequestTimelimitMs} ms.`),this._stats.errors.danglingEntryFound+=1,this._pendingRequests.shift()}_createOnBeforeSendHeadersHandler(){const e=["cookie","origin"];return{name:"human-web.stripSensitiveHeadersInDoublefetch",spec:"blocking",fn:(t,r)=>{this._correlatePendingDoublefetchRequest(t)&&(r.requestHeaders=t.requestHeaders.filter(t=>!function(t){const r=t.name.toLowerCase();return!!e.includes(r.toLowerCase())||!!r.startsWith("x-")}(t)),r.requestHeaders.length!==t.requestHeaders.length&&(this._stats.strippedHeaders+=1))}}}_createOnHeadersReceivedHandler(){return{name:"human-web.preventExpensiveDoublefetchRequests",spec:"blocking",fn:(e,t)=>{const r=this._correlatePendingDoublefetchRequest(e);if(!r)return!0;const n=e.getResponseHeader("content-length");if(n&&n>this.maxDoubleFetchSize)return this._stats.rejected.exceededSizeLimit+=1,o.default.debug(`Response of ${e.url} exceeds limit of ${this.maxDoubleFetchSize} bytes. Aborting double fetch request.`),t.block(),!1;if(e.statusCode>=300&&e.statusCode<400){const t=e.getResponseHeader("location");if(t){this._stats.redirectsFollowed+=1;const e=t;r.url=e}}return this._stats.allowDoublefetch+=1,!0}}}_createOnCompletedHandler(){return{name:"human-web.cacheDnsResolution",spec:"blocking",fn:e=>{if(!e.ip)return;if(!this._correlatePendingDoublefetchRequest(e))return;const t=(0,u.parseURL)(e.url);t?(this._onHostnameResolved(t.hostname,e.ip),this._stats.populatedDnsMappings+=1,o.default.debug("Learned new DNS resolution from doublefetch:",t.hostname," -> ",e.ip)):o.default.error("Failed to parse url:",e)}}}init(){return this._pendingInit=this._pendingInit.catch(o.default.debug).then(()=>{if(this._state===l.INITIALIZING)throw new Error("Assertion failed: After all pending operation have finished, we must never end up in the INITIALIZING state");if(this._state===l.READY)return Promise.resolve();this._setState(l.INITIALIZING);const e=this._initPipeline().then(()=>{this._setState(l.READY)}).catch(e=>{o.default.error("Failed to initialize pipeline",e),this._setState(l.DISABLED)});return this._pendingInit=e,e}),this._pendingInit}unload(){this._state===l.INITIALIZING&&(this._pendingInit=this._pendingInit.then(()=>this.unload()).catch(o.default.error)),this._setState(l.DISABLED);const e=this._pendingInit.then(()=>Promise.all(this._pendingRequests.filter(e=>e.requestPromise).map(e=>e.requestPromise.catch(()=>{})))).then(()=>this._unloadPipeline()).then(()=>this._setState(l.DISABLED));return this._pendingInit=e.catch(o.default.error),e}_setState(e){e!==this._state&&(o.default.log(`changing state: ${this._state} => ${e}`),this._state=e)}_initPipeline(){if(this._onHeadersReceivedHandler)return Promise.resolve();const e=this._createOnBeforeSendHeadersHandler(),t=this._createOnHeadersReceivedHandler(),r=this._createOnCompletedHandler();return this._webRequestPipeline.isReady().then(()=>this._webRequestPipeline.action("addPipelineStep","onBeforeSendHeaders",e)).then(()=>{this._onBeforeSendHeadersHandler=e}).then(()=>this._webRequestPipeline.action("addPipelineStep","onHeadersReceived",t)).then(()=>{this._onHeadersReceivedHandler=t}).then(()=>this._webRequestPipeline.action("addPipelineStep","onCompleted",r)).then(()=>{this._onCompletedHandler=r})}_removePipelineStep(e,t){return e?(0,s.ifModuleEnabled)(this._webRequestPipeline.action("removePipelineStep",t,e.name)):Promise.resolve()}_unloadPipeline(){const e=(e,t)=>this[e]?this._removePipelineStep(this[e],t):Promise.resolve();return Promise.resolve().then(()=>e("_onBeforeSendHeadersHandler","onBeforeSendHeaders")).then(()=>e("_onHeadersReceivedHandler","onHeadersReceived")).then(()=>e("_onCompletedHandler","onCompleted")).then(()=>{this._onBeforeSendHeadersHandler=null,this._onHeadersReceivedHandler=null,this._onCompletedHandler=null})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeAclkUrl=function(e){const t=e.split("aclk?");if(2!==t.length)throw new Error(`Expected Google pagead "aclk" URL. Instead got: ${e}`);return t[1].replace(/ved=.*&/,"").replace(/&q=&adurl=$/,"").replace(/&adurl=&q=$/,"")}},function(e,t,r){"use strict";function n(){this._protocol=null,this._href="",this._port=-1,this._query=null,this.auth=null,this.slashes=null,this.host=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null,this._prependSlash=!1}var i=r(431);n.queryString=i,n.prototype.parse=function(e,t,r,i){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);for(var s=0,a=e.length-1;e.charCodeAt(s)<=32;)s++;for(;e.charCodeAt(a)<=32;)a--;if(s=this._parseProtocol(e,s,a),"javascript"!==this._protocol){s=this._parseHost(e,s,a,r);var o=this._protocol;!this.hostname&&(this.slashes||o&&!g[o])&&(this.hostname=this.host="")}if(s<=a){var u=e.charCodeAt(s);47===u||92===u?this._parsePath(e,s,a,i):63===u?this._parseQuery(e,s,a,i):35===u?this._parseHash(e,s,a,i):"javascript"!==this._protocol?this._parsePath(e,s,a,i):this.pathname=e.slice(s,a+1)}if(!this.pathname&&this.hostname&&this._slashProtocols[this._protocol]&&(this.pathname="/"),t){var c=this.search;null==c&&(c=this.search=""),63===c.charCodeAt(0)&&(c=c.slice(1)),this.query=n.queryString.parse(c)}},n.prototype.resolve=function(e){return this.resolveObject(n.parse(e,!1,!0)).format()},n.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",s=this.search||"",u="",c=this.hostname||"",l=this.port||"",d=!1,h="",f=this.query;if(f&&"object"==typeof f&&(u=n.queryString.stringify(f)),s||(s=u?"?"+u:""),t&&58!==t.charCodeAt(t.length-1)&&(t+=":"),this.host)d=e+this.host;else if(c){c.indexOf(":")>-1&&(c="["+c+"]"),d=e+c+(l?":"+l:"")}var p=this.slashes||(!t||g[t])&&!1!==d;return t?h=t+(p?"//":""):p&&(h="//"),p&&r&&47!==r.charCodeAt(0)&&(r="/"+r),s&&63!==s.charCodeAt(0)&&(s="?"+s),i&&35!==i.charCodeAt(0)&&(i="#"+i),r=a(r),s=o(s),h+(!1===d?"":d)+r+s+i},n.prototype.resolveObject=function(e){"string"==typeof e&&(e=n.parse(e,!1,!0));var t=this._clone();if(t.hash=e.hash,!e.href)return t._href="",t;if(e.slashes&&!e._protocol)return e._copyPropsTo(t,!0),g[t._protocol]&&t.hostname&&!t.pathname&&(t.pathname="/"),t._href="",t;if(e._protocol&&e._protocol!==t._protocol){if(!g[e._protocol])return e._copyPropsTo(t,!1),t._href="",t;if(t._protocol=e._protocol,e.host||"javascript"===e._protocol)t.pathname=e.pathname;else{for(var r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),t.pathname=r.join("/")}return t.search=e.search,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t._port=e._port,t.slashes=t.slashes||e.slashes,t._href="",t}var i=t.pathname&&47===t.pathname.charCodeAt(0),s=e.host||e.pathname&&47===e.pathname.charCodeAt(0),a=s||i||t.host&&e.pathname,o=a,u=t.pathname&&t.pathname.split("/")||[],c=(r=e.pathname&&e.pathname.split("/")||[],t._protocol&&!g[t._protocol]);if(c&&(t.hostname="",t._port=-1,t.host&&(""===u[0]?u[0]=t.host:u.unshift(t.host)),t.host="",e._protocol&&(e.hostname="",e._port=-1,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=""),a=a&&(""===r[0]||""===u[0])),s)t.host=e.host?e.host:t.host,t.hostname=e.hostname?e.hostname:t.hostname,t.search=e.search,u=r;else if(r.length)u||(u=[]),u.pop(),u=u.concat(r),t.search=e.search;else if(e.search){if(c)t.hostname=t.host=u.shift(),(p=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=p.shift(),t.host=t.hostname=p.shift());return t.search=e.search,t._href="",t}if(!u.length)return t.pathname=null,t._href="",t;for(var l=u.slice(-1)[0],d=(t.host||e.host)&&("."===l||".."===l)||""===l,h=0,f=u.length;f>=0;f--)"."===(l=u[f])?u.splice(f,1):".."===l?(u.splice(f,1),h++):h&&(u.splice(f,1),h--);if(!a&&!o)for(;h--;h)u.unshift("..");!a||""===u[0]||u[0]&&47===u[0].charCodeAt(0)||u.unshift(""),d&&"/"!==u.join("/").substr(-1)&&u.push("");var p,m=""===u[0]||u[0]&&47===u[0].charCodeAt(0);c&&(t.hostname=t.host=m?"":u.length?u.shift():"",(p=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=p.shift(),t.host=t.hostname=p.shift()));return(a=a||t.host&&u.length)&&!m&&u.unshift(""),t.pathname=0===u.length?null:u.join("/"),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t._href="",t};var s=r(432);n.prototype._hostIdna=function(e){return s.toASCII(e)};var a=n.prototype._escapePathName=function(e){return u(e,35,63)?function(e){return e.replace(/[?#]/g,function(e){return encodeURIComponent(e)})}(e):e},o=n.prototype._escapeSearch=function(e){return u(e,35,-1)?function(e){return e.replace(/#/g,function(e){return encodeURIComponent(e)})}(e):e};function u(e,t,r){for(var n=0,i=e.length;n<i;++n){var s=e.charCodeAt(n);if(s===t||s===r)return!0}return!1}function c(e){var t=new Uint8Array(128);return e.forEach(function(e){if("number"==typeof e)t[e]=1;else for(var r=e[0],n=e[1],i=r;i<=n;++i)t[i]=1}),t}n.prototype._parseProtocol=function(e,t,r){for(var n=!1,i=this._protocolCharacters,s=t;s<=r;++s){var a=e.charCodeAt(s);if(58===a){var o=e.slice(t,s);return n&&(o=o.toLowerCase()),this._protocol=o,s+1}if(1!==i[a])return t;a<97&&(n=!0)}return t},n.prototype._parseAuth=function(e,t,r,n){var i=e.slice(t,r+1);n&&(i=decodeURIComponent(i)),this.auth=i},n.prototype._parsePort=function(e,t,r){for(var n=0,i=!1,s=t;s<=r;++s){var a=e.charCodeAt(s);if(!(48<=a&&a<=57))break;n=10*n+(a-48),i=!0}return 0!==n||i?(this._port=n,s-t):0},n.prototype._parseHost=function(e,t,r,n){var i=this._hostEndingCharacters,s=e.charCodeAt(t),a=e.charCodeAt(t+1);if(47!==s&&92!==s||47!==a&&92!==a){if(!this._protocol||g[this._protocol])return t}else{if(this.slashes=!0,0===t){if(r<2)return t;if(!function(e,t,r,n){for(var i=e.length,s=r;s<i;++s){var a=e.charCodeAt(s);if(a===t)return!0;if(1===n[a])return!1}return!1}(e,64,2,i)&&!n)return this.slashes=null,t}t+=2}for(var o=!1,u=!1,c=t,l=r,d=0,h=0,f=!1,p=-1,m=t;m<=r;++m){if(64===(y=e.charCodeAt(m)))p=m;else if(37===y)f=!0;else if(1===i[y])break}if(p>-1&&(this._parseAuth(e,t,p-1,f),t=c=p+1),91===e.charCodeAt(t)){for(m=t+1;m<=r;++m){if(93===(y=e.charCodeAt(m))){58===e.charCodeAt(m+1)&&(d=this._parsePort(e,m+2,r)+1);var _=e.slice(t+1,m).toLowerCase();return this.hostname=_,this.host=this._port>0?"["+_+"]:"+this._port:"["+_+"]",this.pathname="/",m+d+1}}return t}for(m=t;m<=r;++m){if(h>62)return this.hostname=this.host=e.slice(t,m),m;var y;if(58===(y=e.charCodeAt(m))){d=this._parsePort(e,m+1,r)+1,l=m-1;break}if(y<97){if(46===y)h=-1;else if(65<=y&&y<=90)o=!0;else if(!(45===y||95===y||43===y||48<=y&&y<=57)){0===i[y]&&0===this._noPrependSlashHostEnders[y]&&(this._prependSlash=!0),l=m-1;break}}else if(y>=123){if(y<=126){0===this._noPrependSlashHostEnders[y]&&(this._prependSlash=!0),l=m-1;break}u=!0}y,h++}if(l+1!==t&&l-c<=256){_=e.slice(c,l+1);o&&(_=_.toLowerCase()),u&&(_=this._hostIdna(_)),this.hostname=_,this.host=this._port>0?_+":"+this._port:_}return l+1+d},n.prototype._copyPropsTo=function(e,t){t||(e._protocol=this._protocol),e._href=this._href,e._port=this._port,e._prependSlash=this._prependSlash,e.auth=this.auth,e.slashes=this.slashes,e.host=this.host,e.hostname=this.hostname,e.hash=this.hash,e.search=this.search,e.pathname=this.pathname},n.prototype._clone=function(){var e=new n;return e._protocol=this._protocol,e._href=this._href,e._port=this._port,e._prependSlash=this._prependSlash,e.auth=this.auth,e.slashes=this.slashes,e.host=this.host,e.hostname=this.hostname,e.hash=this.hash,e.search=this.search,e.pathname=this.pathname,e},n.prototype._getComponentEscaped=function(e,t,r,n){for(var i=t,s=t,a="",o=n?this._afterQueryAutoEscapeMap:this._autoEscapeMap;s<=r;++s){var u=o[e.charCodeAt(s)];""!==u&&void 0!==u&&(i<s&&(a+=e.slice(i,s)),a+=u,i=s+1)}return i<s+1&&(a+=e.slice(i,s)),a},n.prototype._parsePath=function(e,t,r,n){for(var i,s=t,a=r,o=!1,u=this._autoEscapeCharacters,c=t;c<=r;++c){var l=e.charCodeAt(c);if(35===l){this._parseHash(e,c,r,n),a=c-1;break}if(63===l){this._parseQuery(e,c,r,n),a=c-1;break}n||o||1!==u[l]||(o=!0)}s>a?this.pathname="/":(i=o?this._getComponentEscaped(e,s,a,!1):e.slice(s,a+1),this.pathname=this._prependSlash?"/"+i:i)},n.prototype._parseQuery=function(e,t,r,n){for(var i,s=t,a=r,o=!1,u=this._autoEscapeCharacters,c=t;c<=r;++c){var l=e.charCodeAt(c);if(35===l){this._parseHash(e,c,r,n),a=c-1;break}n||o||1!==u[l]||(o=!0)}s>a?this.search="":(i=o?this._getComponentEscaped(e,s,a,!0):e.slice(s,a+1),this.search=i)},n.prototype._parseHash=function(e,t,r,n){this.hash=t>r?"":n?e.slice(t,r+1):this._getComponentEscaped(e,t,r,!0)},Object.defineProperty(n.prototype,"port",{get:function(){return this._port>=0?""+this._port:null},set:function(e){this._port=null==e?-1:parseInt(e,10)}}),Object.defineProperty(n.prototype,"query",{get:function(){var e=this._query;if(null!=e)return e;var t=this.search;return t&&(63===t.charCodeAt(0)&&(t=t.slice(1)),""!==t)?(this._query=t,t):t},set:function(e){this._query=e}}),Object.defineProperty(n.prototype,"path",{get:function(){var e=this.pathname||"",t=this.search||"";return e||t?e+t:null==e&&t?"/"+t:null},set:function(){}}),Object.defineProperty(n.prototype,"protocol",{get:function(){var e=this._protocol;return e?e+":":e},set:function(e){if("string"==typeof e){var t=e.length-1;58===e.charCodeAt(t)?this._protocol=e.slice(0,t):this._protocol=e}else null==e&&(this._protocol=null)}}),Object.defineProperty(n.prototype,"href",{get:function(){var e=this._href;return e||(e=this._href=this.format()),e},set:function(e){this._href=e}}),n.parse=function(e,t,r,i){if(e instanceof n)return e;var s=new n;return s.parse(e,!!t,!!r,!!i),s},n.format=function(e){return"string"==typeof e&&(e=n.parse(e)),e instanceof n?e.format():n.prototype.format.call(e)},n.resolve=function(e,t){return n.parse(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?n.parse(e,!1,!0).resolveObject(t):t};for(var l=["<",">",'"',"`"," ","\r","\n","\t","{","}","|","\\","^","`","'"],d=new Array(128),h=0,f=d.length;h<f;++h)d[h]="";for(h=0,f=l.length;h<f;++h){var p=l[h],m=encodeURIComponent(p);m===p&&(m=escape(p)),d[p.charCodeAt(0)]=m}var _=d.slice();d[92]="/";var g=n.prototype._slashProtocols={http:!0,https:!0,gopher:!0,file:!0,ftp:!0,"http:":!0,"https:":!0,"gopher:":!0,"file:":!0,"ftp:":!0};n.prototype._protocolCharacters=c([[97,122],[65,90],46,43,45]),n.prototype._hostEndingCharacters=c([35,63,47,92]),n.prototype._autoEscapeCharacters=c(l.map(function(e){return e.charCodeAt(0)})),n.prototype._noPrependSlashHostEnders=c(["<",">","'","`"," ","\r","\n","\t","{","}","|","^","`",'"',"%",";"].map(function(e){return e.charCodeAt(0)})),n.prototype._autoEscapeMap=d,n.prototype._afterQueryAutoEscapeMap=_,e.exports=n,n.replace=function(){r.c.url={exports:n}}},function(e,t,r){"use strict";function n(){return new Promise((e,t)=>{try{const r=[];chrome.windows.getAll({populate:!0},t=>{t.forEach(e=>{e.tabs.forEach(e=>{r.push(e.url)})}),e(r)})}catch(e){t(e)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.getAllOpenPages=n,t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={VERSION:"0.1",set:(e,t,r,n)=>{const i={};i[`${e}:${t}`]=r,chrome.storage.local.set(i,n)},get:(e,t,r)=>{if("function"==typeof t)chrome.storage.local.get(null,n=>{const i=[];Object.keys(n).forEach(r=>{r.startsWith(e)&&t(n[r])&&i.push(n[r])}),r(i)});else{const n=`${e}:${t}`;chrome.storage.local.get(n,e=>{r(e[n])})}},remove:(e,t,r)=>{if("function"==typeof t)chrome.storage.local.get(null,n=>{const i=[];Object.keys(n).forEach(r=>{if(r.startsWith(e)&&t(n[r])){const t=`${e}:${r}`;i.push(t)}}),chrome.storage.local.remove(i,r)});else{const n=`${e}:${t}`;chrome.storage.local.remove(n,r)}},size:e=>{chrome.storage.local.getBytesInUse(null,t=>{const r=[t,t/chrome.storage.local.QUOTA_BYTES];(void 0).CliqzHumanWeb.log("Current size: ",r[0],r[1]),e&&e(r)})},removeEverything:()=>{chrome.storage.local.clear(),(void 0).dbConn.size()}};t.default=class{constructor(e){this.CliqzHumanWeb=e,this.dbConn=n}init(){return Promise.resolve(this.dbConn)}asyncClose(){return Promise.resolve()}getDBConn(){return this.dbConn}saveRecordTelemetry(e,t,r){this.dbConn.set("telemetry",e,t,r)}loadRecordTelemetry(e,t){this.dbConn.get("telemetry",e,e=>{t(e||null)})}historyTimeFrame(){}deleteVisit(){}deleteTimeFrame(){}clearHistory(){}getListOfUnchecked(e,t,r,n){const i=(new Date).getTime();null==r?this.dbConn.get("usafe",e=>{let r=null;if((r="string"==typeof e?JSON.parse(e):e).last_visit<i-1e3*t)return!0},t=>{t&&0!==t.length||n([],null);const r=[];(t=t.splice(0,e)).forEach(e=>{let t=null;t="string"==typeof e?JSON.parse(e):e,r.push([t.url,t.payload])}),n(r.splice(0,e),null)}):this.dbConn.get("usafe",r,r=>{let s=null;if(s="string"==typeof r?JSON.parse(r):r)if(s.last_visit<i-1e3*t){const t=[];t.push([s.url,s.payload]),n(t.splice(0,e),null)}else n([],null);else n([],null)})}escapeSQL(){}saveURL(e,t,r){const n=JSON.stringify(t);this.dbConn.set("usafe",e,n,()=>{r()})}updateURL(e,t,r){const n=JSON.stringify(t);this.dbConn.set("usafe",e,n,()=>{r()})}getURL(e,t){this.dbConn.get("usafe",e,e=>{if(e&&"undefined"!==e){let r=null;r="string"==typeof e?JSON.parse(e):e,t(r)}else t([])})}removeUnsafe(e,t){this.dbConn.remove("usafe",e,()=>{t(!0)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(59));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){let r=32*e.length;const n=e.length;let i=0;this.m=32*n,r=this.m,this.k=t;const s=1<<Math.ceil(Math.log(Math.ceil(Math.log(r)/Math.LN2/8))/Math.LN2);let a;a=1===s?Uint8Array:2===s?Uint16Array:Uint32Array;const o=new ArrayBuffer(s*t),u=new Int32Array(n);for(this.buckets=u;i<n-1;)u[i+=1]=e[i];this._locations=new a(o)}const a={VERSION:"0.1",debug:"true",BLOOM_FILTER_CONFIG:`${i(r(22)).default.settings.CDN_BASEURL}/bloom_filter`,hash:e=>(0,n.default)(e),fnv32a(e){let t=2166136261;for(let r=0;r<e.length;r+=1)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0},fnv32Hex:e=>a.fnv32a(e).toString(16),BloomFilter:s};s.prototype.locations=function(e,t){const r=this.k,n=this.m,i=this._locations;e=parseInt(e,16),t=parseInt(t,16);let s=e%n;for(let e=0;e<r;e+=1)i[e]=s<0?s+n:s,s=(s+t)%n;return i},s.prototype.test=function(e,t){const r=this.locations(e,t),n=this.k,i=this.buckets;for(let e=0;e<n;e+=1){const t=r[e];if(0==(i[Math.floor(t/32)]&1<<t%32))return!1}return!0},s.prototype.testSingle=function(e){const t=a.hash(e),r=t.substring(0,8),n=t.substring(8,16);return this.test(r,n)},s.prototype.add=function(e,t){const r=this.locations(e,t),n=this.k,i=this.buckets;for(let e=0;e<n;e+=1)i[Math.floor(r[e]/32)]|=1<<r[e]%32},s.prototype.addSingle=function(e){const t=a.hash(e),r=t.substring(0,8),n=t.substring(8,16);return this.add(r,n)},s.prototype.update=function(e){let t=32*e.length;const r=e.length;let n=0;if(t=32*r,this.m!==t)throw new Error("Bloom filter can only be updated with same length");for(;n<r-1;)n+=1,this.buckets[n]|=e[n]},t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(418)),i=s(r(1148));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{init(){}unload(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new i.default(["freshtab","remoteMessages.json"],{remoteURL:`${n.default.settings.CDN_BASEURL}/notifications/messages.json`,cron:432e5,updateInterval:3e5}).load()};var n=s(r(22)),i=s(r(80));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Promise.resolve(i)};var n=r(110);const i=[{id:"import",active:!0,version:1,type:"notification",title:(0,n.getMessage)("freshtab_app_top_box_import_bookmarks_hdr"),icon:"./images/import-bookmarks.svg",cta_text:(0,n.getMessage)("freshtab_app_top_box_import_bookmarks_cta"),cta_url:"home-action:openImportDialog",later_text:(0,n.getMessage)("freshtab_app_top_box_import_bookmarks_later"),handler:"MESSAGE_HANDLER_FRESHTAB_TOP",position:"top",rules:[{fn:"cliqzVersionCheck",value:"1.20.0"},{fn:"daysSinceInstallCheck",value:14}]},{id:"new-cliqz-tab",active:!1,version:1,type:"notification",title:(0,n.getMessage)("freshtab_app_middle_box_new_cliqz_tab_hdr"),description:(0,n.getMessage)("freshtab_app_middle_box_new_cliqz_tab_desc"),icon:"./images/settings-icon_blue.svg",cta_text:(0,n.getMessage)("freshtab_app_middle_box_new_cliqz_tab_cta"),cta_url:"home-action:settings",handler:"MESSAGE_HANDLER_FRESHTAB_MIDDLE",position:"middle"},{id:"blue-theme",active:!1,version:1,type:"notification",title:(0,n.getMessage)("freshtab_app_middle_box_blue_theme_hdr"),description:(0,n.getMessage)("freshtab_app_middle_box_blue_theme_desc"),icon:"./images/settings-icon_blue.svg",cta_text:(0,n.getMessage)("freshtab_app_middle_box_blue_theme_cta"),cta_url:"home-action:settings",handler:"MESSAGE_HANDLER_FRESHTAB_MIDDLE",position:"middle",rules:[{fn:"cliqzVersionCheck",value:"1.16.0"}]},{id:"french-news",active:!1,version:1,type:"notification",title:(0,n.getMessage)("freshtab_app_middle_box_french_news_hdr"),description:(0,n.getMessage)("freshtab_app_middle_box_french_news_desc"),icon:"./images/settings-icon_blue.svg",cta_text:(0,n.getMessage)("freshtab_app_middle_box_french_news_cta"),cta_url:"home-action:settings&news",handler:"MESSAGE_HANDLER_FRESHTAB_MIDDLE",position:"middle",rules:[{fn:"locale",value:"fr"},{fn:"currentNewsLanguageIsNot",value:"fr"}]},{id:"promote-mobile",active:!1,version:1,type:"notification",title:(0,n.getMessage)("freshtab_app_middle_box_promote_mobile_hdr"),description:(0,n.getMessage)("freshtab_app_middle_box_promote_mobile_desc"),handler:"MESSAGE_HANDLER_FRESHTAB_MIDDLE",position:"middle",buttons:[{id:"promote-apple",src:"apple-badge.svg",class:"apple-badge",link:{en:"https://itunes.apple.com/us/app/cliqz-browser/id1065837334",de:"https://itunes.apple.com/de/app/cliqz-browser-suchmaschine/id1065837334?mt=8"}},{id:"promote-android",src:"android-badge.svg",class:"android-badge",link:{en:"https://play.google.com/store/apps/details?hl=en&id=com.cliqz.browser&referrer=utm_source%3Dcliqz%26utm_medium%3Dproduct%26utm_campaign%3Den%26cliqz_campaign%3Dmobile_en",de:"https://play.google.com/store/apps/details?hl=de&id=com.cliqz.browser&referrer=utm_source%3Dcliqz%26utm_medium%3Dproduct%26utm_campaign%3Dde%26cliqz_campaign%3Dmobile_de"}}],rules:[{fn:"cliqzVersionCheck",value:"1.16.0"}]},{id:"ft-amo",active:!1,version:1,type:"notification",title:(0,n.getMessage)("freshtab_app_middle_box_ft_amo_hdr"),description:(0,n.getMessage)("freshtab_app_middle_box_ft_amo_desc"),cta_text:(0,n.getMessage)("freshtab_app_middle_box_ft_amo_cta"),cta_url:"home-action:settings",handler:"MESSAGE_HANDLER_FRESHTAB_TOP",position:"top",rules:[{fn:"isAMO"}]}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=d(r(110)),s=d(r(31)),a=d(r(11)),o=d(r(47)),u=r(52),c=d(r(1170)),l=d(r(1169));function d(e){return e&&e.__esModule?e:{default:e}}const h="dismissedAlerts",f=1,p={cliqzVersionCheck:e=>u.isCliqzBrowser&&(0,u.isCliqzAtLeastInVersion)(e)||a.default.get("developer",!1),locale:e=>e===i.default.PLATFORM_LOCALE||e===i.default.PLATFORM_LANGUAGE,currentNewsLanguageIsNot(e,t){const r=JSON.parse(a.default.get("freshtabConfig","{}"));if(r.news&&r.news.preferedCountry&&r.news.preferedCountry===e){const e=JSON.parse(a.default.get(h,"{}"));return e[t.id]={count:1},a.default.set(h,JSON.stringify(e)),!1}return!0},isCurrentDate(e){const t=a.default.get("config_ts",null);return-1!==e.indexOf(t)},daysSinceInstallCheck(e){const t=parseInt(a.default.get("install_date","0"),10);return o.default.getDay()-t<=e},isAMO:()=>u.isAMO};function m(e){return(e.rules||[]).every(t=>!!Object.prototype.hasOwnProperty.call(p,t.fn)&&p[t.fn](t.value,e))}t.default=class{constructor(){this.messageCenter=s.default.module("message-center")}get messages(){return Promise.all([(0,c.default)(),(0,l.default)()]).then(e=>e.reduce((e,t)=>e.concat(t),[]))}get handlers(){return this.messageCenter.action("getHandlers")}init(){const e=JSON.parse(a.default.get(h,"{}"));Promise.all([this.handlers,this.messages]).then(t=>{var r=n(t,2);let i=r[0];r[1].filter(e=>e.active).filter(e=>e.version<=f).filter(t=>0===(e[t.id]||{count:0}).count).filter(m).forEach(e=>{const t=e.handler;-1!==i.indexOf(t)&&this.messageCenter.action("showMessage",t,e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(32)),i=a(r(123)),s=a(r(31));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class extends i.default{_renderMessage(e){s.default.module("freshtab").isReady().then(()=>{n.default.pub("message-center:handlers-freshtab:new-message",e)}).catch()}_hideMessage(e){n.default.pub("message-center:handlers-freshtab:clear-message",e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(32)),i=a(r(123)),s=a(r(31));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class extends i.default{_renderMessage(e){s.default.module("freshtab").isReady().then(()=>{n.default.pub("message-center:handlers-freshtab:new-message",e)}).catch()}_hideMessage(e){n.default.pub("message-center:handlers-freshtab:clear-message",e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(32)),i=a(r(123)),s=a(r(31));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class extends i.default{_renderMessage(e){s.default.module("freshtab").isReady().then(()=>{n.default.pub("message-center:handlers-freshtab:new-message",e)}).catch()}_hideMessage(e){n.default.pub("message-center:handlers-freshtab:clear-message",e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(32)),i=s(r(123));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class extends i.default{constructor(){super(),n.default.sub("ui:dropdown_message_click",this._onClick.bind(this))}_renderMessage(e){n.default.pub("msg_handler_dropdown:message_ready",this._convertMessage(e))}_hideMessage(e){n.default.pub("msg_handler_dropdown:message_revoked",this._convertMessage(e))}_convertMessage(e){return{"footer-message":{simple_message:e.text,type:"cqz-message-survey",location:e.location,options:(e.options||[]).map(e=>({text:e.label,state:e.style,action:e.action}))}}}_onClick(e){const t=this._messageQueue[0];t&&this._callbacks[t.id]&&this._callbacks[t.id](t.id,e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(47)),i=s(r(123));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class extends i.default{_renderMessage(e){n.default.getWindow().alert(e.text),this._callbacks[e.id]&&this._callbacks[e.id](e.id,e.options&&e.options.length>0&&e.options[0].action),this.showNextMessage()}_hideMessage(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(24)),i=c(r(1176)),s=c(r(1175)),a=c(r(1174)),o=c(r(1173)),u=c(r(1172));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){n.default.log(e,"CliqzMsgCenter")}class d{constructor(){this._messageHandlers={},this.showMessage=this.showMessage.bind(this),this.hideMessage=this.hideMessage.bind(this),this.registerMessageHandler("MESSAGE_HANDLER_DROPDOWN",new s.default),this.registerMessageHandler("MESSAGE_HANDLER_ALERT",new i.default),this.registerMessageHandler("MESSAGE_HANDLER_FRESHTAB_TOP",new a.default),this.registerMessageHandler("MESSAGE_HANDLER_FRESHTAB_MIDDLE",new o.default),this.registerMessageHandler("MESSAGE_HANDLER_FRESHTAB_OFFERS",new u.default)}registerMessageHandler(e,t){this._messageHandlers[e]=t}getHandlers(){return Object.keys(this._messageHandlers)}showMessage(e,t,r){const n=this._messageHandlers[t];n?n.enqueueMessage(e,r):l(`message handler not found: ${t}`)}hideMessage(e,t){const r=this._messageHandlers[t];r?r.dequeueMessage(e):l(`message handler not found: ${t}`)}static getInstance(){return d.getInstance.instance=d.getInstance.instance||new d,d.getInstance.instance}}t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(78)),i=o(r(1177)),s=o(r(123)),a=o(r(1171));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)({init(){this.messageCenter=i.default.getInstance(),(new a.default).init()},unload(){},beforeBrowserShutdown(){},events:{"msg_center:show_message":function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.messageCenter.showMessage.call(this.messageCenter,...t)},"msg_center:hide_message":function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.messageCenter.hideMessage.call(this.messageCenter,...t)}},actions:{registerMessageHandler(e,t){this.messageCenter.registerMessageHandler(e,new class extends s.default{_renderMessage(e){t(e)}_hideMessage(){}})},getHandlers(){return this.messageCenter.getHandlers()},showMessage(e,t){this.messageCenter.showMessage(t,e)},hideMessage(e,t){this.messageCenter.hideMessage(t,e)}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(1178)),i=s(r(1168));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(47)),i=c(r(11)),s=c(r(24)),a=r(249),o=r(55),u=r(52);function c(e){return e&&e.__esModule?e:{default:e}}let l=null;function d(e){s.default.log(e,"CliqzABTests.jsm")}const h={PREF:"ABTests",PREF_OVERRIDE:"ABTestsOverride",URL:"https://stats.cliqz.com/abtests/check?session=",getCurrent(){if(i.default.has(h.PREF))return JSON.parse(i.default.get(h.PREF))},setCurrent(e){i.default.set(h.PREF,JSON.stringify(e))},getOverride(){if(i.default.has(h.PREF_OVERRIDE)){return JSON.parse(i.default.get(h.PREF_OVERRIDE))}},setOverride(e){e?i.default.set(h.PREF_OVERRIDE,JSON.stringify(e)):i.default.clear(h.PREF_OVERRIDE)},check(){d("AB checking"),clearTimeout(l),l=setTimeout(h.check,36e5),h.retrieve(e=>{try{let t={};i.default.has(h.PREF)&&(t=JSON.parse(i.default.get(h.PREF)));let r=JSON.parse(e.responseText);const n=h.getOverride();n&&(r=n);const s={};let a=!1;for(const e in t)r[e]?s[e]=t[e]:h.leave(e)&&(a=!0);for(const e in r)t[e]||h.enter(e,r[e])&&(a=!0,s[e]=r[e]);a&&i.default.set(h.PREF,JSON.stringify(s))}catch(e){d(`retrieve error: ${e.message}`)}})},retrieve(e){const t=h.URL+encodeURIComponent(i.default.get("session",""));(0,o.httpGet)(t,e,()=>{d("failed to retrieve AB test data")},15e3)},enter(e){let t=!0;switch(e){case"1028_A":i.default.set("humanWeb",!1);break;case"1028_B":i.default.set("humanWeb",!0);break;case"1032_A":i.default.set("spellCorrMessage",!1);break;case"1032_B":i.default.set("spellCorrMessage",!0);break;case"1036_B":i.default.set("extended_onboarding_same_result",!0);break;case"1045_A":break;case"1045_B":i.default.set("antiTrackTest",!0);break;case"1046_B":i.default.set("attrackBlockCookieTracking",!0);break;case"1047_B":i.default.set("attrackRemoveQueryStringTracking",!0);break;case"1048_B":i.default.set("attrackAlterPostdataTracking",!0);break;case"1049_B":i.default.set("attrackCanvasFingerprintTracking",!0);break;case"1050_B":i.default.set("attrackRefererTracking",!0);break;case"1051_B":i.default.set("antiTrackTest",!0);break;case"1052_A":i.default.set("attrackBlockCookieTracking",!1);break;case"1052_B":i.default.set("attrackBlockCookieTracking",!0);break;case"1053_A":i.default.set("attrackRemoveQueryStringTracking",!1);break;case"1053_B":i.default.set("attrackRemoveQueryStringTracking",!0);break;case"1057_A":i.default.set("trackerTxt",!1);break;case"1057_B":i.default.set("trackerTxt",!0);break;case"1059_A":i.default.set("attrack.local_tracking",!1);break;case"1059_B":i.default.set("attrack.local_tracking",!0);break;case"1060_A":i.default.set("attrackBloomFilter",!1);break;case"1060_B":i.default.set("attrackBloomFilter",!0);break;case"1061_A":i.default.set("attrackUI",!1);break;case"1061_B":i.default.set("attrackUI",!0);break;case"1063_A":i.default.set("double-enter2",!1);break;case"1063_B":i.default.set("double-enter2",!0);break;case"1064_A":i.default.set("attrackDefaultAction","same");break;case"1064_B":i.default.set("attrackDefaultAction","placeholder");break;case"1064_C":i.default.set("attrackDefaultAction","block");break;case"1064_D":i.default.set("attrackDefaultAction","empty");break;case"1064_E":i.default.set("attrackDefaultAction","replace");break;case"1065_A":i.default.set("freshTabNewsEmail",!1);break;case"1065_B":i.default.set("freshTabNewsEmail",!0);break;case"1066_A":i.default.set("proxyNetwork",!1);break;case"1066_B":i.default.set("proxyNetwork",!0);break;case"1070_A":i.default.set("cliqz-anti-phishing",!1),i.default.set("cliqz-anti-phishing-enabled",!1);break;case"1070_B":i.default.set("cliqz-anti-phishing",!0),i.default.set("cliqz-anti-phishing-enabled",!0);break;case"1071_A":i.default.set("browser.privatebrowsing.apt",!1,"");break;case"1071_B":i.default.set("browser.privatebrowsing.apt",!0,"");break;case"1074_A":i.default.set("cliqz-adb-abtest",!1);break;case"1074_B":i.default.set("cliqz-adb-abtest",!0);break;case"1077_A":i.default.set("languageDedup",!1);break;case"1077_B":i.default.set("languageDedup",!0);break;case"1078_A":i.default.set("modules.anolysis.enabled",!1);break;case"1078_B":i.default.set("modules.anolysis.enabled",!0);break;case"1080_A":i.default.set("freshtabNewBrand",!1);break;case"1080_B":i.default.set("freshtabNewBrand",!0);break;case"1081_A":i.default.set("attrackLogBreakage",!1);break;case"1081_B":i.default.set("attrackLogBreakage",!0);break;case"1084_B":i.default.set("attrackOverrideUserAgent",!0);break;case"1085_A":i.default.set("extOnboardShareLocation",!1);break;case"1085_B":i.default.set("extOnboardShareLocation",!0);break;case"1086_A":i.default.set("checkLogos","1");break;case"1086_B":i.default.set("checkLogos","0");break;case"1087_A":i.default.set("modules.context-search.enabled",!1);break;case"1087_B":i.default.set("modules.context-search.enabled",!0);break;case"1088_A":i.default.set("offers2FeatureEnabled",!1);break;case"1088_B":i.default.set("offers2FeatureEnabled",!0);break;case"1092_A":i.default.set("extOnboardVideoDownloader",!1);break;case"1092_B":i.default.set("extOnboardVideoDownloader",!0);break;case"1094_A":i.default.set("ff-experiment",!1);break;case"1094_B":i.default.set("ff-experiment",!0);break;case"1096_A":i.default.set("extOnboardCliqzConnect",!1);break;case"1096_B":i.default.set("extOnboardCliqzConnect",!0);break;case"1097_A":i.default.set("dropdownAdCampaignPosition","top");break;case"1097_B":i.default.set("dropdownAdCampaignPosition","bottom");break;case"1098_A":!0===i.default.get("cliqz-adb-onboarding-ab",!1)&&(i.default.clear("cliqz-adb-onboarding-ab"),i.default.clear("cliqz-adb-onboarding-message"),i.default.set("cliqz-adb",0));break;case"1098_B":1===i.default.get("cliqz-adb",0)?h.disable("1098_B"):(i.default.set("cliqz-adb-onboarding-ab",!0),i.default.set("cliqz-adb",1));break;case"1098_C":1===i.default.get("cliqz-adb",0)?h.disable("1098_C"):(i.default.set("cliqz-adb-onboarding-ab",!0),i.default.set("cliqz-adb",1),i.default.set("cliqz-adb-onboarding-message",!0));break;case"1099_A":i.default.set("attrackCookieTrustReferers",!1);break;case"1099_B":i.default.set("attrackCookieTrustReferers",!0);break;case"1101_A":i.default.set("modules.history.enabled",!1);break;case"1101_B":i.default.set("modules.history.enabled",!0);break;case"1102_A":i.default.set("modules.antitracking-blocker.enabled",!1);break;case"1102_B":i.default.set("antitrackingBlocklist","default"),i.default.set("modules.antitracking-blocker.enabled",!0);break;case"1102_C":i.default.set("antitrackingBlocklist","cliqz"),i.default.set("modules.antitracking-blocker.enabled",!0);break;case"1102_D":i.default.set("antitrackingBlocklist","ghostery"),i.default.set("modules.antitracking-blocker.enabled",!0);break;case"1103_A":i.default.set("offersDropdownAdPosition","top");break;case"1103_B":i.default.set("offersDropdownAdPosition","bottom");break;case"1103_C":i.default.set("offersDropdownAdPosition","right");break;case"1105_A":i.default.set("offersBrowserPanelEnableSwitch",!1);break;case"1105_B":i.default.set("offersBrowserPanelEnableSwitch",!0);break;case"1106_A":i.default.set("greenads","green");break;case"1106_B":i.default.set("greenads","collect");break;case"1106_C":i.default.set("greenads","disabled");break;case"1107_A":i.default.set("MarketAnalysisEnabled",!1);break;case"1107_B":i.default.set("MarketAnalysisEnabled",!0);break;case"1108_A":i.default.set("extOnboardNewSearchUI",!1);break;case"1108_B":i.default.set("extOnboardNewSearchUI",!0);break;case"1109_A":i.default.set("offersDropdownSwitch",!1);break;case"1109_B":i.default.set("offersDropdownSwitch",!0);break;case"1110_A":i.default.set("cliqzTabOffersNotification",!1);break;case"1110_B":i.default.set("cliqzTabOffersNotification",!0);break;case"1111_A":i.default.set("modules.history-analyzer.enabled",!1);break;case"1111_B":i.default.set("modules.history-analyzer.enabled",!0);break;case"1112_A":i.default.set("experiment_svm",!1);break;case"1112_B":i.default.set("experiment_svm",!0);break;case"1114_A":case"1114_B":case"1114_C":"Cliqz"===(0,a.getDefaultEngine)().name&&(0,a.revertToOriginalEngine)(),i.default.clear("serp_test");break;case"1115_A":u.isCliqzBrowser&&i.default.set("network.http.referer.XOriginTrimmingPolicy",0);break;case"1115_B":u.isCliqzBrowser&&i.default.set("network.http.referer.XOriginTrimmingPolicy",1);break;default:t=!1}if(t){const t={type:"abtest",action:"enter",name:e};return n.default.telemetry(t),!0}return!1},leave(e,t){let r=!0;switch(e){case"1024_B":i.default.clear("categoryAssessment");break;case"1028_A":case"1028_B":i.default.clear("humanWeb");break;case"1032_A":case"1032_B":i.default.clear("spellCorrMessage");break;case"1036_A":case"1036_B":i.default.clear("extended_onboarding_same_result"),i.default.clear("extended_onboarding");break;case"1045_A":case"1045_B":i.default.clear("antiTrackTest");break;case"1046_A":case"1047_A":case"1048_A":case"1049_A":case"1050_A":break;case"1046_B":i.default.clear("attrackBlockCookieTracking");break;case"1047_B":i.default.clear("attrackRemoveQueryStringTracking");break;case"1048_B":i.default.clear("attrackAlterPostdataTracking");break;case"1049_B":i.default.clear("attrackCanvasFingerprintTracking");break;case"1050_B":i.default.clear("attrackRefererTracking");break;case"1051_B":i.default.clear("antiTrackTest");break;case"1052_B":i.default.clear("attrackBlockCookieTracking");break;case"1053_B":i.default.clear("attrackRemoveQueryStringTracking");break;case"1055_A":case"1055_B":i.default.clear("unblockEnabled");break;case"1056_A":case"1056_B":i.default.clear("freshTabAB");break;case"1057_B":i.default.clear("trackerTxt");break;case"1058_A":case"1058_B":i.default.clear("unblockMode");break;case"1059_A":case"1059_B":i.default.clear("attrack.local_tracking");break;case"1060_A":case"1060_B":i.default.clear("attrackBloomFilter");break;case"1061_A":case"1061_B":i.default.clear("attrackUI");break;case"1063_A":case"1063_B":i.default.clear("double-enter2");break;case"1064_A":case"1064_B":case"1064_C":case"1064_D":case"1064_E":i.default.clear("attrackDefaultAction");break;case"1066_A":case"1066_B":i.default.clear("proxyNetwork");break;case"1065_A":case"1065_B":i.default.clear("freshTabNewsEmail");break;case"1068_A":case"1068_B":i.default.clear("languageDedup");break;case"1069_A":case"1069_B":i.default.clear("grOfferSwitchFlag");break;case"1070_A":case"1070_B":i.default.clear("cliqz-anti-phishing"),i.default.clear("cliqz-anti-phishing-enabled");break;case"1071_A":case"1071_B":i.default.clear("browser.privatebrowsing.apt","");break;case"1072_A":case"1072_B":i.default.clear("grFeatureEnabled");break;case"1074_A":case"1074_B":i.default.clear("cliqz-adb-abtest");break;case"1075_A":case"1075_B":i.default.clear("freshtabFeedback");break;case"1076_A":case"1076_B":i.default.clear("history.timeouts");break;case"1077_A":case"1077_B":i.default.clear("languageDedup");break;case"1078_A":case"1078_B":i.default.set("modules.anolysis.enabled",!1);break;case"1079_A":case"1079_B":i.default.clear("controlCenter");break;case"1080_A":case"1080_B":i.default.clear("freshtabNewBrand");break;case"1081_A":case"1081_B":i.default.clear("attrackLogBreakage");break;case"1082_A":case"1082_B":i.default.clear("experimentalCookieDroppingDetection");break;case"1084_B":i.default.clear("attrackOverrideUserAgent");break;case"1085_A":case"1085_B":i.default.clear("extOnboardShareLocation");break;case"1086_A":case"1086_B":i.default.clear("checkLogos");break;case"1087_B":i.default.set("modules.context-search.enabled",!1);break;case"1088_A":case"1088_B":i.default.clear("offers2FeatureEnabled");break;case"1091_A":i.default.clear("dropDownStyle");break;case"1092_A":case"1092_B":i.default.clear("extOnboardVideoDownloader");break;case"1093_A":case"1093_B":i.default.clear("extOnboardCliqzGhostery");break;case"1094_A":case"1094_B":i.default.clear("ff-experiment");break;case"1095_A":case"1095_B":i.default.clear("connect");break;case"1096_A":case"1096_B":i.default.clear("extOnboardCliqzConnect");break;case"1097_A":case"1097_B":i.default.clear("dropdownAdCampaignPosition");break;case"1098_A":case"1098_B":case"1098_C":!0===i.default.get("cliqz-adb-onboarding-ab",!1)&&i.default.set("cliqz-adb",0),i.default.clear("cliqz-adb-onboarding-ab"),i.default.clear("cliqz-adb-onboarding-message");break;case"1099_A":case"1099_B":i.default.clear("attrackCookieTrustReferers");break;case"1100_A":case"1100_B":i.default.clear("offersHubEnableSwitch");break;case"1101_A":case"1101_B":i.default.clear("modules.history.enabled");break;case"1102_A":case"1102_B":case"1102_C":case"1102_D":i.default.set("modules.antitracking-blocker.enabled",!1),i.default.clear("antitrackingBlocklist");break;case"1103_A":case"1103_B":case"1103_C":i.default.clear("offersDropdownAdPosition");break;case"1104_A":case"1104_B":case"1104_C":i.default.clear("offersHubTrigger");break;case"1105_A":case"1105_B":i.default.clear("offersBrowserPanelEnableSwitch");break;case"1106_A":case"1106_B":case"1106_C":i.default.clear("greenads");break;case"1107_A":case"1107_B":i.default.clear("MarketAnalysisEnabled");break;case"1108_A":case"1108_B":i.default.clear("extOnboardNewSearchUI");break;case"1109_A":case"1109_B":i.default.clear("offersDropdownSwitch");break;case"1110_A":case"1110_B":i.default.clear("cliqzTabOffersNotification");break;case"1111_A":case"1111_B":i.default.set("modules.history-analyzer.enabled",!1);break;case"1112_A":case"1112_B":i.default.clear("experiment_svm");break;case"1114_A":case"1114_B":case"1114_C":"Cliqz"===(0,a.getDefaultEngine)().name&&(0,a.revertToOriginalEngine)(),i.default.clear("serp_test");break;case"1115_A":case"1115_B":u.isCliqzBrowser&&i.default.clear("network.http.referer.XOriginTrimmingPolicy");break;default:r=!1}if(r){const r={type:"abtest",action:"leave",name:e,disable:t};return n.default.telemetry(r),!0}return!1},disable(e){if(i.default.has(h.PREF)){const t=JSON.parse(i.default.get(h.PREF));t[e]&&h.leave(e,!0)&&(t[e].disabled=!0,i.default.set(h.PREF,JSON.stringify(t)))}}};t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={init(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1181));t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(47)),i=c(r(32)),s=c(r(11)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(110)),o=c(r(1182)),u=c(r(1180));function c(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.window=e.window,this.actions={addClassToWindow:this.addClassToWindow.bind(this),removeClassFromWindow:this.removeClassFromWindow.bind(this)}}init(){this.window.CLIQZEnvironment=n.default.environment,this.window.CliqzUtils=n.default,this.window.CliqzEvents=i.default,this.window.CliqzABTests=u.default,this.window.CliqzHistoryManager=o.default,this.window.CLIQZ.prefs=s.default,this.window.CLIQZ.i18n=a}unload(){delete this.window.CLIQZEnvironment,delete this.window.CliqzUtils,delete this.window.CliqzEvents,delete this.window.CliqzABTests,delete this.window.CliqzHistoryManager,delete this.window.CLIQZ.prefs,delete this.window.CLIQZ.i18n}addClassToWindow(){const e=this.window.document.getElementById("main-window");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(t=>{e.classList.add(t)})}removeClassFromWindow(){const e=this.window.document.getElementById("main-window");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(t=>{e.classList.remove(t)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pinTab=function(e,t){let r;r="number"==typeof t.index?e.gBrowser.tabs[t.index]:t;r.pinned||e.gBrowser.pinTab(r)},t.queryActiveTabs=function(e){if(!e.gBrowser)return[];const t=e.gBrowser.selectedBrowser;return Array.prototype.map.call(e.gBrowser.tabs,(e,r)=>({index:r,url:e.linkedBrowser.currentURI.spec,isCurrent:t===e.linkedBrowser,isPinned:e.pinned}))},t.getTabsWithUrl=function(e,t){return Array.prototype.filter.call(e.gBrowser.tabs,e=>e.linkedBrowser.currentURI.spec===t&&e)},t.closeTab=function(e,t){e.gBrowser.removeTab(t)},t.getCurrentTabId=function(e){return e.gBrowser.selectedBrowser&&e.gBrowser.selectedBrowser.outerWindowID},t.updateTabById=function(e,t){let r=t.url;(0,n.mapWindows)(e=>e).some(t=>{const n=function(e,t){const r=[...e.gBrowser.tabs].find(e=>e.linkedBrowser.outerWindowID===t);if(!r)return null;return r.linkedBrowser}(t,e);return!!n&&(n.loadURI(r),!0)})};var n=r(1184)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deflate=t.inflate=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(439));const i=n.default.inflate.bind(n.default),s=n.default.deflate.bind(n.default);t.inflate=i,t.deflate=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="undefined"!=typeof TextDecoder?TextDecoder:void 0},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="undefined"!=typeof TextEncoder?TextEncoder:void 0},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(421));t.default=class{constructor(e){this.key=["resource-loader",...e].join(":")}load(){return n.default.get(this.key)}save(e){return n.default.set(this.key,e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=`${n.default.baseURL}core/logo-database.json`;return(0,i.fetch)(e).then(e=>e.json())};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(22)),i=r(251)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.service=void 0;t.service=(()=>{var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}(function*(){let e,t=1521469421408;return e=yield(0,n.default)(t,{updateVersion:function(e){t=e},updateDatabase:function(t){e=t}}),{getLogoDetails:function(r){const n=r.name,s=n.replace(/[-]/g,""),a=function(e,t){const r=e.lastIndexOf(n);return-1!==`${e.substr(0,r)}$${e.substr(r+n.length)}`.indexOf(t)};let o={};const u=e.domains;if(0===n.length)return o;if("IP"===n)o={text:"IP",backgroundColor:"9077e3"};else if(u[n])for(let e=0,s=u[n].length;e<s;e+=1){const s=u[n][e];if(a(r.host,s.r)){o={backgroundColor:s.b?s.b:null,backgroundImage:s.l?`url(${i.default.settings.BACKGROUND_IMAGE_URL}${t}/logos/${n}/${s.r}.svg)`:"",text:s.t,color:s.c?"":"#fff",brandTxtColor:s.b?s.b:"2d2d2d"};break}}o.text=o.text||`${s[0]||""}${s[1]||""}`.toLowerCase(),o.backgroundColor=o.backgroundColor||e.palette[n.split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%e.palette.length],o.brandTxtColor=o.brandTxtColor||"2d2d2d";const c=e.palette.indexOf(o.backgroundColor),l=e.buttons&&-1!==c&&e.buttons[c]?e.buttons[c]:10;return o.buttonsClass=`cliqz-brands-button-${l}`,o.style=`background-color: #${o.backgroundColor};color:${o.color||"#fff"};`,o.backgroundImage&&(o.style+=`background-image:${o.backgroundImage}; text-indent: -10em;`),o}}});return function(){return e.apply(this,arguments)}})();t.default=function(){return s.default.service("logos")};var n=a(r(1190)),i=a(r(22)),s=a(r(31));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55),i=_(r(22)),s=_(r(11)),a=_(r(24)),o=_(r(47)),u=_(r(426)),c=_(r(32)),l=r(52),d=r(249),h=r(1191),f=r(177),p=r(176),m=_(r(110));function _(e){return e&&e.__esModule?e:{default:e}}const g={utils:()=>o.default.init(),telemetry:f.service,logos:h.service,"cliqz-config":()=>{const e=new Set(["backends","location","location.city","location.granular","logoVersion","png_logoVersion","ts"]);if(l.isOnionMode)return Promise.resolve();const t=()=>(0,n.fetch)(i.default.settings.CONFIG_PROVIDER).then(e=>e.json()).then(t=>{Object.keys(t).forEach(r=>{if(!e.has(r))return;let n=t[r];"object"==typeof n&&(n=JSON.stringify(t[r])),s.default.set(`config_${r}`,n)}),o.default.setDefaultCountryIndex(),c.default.pub("cliqz-config:update")}).catch(e=>a.default.log("cliqz-config update failed",e));return t().then(()=>setInterval(t,36e5))},session:()=>{if(!s.default.has("session")){const e=[(0,u.default)(18),(0,u.default)(6,"0123456789"),"|",o.default.getServerDay(),"|",i.default.settings.channel||"NONE"].join("");if(s.default.set("session",e),s.default.set("install_date",e.split("|")[1]),s.default.has("freshtab.state")||s.default.set("freshtab.state",!0),l.isCliqzBrowser){const e=c.default.subscribe("cliqz-config:update",()=>{if(e.unsubscribe(),s.default.has("serp_test"))return;if("de"!==s.default.get("config_location")||"de"!==m.default.PLATFORM_LANGUAGE)return;const t=Math.random();t<.33?s.default.set("serp_test","A"):t<.66?(s.default.set("serp_test","B"),(0,d.isSearchServiceReady)().then(()=>(0,d.addCustomSearchEngine)("https://suche.cliqz.com/opensearch.xml",!0))):(s.default.set("serp_test","C"),(0,d.isSearchServiceReady)().then(()=>(0,d.addCustomSearchEngine)("https://search.cliqz.com/opensearch.xml",!0)))})}}},"search-services":()=>(0,d.isSearchServiceReady)(),domainInfo:p.service};"production"!==i.default.environment&&(g["test-helpers"]=function e(){e.prefs=s.default}),t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryCliqz=function(){},t.openLink=function(e){n.chrome.tabs.create({url:e})},t.openTab=function(e){n.chrome.tabs.create({url:e})},t.getOpenTabs=function(){},t.getReminders=function(){},t.importBookmarks=function(){},t.callNumber=function(){},t.openMap=function(e){n.chrome.tabs.create({url:e})},t.hideKeyboard=function(){};var n=r(61)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var r,n=String(e),i="",s=!!t&&!!t.extended,a=!!t&&!!t.globstar,o=!1,u=t&&"string"==typeof t.flags?t.flags:"",c=0,l=n.length;c<l;c++)switch(r=n[c]){case"\\":case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":i+="\\"+r;break;case"?":if(s){i+=".";break}case"[":case"]":if(s){i+=r;break}case"{":if(s){o=!0,i+="(";break}case"}":if(s){o=!1,i+=")";break}case",":if(o){i+="|";break}i+="\\"+r;break;case"*":for(var d=n[c-1],h=1;"*"===n[c+1];)h++,c++;var f=n[c+1];if(a){var p=h>1&&("/"===d||void 0===d)&&("/"===f||void 0===f);p?(i+="((?:[^/]*(?:/|$))*)",c++):i+="([^/]*)"}else i+=".*";break;default:i+=r}u&&~u.indexOf("g")||(i="^"+i+"$");return new RegExp(i,u)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHROME_MSG_SOURCE=void 0,t.registerContentScript=function(e,t){i[e]=i[e]||[],i[e].push(t)},t.runContentScripts=function(e,t,r){const s=e.location.href;Object.keys(i).filter(e=>{const t=(0,n.default)(e);return t.test(s)}).forEach(n=>{i[n].forEach(n=>{try{n(e,t,r)}catch(t){e.console.error(`CLIQZ content-script failed: ${t} ${t.stack}`)}})})},t.isCliqzContentScriptMsg=function(e){return e.source&&e.source===s};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1194));const i={};const s=t.CHROME_MSG_SOURCE="cliqz-content-script"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e){return e&&e.__esModule?e:{default:e}}(r(32)),s=r(61),a=r(1195);t.default=class{constructor(e){this.dispatch=e}init(){s.chrome.webNavigation.onCommitted.addListener(e=>{let t=e.tabId,r=e.url,n=e.frameId,a=e.transitionType;0===n&&s.chrome.tabs.get(t,e=>{if(s.chrome.runtime.lastError)return;const o=e.incognito;i.default.pub("content:location-change",{url:r,frameId:n,transitionType:a,isPrivate:o,windowId:t,windowTreeInformation:{}})})}),s.chrome.runtime.onMessage.addListener((e,t,r)=>{if(!(0,a.isCliqzContentScriptMsg)(e))return!1;let i={sender:t,sendResponse:e=>{r({response:e})}};return t.tab&&(i.windowId=t.tab.id),i=e.payload?n({},e,i):n({payload:e},i),this.dispatch({data:i})})}unload(){}broadcast(e,t){let r;var i=t=n({},t,{source:a.CHROME_MSG_SOURCE});const o=i.payload,u=i.module;if(r=o&&o.response?{response:o.response,module:u}:o?{payload:o,module:u}:t,"cliqz:core"===e){const e={};t.url&&(e.url=t.url),s.chrome.tabs.query(e,e=>{e.forEach(e=>s.chrome.tabs.sendMessage(e.id,t))})}else if(e){const i=t.windowId||e.split("-")[1];r.payload&&!u&&(r=r.payload),s.chrome.tabs.sendMessage(Number(i),n({},r,{type:Object.prototype.hasOwnProperty.call(r,"response")?"response":"request"}))}else s.chrome.runtime.sendMessage(t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={init(){},stateToQueryString:()=>"&lang=de,en",addLocale(){}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const r=r=>{const n=r.map(t=>({comment:t.title,value:t.url,query:e}));t({query:e,results:n,ready:!0})},i=n.chrome.history.search({text:e},r);i&&i.then&&i.then(r)};var n=r(61)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTED_LANGS=t.getMessage=t.IMPLEMENTS_GET_MESSAGE=t.LOCALE_PATH=t.locale=t.loadTranslation=void 0;var n=r(61);t.loadTranslation=(()=>{}),t.locale={},t.LOCALE_PATH=null,t.IMPLEMENTS_GET_MESSAGE=!0,t.getMessage=n.chrome.i18n.getMessage,t.SUPPORTED_LANGS=["de","en","fr"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.maxSize=e,this.reset=(()=>{this.cache=new Map,this.head=null,this.tail=null,this.size=0}),this.reset()}has(e){return this.cache.has(e)}get(e){const t=this.cache.get(e);if(t)return this._touch(t),t.value}set(e,t){let r=this.cache.get(e);r?(r.value=t,this._touch(r)):(r=this._newNode(e,t),this.size>=this.maxSize&&(this.cache.delete(this.tail.key),this._remove(this.tail)),this.cache.set(e,r),this._pushFront(r))}_newNode(e,t){return{prev:null,next:null,key:e,value:t}}_touch(e){this._remove(e),this._pushFront(e)}_remove(e){e&&(null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this.size-=1)}_pushFront(e){e&&(e.prev=null,e.next=this.head,null!==this.head&&(this.head.prev=e),this.head=e,null===this.tail&&(this.tail=e),this.size+=1)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isURI=function(){return!1},t.fixURL=function(e){return e},t.default=function(e,t){return e===t};t.URI=class{}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCliqzAction=function(e){return e.match(/^cliqz-actions,/)},t.equals=function(e,t){if(!e||!t)return!1;if(e===t)return!0;try{if(decodeURI(e)===decodeURI(t))return!0}catch(e){return!1}return!1},t.cleanMozillaActions=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t;if(0===t.indexOf("moz-action:")){const n=t.match(/^moz-action:([^,]+),(.*)$/);e=n[1],r=n[2];try{const e=JSON.parse(r).url;e&&(r=decodeURIComponent(e))}catch(e){}}return[e,r]},t.urlStripProtocol=function(e){let t=e.toLowerCase();const r=["https://","http://","www2.","www.","mobile.","mobil.","m."];for(let e=0;e<r.length;e+=1){const n=r[e];t.startsWith(n)&&(t=t.substr(n.length))}"/"===t[t.length-1]&&(t=t.substr(0,t.length-1));return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSearchEngine=function(){},t.isSearchServiceReady=function(){return Promise.resolve()},t.getDefaultEngine=function(){return{}},t.revertToOriginalEngine=function(){},t.addCustomSearchEngine=function(){},t.getDefaultSearchEngine=function(){var e=!0,t=!1,r=void 0;try{for(var n,i=a()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){const e=n.value;if(e.default)return e}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}return},t.getSearchEngines=a,t.getEngineByName=function(e){return s.find(t=>t.name===e)},t.setDefaultSearchEngine=function(e){(new i.default).setObject("defaultSearchEngine",e)},t.restoreHiddenSearchEngines=function(){},t.addEngineWithDetails=function(){},t.updateAlias=function(){};var n=r(82),i=function(e){return e&&e.__esModule?e:{default:e}}(r(433));const s=[{name:"Cliqz",alias:"",default:!0,icon:"",searchForm:"https://search.cliqz.com/#{searchTerms}",suggestionUrl:"",base_url:"https://search.cliqz.com/#",prefix:"",code:3}];function a(){return s.map(e=>(e.getSubmissionForQuery=(t=>e.searchForm.replace("{searchTerms}",t)),e.getSuggestionUrlForQuery=(t=>e.suggestionUrl.replace("{searchTerms}",t)),e.urlDetails=(0,n.getDetailsFromUrl)(e.searchForm),e))}t.default={}},function(e,t,r){"use strict";var n=r(429);e.exports=function(e,t){if(e.hasTld(t))return!0;var r=n(t);return null!==r&&e.hasTld(r)}},function(e,t,r){"use strict";e.exports=function(e){return"string"==typeof e&&(0!==e.length&&(function(e){for(var t=!1,r=0;r<e.length;r+=1){var n=e.charCodeAt(r);if(58===n)t=!0;else if(!(n>=48&&n<=57||n>=97&&n<=102))return!1}return t}(e)||function(e){for(var t=0,r=0;r<e.length;r+=1){var n=e.charCodeAt(r);if(46===n)t+=1;else if(n<48||n>57)return!1}return 3===t&&"."!==e[0]&&"."!==e[e.length-1]}(e)))}},function(e,t,r){"use strict";e.exports=function(e,t){return null===t?null:e.substr(0,e.length-t.length-1)}},function(e,t,r){"use strict";var n=r(429);e.exports=function(e,t){if(e.hasTld(t))return t;var r=e.suffixLookup(t);return null===r?n(t):r}},function(e,t,r){"use strict";function n(e,t){return!!function(e,t){return e.lastIndexOf(t)===e.length-t.length}(e,t)&&(e.length===t.length||"."===e[e.length-t.length-1])}e.exports=function(e,t,r){for(var i=0;i<e.length;i+=1){var s=e[i];if(n(r,s))return s}return null===t?null:t.length===r.length?null:function(e,t){var r=e.length-t.length-2,n=e.lastIndexOf(".",r);return-1===n?e:e.substr(n+1)}(r,t)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?s(a(e),function(a){var o=encodeURIComponent(n(a))+r;return i(e[a])?s(e[a],function(e){return o+encodeURIComponent(n(e))}).join(t):o+encodeURIComponent(n(e[a]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,s){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var d,h,f,p,m=e[l].replace(o,"%20"),_=m.indexOf(r);_>=0?(d=m.substr(0,_),h=m.substr(_+1)):(d=m,h=""),f=decodeURIComponent(d),p=decodeURIComponent(h),n(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){var n=r(202),i=r(430),s=/^(([a-z][a-z0-9+.-]*)?:)?\/\//;function a(e){return"."===e[e.length-1]?e.substr(0,e.length-1):e}e.exports=function(e){if(i(e))return a(e);var t=e;"string"!=typeof t&&(t=""+t);var r=function(e){return e.length>0&&(e.charCodeAt(0)<=32||e.charCodeAt(e.length-1)<=32)}(t);r&&(t=t.trim());var o=function(e){for(var t=0;t<e.length;t+=1){var r=e.charCodeAt(t);if(r>=65&&r<=90)return!0}return!1}(t);if(o&&(t=t.toLowerCase()),(o||r)&&i(t))return a(t);s.test(t)||(t="//"+t);var u=n.parse(t,null,!0);return u.hostname?a(u.hostname):null}},function(e){e.exports={exceptions:{ck:{www:{$:0}},jp:{kawasaki:{city:{$:0}},kitakyushu:{city:{$:0}},kobe:{city:{$:0}},nagoya:{city:{$:0}},sapporo:{city:{$:0}},sendai:{city:{$:0}},yokohama:{city:{$:0}}}},rules:{ac:{$:0,com:{$:0},edu:{$:0},gov:{$:0},net:{$:0},mil:{$:0},org:{$:0}},ad:{$:0,nom:{$:0}},ae:{$:0,co:{$:0},net:{$:0},org:{$:0},sch:{$:0},ac:{$:0},gov:{$:0},mil:{$:0},blogspot:{$:0},nom:{$:0}},aero:{$:0,"accident-investigation":{$:0},"accident-prevention":{$:0},aerobatic:{$:0},aeroclub:{$:0},aerodrome:{$:0},agents:{$:0},aircraft:{$:0},airline:{$:0},airport:{$:0},"air-surveillance":{$:0},airtraffic:{$:0},"air-traffic-control":{$:0},ambulance:{$:0},amusement:{$:0},association:{$:0},author:{$:0},ballooning:{$:0},broker:{$:0},caa:{$:0},cargo:{$:0},catering:{$:0},certification:{$:0},championship:{$:0},charter:{$:0},civilaviation:{$:0},club:{$:0},conference:{$:0},consultant:{$:0},consulting:{$:0},control:{$:0},council:{$:0},crew:{$:0},design:{$:0},dgca:{$:0},educator:{$:0},emergency:{$:0},engine:{$:0},engineer:{$:0},entertainment:{$:0},equipment:{$:0},exchange:{$:0},express:{$:0},federation:{$:0},flight:{$:0},freight:{$:0},fuel:{$:0},gliding:{$:0},government:{$:0},groundhandling:{$:0},group:{$:0},hanggliding:{$:0},homebuilt:{$:0},insurance:{$:0},journal:{$:0},journalist:{$:0},leasing:{$:0},logistics:{$:0},magazine:{$:0},maintenance:{$:0},media:{$:0},microlight:{$:0},modelling:{$:0},navigation:{$:0},parachuting:{$:0},paragliding:{$:0},"passenger-association":{$:0},pilot:{$:0},press:{$:0},production:{$:0},recreation:{$:0},repbody:{$:0},res:{$:0},research:{$:0},rotorcraft:{$:0},safety:{$:0},scientist:{$:0},services:{$:0},show:{$:0},skydiving:{$:0},software:{$:0},student:{$:0},trader:{$:0},trading:{$:0},trainer:{$:0},union:{$:0},workinggroup:{$:0},works:{$:0}},af:{$:0,gov:{$:0},com:{$:0},org:{$:0},net:{$:0},edu:{$:0}},ag:{$:0,com:{$:0},org:{$:0},net:{$:0},co:{$:0},nom:{$:0}},ai:{$:0,off:{$:0},com:{$:0},net:{$:0},org:{$:0},nom:{$:0}},al:{$:0,com:{$:0},edu:{$:0},gov:{$:0},mil:{$:0},net:{$:0},org:{$:0},blogspot:{$:0},nom:{$:0}},am:{$:0,blogspot:{$:0}},ao:{$:0,ed:{$:0},gv:{$:0},og:{$:0},co:{$:0},pb:{$:0},it:{$:0}},aq:{$:0},ar:{$:0,com:{$:0,blogspot:{$:0}},edu:{$:0},gob:{$:0},gov:{$:0},int:{$:0},mil:{$:0},musica:{$:0},net:{$:0},org:{$:0},tur:{$:0}},arpa:{$:0,e164:{$:0},"in-addr":{$:0},ip6:{$:0},iris:{$:0},uri:{$:0},urn:{$:0}},as:{$:0,gov:{$:0}},asia:{$:0,cloudns:{$:0}},at:{$:0,ac:{$:0},co:{$:0,blogspot:{$:0}},gv:{$:0},or:{$:0},futurecms:{"*":{$:0}},futurehosting:{$:0},futuremailing:{$:0},ortsinfo:{ex:{"*":{$:0}},kunden:{"*":{$:0}}},biz:{$:0},info:{$:0},priv:{$:0},"12hp":{$:0},"2ix":{$:0},"4lima":{$:0},"lima-city":{$:0}},au:{$:0,com:{$:0,blogspot:{$:0}},net:{$:0},org:{$:0},edu:{$:0,act:{$:0},nsw:{$:0},nt:{$:0},qld:{$:0},sa:{$:0},tas:{$:0},vic:{$:0},wa:{$:0}},gov:{$:0,qld:{$:0},sa:{$:0},tas:{$:0},vic:{$:0},wa:{$:0}},asn:{$:0},id:{$:0},info:{$:0},conf:{$:0},oz:{$:0},act:{$:0},nsw:{$:0},nt:{$:0},qld:{$:0},sa:{$:0},tas:{$:0},vic:{$:0},wa:{$:0}},aw:{$:0,com:{$:0}},ax:{$:0},az:{$:0,com:{$:0},net:{$:0},int:{$:0},gov:{$:0},org:{$:0},edu:{$:0},info:{$:0},pp:{$:0},mil:{$:0},name:{$:0},pro:{$:0},biz:{$:0}},ba:{$:0,com:{$:0},edu:{$:0},gov:{$:0},mil:{$:0},net:{$:0},org:{$:0},blogspot:{$:0}},bb:{$:0,biz:{$:0},co:{$:0},com:{$:0},edu:{$:0},gov:{$:0},info:{$:0},net:{$:0},org:{$:0},store:{$:0},tv:{$:0}},bd:{"*":{$:0}},be:{$:0,ac:{$:0},webhosting:{$:0},blogspot:{$:0},transurl:{"*":{$:0}}},bf:{$:0,gov:{$:0}},bg:{0:{$:0},1:{$:0},2:{$:0},3:{$:0},4:{$:0},5:{$:0},6:{$:0},7:{$:0},8:{$:0},9:{$:0},$:0,a:{$:0},b:{$:0},c:{$:0},d:{$:0},e:{$:0},f:{$:0},g:{$:0},h:{$:0},i:{$:0},j:{$:0},k:{$:0},l:{$:0},m:{$:0},n:{$:0},o:{$:0},p:{$:0},q:{$:0},r:{$:0},s:{$:0},t:{$:0},u:{$:0},v:{$:0},w:{$:0},x:{$:0},y:{$:0},z:{$:0},blogspot:{$:0},barsy:{$:0}},bh:{$:0,com:{$:0},edu:{$:0},net:{$:0},org:{$:0},gov:{$:0}},bi:{$:0,co:{$:0},com:{$:0},edu:{$:0},or:{$:0},org:{$:0}},biz:{$:0,cloudns:{$:0},dyndns:{$:0},"for-better":{$:0},"for-more":{$:0},"for-some":{$:0},"for-the":{$:0},selfip:{$:0},webhop:{$:0},mmafan:{$:0},myftp:{$:0},"no-ip":{$:0},dscloud:{$:0}},bj:{$:0,asso:{$:0},barreau:{$:0},gouv:{$:0},blogspot:{$:0}},bm:{$:0,com:{$:0},edu:{$:0},gov:{$:0},net:{$:0},org:{$:0}},bn:{"*":{$:0}},bo:{$:0,com:{$:0},edu:{$:0},gob:{$:0},int:{$:0},org:{$:0},net:{$:0},mil:{$:0},tv:{$:0},web:{$:0},academia:{$:0},agro:{$:0},arte:{$:0},blog:{$:0},bolivia:{$:0},ciencia:{$:0},cooperativa:{$:0},democracia:{$:0},deporte:{$:0},ecologia:{$:0},economia:{$:0},empresa:{$:0},indigena:{$:0},industria:{$:0},info:{$:0},medicina:{$:0},movimiento:{$:0},musica:{$:0},natural:{$:0},nombre:{$:0},noticias:{$:0},patria:{$:0},politica:{$:0},profesional:{$:0},plurinacional:{$:0},pueblo:{$:0},revista:{$:0},salud:{$:0},tecnologia:{$:0},tksat:{$:0},transporte:{$:0},wiki:{$:0}},br:{$:0,"9guacu":{$:0},abc:{$:0},adm:{$:0},adv:{$:0},agr:{$:0},aju:{$:0},am:{$:0},anani:{$:0},aparecida:{$:0},arq:{$:0},art:{$:0},ato:{$:0},b:{$:0},belem:{$:0},bhz:{$:0},bio:{$:0},blog:{$:0},bmd:{$:0},boavista:{$:0},bsb:{$:0},campinagrande:{$:0},campinas:{$:0},caxias:{$:0},cim:{$:0},cng:{$:0},cnt:{$:0},com:{$:0,blogspot:{$:0}},contagem:{$:0},coop:{$:0},cri:{$:0},cuiaba:{$:0},curitiba:{$:0},def:{$:0},ecn:{$:0},eco:{$:0},edu:{$:0},emp:{$:0},eng:{$:0},esp:{$:0},etc:{$:0},eti:{$:0},far:{$:0},feira:{$:0},flog:{$:0},floripa:{$:0},fm:{$:0},fnd:{$:0},fortal:{$:0},fot:{$:0},foz:{$:0},fst:{$:0},g12:{$:0},ggf:{$:0},goiania:{$:0},gov:{$:0,ac:{$:0},al:{$:0},am:{$:0},ap:{$:0},ba:{$:0},ce:{$:0},df:{$:0},es:{$:0},go:{$:0},ma:{$:0},mg:{$:0},ms:{$:0},mt:{$:0},pa:{$:0},pb:{$:0},pe:{$:0},pi:{$:0},pr:{$:0},rj:{$:0},rn:{$:0},ro:{$:0},rr:{$:0},rs:{$:0},sc:{$:0},se:{$:0},sp:{$:0},to:{$:0}},gru:{$:0},imb:{$:0},ind:{$:0},inf:{$:0},jab:{$:0},jampa:{$:0},jdf:{$:0},joinville:{$:0},jor:{$:0},jus:{$:0},leg:{$:0,ac:{$:0},al:{$:0},am:{$:0},ap:{$:0},ba:{$:0},ce:{$:0},df:{$:0},es:{$:0},go:{$:0},ma:{$:0},mg:{$:0},ms:{$:0},mt:{$:0},pa:{$:0},pb:{$:0},pe:{$:0},pi:{$:0},pr:{$:0},rj:{$:0},rn:{$:0},ro:{$:0},rr:{$:0},rs:{$:0},sc:{$:0},se:{$:0},sp:{$:0},to:{$:0}},lel:{$:0},londrina:{$:0},macapa:{$:0},maceio:{$:0},manaus:{$:0},maringa:{$:0},mat:{$:0},med:{$:0},mil:{$:0},morena:{$:0},mp:{$:0},mus:{$:0},natal:{$:0},net:{$:0},niteroi:{$:0},nom:{"*":{$:0}},not:{$:0},ntr:{$:0},odo:{$:0},org:{$:0},osasco:{$:0},palmas:{$:0},poa:{$:0},ppg:{$:0},pro:{$:0},psc:{$:0},psi:{$:0},pvh:{$:0},qsl:{$:0},radio:{$:0},rec:{$:0},recife:{$:0},ribeirao:{$:0},rio:{$:0},riobranco:{$:0},riopreto:{$:0},salvador:{$:0},sampa:{$:0},santamaria:{$:0},santoandre:{$:0},saobernardo:{$:0},saogonca:{$:0},sjc:{$:0},slg:{$:0},slz:{$:0},sorocaba:{$:0},srv:{$:0},taxi:{$:0},teo:{$:0},the:{$:0},tmp:{$:0},trd:{$:0},tur:{$:0},tv:{$:0},udi:{$:0},vet:{$:0},vix:{$:0},vlog:{$:0},wiki:{$:0},zlg:{$:0}},bs:{$:0,com:{$:0},net:{$:0},org:{$:0},edu:{$:0},gov:{$:0},we:{$:0}},bt:{$:0,com:{$:0},edu:{$:0},gov:{$:0},net:{$:0},org:{$:0}},bv:{$:0},bw:{$:0,co:{$:0},org:{$:0}},by:{$:0,gov:{$:0},mil:{$:0},com:{$:0,blogspot:{$:0}},of:{$:0},nym:{$:0}},bz:{$:0,com:{$:0},net:{$:0},org:{$:0},edu:{$:0},gov:{$:0},za:{$:0},nym:{$:0}},ca:{$:0,ab:{$:0},bc:{$:0},mb:{$:0},nb:{$:0},nf:{$:0},nl:{$:0},ns:{$:0},nt:{$:0},nu:{$:0},on:{$:0},pe:{$:0},qc:{$:0},sk:{$:0},yk:{$:0},gc:{$:0},"1password":{$:0},awdev:{"*":{$:0}},co:{$:0},blogspot:{$:0},"no-ip":{$:0}},cat:{$:0},cc:{$:0,cloudns:{$:0},ftpaccess:{$:0},"game-server":{$:0},myphotos:{$:0},scrapping:{$:0},twmail:{$:0},fantasyleague:{$:0}},cd:{$:0,gov:{$:0}},cf:{$:0,blogspot:{$:0}},cg:{$:0},ch:{$:0,square7:{$:0},blogspot:{$:0},gotdns:{$:0},"12hp":{$:0},"2ix":{$:0},"4lima":{$:0},"lima-city":{$:0}},ci:{$:0,org:{$:0},or:{$:0},com:{$:0},co:{$:0},edu:{$:0},ed:{$:0},ac:{$:0},net:{$:0},go:{$:0},asso:{$:0},"xn--aroport-bya":{$:0},int:{$:0},presse:{$:0},md:{$:0},gouv:{$:0}},ck:{"*":{$:0}},cl:{$:0,gov:{$:0},gob:{$:0},co:{$:0},mil:{$:0},blogspot:{$:0},nom:{$:0}},cm:{$:0,co:{$:0},com:{$:0},gov:{$:0},net:{$:0}},cn:{$:0,ac:{$:0},com:{$:0,amazonaws:{compute:{"*":{$:0}},eb:{"cn-north-1":{$:0}},elb:{"*":{$:0}},"cn-north-1":{s3:{$:0}}}},edu:{$:0},gov:{$:0},net:{$:0},org:{$:0},mil:{$:0},"xn--55qx5d":{$:0},"xn--io0a7i":{$:0},"xn--od0alg":{$:0},ah:{$:0},bj:{$:0},cq:{$:0},fj:{$:0},gd:{$:0},gs:{$:0},gz:{$:0},gx:{$:0},ha:{$:0},hb:{$:0},he:{$:0},hi:{$:0},hl:{$:0},hn:{$:0},jl:{$:0},js:{$:0},jx:{$:0},ln:{$:0},nm:{$:0},nx:{$:0},qh:{$:0},sc:{$:0},sd:{$:0},sh:{$:0},sn:{$:0},sx:{$:0},tj:{$:0},xj:{$:0},xz:{$:0},yn:{$:0},zj:{$:0},hk:{$:0},mo:{$:0},tw:{$:0}},co:{$:0,arts:{$:0},com:{$:0,blogspot:{$:0}},edu:{$:0},firm:{$:0},gov:{$:0},info:{$:0},int:{$:0},mil:{$:0},net:{$:0},nom:{$:0},org:{$:0},rec:{$:0},web:{$:0},nodum:{$:0}},com:{$:0,"1password":{$:0},amazonaws:{compute:{"*":{$:0}},"compute-1":{"*":{$:0}},"us-east-1":{$:0,dualstack:{s3:{$:0}}},elb:{"*":{$:0}},s3:{$:0},"s3-ap-northeast-1":{$:0},"s3-ap-northeast-2":{$:0},"s3-ap-south-1":{$:0},"s3-ap-southeast-1":{$:0},"s3-ap-southeast-2":{$:0},"s3-ca-central-1":{$:0},"s3-eu-central-1":{$:0},"s3-eu-west-1":{$:0},"s3-eu-west-2":{$:0},"s3-eu-west-3":{$:0},"s3-external-1":{$:0},"s3-fips-us-gov-west-1":{$:0},"s3-sa-east-1":{$:0},"s3-us-gov-west-1":{$:0},"s3-us-east-2":{$:0},"s3-us-west-1":{$:0},"s3-us-west-2":{$:0},"ap-northeast-2":{s3:{$:0},dualstack:{s3:{$:0}},"s3-website":{$:0}},"ap-south-1":{s3:{$:0},dualstack:{s3:{$:0}},"s3-website":{$:0}},"ca-central-1":{s3:{$:0},dualstack:{s3:{$:0}},"s3-website":{$:0}},"eu-central-1":{s3:{$:0},dualstack:{s3:{$:0}},"s3-website":{$:0}},"eu-west-2":{s3:{$:0},dualstack:{s3:{$:0}},"s3-website":{$:0}},"eu-west-3":{s3:{$:0},dualstack:{s3:{$:0}},"s3-website":{$:0}},"us-east-2":{s3:{$:0},dualstack:{s3:{$:0}},"s3-website":{$:0}},"ap-northeast-1":{dualstack:{s3:{$:0}}},"ap-southeast-1":{dualstack:{s3:{$:0}}},"ap-southeast-2":{dualstack:{s3:{$:0}}},"eu-west-1":{dualstack:{s3:{$:0}}},"sa-east-1":{dualstack:{s3:{$:0}}},"s3-website-us-east-1":{$:0},"s3-website-us-west-1":{$:0},"s3-website-us-west-2":{$:0},"s3-website-ap-northeast-1":{$:0},"s3-website-ap-southeast-1":{$:0},"s3-website-ap-southeast-2":{$:0},"s3-website-eu-west-1":{$:0},"s3-website-sa-east-1":{$:0}},elasticbeanstalk:{$:0,"ap-northeast-1":{$:0},"ap-northeast-2":{$:0},"ap-south-1":{$:0},"ap-southeast-1":{$:0},"ap-southeast-2":{$:0},"ca-central-1":{$:0},"eu-central-1":{$:0},"eu-west-1":{$:0},"eu-west-2":{$:0},"eu-west-3":{$:0},"sa-east-1":{$:0},"us-east-1":{$:0},"us-east-2":{$:0},"us-gov-west-1":{$:0},"us-west-1":{$:0},"us-west-2":{$:0}},"on-aptible":{$:0},myasustor:{$:0},betainabox:{$:0},bplaced:{$:0},ar:{$:0},br:{$:0},cn:{$:0},de:{$:0},eu:{$:0},gb:{$:0},hu:{$:0},jpn:{$:0},kr:{$:0},mex:{$:0},no:{$:0},qc:{$:0},ru:{$:0},sa:{$:0},se:{$:0},uk:{$:0},us:{$:0},uy:{$:0},za:{$:0},africa:{$:0},gr:{$:0},co:{$:0},xenapponazure:{$:0},jdevcloud:{$:0},wpdevcloud:{$:0},cloudcontrolled:{$:0},cloudcontrolapp:{$:0},drayddns:{$:0},dreamhosters:{$:0},mydrobo:{$:0},"dyndns-at-home":{$:0},"dyndns-at-work":{$:0},"dyndns-blog":{$:0},"dyndns-free":{$:0},"dyndns-home":{$:0},"dyndns-ip":{$:0},"dyndns-mail":{$:0},"dyndns-office":{$:0},"dyndns-pics":{$:0},"dyndns-remote":{$:0},"dyndns-server":{$:0},"dyndns-web":{$:0},"dyndns-wiki":{$:0},"dyndns-work":{$:0},blogdns:{$:0},cechire:{$:0},dnsalias:{$:0},dnsdojo:{$:0},doesntexist:{$:0},dontexist:{$:0},doomdns:{$:0},"dyn-o-saur":{$:0},dynalias:{$:0},"est-a-la-maison":{$:0},"est-a-la-masion":{$:0},"est-le-patron":{$:0},"est-mon-blogueur":{$:0},"from-ak":{$:0},"from-al":{$:0},"from-ar":{$:0},"from-ca":{$:0},"from-ct":{$:0},"from-dc":{$:0},"from-de":{$:0},"from-fl":{$:0},"from-ga":{$:0},"from-hi":{$:0},"from-ia":{$:0},"from-id":{$:0},"from-il":{$:0},"from-in":{$:0},"from-ks":{$:0},"from-ky":{$:0},"from-ma":{$:0},"from-md":{$:0},"from-mi":{$:0},"from-mn":{$:0},"from-mo":{$:0},"from-ms":{$:0},"from-mt":{$:0},"from-nc":{$:0},"from-nd":{$:0},"from-ne":{$:0},"from-nh":{$:0},"from-nj":{$:0},"from-nm":{$:0},"from-nv":{$:0},"from-oh":{$:0},"from-ok":{$:0},"from-or":{$:0},"from-pa":{$:0},"from-pr":{$:0},"from-ri":{$:0},"from-sc":{$:0},"from-sd":{$:0},"from-tn":{$:0},"from-tx":{$:0},"from-ut":{$:0},"from-va":{$:0},"from-vt":{$:0},"from-wa":{$:0},"from-wi":{$:0},"from-wv":{$:0},"from-wy":{$:0},getmyip:{$:0},gotdns:{$:0},"hobby-site":{$:0},homelinux:{$:0},homeunix:{$:0},iamallama:{$:0},"is-a-anarchist":{$:0},"is-a-blogger":{$:0},"is-a-bookkeeper":{$:0},"is-a-bulls-fan":{$:0},"is-a-caterer":{$:0},"is-a-chef":{$:0},"is-a-conservative":{$:0},"is-a-cpa":{$:0},"is-a-cubicle-slave":{$:0},"is-a-democrat":{$:0},"is-a-designer":{$:0},"is-a-doctor":{$:0},"is-a-financialadvisor":{$:0},"is-a-geek":{$:0},"is-a-green":{$:0},"is-a-guru":{$:0},"is-a-hard-worker":{$:0},"is-a-hunter":{$:0},"is-a-landscaper":{$:0},"is-a-lawyer":{$:0},"is-a-liberal":{$:0},"is-a-libertarian":{$:0},"is-a-llama":{$:0},"is-a-musician":{$:0},"is-a-nascarfan":{$:0},"is-a-nurse":{$:0},"is-a-painter":{$:0},"is-a-personaltrainer":{$:0},"is-a-photographer":{$:0},"is-a-player":{$:0},"is-a-republican":{$:0},"is-a-rockstar":{$:0},"is-a-socialist":{$:0},"is-a-student":{$:0},"is-a-teacher":{$:0},"is-a-techie":{$:0},"is-a-therapist":{$:0},"is-an-accountant":{$:0},"is-an-actor":{$:0},"is-an-actress":{$:0},"is-an-anarchist":{$:0},"is-an-artist":{$:0},"is-an-engineer":{$:0},"is-an-entertainer":{$:0},"is-certified":{$:0},"is-gone":{$:0},"is-into-anime":{$:0},"is-into-cars":{$:0},"is-into-cartoons":{$:0},"is-into-games":{$:0},"is-leet":{$:0},"is-not-certified":{$:0},"is-slick":{$:0},"is-uberleet":{$:0},"is-with-theband":{$:0},"isa-geek":{$:0},"isa-hockeynut":{$:0},issmarterthanyou:{$:0},"likes-pie":{$:0},likescandy:{$:0},"neat-url":{$:0},"saves-the-whales":{$:0},selfip:{$:0},"sells-for-less":{$:0},"sells-for-u":{$:0},servebbs:{$:0},"simple-url":{$:0},"space-to-rent":{$:0},"teaches-yoga":{$:0},writesthisblog:{$:0},ddnsfree:{$:0},ddnsgeek:{$:0},giize:{$:0},gleeze:{$:0},kozow:{$:0},loseyourip:{$:0},ooguy:{$:0},theworkpc:{$:0},mytuleap:{$:0},evennode:{"eu-1":{$:0},"eu-2":{$:0},"eu-3":{$:0},"eu-4":{$:0},"us-1":{$:0},"us-2":{$:0},"us-3":{$:0},"us-4":{$:0}},fbsbx:{apps:{$:0}},firebaseapp:{$:0},flynnhub:{$:0},"freebox-os":{$:0},freeboxos:{$:0},githubusercontent:{$:0},"0emm":{"*":{$:0}},appspot:{$:0},blogspot:{$:0},codespot:{$:0},googleapis:{$:0},googlecode:{$:0},pagespeedmobilizer:{$:0},publishproxy:{$:0},withgoogle:{$:0},withyoutube:{$:0},herokuapp:{$:0},herokussl:{$:0},pixolino:{$:0},joyent:{cns:{"*":{$:0}}},barsyonline:{$:0},meteorapp:{$:0,eu:{$:0}},bitballoon:{$:0},netlify:{$:0},"4u":{$:0},nfshost:{$:0},blogsyte:{$:0},ciscofreak:{$:0},damnserver:{$:0},ditchyourip:{$:0},dnsiskinky:{$:0},dynns:{$:0},geekgalaxy:{$:0},"health-carereform":{$:0},homesecuritymac:{$:0},homesecuritypc:{$:0},myactivedirectory:{$:0},mysecuritycamera:{$:0},"net-freaks":{$:0},onthewifi:{$:0},point2this:{$:0},quicksytes:{$:0},securitytactics:{$:0},serveexchange:{$:0},servehumour:{$:0},servep2p:{$:0},servesarcasm:{$:0},stufftoread:{$:0},unusualperson:{$:0},workisboring:{$:0},"3utilities":{$:0},ddnsking:{$:0},myvnc:{$:0},servebeer:{$:0},servecounterstrike:{$:0},serveftp:{$:0},servegame:{$:0},servehalflife:{$:0},servehttp:{$:0},serveirc:{$:0},servemp3:{$:0},servepics:{$:0},servequake:{$:0},operaunite:{$:0},outsystemscloud:{$:0},ownprovider:{$:0},pgfog:{$:0},pagefrontapp:{$:0},gotpantheon:{$:0},prgmr:{xen:{$:0}},qa2:{$:0},"dev-myqnapcloud":{$:0},"alpha-myqnapcloud":{$:0},myqnapcloud:{$:0},quipelements:{"*":{$:0}},rackmaze:{$:0},rhcloud:{$:0},logoip:{$:0},scrysec:{$:0},"firewall-gateway":{$:0},myshopblocks:{$:0},"1kapp":{$:0},appchizi:{$:0},applinzi:{$:0},sinaapp:{$:0},vipsinaapp:{$:0},"bounty-full":{$:0,alpha:{$:0},beta:{$:0}},"temp-dns":{$:0},dsmynas:{$:0},familyds:{$:0},bloxcms:{$:0},"townnews-staging":{$:0},hk:{$:0},remotewd:{$:0},yolasite:{$:0}},coop:{$:0},cr:{$:0,ac:{$:0},co:{$:0},ed:{$:0},fi:{$:0},go:{$:0},or:{$:0},sa:{$:0}},cu:{$:0,com:{$:0},edu:{$:0},org:{$:0},net:{$:0},gov:{$:0},inf:{$:0}},cv:{$:0,blogspot:{$:0}},cw:{$:0,com:{$:0},edu:{$:0},net:{$:0},org:{$:0}},cx:{$:0,gov:{$:0},ath:{$:0},info:{$:0}},cy:{$:0,ac:{$:0},biz:{$:0},com:{$:0,blogspot:{$:0}},ekloges:{$:0},gov:{$:0},ltd:{$:0},name:{$:0},net:{$:0},org:{$:0},parliament:{$:0},press:{$:0},pro:{$:0},tm:{$:0}},cz:{$:0,co:{$:0},realm:{$:0},e4:{$:0},blogspot:{$:0},metacentrum:{cloud:{$:0},custom:{$:0}}},de:{$:0,bplaced:{$:0},square7:{$:0},com:{$:0},cosidns:{dyn:{$:0}},"dynamisches-dns":{$:0},dnsupdater:{$:0},"internet-dns":{$:0},"l-o-g-i-n":{$:0},dnshome:{$:0},fuettertdasnetz:{$:0},isteingeek:{$:0},istmein:{$:0},lebtimnetz:{$:0},leitungsen:{$:0},traeumtgerade:{$:0},ddnss:{$:0,dyn:{$:0},dyndns:{$:0}},dyndns1:{$:0},"dyn-ip24":{$:0},"home-webserver":{$:0,dyn:{$:0}},"myhome-server":{$:0},goip:{$:0},blogspot:{$:0},keymachine:{$:0},"git-repos":{$:0},"lcube-server":{$:0},"svn-repos":{$:0},barsy:{$:0},logoip:{$:0},"firewall-gateway":{$:0},"my-gateway":{$:0},"my-router":{$:0},spdns:{$:0},"taifun-dns":{$:0},"12hp":{$:0},"2ix":{$:0},"4lima":{$:0},"lima-city":{$:0},"dd-dns":{$:0},"dray-dns":{$:0},draydns:{$:0},"dyn-vpn":{$:0},dynvpn:{$:0},"mein-vigor":{$:0},"my-vigor":{$:0},"my-wan":{$:0},"syno-ds":{$:0},"synology-diskstation":{$:0},"synology-ds":{$:0}},dj:{$:0},dk:{$:0,biz:{$:0},co:{$:0},firm:{$:0},reg:{$:0},store:{$:0},blogspot:{$:0}},dm:{$:0,com:{$:0},net:{$:0},org:{$:0},edu:{$:0},gov:{$:0}},do:{$:0,art:{$:0},com:{$:0},edu:{$:0},gob:{$:0},gov:{$:0},mil:{$:0},net:{$:0},org:{$:0},sld:{$:0},web:{$:0}},dz:{$:0,com:{$:0},org:{$:0},net:{$:0},gov:{$:0},edu:{$:0},asso:{$:0},pol:{$:0},art:{$:0}},ec:{$:0,com:{$:0},info:{$:0},net:{$:0},fin:{$:0},k12:{$:0},med:{$:0},pro:{$:0},org:{$:0},edu:{$:0},gov:{$:0},gob:{$:0},mil:{$:0}},edu:{$:0},ee:{$:0,edu:{$:0},gov:{$:0},riik:{$:0},lib:{$:0},med:{$:0},com:{$:0,blogspot:{$:0}},pri:{$:0},aip:{$:0},org:{$:0},fie:{$:0}},eg:{$:0,com:{$:0,blogspot:{$:0}},edu:{$:0},eun:{$:0},gov:{$:0},mil:{$:0},name:{$:0},net:{$:0},org:{$:0},sci:{$:0}},er:{"*":{$:0}},es:{$:0,com:{$:0,blogspot:{$:0}},nom:{$:0},org:{$:0},gob:{$:0},edu:{$:0}},et:{$:0,com:{$:0},gov:{$:0},org:{$:0},edu:{$:0},biz:{$:0},name:{$:0},info:{$:0},net:{$:0}},eu:{$:0,"1password":{$:0},mycd:{$:0},cloudns:{$:0},barsy:{$:0},wellbeingzone:{$:0},spdns:{$:0},transurl:{"*":{$:0}},diskstation:{$:0}},fi:{$:0,aland:{$:0},dy:{$:0},blogspot:{$:0},iki:{$:0}},fj:{"*":{$:0}},fk:{"*":{$:0}},fm:{$:0},fo:{$:0},fr:{$:0,com:{$:0},asso:{$:0},nom:{$:0},prd:{$:0},presse:{$:0},tm:{$:0},aeroport:{$:0},assedic:{$:0},avocat:{$:0},avoues:{$:0},cci:{$:0},chambagri:{$:0},"chirurgiens-dentistes":{$:0},"experts-comptables":{$:0},"geometre-expert":{$:0},gouv:{$:0},greta:{$:0},"huissier-justice":{$:0},medecin:{$:0},notaires:{$:0},pharmacien:{$:0},port:{$:0},veterinaire:{$:0},"fbx-os":{$:0},fbxos:{$:0},"freebox-os":{$:0},freeboxos:{$:0},blogspot:{$:0},"on-web":{$:0},"chirurgiens-dentistes-en-france":{$:0}},ga:{$:0},gb:{$:0},gd:{$:0,nom:{$:0}},ge:{$:0,com:{$:0},edu:{$:0},gov:{$:0},org:{$:0},mil:{$:0},net:{$:0},pvt:{$:0}},gf:{$:0},gg:{$:0,co:{$:0},net:{$:0},org:{$:0},cya:{$:0}},gh:{$:0,com:{$:0},edu:{$:0},gov:{$:0},org:{$:0},mil:{$:0}},gi:{$:0,com:{$:0},ltd:{$:0},gov:{$:0},mod:{$:0},edu:{$:0},org:{$:0}},gl:{$:0,co:{$:0},com:{$:0},edu:{$:0},net:{$:0},org:{$:0},nom:{$:0}},gm:{$:0},gn:{$:0,ac:{$:0},com:{$:0},edu:{$:0},gov:{$:0},org:{$:0},net:{$:0}},gov:{$:0},gp:{$:0,com:{$:0},net:{$:0},mobi:{$:0},edu:{$:0},org:{$:0},asso:{$:0}},gq:{$:0},gr:{$:0,com:{$:0},edu:{$:0},net:{$:0},org:{$:0},gov:{$:0},blogspot:{$:0},nym:{$:0}},gs:{$:0},gt:{$:0,com:{$:0},edu:{$:0},gob:{$:0},ind:{$:0},mil:{$:0},net:{$:0},org:{$:0},nom:{$:0}},gu:{"*":{$:0}},gw:{$:0},gy:{$:0,co:{$:0},com:{$:0},edu:{$:0},gov:{$:0},net:{$:0},org:{$:0}},hk:{$:0,com:{$:0},edu:{$:0},gov:{$:0},idv:{$:0},net:{$:0},org:{$:0},"xn--55qx5d":{$:0},"xn--wcvs22d":{$:0},"xn--lcvr32d":{$:0},"xn--mxtq1m":{$:0},"xn--gmqw5a":{$:0},"xn--ciqpn":{$:0},"xn--gmq050i":{$:0},"xn--zf0avx":{$:0},"xn--io0a7i":{$:0},"xn--mk0axi":{$:0},"xn--od0alg":{$:0},"xn--od0aq3b":{$:0},"xn--tn0ag":{$:0},"xn--uc0atv":{$:0},"xn--uc0ay4a":{$:0},blogspot:{$:0},ltd:{$:0},inc:{$:0}},hm:{$:0},hn:{$:0,com:{$:0},edu:{$:0},org:{$:0},net:{$:0},mil:{$:0},gob:{$:0},nom:{$:0}},hr:{$:0,iz:{$:0},from:{$:0},name:{$:0},com:{$:0},blogspot:{$:0}},ht:{$:0,com:{$:0},shop:{$:0},firm:{$:0},info:{$:0},adult:{$:0},net:{$:0},pro:{$:0},org:{$:0},med:{$:0},art:{$:0},coop:{$:0},pol:{$:0},asso:{$:0},edu:{$:0},rel:{$:0},gouv:{$:0},perso:{$:0}},hu:{2000:{$:0},$:0,co:{$:0},info:{$:0},org:{$:0},priv:{$:0},sport:{$:0},tm:{$:0},agrar:{$:0},bolt:{$:0},casino:{$:0},city:{$:0},erotica:{$:0},erotika:{$:0},film:{$:0},forum:{$:0},games:{$:0},hotel:{$:0},ingatlan:{$:0},jogasz:{$:0},konyvelo:{$:0},lakas:{$:0},media:{$:0},news:{$:0},reklam:{$:0},sex:{$:0},shop:{$:0},suli:{$:0},szex:{$:0},tozsde:{$:0},utazas:{$:0},video:{$:0},blogspot:{$:0}},id:{$:0,ac:{$:0},biz:{$:0},co:{$:0,blogspot:{$:0}},desa:{$:0},go:{$:0},mil:{$:0},my:{$:0},net:{$:0},or:{$:0},sch:{$:0},web:{$:0}},ie:{$:0,gov:{$:0},blogspot:{$:0}},il:{$:0,ac:{$:0},co:{$:0,blogspot:{$:0}},gov:{$:0},idf:{$:0},k12:{$:0},muni:{$:0},net:{$:0},org:{$:0}},im:{$:0,ac:{$:0},co:{$:0,ltd:{$:0},plc:{$:0}},com:{$:0},net:{$:0},org:{$:0},tt:{$:0},tv:{$:0},ro:{$:0},nom:{$:0}},in:{$:0,co:{$:0},firm:{$:0},net:{$:0},org:{$:0},gen:{$:0},ind:{$:0},nic:{$:0},ac:{$:0},edu:{$:0},res:{$:0},gov:{$:0},mil:{$:0},cloudns:{$:0},blogspot:{$:0},barsy:{$:0}},info:{$:0,cloudns:{$:0},"dynamic-dns":{$:0},dyndns:{$:0},"barrel-of-knowledge":{$:0},"barrell-of-knowledge":{$:0},"for-our":{$:0},"groks-the":{$:0},"groks-this":{$:0},"here-for-more":{$:0},knowsitall:{$:0},selfip:{$:0},webhop:{$:0},nsupdate:{$:0},dvrcam:{$:0},ilovecollege:{$:0},"no-ip":{$:0},"v-info":{$:0}},int:{$:0,eu:{$:0}},io:{$:0,com:{$:0},backplaneapp:{$:0},boxfuse:{$:0},browsersafetymark:{$:0},dedyn:{$:0},drud:{$:0},definima:{$:0},enonic:{$:0,customer:{$:0}},github:{$:0},gitlab:{$:0},"hasura-app":{$:0},ngrok:{$:0},nodeart:{stage:{$:0}},nodum:{$:0},nid:{$:0},pantheonsite:{$:0},protonet:{$:0},vaporcloud:{$:0},resindevice:{$:0},resinstaging:{devices:{$:0}},hzc:{$:0},sandcats:{$:0},s5y:{"*":{$:0}},shiftedit:{$:0},lair:{apps:{$:0}},stolos:{"*":{$:0}},spacekit:{$:0},thingdust:{dev:{cust:{$:0}},disrec:{cust:{$:0}},prod:{cust:{$:0}},testing:{cust:{$:0}}},wedeploy:{$:0}},iq:{$:0,gov:{$:0},edu:{$:0},mil:{$:0},com:{$:0},org:{$:0},net:{$:0}},ir:{$:0,ac:{$:0},co:{$:0},gov:{$:0},id:{$:0},net:{$:0},org:{$:0},sch:{$:0},"xn--mgba3a4f16a":{$:0},"xn--mgba3a4fra":{$:0}},is:{$:0,net:{$:0},com:{$:0},edu:{$:0},gov:{$:0},org:{$:0},int:{$:0},cupcake:{$:0},blogspot:{$:0}},it:{$:0,gov:{$:0},edu:{$:0},abr:{$:0},abruzzo:{$:0},"aosta-valley":{$:0},aostavalley:{$:0},bas:{$:0},basilicata:{$:0},cal:{$:0},calabria:{$:0},cam:{$:0},campania:{$:0},"emilia-romagna":{$:0},emiliaromagna:{$:0},emr:{$:0},"friuli-v-giulia":{$:0},"friuli-ve-giulia":{$:0},"friuli-vegiulia":{$:0},"friuli-venezia-giulia":{$:0},"friuli-veneziagiulia":{$:0},"friuli-vgiulia":{$:0},"friuliv-giulia":{$:0},"friulive-giulia":{$:0},friulivegiulia:{$:0},"friulivenezia-giulia":{$:0},friuliveneziagiulia:{$:0},friulivgiulia:{$:0},fvg:{$:0},laz:{$:0},lazio:{$:0},lig:{$:0},liguria:{$:0},lom:{$:0},lombardia:{$:0},lombardy:{$:0},lucania:{$:0},mar:{$:0},marche:{$:0},mol:{$:0},molise:{$:0},piedmont:{$:0},piemonte:{$:0},pmn:{$:0},pug:{$:0},puglia:{$:0},sar:{$:0},sardegna:{$:0},sardinia:{$:0},sic:{$:0},sicilia:{$:0},sicily:{$:0},taa:{$:0},tos:{$:0},toscana:{$:0},"trentino-a-adige":{$:0},"trentino-aadige":{$:0},"trentino-alto-adige":{$:0},"trentino-altoadige":{$:0},"trentino-s-tirol":{$:0},"trentino-stirol":{$:0},"trentino-sud-tirol":{$:0},"trentino-sudtirol":{$:0},"trentino-sued-tirol":{$:0},"trentino-suedtirol":{$:0},"trentinoa-adige":{$:0},trentinoaadige:{$:0},"trentinoalto-adige":{$:0},trentinoaltoadige:{$:0},"trentinos-tirol":{$:0},trentinostirol:{$:0},"trentinosud-tirol":{$:0},trentinosudtirol:{$:0},"trentinosued-tirol":{$:0},trentinosuedtirol:{$:0},tuscany:{$:0},umb:{$:0},umbria:{$:0},"val-d-aosta":{$:0},"val-daosta":{$:0},"vald-aosta":{$:0},valdaosta:{$:0},"valle-aosta":{$:0},"valle-d-aosta":{$:0},"valle-daosta":{$:0},valleaosta:{$:0},"valled-aosta":{$:0},valledaosta:{$:0},"vallee-aoste":{$:0},valleeaoste:{$:0},vao:{$:0},vda:{$:0},ven:{$:0},veneto:{$:0},ag:{$:0},agrigento:{$:0},al:{$:0},alessandria:{$:0},"alto-adige":{$:0},altoadige:{$:0},an:{$:0},ancona:{$:0},"andria-barletta-trani":{$:0},"andria-trani-barletta":{$:0},andriabarlettatrani:{$:0},andriatranibarletta:{$:0},ao:{$:0},aosta:{$:0},aoste:{$:0},ap:{$:0},aq:{$:0},aquila:{$:0},ar:{$:0},arezzo:{$:0},"ascoli-piceno":{$:0},ascolipiceno:{$:0},asti:{$:0},at:{$:0},av:{$:0},avellino:{$:0},ba:{$:0},balsan:{$:0},bari:{$:0},"barletta-trani-andria":{$:0},barlettatraniandria:{$:0},belluno:{$:0},benevento:{$:0},bergamo:{$:0},bg:{$:0},bi:{$:0},biella:{$:0},bl:{$:0},bn:{$:0},bo:{$:0},bologna:{$:0},bolzano:{$:0},bozen:{$:0},br:{$:0},brescia:{$:0},brindisi:{$:0},bs:{$:0},bt:{$:0},bz:{$:0},ca:{$:0},cagliari:{$:0},caltanissetta:{$:0},"campidano-medio":{$:0},campidanomedio:{$:0},campobasso:{$:0},"carbonia-iglesias":{$:0},carboniaiglesias:{$:0},"carrara-massa":{$:0},carraramassa:{$:0},caserta:{$:0},catania:{$:0},catanzaro:{$:0},cb:{$:0},ce:{$:0},"cesena-forli":{$:0},cesenaforli:{$:0},ch:{$:0},chieti:{$:0},ci:{$:0},cl:{$:0},cn:{$:0},co:{$:0},como:{$:0},cosenza:{$:0},cr:{$:0},cremona:{$:0},crotone:{$:0},cs:{$:0},ct:{$:0},cuneo:{$:0},cz:{$:0},"dell-ogliastra":{$:0},dellogliastra:{$:0},en:{$:0},enna:{$:0},fc:{$:0},fe:{$:0},fermo:{$:0},ferrara:{$:0},fg:{$:0},fi:{$:0},firenze:{$:0},florence:{$:0},fm:{$:0},foggia:{$:0},"forli-cesena":{$:0},forlicesena:{$:0},fr:{$:0},frosinone:{$:0},ge:{$:0},genoa:{$:0},genova:{$:0},go:{$:0},gorizia:{$:0},gr:{$:0},grosseto:{$:0},"iglesias-carbonia":{$:0},iglesiascarbonia:{$:0},im:{$:0},imperia:{$:0},is:{$:0},isernia:{$:0},kr:{$:0},"la-spezia":{$:0},laquila:{$:0},laspezia:{$:0},latina:{$:0},lc:{$:0},le:{$:0},lecce:{$:0},lecco:{$:0},li:{$:0},livorno:{$:0},lo:{$:0},lodi:{$:0},lt:{$:0},lu:{$:0},lucca:{$:0},macerata:{$:0},mantova:{$:0},"massa-carrara":{$:0},massacarrara:{$:0},matera:{$:0},mb:{$:0},mc:{$:0},me:{$:0},"medio-campidano":{$:0},mediocampidano:{$:0},messina:{$:0},mi:{$:0},milan:{$:0},milano:{$:0},mn:{$:0},mo:{$:0},modena:{$:0},"monza-brianza":{$:0},"monza-e-della-brianza":{$:0},monza:{$:0},monzabrianza:{$:0},monzaebrianza:{$:0},monzaedellabrianza:{$:0},ms:{$:0},mt:{$:0},na:{$:0},naples:{$:0},napoli:{$:0},no:{$:0},novara:{$:0},nu:{$:0},nuoro:{$:0},og:{$:0},ogliastra:{$:0},"olbia-tempio":{$:0},olbiatempio:{$:0},or:{$:0},oristano:{$:0},ot:{$:0},pa:{$:0},padova:{$:0},padua:{$:0},palermo:{$:0},parma:{$:0},pavia:{$:0},pc:{$:0},pd:{$:0},pe:{$:0},perugia:{$:0},"pesaro-urbino":{$:0},pesarourbino:{$:0},pescara:{$:0},pg:{$:0},pi:{$:0},piacenza:{$:0},pisa:{$:0},pistoia:{$:0},pn:{$:0},po:{$:0},pordenone:{$:0},potenza:{$:0},pr:{$:0},prato:{$:0},pt:{$:0},pu:{$:0},pv:{$:0},pz:{$:0},ra:{$:0},ragusa:{$:0},ravenna:{$:0},rc:{$:0},re:{$:0},"reggio-calabria":{$:0},"reggio-emilia":{$:0},reggiocalabria:{$:0},reggioemilia:{$:0},rg:{$:0},ri:{$:0},rieti:{$:0},rimini:{$:0},rm:{$:0},rn:{$:0},ro:{$:0},roma:{$:0},rome:{$:0},rovigo:{$:0},sa:{$:0},salerno:{$:0},sassari:{$:0},savona:{$:0},si:{$:0},siena:{$:0},siracusa:{$:0},so:{$:0},sondrio:{$:0},sp:{$:0},sr:{$:0},ss:{$:0},suedtirol:{$:0},sv:{$:0},ta:{$:0},taranto:{$:0},te:{$:0},"tempio-olbia":{$:0},tempioolbia:{$:0},teramo:{$:0},terni:{$:0},tn:{$:0},to:{$:0},torino:{$:0},tp:{$:0},tr:{$:0},"trani-andria-barletta":{$:0},"trani-barletta-andria":{$:0},traniandriabarletta:{$:0},tranibarlettaandria:{$:0},trapani:{$:0},trentino:{$:0},trento:{$:0},treviso:{$:0},trieste:{$:0},ts:{$:0},turin:{$:0},tv:{$:0},ud:{$:0},udine:{$:0},"urbino-pesaro":{$:0},urbinopesaro:{$:0},va:{$:0},varese:{$:0},vb:{$:0},vc:{$:0},ve:{$:0},venezia:{$:0},venice:{$:0},verbania:{$:0},vercelli:{$:0},verona:{$:0},vi:{$:0},"vibo-valentia":{$:0},vibovalentia:{$:0},vicenza:{$:0},viterbo:{$:0},vr:{$:0},vs:{$:0},vt:{$:0},vv:{$:0},blogspot:{$:0}},je:{$:0,co:{$:0},net:{$:0},org:{$:0}},jm:{"*":{$:0}},jo:{$:0,com:{$:0},org:{$:0},net:{$:0},edu:{$:0},sch:{$:0},gov:{$:0},mil:{$:0},name:{$:0}},jobs:{$:0},jp:{$:0,ac:{$:0},ad:{$:0},co:{$:0},ed:{$:0},go:{$:0},gr:{$:0},lg:{$:0},ne:{$:0},or:{$:0},aichi:{$:0,aisai:{$:0},ama:{$:0},anjo:{$:0},asuke:{$:0},chiryu:{$:0},chita:{$:0},fuso:{$:0},gamagori:{$:0},handa:{$:0},hazu:{$:0},hekinan:{$:0},higashiura:{$:0},ichinomiya:{$:0},inazawa:{$:0},inuyama:{$:0},isshiki:{$:0},iwakura:{$:0},kanie:{$:0},kariya:{$:0},kasugai:{$:0},kira:{$:0},kiyosu:{$:0},komaki:{$:0},konan:{$:0},kota:{$:0},mihama:{$:0},miyoshi:{$:0},nishio:{$:0},nisshin:{$:0},obu:{$:0},oguchi:{$:0},oharu:{$:0},okazaki:{$:0},owariasahi:{$:0},seto:{$:0},shikatsu:{$:0},shinshiro:{$:0},shitara:{$:0},tahara:{$:0},takahama:{$:0},tobishima:{$:0},toei:{$:0},togo:{$:0},tokai:{$:0},tokoname:{$:0},toyoake:{$:0},toyohashi:{$:0},toyokawa:{$:0},toyone:{$:0},toyota:{$:0},tsushima:{$:0},yatomi:{$:0}},akita:{$:0,akita:{$:0},daisen:{$:0},fujisato:{$:0},gojome:{$:0},hachirogata:{$:0},happou:{$:0},higashinaruse:{$:0},honjo:{$:0},honjyo:{$:0},ikawa:{$:0},kamikoani:{$:0},kamioka:{$:0},katagami:{$:0},kazuno:{$:0},kitaakita:{$:0},kosaka:{$:0},kyowa:{$:0},misato:{$:0},mitane:{$:0},moriyoshi:{$:0},nikaho:{$:0},noshiro:{$:0},odate:{$:0},oga:{$:0},ogata:{$:0},semboku:{$:0},yokote:{$:0},yurihonjo:{$:0}},aomori:{$:0,aomori:{$:0},gonohe:{$:0},hachinohe:{$:0},hashikami:{$:0},hiranai:{$:0},hirosaki:{$:0},itayanagi:{$:0},kuroishi:{$:0},misawa:{$:0},mutsu:{$:0},nakadomari:{$:0},noheji:{$:0},oirase:{$:0},owani:{$:0},rokunohe:{$:0},sannohe:{$:0},shichinohe:{$:0},shingo:{$:0},takko:{$:0},towada:{$:0},tsugaru:{$:0},tsuruta:{$:0}},chiba:{$:0,abiko:{$:0},asahi:{$:0},chonan:{$:0},chosei:{$:0},choshi:{$:0},chuo:{$:0},funabashi:{$:0},futtsu:{$:0},hanamigawa:{$:0},ichihara:{$:0},ichikawa:{$:0},ichinomiya:{$:0},inzai:{$:0},isumi:{$:0},kamagaya:{$:0},kamogawa:{$:0},kashiwa:{$:0},katori:{$:0},katsuura:{$:0},kimitsu:{$:0},kisarazu:{$:0},kozaki:{$:0},kujukuri:{$:0},kyonan:{$:0},matsudo:{$:0},midori:{$:0},mihama:{$:0},minamiboso:{$:0},mobara:{$:0},mutsuzawa:{$:0},nagara:{$:0},nagareyama:{$:0},narashino:{$:0},narita:{$:0},noda:{$:0},oamishirasato:{$:0},omigawa:{$:0},onjuku:{$:0},otaki:{$:0},sakae:{$:0},sakura:{$:0},shimofusa:{$:0},shirako:{$:0},shiroi:{$:0},shisui:{$:0},sodegaura:{$:0},sosa:{$:0},tako:{$:0},tateyama:{$:0},togane:{$:0},tohnosho:{$:0},tomisato:{$:0},urayasu:{$:0},yachimata:{$:0},yachiyo:{$:0},yokaichiba:{$:0},yokoshibahikari:{$:0},yotsukaido:{$:0}},ehime:{$:0,ainan:{$:0},honai:{$:0},ikata:{$:0},imabari:{$:0},iyo:{$:0},kamijima:{$:0},kihoku:{$:0},kumakogen:{$:0},masaki:{$:0},matsuno:{$:0},matsuyama:{$:0},namikata:{$:0},niihama:{$:0},ozu:{$:0},saijo:{$:0},seiyo:{$:0},shikokuchuo:{$:0},tobe:{$:0},toon:{$:0},uchiko:{$:0},uwajima:{$:0},yawatahama:{$:0}},fukui:{$:0,echizen:{$:0},eiheiji:{$:0},fukui:{$:0},ikeda:{$:0},katsuyama:{$:0},mihama:{$:0},minamiechizen:{$:0},obama:{$:0},ohi:{$:0},ono:{$:0},sabae:{$:0},sakai:{$:0},takahama:{$:0},tsuruga:{$:0},wakasa:{$:0}},fukuoka:{$:0,ashiya:{$:0},buzen:{$:0},chikugo:{$:0},chikuho:{$:0},chikujo:{$:0},chikushino:{$:0},chikuzen:{$:0},chuo:{$:0},dazaifu:{$:0},fukuchi:{$:0},hakata:{$:0},higashi:{$:0},hirokawa:{$:0},hisayama:{$:0},iizuka:{$:0},inatsuki:{$:0},kaho:{$:0},kasuga:{$:0},kasuya:{$:0},kawara:{$:0},keisen:{$:0},koga:{$:0},kurate:{$:0},kurogi:{$:0},kurume:{$:0},minami:{$:0},miyako:{$:0},miyama:{$:0},miyawaka:{$:0},mizumaki:{$:0},munakata:{$:0},nakagawa:{$:0},nakama:{$:0},nishi:{$:0},nogata:{$:0},ogori:{$:0},okagaki:{$:0},okawa:{$:0},oki:{$:0},omuta:{$:0},onga:{$:0},onojo:{$:0},oto:{$:0},saigawa:{$:0},sasaguri:{$:0},shingu:{$:0},shinyoshitomi:{$:0},shonai:{$:0},soeda:{$:0},sue:{$:0},tachiarai:{$:0},tagawa:{$:0},takata:{$:0},toho:{$:0},toyotsu:{$:0},tsuiki:{$:0},ukiha:{$:0},umi:{$:0},usui:{$:0},yamada:{$:0},yame:{$:0},yanagawa:{$:0},yukuhashi:{$:0}},fukushima:{$:0,aizubange:{$:0},aizumisato:{$:0},aizuwakamatsu:{$:0},asakawa:{$:0},bandai:{$:0},date:{$:0},fukushima:{$:0},furudono:{$:0},futaba:{$:0},hanawa:{$:0},higashi:{$:0},hirata:{$:0},hirono:{$:0},iitate:{$:0},inawashiro:{$:0},ishikawa:{$:0},iwaki:{$:0},izumizaki:{$:0},kagamiishi:{$:0},kaneyama:{$:0},kawamata:{$:0},kitakata:{$:0},kitashiobara:{$:0},koori:{$:0},koriyama:{$:0},kunimi:{$:0},miharu:{$:0},mishima:{$:0},namie:{$:0},nango:{$:0},nishiaizu:{$:0},nishigo:{$:0},okuma:{$:0},omotego:{$:0},ono:{$:0},otama:{$:0},samegawa:{$:0},shimogo:{$:0},shirakawa:{$:0},showa:{$:0},soma:{$:0},sukagawa:{$:0},taishin:{$:0},tamakawa:{$:0},tanagura:{$:0},tenei:{$:0},yabuki:{$:0},yamato:{$:0},yamatsuri:{$:0},yanaizu:{$:0},yugawa:{$:0}},gifu:{$:0,anpachi:{$:0},ena:{$:0},gifu:{$:0},ginan:{$:0},godo:{$:0},gujo:{$:0},hashima:{$:0},hichiso:{$:0},hida:{$:0},higashishirakawa:{$:0},ibigawa:{$:0},ikeda:{$:0},kakamigahara:{$:0},kani:{$:0},kasahara:{$:0},kasamatsu:{$:0},kawaue:{$:0},kitagata:{$:0},mino:{$:0},minokamo:{$:0},mitake:{$:0},mizunami:{$:0},motosu:{$:0},nakatsugawa:{$:0},ogaki:{$:0},sakahogi:{$:0},seki:{$:0},sekigahara:{$:0},shirakawa:{$:0},tajimi:{$:0},takayama:{$:0},tarui:{$:0},toki:{$:0},tomika:{$:0},wanouchi:{$:0},yamagata:{$:0},yaotsu:{$:0},yoro:{$:0}},gunma:{$:0,annaka:{$:0},chiyoda:{$:0},fujioka:{$:0},higashiagatsuma:{$:0},isesaki:{$:0},itakura:{$:0},kanna:{$:0},kanra:{$:0},katashina:{$:0},kawaba:{$:0},kiryu:{$:0},kusatsu:{$:0},maebashi:{$:0},meiwa:{$:0},midori:{$:0},minakami:{$:0},naganohara:{$:0},nakanojo:{$:0},nanmoku:{$:0},numata:{$:0},oizumi:{$:0},ora:{$:0},ota:{$:0},shibukawa:{$:0},shimonita:{$:0},shinto:{$:0},showa:{$:0},takasaki:{$:0},takayama:{$:0},tamamura:{$:0},tatebayashi:{$:0},tomioka:{$:0},tsukiyono:{$:0},tsumagoi:{$:0},ueno:{$:0},yoshioka:{$:0}},hiroshima:{$:0,asaminami:{$:0},daiwa:{$:0},etajima:{$:0},fuchu:{$:0},fukuyama:{$:0},hatsukaichi:{$:0},higashihiroshima:{$:0},hongo:{$:0},jinsekikogen:{$:0},kaita:{$:0},kui:{$:0},kumano:{$:0},kure:{$:0},mihara:{$:0},miyoshi:{$:0},naka:{$:0},onomichi:{$:0},osakikamijima:{$:0},otake:{$:0},saka:{$:0},sera:{$:0},seranishi:{$:0},shinichi:{$:0},shobara:{$:0},takehara:{$:0}},hokkaido:{$:0,abashiri:{$:0},abira:{$:0},aibetsu:{$:0},akabira:{$:0},akkeshi:{$:0},asahikawa:{$:0},ashibetsu:{$:0},ashoro:{$:0},assabu:{$:0},atsuma:{$:0},bibai:{$:0},biei:{$:0},bifuka:{$:0},bihoro:{$:0},biratori:{$:0},chippubetsu:{$:0},chitose:{$:0},date:{$:0},ebetsu:{$:0},embetsu:{$:0},eniwa:{$:0},erimo:{$:0},esan:{$:0},esashi:{$:0},fukagawa:{$:0},fukushima:{$:0},furano:{$:0},furubira:{$:0},haboro:{$:0},hakodate:{$:0},hamatonbetsu:{$:0},hidaka:{$:0},higashikagura:{$:0},higashikawa:{$:0},hiroo:{$:0},hokuryu:{$:0},hokuto:{$:0},honbetsu:{$:0},horokanai:{$:0},horonobe:{$:0},ikeda:{$:0},imakane:{$:0},ishikari:{$:0},iwamizawa:{$:0},iwanai:{$:0},kamifurano:{$:0},kamikawa:{$:0},kamishihoro:{$:0},kamisunagawa:{$:0},kamoenai:{$:0},kayabe:{$:0},kembuchi:{$:0},kikonai:{$:0},kimobetsu:{$:0},kitahiroshima:{$:0},kitami:{$:0},kiyosato:{$:0},koshimizu:{$:0},kunneppu:{$:0},kuriyama:{$:0},kuromatsunai:{$:0},kushiro:{$:0},kutchan:{$:0},kyowa:{$:0},mashike:{$:0},matsumae:{$:0},mikasa:{$:0},minamifurano:{$:0},mombetsu:{$:0},moseushi:{$:0},mukawa:{$:0},muroran:{$:0},naie:{$:0},nakagawa:{$:0},nakasatsunai:{$:0},nakatombetsu:{$:0},nanae:{$:0},nanporo:{$:0},nayoro:{$:0},nemuro:{$:0},niikappu:{$:0},niki:{$:0},nishiokoppe:{$:0},noboribetsu:{$:0},numata:{$:0},obihiro:{$:0},obira:{$:0},oketo:{$:0},okoppe:{$:0},otaru:{$:0},otobe:{$:0},otofuke:{$:0},otoineppu:{$:0},oumu:{$:0},ozora:{$:0},pippu:{$:0},rankoshi:{$:0},rebun:{$:0},rikubetsu:{$:0},rishiri:{$:0},rishirifuji:{$:0},saroma:{$:0},sarufutsu:{$:0},shakotan:{$:0},shari:{$:0},shibecha:{$:0},shibetsu:{$:0},shikabe:{$:0},shikaoi:{$:0},shimamaki:{$:0},shimizu:{$:0},shimokawa:{$:0},shinshinotsu:{$:0},shintoku:{$:0},shiranuka:{$:0},shiraoi:{$:0},shiriuchi:{$:0},sobetsu:{$:0},sunagawa:{$:0},taiki:{$:0},takasu:{$:0},takikawa:{$:0},takinoue:{$:0},teshikaga:{$:0},tobetsu:{$:0},tohma:{$:0},tomakomai:{$:0},tomari:{$:0},toya:{$:0},toyako:{$:0},toyotomi:{$:0},toyoura:{$:0},tsubetsu:{$:0},tsukigata:{$:0},urakawa:{$:0},urausu:{$:0},uryu:{$:0},utashinai:{$:0},wakkanai:{$:0},wassamu:{$:0},yakumo:{$:0},yoichi:{$:0}},hyogo:{$:0,aioi:{$:0},akashi:{$:0},ako:{$:0},amagasaki:{$:0},aogaki:{$:0},asago:{$:0},ashiya:{$:0},awaji:{$:0},fukusaki:{$:0},goshiki:{$:0},harima:{$:0},himeji:{$:0},ichikawa:{$:0},inagawa:{$:0},itami:{$:0},kakogawa:{$:0},kamigori:{$:0},kamikawa:{$:0},kasai:{$:0},kasuga:{$:0},kawanishi:{$:0},miki:{$:0},minamiawaji:{$:0},nishinomiya:{$:0},nishiwaki:{$:0},ono:{$:0},sanda:{$:0},sannan:{$:0},sasayama:{$:0},sayo:{$:0},shingu:{$:0},shinonsen:{$:0},shiso:{$:0},sumoto:{$:0},taishi:{$:0},taka:{$:0},takarazuka:{$:0},takasago:{$:0},takino:{$:0},tamba:{$:0},tatsuno:{$:0},toyooka:{$:0},yabu:{$:0},yashiro:{$:0},yoka:{$:0},yokawa:{$:0}},ibaraki:{$:0,ami:{$:0},asahi:{$:0},bando:{$:0},chikusei:{$:0},daigo:{$:0},fujishiro:{$:0},hitachi:{$:0},hitachinaka:{$:0},hitachiomiya:{$:0},hitachiota:{$:0},ibaraki:{$:0},ina:{$:0},inashiki:{$:0},itako:{$:0},iwama:{$:0},joso:{$:0},kamisu:{$:0},kasama:{$:0},kashima:{$:0},kasumigaura:{$:0},koga:{$:0},miho:{$:0},mito:{$:0},moriya:{$:0},naka:{$:0},namegata:{$:0},oarai:{$:0},ogawa:{$:0},omitama:{$:0},ryugasaki:{$:0},sakai:{$:0},sakuragawa:{$:0},shimodate:{$:0},shimotsuma:{$:0},shirosato:{$:0},sowa:{$:0},suifu:{$:0},takahagi:{$:0},tamatsukuri:{$:0},tokai:{$:0},tomobe:{$:0},tone:{$:0},toride:{$:0},tsuchiura:{$:0},tsukuba:{$:0},uchihara:{$:0},ushiku:{$:0},yachiyo:{$:0},yamagata:{$:0},yawara:{$:0},yuki:{$:0}},ishikawa:{$:0,anamizu:{$:0},hakui:{$:0},hakusan:{$:0},kaga:{$:0},kahoku:{$:0},kanazawa:{$:0},kawakita:{$:0},komatsu:{$:0},nakanoto:{$:0},nanao:{$:0},nomi:{$:0},nonoichi:{$:0},noto:{$:0},shika:{$:0},suzu:{$:0},tsubata:{$:0},tsurugi:{$:0},uchinada:{$:0},wajima:{$:0}},iwate:{$:0,fudai:{$:0},fujisawa:{$:0},hanamaki:{$:0},hiraizumi:{$:0},hirono:{$:0},ichinohe:{$:0},ichinoseki:{$:0},iwaizumi:{$:0},iwate:{$:0},joboji:{$:0},kamaishi:{$:0},kanegasaki:{$:0},karumai:{$:0},kawai:{$:0},kitakami:{$:0},kuji:{$:0},kunohe:{$:0},kuzumaki:{$:0},miyako:{$:0},mizusawa:{$:0},morioka:{$:0},ninohe:{$:0},noda:{$:0},ofunato:{$:0},oshu:{$:0},otsuchi:{$:0},rikuzentakata:{$:0},shiwa:{$:0},shizukuishi:{$:0},sumita:{$:0},tanohata:{$:0},tono:{$:0},yahaba:{$:0},yamada:{$:0}},kagawa:{$:0,ayagawa:{$:0},higashikagawa:{$:0},kanonji:{$:0},kotohira:{$:0},manno:{$:0},marugame:{$:0},mitoyo:{$:0},naoshima:{$:0},sanuki:{$:0},tadotsu:{$:0},takamatsu:{$:0},tonosho:{$:0},uchinomi:{$:0},utazu:{$:0},zentsuji:{$:0}},kagoshima:{$:0,akune:{$:0},amami:{$:0},hioki:{$:0},isa:{$:0},isen:{$:0},izumi:{$:0},kagoshima:{$:0},kanoya:{$:0},kawanabe:{$:0},kinko:{$:0},kouyama:{$:0},makurazaki:{$:0},matsumoto:{$:0},minamitane:{$:0},nakatane:{$:0},nishinoomote:{$:0},satsumasendai:{$:0},soo:{$:0},tarumizu:{$:0},yusui:{$:0}},kanagawa:{$:0,aikawa:{$:0},atsugi:{$:0},ayase:{$:0},chigasaki:{$:0},ebina:{$:0},fujisawa:{$:0},hadano:{$:0},hakone:{$:0},hiratsuka:{$:0},isehara:{$:0},kaisei:{$:0},kamakura:{$:0},kiyokawa:{$:0},matsuda:{$:0},minamiashigara:{$:0},miura:{$:0},nakai:{$:0},ninomiya:{$:0},odawara:{$:0},oi:{$:0},oiso:{$:0},sagamihara:{$:0},samukawa:{$:0},tsukui:{$:0},yamakita:{$:0},yamato:{$:0},yokosuka:{$:0},yugawara:{$:0},zama:{$:0},zushi:{$:0}},kochi:{$:0,aki:{$:0},geisei:{$:0},hidaka:{$:0},higashitsuno:{$:0},ino:{$:0},kagami:{$:0},kami:{$:0},kitagawa:{$:0},kochi:{$:0},mihara:{$:0},motoyama:{$:0},muroto:{$:0},nahari:{$:0},nakamura:{$:0},nankoku:{$:0},nishitosa:{$:0},niyodogawa:{$:0},ochi:{$:0},okawa:{$:0},otoyo:{$:0},otsuki:{$:0},sakawa:{$:0},sukumo:{$:0},susaki:{$:0},tosa:{$:0},tosashimizu:{$:0},toyo:{$:0},tsuno:{$:0},umaji:{$:0},yasuda:{$:0},yusuhara:{$:0}},kumamoto:{$:0,amakusa:{$:0},arao:{$:0},aso:{$:0},choyo:{$:0},gyokuto:{$:0},kamiamakusa:{$:0},kikuchi:{$:0},kumamoto:{$:0},mashiki:{$:0},mifune:{$:0},minamata:{$:0},minamioguni:{$:0},nagasu:{$:0},nishihara:{$:0},oguni:{$:0},ozu:{$:0},sumoto:{$:0},takamori:{$:0},uki:{$:0},uto:{$:0},yamaga:{$:0},yamato:{$:0},yatsushiro:{$:0}},kyoto:{$:0,ayabe:{$:0},fukuchiyama:{$:0},higashiyama:{$:0},ide:{$:0},ine:{$:0},joyo:{$:0},kameoka:{$:0},kamo:{$:0},kita:{$:0},kizu:{$:0},kumiyama:{$:0},kyotamba:{$:0},kyotanabe:{$:0},kyotango:{$:0},maizuru:{$:0},minami:{$:0},minamiyamashiro:{$:0},miyazu:{$:0},muko:{$:0},nagaokakyo:{$:0},nakagyo:{$:0},nantan:{$:0},oyamazaki:{$:0},sakyo:{$:0},seika:{$:0},tanabe:{$:0},uji:{$:0},ujitawara:{$:0},wazuka:{$:0},yamashina:{$:0},yawata:{$:0}},mie:{$:0,asahi:{$:0},inabe:{$:0},ise:{$:0},kameyama:{$:0},kawagoe:{$:0},kiho:{$:0},kisosaki:{$:0},kiwa:{$:0},komono:{$:0},kumano:{$:0},kuwana:{$:0},matsusaka:{$:0},meiwa:{$:0},mihama:{$:0},minamiise:{$:0},misugi:{$:0},miyama:{$:0},nabari:{$:0},shima:{$:0},suzuka:{$:0},tado:{$:0},taiki:{$:0},taki:{$:0},tamaki:{$:0},toba:{$:0},tsu:{$:0},udono:{$:0},ureshino:{$:0},watarai:{$:0},yokkaichi:{$:0}},miyagi:{$:0,furukawa:{$:0},higashimatsushima:{$:0},ishinomaki:{$:0},iwanuma:{$:0},kakuda:{$:0},kami:{$:0},kawasaki:{$:0},marumori:{$:0},matsushima:{$:0},minamisanriku:{$:0},misato:{$:0},murata:{$:0},natori:{$:0},ogawara:{$:0},ohira:{$:0},onagawa:{$:0},osaki:{$:0},rifu:{$:0},semine:{$:0},shibata:{$:0},shichikashuku:{$:0},shikama:{$:0},shiogama:{$:0},shiroishi:{$:0},tagajo:{$:0},taiwa:{$:0},tome:{$:0},tomiya:{$:0},wakuya:{$:0},watari:{$:0},yamamoto:{$:0},zao:{$:0}},miyazaki:{$:0,aya:{$:0},ebino:{$:0},gokase:{$:0},hyuga:{$:0},kadogawa:{$:0},kawaminami:{$:0},kijo:{$:0},kitagawa:{$:0},kitakata:{$:0},kitaura:{$:0},kobayashi:{$:0},kunitomi:{$:0},kushima:{$:0},mimata:{$:0},miyakonojo:{$:0},miyazaki:{$:0},morotsuka:{$:0},nichinan:{$:0},nishimera:{$:0},nobeoka:{$:0},saito:{$:0},shiiba:{$:0},shintomi:{$:0},takaharu:{$:0},takanabe:{$:0},takazaki:{$:0},tsuno:{$:0}},nagano:{$:0,achi:{$:0},agematsu:{$:0},anan:{$:0},aoki:{$:0},asahi:{$:0},azumino:{$:0},chikuhoku:{$:0},chikuma:{$:0},chino:{$:0},fujimi:{$:0},hakuba:{$:0},hara:{$:0},hiraya:{$:0},iida:{$:0},iijima:{$:0},iiyama:{$:0},iizuna:{$:0},ikeda:{$:0},ikusaka:{$:0},ina:{$:0},karuizawa:{$:0},kawakami:{$:0},kiso:{$:0},kisofukushima:{$:0},kitaaiki:{$:0},komagane:{$:0},komoro:{$:0},matsukawa:{$:0},matsumoto:{$:0},miasa:{$:0},minamiaiki:{$:0},minamimaki:{$:0},minamiminowa:{$:0},minowa:{$:0},miyada:{$:0},miyota:{$:0},mochizuki:{$:0},nagano:{$:0},nagawa:{$:0},nagiso:{$:0},nakagawa:{$:0},nakano:{$:0},nozawaonsen:{$:0},obuse:{$:0},ogawa:{$:0},okaya:{$:0},omachi:{$:0},omi:{$:0},ookuwa:{$:0},ooshika:{$:0},otaki:{$:0},otari:{$:0},sakae:{$:0},sakaki:{$:0},saku:{$:0},sakuho:{$:0},shimosuwa:{$:0},shinanomachi:{$:0},shiojiri:{$:0},suwa:{$:0},suzaka:{$:0},takagi:{$:0},takamori:{$:0},takayama:{$:0},tateshina:{$:0},tatsuno:{$:0},togakushi:{$:0},togura:{$:0},tomi:{$:0},ueda:{$:0},wada:{$:0},yamagata:{$:0},yamanouchi:{$:0},yasaka:{$:0},yasuoka:{$:0}},nagasaki:{$:0,chijiwa:{$:0},futsu:{$:0},goto:{$:0},hasami:{$:0},hirado:{$:0},iki:{$:0},isahaya:{$:0},kawatana:{$:0},kuchinotsu:{$:0},matsuura:{$:0},nagasaki:{$:0},obama:{$:0},omura:{$:0},oseto:{$:0},saikai:{$:0},sasebo:{$:0},seihi:{$:0},shimabara:{$:0},shinkamigoto:{$:0},togitsu:{$:0},tsushima:{$:0},unzen:{$:0}},nara:{$:0,ando:{$:0},gose:{$:0},heguri:{$:0},higashiyoshino:{$:0},ikaruga:{$:0},ikoma:{$:0},kamikitayama:{$:0},kanmaki:{$:0},kashiba:{$:0},kashihara:{$:0},katsuragi:{$:0},kawai:{$:0},kawakami:{$:0},kawanishi:{$:0},koryo:{$:0},kurotaki:{$:0},mitsue:{$:0},miyake:{$:0},nara:{$:0},nosegawa:{$:0},oji:{$:0},ouda:{$:0},oyodo:{$:0},sakurai:{$:0},sango:{$:0},shimoichi:{$:0},shimokitayama:{$:0},shinjo:{$:0},soni:{$:0},takatori:{$:0},tawaramoto:{$:0},tenkawa:{$:0},tenri:{$:0},uda:{$:0},yamatokoriyama:{$:0},yamatotakada:{$:0},yamazoe:{$:0},yoshino:{$:0}},niigata:{$:0,aga:{$:0},agano:{$:0},gosen:{$:0},itoigawa:{$:0},izumozaki:{$:0},joetsu:{$:0},kamo:{$:0},kariwa:{$:0},kashiwazaki:{$:0},minamiuonuma:{$:0},mitsuke:{$:0},muika:{$:0},murakami:{$:0},myoko:{$:0},nagaoka:{$:0},niigata:{$:0},ojiya:{$:0},omi:{$:0},sado:{$:0},sanjo:{$:0},seiro:{$:0},seirou:{$:0},sekikawa:{$:0},shibata:{$:0},tagami:{$:0},tainai:{$:0},tochio:{$:0},tokamachi:{$:0},tsubame:{$:0},tsunan:{$:0},uonuma:{$:0},yahiko:{$:0},yoita:{$:0},yuzawa:{$:0}},oita:{$:0,beppu:{$:0},bungoono:{$:0},bungotakada:{$:0},hasama:{$:0},hiji:{$:0},himeshima:{$:0},hita:{$:0},kamitsue:{$:0},kokonoe:{$:0},kuju:{$:0},kunisaki:{$:0},kusu:{$:0},oita:{$:0},saiki:{$:0},taketa:{$:0},tsukumi:{$:0},usa:{$:0},usuki:{$:0},yufu:{$:0}},okayama:{$:0,akaiwa:{$:0},asakuchi:{$:0},bizen:{$:0},hayashima:{$:0},ibara:{$:0},kagamino:{$:0},kasaoka:{$:0},kibichuo:{$:0},kumenan:{$:0},kurashiki:{$:0},maniwa:{$:0},misaki:{$:0},nagi:{$:0},niimi:{$:0},nishiawakura:{$:0},okayama:{$:0},satosho:{$:0},setouchi:{$:0},shinjo:{$:0},shoo:{$:0},soja:{$:0},takahashi:{$:0},tamano:{$:0},tsuyama:{$:0},wake:{$:0},yakage:{$:0}},okinawa:{$:0,aguni:{$:0},ginowan:{$:0},ginoza:{$:0},gushikami:{$:0},haebaru:{$:0},higashi:{$:0},hirara:{$:0},iheya:{$:0},ishigaki:{$:0},ishikawa:{$:0},itoman:{$:0},izena:{$:0},kadena:{$:0},kin:{$:0},kitadaito:{$:0},kitanakagusuku:{$:0},kumejima:{$:0},kunigami:{$:0},minamidaito:{$:0},motobu:{$:0},nago:{$:0},naha:{$:0},nakagusuku:{$:0},nakijin:{$:0},nanjo:{$:0},nishihara:{$:0},ogimi:{$:0},okinawa:{$:0},onna:{$:0},shimoji:{$:0},taketomi:{$:0},tarama:{$:0},tokashiki:{$:0},tomigusuku:{$:0},tonaki:{$:0},urasoe:{$:0},uruma:{$:0},yaese:{$:0},yomitan:{$:0},yonabaru:{$:0},yonaguni:{$:0},zamami:{$:0}},osaka:{$:0,abeno:{$:0},chihayaakasaka:{$:0},chuo:{$:0},daito:{$:0},fujiidera:{$:0},habikino:{$:0},hannan:{$:0},higashiosaka:{$:0},higashisumiyoshi:{$:0},higashiyodogawa:{$:0},hirakata:{$:0},ibaraki:{$:0},ikeda:{$:0},izumi:{$:0},izumiotsu:{$:0},izumisano:{$:0},kadoma:{$:0},kaizuka:{$:0},kanan:{$:0},kashiwara:{$:0},katano:{$:0},kawachinagano:{$:0},kishiwada:{$:0},kita:{$:0},kumatori:{$:0},matsubara:{$:0},minato:{$:0},minoh:{$:0},misaki:{$:0},moriguchi:{$:0},neyagawa:{$:0},nishi:{$:0},nose:{$:0},osakasayama:{$:0},sakai:{$:0},sayama:{$:0},sennan:{$:0},settsu:{$:0},shijonawate:{$:0},shimamoto:{$:0},suita:{$:0},tadaoka:{$:0},taishi:{$:0},tajiri:{$:0},takaishi:{$:0},takatsuki:{$:0},tondabayashi:{$:0},toyonaka:{$:0},toyono:{$:0},yao:{$:0}},saga:{$:0,ariake:{$:0},arita:{$:0},fukudomi:{$:0},genkai:{$:0},hamatama:{$:0},hizen:{$:0},imari:{$:0},kamimine:{$:0},kanzaki:{$:0},karatsu:{$:0},kashima:{$:0},kitagata:{$:0},kitahata:{$:0},kiyama:{$:0},kouhoku:{$:0},kyuragi:{$:0},nishiarita:{$:0},ogi:{$:0},omachi:{$:0},ouchi:{$:0},saga:{$:0},shiroishi:{$:0},taku:{$:0},tara:{$:0},tosu:{$:0},yoshinogari:{$:0}},saitama:{$:0,arakawa:{$:0},asaka:{$:0},chichibu:{$:0},fujimi:{$:0},fujimino:{$:0},fukaya:{$:0},hanno:{$:0},hanyu:{$:0},hasuda:{$:0},hatogaya:{$:0},hatoyama:{$:0},hidaka:{$:0},higashichichibu:{$:0},higashimatsuyama:{$:0},honjo:{$:0},ina:{$:0},iruma:{$:0},iwatsuki:{$:0},kamiizumi:{$:0},kamikawa:{$:0},kamisato:{$:0},kasukabe:{$:0},kawagoe:{$:0},kawaguchi:{$:0},kawajima:{$:0},kazo:{$:0},kitamoto:{$:0},koshigaya:{$:0},kounosu:{$:0},kuki:{$:0},kumagaya:{$:0},matsubushi:{$:0},minano:{$:0},misato:{$:0},miyashiro:{$:0},miyoshi:{$:0},moroyama:{$:0},nagatoro:{$:0},namegawa:{$:0},niiza:{$:0},ogano:{$:0},ogawa:{$:0},ogose:{$:0},okegawa:{$:0},omiya:{$:0},otaki:{$:0},ranzan:{$:0},ryokami:{$:0},saitama:{$:0},sakado:{$:0},satte:{$:0},sayama:{$:0},shiki:{$:0},shiraoka:{$:0},soka:{$:0},sugito:{$:0},toda:{$:0},tokigawa:{$:0},tokorozawa:{$:0},tsurugashima:{$:0},urawa:{$:0},warabi:{$:0},yashio:{$:0},yokoze:{$:0},yono:{$:0},yorii:{$:0},yoshida:{$:0},yoshikawa:{$:0},yoshimi:{$:0}},shiga:{$:0,aisho:{$:0},gamo:{$:0},higashiomi:{$:0},hikone:{$:0},koka:{$:0},konan:{$:0},kosei:{$:0},koto:{$:0},kusatsu:{$:0},maibara:{$:0},moriyama:{$:0},nagahama:{$:0},nishiazai:{$:0},notogawa:{$:0},omihachiman:{$:0},otsu:{$:0},ritto:{$:0},ryuoh:{$:0},takashima:{$:0},takatsuki:{$:0},torahime:{$:0},toyosato:{$:0},yasu:{$:0}},shimane:{$:0,akagi:{$:0},ama:{$:0},gotsu:{$:0},hamada:{$:0},higashiizumo:{$:0},hikawa:{$:0},hikimi:{$:0},izumo:{$:0},kakinoki:{$:0},masuda:{$:0},matsue:{$:0},misato:{$:0},nishinoshima:{$:0},ohda:{$:0},okinoshima:{$:0},okuizumo:{$:0},shimane:{$:0},tamayu:{$:0},tsuwano:{$:0},unnan:{$:0},yakumo:{$:0},yasugi:{$:0},yatsuka:{$:0}},shizuoka:{$:0,arai:{$:0},atami:{$:0},fuji:{$:0},fujieda:{$:0},fujikawa:{$:0},fujinomiya:{$:0},fukuroi:{$:0},gotemba:{$:0},haibara:{$:0},hamamatsu:{$:0},higashiizu:{$:0},ito:{$:0},iwata:{$:0},izu:{$:0},izunokuni:{$:0},kakegawa:{$:0},kannami:{$:0},kawanehon:{$:0},kawazu:{$:0},kikugawa:{$:0},kosai:{$:0},makinohara:{$:0},matsuzaki:{$:0},minamiizu:{$:0},mishima:{$:0},morimachi:{$:0},nishiizu:{$:0},numazu:{$:0},omaezaki:{$:0},shimada:{$:0},shimizu:{$:0},shimoda:{$:0},shizuoka:{$:0},susono:{$:0},yaizu:{$:0},yoshida:{$:0}},tochigi:{$:0,ashikaga:{$:0},bato:{$:0},haga:{$:0},ichikai:{$:0},iwafune:{$:0},kaminokawa:{$:0},kanuma:{$:0},karasuyama:{$:0},kuroiso:{$:0},mashiko:{$:0},mibu:{$:0},moka:{$:0},motegi:{$:0},nasu:{$:0},nasushiobara:{$:0},nikko:{$:0},nishikata:{$:0},nogi:{$:0},ohira:{$:0},ohtawara:{$:0},oyama:{$:0},sakura:{$:0},sano:{$:0},shimotsuke:{$:0},shioya:{$:0},takanezawa:{$:0},tochigi:{$:0},tsuga:{$:0},ujiie:{$:0},utsunomiya:{$:0},yaita:{$:0}},tokushima:{$:0,aizumi:{$:0},anan:{$:0},ichiba:{$:0},itano:{$:0},kainan:{$:0},komatsushima:{$:0},matsushige:{$:0},mima:{$:0},minami:{$:0},miyoshi:{$:0},mugi:{$:0},nakagawa:{$:0},naruto:{$:0},sanagochi:{$:0},shishikui:{$:0},tokushima:{$:0},wajiki:{$:0}},tokyo:{$:0,adachi:{$:0},akiruno:{$:0},akishima:{$:0},aogashima:{$:0},arakawa:{$:0},bunkyo:{$:0},chiyoda:{$:0},chofu:{$:0},chuo:{$:0},edogawa:{$:0},fuchu:{$:0},fussa:{$:0},hachijo:{$:0},hachioji:{$:0},hamura:{$:0},higashikurume:{$:0},higashimurayama:{$:0},higashiyamato:{$:0},hino:{$:0},hinode:{$:0},hinohara:{$:0},inagi:{$:0},itabashi:{$:0},katsushika:{$:0},kita:{$:0},kiyose:{$:0},kodaira:{$:0},koganei:{$:0},kokubunji:{$:0},komae:{$:0},koto:{$:0},kouzushima:{$:0},kunitachi:{$:0},machida:{$:0},meguro:{$:0},minato:{$:0},mitaka:{$:0},mizuho:{$:0},musashimurayama:{$:0},musashino:{$:0},nakano:{$:0},nerima:{$:0},ogasawara:{$:0},okutama:{$:0},ome:{$:0},oshima:{$:0},ota:{$:0},setagaya:{$:0},shibuya:{$:0},shinagawa:{$:0},shinjuku:{$:0},suginami:{$:0},sumida:{$:0},tachikawa:{$:0},taito:{$:0},tama:{$:0},toshima:{$:0}},tottori:{$:0,chizu:{$:0},hino:{$:0},kawahara:{$:0},koge:{$:0},kotoura:{$:0},misasa:{$:0},nanbu:{$:0},nichinan:{$:0},sakaiminato:{$:0},tottori:{$:0},wakasa:{$:0},yazu:{$:0},yonago:{$:0}},toyama:{$:0,asahi:{$:0},fuchu:{$:0},fukumitsu:{$:0},funahashi:{$:0},himi:{$:0},imizu:{$:0},inami:{$:0},johana:{$:0},kamiichi:{$:0},kurobe:{$:0},nakaniikawa:{$:0},namerikawa:{$:0},nanto:{$:0},nyuzen:{$:0},oyabe:{$:0},taira:{$:0},takaoka:{$:0},tateyama:{$:0},toga:{$:0},tonami:{$:0},toyama:{$:0},unazuki:{$:0},uozu:{$:0},yamada:{$:0}},wakayama:{$:0,arida:{$:0},aridagawa:{$:0},gobo:{$:0},hashimoto:{$:0},hidaka:{$:0},hirogawa:{$:0},inami:{$:0},iwade:{$:0},kainan:{$:0},kamitonda:{$:0},katsuragi:{$:0},kimino:{$:0},kinokawa:{$:0},kitayama:{$:0},koya:{$:0},koza:{$:0},kozagawa:{$:0},kudoyama:{$:0},kushimoto:{$:0},mihama:{$:0},misato:{$:0},nachikatsuura:{$:0},shingu:{$:0},shirahama:{$:0},taiji:{$:0},tanabe:{$:0},wakayama:{$:0},yuasa:{$:0},yura:{$:0}},yamagata:{$:0,asahi:{$:0},funagata:{$:0},higashine:{$:0},iide:{$:0},kahoku:{$:0},kaminoyama:{$:0},kaneyama:{$:0},kawanishi:{$:0},mamurogawa:{$:0},mikawa:{$:0},murayama:{$:0},nagai:{$:0},nakayama:{$:0},nanyo:{$:0},nishikawa:{$:0},obanazawa:{$:0},oe:{$:0},oguni:{$:0},ohkura:{$:0},oishida:{$:0},sagae:{$:0},sakata:{$:0},sakegawa:{$:0},shinjo:{$:0},shirataka:{$:0},shonai:{$:0},takahata:{$:0},tendo:{$:0},tozawa:{$:0},tsuruoka:{$:0},yamagata:{$:0},yamanobe:{$:0},yonezawa:{$:0},yuza:{$:0}},yamaguchi:{$:0,abu:{$:0},hagi:{$:0},hikari:{$:0},hofu:{$:0},iwakuni:{$:0},kudamatsu:{$:0},mitou:{$:0},nagato:{$:0},oshima:{$:0},shimonoseki:{$:0},shunan:{$:0},tabuse:{$:0},tokuyama:{$:0},toyota:{$:0},ube:{$:0},yuu:{$:0}},yamanashi:{$:0,chuo:{$:0},doshi:{$:0},fuefuki:{$:0},fujikawa:{$:0},fujikawaguchiko:{$:0},fujiyoshida:{$:0},hayakawa:{$:0},hokuto:{$:0},ichikawamisato:{$:0},kai:{$:0},kofu:{$:0},koshu:{$:0},kosuge:{$:0},"minami-alps":{$:0},minobu:{$:0},nakamichi:{$:0},nanbu:{$:0},narusawa:{$:0},nirasaki:{$:0},nishikatsura:{$:0},oshino:{$:0},otsuki:{$:0},showa:{$:0},tabayama:{$:0},tsuru:{$:0},uenohara:{$:0},yamanakako:{$:0},yamanashi:{$:0}},"xn--4pvxs":{$:0},"xn--vgu402c":{$:0},"xn--c3s14m":{$:0},"xn--f6qx53a":{$:0},"xn--8pvr4u":{$:0},"xn--uist22h":{$:0},"xn--djrs72d6uy":{$:0},"xn--mkru45i":{$:0},"xn--0trq7p7nn":{$:0},"xn--8ltr62k":{$:0},"xn--2m4a15e":{$:0},"xn--efvn9s":{$:0},"xn--32vp30h":{$:0},"xn--4it797k":{$:0},"xn--1lqs71d":{$:0},"xn--5rtp49c":{$:0},"xn--5js045d":{$:0},"xn--ehqz56n":{$:0},"xn--1lqs03n":{$:0},"xn--qqqt11m":{$:0},"xn--kbrq7o":{$:0},"xn--pssu33l":{$:0},"xn--ntsq17g":{$:0},"xn--uisz3g":{$:0},"xn--6btw5a":{$:0},"xn--1ctwo":{$:0},"xn--6orx2r":{$:0},"xn--rht61e":{$:0},"xn--rht27z":{$:0},"xn--djty4k":{$:0},"xn--nit225k":{$:0},"xn--rht3d":{$:0},"xn--klty5x":{$:0},"xn--kltx9a":{$:0},"xn--kltp7d":{$:0},"xn--uuwu58a":{$:0},"xn--zbx025d":{$:0},"xn--ntso0iqx3a":{$:0},"xn--elqq16h":{$:0},"xn--4it168d":{$:0},"xn--klt787d":{$:0},"xn--rny31h":{$:0},"xn--7t0a264c":{$:0},"xn--5rtq34k":{$:0},"xn--k7yn95e":{$:0},"xn--tor131o":{$:0},"xn--d5qv7z876c":{$:0},kawasaki:{"*":{$:0}},kitakyushu:{"*":{$:0}},kobe:{"*":{$:0}},nagoya:{"*":{$:0}},sapporo:{"*":{$:0}},sendai:{"*":{$:0}},yokohama:{"*":{$:0}},blogspot:{$:0}},ke:{$:0,ac:{$:0},co:{$:0,blogspot:{$:0}},go:{$:0},info:{$:0},me:{$:0},mobi:{$:0},ne:{$:0},or:{$:0},sc:{$:0}},kg:{$:0,org:{$:0},net:{$:0},com:{$:0},edu:{$:0},gov:{$:0},mil:{$:0}},kh:{"*":{$:0}},ki:{$:0,edu:{$:0},biz:{$:0},net:{$:0},org:{$:0},gov:{$:0},info:{$:0},com:{$:0}},km:{$:0,org:{$:0},nom:{$:0},gov:{$:0},prd:{$:0},tm:{$:0},edu:{$:0},mil:{$:0},ass:{$:0},com:{$:0},coop:{$:0},asso:{$:0},presse:{$:0},medecin:{$:0},notaires:{$:0},pharmaciens:{$:0},veterinaire:{$:0},gouv:{$:0}},kn:{$:0,net:{$:0},org:{$:0},edu:{$:0},gov:{$:0}},kp:{$:0,com:{$:0},edu:{$:0},gov:{$:0},org:{$:0},rep:{$:0},tra:{$:0}},kr:{$:0,ac:{$:0},co:{$:0},es:{$:0},go:{$:0},hs:{$:0},kg:{$:0},mil:{$:0},ms:{$:0},ne:{$:0},or:{$:0},pe:{$:0},re:{$:0},sc:{$:0},busan:{$:0},chungbuk:{$:0},chungnam:{$:0},daegu:{$:0},daejeon:{$:0},gangwon:{$:0},gwangju:{$:0},gyeongbuk:{$:0},gyeonggi:{$:0},gyeongnam:{$:0},incheon:{$:0},jeju:{$:0},jeonbuk:{$:0},jeonnam:{$:0},seoul:{$:0},ulsan:{$:0},blogspot:{$:0}},kw:{"*":{$:0}},ky:{$:0,edu:{$:0},gov:{$:0},com:{$:0},org:{$:0},net:{$:0}},kz:{$:0,org:{$:0},edu:{$:0},net:{$:0},gov:{$:0},mil:{$:0},com:{$:0},nym:{$:0}},la:{$:0,int:{$:0},net:{$:0},info:{$:0},edu:{$:0},gov:{$:0},per:{$:0},com:{$:0},org:{$:0},bnr:{$:0},c:{$:0},nym:{$:0}},lb:{$:0,com:{$:0},edu:{$:0},gov:{$:0},net:{$:0},org:{$:0}},lc:{$:0,com:{$:0},net:{$:0},co:{$:0},org:{$:0},edu:{$:0},gov:{$:0},oy:{$:0}},li:{$:0,blogspot:{$:0},nom:{$:0},nym:{$:0}},lk:{$:0,gov:{$:0},sch:{$:0},net:{$:0},int:{$:0},com:{$:0},org:{$:0},edu:{$:0},ngo:{$:0},soc:{$:0},web:{$:0},ltd:{$:0},assn:{$:0},grp:{$:0},hotel:{$:0},ac:{$:0}},lr:{$:0,com:{$:0},edu:{$:0},gov:{$:0},org:{$:0},net:{$:0}},ls:{$:0,co:{$:0},org:{$:0}},lt:{$:0,gov:{$:0},blogspot:{$:0},nym:{$:0}},lu:{$:0,blogspot:{$:0},nym:{$:0}},lv:{$:0,com:{$:0},edu:{$:0},gov:{$:0},org:{$:0},mil:{$:0},id:{$:0},net:{$:0},asn:{$:0},conf:{$:0}},ly:{$:0,com:{$:0},net:{$:0},gov:{$:0},plc:{$:0},edu:{$:0},sch:{$:0},med:{$:0},org:{$:0},id:{$:0}},ma:{$:0,co:{$:0},net:{$:0},gov:{$:0},org:{$:0},ac:{$:0},press:{$:0}},mc:{$:0,tm:{$:0},asso:{$:0}},md:{$:0,blogspot:{$:0}},me:{$:0,co:{$:0},net:{$:0},org:{$:0},edu:{$:0},ac:{$:0},gov:{$:0},its:{$:0},priv:{$:0},c66:{$:0},daplie:{$:0,localhost:{$:0}},filegear:{$:0},brasilia:{$:0},ddns:{$:0},dnsfor:{$:0},hopto:{$:0},loginto:{$:0},noip:{$:0},webhop:{$:0},nym:{$:0},diskstation:{$:0},dscloud:{$:0},i234:{$:0},myds:{$:0},synology:{$:0},wedeploy:{$:0},yombo:{$:0}},mg:{$:0,org:{$:0},nom:{$:0},gov:{$:0},prd:{$:0},tm:{$:0},edu:{$:0},mil:{$:0},com:{$:0},co:{$:0}},mh:{$:0},mil:{$:0},mk:{$:0,com:{$:0},org:{$:0},net:{$:0},edu:{$:0},gov:{$:0},inf:{$:0},name:{$:0},blogspot:{$:0},nom:{$:0}},ml:{$:0,com:{$:0},edu:{$:0},gouv:{$:0},gov:{$:0},net:{$:0},org:{$:0},presse:{$:0}},mm:{"*":{$:0}},mn:{$:0,gov:{$:0},edu:{$:0},org:{$:0},nyc:{$:0}},mo:{$:0,com:{$:0},net:{$:0},org:{$:0},edu:{$:0},gov:{$:0}},mobi:{$:0,dscloud:{$:0}},mp:{$:0},mq:{$:0},mr:{$:0,gov:{$:0},blogspot:{$:0}},ms:{$:0,com:{$:0},edu:{$:0},gov:{$:0},net:{$:0},org:{$:0}},mt:{$:0,com:{$:0,blogspot:{$:0}},edu:{$:0},net:{$:0},org:{$:0}},mu:{$:0,com:{$:0},net:{$:0},org:{$:0},gov:{$:0},ac:{$:0},co:{$:0},or:{$:0}},museum:{$:0,academy:{$:0},agriculture:{$:0},air:{$:0},airguard:{$:0},alabama:{$:0},alaska:{$:0},amber:{$:0},ambulance:{$:0},american:{$:0},americana:{$:0},americanantiques:{$:0},americanart:{$:0},amsterdam:{$:0},and:{$:0},annefrank:{$:0},anthro:{$:0},anthropology:{$:0},antiques:{$:0},aquarium:{$:0},arboretum:{$:0},archaeological:{$:0},archaeology:{$:0},architecture:{$:0},art:{$:0},artanddesign:{$:0},artcenter:{$:0},artdeco:{$:0},arteducation:{$:0},artgallery:{$:0},arts:{$:0},artsandcrafts:{$:0},asmatart:{$:0},assassination:{$:0},assisi:{$:0},association:{$:0},astronomy:{$:0},atlanta:{$:0},austin:{$:0},australia:{$:0},automotive:{$:0},aviation:{$:0},axis:{$:0},badajoz:{$:0},baghdad:{$:0},bahn:{$:0},bale:{$:0},baltimore:{$:0},barcelona:{$:0},baseball:{$:0},basel:{$:0},baths:{$:0},bauern:{$:0},beauxarts:{$:0},beeldengeluid:{$:0},bellevue:{$:0},bergbau:{$:0},berkeley:{$:0},berlin:{$:0},bern:{$:0},bible:{$:0},bilbao:{$:0},bill:{$:0},birdart:{$:0},birthplace:{$:0},bonn:{$:0},boston:{$:0},botanical:{$:0},botanicalgarden:{$:0},botanicgarden:{$:0},botany:{$:0},brandywinevalley:{$:0},brasil:{$:0},bristol:{$:0},british:{$:0},britishcolumbia:{$:0},broadcast:{$:0},brunel:{$:0},brussel:{$:0},brussels:{$:0},bruxelles:{$:0},building:{$:0},burghof:{$:0},bus:{$:0},bushey:{$:0},cadaques:{$:0},california:{$:0},cambridge:{$:0},can:{$:0},canada:{$:0},capebreton:{$:0},carrier:{$:0},cartoonart:{$:0},casadelamoneda:{$:0},castle:{$:0},castres:{$:0},celtic:{$:0},center:{$:0},chattanooga:{$:0},cheltenham:{$:0},chesapeakebay:{$:0},chicago:{$:0},children:{$:0},childrens:{$:0},childrensgarden:{$:0},chiropractic:{$:0},chocolate:{$:0},christiansburg:{$:0},cincinnati:{$:0},cinema:{$:0},circus:{$:0},civilisation:{$:0},civilization:{$:0},civilwar:{$:0},clinton:{$:0},clock:{$:0},coal:{$:0},coastaldefence:{$:0},cody:{$:0},coldwar:{$:0},collection:{$:0},colonialwilliamsburg:{$:0},coloradoplateau:{$:0},columbia:{$:0},columbus:{$:0},communication:{$:0},communications:{$:0},community:{$:0},computer:{$:0},computerhistory:{$:0},"xn--comunicaes-v6a2o":{$:0},contemporary:{$:0},contemporaryart:{$:0},convent:{$:0},copenhagen:{$:0},corporation:{$:0},"xn--correios-e-telecomunicaes-ghc29a":{$:0},corvette:{$:0},costume:{$:0},countryestate:{$:0},county:{$:0},crafts:{$:0},cranbrook:{$:0},creation:{$:0},cultural:{$:0},culturalcenter:{$:0},culture:{$:0},cyber:{$:0},cymru:{$:0},dali:{$:0},dallas:{$:0},database:{$:0},ddr:{$:0},decorativearts:{$:0},delaware:{$:0},delmenhorst:{$:0},denmark:{$:0},depot:{$:0},design:{$:0},detroit:{$:0},dinosaur:{$:0},discovery:{$:0},dolls:{$:0},donostia:{$:0},durham:{$:0},eastafrica:{$:0},eastcoast:{$:0},education:{$:0},educational:{$:0},egyptian:{$:0},eisenbahn:{$:0},elburg:{$:0},elvendrell:{$:0},embroidery:{$:0},encyclopedic:{$:0},england:{$:0},entomology:{$:0},environment:{$:0},environmentalconservation:{$:0},epilepsy:{$:0},essex:{$:0},estate:{$:0},ethnology:{$:0},exeter:{$:0},exhibition:{$:0},family:{$:0},farm:{$:0},farmequipment:{$:0},farmers:{$:0},farmstead:{$:0},field:{$:0},figueres:{$:0},filatelia:{$:0},film:{$:0},fineart:{$:0},finearts:{$:0},finland:{$:0},flanders:{$:0},florida:{$:0},force:{$:0},fortmissoula:{$:0},fortworth:{$:0},foundation:{$:0},francaise:{$:0},frankfurt:{$:0},franziskaner:{$:0},freemasonry:{$:0},freiburg:{$:0},fribourg:{$:0},frog:{$:0},fundacio:{$:0},furniture:{$:0},gallery:{$:0},garden:{$:0},gateway:{$:0},geelvinck:{$:0},gemological:{$:0},geology:{$:0},georgia:{$:0},giessen:{$:0},glas:{$:0},glass:{$:0},gorge:{$:0},grandrapids:{$:0},graz:{$:0},guernsey:{$:0},halloffame:{$:0},hamburg:{$:0},handson:{$:0},harvestcelebration:{$:0},hawaii:{$:0},health:{$:0},heimatunduhren:{$:0},hellas:{$:0},helsinki:{$:0},hembygdsforbund:{$:0},heritage:{$:0},histoire:{$:0},historical:{$:0},historicalsociety:{$:0},historichouses:{$:0},historisch:{$:0},historisches:{$:0},history:{$:0},historyofscience:{$:0},horology:{$:0},house:{$:0},humanities:{$:0},illustration:{$:0},imageandsound:{$:0},indian:{$:0},indiana:{$:0},indianapolis:{$:0},indianmarket:{$:0},intelligence:{$:0},interactive:{$:0},iraq:{$:0},iron:{$:0},isleofman:{$:0},jamison:{$:0},jefferson:{$:0},jerusalem:{$:0},jewelry:{$:0},jewish:{$:0},jewishart:{$:0},jfk:{$:0},journalism:{$:0},judaica:{$:0},judygarland:{$:0},juedisches:{$:0},juif:{$:0},karate:{$:0},karikatur:{$:0},kids:{$:0},koebenhavn:{$:0},koeln:{$:0},kunst:{$:0},kunstsammlung:{$:0},kunstunddesign:{$:0},labor:{$:0},labour:{$:0},lajolla:{$:0},lancashire:{$:0},landes:{$:0},lans:{$:0},"xn--lns-qla":{$:0},larsson:{$:0},lewismiller:{$:0},lincoln:{$:0},linz:{$:0},living:{$:0},livinghistory:{$:0},localhistory:{$:0},london:{$:0},losangeles:{$:0},louvre:{$:0},loyalist:{$:0},lucerne:{$:0},luxembourg:{$:0},luzern:{$:0},mad:{$:0},madrid:{$:0},mallorca:{$:0},manchester:{$:0},mansion:{$:0},mansions:{$:0},manx:{$:0},marburg:{$:0},maritime:{$:0},maritimo:{$:0},maryland:{$:0},marylhurst:{$:0},media:{$:0},medical:{$:0},medizinhistorisches:{$:0},meeres:{$:0},memorial:{$:0},mesaverde:{$:0},michigan:{$:0},midatlantic:{$:0},military:{$:0},mill:{$:0},miners:{$:0},mining:{$:0},minnesota:{$:0},missile:{$:0},missoula:{$:0},modern:{$:0},moma:{$:0},money:{$:0},monmouth:{$:0},monticello:{$:0},montreal:{$:0},moscow:{$:0},motorcycle:{$:0},muenchen:{$:0},muenster:{$:0},mulhouse:{$:0},muncie:{$:0},museet:{$:0},museumcenter:{$:0},museumvereniging:{$:0},music:{$:0},national:{$:0},nationalfirearms:{$:0},nationalheritage:{$:0},nativeamerican:{$:0},naturalhistory:{$:0},naturalhistorymuseum:{$:0},naturalsciences:{$:0},nature:{$:0},naturhistorisches:{$:0},natuurwetenschappen:{$:0},naumburg:{$:0},naval:{$:0},nebraska:{$:0},neues:{$:0},newhampshire:{$:0},newjersey:{$:0},newmexico:{$:0},newport:{$:0},newspaper:{$:0},newyork:{$:0},niepce:{$:0},norfolk:{$:0},north:{$:0},nrw:{$:0},nuernberg:{$:0},nuremberg:{$:0},nyc:{$:0},nyny:{$:0},oceanographic:{$:0},oceanographique:{$:0},omaha:{$:0},online:{$:0},ontario:{$:0},openair:{$:0},oregon:{$:0},oregontrail:{$:0},otago:{$:0},oxford:{$:0},pacific:{$:0},paderborn:{$:0},palace:{$:0},paleo:{$:0},palmsprings:{$:0},panama:{$:0},paris:{$:0},pasadena:{$:0},pharmacy:{$:0},philadelphia:{$:0},philadelphiaarea:{$:0},philately:{$:0},phoenix:{$:0},photography:{$:0},pilots:{$:0},pittsburgh:{$:0},planetarium:{$:0},plantation:{$:0},plants:{$:0},plaza:{$:0},portal:{$:0},portland:{$:0},portlligat:{$:0},"posts-and-telecommunications":{$:0},preservation:{$:0},presidio:{$:0},press:{$:0},project:{$:0},public:{$:0},pubol:{$:0},quebec:{$:0},railroad:{$:0},railway:{$:0},research:{$:0},resistance:{$:0},riodejaneiro:{$:0},rochester:{$:0},rockart:{$:0},roma:{$:0},russia:{$:0},saintlouis:{$:0},salem:{$:0},salvadordali:{$:0},salzburg:{$:0},sandiego:{$:0},sanfrancisco:{$:0},santabarbara:{$:0},santacruz:{$:0},santafe:{$:0},saskatchewan:{$:0},satx:{$:0},savannahga:{$:0},schlesisches:{$:0},schoenbrunn:{$:0},schokoladen:{$:0},school:{$:0},schweiz:{$:0},science:{$:0},scienceandhistory:{$:0},scienceandindustry:{$:0},sciencecenter:{$:0},sciencecenters:{$:0},"science-fiction":{$:0},sciencehistory:{$:0},sciences:{$:0},sciencesnaturelles:{$:0},scotland:{$:0},seaport:{$:0},settlement:{$:0},settlers:{$:0},shell:{$:0},sherbrooke:{$:0},sibenik:{$:0},silk:{$:0},ski:{$:0},skole:{$:0},society:{$:0},sologne:{$:0},soundandvision:{$:0},southcarolina:{$:0},southwest:{$:0},space:{$:0},spy:{$:0},square:{$:0},stadt:{$:0},stalbans:{$:0},starnberg:{$:0},state:{$:0},stateofdelaware:{$:0},station:{$:0},steam:{$:0},steiermark:{$:0},stjohn:{$:0},stockholm:{$:0},stpetersburg:{$:0},stuttgart:{$:0},suisse:{$:0},surgeonshall:{$:0},surrey:{$:0},svizzera:{$:0},sweden:{$:0},sydney:{$:0},tank:{$:0},tcm:{$:0},technology:{$:0},telekommunikation:{$:0},television:{$:0},texas:{$:0},textile:{$:0},theater:{$:0},time:{$:0},timekeeping:{$:0},topology:{$:0},torino:{$:0},touch:{$:0},town:{$:0},transport:{$:0},tree:{$:0},trolley:{$:0},trust:{$:0},trustee:{$:0},uhren:{$:0},ulm:{$:0},undersea:{$:0},university:{$:0},usa:{$:0},usantiques:{$:0},usarts:{$:0},uscountryestate:{$:0},usculture:{$:0},usdecorativearts:{$:0},usgarden:{$:0},ushistory:{$:0},ushuaia:{$:0},uslivinghistory:{$:0},utah:{$:0},uvic:{$:0},valley:{$:0},vantaa:{$:0},versailles:{$:0},viking:{$:0},village:{$:0},virginia:{$:0},virtual:{$:0},virtuel:{$:0},vlaanderen:{$:0},volkenkunde:{$:0},wales:{$:0},wallonie:{$:0},war:{$:0},washingtondc:{$:0},watchandclock:{$:0},"watch-and-clock":{$:0},western:{$:0},westfalen:{$:0},whaling:{$:0},wildlife:{$:0},williamsburg:{$:0},windmill:{$:0},workshop:{$:0},york:{$:0},yorkshire:{$:0},yosemite:{$:0},youth:{$:0},zoological:{$:0},zoology:{$:0},"xn--9dbhblg6di":{$:0},"xn--h1aegh":{$:0}},mv:{$:0,aero:{$:0},biz:{$:0},com:{$:0},coop:{$:0},edu:{$:0},gov:{$:0},info:{$:0},int:{$:0},mil:{$:0},museum:{$:0},name:{$:0},net:{$:0},org:{$:0},pro:{$:0}},mw:{$:0,ac:{$:0},biz:{$:0},co:{$:0},com:{$:0},coop:{$:0},edu:{$:0},gov:{$:0},int:{$:0},museum:{$:0},net:{$:0},org:{$:0}},mx:{$:0,com:{$:0},org:{$:0},gob:{$:0},edu:{$:0},net:{$:0},blogspot:{$:0},nym:{$:0}},my:{$:0,com:{$:0},net:{$:0},org:{$:0},gov:{$:0},edu:{$:0},mil:{$:0},name:{$:0},blogspot:{$:0}},mz:{$:0,ac:{$:0},adv:{$:0},co:{$:0},edu:{$:0},gov:{$:0},mil:{$:0},net:{$:0},org:{$:0}},na:{$:0,info:{$:0},pro:{$:0},name:{$:0},school:{$:0},or:{$:0},dr:{$:0},us:{$:0},mx:{$:0},ca:{$:0},in:{$:0},cc:{$:0},tv:{$:0},ws:{$:0},mobi:{$:0},co:{$:0},com:{$:0},org:{$:0}},name:{$:0,her:{forgot:{$:0}},his:{forgot:{$:0}}},nc:{$:0,asso:{$:0},nom:{$:0}},ne:{$:0},net:{$:0,alwaysdata:{$:0},cloudfront:{$:0},t3l3p0rt:{$:0},myfritz:{$:0},boomla:{$:0},bplaced:{$:0},square7:{$:0},gb:{$:0},hu:{$:0},jp:{$:0},se:{$:0},uk:{$:0},in:{$:0},cloudaccess:{$:0},"cdn77-ssl":{$:0},cdn77:{r:{$:0}},"feste-ip":{$:0},"knx-server":{$:0},"static-access":{$:0},cryptonomic:{"*":{$:0}},debian:{$:0},"at-band-camp":{$:0},blogdns:{$:0},"broke-it":{$:0},buyshouses:{$:0},dnsalias:{$:0},dnsdojo:{$:0},"does-it":{$:0},dontexist:{$:0},dynalias:{$:0},dynathome:{$:0},endofinternet:{$:0},"from-az":{$:0},"from-co":{$:0},"from-la":{$:0},"from-ny":{$:0},"gets-it":{$:0},"ham-radio-op":{$:0},homeftp:{$:0},homeip:{$:0},homelinux:{$:0},homeunix:{$:0},"in-the-band":{$:0},"is-a-chef":{$:0},"is-a-geek":{$:0},"isa-geek":{$:0},"kicks-ass":{$:0},"office-on-the":{$:0},podzone:{$:0},"scrapper-site":{$:0},selfip:{$:0},"sells-it":{$:0},servebbs:{$:0},serveftp:{$:0},thruhere:{$:0},webhop:{$:0},definima:{$:0},casacam:{$:0},dynu:{$:0},dynv6:{$:0},twmail:{$:0},ru:{$:0},channelsdvr:{$:0},fastlylb:{$:0,map:{$:0}},fastly:{freetls:{$:0},map:{$:0},prod:{a:{$:0},global:{$:0}},ssl:{a:{$:0},b:{$:0},global:{$:0}}},flynnhosting:{$:0},cloudfunctions:{$:0},moonscale:{$:0},ipifony:{$:0},barsy:{$:0},azurewebsites:{$:0},"azure-mobile":{$:0},cloudapp:{$:0},"eating-organic":{$:0},mydissent:{$:0},myeffect:{$:0},mymediapc:{$:0},mypsx:{$:0},mysecuritycamera:{$:0},nhlfan:{$:0},"no-ip":{$:0},pgafan:{$:0},privatizehealthinsurance:{$:0},bounceme:{$:0},ddns:{$:0},redirectme:{$:0},serveblog:{$:0},serveminecraft:{$:0},sytes:{$:0},rackmaze:{$:0},"firewall-gateway":{$:0},dsmynas:{$:0},familyds:{$:0},za:{$:0}},nf:{$:0,com:{$:0},net:{$:0},per:{$:0},rec:{$:0},web:{$:0},arts:{$:0},firm:{$:0},info:{$:0},other:{$:0},store:{$:0}},ng:{$:0,com:{$:0,blogspot:{$:0}},edu:{$:0},gov:{$:0},i:{$:0},mil:{$:0},mobi:{$:0},name:{$:0},net:{$:0},org:{$:0},sch:{$:0}},ni:{$:0,ac:{$:0},biz:{$:0},co:{$:0},com:{$:0},edu:{$:0},gob:{$:0},in:{$:0},info:{$:0},int:{$:0},mil:{$:0},net:{$:0},nom:{$:0},org:{$:0},web:{$:0}},nl:{$:0,bv:{$:0},virtueeldomein:{$:0},co:{$:0},"hosting-cluster":{$:0},blogspot:{$:0},transurl:{"*":{$:0}},cistron:{$:0},demon:{$:0}},no:{$:0,fhs:{$:0},vgs:{$:0},fylkesbibl:{$:0},folkebibl:{$:0},museum:{$:0},idrett:{$:0},priv:{$:0},mil:{$:0},stat:{$:0},dep:{$:0},kommune:{$:0},herad:{$:0},aa:{$:0,gs:{$:0}},ah:{$:0,gs:{$:0}},bu:{$:0,gs:{$:0}},fm:{$:0,gs:{$:0}},hl:{$:0,gs:{$:0}},hm:{$:0,gs:{$:0}},"jan-mayen":{$:0,gs:{$:0}},mr:{$:0,gs:{$:0}},nl:{$:0,gs:{$:0}},nt:{$:0,gs:{$:0}},of:{$:0,gs:{$:0}},ol:{$:0,gs:{$:0}},oslo:{$:0,gs:{$:0}},rl:{$:0,gs:{$:0}},sf:{$:0,gs:{$:0}},st:{$:0,gs:{$:0}},svalbard:{$:0,gs:{$:0}},tm:{$:0,gs:{$:0}},tr:{$:0,gs:{$:0}},va:{$:0,gs:{$:0}},vf:{$:0,gs:{$:0}},akrehamn:{$:0},"xn--krehamn-dxa":{$:0},algard:{$:0},"xn--lgrd-poac":{$:0},arna:{$:0},brumunddal:{$:0},bryne:{$:0},bronnoysund:{$:0},"xn--brnnysund-m8ac":{$:0},drobak:{$:0},"xn--drbak-wua":{$:0},egersund:{$:0},fetsund:{$:0},floro:{$:0},"xn--flor-jra":{$:0},fredrikstad:{$:0},hokksund:{$:0},honefoss:{$:0},"xn--hnefoss-q1a":{$:0},jessheim:{$:0},jorpeland:{$:0},"xn--jrpeland-54a":{$:0},kirkenes:{$:0},kopervik:{$:0},krokstadelva:{$:0},langevag:{$:0},"xn--langevg-jxa":{$:0},leirvik:{$:0},mjondalen:{$:0},"xn--mjndalen-64a":{$:0},"mo-i-rana":{$:0},mosjoen:{$:0},"xn--mosjen-eya":{$:0},nesoddtangen:{$:0},orkanger:{$:0},osoyro:{$:0},"xn--osyro-wua":{$:0},raholt:{$:0},"xn--rholt-mra":{$:0},sandnessjoen:{$:0},"xn--sandnessjen-ogb":{$:0},skedsmokorset:{$:0},slattum:{$:0},spjelkavik:{$:0},stathelle:{$:0},stavern:{$:0},stjordalshalsen:{$:0},"xn--stjrdalshalsen-sqb":{$:0},tananger:{$:0},tranby:{$:0},vossevangen:{$:0},afjord:{$:0},"xn--fjord-lra":{$:0},agdenes:{$:0},al:{$:0},"xn--l-1fa":{$:0},alesund:{$:0},"xn--lesund-hua":{$:0},alstahaug:{$:0},alta:{$:0},"xn--lt-liac":{$:0},alaheadju:{$:0},"xn--laheadju-7ya":{$:0},alvdal:{$:0},amli:{$:0},"xn--mli-tla":{$:0},amot:{$:0},"xn--mot-tla":{$:0},andebu:{$:0},andoy:{$:0},"xn--andy-ira":{$:0},andasuolo:{$:0},ardal:{$:0},"xn--rdal-poa":{$:0},aremark:{$:0},arendal:{$:0},"xn--s-1fa":{$:0},aseral:{$:0},"xn--seral-lra":{$:0},asker:{$:0},askim:{$:0},askvoll:{$:0},askoy:{$:0},"xn--asky-ira":{$:0},asnes:{$:0},"xn--snes-poa":{$:0},audnedaln:{$:0},aukra:{$:0},aure:{$:0},aurland:{$:0},"aurskog-holand":{$:0},"xn--aurskog-hland-jnb":{$:0},austevoll:{$:0},austrheim:{$:0},averoy:{$:0},"xn--avery-yua":{$:0},balestrand:{$:0},ballangen:{$:0},balat:{$:0},"xn--blt-elab":{$:0},balsfjord:{$:0},bahccavuotna:{$:0},"xn--bhccavuotna-k7a":{$:0},bamble:{$:0},bardu:{$:0},beardu:{$:0},beiarn:{$:0},bajddar:{$:0},"xn--bjddar-pta":{$:0},baidar:{$:0},"xn--bidr-5nac":{$:0},berg:{$:0},bergen:{$:0},berlevag:{$:0},"xn--berlevg-jxa":{$:0},bearalvahki:{$:0},"xn--bearalvhki-y4a":{$:0},bindal:{$:0},birkenes:{$:0},bjarkoy:{$:0},"xn--bjarky-fya":{$:0},bjerkreim:{$:0},bjugn:{$:0},bodo:{$:0},"xn--bod-2na":{$:0},badaddja:{$:0},"xn--bdddj-mrabd":{$:0},budejju:{$:0},bokn:{$:0},bremanger:{$:0},bronnoy:{$:0},"xn--brnny-wuac":{$:0},bygland:{$:0},bykle:{$:0},barum:{$:0},"xn--brum-voa":{$:0},telemark:{bo:{$:0},"xn--b-5ga":{$:0}},nordland:{bo:{$:0},"xn--b-5ga":{$:0},heroy:{$:0},"xn--hery-ira":{$:0}},bievat:{$:0},"xn--bievt-0qa":{$:0},bomlo:{$:0},"xn--bmlo-gra":{$:0},batsfjord:{$:0},"xn--btsfjord-9za":{$:0},bahcavuotna:{$:0},"xn--bhcavuotna-s4a":{$:0},dovre:{$:0},drammen:{$:0},drangedal:{$:0},dyroy:{$:0},"xn--dyry-ira":{$:0},donna:{$:0},"xn--dnna-gra":{$:0},eid:{$:0},eidfjord:{$:0},eidsberg:{$:0},eidskog:{$:0},eidsvoll:{$:0},eigersund:{$:0},elverum:{$:0},enebakk:{$:0},engerdal:{$:0},etne:{$:0},etnedal:{$:0},evenes:{$:0},evenassi:{$:0},"xn--eveni-0qa01ga":{$:0},"evje-og-hornnes":{$:0},farsund:{$:0},fauske:{$:0},fuossko:{$:0},fuoisku:{$:0},fedje:{$:0},fet:{$:0},finnoy:{$:0},"xn--finny-yua":{$:0},fitjar:{$:0},fjaler:{$:0},fjell:{$:0},flakstad:{$:0},flatanger:{$:0},flekkefjord:{$:0},flesberg:{$:0},flora:{$:0},fla:{$:0},"xn--fl-zia":{$:0},folldal:{$:0},forsand:{$:0},fosnes:{$:0},frei:{$:0},frogn:{$:0},froland:{$:0},frosta:{$:0},frana:{$:0},"xn--frna-woa":{$:0},froya:{$:0},"xn--frya-hra":{$:0},fusa:{$:0},fyresdal:{$:0},forde:{$:0},"xn--frde-gra":{$:0},gamvik:{$:0},gangaviika:{$:0},"xn--ggaviika-8ya47h":{$:0},gaular:{$:0},gausdal:{$:0},gildeskal:{$:0},"xn--gildeskl-g0a":{$:0},giske:{$:0},gjemnes:{$:0},gjerdrum:{$:0},gjerstad:{$:0},gjesdal:{$:0},gjovik:{$:0},"xn--gjvik-wua":{$:0},gloppen:{$:0},gol:{$:0},gran:{$:0},grane:{$:0},granvin:{$:0},gratangen:{$:0},grimstad:{$:0},grong:{$:0},kraanghke:{$:0},"xn--kranghke-b0a":{$:0},grue:{$:0},gulen:{$:0},hadsel:{$:0},halden:{$:0},halsa:{$:0},hamar:{$:0},hamaroy:{$:0},habmer:{$:0},"xn--hbmer-xqa":{$:0},hapmir:{$:0},"xn--hpmir-xqa":{$:0},hammerfest:{$:0},hammarfeasta:{$:0},"xn--hmmrfeasta-s4ac":{$:0},haram:{$:0},hareid:{$:0},harstad:{$:0},hasvik:{$:0},aknoluokta:{$:0},"xn--koluokta-7ya57h":{$:0},hattfjelldal:{$:0},aarborte:{$:0},haugesund:{$:0},hemne:{$:0},hemnes:{$:0},hemsedal:{$:0},"more-og-romsdal":{heroy:{$:0},sande:{$:0}},"xn--mre-og-romsdal-qqb":{"xn--hery-ira":{$:0},sande:{$:0}},hitra:{$:0},hjartdal:{$:0},hjelmeland:{$:0},hobol:{$:0},"xn--hobl-ira":{$:0},hof:{$:0},hol:{$:0},hole:{$:0},holmestrand:{$:0},holtalen:{$:0},"xn--holtlen-hxa":{$:0},hornindal:{$:0},horten:{$:0},hurdal:{$:0},hurum:{$:0},hvaler:{$:0},hyllestad:{$:0},hagebostad:{$:0},"xn--hgebostad-g3a":{$:0},hoyanger:{$:0},"xn--hyanger-q1a":{$:0},hoylandet:{$:0},"xn--hylandet-54a":{$:0},ha:{$:0},"xn--h-2fa":{$:0},ibestad:{$:0},inderoy:{$:0},"xn--indery-fya":{$:0},iveland:{$:0},jevnaker:{$:0},jondal:{$:0},jolster:{$:0},"xn--jlster-bya":{$:0},karasjok:{$:0},karasjohka:{$:0},"xn--krjohka-hwab49j":{$:0},karlsoy:{$:0},galsa:{$:0},"xn--gls-elac":{$:0},karmoy:{$:0},"xn--karmy-yua":{$:0},kautokeino:{$:0},guovdageaidnu:{$:0},klepp:{$:0},klabu:{$:0},"xn--klbu-woa":{$:0},kongsberg:{$:0},kongsvinger:{$:0},kragero:{$:0},"xn--krager-gya":{$:0},kristiansand:{$:0},kristiansund:{$:0},krodsherad:{$:0},"xn--krdsherad-m8a":{$:0},kvalsund:{$:0},rahkkeravju:{$:0},"xn--rhkkervju-01af":{$:0},kvam:{$:0},kvinesdal:{$:0},kvinnherad:{$:0},kviteseid:{$:0},kvitsoy:{$:0},"xn--kvitsy-fya":{$:0},kvafjord:{$:0},"xn--kvfjord-nxa":{$:0},giehtavuoatna:{$:0},kvanangen:{$:0},"xn--kvnangen-k0a":{$:0},navuotna:{$:0},"xn--nvuotna-hwa":{$:0},kafjord:{$:0},"xn--kfjord-iua":{$:0},gaivuotna:{$:0},"xn--givuotna-8ya":{$:0},larvik:{$:0},lavangen:{$:0},lavagis:{$:0},loabat:{$:0},"xn--loabt-0qa":{$:0},lebesby:{$:0},davvesiida:{$:0},leikanger:{$:0},leirfjord:{$:0},leka:{$:0},leksvik:{$:0},lenvik:{$:0},leangaviika:{$:0},"xn--leagaviika-52b":{$:0},lesja:{$:0},levanger:{$:0},lier:{$:0},lierne:{$:0},lillehammer:{$:0},lillesand:{$:0},lindesnes:{$:0},lindas:{$:0},"xn--linds-pra":{$:0},lom:{$:0},loppa:{$:0},lahppi:{$:0},"xn--lhppi-xqa":{$:0},lund:{$:0},lunner:{$:0},luroy:{$:0},"xn--lury-ira":{$:0},luster:{$:0},lyngdal:{$:0},lyngen:{$:0},ivgu:{$:0},lardal:{$:0},lerdal:{$:0},"xn--lrdal-sra":{$:0},lodingen:{$:0},"xn--ldingen-q1a":{$:0},lorenskog:{$:0},"xn--lrenskog-54a":{$:0},loten:{$:0},"xn--lten-gra":{$:0},malvik:{$:0},masoy:{$:0},"xn--msy-ula0h":{$:0},muosat:{$:0},"xn--muost-0qa":{$:0},mandal:{$:0},marker:{$:0},marnardal:{$:0},masfjorden:{$:0},meland:{$:0},meldal:{$:0},melhus:{$:0},meloy:{$:0},"xn--mely-ira":{$:0},meraker:{$:0},"xn--merker-kua":{$:0},moareke:{$:0},"xn--moreke-jua":{$:0},midsund:{$:0},"midtre-gauldal":{$:0},modalen:{$:0},modum:{$:0},molde:{$:0},moskenes:{$:0},moss:{$:0},mosvik:{$:0},malselv:{$:0},"xn--mlselv-iua":{$:0},malatvuopmi:{$:0},"xn--mlatvuopmi-s4a":{$:0},namdalseid:{$:0},aejrie:{$:0},namsos:{$:0},namsskogan:{$:0},naamesjevuemie:{$:0},"xn--nmesjevuemie-tcba":{$:0},laakesvuemie:{$:0},nannestad:{$:0},narvik:{$:0},narviika:{$:0},naustdal:{$:0},"nedre-eiker":{$:0},akershus:{nes:{$:0}},buskerud:{nes:{$:0}},nesna:{$:0},nesodden:{$:0},nesseby:{$:0},unjarga:{$:0},"xn--unjrga-rta":{$:0},nesset:{$:0},nissedal:{$:0},nittedal:{$:0},"nord-aurdal":{$:0},"nord-fron":{$:0},"nord-odal":{$:0},norddal:{$:0},nordkapp:{$:0},davvenjarga:{$:0},"xn--davvenjrga-y4a":{$:0},"nordre-land":{$:0},nordreisa:{$:0},raisa:{$:0},"xn--risa-5na":{$:0},"nore-og-uvdal":{$:0},notodden:{$:0},naroy:{$:0},"xn--nry-yla5g":{$:0},notteroy:{$:0},"xn--nttery-byae":{$:0},odda:{$:0},oksnes:{$:0},"xn--ksnes-uua":{$:0},oppdal:{$:0},oppegard:{$:0},"xn--oppegrd-ixa":{$:0},orkdal:{$:0},orland:{$:0},"xn--rland-uua":{$:0},orskog:{$:0},"xn--rskog-uua":{$:0},orsta:{$:0},"xn--rsta-fra":{$:0},hedmark:{os:{$:0},valer:{$:0},"xn--vler-qoa":{$:0}},hordaland:{os:{$:0}},osen:{$:0},osteroy:{$:0},"xn--ostery-fya":{$:0},"ostre-toten":{$:0},"xn--stre-toten-zcb":{$:0},overhalla:{$:0},"ovre-eiker":{$:0},"xn--vre-eiker-k8a":{$:0},oyer:{$:0},"xn--yer-zna":{$:0},oygarden:{$:0},"xn--ygarden-p1a":{$:0},"oystre-slidre":{$:0},"xn--ystre-slidre-ujb":{$:0},porsanger:{$:0},porsangu:{$:0},"xn--porsgu-sta26f":{$:0},porsgrunn:{$:0},radoy:{$:0},"xn--rady-ira":{$:0},rakkestad:{$:0},rana:{$:0},ruovat:{$:0},randaberg:{$:0},rauma:{$:0},rendalen:{$:0},rennebu:{$:0},rennesoy:{$:0},"xn--rennesy-v1a":{$:0},rindal:{$:0},ringebu:{$:0},ringerike:{$:0},ringsaker:{$:0},rissa:{$:0},risor:{$:0},"xn--risr-ira":{$:0},roan:{$:0},rollag:{$:0},rygge:{$:0},ralingen:{$:0},"xn--rlingen-mxa":{$:0},rodoy:{$:0},"xn--rdy-0nab":{$:0},romskog:{$:0},"xn--rmskog-bya":{$:0},roros:{$:0},"xn--rros-gra":{$:0},rost:{$:0},"xn--rst-0na":{$:0},royken:{$:0},"xn--ryken-vua":{$:0},royrvik:{$:0},"xn--ryrvik-bya":{$:0},rade:{$:0},"xn--rde-ula":{$:0},salangen:{$:0},siellak:{$:0},saltdal:{$:0},salat:{$:0},"xn--slt-elab":{$:0},"xn--slat-5na":{$:0},samnanger:{$:0},vestfold:{sande:{$:0}},sandefjord:{$:0},sandnes:{$:0},sandoy:{$:0},"xn--sandy-yua":{$:0},sarpsborg:{$:0},sauda:{$:0},sauherad:{$:0},sel:{$:0},selbu:{$:0},selje:{$:0},seljord:{$:0},sigdal:{$:0},siljan:{$:0},sirdal:{$:0},skaun:{$:0},skedsmo:{$:0},ski:{$:0},skien:{$:0},skiptvet:{$:0},skjervoy:{$:0},"xn--skjervy-v1a":{$:0},skierva:{$:0},"xn--skierv-uta":{$:0},skjak:{$:0},"xn--skjk-soa":{$:0},skodje:{$:0},skanland:{$:0},"xn--sknland-fxa":{$:0},skanit:{$:0},"xn--sknit-yqa":{$:0},smola:{$:0},"xn--smla-hra":{$:0},snillfjord:{$:0},snasa:{$:0},"xn--snsa-roa":{$:0},snoasa:{$:0},snaase:{$:0},"xn--snase-nra":{$:0},sogndal:{$:0},sokndal:{$:0},sola:{$:0},solund:{$:0},songdalen:{$:0},sortland:{$:0},spydeberg:{$:0},stange:{$:0},stavanger:{$:0},steigen:{$:0},steinkjer:{$:0},stjordal:{$:0},"xn--stjrdal-s1a":{$:0},stokke:{$:0},"stor-elvdal":{$:0},stord:{$:0},stordal:{$:0},storfjord:{$:0},omasvuotna:{$:0},strand:{$:0},stranda:{$:0},stryn:{$:0},sula:{$:0},suldal:{$:0},sund:{$:0},sunndal:{$:0},surnadal:{$:0},sveio:{$:0},svelvik:{$:0},sykkylven:{$:0},sogne:{$:0},"xn--sgne-gra":{$:0},somna:{$:0},"xn--smna-gra":{$:0},"sondre-land":{$:0},"xn--sndre-land-0cb":{$:0},"sor-aurdal":{$:0},"xn--sr-aurdal-l8a":{$:0},"sor-fron":{$:0},"xn--sr-fron-q1a":{$:0},"sor-odal":{$:0},"xn--sr-odal-q1a":{$:0},"sor-varanger":{$:0},"xn--sr-varanger-ggb":{$:0},"matta-varjjat":{$:0},"xn--mtta-vrjjat-k7af":{$:0},sorfold:{$:0},"xn--srfold-bya":{$:0},sorreisa:{$:0},"xn--srreisa-q1a":{$:0},sorum:{$:0},"xn--srum-gra":{$:0},tana:{$:0},deatnu:{$:0},time:{$:0},tingvoll:{$:0},tinn:{$:0},tjeldsund:{$:0},dielddanuorri:{$:0},tjome:{$:0},"xn--tjme-hra":{$:0},tokke:{$:0},tolga:{$:0},torsken:{$:0},tranoy:{$:0},"xn--trany-yua":{$:0},tromso:{$:0},"xn--troms-zua":{$:0},tromsa:{$:0},romsa:{$:0},trondheim:{$:0},troandin:{$:0},trysil:{$:0},trana:{$:0},"xn--trna-woa":{$:0},trogstad:{$:0},"xn--trgstad-r1a":{$:0},tvedestrand:{$:0},tydal:{$:0},tynset:{$:0},tysfjord:{$:0},divtasvuodna:{$:0},divttasvuotna:{$:0},tysnes:{$:0},tysvar:{$:0},"xn--tysvr-vra":{$:0},tonsberg:{$:0},"xn--tnsberg-q1a":{$:0},ullensaker:{$:0},ullensvang:{$:0},ulvik:{$:0},utsira:{$:0},vadso:{$:0},"xn--vads-jra":{$:0},cahcesuolo:{$:0},"xn--hcesuolo-7ya35b":{$:0},vaksdal:{$:0},valle:{$:0},vang:{$:0},vanylven:{$:0},vardo:{$:0},"xn--vard-jra":{$:0},varggat:{$:0},"xn--vrggt-xqad":{$:0},vefsn:{$:0},vaapste:{$:0},vega:{$:0},vegarshei:{$:0},"xn--vegrshei-c0a":{$:0},vennesla:{$:0},verdal:{$:0},verran:{$:0},vestby:{$:0},vestnes:{$:0},"vestre-slidre":{$:0},"vestre-toten":{$:0},vestvagoy:{$:0},"xn--vestvgy-ixa6o":{$:0},vevelstad:{$:0},vik:{$:0},vikna:{$:0},vindafjord:{$:0},volda:{$:0},voss:{$:0},varoy:{$:0},"xn--vry-yla5g":{$:0},vagan:{$:0},"xn--vgan-qoa":{$:0},voagat:{$:0},vagsoy:{$:0},"xn--vgsy-qoa0j":{$:0},vaga:{$:0},"xn--vg-yiab":{$:0},ostfold:{valer:{$:0}},"xn--stfold-9xa":{"xn--vler-qoa":{$:0}},co:{$:0},blogspot:{$:0}},np:{"*":{$:0}},nr:{$:0,biz:{$:0},info:{$:0},gov:{$:0},edu:{$:0},org:{$:0},net:{$:0},com:{$:0}},nu:{$:0,merseine:{$:0},mine:{$:0},shacknet:{$:0},nom:{$:0}},nz:{$:0,ac:{$:0},co:{$:0,blogspot:{$:0}},cri:{$:0},geek:{$:0},gen:{$:0},govt:{$:0},health:{$:0},iwi:{$:0},kiwi:{$:0},maori:{$:0},mil:{$:0},"xn--mori-qsa":{$:0},net:{$:0},org:{$:0},parliament:{$:0},school:{$:0},nym:{$:0}},om:{$:0,co:{$:0},com:{$:0},edu:{$:0},gov:{$:0},med:{$:0},museum:{$:0},net:{$:0},org:{$:0},pro:{$:0}},onion:{$:0},org:{$:0,amune:{tele:{$:0}},pimienta:{$:0},poivron:{$:0},potager:{$:0},sweetpepper:{$:0},ae:{$:0},us:{$:0},certmgr:{$:0},cdn77:{c:{$:0},rsc:{$:0}},"cdn77-secure":{origin:{ssl:{$:0}}},cloudns:{$:0},duckdns:{$:0},tunk:{$:0},dyndns:{$:0,go:{$:0},home:{$:0}},blogdns:{$:0},blogsite:{$:0},boldlygoingnowhere:{$:0},dnsalias:{$:0},dnsdojo:{$:0},doesntexist:{$:0},dontexist:{$:0},doomdns:{$:0},dvrdns:{$:0},dynalias:{$:0},endofinternet:{$:0},endoftheinternet:{$:0},"from-me":{$:0},"game-host":{$:0},gotdns:{$:0},"hobby-site":{$:0},homedns:{$:0},homeftp:{$:0},homelinux:{$:0},homeunix:{$:0},"is-a-bruinsfan":{$:0},"is-a-candidate":{$:0},"is-a-celticsfan":{$:0},"is-a-chef":{$:0},"is-a-geek":{$:0},"is-a-knight":{$:0},"is-a-linux-user":{$:0},"is-a-patsfan":{$:0},"is-a-soxfan":{$:0},"is-found":{$:0},"is-lost":{$:0},"is-saved":{$:0},"is-very-bad":{$:0},"is-very-evil":{$:0},"is-very-good":{$:0},"is-very-nice":{$:0},"is-very-sweet":{$:0},"isa-geek":{$:0},"kicks-ass":{$:0},misconfused:{$:0},podzone:{$:0},readmyblog:{$:0},selfip:{$:0},sellsyourhome:{$:0},servebbs:{$:0},serveftp:{$:0},servegame:{$:0},"stuff-4-sale":{$:0},webhop:{$:0},ddnss:{$:0},accesscam:{$:0},camdvr:{$:0},freeddns:{$:0},mywire:{$:0},webredirect:{$:0},eu:{$:0,al:{$:0},asso:{$:0},at:{$:0},au:{$:0},be:{$:0},bg:{$:0},ca:{$:0},cd:{$:0},ch:{$:0},cn:{$:0},cy:{$:0},cz:{$:0},de:{$:0},dk:{$:0},edu:{$:0},ee:{$:0},es:{$:0},fi:{$:0},fr:{$:0},gr:{$:0},hr:{$:0},hu:{$:0},ie:{$:0},il:{$:0},in:{$:0},int:{$:0},is:{$:0},it:{$:0},jp:{$:0},kr:{$:0},lt:{$:0},lu:{$:0},lv:{$:0},mc:{$:0},me:{$:0},mk:{$:0},mt:{$:0},my:{$:0},net:{$:0},ng:{$:0},nl:{$:0},no:{$:0},nz:{$:0},paris:{$:0},pl:{$:0},pt:{$:0},"q-a":{$:0},ro:{$:0},ru:{$:0},se:{$:0},si:{$:0},sk:{$:0},tr:{$:0},uk:{$:0},us:{$:0}},twmail:{$:0},fedorainfracloud:{$:0},fedorapeople:{$:0},fedoraproject:{cloud:{$:0},os:{app:{$:0}},stg:{os:{app:{$:0}}}},hepforge:{$:0},js:{$:0},bmoattachments:{$:0},"cable-modem":{$:0},collegefan:{$:0},couchpotatofries:{$:0},mlbfan:{$:0},mysecuritycamera:{$:0},nflfan:{$:0},"read-books":{$:0},ufcfan:{$:0},hopto:{$:0},myftp:{$:0},"no-ip":{$:0},zapto:{$:0},"my-firewall":{$:0},myfirewall:{$:0},spdns:{$:0},dsmynas:{$:0},familyds:{$:0},tuxfamily:{$:0},diskstation:{$:0},hk:{$:0},wmflabs:{$:0},za:{$:0}},pa:{$:0,ac:{$:0},gob:{$:0},com:{$:0},org:{$:0},sld:{$:0},edu:{$:0},net:{$:0},ing:{$:0},abo:{$:0},med:{$:0},nom:{$:0}},pe:{$:0,edu:{$:0},gob:{$:0},nom:{$:0},mil:{$:0},org:{$:0},com:{$:0},net:{$:0},blogspot:{$:0},nym:{$:0}},pf:{$:0,com:{$:0},org:{$:0},edu:{$:0}},pg:{"*":{$:0}},ph:{$:0,com:{$:0},net:{$:0},org:{$:0},gov:{$:0},edu:{$:0},ngo:{$:0},mil:{$:0},i:{$:0}},pk:{$:0,com:{$:0},net:{$:0},edu:{$:0},org:{$:0},fam:{$:0},biz:{$:0},web:{$:0},gov:{$:0},gob:{$:0},gok:{$:0},gon:{$:0},gop:{$:0},gos:{$:0},info:{$:0}},pl:{$:0,com:{$:0},net:{$:0},org:{$:0},aid:{$:0},agro:{$:0},atm:{$:0},auto:{$:0},biz:{$:0},edu:{$:0},gmina:{$:0},gsm:{$:0},info:{$:0},mail:{$:0},miasta:{$:0},media:{$:0},mil:{$:0},nieruchomosci:{$:0},nom:{$:0},pc:{$:0},powiat:{$:0},priv:{$:0},realestate:{$:0},rel:{$:0},sex:{$:0},shop:{$:0},sklep:{$:0},sos:{$:0},szkola:{$:0},targi:{$:0},tm:{$:0},tourism:{$:0},travel:{$:0},turystyka:{$:0},gov:{$:0,ap:{$:0},ic:{$:0},is:{$:0},us:{$:0},kmpsp:{$:0},kppsp:{$:0},kwpsp:{$:0},psp:{$:0},wskr:{$:0},kwp:{$:0},mw:{$:0},ug:{$:0},um:{$:0},umig:{$:0},ugim:{$:0},upow:{$:0},uw:{$:0},starostwo:{$:0},pa:{$:0},po:{$:0},psse:{$:0},pup:{$:0},rzgw:{$:0},sa:{$:0},so:{$:0},sr:{$:0},wsa:{$:0},sko:{$:0},uzs:{$:0},wiih:{$:0},winb:{$:0},pinb:{$:0},wios:{$:0},witd:{$:0},wzmiuw:{$:0},piw:{$:0},wiw:{$:0},griw:{$:0},wif:{$:0},oum:{$:0},sdn:{$:0},zp:{$:0},uppo:{$:0},mup:{$:0},wuoz:{$:0},konsulat:{$:0},oirm:{$:0}},augustow:{$:0},"babia-gora":{$:0},bedzin:{$:0},beskidy:{$:0},bialowieza:{$:0},bialystok:{$:0},bielawa:{$:0},bieszczady:{$:0},boleslawiec:{$:0},bydgoszcz:{$:0},bytom:{$:0},cieszyn:{$:0},czeladz:{$:0},czest:{$:0},dlugoleka:{$:0},elblag:{$:0},elk:{$:0},glogow:{$:0},gniezno:{$:0},gorlice:{$:0},grajewo:{$:0},ilawa:{$:0},jaworzno:{$:0},"jelenia-gora":{$:0},jgora:{$:0},kalisz:{$:0},"kazimierz-dolny":{$:0},karpacz:{$:0},kartuzy:{$:0},kaszuby:{$:0},katowice:{$:0},kepno:{$:0},ketrzyn:{$:0},klodzko:{$:0},kobierzyce:{$:0},kolobrzeg:{$:0},konin:{$:0},konskowola:{$:0},kutno:{$:0},lapy:{$:0},lebork:{$:0},legnica:{$:0},lezajsk:{$:0},limanowa:{$:0},lomza:{$:0},lowicz:{$:0},lubin:{$:0},lukow:{$:0},malbork:{$:0},malopolska:{$:0},mazowsze:{$:0},mazury:{$:0},mielec:{$:0},mielno:{$:0},mragowo:{$:0},naklo:{$:0},nowaruda:{$:0},nysa:{$:0},olawa:{$:0},olecko:{$:0},olkusz:{$:0},olsztyn:{$:0},opoczno:{$:0},opole:{$:0},ostroda:{$:0},ostroleka:{$:0},ostrowiec:{$:0},ostrowwlkp:{$:0},pila:{$:0},pisz:{$:0},podhale:{$:0},podlasie:{$:0},polkowice:{$:0},pomorze:{$:0},pomorskie:{$:0},prochowice:{$:0},pruszkow:{$:0},przeworsk:{$:0},pulawy:{$:0},radom:{$:0},"rawa-maz":{$:0},rybnik:{$:0},rzeszow:{$:0},sanok:{$:0},sejny:{$:0},slask:{$:0},slupsk:{$:0},sosnowiec:{$:0},"stalowa-wola":{$:0},skoczow:{$:0},starachowice:{$:0},stargard:{$:0},suwalki:{$:0},swidnica:{$:0},swiebodzin:{$:0},swinoujscie:{$:0},szczecin:{$:0},szczytno:{$:0},tarnobrzeg:{$:0},tgory:{$:0},turek:{$:0},tychy:{$:0},ustka:{$:0},walbrzych:{$:0},warmia:{$:0},warszawa:{$:0},waw:{$:0},wegrow:{$:0},wielun:{$:0},wlocl:{$:0},wloclawek:{$:0},wodzislaw:{$:0},wolomin:{$:0},wroclaw:{$:0},zachpomor:{$:0},zagan:{$:0},zarow:{$:0},zgora:{$:0},zgorzelec:{$:0},beep:{$:0},co:{$:0},art:{$:0},gliwice:{$:0},krakow:{$:0},poznan:{$:0},wroc:{$:0},zakopane:{$:0},gda:{$:0},gdansk:{$:0},gdynia:{$:0},med:{$:0},sopot:{$:0}},pm:{$:0},pn:{$:0,gov:{$:0},co:{$:0},org:{$:0},edu:{$:0},net:{$:0}},post:{$:0},pr:{$:0,com:{$:0},net:{$:0},org:{$:0},gov:{$:0},edu:{$:0},isla:{$:0},pro:{$:0},biz:{$:0},info:{$:0},name:{$:0},est:{$:0},prof:{$:0},ac:{$:0}},pro:{$:0,aaa:{$:0},aca:{$:0},acct:{$:0},avocat:{$:0},bar:{$:0},cpa:{$:0},eng:{$:0},jur:{$:0},law:{$:0},med:{$:0},recht:{$:0},cloudns:{$:0}},ps:{$:0,edu:{$:0},gov:{$:0},sec:{$:0},plo:{$:0},com:{$:0},org:{$:0},net:{$:0}},pt:{$:0,net:{$:0},gov:{$:0},org:{$:0},edu:{$:0},int:{$:0},publ:{$:0},com:{$:0},nome:{$:0},blogspot:{$:0},nym:{$:0}},pw:{$:0,co:{$:0},ne:{$:0},or:{$:0},ed:{$:0},go:{$:0},belau:{$:0},cloudns:{$:0},nom:{$:0}},py:{$:0,com:{$:0},coop:{$:0},edu:{$:0},gov:{$:0},mil:{$:0},net:{$:0},org:{$:0}},qa:{$:0,com:{$:0},edu:{$:0},gov:{$:0},mil:{$:0},name:{$:0},net:{$:0},org:{$:0},sch:{$:0},blogspot:{$:0},nom:{$:0}},re:{$:0,asso:{$:0},com:{$:0},nom:{$:0},blogspot:{$:0}},ro:{$:0,arts:{$:0},com:{$:0},firm:{$:0},info:{$:0},nom:{$:0},nt:{$:0},org:{$:0},rec:{$:0},store:{$:0},tm:{$:0},www:{$:0},shop:{$:0},blogspot:{$:0}},rs:{$:0,ac:{$:0},co:{$:0},edu:{$:0},gov:{$:0},in:{$:0},org:{$:0},blogspot:{$:0},nom:{$:0}},ru:{$:0,ac:{$:0},edu:{$:0},gov:{$:0},int:{$:0},mil:{$:0},test:{$:0},adygeya:{$:0},bashkiria:{$:0},bir:{$:0},cbg:{$:0},com:{$:0},dagestan:{$:0},grozny:{$:0},kalmykia:{$:0},kustanai:{$:0},marine:{$:0},mordovia:{$:0},msk:{$:0},mytis:{$:0},nalchik:{$:0},nov:{$:0},pyatigorsk:{$:0},spb:{$:0},vladikavkaz:{$:0},vladimir:{$:0},blogspot:{$:0},cldmail:{hb:{$:0}},net:{$:0},org:{$:0},pp:{$:0}},rw:{$:0,gov:{$:0},net:{$:0},edu:{$:0},ac:{$:0},com:{$:0},co:{$:0},int:{$:0},mil:{$:0},gouv:{$:0}},sa:{$:0,com:{$:0},net:{$:0},org:{$:0},gov:{$:0},med:{$:0},pub:{$:0},edu:{$:0},sch:{$:0}},sb:{$:0,com:{$:0},edu:{$:0},gov:{$:0},net:{$:0},org:{$:0}},sc:{$:0,com:{$:0},gov:{$:0},net:{$:0},org:{$:0},edu:{$:0}},sd:{$:0,com:{$:0},net:{$:0},org:{$:0},edu:{$:0},med:{$:0},tv:{$:0},gov:{$:0},info:{$:0}},se:{$:0,a:{$:0},ac:{$:0},b:{$:0},bd:{$:0},brand:{$:0},c:{$:0},d:{$:0},e:{$:0},f:{$:0},fh:{$:0},fhsk:{$:0},fhv:{$:0},g:{$:0},h:{$:0},i:{$:0},k:{$:0},komforb:{$:0},kommunalforbund:{$:0},komvux:{$:0},l:{$:0},lanbib:{$:0},m:{$:0},n:{$:0},naturbruksgymn:{$:0},o:{$:0},org:{$:0},p:{$:0},parti:{$:0},pp:{$:0},press:{$:0},r:{$:0},s:{$:0},t:{$:0},tm:{$:0},u:{$:0},w:{$:0},x:{$:0},y:{$:0},z:{$:0},com:{$:0},blogspot:{$:0}},sg:{$:0,com:{$:0},net:{$:0},org:{$:0},gov:{$:0},edu:{$:0},per:{$:0},blogspot:{$:0}},sh:{$:0,com:{$:0},net:{$:0},gov:{$:0},org:{$:0},mil:{$:0},hashbang:{$:0},platform:{"*":{$:0}},wedeploy:{$:0},now:{$:0}},si:{$:0,blogspot:{$:0},nom:{$:0}},sj:{$:0},sk:{$:0,blogspot:{$:0},nym:{$:0}},sl:{$:0,com:{$:0},net:{$:0},edu:{$:0},gov:{$:0},org:{$:0}},sm:{$:0},sn:{$:0,art:{$:0},com:{$:0},edu:{$:0},gouv:{$:0},org:{$:0},perso:{$:0},univ:{$:0},blogspot:{$:0}},so:{$:0,com:{$:0},net:{$:0},org:{$:0}},sr:{$:0},st:{$:0,co:{$:0},com:{$:0},consulado:{$:0},edu:{$:0},embaixada:{$:0},gov:{$:0},mil:{$:0},net:{$:0},org:{$:0},principe:{$:0},saotome:{$:0},store:{$:0}},su:{$:0,abkhazia:{$:0},adygeya:{$:0},aktyubinsk:{$:0},arkhangelsk:{$:0},armenia:{$:0},ashgabad:{$:0},azerbaijan:{$:0},balashov:{$:0},bashkiria:{$:0},bryansk:{$:0},bukhara:{$:0},chimkent:{$:0},dagestan:{$:0},"east-kazakhstan":{$:0},exnet:{$:0},georgia:{$:0},grozny:{$:0},ivanovo:{$:0},jambyl:{$:0},kalmykia:{$:0},kaluga:{$:0},karacol:{$:0},karaganda:{$:0},karelia:{$:0},khakassia:{$:0},krasnodar:{$:0},kurgan:{$:0},kustanai:{$:0},lenug:{$:0},mangyshlak:{$:0},mordovia:{$:0},msk:{$:0},murmansk:{$:0},nalchik:{$:0},navoi:{$:0},"north-kazakhstan":{$:0},nov:{$:0},obninsk:{$:0},penza:{$:0},pokrovsk:{$:0},sochi:{$:0},spb:{$:0},tashkent:{$:0},termez:{$:0},togliatti:{$:0},troitsk:{$:0},tselinograd:{$:0},tula:{$:0},tuva:{$:0},vladikavkaz:{$:0},vladimir:{$:0},vologda:{$:0},nym:{$:0}},sv:{$:0,com:{$:0},edu:{$:0},gob:{$:0},org:{$:0},red:{$:0}},sx:{$:0,gov:{$:0},nym:{$:0}},sy:{$:0,edu:{$:0},gov:{$:0},net:{$:0},mil:{$:0},com:{$:0},org:{$:0}},sz:{$:0,co:{$:0},ac:{$:0},org:{$:0}},tc:{$:0},td:{$:0,blogspot:{$:0}},tel:{$:0},tf:{$:0},tg:{$:0},th:{$:0,ac:{$:0},co:{$:0},go:{$:0},in:{$:0},mi:{$:0},net:{$:0},or:{$:0}},tj:{$:0,ac:{$:0},biz:{$:0},co:{$:0},com:{$:0},edu:{$:0},go:{$:0},gov:{$:0},int:{$:0},mil:{$:0},name:{$:0},net:{$:0},nic:{$:0},org:{$:0},test:{$:0},web:{$:0}},tk:{$:0},tl:{$:0,gov:{$:0}},tm:{$:0,com:{$:0},co:{$:0},org:{$:0},net:{$:0},nom:{$:0},gov:{$:0},mil:{$:0},edu:{$:0}},tn:{$:0,com:{$:0},ens:{$:0},fin:{$:0},gov:{$:0},ind:{$:0},intl:{$:0},nat:{$:0},net:{$:0},org:{$:0},info:{$:0},perso:{$:0},tourism:{$:0},edunet:{$:0},rnrt:{$:0},rns:{$:0},rnu:{$:0},mincom:{$:0},agrinet:{$:0},defense:{$:0},turen:{$:0}},to:{$:0,com:{$:0},gov:{$:0},net:{$:0},org:{$:0},edu:{$:0},mil:{$:0},vpnplus:{$:0}},tr:{$:0,com:{$:0,blogspot:{$:0}},info:{$:0},biz:{$:0},net:{$:0},org:{$:0},web:{$:0},gen:{$:0},tv:{$:0},av:{$:0},dr:{$:0},bbs:{$:0},name:{$:0},tel:{$:0},gov:{$:0},bel:{$:0},pol:{$:0},mil:{$:0},k12:{$:0},edu:{$:0},kep:{$:0},nc:{$:0,gov:{$:0}}},travel:{$:0},tt:{$:0,co:{$:0},com:{$:0},org:{$:0},net:{$:0},biz:{$:0},info:{$:0},pro:{$:0},int:{$:0},coop:{$:0},jobs:{$:0},mobi:{$:0},travel:{$:0},museum:{$:0},aero:{$:0},name:{$:0},gov:{$:0},edu:{$:0}},tv:{$:0,dyndns:{$:0},"better-than":{$:0},"on-the-web":{$:0},"worse-than":{$:0}},tw:{$:0,edu:{$:0},gov:{$:0},mil:{$:0},com:{$:0,mymailer:{$:0}},net:{$:0},org:{$:0},idv:{$:0},game:{$:0},ebiz:{$:0},club:{$:0},"xn--zf0ao64a":{$:0},"xn--uc0atv":{$:0},"xn--czrw28b":{$:0},url:{$:0},blogspot:{$:0},nym:{$:0}},tz:{$:0,ac:{$:0},co:{$:0},go:{$:0},hotel:{$:0},info:{$:0},me:{$:0},mil:{$:0},mobi:{$:0},ne:{$:0},or:{$:0},sc:{$:0},tv:{$:0}},ua:{$:0,com:{$:0},edu:{$:0},gov:{$:0},in:{$:0},net:{$:0},org:{$:0},cherkassy:{$:0},cherkasy:{$:0},chernigov:{$:0},chernihiv:{$:0},chernivtsi:{$:0},chernovtsy:{$:0},ck:{$:0},cn:{$:0},cr:{$:0},crimea:{$:0},cv:{$:0},dn:{$:0},dnepropetrovsk:{$:0},dnipropetrovsk:{$:0},dominic:{$:0},donetsk:{$:0},dp:{$:0},if:{$:0},"ivano-frankivsk":{$:0},kh:{$:0},kharkiv:{$:0},kharkov:{$:0},kherson:{$:0},khmelnitskiy:{$:0},khmelnytskyi:{$:0},kiev:{$:0},kirovograd:{$:0},km:{$:0},kr:{$:0},krym:{$:0},ks:{$:0},kv:{$:0},kyiv:{$:0},lg:{$:0},lt:{$:0},lugansk:{$:0},lutsk:{$:0},lv:{$:0},lviv:{$:0},mk:{$:0},mykolaiv:{$:0},nikolaev:{$:0},od:{$:0},odesa:{$:0},odessa:{$:0},pl:{$:0},poltava:{$:0},rivne:{$:0},rovno:{$:0},rv:{$:0},sb:{$:0},sebastopol:{$:0},sevastopol:{$:0},sm:{$:0},sumy:{$:0},te:{$:0},ternopil:{$:0},uz:{$:0},uzhgorod:{$:0},vinnica:{$:0},vinnytsia:{$:0},vn:{$:0},volyn:{$:0},yalta:{$:0},zaporizhzhe:{$:0},zaporizhzhia:{$:0},zhitomir:{$:0},zhytomyr:{$:0},zp:{$:0},zt:{$:0},cc:{$:0},inf:{$:0},ltd:{$:0},biz:{$:0},co:{$:0},pp:{$:0}},ug:{$:0,co:{$:0},or:{$:0},ac:{$:0},sc:{$:0},go:{$:0},ne:{$:0},com:{$:0},org:{$:0},blogspot:{$:0},nom:{$:0}},uk:{$:0,ac:{$:0},co:{$:0,blogspot:{$:0},"nh-serv":{$:0},"no-ip":{$:0},wellbeingzone:{$:0}},gov:{$:0,service:{$:0},homeoffice:{$:0}},ltd:{$:0},me:{$:0},net:{$:0},nhs:{$:0},org:{$:0},plc:{$:0},police:{$:0},sch:{"*":{$:0}}},us:{$:0,dni:{$:0},fed:{$:0},isa:{$:0},kids:{$:0},nsn:{$:0},ak:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},al:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ar:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},as:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},az:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ca:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},co:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ct:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},dc:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},de:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},fl:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ga:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},gu:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},hi:{$:0,cc:{$:0},lib:{$:0}},ia:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},id:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},il:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},in:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ks:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ky:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},la:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ma:{$:0,k12:{$:0,pvt:{$:0},chtr:{$:0},paroch:{$:0}},cc:{$:0},lib:{$:0}},md:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},me:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},mi:{$:0,k12:{$:0},cc:{$:0},lib:{$:0},"ann-arbor":{$:0},cog:{$:0},dst:{$:0},eaton:{$:0},gen:{$:0},mus:{$:0},tec:{$:0},washtenaw:{$:0}},mn:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},mo:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ms:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},mt:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},nc:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},nd:{$:0,cc:{$:0},lib:{$:0}},ne:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},nh:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},nj:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},nm:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},nv:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ny:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},oh:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ok:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},or:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},pa:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},pr:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ri:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},sc:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},sd:{$:0,cc:{$:0},lib:{$:0}},tn:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},tx:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},ut:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},vi:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},vt:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},va:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},wa:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},wi:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},wv:{$:0,cc:{$:0}},wy:{$:0,k12:{$:0},cc:{$:0},lib:{$:0}},cloudns:{$:0},drud:{$:0},"is-by":{$:0},"land-4-sale":{$:0},"stuff-4-sale":{$:0},golffan:{$:0},noip:{$:0},pointto:{$:0}},uy:{$:0,com:{$:0,blogspot:{$:0}},edu:{$:0},gub:{$:0},mil:{$:0},net:{$:0},org:{$:0},nom:{$:0}},uz:{$:0,co:{$:0},com:{$:0},net:{$:0},org:{$:0}},va:{$:0},vc:{$:0,com:{$:0},net:{$:0},org:{$:0},gov:{$:0},mil:{$:0},edu:{$:0},nom:{$:0}},ve:{$:0,arts:{$:0},co:{$:0},com:{$:0},e12:{$:0},edu:{$:0},firm:{$:0},gob:{$:0},gov:{$:0},info:{$:0},int:{$:0},mil:{$:0},net:{$:0},org:{$:0},rec:{$:0},store:{$:0},tec:{$:0},web:{$:0}},vg:{$:0,nom:{$:0}},vi:{$:0,co:{$:0},com:{$:0},k12:{$:0},net:{$:0},org:{$:0}},vn:{$:0,com:{$:0},net:{$:0},org:{$:0},edu:{$:0},gov:{$:0},int:{$:0},ac:{$:0},biz:{$:0},info:{$:0},name:{$:0},pro:{$:0},health:{$:0},blogspot:{$:0}},vu:{$:0,com:{$:0},edu:{$:0},net:{$:0},org:{$:0}},wf:{$:0},ws:{$:0,com:{$:0},net:{$:0},org:{$:0},gov:{$:0},edu:{$:0},advisor:{"*":{$:0}},dyndns:{$:0},mypets:{$:0}},yt:{$:0},"xn--mgbaam7a8h":{$:0},"xn--y9a3aq":{$:0},"xn--54b7fta0cc":{$:0},"xn--90ae":{$:0},"xn--90ais":{$:0},"xn--fiqs8s":{$:0},"xn--fiqz9s":{$:0},"xn--lgbbat1ad8j":{$:0},"xn--wgbh1c":{$:0},"xn--e1a4c":{$:0},"xn--node":{$:0},"xn--qxam":{$:0},"xn--j6w193g":{$:0},"xn--2scrj9c":{$:0},"xn--3hcrj9c":{$:0},"xn--45br5cyl":{$:0},"xn--h2breg3eve":{$:0},"xn--h2brj9c8c":{$:0},"xn--mgbgu82a":{$:0},"xn--rvc1e0am3e":{$:0},"xn--h2brj9c":{$:0},"xn--mgbbh1a71e":{$:0},"xn--fpcrj9c3d":{$:0},"xn--gecrj9c":{$:0},"xn--s9brj9c":{$:0},"xn--45brj9c":{$:0},"xn--xkc2dl3a5ee0h":{$:0},"xn--mgba3a4f16a":{$:0},"xn--mgba3a4fra":{$:0},"xn--mgbtx2b":{$:0},"xn--mgbayh7gpa":{$:0},"xn--3e0b707e":{$:0},"xn--80ao21a":{$:0},"xn--fzc2c9e2c":{$:0},"xn--xkc2al3hye2a":{$:0},"xn--mgbc0a9azcg":{$:0},"xn--d1alf":{$:0},"xn--l1acc":{$:0},"xn--mix891f":{$:0},"xn--mix082f":{$:0},"xn--mgbx4cd0ab":{$:0},"xn--mgb9awbf":{$:0},"xn--mgbai9azgqp6j":{$:0},"xn--mgbai9a5eva00b":{$:0},"xn--ygbi2ammx":{$:0},"xn--90a3ac":{$:0,"xn--o1ac":{$:0},"xn--c1avg":{$:0},"xn--90azh":{$:0},"xn--d1at":{$:0},"xn--o1ach":{$:0},"xn--80au":{$:0}},"xn--p1ai":{$:0},"xn--wgbl6a":{$:0},"xn--mgberp4a5d4ar":{$:0},"xn--mgberp4a5d4a87g":{$:0},"xn--mgbqly7c0a67fbc":{$:0},"xn--mgbqly7cvafr":{$:0},"xn--mgbpl2fh":{$:0},"xn--yfro4i67o":{$:0},"xn--clchc0ea0b2g2a9gcd":{$:0},"xn--ogbpf8fl":{$:0},"xn--mgbtf8fl":{$:0},"xn--o3cw4h":{$:0,"xn--12c1fe0br":{$:0},"xn--12co0c3b4eva":{$:0},"xn--h3cuzk1di":{$:0},"xn--o3cyx2a":{$:0},"xn--m3ch0j3a":{$:0},"xn--12cfi8ixb8l":{$:0}},"xn--pgbs0dh":{$:0},"xn--kpry57d":{$:0},"xn--kprw13d":{$:0},"xn--nnx388a":{$:0},"xn--j1amh":{$:0},"xn--mgb2ddes":{$:0},xxx:{$:0},ye:{"*":{$:0}},za:{ac:{$:0},agric:{$:0},alt:{$:0},co:{$:0,blogspot:{$:0}},edu:{$:0},gov:{$:0},grondar:{$:0},law:{$:0},mil:{$:0},net:{$:0},ngo:{$:0},nis:{$:0},nom:{$:0},org:{$:0},school:{$:0},tm:{$:0},web:{$:0}},zm:{$:0,ac:{$:0},biz:{$:0},co:{$:0},com:{$:0},edu:{$:0},gov:{$:0},info:{$:0},mil:{$:0},net:{$:0},org:{$:0},sch:{$:0}},zw:{$:0,ac:{$:0},co:{$:0},gov:{$:0},mil:{$:0},org:{$:0}},aaa:{$:0},aarp:{$:0},abarth:{$:0},abb:{$:0},abbott:{$:0},abbvie:{$:0},abc:{$:0},able:{$:0},abogado:{$:0},abudhabi:{$:0},academy:{$:0},accenture:{$:0},accountant:{$:0},accountants:{$:0},aco:{$:0},active:{$:0},actor:{$:0},adac:{$:0},ads:{$:0},adult:{$:0},aeg:{$:0},aetna:{$:0},afamilycompany:{$:0},afl:{$:0},africa:{$:0},agakhan:{$:0},agency:{$:0},aig:{$:0},aigo:{$:0},airbus:{$:0},airforce:{$:0},airtel:{$:0},akdn:{$:0},alfaromeo:{$:0},alibaba:{$:0},alipay:{$:0},allfinanz:{$:0},allstate:{$:0},ally:{$:0},alsace:{$:0},alstom:{$:0},americanexpress:{$:0},americanfamily:{$:0},amex:{$:0},amfam:{$:0},amica:{$:0},amsterdam:{$:0},analytics:{$:0},android:{$:0},anquan:{$:0},anz:{$:0},aol:{$:0},apartments:{$:0},app:{$:0},apple:{$:0},aquarelle:{$:0},arab:{$:0},aramco:{$:0},archi:{$:0},army:{$:0},art:{$:0},arte:{$:0},asda:{$:0},associates:{$:0},athleta:{$:0},attorney:{$:0},auction:{$:0},audi:{$:0},audible:{$:0},audio:{$:0},auspost:{$:0},author:{$:0},auto:{$:0},autos:{$:0},avianca:{$:0},aws:{$:0},axa:{$:0},azure:{$:0},baby:{$:0},baidu:{$:0},banamex:{$:0},bananarepublic:{$:0},band:{$:0},bank:{$:0},bar:{$:0},barcelona:{$:0},barclaycard:{$:0},barclays:{$:0},barefoot:{$:0},bargains:{$:0},baseball:{$:0},basketball:{$:0},bauhaus:{$:0},bayern:{$:0},bbc:{$:0},bbt:{$:0},bbva:{$:0},bcg:{$:0},bcn:{$:0},beats:{$:0},beauty:{$:0},beer:{$:0},bentley:{$:0},berlin:{$:0},best:{$:0},bestbuy:{$:0},bet:{$:0},bharti:{$:0},bible:{$:0},bid:{$:0},bike:{$:0},bing:{$:0},bingo:{$:0},bio:{$:0},black:{$:0},blackfriday:{$:0},blanco:{$:0},blockbuster:{$:0},blog:{$:0},bloomberg:{$:0},blue:{$:0},bms:{$:0},bmw:{$:0},bnl:{$:0},bnpparibas:{$:0},boats:{$:0},boehringer:{$:0},bofa:{$:0},bom:{$:0},bond:{$:0},boo:{$:0},book:{$:0},booking:{$:0},boots:{$:0},bosch:{$:0},bostik:{$:0},boston:{$:0},bot:{$:0},boutique:{$:0},box:{$:0},bradesco:{$:0},bridgestone:{$:0},broadway:{$:0},broker:{$:0},brother:{$:0},brussels:{$:0},budapest:{$:0},bugatti:{$:0},build:{$:0},builders:{$:0},business:{$:0},buy:{$:0},buzz:{$:0},bzh:{$:0},cab:{$:0},cafe:{$:0},cal:{$:0},call:{$:0},calvinklein:{$:0},cam:{$:0},camera:{$:0},camp:{$:0},cancerresearch:{$:0},canon:{$:0},capetown:{$:0},capital:{$:0},capitalone:{$:0},car:{$:0},caravan:{$:0},cards:{$:0},care:{$:0},career:{$:0},careers:{$:0},cars:{$:0},cartier:{$:0},casa:{$:0},case:{$:0},caseih:{$:0},cash:{$:0},casino:{$:0},catering:{$:0},catholic:{$:0},cba:{$:0},cbn:{$:0},cbre:{$:0},cbs:{$:0},ceb:{$:0},center:{$:0},ceo:{$:0},cern:{$:0},cfa:{$:0},cfd:{$:0},chanel:{$:0},channel:{$:0},chase:{$:0},chat:{$:0},cheap:{$:0},chintai:{$:0},christmas:{$:0},chrome:{$:0},chrysler:{$:0},church:{$:0},cipriani:{$:0},circle:{$:0},cisco:{$:0},citadel:{$:0},citi:{$:0},citic:{$:0},city:{$:0},cityeats:{$:0},claims:{$:0},cleaning:{$:0},click:{$:0},clinic:{$:0},clinique:{$:0},clothing:{$:0},cloud:{$:0,statics:{"*":{$:0}},magentosite:{"*":{$:0}},vapor:{$:0},sensiosite:{"*":{$:0}},trafficplex:{$:0}},club:{$:0,cloudns:{$:0}},clubmed:{$:0},coach:{$:0},codes:{$:0},coffee:{$:0},college:{$:0},cologne:{$:0},comcast:{$:0},commbank:{$:0},community:{$:0},company:{$:0},compare:{$:0},computer:{$:0},comsec:{$:0},condos:{$:0},construction:{$:0},consulting:{$:0},contact:{$:0},contractors:{$:0},cooking:{$:0},cookingchannel:{$:0},cool:{$:0,de:{$:0}},corsica:{$:0},country:{$:0},coupon:{$:0},coupons:{$:0},courses:{$:0},credit:{$:0},creditcard:{$:0},creditunion:{$:0},cricket:{$:0},crown:{$:0},crs:{$:0},cruise:{$:0},cruises:{$:0},csc:{$:0},cuisinella:{$:0},cymru:{$:0},cyou:{$:0},dabur:{$:0},dad:{$:0},dance:{$:0},data:{$:0},date:{$:0},dating:{$:0},datsun:{$:0},day:{$:0},dclk:{$:0},dds:{$:0},deal:{$:0},dealer:{$:0},deals:{$:0},degree:{$:0},delivery:{$:0},dell:{$:0},deloitte:{$:0},delta:{$:0},democrat:{$:0},dental:{$:0},dentist:{$:0},desi:{$:0},design:{$:0},dev:{$:0},dhl:{$:0},diamonds:{$:0},diet:{$:0},digital:{$:0},direct:{$:0},directory:{$:0},discount:{$:0},discover:{$:0},dish:{$:0},diy:{$:0},dnp:{$:0},docs:{$:0},doctor:{$:0},dodge:{$:0},dog:{$:0},doha:{$:0},domains:{$:0},dot:{$:0},download:{$:0},drive:{$:0},dtv:{$:0},dubai:{$:0},duck:{$:0},dunlop:{$:0},duns:{$:0},dupont:{$:0},durban:{$:0},dvag:{$:0},dvr:{$:0},earth:{$:0},eat:{$:0},eco:{$:0},edeka:{$:0},education:{$:0},email:{$:0},emerck:{$:0},energy:{$:0},engineer:{$:0},engineering:{$:0},enterprises:{$:0},epost:{$:0},epson:{$:0},equipment:{$:0},ericsson:{$:0},erni:{$:0},esq:{$:0},estate:{$:0,compute:{"*":{$:0}}},esurance:{$:0},etisalat:{$:0},eurovision:{$:0},eus:{$:0,party:{user:{$:0}}},events:{$:0},everbank:{$:0},exchange:{$:0},expert:{$:0},exposed:{$:0},express:{$:0},extraspace:{$:0},fage:{$:0},fail:{$:0},fairwinds:{$:0},faith:{$:0,ybo:{$:0}},family:{$:0},fan:{$:0},fans:{$:0},farm:{$:0,storj:{$:0}},farmers:{$:0},fashion:{$:0},fast:{$:0},fedex:{$:0},feedback:{$:0},ferrari:{$:0},ferrero:{$:0},fiat:{$:0},fidelity:{$:0},fido:{$:0},film:{$:0},final:{$:0},finance:{$:0},financial:{$:0},fire:{$:0},firestone:{$:0},firmdale:{$:0},fish:{$:0},fishing:{$:0},fit:{$:0,ptplus:{$:0}},fitness:{$:0},flickr:{$:0},flights:{$:0},flir:{$:0},florist:{$:0},flowers:{$:0},fly:{$:0},foo:{$:0},food:{$:0},foodnetwork:{$:0},football:{$:0},ford:{$:0},forex:{$:0},forsale:{$:0},forum:{$:0},foundation:{$:0},fox:{$:0},free:{$:0},fresenius:{$:0},frl:{$:0},frogans:{$:0},frontdoor:{$:0},frontier:{$:0},ftr:{$:0},fujitsu:{$:0},fujixerox:{$:0},fun:{$:0},fund:{$:0},furniture:{$:0},futbol:{$:0},fyi:{$:0},gal:{$:0},gallery:{$:0},gallo:{$:0},gallup:{$:0},game:{$:0},games:{$:0},gap:{$:0},garden:{$:0},gbiz:{$:0},gdn:{$:0},gea:{$:0},gent:{$:0},genting:{$:0},george:{$:0},ggee:{$:0},gift:{$:0},gifts:{$:0},gives:{$:0},giving:{$:0},glade:{$:0},glass:{$:0},gle:{$:0},global:{$:0},globo:{$:0},gmail:{$:0},gmbh:{$:0},gmo:{$:0},gmx:{$:0},godaddy:{$:0},gold:{$:0},goldpoint:{$:0},golf:{$:0},goo:{$:0},goodhands:{$:0},goodyear:{$:0},goog:{$:0,cloud:{$:0}},google:{$:0},gop:{$:0},got:{$:0},grainger:{$:0},graphics:{$:0},gratis:{$:0},green:{$:0},gripe:{$:0},grocery:{$:0},group:{$:0},guardian:{$:0},gucci:{$:0},guge:{$:0},guide:{$:0},guitars:{$:0},guru:{$:0},hair:{$:0},hamburg:{$:0},hangout:{$:0},haus:{$:0},hbo:{$:0},hdfc:{$:0},hdfcbank:{$:0},health:{$:0},healthcare:{$:0},help:{$:0},helsinki:{$:0},here:{$:0},hermes:{$:0},hgtv:{$:0},hiphop:{$:0},hisamitsu:{$:0},hitachi:{$:0},hiv:{$:0},hkt:{$:0},hockey:{$:0},holdings:{$:0},holiday:{$:0},homedepot:{$:0},homegoods:{$:0},homes:{$:0},homesense:{$:0},honda:{$:0},honeywell:{$:0},horse:{$:0},hospital:{$:0},host:{$:0,cloudaccess:{$:0},freesite:{$:0}},hosting:{$:0,opencraft:{$:0}},hot:{$:0},hoteles:{$:0},hotels:{$:0},hotmail:{$:0},house:{$:0},how:{$:0},hsbc:{$:0},hughes:{$:0},hyatt:{$:0},hyundai:{$:0},ibm:{$:0},icbc:{$:0},ice:{$:0},icu:{$:0},ieee:{$:0},ifm:{$:0},ikano:{$:0},imamat:{$:0},imdb:{$:0},immo:{$:0},immobilien:{$:0},industries:{$:0},infiniti:{$:0},ing:{$:0},ink:{$:0},institute:{$:0},insurance:{$:0},insure:{$:0},intel:{$:0},international:{$:0},intuit:{$:0},investments:{$:0},ipiranga:{$:0},irish:{$:0},iselect:{$:0},ismaili:{$:0},ist:{$:0},istanbul:{$:0},itau:{$:0},itv:{$:0},iveco:{$:0},iwc:{$:0},jaguar:{$:0},java:{$:0},jcb:{$:0},jcp:{$:0},jeep:{$:0},jetzt:{$:0},jewelry:{$:0},jio:{$:0},jlc:{$:0},jll:{$:0},jmp:{$:0},jnj:{$:0},joburg:{$:0},jot:{$:0},joy:{$:0},jpmorgan:{$:0},jprs:{$:0},juegos:{$:0},juniper:{$:0},kaufen:{$:0},kddi:{$:0},kerryhotels:{$:0},kerrylogistics:{$:0},kerryproperties:{$:0},kfh:{$:0},kia:{$:0},kim:{$:0},kinder:{$:0},kindle:{$:0},kitchen:{$:0},kiwi:{$:0},koeln:{$:0},komatsu:{$:0},kosher:{$:0},kpmg:{$:0},kpn:{$:0},krd:{$:0,co:{$:0},edu:{$:0}},kred:{$:0},kuokgroup:{$:0},kyoto:{$:0},lacaixa:{$:0},ladbrokes:{$:0},lamborghini:{$:0},lamer:{$:0},lancaster:{$:0},lancia:{$:0},lancome:{$:0},land:{$:0,static:{$:0,dev:{$:0},sites:{$:0}}},landrover:{$:0},lanxess:{$:0},lasalle:{$:0},lat:{$:0},latino:{$:0},latrobe:{$:0},law:{$:0},lawyer:{$:0},lds:{$:0},lease:{$:0},leclerc:{$:0},lefrak:{$:0},legal:{$:0},lego:{$:0},lexus:{$:0},lgbt:{$:0},liaison:{$:0},lidl:{$:0},life:{$:0},lifeinsurance:{$:0},lifestyle:{$:0},lighting:{$:0},like:{$:0},lilly:{$:0},limited:{$:0},limo:{$:0},lincoln:{$:0},linde:{$:0},link:{$:0,cyon:{$:0},mypep:{$:0}},lipsy:{$:0},live:{$:0},living:{$:0},lixil:{$:0},loan:{$:0},loans:{$:0},locker:{$:0},locus:{$:0},loft:{$:0},lol:{$:0},london:{$:0},lotte:{$:0},lotto:{$:0},love:{$:0},lpl:{$:0},lplfinancial:{$:0},ltd:{$:0},ltda:{$:0},lundbeck:{$:0},lupin:{$:0},luxe:{$:0},luxury:{$:0},macys:{$:0},madrid:{$:0},maif:{$:0},maison:{$:0},makeup:{$:0},man:{$:0},management:{$:0,router:{$:0}},mango:{$:0},map:{$:0},market:{$:0},marketing:{$:0},markets:{$:0},marriott:{$:0},marshalls:{$:0},maserati:{$:0},mattel:{$:0},mba:{$:0},mckinsey:{$:0},med:{$:0},media:{$:0},meet:{$:0},melbourne:{$:0},meme:{$:0},memorial:{$:0},men:{$:0},menu:{$:0},meo:{$:0},merckmsd:{$:0},metlife:{$:0},miami:{$:0},microsoft:{$:0},mini:{$:0},mint:{$:0},mit:{$:0},mitsubishi:{$:0},mlb:{$:0},mls:{$:0},mma:{$:0},mobile:{$:0},mobily:{$:0},moda:{$:0},moe:{$:0},moi:{$:0},mom:{$:0},monash:{$:0},money:{$:0},monster:{$:0},mopar:{$:0},mormon:{$:0},mortgage:{$:0},moscow:{$:0},moto:{$:0},motorcycles:{$:0},mov:{$:0},movie:{$:0},movistar:{$:0},msd:{$:0},mtn:{$:0},mtpc:{$:0},mtr:{$:0},mutual:{$:0},nab:{$:0},nadex:{$:0},nagoya:{$:0},nationwide:{$:0},natura:{$:0},navy:{$:0},nba:{$:0},nec:{$:0},netbank:{$:0},netflix:{$:0},network:{$:0,alces:{"*":{$:0}}},neustar:{$:0},new:{$:0},newholland:{$:0},news:{$:0},next:{$:0},nextdirect:{$:0},nexus:{$:0},nfl:{$:0},ngo:{$:0},nhk:{$:0},nico:{$:0},nike:{$:0},nikon:{$:0},ninja:{$:0},nissan:{$:0},nissay:{$:0},nokia:{$:0},northwesternmutual:{$:0},norton:{$:0},now:{$:0},nowruz:{$:0},nowtv:{$:0},nra:{$:0},nrw:{$:0},ntt:{$:0},nyc:{$:0},obi:{$:0},observer:{$:0},off:{$:0},office:{$:0},okinawa:{$:0},olayan:{$:0},olayangroup:{$:0},oldnavy:{$:0},ollo:{$:0},omega:{$:0},one:{$:0,homelink:{$:0}},ong:{$:0},onl:{$:0},online:{$:0,barsy:{$:0}},onyourside:{$:0},ooo:{$:0},open:{$:0},oracle:{$:0},orange:{$:0},organic:{$:0},origins:{$:0},osaka:{$:0},otsuka:{$:0},ott:{$:0},ovh:{$:0,nerdpol:{$:0}},page:{$:0},panasonic:{$:0},panerai:{$:0},paris:{$:0},pars:{$:0},partners:{$:0},parts:{$:0},party:{$:0,ybo:{$:0}},passagens:{$:0},pay:{$:0},pccw:{$:0},pet:{$:0},pfizer:{$:0},pharmacy:{$:0},phd:{$:0},philips:{$:0},phone:{$:0},photo:{$:0},photography:{$:0},photos:{$:0},physio:{$:0},piaget:{$:0},pics:{$:0},pictet:{$:0},pictures:{1337:{$:0},$:0},pid:{$:0},pin:{$:0},ping:{$:0},pink:{$:0},pioneer:{$:0},pizza:{$:0},place:{$:0},play:{$:0},playstation:{$:0},plumbing:{$:0},plus:{$:0},pnc:{$:0},pohl:{$:0},poker:{$:0},politie:{$:0},porn:{$:0},pramerica:{$:0},praxi:{$:0},press:{$:0},prime:{$:0},prod:{$:0},productions:{$:0},prof:{$:0},progressive:{$:0},promo:{$:0},properties:{$:0},property:{$:0},protection:{$:0},pru:{$:0},prudential:{$:0},pub:{$:0},pwc:{$:0},qpon:{$:0},quebec:{$:0},quest:{$:0},qvc:{$:0},racing:{$:0},radio:{$:0},raid:{$:0},read:{$:0},realestate:{$:0},realtor:{$:0},realty:{$:0},recipes:{$:0},red:{$:0},redstone:{$:0},redumbrella:{$:0},rehab:{$:0},reise:{$:0},reisen:{$:0},reit:{$:0},reliance:{$:0},ren:{$:0},rent:{$:0},rentals:{$:0},repair:{$:0},report:{$:0},republican:{$:0},rest:{$:0},restaurant:{$:0},review:{$:0,ybo:{$:0}},reviews:{$:0},rexroth:{$:0},rich:{$:0},richardli:{$:0},ricoh:{$:0},rightathome:{$:0},ril:{$:0},rio:{$:0},rip:{$:0,clan:{$:0}},rmit:{$:0},rocher:{$:0},rocks:{$:0,myddns:{$:0},"lima-city":{$:0},webspace:{$:0}},rodeo:{$:0},rogers:{$:0},room:{$:0},rsvp:{$:0},rugby:{$:0},ruhr:{$:0},run:{$:0},rwe:{$:0},ryukyu:{$:0},saarland:{$:0},safe:{$:0},safety:{$:0},sakura:{$:0},sale:{$:0},salon:{$:0},samsclub:{$:0},samsung:{$:0},sandvik:{$:0},sandvikcoromant:{$:0},sanofi:{$:0},sap:{$:0},sapo:{$:0},sarl:{$:0},sas:{$:0},save:{$:0},saxo:{$:0},sbi:{$:0},sbs:{$:0},sca:{$:0},scb:{$:0},schaeffler:{$:0},schmidt:{$:0},scholarships:{$:0},school:{$:0},schule:{$:0},schwarz:{$:0},science:{$:0,ybo:{$:0}},scjohnson:{$:0},scor:{$:0},scot:{$:0},search:{$:0},seat:{$:0},secure:{$:0},security:{$:0},seek:{$:0},select:{$:0},sener:{$:0},services:{$:0},ses:{$:0},seven:{$:0},sew:{$:0},sex:{$:0},sexy:{$:0},sfr:{$:0},shangrila:{$:0},sharp:{$:0},shaw:{$:0},shell:{$:0},shia:{$:0},shiksha:{$:0},shoes:{$:0},shop:{$:0},shopping:{$:0},shouji:{$:0},show:{$:0},showtime:{$:0},shriram:{$:0},silk:{$:0},sina:{$:0},singles:{$:0},site:{$:0,cyon:{$:0},platformsh:{"*":{$:0}},byen:{$:0}},ski:{$:0},skin:{$:0},sky:{$:0},skype:{$:0},sling:{$:0},smart:{$:0},smile:{$:0},sncf:{$:0},soccer:{$:0},social:{$:0},softbank:{$:0},software:{$:0},sohu:{$:0},solar:{$:0},solutions:{$:0},song:{$:0},sony:{$:0},soy:{$:0},space:{$:0,stackspace:{$:0},uber:{$:0},xs4all:{$:0}},spiegel:{$:0},spot:{$:0},spreadbetting:{$:0},srl:{$:0},srt:{$:0},stada:{$:0},staples:{$:0},star:{$:0},starhub:{$:0},statebank:{$:0},statefarm:{$:0},statoil:{$:0},stc:{$:0},stcgroup:{$:0},stockholm:{$:0},storage:{$:0},store:{$:0},stream:{$:0},studio:{$:0},study:{$:0},style:{$:0},sucks:{$:0},supplies:{$:0},supply:{$:0},support:{$:0,barsy:{$:0}},surf:{$:0},surgery:{$:0},suzuki:{$:0},swatch:{$:0},swiftcover:{$:0},swiss:{$:0},sydney:{$:0},symantec:{$:0},systems:{$:0,knightpoint:{$:0}},tab:{$:0},taipei:{$:0},talk:{$:0},taobao:{$:0},target:{$:0},tatamotors:{$:0},tatar:{$:0},tattoo:{$:0},tax:{$:0},taxi:{$:0},tci:{$:0},tdk:{$:0},team:{$:0},tech:{$:0},technology:{$:0},telecity:{$:0},telefonica:{$:0},temasek:{$:0},tennis:{$:0},teva:{$:0},thd:{$:0},theater:{$:0},theatre:{$:0},tiaa:{$:0},tickets:{$:0},tienda:{$:0},tiffany:{$:0},tips:{$:0},tires:{$:0},tirol:{$:0},tjmaxx:{$:0},tjx:{$:0},tkmaxx:{$:0},tmall:{$:0},today:{$:0},tokyo:{$:0},tools:{$:0},top:{$:0},toray:{$:0},toshiba:{$:0},total:{$:0},tours:{$:0},town:{$:0},toyota:{$:0},toys:{$:0},trade:{$:0,ybo:{$:0}},trading:{$:0},training:{$:0},travelchannel:{$:0},travelers:{$:0},travelersinsurance:{$:0},trust:{$:0},trv:{$:0},tube:{$:0},tui:{$:0},tunes:{$:0},tushu:{$:0},tvs:{$:0},ubank:{$:0},ubs:{$:0},uconnect:{$:0},unicom:{$:0},university:{$:0},uno:{$:0},uol:{$:0},ups:{$:0},vacations:{$:0},vana:{$:0},vanguard:{$:0},vegas:{$:0},ventures:{$:0},verisign:{$:0},versicherung:{$:0},vet:{$:0},viajes:{$:0},video:{$:0},vig:{$:0},viking:{$:0},villas:{$:0},vin:{$:0},vip:{$:0},virgin:{$:0},visa:{$:0},vision:{$:0},vista:{$:0},vistaprint:{$:0},viva:{$:0},vivo:{$:0},vlaanderen:{$:0},vodka:{$:0},volkswagen:{$:0},volvo:{$:0},vote:{$:0},voting:{$:0},voto:{$:0},voyage:{$:0},vuelos:{$:0},wales:{$:0},walmart:{$:0},walter:{$:0},wang:{$:0},wanggou:{$:0},warman:{$:0},watch:{$:0},watches:{$:0},weather:{$:0},weatherchannel:{$:0},webcam:{$:0},weber:{$:0},website:{$:0},wed:{$:0},wedding:{$:0},weibo:{$:0},weir:{$:0},whoswho:{$:0},wien:{$:0},wiki:{$:0},williamhill:{$:0},win:{$:0},windows:{$:0},wine:{$:0},winners:{$:0},wme:{$:0},wolterskluwer:{$:0},woodside:{$:0},work:{$:0},works:{$:0},world:{$:0},wow:{$:0},wtc:{$:0},wtf:{$:0},xbox:{$:0},xerox:{$:0},xfinity:{$:0},xihuan:{$:0},xin:{$:0},"xn--11b4c3d":{$:0},"xn--1ck2e1b":{$:0},"xn--1qqw23a":{$:0},"xn--30rr7y":{$:0},"xn--3bst00m":{$:0},"xn--3ds443g":{$:0},"xn--3oq18vl8pn36a":{$:0},"xn--3pxu8k":{$:0},"xn--42c2d9a":{$:0},"xn--45q11c":{$:0},"xn--4gbrim":{$:0},"xn--55qw42g":{$:0},"xn--55qx5d":{$:0},"xn--5su34j936bgsg":{$:0},"xn--5tzm5g":{$:0},"xn--6frz82g":{$:0},"xn--6qq986b3xl":{$:0},"xn--80adxhks":{$:0},"xn--80aqecdr1a":{$:0},"xn--80asehdb":{$:0},"xn--80aswg":{$:0},"xn--8y0a063a":{$:0},"xn--9dbq2a":{$:0},"xn--9et52u":{$:0},"xn--9krt00a":{$:0},"xn--b4w605ferd":{$:0},"xn--bck1b9a5dre4c":{$:0},"xn--c1avg":{$:0},"xn--c2br7g":{$:0},"xn--cck2b3b":{$:0},"xn--cg4bki":{$:0},"xn--czr694b":{$:0},"xn--czrs0t":{$:0},"xn--czru2d":{$:0},"xn--d1acj3b":{$:0},"xn--eckvdtc9d":{$:0},"xn--efvy88h":{$:0},"xn--estv75g":{$:0},"xn--fct429k":{$:0},"xn--fhbei":{$:0},"xn--fiq228c5hs":{$:0},"xn--fiq64b":{$:0},"xn--fjq720a":{$:0},"xn--flw351e":{$:0},"xn--fzys8d69uvgm":{$:0},"xn--g2xx48c":{$:0},"xn--gckr3f0f":{$:0},"xn--gk3at1e":{$:0},"xn--hxt814e":{$:0},"xn--i1b6b1a6a2e":{$:0},"xn--imr513n":{$:0},"xn--io0a7i":{$:0},"xn--j1aef":{$:0},"xn--jlq61u9w7b":{$:0},"xn--jvr189m":{$:0},"xn--kcrx77d1x4a":{$:0},"xn--kpu716f":{$:0},"xn--kput3i":{$:0},"xn--mgba3a3ejt":{$:0},"xn--mgba7c0bbn0a":{$:0},"xn--mgbaakc7dvf":{$:0},"xn--mgbab2bd":{$:0},"xn--mgbb9fbpob":{$:0},"xn--mgbca7dzdo":{$:0},"xn--mgbi4ecexp":{$:0},"xn--mgbt3dhd":{$:0},"xn--mk1bu44c":{$:0},"xn--mxtq1m":{$:0},"xn--ngbc5azd":{$:0},"xn--ngbe9e0a":{$:0},"xn--ngbrx":{$:0},"xn--nqv7f":{$:0},"xn--nqv7fs00ema":{$:0},"xn--nyqy26a":{$:0},"xn--p1acf":{$:0},"xn--pbt977c":{$:0},"xn--pssy2u":{$:0},"xn--q9jyb4c":{$:0},"xn--qcka1pmc":{$:0},"xn--rhqv96g":{$:0},"xn--rovu88b":{$:0},"xn--ses554g":{$:0},"xn--t60b56a":{$:0},"xn--tckwe":{$:0},"xn--tiq49xqyj":{$:0},"xn--unup4y":{$:0},"xn--vermgensberater-ctb":{$:0},"xn--vermgensberatung-pwb":{$:0},"xn--vhquv":{$:0},"xn--vuq861b":{$:0},"xn--w4r85el8fhu5dnra":{$:0},"xn--w4rs40l":{$:0},"xn--xhq521b":{$:0},"xn--zfr164b":{$:0},xperia:{$:0},xyz:{$:0,blogsite:{$:0},fhapp:{$:0}},yachts:{$:0},yahoo:{$:0},yamaxun:{$:0},yandex:{$:0},yodobashi:{$:0},yoga:{$:0},yokohama:{$:0},you:{$:0},youtube:{$:0},yun:{$:0},zappos:{$:0},zara:{$:0},zero:{$:0},zip:{$:0},zippo:{$:0},zone:{$:0,triton:{"*":{$:0}},lima:{$:0}},zuerich:{$:0}}}},function(e,t,r){"use strict";var n=0;function i(e,t){return null===e?t:null===t?e:e<t?e:t}function s(e,t){for(var r=e.parts,i=t,s=0;s<r.length;s+=1){var a=r[s],o=i[a];void 0===o&&(o=Object.create(null),i[a]=o),i=o}return i.$=n,t}function a(e,t,r){var n,s=null;return void 0!==t.$&&(s=r+1),-1===r?s:(void 0!==(n=t[e[r]])&&(s=i(s,a(e,n,r-1))),void 0!==(n=t["*"])&&(s=i(s,a(e,n,r-1))),s)}function o(e){if(this.exceptions=Object.create(null),this.rules=Object.create(null),e)for(var t=0;t<e.length;t+=1){var r=e[t];r.exception?s(r,this.exceptions):s(r,this.rules)}}o.fromJson=function(e){var t=new o;return t.exceptions=e.exceptions,t.rules=e.rules,t},o.prototype.hasTld=function(e){return void 0!==this.rules[e]},o.prototype.suffixLookup=function(e){var t=e.split("."),r=a(t,this.rules,t.length-1);if(null===r)return null;var n=a(t,this.exceptions,t.length-1);return null!==n?t.slice(n+1).join("."):t.slice(r).join(".")},e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(195);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e)throw new Error("localStorage for URL is not supported",e);return localStorage}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPlatformAtLeastInVersion=function(){return!0},t.isCliqzAtLeastInVersion=function(){return!0};const n=navigator.userAgent.includes("Mobile");const i=function(){try{const e=chrome.i18n.getMessage("@@extension_id");if(e)return e}catch(e){}try{const e=chrome.runtime.id;if(e)return e}catch(e){}return"<extension-uuid-not-available>"}();t.default={isMobile:n,isFirefox:!1,isChromium:!0,platformName:"webextension",extensionUuid:i,get isEdge(){try{return/Edge/.test(navigator.userAgent)}catch(e){return!1}}};t.OS=""},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.chromeUrlHandler=!1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLHttpRequestFactory=function(){return XMLHttpRequest},t.setPrivateFlags=function(){},t.setBackgroundRequest=function(){}},function(e,t,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,r){"use strict";var n=r(93),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,u,c,l,d,h){var f,p,m,_,g,y,v,b,$,w=h.bits,k=0,M=0,S=0,O=0,x=0,T=0,E=0,D=0,L=0,P=0,A=null,j=0,R=new n.Buf16(16),I=new n.Buf16(16),C=null,Y=0;for(k=0;k<=15;k++)R[k]=0;for(M=0;M<u;M++)R[t[r+M]]++;for(x=w,O=15;O>=1&&0===R[O];O--);if(x>O&&(x=O),0===O)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(S=1;S<O&&0===R[S];S++);for(x<S&&(x=S),D=1,k=1;k<=15;k++)if(D<<=1,(D-=R[k])<0)return-1;if(D>0&&(0===e||1!==O))return-1;for(I[1]=0,k=1;k<15;k++)I[k+1]=I[k]+R[k];for(M=0;M<u;M++)0!==t[r+M]&&(d[I[t[r+M]]++]=M);if(0===e?(A=C=d,y=19):1===e?(A=i,j-=257,C=s,Y-=257,y=256):(A=a,C=o,y=-1),P=0,M=0,k=S,g=l,T=x,E=0,m=-1,_=(L=1<<x)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){v=k-E,d[M]<y?(b=0,$=d[M]):d[M]>y?(b=C[Y+d[M]],$=A[j+d[M]]):(b=96,$=0),f=1<<k-E,S=p=1<<T;do{c[g+(P>>E)+(p-=f)]=v<<24|b<<16|$|0}while(0!==p);for(f=1<<k-1;P&f;)f>>=1;if(0!==f?(P&=f-1,P+=f):P=0,M++,0==--R[k]){if(k===O)break;k=t[r+d[M]]}if(k>x&&(P&_)!==m){for(0===E&&(E=x),g+=S,D=1<<(T=k-E);T+E<O&&!((D-=R[T+E])<=0);)T++,D<<=1;if(L+=1<<T,1===e&&L>852||2===e&&L>592)return 1;c[m=P&_]=x<<24|T<<16|g-l|0}}return 0!==P&&(c[g+P]=k-E<<24|64<<16|0),h.bits=x,0}},function(e,t,r){"use strict";e.exports=function(e,t){var r,n,i,s,a,o,u,c,l,d,h,f,p,m,_,g,y,v,b,$,w,k,M,S,O;r=e.state,n=e.next_in,S=e.input,i=n+(e.avail_in-5),s=e.next_out,O=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,d=r.wnext,h=r.window,f=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),v=m[f&g];t:for(;;){if(f>>>=b=v>>>24,p-=b,0===(b=v>>>16&255))O[s++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=m[(65535&v)+(f&(1<<b)-1)];continue t}if(32&b){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}$=65535&v,(b&=15)&&(p<b&&(f+=S[n++]<<p,p+=8),$+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),v=_[f&y];r:for(;;){if(f>>>=b=v>>>24,p-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=_[(65535&v)+(f&(1<<b)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(w=65535&v,p<(b&=15)&&(f+=S[n++]<<p,(p+=8)<b&&(f+=S[n++]<<p,p+=8)),(w+=f&(1<<b)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=b,p-=b,w>(b=s-a)){if((b=w-b)>l&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(k=0,M=h,0===d){if(k+=c-b,b<$){$-=b;do{O[s++]=h[k++]}while(--b);k=s-w,M=O}}else if(d<b){if(k+=c+d-b,(b-=d)<$){$-=b;do{O[s++]=h[k++]}while(--b);if(k=0,d<$){$-=b=d;do{O[s++]=h[k++]}while(--b);k=s-w,M=O}}}else if(k+=d-b,b<$){$-=b;do{O[s++]=h[k++]}while(--b);k=s-w,M=O}for(;$>2;)O[s++]=M[k++],O[s++]=M[k++],O[s++]=M[k++],$-=3;$&&(O[s++]=M[k++],$>1&&(O[s++]=M[k++]))}else{k=s-w;do{O[s++]=O[k++],O[s++]=O[k++],O[s++]=O[k++],$-=3}while($>2);$&&(O[s++]=O[k++],$>1&&(O[s++]=O[k++]))}break}}break}}while(n<i&&s<o);n-=$=p>>3,f&=(1<<(p-=$<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=s<o?o-s+257:257-(s-o),r.hold=f,r.bits=p}},function(e,t,r){"use strict";var n=r(93),i=r(438),s=r(437),a=r(1222),o=r(1221),u=0,c=1,l=2,d=4,h=5,f=6,p=0,m=1,_=2,g=-2,y=-3,v=-4,b=-5,$=8,w=1,k=2,M=3,S=4,O=5,x=6,T=7,E=8,D=9,L=10,P=11,A=12,j=13,R=14,I=15,C=16,Y=17,F=18,N=19,U=20,q=21,H=22,z=23,B=24,W=25,V=26,G=27,K=28,J=29,Q=30,Z=31,X=32,ee=852,te=592,re=15;function ne(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ie(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(ee),t.distcode=t.distdyn=new n.Buf32(te),t.sane=1,t.back=-1,p):g}function se(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ie(e)):g}function ae(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,se(e))):g}function oe(e,t){var r,i;return e?(i=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=i,i.window=null,(r=ae(e,t))!==p&&(e.state=null),r):g}var ue,ce,le=!0;function de(e){if(le){var t;for(ue=new n.Buf32(512),ce=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(c,e.lens,0,288,ue,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(l,e.lens,0,32,ce,0,e.work,{bits:5}),le=!1}e.lencode=ue,e.lenbits=9,e.distcode=ce,e.distbits=5}function he(e,t,r,i){var s,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((s=a.wsize-a.wnext)>i&&(s=i),n.arraySet(a.window,t,r-i,s,a.wnext),(i-=s)?(n.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}t.inflateReset=se,t.inflateReset2=ae,t.inflateResetKeep=ie,t.inflateInit=function(e){return oe(e,re)},t.inflateInit2=oe,t.inflate=function(e,t){var r,ee,te,re,ie,se,ae,oe,ue,ce,le,fe,pe,me,_e,ge,ye,ve,be,$e,we,ke,Me,Se,Oe=0,xe=new n.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return g;(r=e.state).mode===A&&(r.mode=j),ie=e.next_out,te=e.output,ae=e.avail_out,re=e.next_in,ee=e.input,se=e.avail_in,oe=r.hold,ue=r.bits,ce=se,le=ae,ke=p;e:for(;;)switch(r.mode){case w:if(0===r.wrap){r.mode=j;break}for(;ue<16;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(2&r.wrap&&35615===oe){r.check=0,xe[0]=255&oe,xe[1]=oe>>>8&255,r.check=s(r.check,xe,2,0),oe=0,ue=0,r.mode=k;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&oe)<<8)+(oe>>8))%31){e.msg="incorrect header check",r.mode=Q;break}if((15&oe)!==$){e.msg="unknown compression method",r.mode=Q;break}if(ue-=4,we=8+(15&(oe>>>=4)),0===r.wbits)r.wbits=we;else if(we>r.wbits){e.msg="invalid window size",r.mode=Q;break}r.dmax=1<<we,e.adler=r.check=1,r.mode=512&oe?L:A,oe=0,ue=0;break;case k:for(;ue<16;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(r.flags=oe,(255&r.flags)!==$){e.msg="unknown compression method",r.mode=Q;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Q;break}r.head&&(r.head.text=oe>>8&1),512&r.flags&&(xe[0]=255&oe,xe[1]=oe>>>8&255,r.check=s(r.check,xe,2,0)),oe=0,ue=0,r.mode=M;case M:for(;ue<32;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}r.head&&(r.head.time=oe),512&r.flags&&(xe[0]=255&oe,xe[1]=oe>>>8&255,xe[2]=oe>>>16&255,xe[3]=oe>>>24&255,r.check=s(r.check,xe,4,0)),oe=0,ue=0,r.mode=S;case S:for(;ue<16;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}r.head&&(r.head.xflags=255&oe,r.head.os=oe>>8),512&r.flags&&(xe[0]=255&oe,xe[1]=oe>>>8&255,r.check=s(r.check,xe,2,0)),oe=0,ue=0,r.mode=O;case O:if(1024&r.flags){for(;ue<16;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}r.length=oe,r.head&&(r.head.extra_len=oe),512&r.flags&&(xe[0]=255&oe,xe[1]=oe>>>8&255,r.check=s(r.check,xe,2,0)),oe=0,ue=0}else r.head&&(r.head.extra=null);r.mode=x;case x:if(1024&r.flags&&((fe=r.length)>se&&(fe=se),fe&&(r.head&&(we=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,ee,re,fe,we)),512&r.flags&&(r.check=s(r.check,ee,fe,re)),se-=fe,re+=fe,r.length-=fe),r.length))break e;r.length=0,r.mode=T;case T:if(2048&r.flags){if(0===se)break e;fe=0;do{we=ee[re+fe++],r.head&&we&&r.length<65536&&(r.head.name+=String.fromCharCode(we))}while(we&&fe<se);if(512&r.flags&&(r.check=s(r.check,ee,fe,re)),se-=fe,re+=fe,we)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=E;case E:if(4096&r.flags){if(0===se)break e;fe=0;do{we=ee[re+fe++],r.head&&we&&r.length<65536&&(r.head.comment+=String.fromCharCode(we))}while(we&&fe<se);if(512&r.flags&&(r.check=s(r.check,ee,fe,re)),se-=fe,re+=fe,we)break e}else r.head&&(r.head.comment=null);r.mode=D;case D:if(512&r.flags){for(;ue<16;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(oe!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Q;break}oe=0,ue=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=A;break;case L:for(;ue<32;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}e.adler=r.check=ne(oe),oe=0,ue=0,r.mode=P;case P:if(0===r.havedict)return e.next_out=ie,e.avail_out=ae,e.next_in=re,e.avail_in=se,r.hold=oe,r.bits=ue,_;e.adler=r.check=1,r.mode=A;case A:if(t===h||t===f)break e;case j:if(r.last){oe>>>=7&ue,ue-=7&ue,r.mode=G;break}for(;ue<3;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}switch(r.last=1&oe,ue-=1,3&(oe>>>=1)){case 0:r.mode=R;break;case 1:if(de(r),r.mode=U,t===f){oe>>>=2,ue-=2;break e}break;case 2:r.mode=Y;break;case 3:e.msg="invalid block type",r.mode=Q}oe>>>=2,ue-=2;break;case R:for(oe>>>=7&ue,ue-=7&ue;ue<32;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if((65535&oe)!=(oe>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Q;break}if(r.length=65535&oe,oe=0,ue=0,r.mode=I,t===f)break e;case I:r.mode=C;case C:if(fe=r.length){if(fe>se&&(fe=se),fe>ae&&(fe=ae),0===fe)break e;n.arraySet(te,ee,re,fe,ie),se-=fe,re+=fe,ae-=fe,ie+=fe,r.length-=fe;break}r.mode=A;break;case Y:for(;ue<14;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(r.nlen=257+(31&oe),oe>>>=5,ue-=5,r.ndist=1+(31&oe),oe>>>=5,ue-=5,r.ncode=4+(15&oe),oe>>>=4,ue-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Q;break}r.have=0,r.mode=F;case F:for(;r.have<r.ncode;){for(;ue<3;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}r.lens[Te[r.have++]]=7&oe,oe>>>=3,ue-=3}for(;r.have<19;)r.lens[Te[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Me={bits:r.lenbits},ke=o(u,r.lens,0,19,r.lencode,0,r.work,Me),r.lenbits=Me.bits,ke){e.msg="invalid code lengths set",r.mode=Q;break}r.have=0,r.mode=N;case N:for(;r.have<r.nlen+r.ndist;){for(;ge=(Oe=r.lencode[oe&(1<<r.lenbits)-1])>>>16&255,ye=65535&Oe,!((_e=Oe>>>24)<=ue);){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(ye<16)oe>>>=_e,ue-=_e,r.lens[r.have++]=ye;else{if(16===ye){for(Se=_e+2;ue<Se;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(oe>>>=_e,ue-=_e,0===r.have){e.msg="invalid bit length repeat",r.mode=Q;break}we=r.lens[r.have-1],fe=3+(3&oe),oe>>>=2,ue-=2}else if(17===ye){for(Se=_e+3;ue<Se;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}ue-=_e,we=0,fe=3+(7&(oe>>>=_e)),oe>>>=3,ue-=3}else{for(Se=_e+7;ue<Se;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}ue-=_e,we=0,fe=11+(127&(oe>>>=_e)),oe>>>=7,ue-=7}if(r.have+fe>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Q;break}for(;fe--;)r.lens[r.have++]=we}}if(r.mode===Q)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Q;break}if(r.lenbits=9,Me={bits:r.lenbits},ke=o(c,r.lens,0,r.nlen,r.lencode,0,r.work,Me),r.lenbits=Me.bits,ke){e.msg="invalid literal/lengths set",r.mode=Q;break}if(r.distbits=6,r.distcode=r.distdyn,Me={bits:r.distbits},ke=o(l,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Me),r.distbits=Me.bits,ke){e.msg="invalid distances set",r.mode=Q;break}if(r.mode=U,t===f)break e;case U:r.mode=q;case q:if(se>=6&&ae>=258){e.next_out=ie,e.avail_out=ae,e.next_in=re,e.avail_in=se,r.hold=oe,r.bits=ue,a(e,le),ie=e.next_out,te=e.output,ae=e.avail_out,re=e.next_in,ee=e.input,se=e.avail_in,oe=r.hold,ue=r.bits,r.mode===A&&(r.back=-1);break}for(r.back=0;ge=(Oe=r.lencode[oe&(1<<r.lenbits)-1])>>>16&255,ye=65535&Oe,!((_e=Oe>>>24)<=ue);){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(ge&&0==(240&ge)){for(ve=_e,be=ge,$e=ye;ge=(Oe=r.lencode[$e+((oe&(1<<ve+be)-1)>>ve)])>>>16&255,ye=65535&Oe,!(ve+(_e=Oe>>>24)<=ue);){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}oe>>>=ve,ue-=ve,r.back+=ve}if(oe>>>=_e,ue-=_e,r.back+=_e,r.length=ye,0===ge){r.mode=V;break}if(32&ge){r.back=-1,r.mode=A;break}if(64&ge){e.msg="invalid literal/length code",r.mode=Q;break}r.extra=15&ge,r.mode=H;case H:if(r.extra){for(Se=r.extra;ue<Se;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}r.length+=oe&(1<<r.extra)-1,oe>>>=r.extra,ue-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=z;case z:for(;ge=(Oe=r.distcode[oe&(1<<r.distbits)-1])>>>16&255,ye=65535&Oe,!((_e=Oe>>>24)<=ue);){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(0==(240&ge)){for(ve=_e,be=ge,$e=ye;ge=(Oe=r.distcode[$e+((oe&(1<<ve+be)-1)>>ve)])>>>16&255,ye=65535&Oe,!(ve+(_e=Oe>>>24)<=ue);){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}oe>>>=ve,ue-=ve,r.back+=ve}if(oe>>>=_e,ue-=_e,r.back+=_e,64&ge){e.msg="invalid distance code",r.mode=Q;break}r.offset=ye,r.extra=15&ge,r.mode=B;case B:if(r.extra){for(Se=r.extra;ue<Se;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}r.offset+=oe&(1<<r.extra)-1,oe>>>=r.extra,ue-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Q;break}r.mode=W;case W:if(0===ae)break e;if(fe=le-ae,r.offset>fe){if((fe=r.offset-fe)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Q;break}fe>r.wnext?(fe-=r.wnext,pe=r.wsize-fe):pe=r.wnext-fe,fe>r.length&&(fe=r.length),me=r.window}else me=te,pe=ie-r.offset,fe=r.length;fe>ae&&(fe=ae),ae-=fe,r.length-=fe;do{te[ie++]=me[pe++]}while(--fe);0===r.length&&(r.mode=q);break;case V:if(0===ae)break e;te[ie++]=r.length,ae--,r.mode=q;break;case G:if(r.wrap){for(;ue<32;){if(0===se)break e;se--,oe|=ee[re++]<<ue,ue+=8}if(le-=ae,e.total_out+=le,r.total+=le,le&&(e.adler=r.check=r.flags?s(r.check,te,le,ie-le):i(r.check,te,le,ie-le)),le=ae,(r.flags?oe:ne(oe))!==r.check){e.msg="incorrect data check",r.mode=Q;break}oe=0,ue=0}r.mode=K;case K:if(r.wrap&&r.flags){for(;ue<32;){if(0===se)break e;se--,oe+=ee[re++]<<ue,ue+=8}if(oe!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Q;break}oe=0,ue=0}r.mode=J;case J:ke=m;break e;case Q:ke=y;break e;case Z:return v;case X:default:return g}return e.next_out=ie,e.avail_out=ae,e.next_in=re,e.avail_in=se,r.hold=oe,r.bits=ue,(r.wsize||le!==e.avail_out&&r.mode<Q&&(r.mode<G||t!==d))&&he(e,e.output,e.next_out,le-e.avail_out)?(r.mode=Z,v):(ce-=e.avail_in,le-=e.avail_out,e.total_in+=ce,e.total_out+=le,r.total+=le,r.wrap&&le&&(e.adler=r.check=r.flags?s(r.check,te,le,e.next_out-le):i(r.check,te,le,e.next_out-le)),e.data_type=r.bits+(r.last?64:0)+(r.mode===A?128:0)+(r.mode===U||r.mode===I?256:0),(0===ce&&0===le||t===d)&&ke===p&&(ke=b),ke)},t.inflateEnd=function(e){if(!e||!e.state)return g;var t=e.state;return t.window&&(t.window=null),e.state=null,p},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?g:(r.head=t,t.done=!1,p):g},t.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==P?g:r.mode===P&&i(1,t,n,0)!==r.check?y:he(e,t,n,n)?(r.mode=Z,v):(r.havedict=1,p):g},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";var n=r(1223),i=r(93),s=r(436),a=r(434),o=r(250),u=r(435),c=r(1220),l=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(o[r]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function h(e,t){var r=new d(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}d.prototype.push=function(e,t){var r,o,u,c,d,h,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,_=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=s.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(r=n.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(h="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===l.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,h)),r===a.Z_BUF_ERROR&&!0===_&&(r=a.Z_OK,_=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==a.Z_STREAM_END&&(0!==f.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=s.utf8border(f.output,f.next_out),c=f.next_out-u,d=s.buf2string(f.output,u),f.next_out=c,f.avail_out=p-c,c&&i.arraySet(f.output,f.output,u,c,0),this.onData(d)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(_=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},function(e,t,r){"use strict";var n=r(93),i=4,s=0,a=1,o=2;function u(e){for(var t=e.length;--t>=0;)e[t]=0}var c=0,l=1,d=2,h=29,f=256,p=f+1+h,m=30,_=19,g=2*p+1,y=15,v=16,b=7,$=256,w=16,k=17,M=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(p+2));u(E);var D=new Array(2*m);u(D);var L=new Array(512);u(L);var P=new Array(256);u(P);var A=new Array(h);u(A);var j,R,I,C=new Array(m);function Y(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function F(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?L[e]:L[256+(e>>>7)]}function U(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function q(e,t,r){e.bi_valid>v-r?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>v-e.bi_valid,e.bi_valid+=r-v):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function H(e,t,r){q(e,r[2*t],r[2*t+1])}function z(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function B(e,t,r){var n,i,s=new Array(y+1),a=0;for(n=1;n<=y;n++)s[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=z(s[o]++,o))}}function W(e){var t;for(t=0;t<p;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<_;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*$]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function V(e){e.bi_valid>8?U(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function G(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function K(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&G(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!G(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function J(e,t,r){var n,i,s,a,o=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===n?H(e,i,t):(H(e,(s=P[i])+f+1,t),0!==(a=S[s])&&q(e,i-=A[s],a),H(e,s=N(--n),r),0!==(a=O[s])&&q(e,n-=C[s],a))}while(o<e.last_lit);H(e,$,t)}function Q(e,t){var r,n,i,s=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=g,r=0;r<u;r++)0!==s[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=a[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)K(e,s,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],K(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,K(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,s,a,o,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(s=0;s<=y;s++)e.bl_count[s]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<g;r++)(s=u[2*u[2*(n=e.heap[r])+1]+1]+1)>p&&(s=p,m++),u[2*n+1]=s,n>c||(e.bl_count[s]++,a=0,n>=f&&(a=h[n-f]),o=u[2*n],e.opt_len+=o*(s+a),d&&(e.static_len+=o*(l[2*n+1]+a)));if(0!==m){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(s=p;0!==s;s--)for(n=e.bl_count[s];0!==n;)(i=e.heap[--r])>c||(u[2*i+1]!==s&&(e.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),n--)}}(e,t),B(s,c,e.bl_count)}function Z(e,t,r){var n,i,s=-1,a=t[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++o<u&&i===a||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*w]++):o<=10?e.bl_tree[2*k]++:e.bl_tree[2*M]++,o=0,s=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))}function X(e,t,r){var n,i,s=-1,a=t[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++o<u&&i===a)){if(o<c)do{H(e,i,e.bl_tree)}while(0!=--o);else 0!==i?(i!==s&&(H(e,i,e.bl_tree),o--),H(e,w,e.bl_tree),q(e,o-3,2)):o<=10?(H(e,k,e.bl_tree),q(e,o-3,3)):(H(e,M,e.bl_tree),q(e,o-11,7));o=0,s=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4)}}u(C);var ee=!1;function te(e,t,r,i){q(e,(c<<1)+(i?1:0),3),function(e,t,r,i){V(e),i&&(U(e,r),U(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}t._tr_init=function(e){ee||(function(){var e,t,r,n,i,s=new Array(y+1);for(r=0,n=0;n<h-1;n++)for(A[n]=r,e=0;e<1<<S[n];e++)P[r++]=n;for(P[r-1]=n,i=0,n=0;n<16;n++)for(C[n]=i,e=0;e<1<<O[n];e++)L[i++]=n;for(i>>=7;n<m;n++)for(C[n]=i<<7,e=0;e<1<<O[n]-7;e++)L[256+i++]=n;for(t=0;t<=y;t++)s[t]=0;for(e=0;e<=143;)E[2*e+1]=8,e++,s[8]++;for(;e<=255;)E[2*e+1]=9,e++,s[9]++;for(;e<=279;)E[2*e+1]=7,e++,s[7]++;for(;e<=287;)E[2*e+1]=8,e++,s[8]++;for(B(E,p+1,s),e=0;e<m;e++)D[2*e+1]=5,D[2*e]=z(e,5);j=new Y(E,S,f+1,p,y),R=new Y(D,O,0,m,y),I=new Y(new Array(0),x,0,_,b)}(),ee=!0),e.l_desc=new F(e.dyn_ltree,j),e.d_desc=new F(e.dyn_dtree,R),e.bl_desc=new F(e.bl_tree,I),e.bi_buf=0,e.bi_valid=0,W(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,r,n){var u,c,h=0;e.level>0?(e.strm.data_type===o&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return s;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return a;return s}(e)),Q(e,e.l_desc),Q(e,e.d_desc),h=function(e){var t;for(Z(e,e.dyn_ltree,e.l_desc.max_code),Z(e,e.dyn_dtree,e.d_desc.max_code),Q(e,e.bl_desc),t=_-1;t>=3&&0===e.bl_tree[2*T[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),u=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=u&&(u=c)):u=c=r+5,r+4<=u&&-1!==t?te(e,t,r,n):e.strategy===i||c===u?(q(e,(l<<1)+(n?1:0),3),J(e,E,D)):(q(e,(d<<1)+(n?1:0),3),function(e,t,r,n){var i;for(q(e,t-257,5),q(e,r-1,5),q(e,n-4,4),i=0;i<n;i++)q(e,e.bl_tree[2*T[i]+1],3);X(e,e.dyn_ltree,t-1),X(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,h+1),J(e,e.dyn_ltree,e.dyn_dtree)),W(e),n&&V(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(P[r]+f+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){q(e,l<<1,3),H(e,$,E),function(e){16===e.bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,r){"use strict";var n,i=r(93),s=r(1225),a=r(438),o=r(437),u=r(250),c=0,l=1,d=3,h=4,f=5,p=0,m=1,_=-2,g=-3,y=-5,v=-1,b=1,$=2,w=3,k=4,M=0,S=2,O=8,x=9,T=15,E=8,D=286,L=30,P=19,A=2*D+1,j=15,R=3,I=258,C=I+R+1,Y=32,F=42,N=69,U=73,q=91,H=103,z=113,B=666,W=1,V=2,G=3,K=4,J=3;function Q(e,t){return e.msg=u[t],t}function Z(e){return(e<<1)-(e>4?9:0)}function X(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function te(e,t){s._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function re(e,t){e.pending_buf[e.pending++]=t}function ne(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function ie(e,t,r,n){var s=e.avail_in;return s>n&&(s=n),0===s?0:(e.avail_in-=s,i.arraySet(t,e.input,e.next_in,s,r),1===e.state.wrap?e.adler=a(e.adler,t,s,r):2===e.state.wrap&&(e.adler=o(e.adler,t,s,r)),e.next_in+=s,e.total_in+=s,s)}function se(e,t){var r,n,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-C?e.strstart-(e.w_size-C):0,c=e.window,l=e.w_mask,d=e.prev,h=e.strstart+I,f=c[s+a-1],p=c[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+a]===p&&c[r+a-1]===f&&c[r]===c[s]&&c[++r]===c[s+1]){s+=2,r++;do{}while(c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&s<h);if(n=I-(h-s),s=h-I,n>a){if(e.match_start=t,a=n,n>=o)break;f=c[s+a-1],p=c[s+a]}}}while((t=d[t&l])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function ae(e){var t,r,n,s,a,o=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-C)){i.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=o?n-o:0}while(--r);t=r=o;do{n=e.prev[--t],e.prev[t]=n>=o?n-o:0}while(--r);s+=o}if(0===e.strm.avail_in)break;if(r=ie(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=R)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+R-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<R)););}while(e.lookahead<C&&0!==e.strm.avail_in)}function oe(e,t){for(var r,n;;){if(e.lookahead<C){if(ae(e),e.lookahead<C&&t===c)return W;if(0===e.lookahead)break}if(r=0,e.lookahead>=R&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+R-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-C&&(e.match_length=se(e,r)),e.match_length>=R)if(n=s._tr_tally(e,e.strstart-e.match_start,e.match_length-R),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=R){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+R-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(te(e,!1),0===e.strm.avail_out))return W}return e.insert=e.strstart<R-1?e.strstart:R-1,t===h?(te(e,!0),0===e.strm.avail_out?G:K):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?W:V}function ue(e,t){for(var r,n,i;;){if(e.lookahead<C){if(ae(e),e.lookahead<C&&t===c)return W;if(0===e.lookahead)break}if(r=0,e.lookahead>=R&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+R-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=R-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-C&&(e.match_length=se(e,r),e.match_length<=5&&(e.strategy===b||e.match_length===R&&e.strstart-e.match_start>4096)&&(e.match_length=R-1)),e.prev_length>=R&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-R,n=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-R),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+R-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=R-1,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return W}else if(e.match_available){if((n=s._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return W}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<R-1?e.strstart:R-1,t===h?(te(e,!0),0===e.strm.avail_out?G:K):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?W:V}function ce(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function le(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=S,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?F:z,e.adler=2===t.wrap?0:1,t.last_flush=c,s._tr_init(t),p):Q(e,_)}function de(e){var t=le(e);return t===p&&function(e){e.window_size=2*e.w_size,X(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=R-1,e.match_available=0,e.ins_h=0}(e.state),t}function he(e,t,r,n,s,a){if(!e)return _;var o=1;if(t===v&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>x||r!==O||n<8||n>15||t<0||t>9||a<0||a>k)return Q(e,_);8===n&&(n=9);var u=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*A),this.dyn_dtree=new i.Buf16(2*(2*L+1)),this.bl_tree=new i.Buf16(2*(2*P+1)),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(j+1),this.heap=new i.Buf16(2*D+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*D+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return e.state=u,u.strm=e,u.wrap=o,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=s+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+R-1)/R),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<s+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=a,u.method=r,de(e)}n=[new ce(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ae(e),0===e.lookahead&&t===c)return W;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,te(e,!1),0===e.strm.avail_out))return W;if(e.strstart-e.block_start>=e.w_size-C&&(te(e,!1),0===e.strm.avail_out))return W}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?G:K):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),W)}),new ce(4,4,8,4,oe),new ce(4,5,16,8,oe),new ce(4,6,32,32,oe),new ce(4,4,16,16,ue),new ce(8,16,32,32,ue),new ce(8,16,128,128,ue),new ce(8,32,128,256,ue),new ce(32,128,258,1024,ue),new ce(32,258,258,4096,ue)],t.deflateInit=function(e,t){return he(e,t,O,T,E,M)},t.deflateInit2=he,t.deflateReset=de,t.deflateResetKeep=le,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?_:(e.state.gzhead=t,p):_},t.deflate=function(e,t){var r,i,a,u;if(!e||!e.state||t>f||t<0)return e?Q(e,_):_;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===B&&t!==h)return Q(e,0===e.avail_out?y:_);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===F)if(2===i.wrap)e.adler=0,re(i,31),re(i,139),re(i,8),i.gzhead?(re(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),re(i,255&i.gzhead.time),re(i,i.gzhead.time>>8&255),re(i,i.gzhead.time>>16&255),re(i,i.gzhead.time>>24&255),re(i,9===i.level?2:i.strategy>=$||i.level<2?4:0),re(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(re(i,255&i.gzhead.extra.length),re(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=o(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=N):(re(i,0),re(i,0),re(i,0),re(i,0),re(i,0),re(i,9===i.level?2:i.strategy>=$||i.level<2?4:0),re(i,J),i.status=z);else{var g=O+(i.w_bits-8<<4)<<8;g|=(i.strategy>=$||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(g|=Y),g+=31-g%31,i.status=z,ne(i,g),0!==i.strstart&&(ne(i,e.adler>>>16),ne(i,65535&e.adler)),e.adler=1}if(i.status===N)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),ee(e),a=i.pending,i.pending!==i.pending_buf_size));)re(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=U)}else i.status=U;if(i.status===U)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),ee(e),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,re(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=q)}else i.status=q;if(i.status===q)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),ee(e),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,re(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=H)}else i.status=H;if(i.status===H&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ee(e),i.pending+2<=i.pending_buf_size&&(re(i,255&e.adler),re(i,e.adler>>8&255),e.adler=0,i.status=z)):i.status=z),0!==i.pending){if(ee(e),0===e.avail_out)return i.last_flush=-1,p}else if(0===e.avail_in&&Z(t)<=Z(r)&&t!==h)return Q(e,y);if(i.status===B&&0!==e.avail_in)return Q(e,y);if(0!==e.avail_in||0!==i.lookahead||t!==c&&i.status!==B){var v=i.strategy===$?function(e,t){for(var r;;){if(0===e.lookahead&&(ae(e),0===e.lookahead)){if(t===c)return W;break}if(e.match_length=0,r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return W}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?G:K):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?W:V}(i,t):i.strategy===w?function(e,t){for(var r,n,i,a,o=e.window;;){if(e.lookahead<=I){if(ae(e),e.lookahead<=I&&t===c)return W;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=R&&e.strstart>0&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){a=e.strstart+I;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);e.match_length=I-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=R?(r=s._tr_tally(e,1,e.match_length-R),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(te(e,!1),0===e.strm.avail_out))return W}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?G:K):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?W:V}(i,t):n[i.level].func(i,t);if(v!==G&&v!==K||(i.status=B),v===W||v===G)return 0===e.avail_out&&(i.last_flush=-1),p;if(v===V&&(t===l?s._tr_align(i):t!==f&&(s._tr_stored_block(i,0,0,!1),t===d&&(X(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ee(e),0===e.avail_out))return i.last_flush=-1,p}return t!==h?p:i.wrap<=0?m:(2===i.wrap?(re(i,255&e.adler),re(i,e.adler>>8&255),re(i,e.adler>>16&255),re(i,e.adler>>24&255),re(i,255&e.total_in),re(i,e.total_in>>8&255),re(i,e.total_in>>16&255),re(i,e.total_in>>24&255)):(ne(i,e.adler>>>16),ne(i,65535&e.adler)),ee(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:m)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==F&&t!==N&&t!==U&&t!==q&&t!==H&&t!==z&&t!==B?Q(e,_):(e.state=null,t===z?Q(e,g):p):_},t.deflateSetDictionary=function(e,t){var r,n,s,o,u,c,l,d,h=t.length;if(!e||!e.state)return _;if(2===(o=(r=e.state).wrap)||1===o&&r.status!==F||r.lookahead)return _;for(1===o&&(e.adler=a(e.adler,t,h,0)),r.wrap=0,h>=r.w_size&&(0===o&&(X(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,t,h-r.w_size,r.w_size,0),t=d,h=r.w_size),u=e.avail_in,c=e.next_in,l=e.input,e.avail_in=h,e.next_in=0,e.input=t,ae(r);r.lookahead>=R;){n=r.strstart,s=r.lookahead-(R-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+R-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--s);r.strstart=n,r.lookahead=R-1,ae(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=R-1,r.match_available=0,e.next_in=c,e.input=l,e.avail_in=u,r.wrap=o,p},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){"use strict";var n=r(1226),i=r(93),s=r(436),a=r(250),o=r(435),u=Object.prototype.toString,c=0,l=-1,d=0,h=8;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({level:l,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==c)throw new Error(a[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,p))!==c)throw new Error(a[r]);this._dict_set=!0}}function p(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}f.prototype.push=function(e,t){var r,a,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=s.string2buf(e):"[object ArrayBuffer]"===u.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(l),o.next_out=0,o.avail_out=l),1!==(r=n.deflate(o,a))&&r!==c)return this.onEnd(r),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(o.output,o.next_out))):this.onData(i.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c):2!==a||(this.onEnd(c),o.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=f,t.deflate=p,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compress=function(e){return n.default.gzip(e)},t.decompress=function(e){return n.default.gunzip(e,{to:"string"})};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(439))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(24)),i=l(r(11)),s=l(r(22)),a=l(r(47)),o=r(55),u=r(52),c=r(61);function l(e){return e&&e.__esModule?e:{default:e}}const d={};chrome.runtime.connect({name:"encrypted-query"}).onMessage.addListener(e=>{const t=d[e.eID].cb;delete d[e.eID],t&&t(e.data)});const h={SKIN_PATH:"modules/static/skin/",RESULTS_TIMEOUT:1e3,trk:[],telemetry:(()=>{let e=null,t=-1,r=null,c=[];const l=500;function d(e){try{const t=JSON.parse(e.response);t.new_session&&i.default.set("session",t.new_session),c=[],r=null}catch(e){}}function f(){n.default.log(`push telemetry failed: ${c.length} elements`,"pushTelemetry"),h.trk=c.concat(h.trk);const e=h.trk.length-l+100;e>0&&(n.default.log(`discarding ${e}old telemetry data`,"pushTelemetry"),h.trk=h.trk.slice(e)),c=[],r=null}function p(){i.default.set("telemetrySeq",t),r||(c=h.trk.slice(0),h.trk=[],n.default.log(`push telemetry data: ${c.length} elements`,"pushTelemetry"),(r=(0,o.promiseHttpHandler)("POST",s.default.settings.STATISTICS,JSON.stringify(c),1e4,!0)).then(d),r.catch(f))}return(r,s)=>{"environment"!==r.type&&a.default.isPrivateMode()||(n.default.log(r,"Utils.telemetry"),i.default.get("telemetry",!0)&&(u.isCliqzBrowser&&"environment"!==r.type&&!0!==i.default.get("uploadEnabled",!0,"datareporting.healthreport.")||(r.session=i.default.get("session"),r.ts=Date.now(),r.seq=(-1===t&&(t=i.default.get("telemetrySeq",0)),t=(t+1)%2147483647),h.trk.push(r),clearTimeout(e),s||h.trk.length%100==0?p():e=setTimeout(p,6e4))))}})(),Promise:Promise,OS:"chromium",isPrivate:()=>chrome.extension.inIncognitoContext,isOnPrivateTab:()=>chrome.extension.inIncognitoContext,getWindow:()=>c.window,openLink(e,t){chrome.tabs.getCurrent(e=>chrome.tabs.update(e.id,{url:t}))},setSupportInfo(){},restoreHiddenSearchEngines(){},addEngineWithDetails(){},_waitForSearchService:()=>Promise.resolve()};t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(441)),i=s(r(1183));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Background:n.default,Window:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(1230)),i=p(r(1179)),s=p(r(1167)),a=p(r(1147)),o=p(r(1137)),u=p(r(807)),c=p(r(801)),l=p(r(798)),d=p(r(737)),h=p(r(731)),f=p(r(652));function p(e){return e&&e.__esModule?e:{default:e}}t.default={core:n.default,"message-center":i.default,"human-web":s.default,hpn:a.default,antitracking:o.default,"webrequest-pipeline":u.default,static:c.default,"offers-v2":l.default,adblocker:d.default,anolysis:h.default,"anti-phishing":f.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lifecycleEvents=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=h(r(24)),s=h(r(1231)),a=h(r(81)),o=h(r(214)),u=h(r(649)),c=h(r(31)),l=r(66),d=h(r(422));function h(e){return e&&e.__esModule?e:{default:e}}const f=t.lifecycleEvents={enabled:"enabled",disabled:"disabled"},p=Object.keys(f).map(e=>f[e]);class m extends a.default{get(e){const t=this._getKey(e);return super.get(t)}delete(e){const t=this._getKey(e);return super.delete(t)}_getKey(e){return new l.Window(e).id}}t.default=class extends d.default{constructor(e,t){var r;r=super(p),this.unloadWindow=function(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).disable;const n=r.getWindowModule(e);n&&(t&&n.disable&&(i.default.log("Module window",`"${r.name}"`,"disabling"),n.disable()),i.default.log("Module window",`"${r.name}"`,"unloading"),n.unload(),r._windows.delete(e),i.default.log("Module window",`"${r.name}"`,"unloading finished"))},this.name=e,this.loadingTime=null,this.settings=t,this._bgReadyDefer=new o.default,this._state="disabled",this._stat={init:0,load:0},this._windows=new m(()=>({windowModule:null,loadingDefer:new o.default,loadingTime:null,loadingStarted:!1}))}get providedServices(){return this._services?this._services:(this._services=Object.create(null),Object.keys(this.backgroundModule.providesServices||{}).forEach(e=>{const t=this.backgroundModule.providesServices[e];this._services[e]=new u.default(t)}),this._services)}get requiredServices(){return this.backgroundModule.requiresServices||[]}isReady(){return this._bgReadyDefer.promise}get backgroundModule(){return s.default[this.name].Background}get WindowModule(){return s.default[this.name].Window}get isEnabled(){return"enabled"===this._state}get isEnabling(){return"enabling"===this._state}get isDisabled(){return"disabled"===this._state}markAsEnabling(){this._state="enabling"}enable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.default.log("Module",this.name,"start loading");const t=Date.now();return Promise.resolve(this.backgroundModule).then(t=>(this.background=t,t.init(this.settings,e))).then(()=>{this._state="enabled",this.loadingTime=Date.now()-t,i.default.log("Module: ",this.name," -- Background loaded"),this._bgReadyDefer.resolve(),this.emit(f.enabled)}).catch(e=>{throw this._state="disabled",this._bgReadyDefer.reject(e),e})}disable(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{quick:!1}).quick;i.default.log("Module",this.name,"start unloading");const t=this.background;e?(t.beforeBrowserShutdown||function(){}).call(t):(t.unload(),this._state="disabled",this.loadingTime=null,this._bgReadyDefer=new o.default),i.default.log("Module",this.name,"unloading finished"),this.emit(f.disabled)}loadWindow(e){if(this.isDisabled)return Promise.reject("cannot load window of disabled module");const t=this._windows.get(e),r=t.loadingDefer;if(t.loadingStarted)return i.default.log("Module window:",`"${this.name}"`,"already being loaded"),r.promise;i.default.log("Module window:",`"${this.name}"`,"loading started"),t.loadingStarted=!0;const s=Date.now();let a;return Promise.all([new this.WindowModule({settings:this.settings,window:e,windowId:new l.Window(e).id,background:this.backgroundModule}),this.isReady()]).then(e=>{let r=n(e,1)[0];return a=Date.now(),t.windowModule=r,r.init()}).then(()=>(t.initTime=Date.now()-a,t.loadingTime=Date.now()-s,this._stat.init+=t.initTime,this._stat.load+=t.loadingTime,i.default.log("Module window:",`"${this.name}"`,"loading finished"),r.resolve(),r.promise)).catch(e=>{throw r.reject(e),e})}getWindowModule(e){return this._windows.get(e).windowModule}getWindowLoadingPromise(e){return this._windows.get(e).loadingDefer.promise}getLoadingTime(e){return this._windows.get(e).loadingTime}getInitTime(e){return this._windows.get(e).initTime}status(){return{isEnabled:this.isEnabled}}action(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return c.default.module(this.name).action(e,...r)}windowAction(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return c.default.module(this.name).windowAction(e,t,...n)}}},function(e,t,r){e.exports=r(456)}]);